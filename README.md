# ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i tháº¿ giá»›i cá»§a nhá»¯ng cÃ¢u há»i phá»ng váº¥n Java! Äá»«ng lo láº¯ng, chÃºng ta sáº½ cÃ¹ng nhau bÃ³c tÃ¡ch tá»«ng váº¥n Ä‘á» má»™t cÃ¡ch tháº­t "dá»… thá»Ÿ", giá»‘ng nhÆ° Ä‘ang ngá»“i uá»‘ng cÃ  phÃª vÃ  tÃ¡n gáº«u vá» láº­p trÃ¬nh váº­y.

Sáºµn sÃ ng chÆ°a? HÃ£y báº¯t Ä‘áº§u thÃ´i!

### 1. Java lÃ  gÃ¬? Táº¡i sao ai cÅ©ng dÃ¹ng nÃ³?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng Java giá»‘ng nhÆ° má»™t chiáº¿c xe Ä‘a nÄƒng. Báº¡n viáº¿t mÃ£ má»™t láº§n, vÃ  chiáº¿c xe Ä‘Ã³ cÃ³ thá»ƒ cháº¡y trÃªn má»i loáº¡i Ä‘á»‹a hÃ¬nh: Windows, Mac, hay Linux. ÄÃ³ chÃ­nh lÃ  triáº¿t lÃ½ **"Viáº¿t má»™t láº§n, cháº¡y má»i nÆ¡i"** (Write Once, Run Anywhere).

*   **Äáº·c Ä‘iá»ƒm ná»•i báº­t:** NÃ³ hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng (má»i thá»© xoay quanh cÃ¡c "Object"), cá»±c ká»³ báº£o máº­t vÃ  cÃ³ bá»™ dá»n rÃ¡c tá»± Ä‘á»™ng (Garbage Collection) giÃºp báº¡n khÃ´ng pháº£i lo láº¯ng vá» viá»‡c trÃ n bá»™ nhá»›.

### 2. Sá»± khÃ¡c biá»‡t giá»¯a JDK, JRE vÃ  JVM lÃ  gÃ¬?

ÄÃ¢y lÃ  cÃ¢u há»i kinh Ä‘iá»ƒn! HÃ£y nghÄ© vá» nÃ³ nhÆ° má»™t bá»™ bÃºp bÃª Nga Matryoshka:

*   **JVM (Java Virtual Machine):** LÃ  trÃ¡i tim. NÃ³ thá»±c thi mÃ£ Bytecode. NÃ³ giá»‘ng nhÆ° cÃ¡i Ä‘á»™ng cÆ¡ váº­y.
*   **JRE (Java Runtime Environment):** LÃ  cÃ¡i vá» xe bao quanh Ä‘á»™ng cÆ¡. NÃ³ chá»©a JVM vÃ  cÃ¡c thÆ° viá»‡n Ä‘á»ƒ chÆ°Æ¡ng trÃ¬nh cÃ³ thá»ƒ cháº¡y Ä‘Æ°á»£c.
*   **JDK (Java Development Kit):** LÃ  cáº£ má»™t xÆ°á»Ÿng sáº£n xuáº¥t xe. NÃ³ bao gá»“m JRE vÃ  cÃ¡c cÃ´ng cá»¥ dÃ nh cho láº­p trÃ¬nh viÃªn (nhÆ° trÃ¬nh biÃªn dá»‹ch `javac`).

> **Ghi nhá»› nhanh:** Náº¿u báº¡n chá»‰ muá»‘n cháº¡y pháº§n má»m, báº¡n cáº§n JRE. Náº¿u báº¡n muá»‘n viáº¿t code, báº¡n cáº§n JDK.

### 3. "HÆ°á»›ng Ä‘á»‘i tÆ°á»£ng" (OOP) cÃ³ gÃ¬ hay?

OOP giá»‘ng nhÆ° viá»‡c báº¡n thiáº¿t káº¿ má»™t báº£n váº½ cho má»™t ngÃ´i nhÃ . CÃ³ 4 trá»¥ cá»™t chÃ­nh mÃ  báº¡n pháº£i nhá»› náº±m lÃ²ng:

1.  **TÃ­nh trá»«u tÆ°á»£ng (Abstraction):** Chá»‰ cho ngÆ°á»i dÃ¹ng tháº¥y nhá»¯ng gÃ¬ cáº§n thiáº¿t. Báº¡n biáº¿t cÃ¡ch lÃ¡i xe, nhÆ°ng khÃ´ng cáº§n biáº¿t chi tiáº¿t piston hoáº¡t Ä‘á»™ng ra sao.
2.  **TÃ­nh Ä‘Ã³ng gÃ³i (Encapsulation):** Giá»¯ dá»¯ liá»‡u an toÃ n bÃªn trong lá»›p (Class). Giáº¥u Ä‘i cÃ¡c biáº¿n quan trá»ng vÃ  chá»‰ cho phÃ©p truy cáº­p qua cÃ¡c phÆ°Æ¡ng thá»©c (Getter/Setter).
3.  **TÃ­nh káº¿ thá»«a (Inheritance):** Lá»›p con thá»«a hÆ°á»Ÿng Ä‘áº·c Ä‘iá»ƒm tá»« lá»›p cha. "Xe con" lÃ  má»™t loáº¡i "PhÆ°Æ¡ng tiá»‡n giao thÃ´ng".
4.  **TÃ­nh Ä‘a hÃ¬nh (Polymorphism):** Má»™t hÃ nh Ä‘á»™ng, nhiá»u cÃ¡ch thá»±c hiá»‡n. VÃ­ dá»¥: CÃ¹ng lÃ  lá»‡nh `keu()`, nhÆ°ng Con ChÃ³ thÃ¬ "GÃ¢u gÃ¢u", cÃ²n Con MÃ¨o thÃ¬ "Meo meo".

### 4. String trong Java cÃ³ gÃ¬ Ä‘áº·c biá»‡t?

Trong Java, `String` lÃ  **Immutable** (Báº¥t biáº¿n). 

```java
String s = "Hello";
s.concat(" World");
System.out.println(s); // Váº«n chá»‰ in ra "Hello" thÃ´i!
```

Khi báº¡n thay Ä‘á»•i má»™t chuá»—i, Java khÃ´ng sá»­a chuá»—i cÅ© mÃ  táº¡o ra má»™t chuá»—i hoÃ n toÃ n má»›i trong bá»™ nhá»›. Táº¡i sao Æ°? Äá»ƒ tiáº¿t kiá»‡m bá»™ nhá»› (nhá» String Pool) vÃ  tÄƒng tÃ­nh báº£o máº­t Ä‘áº¥y!

### 5. Sá»± khÃ¡c biá»‡t giá»¯a `==` vÃ  `.equals()`

Äá»«ng Ä‘á»ƒ bá»‹ lá»«a nhÃ©!

*   **`==`**: So sÃ¡nh cÃ¡i "vá»". NÃ³ kiá»ƒm tra xem hai biáº¿n cÃ³ trá» cÃ¹ng vÃ o má»™t Ã´ nhá»› hay khÃ´ng.
*   **`.equals()`**: So sÃ¡nh cÃ¡i "ruá»™t". NÃ³ kiá»ƒm tra xem ná»™i dung bÃªn trong cÃ³ giá»‘ng nhau khÃ´ng.

### 6. Interface vÃ  Abstract Class khÃ¡c nhau chá»— nÃ o?

HÃ£y coi chÃºng lÃ  nhá»¯ng báº£n há»£p Ä‘á»“ng:

*   **Abstract Class:** LÃ  má»™t lá»›p "ná»­a vá»i". NÃ³ cÃ³ thá»ƒ cÃ³ cáº£ nhá»¯ng phÆ°Æ¡ng thá»©c Ä‘Ã£ lÃ m xong vÃ  nhá»¯ng phÆ°Æ¡ng thá»©c cÃ²n bá» ngá». DÃ¹ng khi cÃ¡c lá»›p cÃ³ quan há»‡ há» hÃ ng gáº§n gÅ©i.
*   **Interface:** LÃ  má»™t báº£n cam káº¿t 100%. NÃ³ Ä‘á»‹nh nghÄ©a "kháº£ nÄƒng" cá»§a má»™t Ä‘á»‘i tÆ°á»£ng (vÃ­ dá»¥: `CanFly`, `CanSwim`). Má»™t lá»›p cÃ³ thá»ƒ thá»±c thi (implements) nhiá»u Interface cÃ¹ng lÃºc.

---

**Lá»i khuyÃªn nhá»:** Äá»«ng cá»‘ há»c thuá»™c lÃ²ng. HÃ£y thá»­ gÃµ code, lÃ m cho nÃ³ cháº¡y sai, rá»“i sá»­a cho Ä‘Ãºng. ÄÃ³ lÃ  cÃ¡ch tá»‘t nháº¥t Ä‘á»ƒ "ngáº¥m" Java vÃ o mÃ¡u! ChÃºc báº¡n phá»ng váº¥n thÃ nh cÃ´ng

ChÃ o báº¡n! Báº¡n Ä‘ang chuáº©n bá»‹ cho buá»•i phá»ng váº¥n Java sáº¯p tá»›i? Äá»«ng quÃ¡ lo láº¯ng! HÃ£y cÃ¹ng mÃ¬nh dáº¡o qua nhá»¯ng cÃ¢u há»i "kinh Ä‘iá»ƒn" nháº¥t mÃ  cÃ¡c nhÃ  tuyá»ƒn dá»¥ng thÆ°á»ng há»i nhÃ©. ChÃºng ta sáº½ giáº£i thÃ­ch má»i thá»© tháº­t Ä‘Æ¡n giáº£n, nhÆ° Ä‘ang ngá»“i uá»‘ng cÃ  phÃª tÃ¡n gáº«u váº­y!

### 1. Java thá»±c sá»± lÃ  gÃ¬?
HÃ£y tÆ°á»Ÿng tÆ°á»£ng Java giá»‘ng nhÆ° má»™t ngÃ´n ngá»¯ toÃ n cáº§u. Báº¡n viáº¿t mÃ£ má»™t láº§n, vÃ  nÃ³ cÃ³ thá»ƒ cháº¡y á»Ÿ báº¥t cá»© Ä‘Ã¢u (Windows, Mac, Linux) nhá» vÃ o kháº©u hiá»‡u ná»•i tiáº¿ng: **"Write Once, Run Anywhere"**.

### 2. Táº¡i sao Java láº¡i khÃ´ng pháº£i lÃ  ngÃ´n ngá»¯ hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng "thuáº§n tÃºy"?
Nghe cÃ³ váº» láº¡ Ä‘Ãºng khÃ´ng? Java ráº¥t yÃªu thÃ­ch cÃ¡c Äá»‘i tÆ°á»£ng (Objects), nhÆ°ng nÃ³ váº«n giá»¯ láº¡i nhá»¯ng "ngÆ°á»i báº¡n cÅ©" lÃ  cÃ¡c kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y (primitive types) nhÆ° `int`, `char`, `float`. VÃ¬ nhá»¯ng kiá»ƒu nÃ y khÃ´ng pháº£i lÃ  Ä‘á»‘i tÆ°á»£ng, nÃªn Java khÃ´ng Ä‘Æ°á»£c gá»i lÃ  thuáº§n tÃºy 100%.

### 3. JVM, JRE vÃ  JDK khÃ¡c nhau chá»— nÃ o?
ÄÃ¢y lÃ  bá»™ ba mÃ  ai cÅ©ng hay nháº§m láº«n. HÃ£y nhá»› tháº¿ nÃ y:
*   **JVM (Java Virtual Machine):** LÃ  chiáº¿c mÃ¡y áº£o trá»±c tiáº¿p cháº¡y mÃ£ code cá»§a báº¡n.
*   **JRE (Java Runtime Environment):** LÃ  "há»™p cÃ´ng cá»¥" chá»©a JVM vÃ  cÃ¡c thÆ° viá»‡n Ä‘á»ƒ chÆ°Æ¡ng trÃ¬nh cÃ³ thá»ƒ cháº¡y Ä‘Æ°á»£c.
*   **JDK (Java Development Kit):** LÃ  "bá»™ Ä‘á»“ nghá»" Ä‘áº§y Ä‘á»§ nháº¥t cho láº­p trÃ¬nh viÃªn, bao gá»“m cáº£ JRE vÃ  cÃ¡c cÃ´ng cá»¥ Ä‘á»ƒ biÃªn dá»‹ch (compiler).

### 4. Biáº¿n "Static" lÃ  gÃ¬?
HÃ£y nghÄ© vá» má»™t biáº¿n `static` nhÆ° má»™t mÃ³n Ä‘á»“ dÃ¹ng chung cho cáº£ lá»›p há»c.
*   NÃ³ thuá»™c vá» **Lá»›p (Class)** chá»© khÃ´ng pháº£i cá»§a riÃªng má»™t **Äá»‘i tÆ°á»£ng (Object)** nÃ o.
*   Táº¥t cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng táº¡o ra tá»« lá»›p Ä‘Ã³ Ä‘á»u dÃ¹ng chung má»™t giÃ¡ trá»‹ nÃ y.

```java
class Student {
    static String schoolName = "Head First High School"; // Ai cÅ©ng há»c trÆ°á»ng nÃ y!
}
```

### 5. Táº¡i sao String trong Java láº¡i "báº¥t biáº¿n" (Immutable)?
"Báº¥t biáº¿n" nghe cao siÃªu quÃ¡ pháº£i khÃ´ng? Thá»±c ra nÃ³ chá»‰ cÃ³ nghÄ©a lÃ : **Má»™t khi báº¡n Ä‘Ã£ táº¡o ra má»™t chuá»—i String, báº¡n khÃ´ng thá»ƒ thay Ä‘á»•i nÃ³ Ä‘Æ°á»£c ná»¯a.**
*   Náº¿u báº¡n cá»‘ tÃ¬nh sá»­a nÃ³, Java sáº½ láº·ng láº½ táº¡o ra má»™t chuá»—i má»›i hoÃ n toÃ n á»Ÿ má»™t gÃ³c khÃ¡c trong bá»™ nhá»›.
*   Viá»‡c nÃ y giÃºp Java tiáº¿t kiá»‡m bá»™ nhá»› vÃ  báº£o máº­t hÆ¡n ráº¥t nhiá»u.

### 6. Sá»± khÃ¡c biá»‡t giá»¯a `==` vÃ  phÆ°Æ¡ng thá»©c `.equals()`
ÄÃ¢y lÃ  cÃ¡i báº«y phá»• biáº¿n nháº¥t!
*   **`==`**: Giá»‘ng nhÆ° báº¡n Ä‘ang so sÃ¡nh hai chiáº¿c chÃ¬a khÃ³a. NÃ³ kiá»ƒm tra xem hai biáº¿n cÃ³ trá» cÃ¹ng vÃ o má»™t "Ã´ nhá»›" hay khÃ´ng.
*   **`.equals()`**: Giá»‘ng nhÆ° báº¡n Ä‘ang má»Ÿ há»™p ra xem ná»™i dung bÃªn trong. NÃ³ so sÃ¡nh giÃ¡ trá»‹ thá»±c sá»± chá»©a trong Ä‘á»‘i tÆ°á»£ng.

### 7. TÃ­nh Káº¿ thá»«a (Inheritance) lÃ  gÃ¬?
HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t lá»›p `Xe`. Lá»›p `XeDap` vÃ  `Oto` cÃ³ thá»ƒ "thá»«a hÆ°á»Ÿng" nhá»¯ng Ä‘áº·c Ä‘iá»ƒm chung nhÆ° `tocDo` hay `phanh()`. Báº¡n khÃ´ng cáº§n pháº£i viáº¿t láº¡i nhá»¯ng thá»© Ä‘Ã³ tá»« Ä‘áº§u. Tiáº¿t kiá»‡m cÃ´ng sá»©c cá»±c ká»³!

### 8. Náº¡p chá»“ng (Overloading) vs Ghi Ä‘Ã¨ (Overriding)
*   **Overloading:** Trong cÃ¹ng má»™t lá»›p, báº¡n cÃ³ nhiá»u phÆ°Æ¡ng thá»©c cÃ¹ng tÃªn nhÆ°ng khÃ¡c nhau vá» "Ä‘áº§u vÃ o" (tham sá»‘). Giá»‘ng nhÆ° mÃ¡y giáº·t cÃ³ nhiá»u cháº¿ Ä‘á»™: giáº·t Ã­t Ä‘á»“, giáº·t nhiá»u Ä‘á»“.
*   **Overriding:** Lá»›p con Ä‘á»‹nh nghÄ©a láº¡i má»™t phÆ°Æ¡ng thá»©c Ä‘Ã£ cÃ³ á»Ÿ lá»›p cha Ä‘á»ƒ lÃ m theo Ã½ mÃ¬nh. Giá»‘ng nhÆ° viá»‡c con cÃ¡i cÃ³ cÃ¡ch "náº¥u cÆ¡m" khÃ¡c vá»›i cha máº¹ váº­y.

### 9. Interface vÃ  Abstract Class cÃ³ gÃ¬ khÃ¡c?
*   **Interface:** Giá»‘ng nhÆ° má»™t báº£n "há»£p Ä‘á»“ng". Náº¿u báº¡n tham gia, báº¡n báº¯t buá»™c pháº£i thá»±c hiá»‡n cÃ¡c Ä‘iá»u khoáº£n (phÆ°Æ¡ng thá»©c) trong Ä‘Ã³.
*   **Abstract Class:** Giá»‘ng nhÆ° má»™t báº£n thiáº¿t káº¿ dang dá»Ÿ. NÃ³ cho phÃ©p báº¡n giá»¯ láº¡i má»™t sá»‘ Ä‘áº·c Ä‘iá»ƒm chung vÃ  Ä‘á»ƒ pháº§n cÃ²n láº¡i cho cÃ¡c lá»›p con tá»± hoÃ n thiá»‡n.

### 10. Xá»­ lÃ½ ngoáº¡i lá»‡ (Exception Handling)
Äá»i khÃ´ng nhÆ° lÃ  mÆ¡, vÃ  code cÅ©ng váº­y! Java dÃ¹ng `try-catch` Ä‘á»ƒ á»©ng phÃ³ vá»›i lá»—i:
*   **try:** Thá»­ cháº¡y Ä‘oáº¡n code "nguy hiá»ƒm".
*   **catch:** Náº¿u cÃ³ chuyá»‡n gÃ¬ xáº£y ra, hÃ£y nháº£y vÃ o Ä‘Ã¢y Ä‘á»ƒ xá»­ lÃ½ thay vÃ¬ Ä‘á»ƒ chÆ°Æ¡ng trÃ¬nh bá»‹ "sáº­p".

ChÃºc báº¡n Ã´n táº­p tháº­t tá»‘t vÃ  tá»± tin tá»a sÃ¡ng trong buá»•i phá»ng váº¥n nhÃ©! Báº¡n lÃ m Ä‘Æ°á»£c mÃ !

### Má»¥c lá»¥c ná»™i dung

ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i tháº¿ giá»›i láº­p trÃ¬nh! Äá»«ng lo láº¯ng náº¿u báº¡n tháº¥y má»i thá»© cÃ³ váº» ráº¯c rá»‘i lÃºc Ä‘áº§u. ChÃºng ta sáº½ cÃ¹ng nhau bÃ³c tÃ¡ch tá»«ng chÃºt má»™t, giá»‘ng nhÆ° Ä‘ang cÃ¹ng uá»‘ng má»™t tÃ¡ch cÃ  phÃª vÃ  tÃ¡n gáº«u vá» mÃ£ nguá»“n váº­y. â˜•ï¸

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang dáº¡y má»™t chÃº robot cÃ¡ch pha trÃ . Báº¡n khÃ´ng thá»ƒ chá»‰ nÃ³i "LÃ m Ä‘i!", mÃ  pháº£i chá»‰ dáº«n tá»«ng bÆ°á»›c siÃªu nhá». ÄÃ³ chÃ­nh lÃ  cÃ¡ch chÃºng ta lÃ m viá»‡c vá»›i mÃ¡y tÃ­nh!

DÆ°á»›i Ä‘Ã¢y lÃ  nhá»¯ng gÃ¬ chÃºng ta sáº½ cÃ¹ng khÃ¡m phÃ¡:

<!-- TOC_START -->

### 1. Biáº¿n (Variables) - Nhá»¯ng chiáº¿c há»™p ká»³ diá»‡u
HÃ£y coi **biáº¿n** nhÆ° nhá»¯ng chiáº¿c há»™p giá»¯ Ä‘á»“. Báº¡n dÃ¡n nhÃ£n cho há»™p (tÃªn biáº¿n) vÃ  bá» thá»© gÃ¬ Ä‘Ã³ vÃ o bÃªn trong (giÃ¡ trá»‹).

```java
int sá»‘_ly_cafÃ© = 2; 
// ChÃºng ta vá»«a táº¡o má»™t cÃ¡i há»™p tÃªn lÃ  'sá»‘_ly_cafÃ©' vÃ  bá» sá»‘ 2 vÃ o Ä‘Ã³!
```

### 2. Kiá»ƒu dá»¯ liá»‡u (Data Types) - Há»™p nÃ o Ä‘á»±ng Ä‘á»“ náº¥y?
Báº¡n khÃ´ng thá»ƒ bá» nÆ°á»›c sÃºp vÃ o má»™t chiáº¿c há»™p báº±ng giáº¥y, Ä‘Ãºng khÃ´ng? Trong láº­p trÃ¬nh cÅ©ng váº­y:
*   `int`: DÃ¹ng cho sá»‘ nguyÃªn (nhÆ° 1, 2, 3).
*   `String`: DÃ¹ng cho chá»¯ viáº¿t (nhÆ° "ChÃ o báº¡n!").
*   `boolean`: Chá»‰ cÃ³ hai tráº¡ng thÃ¡i: ÄÃºng (true) hoáº·c Sai (false).

### 3. HÃ m (Functions/Methods) - Nhá»¯ng cá»— mÃ¡y mini
HÃ m giá»‘ng nhÆ° má»™t chiáº¿c mÃ¡y nÆ°á»›ng bÃ¡nh mÃ¬. Báº¡n cho bÃ¡nh mÃ¬ vÃ o (Ä‘áº§u vÃ o), mÃ¡y lÃ m viá»‡c cá»§a nÃ³, vÃ  bÃ¹m... bÃ¡nh mÃ¬ giÃ²n rá»¥m hiá»‡n ra (Ä‘áº§u ra)!

```java
void pha_cafÃ©() {
    // CÃ¡c bÆ°á»›c pha cafÃ© náº±m á»Ÿ Ä‘Ã¢y
    System.out.println("Äang pha cafÃ© cho báº¡n...");
}
```

### 4. VÃ²ng láº·p (Loops) - Äá»«ng báº¯t tÃ´i nháº¯c láº¡i chá»©!
Thay vÃ¬ viáº¿t "Ä‚n má»™t miáº¿ng" 10 láº§n, báº¡n chá»‰ cáº§n báº£o mÃ¡y tÃ­nh: "Cá»© Äƒn Ä‘i cho Ä‘áº¿n khi háº¿t bÃ¡t cÆ¡m!". ÄÃ³ chÃ­nh lÃ  sá»©c máº¡nh cá»§a vÃ²ng láº·p.

### Báº¡n Ä‘Ã£ sáºµn sÃ ng chÆ°a?
Äá»«ng sá»£ lÃ m sai! Trong tháº¿ giá»›i nÃ y, má»—i láº§n gáº·p lá»—i (bug) lÃ  má»™t láº§n báº¡n thÃ´ng minh hÆ¡n Ä‘áº¥y. HÃ£y báº¯t Ä‘áº§u thÃ´i!

<!-- TOC_END -->
| STT | CÃ¢u há»i |
| :--- | :--- |

ChÃ o báº¡n! Báº¡n Ä‘Ã£ sáºµn sÃ ng khÃ¡m phÃ¡ tháº¿ giá»›i láº­p trÃ¬nh chÆ°a? Äá»«ng lo láº¯ng náº¿u má»i thá»© trÃ´ng cÃ³ váº» má»›i máº». ChÃºng ta sáº½ cÃ¹ng nhau Ä‘i tá»«ng bÆ°á»›c má»™t, cháº­m rÃ£i vÃ  cháº¯c cháº¯n. DÆ°á»›i Ä‘Ã¢y lÃ  danh sÃ¡ch nhá»¯ng cÃ¢u há»i thÃº vá»‹ Ä‘á»ƒ giÃºp báº¡n kiá»ƒm tra kiáº¿n thá»©c cá»§a mÃ¬nh Ä‘áº¥y!

1.  **Biáº¿n (Variable) lÃ  gÃ¬ nhá»‰?**
    HÃ£y tÆ°á»Ÿng tÆ°á»£ng biáº¿n giá»‘ng nhÆ° má»™t chiáº¿c há»™p nhá». Báº¡n cÃ³ thá»ƒ Ä‘áº·t má»™t giÃ¡ trá»‹ vÃ o trong Ä‘Ã³, dÃ¡n nhÃ£n cho nÃ³ vÃ  láº¥y ra dÃ¹ng báº¥t cá»© khi nÃ o cáº§n. Tháº­t tiá»‡n lá»£i pháº£i khÃ´ng?

2.  **LÃ m sao Ä‘á»ƒ mÃ¡y tÃ­nh hiá»ƒu Ä‘Æ°á»£c "lá»i nÃ³i" cá»§a chÃºng ta?**
    MÃ¡y tÃ­nh thá»±c ra khÃ¡... Ä‘Æ¡n giáº£n. ChÃºng chá»‰ hiá»ƒu Ä‘Æ°á»£c cÃ¡c con sá»‘ 0 vÃ  1. VÃ¬ váº­y, chÃºng ta cáº§n má»™t "thÃ´ng dá»‹ch viÃªn" (gá»i lÃ  TrÃ¬nh biÃªn dá»‹ch - Compiler) Ä‘á»ƒ dá»‹ch mÃ£ code Ä‘áº¹p Ä‘áº½ cá»§a báº¡n sang ngÃ´n ngá»¯ mÃ  mÃ¡y tÃ­nh cÃ³ thá»ƒ cháº¡y Ä‘Æ°á»£c.

3.  **HÃ m (Method) dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?**
    HÃ£y nghÄ© vá» hÃ m nhÆ° má»™t "cá»— mÃ¡y" chuyÃªn dá»¥ng. Báº¡n Ä‘Æ°a nguyÃªn liá»‡u vÃ o má»™t Ä‘áº§u, cá»— mÃ¡y xá»­ lÃ½ vÃ  tráº£ káº¿t quáº£ á»Ÿ Ä‘áº§u kia. Thay vÃ¬ pháº£i viáº¿t Ä‘i viáº¿t láº¡i má»™t Ä‘oáº¡n code, báº¡n chá»‰ cáº§n gá»i tÃªn "cá»— mÃ¡y" Ä‘Ã³ ra lÃ  xong!

```java
// ÄÃ¢y lÃ  cÃ¡ch chÃºng ta táº¡o ra má»™t "cá»— mÃ¡y" chÃ o há»i Ä‘Æ¡n giáº£n:
void sayHello() {
    System.out.println("Xin chÃ o ngÆ°á»i báº¡n má»›i!");
}
```

*   **Ghi nhá»›:** Láº­p trÃ¬nh khÃ´ng khÃ³, quan trá»ng lÃ  báº¡n hiá»ƒu Ä‘Æ°á»£c báº£n cháº¥t Ä‘áº±ng sau nhá»¯ng dÃ²ng code.
*   **Thá»­ thÃ¡ch:** Báº¡n cÃ³ thá»ƒ tá»± giáº£i thÃ­ch láº¡i nhá»¯ng khÃ¡i niá»‡m nÃ y cho má»™t ngÆ°á»i báº¡n khÃ´ng? ÄÃ³ lÃ  cÃ¡ch tá»‘t nháº¥t Ä‘á»ƒ há»c Ä‘áº¥y!
| --- | --------- |
| 1 | [ChÃ o báº¡n! Báº¡n má»›i báº¯t Ä‘áº§u há»c Java vÃ  Ä‘ang bá»‹ rá»‘i giá»¯a ba cÃ¡i tÃªn "viáº¿t táº¯t" JVM, JRE vÃ  JDK? Äá»«ng lo, chÃºng ta sáº½ cÃ¹ng "má»• xáº»" chÃºng theo cÃ¡ch Ä‘Æ¡n giáº£n nháº¥t nhÃ©!

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang chuáº©n bá»‹ náº¥u má»™t mÃ³n Äƒn Ä‘áº·c biá»‡t.

### 1. JVM (Java Virtual Machine) â€“ "NgÆ°á»i Ä‘áº§u báº¿p"
HÃ£y coi JVM lÃ  má»™t **ngÆ°á»i Ä‘áº§u báº¿p**. 

*   **Nhiá»‡m vá»¥:** Ã”ng áº¥y khÃ´ng biáº¿t trá»“ng lÃºa hay Ä‘i chá»£, Ã´ng áº¥y chá»‰ biáº¿t Ä‘á»c cÃ´ng thá»©c (chÃ­nh lÃ  mÃ£ Bytecode cá»§a báº¡n) vÃ  thá»±c hiá»‡n nÃ³ trÃªn báº¥t ká»³ gian báº¿p nÃ o (Há»‡ Ä‘iá»u hÃ nh Windows, Mac hay Linux).
*   **Äáº·c Ä‘iá»ƒm:** JVM lÃ  trÃ¡i tim cá»§a sá»± linh hoáº¡t. NÃ³ giÃºp Java cÃ³ kháº©u hiá»‡u ná»•i tiáº¿ng: *"Viáº¿t má»™t láº§n, cháº¡y má»i nÆ¡i"*.
*   **TÃ³m láº¡i:** JVM lÃ  thá»±c thá»ƒ cháº¡y mÃ£ Java cá»§a báº¡n.

### 2. JRE (Java Runtime Environment) â€“ "NhÃ  báº¿p Ä‘áº§y Ä‘á»§ tiá»‡n nghi"
Äá»ƒ Ä‘áº§u báº¿p (JVM) lÃ m viá»‡c Ä‘Æ°á»£c, Ã´ng áº¥y cáº§n má»™t **gian báº¿p**. ÄÃ³ chÃ­nh lÃ  JRE.

*   **BÃªn trong cÃ³ gÃ¬?** JRE chá»©a JVM vÃ  cÃ¡c bá»™ thÆ° viá»‡n chuáº©n (nhÆ° dao, thá»›t, gia vá»‹...). Náº¿u khÃ´ng cÃ³ nhá»¯ng thÆ° viá»‡n nÃ y, JVM sáº½ khÃ´ng biáº¿t láº¥y Ä‘Ã¢u ra lá»‡nh Ä‘á»ƒ in má»™t dÃ²ng chá»¯ lÃªn mÃ n hÃ¬nh cáº£.
*   **DÃ nh cho ai?** Náº¿u báº¡n chá»‰ muá»‘n **cháº¡y** má»™t chÆ°Æ¡ng trÃ¬nh Java (nhÆ° chÆ¡i game Minecraft), báº¡n chá»‰ cáº§n cÃ i JRE lÃ  Ä‘á»§.
*   **CÃ´ng thá»©c:** `JRE = JVM + ThÆ° viá»‡n há»— trá»£ (Libraries)`.

### 3. JDK (Java Development Kit) â€“ "Bá»™ dá»¥ng cá»¥ cá»§a nhÃ  sÃ¡ng cháº¿"
Náº¿u báº¡n khÃ´ng chá»‰ muá»‘n Äƒn, mÃ  cÃ²n muá»‘n **tá»± tay náº¥u** vÃ  sÃ¡ng táº¡o mÃ³n má»›i, báº¡n cáº§n JDK.

*   **BÃªn trong cÃ³ gÃ¬?** NÃ³ chá»©a táº¥t cáº£ má»i thá»© cá»§a JRE, cá»™ng thÃªm cÃ¡c cÃ´ng cá»¥ dÃ nh riÃªng cho láº­p trÃ¬nh viÃªn nhÆ° trÃ¬nh biÃªn dá»‹ch (`javac`), bá»™ gá»¡ lá»—i (debugger)...
*   **DÃ nh cho ai?** ÄÃ¢y lÃ  thá»© báº¡n cáº§n cÃ i Ä‘áº·t ngay bÃ¢y giá» Ä‘á»ƒ báº¯t Ä‘áº§u viáº¿t nhá»¯ng dÃ²ng code Java Ä‘áº§u tiÃªn.
*   **CÃ´ng thá»©c:** `JDK = JRE + CÃ´ng cá»¥ phÃ¡t triá»ƒn (Development Tools)`.

---

### Báº£ng so sÃ¡nh nhanh cho báº¡n:

| TÃ­nh cháº¥t | JVM | JRE | JDK |
| :--- | :--- | :--- | :--- |
| **TÃªn Ä‘áº§y Ä‘á»§** | MÃ¡y áº£o Java | MÃ´i trÆ°á»ng thá»±c thi Java | Bá»™ cÃ´ng cá»¥ phÃ¡t triá»ƒn Java |
| **Má»¥c Ä‘Ã­ch** | Cháº¡y mÃ£ Bytecode | Cung cáº¥p mÃ´i trÆ°á»ng Ä‘á»ƒ cháº¡y app | Viáº¿t vÃ  phÃ¡t triá»ƒn app |
| **ThÃ nh pháº§n** | Chá»‰ lÃ  pháº§n má»m thá»±c thi | JVM + ThÆ° viá»‡n | JRE + CÃ´ng cá»¥ (Compiler,...) |

### TÃ³m láº¡i lÃ :
*   Báº¡n muá»‘n **cháº¡y** chÆ°Æ¡ng trÃ¬nh? CÃ i **JRE**.
*   Báº¡n muá»‘n **láº­p trÃ¬nh** Java? CÃ i **JDK**.
*   CÃ¡i gÃ¬ **thá»±c sá»± lÃ m viá»‡c** bÃªn dÆ°á»›i? ÄÃ³ lÃ  **JVM**.

Tháº­t Ä‘Æ¡n giáº£n Ä‘Ãºng khÃ´ng? Giá» thÃ¬ hÃ£y cÃ i JDK vÃ  báº¯t Ä‘áº§u code thÃ´i nÃ o!](#what-are-the-differences-between-jvm-jre-and-jdk) |
| 2 | [Báº¡n Ä‘Ã£ bao giá» tá»± há»i táº¡i sao Java láº¡i Ä‘Æ°á»£c má»‡nh danh lÃ  ngÃ´n ngá»¯ "viáº¿t má»™t láº§n, cháº¡y má»i nÆ¡i" (Write Once, Run Anywhere) chÆ°a? HÃ£y cÃ¹ng khÃ¡m phÃ¡ bÃ­ máº­t Ä‘áº±ng sau kháº£ nÄƒng ká»³ diá»‡u nÃ y nhÃ©!

### Quy trÃ¬nh thÃ´ng thÆ°á»ng (C/C++) hoáº¡t Ä‘á»™ng tháº¿ nÃ o?

Trong cÃ¡c ngÃ´n ngá»¯ truyá»n thá»‘ng nhÆ° C hoáº·c C++, khi báº¡n viáº¿t code vÃ  nháº¥n nÃºt "biÃªn dá»‹ch" (compile), trÃ¬nh biÃªn dá»‹ch sáº½ biáº¿n code Ä‘Ã³ thÃ nh **mÃ£ mÃ¡y** (machine code). 

Váº¥n Ä‘á» náº±m á»Ÿ chá»—: mÃ£ mÃ¡y cá»§a Windows khÃ¡c hoÃ n toÃ n vá»›i mÃ£ mÃ¡y cá»§a Mac hay Linux. VÃ¬ váº­y, náº¿u báº¡n muá»‘n chÆ°Æ¡ng trÃ¬nh cháº¡y trÃªn mÃ¡y Mac, báº¡n pháº£i biÃªn dá»‹ch láº¡i nÃ³ ngay trÃªn mÃ¡y Mac Ä‘Ã³. Tháº­t phiá»n phá»©c pháº£i khÃ´ng?

### CÃ¡ch Java lÃ m nÃªn Ä‘iá»u khÃ¡c biá»‡t

Java khÃ´ng chÆ¡i theo luáº­t cÅ©. Thay vÃ¬ dá»‹ch tháº³ng ra mÃ£ mÃ¡y, Java thá»±c hiá»‡n má»™t bÆ°á»›c trung gian thÃ´ng minh hÆ¡n nhiá»u.

1.  **BÆ°á»›c 1: Táº¡o ra Bytecode**
    Khi báº¡n biÃªn dá»‹ch file `.java`, trÃ¬nh biÃªn dá»‹ch Java (javac) sáº½ táº¡o ra má»™t file `.class`. File nÃ y chá»©a má»™t loáº¡i mÃ£ Ä‘áº·c biá»‡t gá»i lÃ  **Bytecode**. Bytecode khÃ´ng pháº£i lÃ  mÃ£ mÃ¡y cá»§a Windows, cÅ©ng cháº³ng pháº£i cá»§a Mac. NÃ³ lÃ  má»™t loáº¡i "ngÃ´n ngá»¯ chung" mÃ  má»i há»‡ Ä‘iá»u hÃ nh Ä‘á»u cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c.

2.  **BÆ°á»›c 2: Sá»± xuáº¥t hiá»‡n cá»§a "ThÃ´ng dá»‹ch viÃªn" JVM**
    ÄÃ¢y chÃ­nh lÃ  linh há»“n cá»§a Java! Äá»ƒ cháº¡y Ä‘Æ°á»£c Bytecode, má»—i mÃ¡y tÃ­nh cáº§n cÃ i Ä‘áº·t má»™t thá»© gá»i lÃ  **JVM (Java Virtual Machine)**. 
    *   JVM trÃªn Windows sáº½ Ä‘á»c Bytecode vÃ  dá»‹ch nÃ³ sang tiáº¿ng Windows.
    *   JVM trÃªn Mac sáº½ Ä‘á»c chÃ­nh Bytecode Ä‘Ã³ vÃ  dá»‹ch nÃ³ sang tiáº¿ng Mac.

### Táº¡i sao Java láº¡i Ä‘á»™c láº­p vá»›i ná»n táº£ng?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng Bytecode giá»‘ng nhÆ° tiáº¿ng Anh. DÃ¹ báº¡n lÃ  ngÆ°á»i PhÃ¡p, ngÆ°á»i Nháº­t hay ngÆ°á»i Viá»‡t, chá»‰ cáº§n báº¡n biáº¿t tiáº¿ng Anh (cÃ³ cÃ i JVM), báº¡n Ä‘á»u cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c ná»™i dung cuá»‘n sÃ¡ch Ä‘Ã³.

*   **Phá»¥ thuá»™c vÃ o ná»n táº£ng:** Báº£n thÃ¢n pháº§n má»m JVM thÃ¬ "phá»¥ thuá»™c" vÃ o há»‡ Ä‘iá»u hÃ nh (báº¡n pháº£i táº£i Ä‘Ãºng báº£n JVM cho Windows hoáº·c Mac).
*   **Äá»™c láº­p vá»›i ná»n táº£ng:** NhÆ°ng mÃ£ nguá»“n Java (Bytecode) cá»§a báº¡n thÃ¬ hoÃ n toÃ n "tá»± do". Báº¡n chá»‰ cáº§n Ä‘Æ°a file `.class` cho báº¥t ká»³ ai cÃ³ JVM, chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n sáº½ cháº¡y mÆ°á»£t mÃ  mÃ  khÃ´ng cáº§n sá»­a má»™t dÃ²ng code nÃ o!

### TÃ³m táº¯t quy trÃ¬nh:

1.  **Báº¡n viáº¿t code:** `Hello.java`
2.  **TrÃ¬nh biÃªn dá»‹ch (Compiler):** Biáº¿n nÃ³ thÃ nh `Hello.class` (Bytecode).
3.  **JVM (MÃ¡y áº£o Java):** Äá»c `Hello.class` vÃ  thá»±c thi trÃªn mÃ¡y tÃ­nh cá»¥ thá»ƒ.

ÄÃ³ chÃ­nh lÃ  lÃ½ do Java cá»±c ká»³ máº¡nh máº½ vÃ  phá»• biáº¿n. Báº¡n chá»‰ viá»‡c táº­p trung viáº¿t code tháº­t hay, cÃ²n viá»‡c "nÃ³i chuyá»‡n" vá»›i pháº§n cá»©ng Ä‘Ã£ cÃ³ JVM lo](#why-java-is-platform-independent-language) |
| 3 | [ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i háº­u trÆ°á»ng cá»§a Java! Báº¡n Ä‘Ã£ bao giá» tá»± há»i Ä‘iá»u gÃ¬ thá»±c sá»± xáº£y ra khi báº¡n nháº¥n nÃºt "Run" chÆ°a? HÃ£y cÃ¹ng khÃ¡m phÃ¡ chiáº¿c há»™p Ä‘en ká»³ diá»‡u mang tÃªn **JVM (Java Virtual Machine)** nhÃ©!

### JVM lÃ  gÃ¬ váº­y?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng JVM giá»‘ng nhÆ° má»™t **thÃ´ng dá»‹ch viÃªn Ä‘a nÄƒng**. 

Trong tháº¿ giá»›i mÃ¡y tÃ­nh, má»—i loáº¡i mÃ¡y (Windows, Mac, Linux) láº¡i nÃ³i má»™t ngÃ´n ngá»¯ riÃªng. Náº¿u khÃ´ng cÃ³ JVM, báº¡n sáº½ pháº£i viáº¿t code riÃªng cho tá»«ng loáº¡i mÃ¡y. Phiá»n phá»©c quÃ¡ pháº£i khÃ´ng?

Vá»›i Java, báº¡n chá»‰ cáº§n viáº¿t code má»™t láº§n. JVM sáº½ Ä‘á»©ng ra "dá»‹ch" mÃ£ Ä‘Ã³ sang ngÃ´n ngá»¯ mÃ  mÃ¡y tÃ­nh cá»§a báº¡n cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c.

---

### Quy trÃ¬nh hoáº¡t Ä‘á»™ng: Tá»« Code Ä‘áº¿n MÃ¡y tÃ­nh

ÄÃ¢y lÃ  lá»™ trÃ¬nh mÃ  dÃ²ng code cá»§a báº¡n sáº½ Ä‘i qua:

1.  **Viáº¿t Code (.java):** Báº¡n viáº¿t mÃ£ nguá»“n trong cÃ¡c file cÃ³ Ä‘uÃ´i `.java`. ÄÃ¢y lÃ  ngÃ´n ngá»¯ dÃ nh cho con ngÆ°á»i.
2.  **BiÃªn dá»‹ch (Compilation):** TrÃ¬nh biÃªn dá»‹ch `javac` sáº½ biáº¿n file `.java` thÃ nh file `.class`. LÃºc nÃ y, code Ä‘Ã£ biáº¿n thÃ nh **Bytecode**. 
    *   *Ghi chÃº:* Bytecode khÃ´ng pháº£i lÃ  ngÃ´n ngá»¯ mÃ¡y, nÃ³ lÃ  "ngÃ´n ngá»¯ trung gian" mÃ  chá»‰ JVM má»›i hiá»ƒu.
3.  **Thá»±c thi (Execution):** JVM trÃªn mÃ¡y tÃ­nh cá»§a báº¡n sáº½ nháº­n file `.class` nÃ y vÃ  báº¯t Ä‘áº§u lÃ m viá»‡c.

---

### BÃªn trong chiáº¿c há»™p "JVM" cÃ³ gÃ¬?

JVM khÃ´ng chá»‰ lÃ m má»™t viá»‡c, nÃ³ cÃ³ cáº£ má»™t Ä‘á»™i ngÅ© chuyÃªn gia lÃ m viá»‡c nhá»‹p nhÃ ng:

#### 1. Class Loader (NgÆ°á»i xáº¿p kho)
Nhiá»‡m vá»¥ cá»§a nÃ³ lÃ  tÃ¬m náº¡p cÃ¡c file `.class` cáº§n thiáº¿t vÃ  Ä‘Æ°a chÃºng vÃ o bá»™ nhá»›. Náº¿u chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cáº§n má»™t lá»›p (class) nÃ o Ä‘Ã³, Class Loader sáº½ Ä‘i tÃ¬m nÃ³ ngay!

#### 2. Runtime Data Areas (Khu vá»±c lÆ°u trá»¯)
ÄÃ¢y lÃ  nÆ¡i JVM giá»¯ cÃ¡c máº£nh dá»¯ liá»‡u khi chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y:
*   **Stack:** NÆ¡i lÆ°u cÃ¡c biáº¿n táº¡m thá»i vÃ  cÃ¡c lá»‡nh thá»±c thi (giá»‘ng nhÆ° má»™t chá»“ng Ä‘Ä©a, cÃ¡i nÃ o vÃ o sau cÃ¹ng sáº½ Ä‘Æ°á»£c láº¥y ra Ä‘áº§u tiÃªn).
*   **Heap:** Má»™t "kho bÃ£i" khá»•ng lá»“ nÆ¡i chá»©a táº¥t cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng (Objects) mÃ  báº¡n táº¡o ra.

#### 3. Execution Engine (Äá»™ng cÆ¡ thá»±c thi)
ÄÃ¢y lÃ  "bá»™ nÃ£o" thá»±c sá»±. NÃ³ Ä‘á»c Bytecode vÃ  ra lá»‡nh cho pháº§n cá»©ng:
*   **Interpreter:** Äá»c tá»«ng dÃ²ng code vÃ  thá»±c hiá»‡n ngay láº­p tá»©c. Nhanh nhÆ°ng Ä‘Ã´i khi hÆ¡i láº·p láº¡i.
*   **JIT Compiler (Just-In-Time):** ÄÃ¢y lÃ  anh chÃ ng thÃ´ng minh! Náº¿u tháº¥y Ä‘oáº¡n code nÃ o Ä‘Æ°á»£c dÃ¹ng Ä‘i dÃ¹ng láº¡i nhiá»u láº§n, nÃ³ sáº½ biÃªn dá»‹ch Ä‘oáº¡n Ä‘Ã³ tháº³ng sang mÃ£ mÃ¡y Ä‘á»ƒ cháº¡y cá»±c nhanh.
*   **Garbage Collector (NgÆ°á»i dá»n rÃ¡c):** Má»™t tÃ­nh nÄƒng cá»±c hay cá»§a Java! NÃ³ tá»± Ä‘á»™ng tÃ¬m vÃ  xÃ³a bá» nhá»¯ng Ä‘á»‘i tÆ°á»£ng khÃ´ng cÃ²n Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ giáº£i phÃ³ng bá»™ nhá»›. Báº¡n khÃ´ng cáº§n pháº£i tá»± tay "dá»n dáº¹p" ná»¯a!

---

### Táº¡i sao chÃºng ta láº¡i cáº§n JVM?

*   **Viáº¿t má»™t láº§n, cháº¡y má»i nÆ¡i (WORA):** Báº¡n viáº¿t code trÃªn Windows, nhÆ°ng nÃ³ cÃ³ thá»ƒ cháº¡y mÆ°á»£t mÃ  trÃªn Mac hoáº·c Linux nhá» cÃ³ JVM tÆ°Æ¡ng á»©ng trÃªn cÃ¡c mÃ¡y Ä‘Ã³.
*   **An toÃ n:** JVM giá»‘ng nhÆ° má»™t "lá»›p báº£o vá»‡" (sandbox), ngÄƒn khÃ´ng cho code xáº¥u lÃ m háº¡i trá»±c tiáº¿p Ä‘áº¿n há»‡ Ä‘iá»u hÃ nh cá»§a báº¡n.
*   **Quáº£n lÃ½ bá»™ nhá»›:** Nhá» cÃ³ Garbage Collector, báº¡n cÃ³ thá»ƒ táº­p trung vÃ o viá»‡c viáº¿t logic thay vÃ¬ lo láº¯ng vá» viá»‡c trÃ n bá»™ nhá»›.

**TÃ³m láº¡i:** JVM chÃ­nh lÃ  "trÃ¡i tim" giÃºp Java trá»Ÿ nÃªn máº¡nh máº½ vÃ  phá»• biáº¿n. NÃ³ lo háº¿t nhá»¯ng viá»‡c náº·ng nhá»c á»Ÿ táº§ng dÆ°á»›i Ä‘á»ƒ báº¡n cÃ³ thá»ƒ thong tháº£ sÃ¡ng táº¡o nhá»¯ng á»©ng dá»¥ng tuyá»‡t vá»i!](#how-does-jvm-works) |
| 4 | [Java cÃ³ gÃ¬ mÃ  "hot" Ä‘áº¿n tháº¿? HÃ£y cÃ¹ng khÃ¡m phÃ¡ nhá»¯ng Ä‘áº·c Ä‘iá»ƒm cá»±c ká»³ thÃº vá»‹ khiáº¿n ngÃ´n ngá»¯ nÃ y trá»Ÿ thÃ nh lá»±a chá»n hÃ ng Ä‘áº§u cho ngÆ°á»i má»›i báº¯t Ä‘áº§u nhÃ©!

*   **ÄÆ¡n giáº£n vÃ  dá»… há»c (Simple)**
    Náº¿u báº¡n tá»«ng sá»£ láº­p trÃ¬nh vÃ¬ nhá»¯ng thá»© ráº¯c rá»‘i nhÆ° "quáº£n lÃ½ bá»™ nhá»›" hay "con trá»" (pointers) trong C++, thÃ¬ Ä‘á»«ng lo! Java Ä‘Ã£ loáº¡i bá» háº¿t nhá»¯ng pháº§n gÃ¢y Ä‘au Ä‘áº§u Ä‘Ã³. CÃº phÃ¡p cá»§a Java ráº¥t rÃµ rÃ ng, giÃºp báº¡n táº­p trung vÃ o viá»‡c giáº£i quyáº¿t váº¥n Ä‘á» thay vÃ¬ Ä‘Ã¡nh váº­t vá»›i ngÃ´n ngá»¯.

*   **Viáº¿t má»™t láº§n, cháº¡y má»i nÆ¡i (Platform Independent)**
    ÄÃ¢y chÃ­nh lÃ  "siÃªu nÄƒng lá»±c" cá»§a Java! Khi báº¡n viáº¿t code Java, nÃ³ khÃ´ng biÃªn dá»‹ch tháº³ng ra ngÃ´n ngá»¯ mÃ¡y mÃ  chuyá»ƒn thÃ nh **Bytecode**. Nhá» cÃ³ "cá»— mÃ¡y áº£o" **JVM (Java Virtual Machine)**, báº¡n cÃ³ thá»ƒ mang file Bytecode nÃ y cháº¡y trÃªn Windows, Mac hay Linux Ä‘á»u mÆ°á»£t mÃ . 
    > *Kháº©u hiá»‡u huyá»n thoáº¡i: Write Once, Run Anywhere (WORA).*

*   **HÆ°á»›ng Ä‘á»‘i tÆ°á»£ng (Object-Oriented - OOP)**
    Trong Java, má»i thá»© Ä‘á»u xoay quanh cÃ¡c "Ä‘á»‘i tÆ°á»£ng" (Objects). HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang láº¯p ghÃ©p cÃ¡c khá»‘i Lego; má»—i khá»‘i lÃ  má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ Ä‘áº·c Ä‘iá»ƒm vÃ  hÃ nh Ä‘á»™ng riÃªng. CÃ¡ch tiáº¿p cáº­n nÃ y giÃºp code cá»§a báº¡n cá»±c ká»³ gá»n gÃ ng, dá»… tÃ¡i sá»­ dá»¥ng vÃ  báº£o trÃ¬.

*   **Cá»±c ká»³ an toÃ n (Secure)**
    Java giá»‘ng nhÆ° má»™t phÃ¡o Ä‘Ã i kiÃªn cá»‘. NÃ³ khÃ´ng cho phÃ©p báº¡n truy cáº­p trá»±c tiáº¿p vÃ o bá»™ nhá»› há»‡ thá»‘ng thÃ´ng qua con trá», giÃºp trÃ¡nh Ä‘Æ°á»£c cÃ¡c lá»—i báº£o máº­t nghiÃªm trá»ng. NgoÃ i ra, chÆ°Æ¡ng trÃ¬nh Java cháº¡y bÃªn trong má»™t "há»™p cÃ¡t" (sandbox) an toÃ n cá»§a JVM Ä‘á»ƒ ngÄƒn cháº·n mÃ£ Ä‘á»™c.

*   **Máº¡nh máº½ vÃ  bá»n bá»‰ (Robust)**
    Java ráº¥t giá»i trong viá»‡c quáº£n lÃ½ bá»™ nhá»› nhá» tÃ­nh nÄƒng **Garbage Collection** (Tá»± Ä‘á»™ng dá»n rÃ¡c). NÃ³ cÅ©ng ráº¥t nghiÃªm kháº¯c trong viá»‡c kiá»ƒm tra lá»—i ngay tá»« lÃºc báº¡n Ä‘ang viáº¿t code, giÃºp chÆ°Æ¡ng trÃ¬nh Ã­t khi bá»‹ "sáº­p" báº¥t ngá».

*   **Äa luá»“ng (Multi-threading)**
    Báº¡n cÃ³ muá»‘n á»©ng dá»¥ng cá»§a mÃ¬nh lÃ m nhiá»u viá»‡c cÃ¹ng lÃºc khÃ´ng? Java há»— trá»£ Ä‘a luá»“ng cá»±c tá»‘t, cho phÃ©p chÆ°Æ¡ng trÃ¬nh xá»­ lÃ½ nhiá»u tÃ¡c vá»¥ Ä‘á»“ng thá»i mÃ  khÃ´ng bá»‹ giáº­t lag.

*   **Hiá»‡u suáº¥t cao (High Performance)**
    DÃ¹ lÃ  ngÃ´n ngá»¯ thÃ´ng dá»‹ch, nhÆ°ng nhá» cÃ³ bá»™ trÃ¬nh biÃªn dá»‹ch **JIT (Just-In-Time)**, Java cÃ³ tá»‘c Ä‘á»™ thá»±c thi ráº¥t nhanh, gáº§n nhÆ° tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i cÃ¡c ngÃ´n ngá»¯ biÃªn dá»‹ch trá»±c tiáº¿p.](#what-are-the-main-features-of-java) |
| 5 | [ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i tháº¿ giá»›i Java! Báº¡n Ä‘Ã£ bao giá» tá»± há»i lÃ m tháº¿ nÃ o mÃ  mÃ¡y tÃ­nh biáº¿t pháº£i báº¯t Ä‘áº§u cháº¡y chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n tá»« Ä‘Ã¢u chÆ°a? CÃ¢u tráº£ lá»i náº±m á»Ÿ má»™t dÃ²ng mÃ£ "tháº§n thÃ¡nh" mÃ  báº¡n sáº½ tháº¥y á»Ÿ kháº¯p má»i nÆ¡i.

HÃ£y cÃ¹ng "pháº«u thuáº­t" dÃ²ng lá»‡nh `public static void main(String[] args)` Ä‘á»ƒ xem bÃªn trong nÃ³ cÃ³ gÃ¬ nhÃ©!

### 1. public - Ai cÅ©ng cÃ³ thá»ƒ vÃ o!
HÃ£y tÆ°á»Ÿng tÆ°á»£ng chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n lÃ  má»™t ngÃ´i nhÃ . Náº¿u báº¡n muá»‘n MÃ¡y áº£o Java (JVM) bÆ°á»›c vÃ o vÃ  khá»Ÿi Ä‘á»™ng ngÃ´i nhÃ  Ä‘Ã³, cá»­a chÃ­nh pháº£i Ä‘Æ°á»£c **má»Ÿ**.
- **public** cÃ³ nghÄ©a lÃ  "cÃ´ng khai".
- NÃ³ cho phÃ©p JVM truy cáº­p vÃ  cháº¡y phÆ°Æ¡ng thá»©c nÃ y tá»« báº¥t cá»© Ä‘Ã¢u.

### 2. static - KhÃ´ng cáº§n chá» Ä‘á»£i!
ThÃ´ng thÆ°á»ng, trong Java, báº¡n cáº§n táº¡o ra má»™t "Ä‘á»‘i tÆ°á»£ng" (object) thÃ¬ má»›i dÃ¹ng Ä‘Æ°á»£c cÃ¡c chá»©c nÄƒng cá»§a nÃ³. NhÆ°ng Ä‘á»£i Ä‘Ã£! Náº¿u chÆ°Æ¡ng trÃ¬nh cÃ²n chÆ°a cháº¡y, lÃ m sao ta táº¡o Ä‘Æ°á»£c Ä‘á»‘i tÆ°á»£ng?
- **static** giÃºp phÆ°Æ¡ng thá»©c nÃ y tá»“n táº¡i ngay cáº£ khi chÆ°a cÃ³ Ä‘á»‘i tÆ°á»£ng nÃ o Ä‘Æ°á»£c táº¡o ra.
- JVM chá»‰ cáº§n gá»i tÃªn lá»›p lÃ  cÃ³ thá»ƒ cháº¡y ngay lá»‡nh `main`. Ráº¥t tiá»‡n lá»£i Ä‘Ãºng khÃ´ng?

### 3. void - LÃ m viá»‡c khÃ´ng cáº§n tráº£ cÃ´ng
Má»™t sá»‘ phÆ°Æ¡ng thá»©c sau khi lÃ m xong viá»‡c sáº½ tráº£ láº¡i cho báº¡n má»™t káº¿t quáº£ (nhÆ° má»™t con sá»‘ hay má»™t dÃ²ng chá»¯).
- **void** nÃ³i vá»›i Java ráº±ng: "NÃ y, cá»© cháº¡y xong cÃ¡c lá»‡nh bÃªn trong Ä‘i, tÃ´i khÃ´ng cáº§n báº¡n tráº£ láº¡i káº¿t quáº£ gÃ¬ Ä‘Ã¢u!"

### 4. main - Äiá»ƒm khá»Ÿi hÃ nh duy nháº¥t
ÄÃ¢y khÃ´ng pháº£i lÃ  má»™t cÃ¡i tÃªn ngáº«u nhiÃªn.
- **main** lÃ  cÃ¡i tÃªn Ä‘áº·c biá»‡t mÃ  JVM luÃ´n tÃ¬m kiáº¿m. 
- Náº¿u khÃ´ng cÃ³ chá»¯ `main` nÃ y, JVM sáº½ bá»‘i rá»‘i vÃ  khÃ´ng biáº¿t pháº£i báº¯t Ä‘áº§u tá»« Ä‘Ã¢u. NÃ³ giá»‘ng nhÆ° táº¥m biá»ƒn "Lá»‘i vÃ o" trÃªn má»™t tÃ²a nhÃ  váº­y.

### 5. (String[] args) - Nhá»¯ng chiáº¿c vali hÃ nh lÃ½
ÄÃ´i khi, báº¡n muá»‘n gá»­i má»™t vÃ i thÃ´ng tin vÃ o chÆ°Æ¡ng trÃ¬nh ngay khi nÃ³ vá»«a khá»Ÿi Ä‘á»™ng. 
- **String[] args** giá»‘ng nhÆ° má»™t chiáº¿c vali chá»©a cÃ¡c chuá»—i vÄƒn báº£n (String).
- Báº¡n cÃ³ thá»ƒ truyá»n cÃ¡c tham sá»‘ tá»« bÃ n phÃ­m vÃ o Ä‘Ã¢y Ä‘á»ƒ chÆ°Æ¡ng trÃ¬nh xá»­ lÃ½ ngay láº­p tá»©c.

---

### TÃ³m láº¡i, nÃ³ hoáº¡t Ä‘á»™ng tháº¿ nÃ o?

Khi báº¡n nháº¥n nÃºt "Run", JVM sáº½ Ä‘i tÃ¬m Ä‘Ãºng dÃ²ng nÃ y:

```java
public class HelloJava {
    public static void main(String[] args) {
        // Má»i thá»© báº¯t Ä‘áº§u tá»« Ä‘Ã¢y!
        System.out.println("ChÃ o báº¡n, tÃ´i Ä‘Ã£ sáºµn sÃ ng!");
    }
}
```

**Ghi nhá»› nhanh:**
*   **public**: Äá»ƒ JVM nhÃ¬n tháº¥y.
*   **static**: Äá»ƒ cháº¡y Ä‘Æ°á»£c ngay mÃ  khÃ´ng cáº§n táº¡o Ä‘á»‘i tÆ°á»£ng.
*   **void**: KhÃ´ng tráº£ vá» giÃ¡ trá»‹.
*   **main**: TÃªn gá»i báº¯t buá»™c.
*   **String[] args**: NÆ¡i chá»©a dá»¯ liá»‡u Ä‘áº§u vÃ o.

Tháº­t Ä‘Æ¡n giáº£n pháº£i khÃ´ng? Giá» thÃ¬ báº¡n Ä‘Ã£ hiá»ƒu táº¡i sao dÃ²ng mÃ£ nÃ y láº¡i quan trá»ng Ä‘áº¿n tháº¿ rá»“i Ä‘áº¥y](#what-is-public-static-void-main) |
| 6 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng bá»™ nhá»› mÃ¡y tÃ­nh giá»‘ng nhÆ° má»™t nhÃ  kho lá»›n. Trong Java, chÃºng ta cÃ³ má»™t khu vá»±c cá»±c ká»³ Ä‘áº·c biá»‡t trong nhÃ  kho Ä‘Ã³ gá»i lÃ  **String Constant Pool** (viáº¿t táº¯t lÃ  SCP).

Váº­y nÃ³ dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬? HÃ£y cÃ¹ng khÃ¡m phÃ¡ nhÃ©!

### 1. Váº¥n Ä‘á»: CÆ¡n Ã¡c má»™ng vá» bá»™ nhá»›
Trong láº­p trÃ¬nh, chÃºng ta sá»­ dá»¥ng Chuá»—i (String) á»Ÿ kháº¯p má»i nÆ¡i. Náº¿u má»—i láº§n báº¡n táº¡o má»™t tá»« "Hello", Java láº¡i tá»‘n má»™t khoáº£ng khÃ´ng gian má»›i trong bá»™ nhá»›, thÃ¬ cháº³ng máº¥y chá»‘c bá»™ nhá»› sáº½ bá»‹ Ä‘áº§y. 

Äá»ƒ tiáº¿t kiá»‡m khÃ´ng gian, Java ráº¥t thÃ´ng minh. NÃ³ táº¡o ra má»™t "cÃ¢u láº¡c bá»™" dÃ nh riÃªng cho cÃ¡c chuá»—i kÃ½ tá»±. ÄÃ³ chÃ­nh lÃ  **String Constant Pool**.

### 2. CÃ¡ch nÃ³ hoáº¡t Ä‘á»™ng
Khi báº¡n táº¡o má»™t String theo cÃ¡ch thÃ´ng thÆ°á»ng (sá»­ dá»¥ng dáº¥u ngoáº·c kÃ©p), Java sáº½ thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau:

1. **Kiá»ƒm tra:** "Trong há»“ bÆ¡i (Pool) Ä‘Ã£ cÃ³ chá»¯ nÃ y chÆ°a nhá»‰?"
2. **TÃ¡i sá»­ dá»¥ng:** Náº¿u cÃ³ rá»“i, Java sáº½ Ä‘Æ°a cho báº¡n Ä‘á»‹a chá»‰ cá»§a chá»¯ Ä‘Ã³. KhÃ´ng táº¡o má»›i!
3. **Táº¡o má»›i:** Náº¿u chÆ°a cÃ³, Java má»›i táº¡o má»™t báº£n ghi má»›i vÃ  cáº¥t vÃ o Pool Ä‘á»ƒ dÃ¹ng sau nÃ y.

### 3. VÃ­ dá»¥ thá»±c táº¿
HÃ£y xem Ä‘oáº¡n code dÆ°á»›i Ä‘Ã¢y:

```java
String s1 = "Java";
String s2 = "Java";
```

*   **DÃ²ng 1:** Java nhÃ¬n vÃ o Pool, khÃ´ng tháº¥y chá»¯ "Java" Ä‘Ã¢u. NÃ³ táº¡o má»™t Ä‘á»‘i tÆ°á»£ng "Java" má»›i vÃ  Ä‘áº·t vÃ o Pool. `s1` trá» Ä‘áº¿n Ä‘Ã³.
*   **DÃ²ng 2:** Java láº¡i nhÃ¬n vÃ o Pool. "A ha! CÃ³ chá»¯ 'Java' á»Ÿ Ä‘Ã¢y rá»“i!". NÃ³ khÃ´ng táº¡o thÃªm gÃ¬ cáº£, chá»‰ viá»‡c báº£o `s2` trá» chung vÃ o vá»‹ trÃ­ cá»§a `s1`.

Káº¿t quáº£ lÃ : `s1 == s2` sáº½ tráº£ vá» **true** vÃ¬ chÃºng thá»±c cháº¥t lÃ  má»™t!

### 4. NhÆ°ng hÃ£y cáº©n tháº­n vá»›i tá»« khÃ³a `new`!
Náº¿u báº¡n dÃ¹ng tá»« khÃ³a `new`, báº¡n Ä‘ang ra lá»‡nh cho Java: "Äá»«ng quan tÃ¢m Ä‘áº¿n Pool, hÃ£y xÃ¢y cho tÃ´i má»™t cÃ¡i nhÃ  má»›i hoÃ n toÃ n!"

```java
String s3 = new String("Java");
```

LÃºc nÃ y, `s3` sáº½ náº±m á»Ÿ má»™t vÃ¹ng nhá»› khÃ¡c (gá»i lÃ  Heap) chá»© khÃ´ng náº±m trong Pool. VÃ¬ váº­y, `s1 == s3` sáº½ lÃ  **false**.

### TÃ³m táº¯t nhanh:
*   **String Constant Pool** lÃ  má»™t vÃ¹ng nhá»› nhá» náº±m trong Heap.
*   NÃ³ giÃºp **tiáº¿t kiá»‡m bá»™ nhá»›** báº±ng cÃ¡ch chia sáº» cÃ¡c chuá»—i giá»‘ng nhau.
*   Chá»‰ cÃ¡c chuá»—i táº¡o báº±ng dáº¥u ngoáº·c kÃ©p `""` má»›i Ä‘Æ°á»£c tá»± Ä‘á»™ng Ä‘Æ°a vÃ o Pool.
*   DÃ¹ng `new String()` sáº½ táº¡o ra Ä‘á»‘i tÆ°á»£ng má»›i lÃ£ng phÃ­ bá»™ nhá»› hÆ¡n.

**Lá»i khuyÃªn tá»« chuyÃªn gia:** HÃ£y Æ°u tiÃªn dÃ¹ng dáº¥u ngoáº·c kÃ©p Ä‘á»ƒ táº­n dá»¥ng sá»©c máº¡nh cá»§a Pool báº¡n nhÃ©](#what-is-string-constant-pool) |
| 7 | [### Táº¡i sao String láº¡i lÃ  "báº¥t di báº¥t dá»‹ch"?

ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i tháº¿ giá»›i cá»§a Java! CÃ³ bao giá» báº¡n tháº¯c máº¯c táº¡i sao má»™t khi Ä‘Ã£ táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng `String`, báº¡n láº¡i khÃ´ng thá»ƒ thay Ä‘á»•i nÃ³ khÃ´ng? Trong Java, chÃºng ta gá»i Ä‘Ã³ lÃ  tÃ­nh **Immutable** (báº¥t biáº¿n). HÃ£y cÃ¹ng khÃ¡m phÃ¡ bÃ­ máº­t nÃ y nhÃ©!

#### 1. "Bá»ƒ chá»©a" String (String Pool) tiáº¿t kiá»‡m bá»™ nhá»›
HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ 100 biáº¿n cÃ¹ng chá»©a ná»™i dung `"Hello"`. Thay vÃ¬ táº¡o ra 100 Ä‘á»‘i tÆ°á»£ng giá»‘ng há»‡t nhau lÃ m cháº­t chá»™i bá»™ nhá»›, Java cá»±c ká»³ thÃ´ng minh! NÃ³ chá»‰ táº¡o **má»™t** Ä‘á»‘i tÆ°á»£ng `"Hello"` duy nháº¥t trong má»™t khu vá»±c Ä‘áº·c biá»‡t gá»i lÃ  **String Pool**.

*   Táº¥t cáº£ cÃ¡c biáº¿n sáº½ cÃ¹ng trá» vÃ o má»™t Ä‘á»‹a chá»‰ Ä‘Ã³.
*   Náº¿u String *cÃ³ thá»ƒ* thay Ä‘á»•i, chá»‰ cáº§n má»™t biáº¿n Ä‘á»•i ná»™i dung thÃ nh `"Bye"`, 99 biáº¿n cÃ²n láº¡i cÅ©ng bá»‹ Ä‘á»•i theo dÃ¹ chÃºng khÃ´ng há» muá»‘n! Tháº­t lÃ  tháº£m há»a Ä‘Ãºng khÃ´ng?

#### 2. An toÃ n lÃ  trÃªn háº¿t (Security)
String Ä‘Æ°á»£c dÃ¹ng á»Ÿ kháº¯p má»i nÆ¡i! Tá»« tÃªn Ä‘Äƒng nháº­p, máº­t kháº©u, cho Ä‘áº¿n Ä‘á»‹a chá»‰ káº¿t ná»‘i cÆ¡ sá»Ÿ dá»¯ liá»‡u.

```java
// Giáº£ sá»­ String cÃ³ thá»ƒ thay Ä‘á»•i Ä‘Æ°á»£c...
String databaseUrl = "jdbc:mysql://localhost:3306/my_db";
// Má»™t Ä‘oáº¡n code "xáº¥u tÃ­nh" nÃ o Ä‘Ã³ cÃ³ thá»ƒ láº»n vÃ o vÃ  Ä‘á»•i ná»™i dung nÃ y
// khiáº¿n á»©ng dá»¥ng cá»§a báº¡n káº¿t ná»‘i sai chá»— ngay láº­p tá»©c!
```

VÃ¬ String khÃ´ng thá»ƒ bá»‹ thay Ä‘á»•i, báº¡n cÃ³ thá»ƒ hoÃ n toÃ n yÃªn tÃ¢m ráº±ng thÃ´ng tin quan trá»ng sáº½ luÃ´n giá»¯ nguyÃªn giÃ¡ trá»‹ ban Ä‘áº§u.

#### 3. ChÆ¡i tá»‘t vá»›i Äa luá»“ng (Multi-threading)
Khi nhiá»u "luá»“ng" (thread) cÃ¹ng lÃ m viá»‡c vá»›i má»™t dá»¯ liá»‡u, má»i thá»© ráº¥t dá»… trá»Ÿ nÃªn há»—n loáº¡n. NhÆ°ng vá»›i String thÃ¬ khÃ¡c:
*   VÃ¬ nÃ³ khÃ´ng Ä‘á»•i, cÃ¡c luá»“ng cÃ³ thá»ƒ thoáº£i mÃ¡i Ä‘á»c dá»¯ liá»‡u mÃ  khÃ´ng sá»£ luá»“ng khÃ¡c Ä‘ang bÃ­ máº­t chá»‰nh sá»­a nÃ³.
*   KhÃ´ng cáº§n cÆ¡ cháº¿ khÃ³a (lock) phá»©c táº¡p, giÃºp chÆ°Æ¡ng trÃ¬nh cháº¡y mÆ°á»£t mÃ  hÆ¡n.

#### 4. "ChÃ¬a khÃ³a" hoÃ n háº£o cho HashMap
Trong Java, String thÆ°á»ng xuyÃªn Ä‘Æ°á»£c dÃ¹ng lÃ m "Key" (khÃ³a) trong cÃ¡c bá»™ sÆ°u táº­p nhÆ° `HashMap`.

*   Äá»ƒ tÃ¬m dá»¯ liá»‡u nhanh, Java dá»±a vÃ o má»™t mÃ£ sá»‘ gá»i lÃ  `hashCode`.
*   Vá»›i String, vÃ¬ ná»™i dung khÃ´ng bao giá» Ä‘á»•i, nÃªn `hashCode` cÅ©ng Ä‘Æ°á»£c tÃ­nh toÃ¡n má»™t láº§n duy nháº¥t vÃ  giá»¯ nguyÃªn. Äiá»u nÃ y giÃºp viá»‡c tÃ¬m kiáº¿m cá»±c ká»³ nhanh chÃ³ng!

---

**TÃ³m láº¡i lÃ :**
Viá»‡c giá»¯ cho String khÃ´ng thay Ä‘á»•i giÃºp Java **tiáº¿t kiá»‡m bá»™ nhá»›**, **báº£o máº­t hÆ¡n** vÃ  **cháº¡y nhanh hÆ¡n**. Má»™t mÅ©i tÃªn trÃºng ba Ä‘Ã­ch!

```java
String s1 = "Java";
s1.concat(" Rules"); // Táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng má»›i hoÃ n toÃ n
System.out.println(s1); // Váº«n in ra "Java" - s1 khÃ´ng há» Ä‘á»•i!
```

Náº¿u báº¡n thá»±c sá»± muá»‘n thay Ä‘á»•i ná»™i dung vÄƒn báº£n liÃªn tá»¥c? Äá»«ng lo, Java Ä‘Ã£ chuáº©n bá»‹ sáºµn cho báº¡n ngÆ°á»i anh em **StringBuilder** rá»“i Ä‘áº¥y](#why-strings-are-immutable) |
| 8 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang viáº¿t má»™t cÃ¢u chuyá»‡n. ÄÃ´i khi báº¡n muá»‘n thay Ä‘á»•i ná»™i dung, thÃªm chá»¯ hoáº·c xÃ³a bá»›t. Trong Java, náº¿u báº¡n dÃ¹ng `String` bÃ¬nh thÆ°á»ng, má»—i láº§n thay Ä‘á»•i lÃ  Java láº¡i pháº£i táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng hoÃ n toÃ n má»›i. Tháº­t lÃ£ng phÃ­ bá»™ nhá»›!

ÄÃ³ lÃ  lÃ½ do chÃºng ta cÃ³ **StringBuffer** vÃ  **StringBuilder**. ChÃºng giá»‘ng nhÆ° nhá»¯ng cuá»‘n sá»• tay cho phÃ©p báº¡n táº©y xÃ³a vÃ  viáº¿t Ä‘Ã¨ lÃªn thoáº£i mÃ¡i mÃ  khÃ´ng cáº§n vá»©t cáº£ cuá»‘n sá»• Ä‘i.

NhÆ°ng táº¡i sao láº¡i cÃ³ táº­n hai cÃ¡i? ChÃºng khÃ¡c nhau á»Ÿ Ä‘Ã¢u? HÃ£y cÃ¹ng khÃ¡m phÃ¡ nhÃ©!

### 1. StringBuilder: ChÃ ng tiá»u phu tá»‘c Ä‘á»™
`StringBuilder` giá»‘ng nhÆ° má»™t ngÆ°á»i lÃ m viá»‡c cá»±c ká»³ nhanh nháº¹n nhÆ°ng chá»‰ lÃ m Ä‘Æ°á»£c khi á»Ÿ má»™t mÃ¬nh.

*   **Tá»‘c Ä‘á»™:** Ráº¥t nhanh. NÃ³ khÃ´ng tá»‘n thá»i gian Ä‘á»ƒ kiá»ƒm tra xem cÃ³ ai khÃ¡c Ä‘ang dÃ¹ng chung dá»¯ liá»‡u vá»›i mÃ¬nh khÃ´ng.
*   **Äa luá»“ng (Multi-threading):** KhÃ´ng an toÃ n. Náº¿u cÃ³ hai "ngÆ°á»i thá»£" (luá»“ng) cÃ¹ng nháº£y vÃ o sá»­a má»™t `StringBuilder` cÃ¹ng lÃºc, má»i thá»© sáº½ rá»‘i tung lÃªn.
*   **Khi nÃ o dÃ¹ng?** DÃ¹ng cho cÃ¡c chÆ°Æ¡ng trÃ¬nh Ä‘Æ¡n giáº£n, hoáº·c khi báº¡n cháº¯c cháº¯n chá»‰ cÃ³ má»™t luá»“ng duy nháº¥t Ä‘ang xá»­ lÃ½ chuá»—i Ä‘Ã³. Háº§u háº¿t cÃ¡c trÆ°á»ng há»£p láº­p trÃ¬nh cÆ¡ báº£n, báº¡n nÃªn chá»n cÃ¡i nÃ y!

### 2. StringBuffer: NgÆ°á»i báº£o vá»‡ cáº©n tháº­n
`StringBuffer` xuáº¥t hiá»‡n tá»« nhá»¯ng phiÃªn báº£n Java Ä‘áº§u tiÃªn. NÃ³ cháº­m hÆ¡n má»™t chÃºt nhÆ°ng cá»±c ká»³ Ä‘Ã¡ng tin cáº­y.

*   **Tá»‘c Ä‘á»™:** Cháº­m hÆ¡n `StringBuilder` vÃ¬ nÃ³ pháº£i máº¥t thá»i gian "khÃ³a cá»­a" má»—i khi lÃ m viá»‡c.
*   **Äa luá»“ng (Multi-threading):** Ráº¥t an toÃ n (Thread-safe). Náº¿u hai luá»“ng cÃ¹ng muá»‘n sá»­a nÃ³, `StringBuffer` sáº½ báº¯t chÃºng xáº¿p hÃ ng Ä‘á»£i nhau. KhÃ´ng ai cÃ³ thá»ƒ lÃ m há»ng dá»¯ liá»‡u cá»§a nhau.
*   **Khi nÃ o dÃ¹ng?** Chá»‰ dÃ¹ng khi báº¡n Ä‘ang lÃ m viá»‡c vá»›i cÃ¡c á»©ng dá»¥ng phá»©c táº¡p, nÆ¡i cÃ³ nhiá»u luá»“ng cháº¡y song song vÃ  cÃ¹ng chia sáº» má»™t chuá»—i vÄƒn báº£n.

### Báº£ng so sÃ¡nh nhanh

| Äáº·c Ä‘iá»ƒm | StringBuilder | StringBuffer |
| :--- | :--- | :--- |
| **Tá»‘c Ä‘á»™** | Nhanh nhÆ° chá»›p âš¡ | Cháº­m hÆ¡n má»™t chÃºt ğŸ¢ |
| **An toÃ n luá»“ng** | KhÃ´ng an toÃ n | An toÃ n tuyá»‡t Ä‘á»‘i |
| **PhiÃªn báº£n** | Xuáº¥t hiá»‡n tá»« Java 1.5 | CÃ³ tá»« Java 1.0 |

### VÃ­ dá»¥ Code

Cáº£ hai Ä‘á»u cÃ³ cÃ¡ch dÃ¹ng giá»‘ng há»‡t nhau. Báº¡n chá»‰ cáº§n chá»n cÃ¡i tÃªn mÃ¬nh muá»‘n:

```java
// DÃ¹ng StringBuilder cho tá»‘c Ä‘á»™ tá»‘i Ä‘a
StringBuilder sb = new StringBuilder("ChÃ o");
sb.append(" cÃ¡c báº¡n");
sb.append("!");
System.out.println(sb.toString()); // Káº¿t quáº£: ChÃ o cÃ¡c báº¡n!

// DÃ¹ng StringBuffer khi cáº§n sá»± an toÃ n giá»¯a cÃ¡c luá»“ng
StringBuffer sbf = new StringBuffer("Há»c");
sbf.append(" Java");
sbf.append(" tháº­t vui");
System.out.println(sbf.toString()); // Káº¿t quáº£: Há»c Java tháº­t vui
```

**Lá»i khuyÃªn tá»« chuyÃªn gia:** Náº¿u báº¡n má»›i há»c vÃ  chá»‰ viáº¿t cÃ¡c chÆ°Æ¡ng trÃ¬nh cháº¡y tá»« trÃªn xuá»‘ng dÆ°á»›i Ä‘Æ¡n giáº£n, hÃ£y luÃ´n chá»n **StringBuilder**. NÃ³ sáº½ giÃºp á»©ng dá»¥ng cá»§a báº¡n cháº¡y mÆ°á»£t mÃ  hÆ¡n Ä‘áº¥y!](#what-is-the-difference-between-stringbuffer-and-stringbuilder) |
| 9 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t chiáº¿c há»™p Ä‘á»±ng Ä‘áº§y nhá»¯ng quáº£ bÃ³ng mÃ u sáº¯c. LÃ m sao Ä‘á»ƒ báº¡n tÃ¬m tháº¥y Ä‘Ãºng quáº£ bÃ³ng mÃ¬nh cáº§n mÃ  khÃ´ng pháº£i bá»›i tung cáº£ há»™p lÃªn? ÄÃ³ chÃ­nh lÃ  lÃºc `hashCode()` vÃ  `equals()` xuáº¥t hiá»‡n Ä‘á»ƒ giáº£i cá»©u chÃºng ta!

Trong Java, hai phÆ°Æ¡ng thá»©c nÃ y lÃ  "cáº·p bÃ i trÃ¹ng" khÃ´ng thá»ƒ tÃ¡ch rá»i khi báº¡n lÃ m viá»‡c vá»›i cÃ¡c táº­p há»£p dá»¯ liá»‡u (Collections), Ä‘áº·c biá»‡t lÃ  **HashMap** hay **HashSet**.

### 1. equals(): "ChÃºng ta cÃ³ thá»±c sá»± giá»‘ng nhau khÃ´ng?"

PhÆ°Æ¡ng thá»©c `equals()` dÃ¹ng Ä‘á»ƒ so sÃ¡nh xem hai Ä‘á»‘i tÆ°á»£ng cÃ³ **ná»™i dung** giá»‘ng há»‡t nhau hay khÃ´ng.

*   Theo máº·c Ä‘á»‹nh, Java dÃ¹ng toÃ¡n tá»­ `==` Ä‘á»ƒ so sÃ¡nh Ä‘á»‹a chá»‰ Ã´ nhá»›. Tá»©c lÃ  nÃ³ chá»‰ coi hai thá»© lÃ  má»™t náº¿u chÃºng cÃ¹ng náº±m má»™t chá»— trong bá»™ nhá»›.
*   NhÆ°ng chÃºng ta thÆ°á»ng muá»‘n so sÃ¡nh giÃ¡ trá»‹ cÆ¡! VÃ­ dá»¥: hai chiáº¿c Ä‘iá»‡n thoáº¡i cÃ¹ng model, cÃ¹ng mÃ u thÃ¬ coi nhÆ° lÃ  "báº±ng nhau". ÄÃ³ lÃ  lÃ½ do báº¡n cáº§n ghi Ä‘Ã¨ (override) phÆ°Æ¡ng thá»©c nÃ y.

### 2. hashCode(): "Äá»‹a chá»‰ nhÃ  cá»§a báº¡n á»Ÿ Ä‘Ã¢u?"

HÃ£y nghÄ© `hashCode()` nhÆ° má»™t mÃ£ sá»‘ Ä‘á»‹nh danh (ID) nhanh. NÃ³ biáº¿n má»™t Ä‘á»‘i tÆ°á»£ng thÃ nh má»™t con sá»‘ nguyÃªn.

*   Khi báº¡n bá» má»™t mÃ³n Ä‘á»“ vÃ o `HashMap`, Java sáº½ há»i: "Sá»‘ cá»§a anh lÃ  bao nhiÃªu?".
*   Dá»±a vÃ o con sá»‘ nÃ y, Java sáº½ chá»‰ Ä‘á»‹nh mÃ³n Ä‘á»“ Ä‘Ã³ vÃ o má»™t cÃ¡i "xÃ´" (bucket) cá»¥ thá»ƒ. 
*   Viá»‡c nÃ y giÃºp viá»‡c tÃ¬m kiáº¿m cá»±c nhanh vÃ¬ Java chá»‰ cáº§n nhÃ¬n vÃ o Ä‘Ãºng cÃ¡i xÃ´ Ä‘Ã³ thay vÃ¬ lá»¥c lá»i toÃ n bá»™ danh sÃ¡ch.

### 3. Táº¡i sao chÃºng pháº£i Ä‘i Ä‘Ã´i vá»›i nhau?

ÄÃ¢y lÃ  quy táº¯c vÃ ng trong Java: **Náº¿u hai Ä‘á»‘i tÆ°á»£ng báº±ng nhau (`equals() == true`), chÃºng PHáº¢I cÃ³ cÃ¹ng mÃ£ `hashCode()`.**

Chuyá»‡n gÃ¬ sáº½ xáº£y ra náº¿u báº¡n phÃ¡ vá»¡ quy táº¯c nÃ y?
1. Báº¡n táº¡o ra hai Ä‘á»‘i tÆ°á»£ng "sinh Ä‘Ã´i" (ná»™i dung giá»‘ng há»‡t nhau).
2. NhÆ°ng báº¡n quÃªn khÃ´ng ghi Ä‘Ã¨ `hashCode()`, khiáº¿n chÃºng cÃ³ hai mÃ£ sá»‘ khÃ¡c nhau.
3. Khi báº¡n tÃ¬m kiáº¿m, Java Ä‘i Ä‘áº¿n "xÃ´" sá»‘ 1, trong khi mÃ³n Ä‘á»“ cá»§a báº¡n láº¡i náº±m á»Ÿ "xÃ´" sá»‘ 2.
4. Káº¿t quáº£: Java báº£o "KhÃ´ng tÃ¬m tháº¥y!", dÃ¹ mÃ³n Ä‘á»“ Ä‘Ã³ Ä‘ang náº±m lÃ¹ lÃ¹ trong danh sÃ¡ch. Tháº­t lÃ  tháº£m há»a!

### VÃ­ dá»¥ thá»±c táº¿

HÃ£y xem cÃ¡ch chÃºng ta triá»ƒn khai trong mÃ£ nguá»“n:

```java
public class Student {
    private int id;
    private String name;

    public Student(int id, String name) {
        this.id = id;
        this.name = name;
    }

    // Kiá»ƒm tra xem hai há»c sinh cÃ³ cÃ¹ng ID vÃ  tÃªn khÃ´ng
    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;
        Student student = (Student) o;
        return id == student.id && name.equals(student.name);
    }

    // Táº¡o mÃ£ sá»‘ dá»±a trÃªn ID vÃ  tÃªn
    @Override
    public int hashCode() {
        return Objects.hash(id, name);
    }
}
```

### TÃ³m láº¡i lÃ :

*   **`equals()`**: DÃ¹ng Ä‘á»ƒ kiá»ƒm tra chi tiáº¿t tá»«ng li tá»«ng tÃ­ xem cÃ³ báº±ng nhau khÃ´ng.
*   **`hashCode()`**: DÃ¹ng Ä‘á»ƒ phÃ¢n loáº¡i Ä‘á»‘i tÆ°á»£ng vÃ o cÃ¡c nhÃ³m (xÃ´) Ä‘á»ƒ tÃ¬m kiáº¿m cho nhanh.
*   **Quy táº¯c:** ÄÃ£ thay `equals()` thÃ¬ nháº¥t Ä‘á»‹nh pháº£i thay luÃ´n `hashCode()`. Äá»«ng bao giá» chia lÃ¬a chÃºng!](#what-is-the-importance-of-hashcode-and-equals-methods) |
| 10 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang viáº¿t code vÃ  Java giá»‘ng nhÆ° má»™t ngÆ°á»i giÃ¡m sÃ¡t khÃ³ tÃ­nh nhÆ°ng táº­n tÃ¢m. Trong tháº¿ giá»›i Java, lá»—i (Exception) Ä‘Æ°á»£c chia thÃ nh hai loáº¡i chÃ­nh. HÃ£y cÃ¹ng khÃ¡m phÃ¡ xem chÃºng khÃ¡c nhau tháº¿ nÃ o nhÃ©!

### 1. Checked Exceptions: "NgÆ°á»i giÃ¡m sÃ¡t nháº¯c nhá»Ÿ"

ÄÃ¢y lÃ  nhá»¯ng lá»—i mÃ  Java **biáº¿t trÆ°á»›c** lÃ  cÃ³ thá»ƒ xáº£y ra. Giá»‘ng nhÆ° viá»‡c báº¡n chuáº©n bá»‹ Ä‘i dÃ£ ngoáº¡i, Java sáº½ nháº¯c: "NÃ y, nhá»¡ trá»i mÆ°a thÃ¬ sao? Báº¡n pháº£i cÃ³ káº¿ hoáº¡ch dá»± phÃ²ng!".

*   **NÃ³ lÃ  gÃ¬?** LÃ  nhá»¯ng ngoáº¡i lá»‡ xáº£y ra ngoÃ i táº§m kiá»ƒm soÃ¡t trá»±c tiáº¿p cá»§a chÆ°Æ¡ng trÃ¬nh (vÃ­ dá»¥: file khÃ´ng tá»“n táº¡i, máº¥t káº¿t ná»‘i máº¡ng).
*   **Quy táº¯c:** Báº¡n **báº¯t buá»™c** pháº£i xá»­ lÃ½ chÃºng. Náº¿u khÃ´ng, trÃ¬nh biÃªn dá»‹ch (compiler) sáº½ "máº¯ng" báº¡n ngay láº­p tá»©c vÃ  khÃ´ng cho phÃ©p cháº¡y chÆ°Æ¡ng trÃ¬nh.
*   **CÃ¡ch xá»­ lÃ½:** DÃ¹ng khá»‘i `try-catch` hoáº·c khai bÃ¡o `throws`.

**VÃ­ dá»¥:**
```java
// Java sáº½ bÃ¡o lá»—i ngay táº¡i Ä‘Ã¢y náº¿u báº¡n khÃ´ng xá»­ lÃ½ viá»‡c file bá»‹ thiáº¿u!
FileReader file = new FileReader("bi_kip_hoc_java.txt"); 
```

### 2. Unchecked Exceptions: "Lá»—i do sÆ¡ suáº¥t"

Loáº¡i nÃ y thÃ¬ khÃ¡c. Java Ä‘á»ƒ báº¡n tá»± do hÆ¡n, nhÆ°ng náº¿u báº¡n lÃ m sai, chÆ°Æ¡ng trÃ¬nh sáº½ "vÄƒng" lá»—i ngay khi Ä‘ang cháº¡y (Runtime). ÄÃ¢y thÆ°á»ng lÃ  nhá»¯ng lá»—i logic do láº­p trÃ¬nh viÃªn viáº¿t chÆ°a ká»¹.

*   **NÃ³ lÃ  gÃ¬?** CÃ²n gá»i lÃ  **Runtime Exceptions**. VÃ­ dá»¥: chia má»™t sá»‘ cho 0, hoáº·c truy cáº­p vÃ o má»™t pháº§n tá»­ khÃ´ng tá»“n táº¡i trong máº£ng.
*   **Quy táº¯c:** TrÃ¬nh biÃªn dá»‹ch sáº½ **khÃ´ng** kiá»ƒm tra giÃºp báº¡n. Báº¡n cÃ³ thá»ƒ xá»­ lÃ½ hoáº·c khÃ´ng, nhÆ°ng tá»‘t nháº¥t lÃ  nÃªn viáº¿t code cáº©n tháº­n Ä‘á»ƒ trÃ¡nh chÃºng.
*   **CÃ¡ch xá»­ lÃ½:** Kiá»ƒm tra logic code (vÃ­ dá»¥: dÃ¹ng `if` Ä‘á»ƒ check null).

**VÃ­ dá»¥:**
```java
int[] numbers = {1, 2, 3};
// Lá»—i rá»“i! Máº£ng chá»‰ cÃ³ 3 pháº§n tá»­, láº¥y Ä‘Ã¢u ra pháº§n tá»­ thá»© 10?
System.out.println(numbers[10]); 
```

---

### TÃ³m láº¡i, Ä‘iá»ƒm khÃ¡c biá»‡t lÃ  gÃ¬?

| Äáº·c Ä‘iá»ƒm | Checked Exception | Unchecked Exception |
| :--- | :--- | :--- |
| **Thá»i Ä‘iá»ƒm bá»‹ "báº¯t"** | Ngay khi Ä‘ang viáº¿t code (Compile-time) | Khi chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y (Runtime) |
| **TrÃ¡ch nhiá»‡m** | Do hoÃ n cáº£nh khÃ¡ch quan (File, Network...) | Do lá»—i logic cá»§a ngÆ°á»i láº­p trÃ¬nh |
| **Báº¯t buá»™c xá»­ lÃ½?** | **CÃ³.** KhÃ´ng xá»­ lÃ½ lÃ  khÃ´ng cho cháº¡y! | **KhÃ´ng.** NhÆ°ng náº¿u xáº£y ra thÃ¬ mÃ¡y sáº½ "treo" |
| **Lá»›p cha** | `Exception` | `RuntimeException` |

**Lá»i khuyÃªn tá»« "Head First":** 
- Náº¿u lá»—i Ä‘Ã³ lÃ  Ä‘iá»u báº¡n khÃ´ng thá»ƒ trÃ¡nh khá»i (nhÆ° máº¡ng há»ng), hÃ£y dÃ¹ng **Checked Exception**. 
- Náº¿u lá»—i Ä‘Ã³ lÃ  do báº¡n cÃ³ thá»ƒ phÃ²ng trÃ¡nh báº±ng cÃ¡ch viáº¿t code giá»i hÆ¡n (nhÆ° check null), Ä‘Ã³ lÃ  **Unchecked Exception**](#what-is-the-difference-between-checked-and-unchecked-expceptions) |
| 11 | [Trong tháº¿ giá»›i Java, chÃºng ta cÃ³ hai nhÃ³m nhÃ¢n váº­t chÃ­nh: **Kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y** (Primitives) vÃ  **Äá»‘i tÆ°á»£ng** (Objects).

### Váº¥n Ä‘á» lÃ  gÃ¬?
Nhá»¯ng kiá»ƒu nguyÃªn thá»§y nhÆ° `int`, `boolean`, hay `char` cá»±c ká»³ nhanh vÃ  nháº¹. NhÆ°ng Ä‘Ã´i khi, Java láº¡i khÃ¡ "khÃ³ tÃ­nh". CÃ³ nhá»¯ng nÆ¡i (nhÆ° cÃ¡c danh sÃ¡ch `ArrayList`) chá»‰ cháº¥p nháº­n **Äá»‘i tÆ°á»£ng** vÃ  tháº³ng thá»«ng tá»« chá»‘i cÃ¡c kiá»ƒu nguyÃªn thá»§y.

Váº­y lÃ m sao Ä‘á»ƒ Ä‘Æ°a má»™t sá»‘ nguyÃªn `int` vÃ o má»™t danh sÃ¡ch chá»‰ nháº­n Ä‘á»‘i tÆ°á»£ng?

### Giáº£i phÃ¡p: Lá»›p bao bá»c (Wrapper Classes)
HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t viÃªn káº¹o (kiá»ƒu nguyÃªn thá»§y). Äá»ƒ Ä‘Æ°a nÃ³ vÃ o má»™t chiáº¿c há»™p sang trá»ng (Ä‘á»‘i tÆ°á»£ng), báº¡n cáº§n gÃ³i nÃ³ láº¡i. **Wrapper class** chÃ­nh lÃ  lá»›p vá» bá»c Ä‘Ã³!

Má»—i kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y Ä‘á»u cÃ³ má»™t "ngÆ°á»i anh em" lá»›p bao bá»c tÆ°Æ¡ng á»©ng:

| Kiá»ƒu nguyÃªn thá»§y | Lá»›p bao bá»c (Wrapper) |
| :--- | :--- |
| `byte` | `Byte` |
| `short` | `Short` |
| `int` | `Integer` |
| `long` | `Long` |
| `float` | `Float` |
| `double` | `Double` |
| `char` | `Character` |
| `boolean` | `Boolean` |

*(LÆ°u Ã½: CÃ¡c lá»›p bao bá»c Ä‘á»u báº¯t Ä‘áº§u báº±ng chá»¯ cÃ¡i viáº¿t hoa vÃ¬ chÃºng lÃ  Class mÃ !)*

### Autoboxing vÃ  Unboxing: PhÃ©p thuáº­t tá»± Ä‘á»™ng
Java ráº¥t thÃ´ng minh. Báº¡n khÃ´ng cáº§n pháº£i tá»± tay "gÃ³i" hay "má»Ÿ" quÃ  mÃ£i Ä‘Ã¢u.

*   **Autoboxing:** Java tá»± Ä‘á»™ng biáº¿n kiá»ƒu nguyÃªn thá»§y thÃ nh Ä‘á»‘i tÆ°á»£ng.
*   **Unboxing:** Java tá»± Ä‘á»™ng láº¥y giÃ¡ trá»‹ nguyÃªn thá»§y ra khá»i Ä‘á»‘i tÆ°á»£ng.

```java
// Autoboxing: int tá»± Ä‘á»™ng biáº¿n thÃ nh Integer
Integer myWrapper = 10; 

// Unboxing: Integer tá»± Ä‘á»™ng biáº¿n trá»Ÿ láº¡i thÃ nh int
int myPrimitive = myWrapper; 
```

### Táº¡i sao chÃºng ta cáº§n chÃºng?

1.  **LÃ m viá»‡c vá»›i Collections:** NhÆ° Ä‘Ã£ nÃ³i, `ArrayList<int>` lÃ  khÃ´ng thá»ƒ, nhÆ°ng `ArrayList<Integer>` thÃ¬ tuyá»‡t vá»i!
2.  **Cung cáº¥p cÃ¡c cÃ´ng cá»¥ há»¯u Ã­ch:** CÃ¡c lá»›p nÃ y Ä‘i kÃ¨m vá»›i cÃ¡c phÆ°Æ¡ng thá»©c cá»±c ká»³ tiá»‡n lá»£i. Báº¡n muá»‘n biáº¿n má»™t chuá»—i `"123"` thÃ nh sá»‘? HÃ£y dÃ¹ng:
    ```java
    int num = Integer.parseInt("123");
    ```
3.  **GiÃ¡ trá»‹ null:** Má»™t biáº¿n `int` luÃ´n pháº£i cÃ³ giÃ¡ trá»‹ (máº·c Ä‘á»‹nh lÃ  0), nhÆ°ng má»™t Ä‘á»‘i tÆ°á»£ng `Integer` cÃ³ thá»ƒ lÃ  `null`. ÄÃ´i khi "khÃ´ng cÃ³ gÃ¬ cáº£" láº¡i lÃ  má»™t thÃ´ng tin quan trá»ng!

**TÃ³m láº¡i:** Wrapper classes giÃºp cÃ¡c kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y "hÃ²a nháº­p" vÃ o tháº¿ giá»›i Ä‘á»‘i tÆ°á»£ng cá»§a Java má»™t cÃ¡ch mÆ°á»£t mÃ .](#what-are-wrapper-classes) |
| 12 | [Báº¡n cÃ³ bao giá» nghe ai Ä‘Ã³ nÃ³i ráº±ng Java lÃ  má»™t ngÃ´n ngá»¯ "hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng thuáº§n tÃºy" (pure object-oriented) chÆ°a? á»’, thá»±c táº¿ thÃ¬ khÃ´ng háº³n váº­y Ä‘Ã¢u!

DÃ¹ Java Ä‘Æ°á»£c xÃ¢y dá»±ng xoay quanh cÃ¡c Ä‘á»‘i tÆ°á»£ng, nÃ³ váº«n giá»¯ láº¡i má»™t chÃºt "hÆ¡i thá»Ÿ" cá»§a tháº¿ giá»›i cÅ©. HÃ£y cÃ¹ng khÃ¡m phÃ¡ xem táº¡i sao Java láº¡i lá»¡ máº¥t danh hiá»‡u "thuáº§n tÃºy" nÃ y nhÃ©!

### 1. Nhá»¯ng káº» ngoáº¡i Ä‘áº¡o: Kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y (Primitive Data Types)

Trong má»™t ngÃ´n ngá»¯ hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng thuáº§n tÃºy (nhÆ° Smalltalk), **má»i thá»©** Ä‘á»u pháº£i lÃ  Ä‘á»‘i tÆ°á»£ng. NhÆ°ng Java thÃ¬ khÃ¡c. Äá»ƒ giÃºp chÆ°Æ¡ng trÃ¬nh cháº¡y nhanh hÆ¡n, Java váº«n giá»¯ láº¡i cÃ¡c kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y nhÆ°:

*   `int`, `float`, `char`, `boolean`, `double`, v.v.

Nhá»¯ng anh báº¡n nÃ y khÃ´ng pháº£i lÃ  Ä‘á»‘i tÆ°á»£ng. ChÃºng khÃ´ng cÃ³ phÆ°Æ¡ng thá»©c, khÃ´ng cÃ³ thuá»™c tÃ­nh vÃ  khÃ´ng Ä‘Æ°á»£c táº¡o ra tá»« cÃ¡c lá»›p (classes). Khi báº¡n viáº¿t `int x = 5;`, `x` chá»‰ lÃ  má»™t giÃ¡ trá»‹ náº±m trong bá»™ nhá»›, khÃ´ng pháº£i lÃ  má»™t "object" thá»±c thá»¥.

### 2. Tá»« khÃ³a `static`: KhÃ´ng cáº§n Ä‘á»‘i tÆ°á»£ng váº«n cháº¡y tá»‘t

Trong tháº¿ giá»›i hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng, báº¡n thÆ°á»ng cáº§n má»™t "thá»±c thá»ƒ" (Ä‘á»‘i tÆ°á»£ng) Ä‘á»ƒ thá»±c hiá»‡n hÃ nh Ä‘á»™ng. NhÆ°ng vá»›i tá»« khÃ³a `static`, Java cho phÃ©p báº¡n gá»i phÆ°Æ¡ng thá»©c hoáº·c truy cáº­p biáº¿n mÃ  **khÃ´ng cáº§n táº¡o ra báº¥t ká»³ Ä‘á»‘i tÆ°á»£ng nÃ o**.

```java
class MathHelper {
    static int add(int a, int b) {
        return a + b;
    }
}

// Gá»i trá»±c tiáº¿p luÃ´n, khÃ´ng cáº§n "new MathHelper()"
int result = MathHelper.add(5, 10);
```

VÃ¬ báº¡n cÃ³ thá»ƒ dÃ¹ng `static` mÃ  khÃ´ng cáº§n Ä‘á»‘i tÆ°á»£ng, Java Ä‘Ã£ phÃ¡ vá»¡ quy táº¯c "má»i hÃ nh Ä‘á»™ng pháº£i thÃ´ng qua Ä‘á»‘i tÆ°á»£ng".

### 3. CÃ¡c lá»›p bao bá»c (Wrapper Classes) - Má»™t giáº£i phÃ¡p ná»­a vá»i

Java cÃ³ cung cáº¥p cÃ¡c lá»›p nhÆ° `Integer`, `Float`, `Boolean` Ä‘á»ƒ biáº¿n cÃ¡c kiá»ƒu nguyÃªn thá»§y thÃ nh Ä‘á»‘i tÆ°á»£ng. Tuy nhiÃªn, ngay cáº£ khi báº¡n dÃ¹ng chÃºng, Java váº«n thá»±c hiá»‡n cÆ¡ cháº¿ **Autoboxing** vÃ  **Unboxing** ngáº§m bÃªn dÆ°á»›i Ä‘á»ƒ chuyá»ƒn Ä‘á»•i qua láº¡i vá»›i kiá»ƒu nguyÃªn thá»§y.

Náº¿u Java thá»±c sá»± thuáº§n tÃºy, chÃºng ta sáº½ khÃ´ng bao giá» cáº§n Ä‘áº¿n cÃ¡c kiá»ƒu nguyÃªn thá»§y ngay tá»« Ä‘áº§u!

### TÃ³m láº¡i lÃ ...

Java khÃ´ng pháº£i lÃ  ngÃ´n ngá»¯ hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng thuáº§n tÃºy vÃ¬:
1. NÃ³ váº«n dÃ¹ng **kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y** Ä‘á»ƒ tá»‘i Æ°u hiá»‡u suáº¥t.
2. NÃ³ cho phÃ©p dÃ¹ng **static** Ä‘á»ƒ bá» qua bÆ°á»›c táº¡o Ä‘á»‘i tÆ°á»£ng.
3. CÃ¡c Ä‘á»‘i tÆ°á»£ng trong Java khÃ´ng thá»±c sá»± bao trÃ¹m toÃ n bá»™ há»‡ thá»‘ng.

**Ghi chÃº nhá»:** Äá»«ng quÃ¡ lo láº¯ng! Viá»‡c khÃ´ng "thuáº§n tÃºy" thá»±c ra láº¡i lÃ  má»™t Ä‘iá»ƒm máº¡nh, giÃºp Java cháº¡y nhanh vÃ  linh hoáº¡t hÆ¡n trong thá»±c táº¿ Ä‘áº¥y!](#why-java-is-not-pure-object-oriented-language) |
| 13 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang xÃ¢y dá»±ng má»™t tháº¿ giá»›i cÃ¡c loÃ i váº­t báº±ng code. Báº¡n sáº½ gáº·p hai "báº£n thiáº¿t káº¿" cá»±c ká»³ quan trá»ng: **Abstract Class** (Lá»›p trá»«u tÆ°á»£ng) vÃ  **Interface** (Giao diá»‡n). 

DÃ¹ trÃ´ng chÃºng cÃ³ váº» giá»‘ng nhau, nhÆ°ng má»¥c Ä‘Ã­ch sá»­ dá»¥ng láº¡i khÃ¡c biá»‡t hoÃ n toÃ n Ä‘áº¥y! HÃ£y cÃ¹ng bÃ³c tÃ¡ch nhÃ©.

### 1. Abstract Class: "NÃ³ LÃ€ má»™t thá»© gÃ¬ Ä‘Ã³" (Quan há»‡ IS-A)

HÃ£y nghÄ© vá» má»™t lá»›p trá»«u tÆ°á»£ng nhÆ° má»™t **báº£n thiáº¿t káº¿ dá»Ÿ dang**. NÃ³ Ä‘á»‹nh nghÄ©a má»™t danh tÃ­nh chung cho cÃ¡c lá»›p con.

*   **Má»¥c Ä‘Ã­ch:** DÃ¹ng khi cÃ¡c lá»›p cÃ³ cÃ¹ng báº£n cháº¥t. VÃ­ dá»¥: `ChÃ³` vÃ  `MÃ¨o` Ä‘á»u **LÃ€** `Äá»™ng váº­t`.
*   **Äáº·c Ä‘iá»ƒm:**
    *   NÃ³ cÃ³ thá»ƒ giá»¯ cÃ¡c biáº¿n (tráº¡ng thÃ¡i) nhÆ° `tÃªn`, `tuá»•i`.
    *   NÃ³ cÃ³ thá»ƒ cÃ³ cÃ¡c phÆ°Æ¡ng thá»©c Ä‘Ã£ viáº¿t sáºµn code (nhÆ° `thá»Ÿ()`) Ä‘á»ƒ cÃ¡c lá»›p con dÃ¹ng chung.
    *   Báº¡n khÃ´ng thá»ƒ táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng trá»±c tiáº¿p tá»« nÃ³ (khÃ´ng thá»ƒ `new Äá»™ngVáº­t()`).

```java
abstract class DongVat {
    String ten;
    void ngu() {
        System.out.println("Zzz...");
    }
    abstract void keu(); // Lá»›p con báº¯t buá»™c pháº£i tá»± Ä‘á»‹nh nghÄ©a tiáº¿ng kÃªu
}
```

### 2. Interface: "NÃ³ cÃ³ thá»ƒ LÃ€M Ä‘Æ°á»£c gÃ¬" (Quan há»‡ CAN-DO)

Interface giá»‘ng nhÆ° má»™t **báº£n há»£p Ä‘á»“ng** hoáº·c má»™t **kháº£ nÄƒng Ä‘áº·c biá»‡t**. NÃ³ khÃ´ng quan tÃ¢m báº¡n lÃ  ai, nÃ³ chá»‰ quan tÃ¢m báº¡n biáº¿t lÃ m gÃ¬.

*   **Má»¥c Ä‘Ã­ch:** DÃ¹ng Ä‘á»ƒ gÃ¡n cÃ¡c ká»¹ nÄƒng cho cÃ¡c lá»›p khÃ¡c nhau. VÃ­ dá»¥: Cáº£ `Chim` vÃ  `MÃ¡y bay` Ä‘á»u cÃ³ thá»ƒ `Bay`, dÃ¹ chÃºng cháº³ng liÃªn quan gÃ¬ Ä‘áº¿n nhau vá» há» hÃ ng.
*   **Äáº·c Ä‘iá»ƒm:**
    *   Chá»§ yáº¿u chá»©a cÃ¡c phÆ°Æ¡ng thá»©c "rá»—ng" (khÃ´ng cÃ³ ná»™i dung).
    *   Má»™t lá»›p cÃ³ thá»ƒ kÃ½ nhiá»u há»£p Ä‘á»“ng (implement nhiá»u interface) cÃ¹ng lÃºc.

```java
interface CoTheBay {
    void cáº¥tCÃ¡nh(); // Ai muá»‘n bay thÃ¬ pháº£i tá»± biáº¿t cÃ¡ch cáº¥t cÃ¡nh!
}
```

---

### So sÃ¡nh nhanh: Ai hÆ¡n ai?

| Äáº·c Ä‘iá»ƒm | Abstract Class | Interface |
| :--- | :--- | :--- |
| **Má»‘i quan há»‡** | LÃ  má»™t báº£n cháº¥t (Is-a). | LÃ  má»™t kháº£ nÄƒng (Can-do). |
| **Sá»‘ lÆ°á»£ng** | Má»™t lá»›p con chá»‰ Ä‘Æ°á»£c káº¿ thá»«a **Má»˜T** lá»›p cha. | Má»™t lá»›p cÃ³ thá»ƒ thá»±c thi **NHIá»€U** giao diá»‡n. |
| **Biáº¿n** | CÃ³ thá»ƒ cÃ³ biáº¿n thÆ°á»ng (non-final). | Chá»‰ cÃ³ háº±ng sá»‘ (final static). |
| **PhÆ°Æ¡ng thá»©c** | CÃ³ thá»ƒ cÃ³ code sáºµn hoáº·c Ä‘á»ƒ trá»‘ng. | Äa sá»‘ lÃ  Ä‘á»ƒ trá»‘ng (trá»« default method). |

### Váº­y khi nÃ o thÃ¬ chá»n cÃ¡i nÃ o?

*   **DÃ¹ng Abstract Class khi:** Báº¡n muá»‘n chia sáº» code giá»¯a cÃ¡c lá»›p cÃ³ liÃªn quan máº­t thiáº¿t vá»›i nhau. Báº¡n muá»‘n kiá»ƒm soÃ¡t cÃ¡c thuá»™c tÃ­nh chung nhÆ° mÃ u sáº¯c, cÃ¢n náº·ng.
*   **DÃ¹ng Interface khi:** Báº¡n muá»‘n thiáº¿t láº­p má»™t tiÃªu chuáº©n chung cho cÃ¡c lá»›p cháº³ng liÃªn quan gÃ¬ Ä‘áº¿n nhau. VÃ­ dá»¥: `MÃ¡y áº£nh`, `Äiá»‡n thoáº¡i` vÃ  `Xe hÆ¡i` Ä‘á»u cÃ³ thá»ƒ cÃ³ tÃ­nh nÄƒng `Káº¿tNá»‘iWifi`.

**Ghi nhá»› náº±m lÃ²ng:**
> "Abstract class lÃ  vá» **Danh tÃ­nh**, Interface lÃ  vá» **HÃ nh vi**."](#what-is-the-difference-between-abstract-class-and-interface) |
| 14 | [Báº¡n Ä‘Ã£ bao giá» gáº·p má»™t interface... trá»‘ng rá»—ng chÆ°a? KhÃ´ng cÃ³ phÆ°Æ¡ng thá»©c, khÃ´ng cÃ³ biáº¿n, cháº³ng cÃ³ gÃ¬ bÃªn trong cáº£. Nghe cÃ³ váº» vÃ´ dá»¥ng nhá»‰? NhÆ°ng chá» Ä‘Ã£, trong Java, chÃºng cá»±c ká»³ quan trá»ng Ä‘áº¥y! ChÃºng Ä‘Æ°á»£c gá»i lÃ  **Marker Interfaces** (Giao diá»‡n Ä‘Ã¡nh dáº¥u).

HÃ£y cÃ¹ng tÃ¬m hiá»ƒu xem chÃºng lÃ  gÃ¬ vÃ  táº¡i sao chÃºng láº¡i tá»“n táº¡i nhÃ©!

### Marker Interface lÃ  gÃ¬?

NÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n nháº¥t: Marker Interface lÃ  má»™t interface **khÃ´ng chá»©a báº¥t ká»³ code nÃ o**. 

NÃ³ giá»‘ng nhÆ° má»™t chiáº¿c "nhÃ£n dÃ¡n" (tag) mÃ  báº¡n dÃ¡n lÃªn má»™t lá»›p (class). Khi má»™t class "máº·c" chiáº¿c nhÃ£n nÃ y vÃ o, nÃ³ Ä‘ang nÃ³i vá»›i Java Virtual Machine (JVM) hoáº·c cÃ¡c cÃ´ng cá»¥ khÃ¡c ráº±ng: "NÃ y, tÃ´i cÃ³ kháº£ nÄƒng Ä‘áº·c biá»‡t Ä‘áº¥y, hÃ£y xá»­ lÃ½ tÃ´i theo cÃ¡ch riÃªng nhÃ©!"

### VÃ­ dá»¥ thá»±c táº¿

HÃ£y nhÃ¬n vÃ o interface `Serializable` ná»•i tiáº¿ng trong Java:

```java
public interface Serializable {
    // Trá»‘ng trÆ¡n! KhÃ´ng cÃ³ gÃ¬ á»Ÿ Ä‘Ã¢y cáº£.
}
```

Náº¿u báº¡n muá»‘n lÆ°u tráº¡ng thÃ¡i cá»§a má»™t Ä‘á»‘i tÆ°á»£ng xuá»‘ng á»• cá»©ng, class cá»§a báº¡n pháº£i "Ä‘Ã¡nh dáº¥u" mÃ¬nh báº±ng interface nÃ y:

```java
import java.io.Serializable;

// ChÃºc má»«ng! Class Student giá» Ä‘Ã£ Ä‘Æ°á»£c "dÃ¡n nhÃ£n" Ä‘á»ƒ cÃ³ thá»ƒ lÆ°u trá»¯.
public class Student implements Serializable {
    String name;
    int age;
}
```

### Táº¡i sao chÃºng ta cáº§n chÃºng?

1.  **Äá»ƒ thÃ´ng bÃ¡o:** NÃ³ bÃ¡o hiá»‡u cho JVM hoáº·c má»™t API nÃ o Ä‘Ã³ ráº±ng Ä‘á»‘i tÆ°á»£ng nÃ y Ä‘Æ°á»£c phÃ©p thá»±c hiá»‡n má»™t hÃ nh Ä‘á»™ng cá»¥ thá»ƒ (nhÆ° sao chÃ©p Ä‘á»‘i tÆ°á»£ng hoáº·c ghi vÃ o file).
2.  **PhÃ¢n loáº¡i:** GiÃºp báº¡n nhÃ³m cÃ¡c lá»›p cÃ³ cÃ¹ng Ä‘áº·c Ä‘iá»ƒm láº¡i vá»›i nhau ngay cáº£ khi chÃºng khÃ´ng cÃ³ chung hÃ nh vi (phÆ°Æ¡ng thá»©c).

### CÃ¡c Marker Interface phá»• biáº¿n báº¡n sáº½ gáº·p:

*   **`Serializable`**: Cho phÃ©p Ä‘á»‘i tÆ°á»£ng biáº¿n thÃ nh chuá»—i byte Ä‘á»ƒ gá»­i qua máº¡ng hoáº·c lÆ°u file.
*   **`Cloneable`**: Cho phÃ©p báº¡n táº¡o ra má»™t báº£n sao y há»‡t cá»§a Ä‘á»‘i tÆ°á»£ng báº±ng phÆ°Æ¡ng thá»©c `clone()`.
*   **`Remote`**: ÄÃ¡nh dáº¥u Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ Ä‘Æ°á»£c gá»i tá»« má»™t mÃ¡y tÃ­nh khÃ¡c (trong RMI).

### TÃ³m láº¡i lÃ ...

HÃ£y tÆ°á»Ÿng tÆ°á»£ng Marker Interface giá»‘ng nhÆ° má»™t chiáº¿c **tháº» VIP**. Báº£n thÃ¢n chiáº¿c tháº» khÃ´ng biáº¿t hÃ¡t hay nháº£y, nhÆ°ng khi báº¡n cáº§m nÃ³ trÃªn tay, báº£o vá»‡ (JVM) sáº½ biáº¿t báº¡n lÃ  khÃ¡ch quÃ½ vÃ  cho phÃ©p báº¡n Ä‘i vÃ o khu vá»±c Ä‘áº·c biá»‡t!

**Ghi nhá»› nhanh:**
*   KhÃ´ng cÃ³ phÆ°Æ¡ng thá»©c.
*   DÃ¹ng Ä‘á»ƒ "Ä‘Ã¡nh dáº¥u" tÃ­nh cháº¥t cá»§a class.
*   GiÃºp cÃ¡c cÃ´ng cá»¥ bÃªn ngoÃ i biáº¿t cÃ¡ch xá»­ lÃ½ class Ä‘Ã³ má»™t cÃ¡ch Ä‘áº·c biá»‡t.](#what-are-marker-interfaces) |
| 15 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang dá»n dáº¹p cÄƒn phÃ²ng cá»§a mÃ¬nh. Báº¡n cÃ³ ráº¥t nhiá»u Ä‘á»“ Ä‘áº¡c: táº¥t, sÃ¡ch, vÃ  nhá»¯ng chiáº¿c cá»‘c cÃ  phÃª cÅ©. Báº¡n sáº½ lÃ m gÃ¬ Ä‘á»ƒ quáº£n lÃ½ chÃºng? Cháº¯c cháº¯n báº¡n sáº½ khÃ´ng Ä‘á»ƒ chÃºng bá»«a bÃ£i trÃªn sÃ n nhÃ  rá»“i! Báº¡n sáº½ dÃ¹ng má»™t chiáº¿c há»™p Ä‘á»ƒ Ä‘á»±ng táº¥t, má»™t cÃ¡i giÃ¡ Ä‘á»ƒ xáº¿p sÃ¡ch, vÃ  má»™t cÃ¡i khay Ä‘á»ƒ gom Ä‘á»‘ng cá»‘c láº¡i.

Trong Java, **Collections** chÃ­nh lÃ  nhá»¯ng chiáº¿c "há»™p chá»©a" thÃ´ng minh Ä‘Ã³.

### Collections lÃ  gÃ¬?

NÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n, má»™t **Collection** lÃ  má»™t váº­t chá»©a dÃ¹ng Ä‘á»ƒ gom nhiá»u mÃ³n Ä‘á»“ (chÃºng ta gá»i lÃ  cÃ¡c Ä‘á»‘i tÆ°á»£ng - objects) láº¡i thÃ nh má»™t nhÃ³m duy nháº¥t. 

TrÆ°á»›c Ä‘Ã¢y, báº¡n cÃ³ thá»ƒ Ä‘Ã£ dÃ¹ng **Array** (máº£ng). Máº£ng cÅ©ng giá»‘ng nhÆ° má»™t chiáº¿c khay Ä‘á»±ng trá»©ng cÃ³ kÃ­ch thÆ°á»›c cá»‘ Ä‘á»‹nh: náº¿u khay cÃ³ 12 ngÄƒn, báº¡n chá»‰ Ä‘á»ƒ Ä‘Æ°á»£c Ä‘Ãºng 12 quáº£, khÃ´ng hÆ¡n khÃ´ng kÃ©m. NhÆ°ng cuá»™c Ä‘á»i thÃ¬ luÃ´n thay Ä‘á»•i! ÄÃ´i khi báº¡n cáº§n thÃªm Ä‘á»“ vÃ o, hoáº·c láº¥y bá»›t Ä‘á»“ ra. ÄÃ³ lÃ  lÃºc Collections xuáº¥t hiá»‡n Ä‘á»ƒ giáº£i cá»©u báº¡n.

### Táº¡i sao chÃºng ta cáº§n chÃºng?

1.  **KÃ­ch cá»¡ linh hoáº¡t:** KhÃ´ng giá»‘ng nhÆ° máº£ng, Collections cÃ³ thá»ƒ co giÃ£n. Báº¡n muá»‘n thÃªm 100 mÃ³n Ä‘á»“? ÄÆ°á»£c luÃ´n! Muá»‘n xÃ³a sáº¡ch chá»‰ cÃ²n 1 mÃ³n? KhÃ´ng thÃ nh váº¥n Ä‘á»!
2.  **CÃ³ sáºµn "Ä‘á»“ chÆ¡i":** Collections Ä‘i kÃ¨m vá»›i ráº¥t nhiá»u phÆ°Æ¡ng thá»©c (methods) cá»±c ká»³ tiá»‡n lá»£i. Báº¡n muá»‘n sáº¯p xáº¿p thá»© tá»±? TÃ¬m kiáº¿m má»™t mÃ³n Ä‘á»“? Hay Ä‘áº£o ngÆ°á»£c danh sÃ¡ch? Táº¥t cáº£ Ä‘Ã£ cÃ³ sáºµn, báº¡n chá»‰ viá»‡c gá»i lá»‡nh thÃ´i.
3.  **Cáº¥u trÃºc Ä‘a dáº¡ng:** TÃ¹y vÃ o má»¥c Ä‘Ã­ch, báº¡n cÃ³ thá»ƒ chá»n loáº¡i "há»™p" phÃ¹ há»£p:
    *   **List:** Giá»‘ng nhÆ° má»™t danh sÃ¡ch Ä‘i chá»£. Thá»© tá»± ráº¥t quan trá»ng vÃ  báº¡n cÃ³ thá»ƒ mua hai mÃ³n giá»‘ng há»‡t nhau (nhÆ° mua 2 há»™p sá»¯a váº­y).
    *   **Set:** Giá»‘ng nhÆ° má»™t bá»™ sÆ°u táº­p tem Ä‘á»™c nháº¥t. KhÃ´ng bao giá» cÃ³ hai mÃ³n trÃ¹ng láº·p.
    *   **Map:** Giá»‘ng nhÆ° má»™t cuá»‘n danh báº¡ Ä‘iá»‡n thoáº¡i. Báº¡n dÃ¹ng má»™t cÃ¡i "TÃªn" (Key) Ä‘á»ƒ tÃ¬m ra "Sá»‘ Ä‘iá»‡n thoáº¡i" (Value) tÆ°Æ¡ng á»©ng.

### Thá»­ xem code trÃ´ng nhÆ° tháº¿ nÃ o nhÃ©!

HÃ£y nhÃ¬n cÃ¡ch chÃºng ta táº¡o ra má»™t danh sÃ¡ch cÃ¡c bÃ i hÃ¡t yÃªu thÃ­ch báº±ng `ArrayList` (má»™t loáº¡i Collection phá»• biáº¿n nháº¥t):

```java
import java.util.*; // Äá»«ng quÃªn "má»i" thÆ° viá»‡n nÃ y vÃ o nhÃ©!

public class SongList {
    public static void main(String[] args) {
        // Táº¡o má»™t cÃ¡i tÃºi Ä‘á»±ng tÃªn cÃ¡c bÃ i hÃ¡t
        ArrayList<String> mySongs = new ArrayList<String>();

        // ThÃªm bÃ i hÃ¡t vÃ o tÃºi
        mySongs.add("Shape of You");
        mySongs.add("Yellow");
        mySongs.add("Bohemian Rhapsody");

        // Xem trong tÃºi cÃ³ gÃ¬ nÃ o
        System.out.println(mySongs);

        // Ã”i, bÃ i "Yellow" khÃ´ng cÃ²n hot ná»¯a, xÃ³a Ä‘i thÃ´i!
        mySongs.remove("Yellow");

        // Kiá»ƒm tra xem tÃºi cÃ²n bao nhiÃªu bÃ i?
        System.out.println("Sá»‘ lÆ°á»£ng bÃ i hÃ¡t: " + mySongs.size());
    }
}
```

### Äiá»ƒm máº¥u chá»‘t cáº§n nhá»›:

*   **Máº£ng (Array)** thÃ¬ cá»©ng nháº¯c vá» kÃ­ch thÆ°á»›c.
*   **Collections** thÃ¬ linh hoáº¡t, thÃ´ng minh vÃ  cá»±c ká»³ máº¡nh máº½.
*   ChÃºng giÃºp báº¡n quáº£n lÃ½ dá»¯ liá»‡u mÃ  khÃ´ng cáº§n pháº£i lo láº¯ng vá» viá»‡c "há»™p" cÃ³ bá»‹ Ä‘áº§y hay khÃ´ng.

Báº¡n Ä‘Ã£ sáºµn sÃ ng Ä‘á»ƒ chá»n cho mÃ¬nh má»™t chiáº¿c "há»™p" phÃ¹ há»£p chÆ°a? Tiáº¿p thÃ´i nÃ o!](#what-are-collections-in-java) |
| 16 | [ChÃ o báº¡n! Báº¡n Ä‘ang tháº¯c máº¯c khÃ´ng biáº¿t nÃªn chá»n **ArrayList** hay **Vector** Ä‘á»ƒ lÆ°u trá»¯ danh sÃ¡ch dá»¯ liá»‡u trong Java? Cáº£ hai nhÃ¬n qua thÃ¬ cÃ³ váº» giá»‘ng há»‡t nhau, nhÆ°ng bÃªn trong láº¡i cÃ³ nhá»¯ng bÃ­ máº­t khÃ¡c biá»‡t Ä‘áº¥y.

HÃ£y cÃ¹ng "má»• xáº»" chÃºng theo phong cÃ¡ch cá»±c ká»³ Ä‘Æ¡n giáº£n nhÃ©!

### 1. Váº¥n Ä‘á» "An toÃ n" (Thread-Safety)

ÄÃ¢y lÃ  Ä‘iá»ƒm khÃ¡c biá»‡t lá»›n nháº¥t giá»¯a hai anh chÃ ng nÃ y.

*   **Vector:** Giá»‘ng nhÆ° má»™t phÃ²ng táº¯m cÃ³ khÃ³a cá»­a. Táº¡i má»™t thá»i Ä‘iá»ƒm, chá»‰ cÃ³ **má»™t** ngÆ°á»i (thread) Ä‘Æ°á»£c vÃ o. NÃ³ sá»­ dá»¥ng cÆ¡ cháº¿ `synchronized` Ä‘á»ƒ báº£o vá»‡ dá»¯ liá»‡u. Náº¿u báº¡n lÃ m viá»‡c Ä‘a luá»“ng, Vector giÃºp báº¡n an tÃ¢m vÃ¬ khÃ´ng sá»£ dá»¯ liá»‡u bá»‹ xÃ¡o trá»™n.
*   **ArrayList:** Giá»‘ng nhÆ° má»™t phÃ²ng táº¯m cÃ´ng cá»™ng khÃ´ng cÃ³ khÃ³a! Nhiá»u ngÆ°á»i (threads) cÃ³ thá»ƒ cÃ¹ng xÃ´ng vÃ o má»™t lÃºc. NÃ³ **khÃ´ng** an toÃ n khi cháº¡y Ä‘a luá»“ng (non-synchronized).

### 2. Tá»‘c Ä‘á»™ (Performance)

VÃ¬ tÃ­nh cÃ¡ch khÃ¡c nhau á»Ÿ trÃªn nÃªn tá»‘c Ä‘á»™ cá»§a chÃºng cÅ©ng khÃ¡c xa:

*   **ArrayList:** VÃ¬ khÃ´ng pháº£i máº¥t thá»i gian "khÃ³a cá»­a" vÃ  "má»Ÿ cá»­a" (nhÆ° Vector), nÃªn nÃ³ cháº¡y **nhanh hÆ¡n** ráº¥t nhiá»u. Trong háº§u háº¿t cÃ¡c á»©ng dá»¥ng thÃ´ng thÆ°á»ng, ArrayList lÃ  nhÃ  vÃ´ Ä‘á»‹ch vá» tá»‘c Ä‘á»™.
*   **Vector:** Cháº­m cháº¡p hÆ¡n vÃ¬ má»—i láº§n thao tÃ¡c, nÃ³ pháº£i kiá»ƒm tra xem cÃ³ ai Ä‘ang dÃ¹ng khÃ´ng rá»“i má»›i cho phÃ©p luá»“ng tiáº¿p theo vÃ o.

### 3. CÃ¡ch chÃºng "lá»›n lÃªn" (Data Resizing)

Cáº£ hai Ä‘á»u cÃ³ kháº£ nÄƒng tá»± co giÃ£n kÃ­ch thÆ°á»›c khi danh sÃ¡ch Ä‘áº§y. NhÆ°ng chÃºng cÃ³ cÃ¡ch "tÄƒng trÆ°á»Ÿng" khÃ¡c nhau:

*   **ArrayList:** Khi háº¿t chá»—, nÃ³ sáº½ tÄƒng thÃªm **50%** kÃ­ch thÆ°á»›c hiá»‡n táº¡i.
*   **Vector:** Khi háº¿t chá»—, nÃ³ chÆ¡i lá»›n hÆ¡n, tÄƒng gáº¥p Ä‘Ã´i (**100%**) kÃ­ch thÆ°á»›c hiá»‡n táº¡i.

### 4. Váº­y khi nÃ o dÃ¹ng cÃ¡i nÃ o?

HÃ£y nhá»› quy táº¯c vÃ ng nÃ y:

*   **DÃ¹ng ArrayList:** Trong 99% cÃ¡c trÆ°á»ng há»£p. Náº¿u báº¡n chá»‰ viáº¿t code thÃ´ng thÆ°á»ng vÃ  khÃ´ng cáº§n lo láº¯ng vá» viá»‡c nhiá»u luá»“ng cháº¡y cÃ¹ng lÃºc, hÃ£y chá»n ArrayList. NÃ³ nháº¹, nhanh vÃ  hiá»‡n Ä‘áº¡i.
*   **DÃ¹ng Vector:** Chá»‰ khi nÃ o báº¡n thá»±c sá»± cáº§n sá»± an toÃ n tuyá»‡t Ä‘á»‘i giá»¯a cÃ¡c luá»“ng (thread-safe) mÃ  khÃ´ng muá»‘n tá»± tay viáº¿t code Ä‘á»“ng bá»™ hÃ³a. 

---

### Báº£ng so sÃ¡nh nhanh

| Äáº·c Ä‘iá»ƒm | ArrayList | Vector |
| :--- | :--- | :--- |
| **Äá»“ng bá»™ hÃ³a** | KhÃ´ng (Non-synchronized) | CÃ³ (Synchronized) |
| **Tá»‘c Ä‘á»™** | Nhanh hÆ¡n | Cháº­m hÆ¡n |
| **TÄƒng trÆ°á»Ÿng** | TÄƒng 50% | TÄƒng 100% |
| **Äá»™ phá»• biáº¿n** | Ráº¥t phá»• biáº¿n | CÅ©, Ã­t dÃ¹ng hÆ¡n |

**Lá»i khuyÃªn tá»« chuyÃªn gia:** Náº¿u báº¡n má»›i há»c, hÃ£y cá»© lÃ m báº¡n vá»›i **ArrayList** trÆ°á»›c Ä‘Ã£. NÃ³ lÃ  "con cÆ°ng" cá»§a háº§u háº¿t cÃ¡c láº­p trÃ¬nh viÃªn Java hiá»‡n nay Ä‘áº¥y!](#what-are-the-differences-between-arraylist-and-vector) |
| 17 | [### PhÆ°Æ¡ng thá»©c `finalize()` lÃ  gÃ¬ nhá»‰?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t Ä‘á»™i dá»n dáº¹p vá»‡ sinh cá»±c ká»³ chÄƒm chá»‰ trong Java, tÃªn lÃ  **Garbage Collector (GC)**. Nhiá»‡m vá»¥ cá»§a Ä‘á»™i nÃ y lÃ  Ä‘i quanh bá»™ nhá»› vÃ  dá»n dáº¹p nhá»¯ng Ä‘á»‘i tÆ°á»£ng (objects) "pháº¿ tháº£i" mÃ  báº¡n khÃ´ng cÃ²n dÃ¹ng tá»›i ná»¯a.

NhÆ°ng trÆ°á»›c khi má»™t Ä‘á»‘i tÆ°á»£ng bá»‹ "tá»‘ng vÃ o thÃ¹ng rÃ¡c", nÃ³ cÃ³ thá»ƒ muá»‘n lÃ m má»™t viá»‡c cuá»‘i cÃ¹ng â€” nhÆ° Ä‘Ã³ng má»™t tá»‡p tin Ä‘ang má»Ÿ hoáº·c ngáº¯t káº¿t ná»‘i vá»›i cÆ¡ sá»Ÿ dá»¯ liá»‡u. ÄÃ³ chÃ­nh lÃ  lÃºc phÆ°Æ¡ng thá»©c `finalize()` xuáº¥t hiá»‡n!

**NÃ³i ngáº¯n gá»n:** `finalize()` lÃ  má»™t phÆ°Æ¡ng thá»©c Ä‘áº·c biá»‡t Ä‘Æ°á»£c gá»i ngay **trÆ°á»›c khi** Ä‘á»‘i tÆ°á»£ng bá»‹ tiÃªu há»§y bá»Ÿi bá»™ nhá»›.

---

### LÃ m sao Ä‘á»ƒ ghi Ä‘Ã¨ (override) nÃ³?

Má»i Ä‘á»‘i tÆ°á»£ng trong Java Ä‘á»u káº¿ thá»«a tá»« lá»›p cha `Object`. Lá»›p `Object` nÃ y Ä‘Ã£ cÃ³ sáºµn má»™t phÆ°Æ¡ng thá»©c `finalize()`, nhÆ°ng nÃ³ cháº³ng lÃ m gÃ¬ cáº£. Náº¿u báº¡n muá»‘n Ä‘á»‘i tÆ°á»£ng cá»§a mÃ¬nh lÃ m Ä‘iá»u gÃ¬ Ä‘Ã³ trÆ°á»›c khi "ra Ä‘i", báº¡n pháº£i tá»± viáº¿t láº¡i nÃ³ (override).

ÄÃ¢y lÃ  cÃ¡ch báº¡n thá»±c hiá»‡n:

```java
public class MySmartObject {

    // ÄÃ¢y lÃ  phÆ°Æ¡ng thá»©c finalize báº¡n ghi Ä‘Ã¨ láº¡i
    @Override
    protected void finalize() throws Throwable {
        try {
            System.out.println("Äá»£i Ä‘Ã£! TÃ´i Ä‘ang dá»n dáº¹p ná»‘t cÃ´ng viá»‡c trÆ°á»›c khi biáº¿n máº¥t...");
            // ThÃªm code dá»n dáº¹p cá»§a báº¡n á»Ÿ Ä‘Ã¢y (vÃ­ dá»¥: Ä‘Ã³ng file)
        } finally {
            // LuÃ´n luÃ´n gá»i phÆ°Æ¡ng thá»©c cá»§a lá»›p cha Ä‘á»ƒ Ä‘áº£m báº£o an toÃ n
            super.finalize();
        }
    }
}
```

### Nhá»¯ng Ä‘iá»u "sá»‘ng cÃ²n" báº¡n cáº§n nhá»›:

1.  **Báº¡n khÃ´ng náº¯m quyá»n kiá»ƒm soÃ¡t:** Báº¡n khÃ´ng thá»ƒ biáº¿t chÃ­nh xÃ¡c **khi nÃ o** GC sáº½ cháº¡y. VÃ¬ váº­y, báº¡n cÅ©ng khÃ´ng biáº¿t bao giá» `finalize()` má»›i Ä‘Æ°á»£c gá»i. Äá»«ng Ä‘á»ƒ nhá»¯ng viá»‡c quan trá»ng vÃ  kháº©n cáº¥p vÃ o Ä‘Ã¢y nhÃ©!
2.  **Chá»‰ cháº¡y má»™t láº§n:** Java Ä‘áº£m báº£o ráº±ng `finalize()` chá»‰ Ä‘Æ°á»£c gá»i tá»‘i Ä‘a má»™t láº§n cho má»—i Ä‘á»‘i tÆ°á»£ng.
3.  **ÄÃ£ lá»—i thá»i (Deprecated):** Tá»« phiÃªn báº£n Java 9 trá»Ÿ Ä‘i, cÃ¡c chuyÃªn gia khuyÃªn chÃºng ta khÃ´ng nÃªn dÃ¹ng `finalize()` ná»¯a vÃ¬ nÃ³ khÃ¡ cháº­m vÃ  khÃ´ng á»•n Ä‘á»‹nh. Thay vÃ o Ä‘Ã³, hÃ£y dÃ¹ng `try-with-resources` hoáº·c giao diá»‡n `AutoCloseable`.

**Lá»i khuyÃªn tá»« "Head First":** HÃ£y coi `finalize()` giá»‘ng nhÆ° má»™t lá»i trÄƒng trá»‘i cuá»‘i cÃ¹ng. NÃ³ cÃ³ thá»ƒ xáº£y ra, nhÆ°ng tá»‘t nháº¥t lÃ  Ä‘á»«ng quÃ¡ phá»¥ thuá»™c vÃ o nÃ³ Ä‘á»ƒ giá»¯ cho chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cháº¡y mÆ°á»£t mÃ !](#what-is-finalize-method-how-do-you-override-it) |
| 18 | [### Comparable vs. Comparator: Cuá»™c chiáº¿n phÃ¢n loáº¡i!

Báº¡n Ä‘Ã£ bao giá» tá»± há»i lÃ m tháº¿ nÃ o Java biáº¿t cÃ¡ch sáº¯p xáº¿p má»™t danh sÃ¡ch cÃ¡c con sá»‘ hay chá»¯ cÃ¡i chÆ°a? Ráº¥t Ä‘Æ¡n giáº£n, Java chá»‰ cáº§n nhÃ¬n vÃ o chÃºng vÃ  so sÃ¡nh. NhÆ°ng chuyá»‡n gÃ¬ sáº½ xáº£y ra náº¿u báº¡n muá»‘n sáº¯p xáº¿p má»™t danh sÃ¡ch cÃ¡c Ä‘á»‘i tÆ°á»£ng phá»©c táº¡p hÆ¡n, vÃ­ dá»¥ nhÆ° "Há»c sinh" hay "BÃ i hÃ¡t"?

ÄÃ³ chÃ­nh lÃ  lÃºc hai "ngÆ°á»i hÃ¹ng" **Comparable** vÃ  **Comparator** xuáº¥t hiá»‡n. HÃ£y cÃ¹ng tÃ¬m hiá»ƒu xem chÃºng khÃ¡c nhau tháº¿ nÃ o nhÃ©!

---

### 1. Comparable: "TÃ´i tá»± biáº¿t cÃ¡ch sáº¯p xáº¿p báº£n thÃ¢n mÃ¬nh!"

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n lÃ  má»™t Ä‘á»‘i tÆ°á»£ng `Há»c sinh`. Náº¿u báº¡n sá»­ dá»¥ng `Comparable`, nghÄ©a lÃ  báº¡n tá»± mang trong mÃ¬nh má»™t quy táº¯c sáº¯p xáº¿p máº·c Ä‘á»‹nh (thÆ°á»ng gá»i lÃ  "thá»© tá»± tá»± nhiÃªn").

*   **Náº±m á»Ÿ Ä‘Ã¢u?** NÃ³ náº±m ngay bÃªn trong class cá»§a báº¡n.
*   **PhÆ°Æ¡ng thá»©c tháº§n thÃ¡nh:** `compareTo(Object obj)`.
*   **CÃ¡ch dÃ¹ng:** Báº¡n pháº£i sá»­a Ä‘á»•i code cá»§a class Ä‘Ã³ vÃ  thá»±c thi (implement) interface `Comparable`.

**VÃ­ dá»¥:** Báº¡n muá»‘n máº·c Ä‘á»‹nh há»c sinh nÃ o cÃ³ ID nhá» hÆ¡n thÃ¬ Ä‘á»©ng trÆ°á»›c.

```java
public class Student implements Comparable<Student> {
    int id;
    String name;

    public int compareTo(Student other) {
        // So sÃ¡nh ID cá»§a tÃ´i vá»›i ID cá»§a báº¡n há»c khÃ¡c
        return this.id - other.id; 
    }
}
```

---

### 2. Comparator: "TÃ´i lÃ  má»™t trá»ng tÃ i bÃªn ngoÃ i!"

BÃ¢y giá», hÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n khÃ´ng muá»‘n sáº¯p xáº¿p theo ID ná»¯a. Báº¡n muá»‘n sáº¯p xáº¿p theo TÃªn, hoáº·c theo Äiá»ƒm sá»‘. Báº¡n khÃ´ng thá»ƒ cá»© thay Ä‘á»•i mÃ£i code trong class `Student` Ä‘Æ°á»£c. 

ÄÃ³ lÃ  lÃºc báº¡n cáº§n má»™t **Comparator**. NÃ³ giá»‘ng nhÆ° má»™t "ngÆ°á»i bÃªn thá»© ba" Ä‘á»©ng ra phÃ¢n xá»­.

*   **Náº±m á»Ÿ Ä‘Ã¢u?** Trong má»™t class riÃªng biá»‡t.
*   **PhÆ°Æ¡ng thá»©c tháº§n thÃ¡nh:** `compare(Object obj1, Object obj2)`.
*   **CÃ¡ch dÃ¹ng:** Báº¡n táº¡o ra nhiá»u bá»™ quy táº¯c khÃ¡c nhau mÃ  khÃ´ng cáº§n Ä‘á»™ng vÃ o class gá»‘c.

**VÃ­ dá»¥:** Má»™t bá»™ quy táº¯c Ä‘á»ƒ sáº¯p xáº¿p theo tÃªn.

```java
public class NameComparator implements Comparator<Student> {
    public int compare(Student s1, Student s2) {
        // So sÃ¡nh tÃªn cá»§a hai há»c sinh
        return s1.name.compareTo(s2.name);
    }
}
```

---

### TÃ³m láº¡i, chÃºng khÃ¡c nhau chá»— nÃ o?

| Äáº·c Ä‘iá»ƒm | Comparable (Tá»± thÃ¢n) | Comparator (Trá»ng tÃ i) |
| :--- | :--- | :--- |
| **Sá»‘ lÆ°á»£ng quy táº¯c** | Chá»‰ cÃ³ **duy nháº¥t má»™t** quy táº¯c máº·c Ä‘á»‹nh. | CÃ³ thá»ƒ cÃ³ **bao nhiÃªu tÃ¹y thÃ­ch** (theo tÃªn, theo tuá»•i...). |
| **Vá»‹ trÃ­** | Náº±m ngay trong class cá»§a Ä‘á»‘i tÆ°á»£ng. | Náº±m á»Ÿ má»™t class riÃªng biá»‡t khÃ¡c. |
| **PhÆ°Æ¡ng thá»©c** | `compareTo()` | `compare()` |
| **Thay Ä‘á»•i code** | Báº¡n **pháº£i sá»­a** code cá»§a class gá»‘c. | Báº¡n **khÃ´ng cáº§n cháº¡m vÃ o** class gá»‘c. |

---

### Báº¡n nÃªn chá»n cÃ¡i nÃ o?

*   DÃ¹ng **Comparable** náº¿u Ä‘Ã³ lÃ  cÃ¡ch sáº¯p xáº¿p "hiá»ƒn nhiÃªn" vÃ  duy nháº¥t cá»§a Ä‘á»‘i tÆ°á»£ng (nhÆ° ID tÄƒng dáº§n).
*   DÃ¹ng **Comparator** náº¿u báº¡n muá»‘n cÃ³ nhiá»u lá»±a chá»n sáº¯p xáº¿p khÃ¡c nhau, hoáº·c khi báº¡n khÃ´ng thá»ƒ sá»­a code cá»§a class Ä‘Ã³ (vÃ­ dá»¥ class tá»« má»™t thÆ° viá»‡n bÃªn ngoÃ i).

Tháº­t Ä‘Æ¡n giáº£n pháº£i khÃ´ng? Giá» thÃ¬ hÃ£y báº¯t tay vÃ o sáº¯p xáº¿p tháº¿ giá»›i Java cá»§a báº¡n thÃ´i!](#what-is-the-difference-between-the-comparable-and-comparator-interfaces) |
| 19 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t lá»›p há»c (class). ThÃ´ng thÆ°á»ng, chÃºng ta Ä‘áº·t cÃ¡c lá»›p Ä‘á»©ng cáº¡nh nhau. NhÆ°ng trong Java, báº¡n cÃ³ thá»ƒ lÃ m má»™t Ä‘iá»u cá»±c ká»³ thÃº vá»‹: **Ä‘áº·t má»™t lá»›p bÃªn trong má»™t lá»›p khÃ¡c!**

ÄÃ³ chÃ­nh lÃ  **Inner Class** (Lá»›p ná»™i bá»™).

### Táº¡i sao chÃºng ta láº¡i lÃ m váº­y?

HÃ£y nghÄ© vá» nÃ³ nhÆ° tháº¿ nÃ y: Má»™t chiáº¿c xe hÆ¡i cÃ³ má»™t Ä‘á»™ng cÆ¡. Äá»™ng cÆ¡ lÃ  má»™t pháº§n cá»±c ká»³ Ä‘áº·c biá»‡t cá»§a chiáº¿c xe. NÃ³ khÃ´ng thá»±c sá»± cÃ³ Ã½ nghÄ©a náº¿u náº±m ngoÃ i chiáº¿c xe Ä‘Ã³, vÃ  nÃ³ cáº§n Ä‘Æ°á»£c "truy cáº­p" vÃ o cÃ¡c bá»™ pháº­n khÃ¡c cá»§a xe Ä‘á»ƒ hoáº¡t Ä‘á»™ng.

### CÃ¡ch nÃ³ hoáº¡t Ä‘á»™ng

Khi báº¡n Ä‘áº·t má»™t lá»›p bÃªn trong má»™t lá»›p khÃ¡c, lá»›p bÃªn trong sáº½ cÃ³ má»™t "Ä‘áº·c quyá»n" tá»‘i thÆ°á»£ng: **NÃ³ cÃ³ thá»ƒ nhÃ¬n tháº¥y má»i thá»© bÃªn trong lá»›p bao quanh nÃ³**, ká»ƒ cáº£ nhá»¯ng thá»© Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  `private`.

ÄÃ¢y lÃ  hÃ¬nh dÃ¡ng cá»§a nÃ³ trong mÃ£ nguá»“n:

```java
class OuterClass {
    private String message = "ChÃ o báº¡n tá»« lá»›p bÃªn ngoÃ i!";

    class InnerClass {
        void display() {
            // Lá»›p bÃªn trong cÃ³ thá»ƒ dÃ¹ng biáº¿n message má»™t cÃ¡ch dá»… dÃ ng!
            System.out.println(message);
        }
    }
}
```

### Nhá»¯ng Ä‘iá»ƒm máº¥u chá»‘t báº¡n cáº§n nhá»›:

*   **Sá»± gáº¯n káº¿t cháº·t cháº½:** Lá»›p ná»™i bá»™ giá»‘ng nhÆ° má»™t "trá»£ lÃ½ riÃªng" cho lá»›p bÃªn ngoÃ i. NÃ³ giÃºp gom nhÃ³m cÃ¡c xá»­ lÃ½ logic láº¡i vá»›i nhau má»™t cÃ¡ch gá»n gÃ ng.
*   **TÃ­nh riÃªng tÆ°:** Náº¿u báº¡n chá»‰ muá»‘n dÃ¹ng má»™t lá»›p nÃ o Ä‘Ã³ cho duy nháº¥t má»™t má»¥c Ä‘Ã­ch bÃªn trong má»™t lá»›p khÃ¡c, hÃ£y biáº¿n nÃ³ thÃ nh Inner Class. NhÆ° váº­y, tháº¿ giá»›i bÃªn ngoÃ i sáº½ khÃ´ng biáº¿t Ä‘áº¿n sá»± tá»“n táº¡i cá»§a nÃ³.
*   **CÃ¡ch táº¡o Ä‘á»‘i tÆ°á»£ng:** ÄÃ¢y lÃ  pháº§n hÆ¡i láº¡ láº«m má»™t chÃºt! Äá»ƒ táº¡o ra má»™t "Ä‘á»©a con" (Inner Class), báº¡n pháº£i cÃ³ má»™t "ngÆ°á»i cha" (Outer Class) trÆ°á»›c Ä‘Ã£.

```java
OuterClass outer = new OuterClass();
OuterClass.InnerClass inner = outer.new InnerClass();
inner.display();
```

### TÃ³m láº¡i lÃ ...

Inner Class giÃºp mÃ£ nguá»“n cá»§a báº¡n **sáº¡ch sáº½ hÆ¡n**, **dá»… quáº£n lÃ½ hÆ¡n** vÃ  cho phÃ©p cÃ¡c Ä‘á»‘i tÆ°á»£ng **káº¿t ná»‘i vá»›i nhau máº­t thiáº¿t hÆ¡n**. NÃ³ giá»‘ng nhÆ° má»™t chiáº¿c há»™p nhá» náº±m gá»n trong má»™t chiáº¿c há»™p lá»›n, giÃºp má»i thá»© Ä‘Æ°á»£c sáº¯p xáº¿p Ä‘Ãºng vá»‹ trÃ­ cá»§a mÃ¬nh!](#what-is-an-inner-class) |
| 20 | [Báº¡n Ä‘Ã£ bao giá» bá»‘i rá»‘i vÃ¬ ba tá»« nÃ y trÃ´ng cá»© "na nÃ¡" nhau chÆ°a? Äá»«ng lo, dÃ¹ tÃªn gá»i gáº§n giá»‘ng nhau, nhÆ°ng trong tháº¿ giá»›i Java, chÃºng Ä‘Ã³ng nhá»¯ng vai trÃ² hoÃ n toÃ n khÃ¡c biá»‡t. HÃ£y cÃ¹ng bÃ³c tÃ¡ch tá»«ng cÃ¡i má»™t nhÃ©!

### 1. final: "Chá»‘t háº¡" (Tá»« khÃ³a)
HÃ£y nghÄ© vá» `final` nhÆ° má»™t dáº¥u niÃªm phong. Má»™t khi báº¡n Ä‘Ã£ dÃ¡n nhÃ£n `final`, thá»© Ä‘Ã³ sáº½ khÃ´ng bao giá» thay Ä‘á»•i Ä‘Æ°á»£c ná»¯a.

*   **Vá»›i biáº¿n:** Biáº¿n Ä‘Ã³ trá»Ÿ thÃ nh háº±ng sá»‘. ÄÃ£ gÃ¡n giÃ¡ trá»‹ má»™t láº§n lÃ  khÃ´ng cÃ³ láº§n thá»© hai!
*   **Vá»›i phÆ°Æ¡ng thá»©c (method):** CÃ¡c lá»›p con khÃ´ng thá»ƒ "ghi Ä‘Ã¨" (override) nÃ³. Báº¡n muá»‘n giá»¯ nguyÃªn báº£n gá»‘c? HÃ£y dÃ¹ng `final`.
*   **Vá»›i lá»›p (class):** KhÃ´ng ai cÃ³ thá»ƒ káº¿ thá»«a tá»« lá»›p nÃ y Ä‘Æ°á»£c ná»¯a. Cháº¥m háº¿t!

```java
final int MAX_SPEED = 90; 
// MAX_SPEED = 100; // Lá»—i ngay! KhÃ´ng thá»ƒ thay Ä‘á»•i Ä‘Ã¢u.
```

### 2. finally: "Kiá»ƒu gÃ¬ cÅ©ng cháº¡y" (Khá»‘i mÃ£)
`finally` lÃ  má»™t ngÆ°á»i báº¡n Ä‘á»“ng hÃ nh trung thÃ nh cá»§a khá»‘i `try-catch`. DÃ¹ chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cháº¡y mÆ°á»£t mÃ  hay gáº·p lá»—i "vÄƒng" tung tÃ³e, khá»‘i `finally` váº«n luÃ´n á»Ÿ Ä‘Ã³ Ä‘á»ƒ dá»n dáº¹p.

NÃ³ thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ Ä‘Ã³ng cÃ¡c káº¿t ná»‘i nhÆ° File hoáº·c Database.

```java
try {
    // Thá»­ lÃ m gÃ¬ Ä‘Ã³ máº¡o hiá»ƒm á»Ÿ Ä‘Ã¢y...
} catch (Exception e) {
    // Ã”i há»ng rá»“i, xá»­ lÃ½ lá»—i thÃ´i!
} finally {
    // DÃ¹ thÃ nh cÃ´ng hay tháº¥t báº¡i, tÃ´i váº«n sáº½ cháº¡y.
    System.out.println("Dá»n dáº¹p xong xuÃ´i!");
}
```

### 3. finalize(): "Lá»i trÄƒng trá»‘i" (PhÆ°Æ¡ng thá»©c)
ÄÃ¢y lÃ  má»™t phÆ°Æ¡ng thá»©c Ä‘áº·c biá»‡t cá»§a lá»›p `Object`. HÃ£y tÆ°á»Ÿng tÆ°á»£ng nÃ³ giá»‘ng nhÆ° má»™t ngÆ°á»i chuáº©n bá»‹ rá»i khá»i cÄƒn nhÃ  vÃ  muá»‘n dá»n rÃ¡c láº§n cuá»‘i.

*   Bá»™ thu gom rÃ¡c (Garbage Collector) sáº½ gá»i phÆ°Æ¡ng thá»©c nÃ y ngay trÆ°á»›c khi tiÃªu há»§y má»™t Ä‘á»‘i tÆ°á»£ng Ä‘á»ƒ giáº£i phÃ³ng bá»™ nhá»›.
*   **LÆ°u Ã½ nhá»:** NgÃ y nay, cÃ¡c láº­p trÃ¬nh viÃªn Java hiá»‡n Ä‘áº¡i ráº¥t Ã­t khi dÃ¹ng `finalize()` vÃ¬ nÃ³ khÃ¡ cháº­m cháº¡p vÃ  khÃ´ng Ä‘Ã¡ng tin cáº­y. Äá»«ng quÃ¡ phá»¥ thuá»™c vÃ o nÃ³ nhÃ©!

```java
protected void finalize() {
    // Thá»±c hiá»‡n cÃ¡c cÃ´ng viá»‡c dá»n dáº¹p cuá»‘i cÃ¹ng trÆ°á»›c khi "biáº¿n máº¥t"
}
```

---

### Báº£ng tÃ³m táº¯t nhanh:

| Äáº·c Ä‘iá»ƒm | final | finally | finalize() |
| :--- | :--- | :--- | :--- |
| **Báº£n cháº¥t** | Tá»« khÃ³a (Keyword) | Khá»‘i mÃ£ (Block) | PhÆ°Æ¡ng thá»©c (Method) |
| **CÃ´ng dá»¥ng** | Háº¡n cháº¿ thay Ä‘á»•i (biáº¿n, hÃ m, lá»›p). | Äáº£m báº£o mÃ£ luÃ´n Ä‘Æ°á»£c thá»±c thi (dá»n dáº¹p). | Dá»n dáº¹p Ä‘á»‘i tÆ°á»£ng trÆ°á»›c khi bá»‹ xÃ³a bá». |
| **Äi kÃ¨m vá»›i** | Biáº¿n, PhÆ°Æ¡ng thá»©c, Lá»›p. | Khá»‘i try-catch. | Lá»›p Object. |](#what-is-the-difference-between-final-finally-and-finalize-in-java) |
| 21 | [ChÃ o báº¡n! Báº¡n Ä‘ang tháº¯c máº¯c táº¡i sao Java láº¡i cÃ³ táº­n hai cÃ¡ch Ä‘á»ƒ so sÃ¡nh má»i thá»©? Äá»«ng lo, Ä‘Ã¢y lÃ  cÃ¢u há»i kinh Ä‘iá»ƒn mÃ  ai má»›i há»c cÅ©ng tá»«ng "vÃ² Ä‘áº§u bá»©t tai". HÃ£y tÆ°á»Ÿng tÆ°á»£ng chÃºng ta Ä‘ang á»Ÿ trong má»™t gara Ã´ tÃ´ Ä‘á»ƒ hiá»ƒu rÃµ váº¥n Ä‘á» nÃ y nhÃ©!

### 1. ToÃ¡n tá»­ `==` (So sÃ¡nh báº±ng)

HÃ£y coi `==` nhÆ° má»™t bÃ i kiá»ƒm tra **danh tÃ­nh**. NÃ³ khÃ´ng quan tÃ¢m bÃªn trong cÃ¡i há»™p cÃ³ gÃ¬, nÃ³ chá»‰ quan tÃ¢m: "Hai cÃ¡i tÃªn nÃ y cÃ³ Ä‘ang chá»‰ vÃ o cÃ¹ng má»™t cÃ¡i há»™p duy nháº¥t khÃ´ng?"

*   **Vá»›i kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y (int, double, char...):** NÃ³ so sÃ¡nh giÃ¡ trá»‹ tháº­t. `5 == 5` lÃ  Ä‘Ãºng (True). QuÃ¡ Ä‘Æ¡n giáº£n!
*   **Vá»›i Ä‘á»‘i tÆ°á»£ng (Object):** NÃ³ so sÃ¡nh **Ä‘á»‹a chá»‰ Ã´ nhá»›**. Náº¿u hai biáº¿n cÃ¹ng trá» vÃ o má»™t "vá»‹ trÃ­" trÃªn thanh RAM, nÃ³ má»›i tráº£ vá» True.

**VÃ­ dá»¥:**
```java
String s1 = new String("Hello");
String s2 = new String("Hello");

System.out.println(s1 == s2); // Káº¿t quáº£: False!
```
*Táº¡i sao?* VÃ¬ `new` táº¡o ra hai chiáº¿c há»™p khÃ¡c nhau náº±m á»Ÿ hai nÆ¡i khÃ¡c nhau, dÃ¹ bÃªn trong chÃºng Ä‘á»u ghi chá»¯ "Hello".

---

### 2. PhÆ°Æ¡ng thá»©c `equals()` (So sÃ¡nh ná»™i dung)

Náº¿u `==` lÃ  kiá»ƒm tra danh tÃ­nh, thÃ¬ `equals()` lÃ  bÃ i kiá»ƒm tra **Ã½ nghÄ©a**. NÃ³ má»Ÿ há»™p ra vÃ  nhÃ¬n vÃ o bÃªn trong Ä‘á»ƒ xem ná»™i dung cÃ³ giá»‘ng nhau khÃ´ng.

*   Má»¥c Ä‘Ã­ch cá»§a nÃ³ lÃ  so sÃ¡nh **tráº¡ng thÃ¡i** hoáº·c **giÃ¡ trá»‹** cá»§a Ä‘á»‘i tÆ°á»£ng.
*   Máº·c Ä‘á»‹nh, `equals()` cá»§a lá»›p `Object` váº«n dÃ¹ng `==`. NhÆ°ng háº§u háº¿t cÃ¡c lá»›p nhÆ° `String`, `Integer` Ä‘Ã£ Ä‘Æ°á»£c cÃ¡c láº­p trÃ¬nh viÃªn Java viáº¿t láº¡i (override) Ä‘á»ƒ nÃ³ so sÃ¡nh ná»™i dung.

**VÃ­ dá»¥:**
```java
String s1 = new String("Hello");
String s2 = new String("Hello");

System.out.println(s1.equals(s2)); // Káº¿t quáº£: True!
```
*Táº¡i sao?* VÃ¬ `equals()` cá»§a String Ä‘Ã£ kiá»ƒm tra tá»«ng chá»¯ cÃ¡i 'H-e-l-l-o' vÃ  tháº¥y chÃºng y há»‡t nhau.

---

### TÃ³m láº¡i lÃ ...

HÃ£y nhá»› quy táº¯c "vÃ ng" nÃ y:

1.  **DÃ¹ng `==`** khi báº¡n muá»‘n biáº¿t: "ÄÃ¢y cÃ³ pháº£i lÃ  cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng khÃ´ng?" (ThÆ°á»ng dÃ¹ng cho cÃ¡c sá»‘ cÆ¡ báº£n nhÆ° `int`, `boolean`).
2.  **DÃ¹ng `equals()`** khi báº¡n muá»‘n biáº¿t: "Ná»™i dung cá»§a hai Ä‘á»‘i tÆ°á»£ng nÃ y cÃ³ giá»‘ng nhau khÃ´ng?" (LuÃ´n dÃ¹ng cho `String` vÃ  cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c).

**Báº£ng so sÃ¡nh nhanh:**

| Äáº·c Ä‘iá»ƒm | ToÃ¡n tá»­ `==` | PhÆ°Æ¡ng thá»©c `equals()` |
| :--- | :--- | :--- |
| **Loáº¡i** | LÃ  má»™t toÃ¡n tá»­ toÃ¡n há»c. | LÃ  má»™t phÆ°Æ¡ng thá»©c (method). |
| **Kiá»ƒm tra gÃ¬?** | Äá»‹a chá»‰ Ã´ nhá»› (Vá»‹ trÃ­). | Ná»™i dung bÃªn trong (GiÃ¡ trá»‹). |
| **DÃ¹ng cho ai?** | Cáº£ kiá»ƒu nguyÃªn thá»§y vÃ  Ä‘á»‘i tÆ°á»£ng. | Chá»‰ dÃ¹ng cho Ä‘á»‘i tÆ°á»£ng. |

**Lá»i khuyÃªn tá»« chuyÃªn gia:** Khi lÃ m viá»‡c vá»›i Chuá»—i (String), hÃ£y luÃ´n dÃ¹ng `.equals()`. Äá»«ng Ä‘á»ƒ `==` Ä‘Ã¡nh lá»«a báº¡n nhÃ©!](#what-is-the-difference-between--and-equals-method) |
| 22 | [### Náº¡p chá»“ng phÆ°Æ¡ng thá»©c (Method Overloading) vÃ  Ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c (Method Overriding) lÃ  gÃ¬?

ChÃ o báº¡n! Báº¡n cÃ³ bao giá» tháº¯c máº¯c táº¡i sao trong Java, chÃºng ta cÃ³ thá»ƒ dÃ¹ng cÃ¹ng má»™t cÃ¡i tÃªn cho nhiá»u hÃ nh Ä‘á»™ng khÃ¡c nhau, hoáº·c thay Ä‘á»•i cÃ¡ch má»™t hÃ nh Ä‘á»™ng hoáº¡t Ä‘á»™ng khÃ´ng? ÄÃ³ chÃ­nh lÃ  nhá» **Overloading** vÃ  **Overriding** Ä‘áº¥y. HÃ£y cÃ¹ng khÃ¡m phÃ¡ nhÃ©!

---

### 1. Method Overloading (Náº¡p chá»“ng phÆ°Æ¡ng thá»©c)
**"CÃ¹ng má»™t cÃ¡i tÃªn, nhÆ°ng khÃ¡c nguyÃªn liá»‡u!"**

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t chiáº¿c mÃ¡y xay sinh tá»‘.
- Náº¿u báº¡n cho **trÃ¡i cÃ¢y**, nÃ³ lÃ m sinh tá»‘.
- Náº¿u báº¡n cho **thá»‹t**, nÃ³ xay thá»‹t.
Váº«n lÃ  cÃ¡i mÃ¡y Ä‘Ã³ (cÃ¹ng tÃªn phÆ°Æ¡ng thá»©c), nhÆ°ng tÃ¹y vÃ o thá»© báº¡n Ä‘Æ°a vÃ o (tham sá»‘), nÃ³ sáº½ biáº¿t pháº£i lÃ m gÃ¬.

**Quy táº¯c vÃ ng:**
*   CÃ¡c phÆ°Æ¡ng thá»©c pháº£i **cÃ¹ng tÃªn**.
*   CÃ¡c tham sá»‘ pháº£i **khÃ¡c nhau** (khÃ¡c vá» sá»‘ lÆ°á»£ng hoáº·c kiá»ƒu dá»¯ liá»‡u).
*   NÃ³ xáº£y ra trong **cÃ¹ng má»™t Class**.

**VÃ­ dá»¥ thá»±c táº¿:**
```java
class Calculator {
    // Cá»™ng 2 sá»‘ nguyÃªn
    int add(int a, int b) {
        return a + b;
    }

    // Náº¡p chá»“ng: Cá»™ng 3 sá»‘ nguyÃªn
    int add(int a, int b, int c) {
        return a + b + c;
    }

    // Náº¡p chá»“ng: Cá»™ng 2 sá»‘ sá»‘ thá»±c (double)
    double add(double a, double b) {
        return a + b;
    }
}
```
*Táº¡i sao cáº§n nÃ³?* Äá»ƒ láº­p trÃ¬nh viÃªn khÃ´ng pháº£i nhá»› quÃ¡ nhiá»u tÃªn hÃ m nhÆ° `addInt()`, `addDouble()`, `addThreeNumbers()`... Cá»© gá»i `add()` lÃ  xong!

---

### 2. Method Overriding (Ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c)
**"Cha lÃ m tháº¿ nÃ y, nhÆ°ng con muá»‘n lÃ m kiá»ƒu khÃ¡c!"**

ÄÃ¢y lÃ  cÃ¢u chuyá»‡n vá» **Káº¿ thá»«a**. Lá»›p con láº¥y láº¡i má»™t phÆ°Æ¡ng thá»©c tá»« lá»›p cha, nhÆ°ng thay Ä‘á»•i ná»™i dung bÃªn trong cho phÃ¹ há»£p vá»›i Ä‘áº·c tÃ­nh cá»§a riÃªng nÃ³.

**Quy táº¯c vÃ ng:**
*   Pháº£i cÃ³ quan há»‡ **káº¿ thá»«a** (extends).
*   TÃªn phÆ°Æ¡ng thá»©c, tham sá»‘ vÃ  kiá»ƒu tráº£ vá» pháº£i **giá»‘ng há»‡t** lá»›p cha.
*   DÃ¹ng Ä‘á»ƒ Ä‘á»‹nh nghÄ©a láº¡i hÃ nh vi cá»¥ thá»ƒ cá»§a lá»›p con.

**VÃ­ dá»¥ thá»±c táº¿:**
```java
class Animal {
    void makeSound() {
        System.out.println("Tiáº¿ng kÃªu chung cá»§a Ä‘á»™ng váº­t...");
    }
}

class Dog extends Animal {
    @Override // ÄÃ¢y lÃ  lá»i kháº³ng Ä‘á»‹nh: "TÃ´i Ä‘ang ghi Ä‘Ã¨ Ä‘áº¥y!"
    void makeSound() {
        System.out.println("GÃ¢u GÃ¢u!");
    }
}

class Cat extends Animal {
    @Override
    void makeSound() {
        System.out.println("Meo Meo!");
    }
}
```
*Táº¡i sao cáº§n nÃ³?* Äá»ƒ cÃ¡c lá»›p con cÃ³ thá»ƒ hÃ nh Ä‘á»™ng theo cÃ¡ch riÃªng cá»§a chÃºng dÃ¹ cÃ¹ng thá»±c hiá»‡n má»™t yÃªu cáº§u chung tá»« lá»›p cha.

---

### TÃ³m táº¯t nhanh Ä‘á»ƒ khÃ´ng nháº§m láº«n:

| Äáº·c Ä‘iá»ƒm | Overloading (Náº¡p chá»“ng) | Overriding (Ghi Ä‘Ã¨) |
| :--- | :--- | :--- |
| **Vá»‹ trÃ­** | Trong cÃ¹ng má»™t Class. | á» cÃ¡c Class khÃ¡c nhau (Cha - Con). |
| **Tham sá»‘** | Pháº£i khÃ¡c nhau. | Pháº£i giá»‘ng há»‡t. |
| **Má»¥c Ä‘Ã­ch** | ThÃªm nhiá»u cÃ¡ch dÃ¹ng cho 1 cÃ¡i tÃªn. | Thay Ä‘á»•i cÃ¡ch thá»±c hiá»‡n má»™t hÃ nh Ä‘á»™ng Ä‘Ã£ cÃ³. |
| **Thá»i Ä‘iá»ƒm** | Xáº£y ra lÃºc Compile-time (khi biÃªn dá»‹ch). | Xáº£y ra lÃºc Runtime (khi chÆ°Æ¡ng trÃ¬nh cháº¡y). |

**Ghi nhá»› máº¹o nhá»:**
- **Overloading** = ThÃªm lá»±a chá»n (Extra options).
- **Overriding** = Thay tháº¿ hoÃ n toÃ n (Replace).](#what-is-method-overloading-and-method-overriding) |
| 23 | [ChÃ o báº¡n! Báº¡n Ä‘ang tháº¯c máº¯c khÃ´ng biáº¿t **HashMap** vÃ  **Hashtable** khÃ¡c nhau chá»— nÃ o Æ°? NhÃ¬n sÆ¡ qua thÃ¬ chÃºng cÃ³ váº» giá»‘ng há»‡t nhau: cáº£ hai Ä‘á»u dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u theo kiá»ƒu cáº·p "Key - Value" (KhÃ³a - GiÃ¡ trá»‹).

NhÆ°ng khoan Ä‘Ã£! Äá»«ng Ä‘á»ƒ váº» ngoÃ i Ä‘Ã³ Ä‘Ã¡nh lá»«a. ChÃºng cÃ³ nhá»¯ng Ä‘iá»ƒm khÃ¡c biá»‡t ráº¥t quan trá»ng mÃ  báº¡n cáº§n biáº¿t Ä‘á»ƒ chá»n Ä‘Ãºng cÃ´ng cá»¥ cho dá»± Ã¡n cá»§a mÃ¬nh Ä‘áº¥y. HÃ£y cÃ¹ng "má»• xáº»" chÃºng nhÃ©!

### 1. Chuyá»‡n vá» luá»“ng (Thread-safety)
ÄÃ¢y lÃ  khÃ¡c biá»‡t lá»›n nháº¥t nÃ y!

*   **Hashtable:** NÃ³ cá»±c ká»³ cáº©n tháº­n (synchronized). Äiá»u nÃ y cÃ³ nghÄ©a lÃ  nÃ³ an toÃ n khi cÃ³ nhiá»u "luá»“ng" (threads) cÃ¹ng truy cáº­p má»™t lÃºc. NhÆ°ng vÃ¬ quÃ¡ cáº©n tháº­n nÃªn nÃ³ hÆ¡i cháº­m cháº¡p.
*   **HashMap:** NÃ³ thÃ¬ phÃ³ng khoÃ¡ng hÆ¡n (non-synchronized). NÃ³ khÃ´ng tá»± báº£o vá»‡ trÆ°á»›c nhiá»u luá»“ng, nhÆ°ng bÃ¹ láº¡i, nÃ³ cháº¡y ráº¥t nhanh trong cÃ¡c á»©ng dá»¥ng Ä‘Æ¡n luá»“ng.

### 2. Nhá»¯ng giÃ¡ trá»‹ "Null" (Trá»‘ng rá»—ng)
Báº¡n cÃ³ muá»‘n Ä‘á»ƒ trá»‘ng chÃ¬a khÃ³a hay giÃ¡ trá»‹ khÃ´ng?

*   **HashMap:** Ráº¥t thoáº£i mÃ¡i! Báº¡n cÃ³ thá»ƒ Ä‘á»ƒ má»™t cÃ¡i **Key** lÃ  `null` vÃ  bao nhiÃªu cÃ¡i **Value** lÃ  `null` tÃ¹y thÃ­ch.
*   **Hashtable:** Ráº¥t nghiÃªm kháº¯c! NÃ³ "nÃ³i khÃ´ng" vá»›i `null`. Náº¿u báº¡n cá»‘ tÃ¬nh Ä‘Æ°a `null` vÃ o (dÃ¹ lÃ  Key hay Value), nÃ³ sáº½ nÃ©m ngay má»™t lá»—i `NullPointerException` vÃ o máº·t báº¡n Ä‘áº¥y!

### 3. Tá»‘c Ä‘á»™ vÃ  Hiá»‡u suáº¥t
*   **HashMap:** VÃ¬ khÃ´ng pháº£i máº¥t thá»i gian lo láº¯ng vá» viá»‡c khÃ³a dá»¯ liá»‡u cho an toÃ n luá»“ng, nÃ³ cháº¡y nhanh hÆ¡n háº³n.
*   **Hashtable:** Do cÆ¡ cháº¿ Ä‘á»“ng bá»™ hÃ³a, nÃ³ tá»‘n thÃªm má»™t chÃºt thá»i gian xá»­ lÃ½, nÃªn thÆ°á»ng cháº­m hÆ¡n HashMap.

### 4. Gia Ä‘Ã¬nh vÃ  Tá»• tiÃªn
*   **HashMap:** LÃ  má»™t thÃ nh viÃªn hiá»‡n Ä‘áº¡i cá»§a **Java Collections Framework**. NÃ³ káº¿ thá»«a tá»« lá»›p `AbstractMap`.
*   **Hashtable:** LÃ  má»™t lá»›p "Ä‘á»“ cá»•" (legacy class). NÃ³ káº¿ thá»«a tá»« má»™t lá»›p cÅ© ká»¹ tÃªn lÃ  `Dictionary`.

---

### TÃ³m táº¯t báº±ng báº£ng cho dá»… nhÃ¬n nhÃ©:

| Äáº·c Ä‘iá»ƒm | HashMap | Hashtable |
| :--- | :--- | :--- |
| **An toÃ n luá»“ng** | KhÃ´ng | CÃ³ |
| **Cho phÃ©p Null** | CÃ³ (1 Key vÃ  nhiá»u Value) | Tuyá»‡t Ä‘á»‘i khÃ´ng |
| **Tá»‘c Ä‘á»™** | Nhanh | Cháº­m hÆ¡n |
| **Káº¿ thá»«a** | AbstractMap | Dictionary |

### Váº­y tÃ´i nÃªn dÃ¹ng cÃ¡i nÃ o?

**Lá»i khuyÃªn tá»« chuyÃªn gia:** 
Háº§u háº¿t má»i trÆ°á»ng há»£p, hÃ£y chá»n **HashMap**. 

Náº¿u báº¡n Ä‘ang lÃ m viá»‡c vá»›i Ä‘a luá»“ng vÃ  cáº§n sá»± an toÃ n, thay vÃ¬ dÃ¹ng `Hashtable` cÅ© ká»¹, ngÆ°á»i ta thÆ°á»ng dÃ¹ng `ConcurrentHashMap`. NÃ³ vá»«a hiá»‡n Ä‘áº¡i, vá»«a an toÃ n mÃ  láº¡i nhanh hÆ¡n `Hashtable` nhiá»u!

```java
// CÃ¡ch dÃ¹ng HashMap Ä‘Æ¡n giáº£n:
HashMap<String, Integer> map = new HashMap<>();
map.put("Apple", 10);
map.put(null, 20); // Cháº¡y tá»‘t!

// CÃ¡ch dÃ¹ng Hashtable:
Hashtable<String, Integer> table = new Hashtable<>();
table.put("Orange", 5);
// table.put(null, 15); // Lá»—i ngay láº­p tá»©c!
```](#what-is-the-difference-between-hashmap-and-hashtable) |
| 24 | [ChÃ o báº¡n! Báº¡n Ä‘ang tháº¯c máº¯c khÃ´ng biáº¿t nÃªn chá»n **ArrayList** hay **LinkedList** cho "bá»™ sÆ°u táº­p" dá»¯ liá»‡u cá»§a mÃ¬nh? Äá»«ng lo, hÃ£y tÆ°á»Ÿng tÆ°á»£ng chÃºng ta Ä‘ang xáº¿p hÃ ng trong cÄƒng tin nhÃ©!

### 1. ArrayList: "Máº£ng linh hoáº¡t"
HÃ£y nghÄ© vá» ArrayList nhÆ° má»™t dÃ£y cÃ¡c gháº¿ ngá»“i sÃ¡t nhau. 

*   **CÃ¡ch hoáº¡t Ä‘á»™ng:** NÃ³ sá»­ dá»¥ng má»™t **máº£ng (array)** bÃªn trong Ä‘á»ƒ lÆ°u trá»¯ Ä‘á»“ váº­t.
*   **Truy cáº­p cá»±c nhanh:** Náº¿u báº¡n biáº¿t sá»‘ gháº¿ (chá»‰ sá»‘), báº¡n cÃ³ thá»ƒ nháº£y tháº³ng Ä‘áº¿n Ä‘Ã³ ngay láº­p tá»©c. "ÃŠ, ngÆ°á»i á»Ÿ gháº¿ sá»‘ 5 lÃ  ai váº­y?" â€“ BÃ¹m, cÃ³ káº¿t quáº£ ngay!
*   **Äiá»ƒm yáº¿u khi thay Ä‘á»•i:** Náº¿u báº¡n muá»‘n nhÃ©t thÃªm má»™t ngÆ°á»i vÃ o giá»¯a hÃ ng, má»i ngÆ°á»i tá»« vá»‹ trÃ­ Ä‘Ã³ trá»Ÿ Ä‘i Ä‘á»u pháº£i Ä‘á»©ng dáº­y vÃ  lÃ¹i láº¡i má»™t gháº¿. Phiá»n phá»©c nhá»‰?

### 2. LinkedList: "Chuá»—i liÃªn káº¿t"
HÃ£y tÆ°á»Ÿng tÆ°á»£ng má»™t nhÃ³m ngÆ°á»i chÆ¡i trÃ² ná»‘i vÃ²ng tay lá»›n. Má»—i ngÆ°á»i náº¯m tay ngÆ°á»i phÃ­a trÆ°á»›c vÃ  ngÆ°á»i phÃ­a sau.

*   **CÃ¡ch hoáº¡t Ä‘á»™ng:** Má»—i pháº§n tá»­ (gá»i lÃ  **Node**) giá»¯ dá»¯ liá»‡u cá»§a chÃ­nh nÃ³ vÃ  "Ä‘á»‹a chá»‰" cá»§a ngÆ°á»i báº¡n káº¿ bÃªn.
*   **Thay Ä‘á»•i cá»±c nhanh:** Báº¡n muá»‘n thÃªm má»™t ngÆ°á»i vÃ o giá»¯a? Chá»‰ cáº§n ngÆ°á»i A buÃ´ng tay ngÆ°á»i B, rá»“i cáº£ hai cÃ¹ng náº¯m tay ngÆ°á»i má»›i. Xong! KhÃ´ng ai pháº£i di chuyá»ƒn chá»— ngá»“i cáº£.
*   **Truy cáº­p cháº­m cháº¡p:** Muá»‘n tÃ¬m ngÆ°á»i á»Ÿ vá»‹ trÃ­ sá»‘ 5? Báº¡n khÃ´ng thá»ƒ nháº£y cÃ³c Ä‘Æ°á»£c. Báº¡n pháº£i há»i ngÆ°á»i thá»© 1: "Báº¡n Ä‘ang náº¯m tay ai?", rá»“i há»i ngÆ°á»i thá»© 2... cho Ä‘áº¿n khi tá»›i ngÆ°á»i thá»© 5.

---

### So sÃ¡nh nhanh (Báº£ng tÃ³m táº¯t)

| Äáº·c Ä‘iá»ƒm | ArrayList | LinkedList |
| :--- | :--- | :--- |
| **Cáº¥u trÃºc** | DÃ¹ng máº£ng Ä‘á»™ng. | DÃ¹ng danh sÃ¡ch liÃªn káº¿t Ä‘Ã´i. |
| **TÃ¬m kiáº¿m** | **Ráº¥t nhanh.** (Chá»‰ cáº§n gá»i chá»‰ sá»‘) | **Cháº­m.** (Pháº£i Ä‘i tá»« Ä‘áº§u hÃ ng) |
| **ThÃªm/XÃ³a** | **Cháº­m.** (Pháº£i dá»‹ch chuyá»ƒn cÃ¡c pháº§n tá»­) | **Ráº¥t nhanh.** (Chá»‰ cáº§n thay Ä‘á»•i liÃªn káº¿t) |
| **Bá»™ nhá»›** | Tá»‘n Ã­t bá»™ nhá»› hÆ¡n. | Tá»‘n nhiá»u hÆ¡n (vÃ¬ pháº£i lÆ°u thÃªm Ä‘á»‹a chá»‰ liÃªn káº¿t). |

---

### Khi nÃ o thÃ¬ dÃ¹ng cÃ¡i nÃ o?

**HÃ£y dÃ¹ng ArrayList khi:**
*   Báº¡n cáº§n truy cáº­p dá»¯ liá»‡u thÆ°á»ng xuyÃªn (get/set).
*   Báº¡n Ã­t khi pháº£i thÃªm hoáº·c xÃ³a pháº§n tá»­ á»Ÿ giá»¯a danh sÃ¡ch.
*   Báº¡n muá»‘n tiáº¿t kiá»‡m bá»™ nhá»›.

**HÃ£y dÃ¹ng LinkedList khi:**
*   á»¨ng dá»¥ng cá»§a báº¡n Ä‘Ã²i há»i viá»‡c thÃªm hoáº·c xÃ³a pháº§n tá»­ liÃªn tá»¥c.
*   Báº¡n khÃ´ng quan tÃ¢m láº¯m Ä‘áº¿n viá»‡c truy cáº­p ngáº«u nhiÃªn báº±ng chá»‰ sá»‘.

### Thá»­ code má»™t chÃºt nhÃ©!

Cáº£ hai Ä‘á»u dÃ¹ng chung cÃ¡c phÆ°Æ¡ng thá»©c tá»« interface `List`, nÃªn cÃ¡ch viáº¿t khÃ¡ giá»‘ng nhau:

```java
import java.util.ArrayList;
import java.util.LinkedList;
import java.util.List;

public class Main {
    public static void main(String[] args) {
        // DÃ¹ng ArrayList
        List<String> tuiDoAn = new ArrayList<>();
        tuiDoAn.add("TÃ¡o");
        tuiDoAn.get(0); // Láº¥y ra cá»±c nhanh!

        // DÃ¹ng LinkedList
        List<String> hangDoi = new LinkedList<>();
        hangDoi.add("NgÆ°á»i A");
        hangDoi.add(1, "NgÆ°á»i má»›i"); // ChÃ¨n vÃ o giá»¯a cá»±c nhanh!
    }
}
```

**Lá»i khuyÃªn tá»« chuyÃªn gia:** Trong háº§u háº¿t cÃ¡c á»©ng dá»¥ng thá»±c táº¿, **ArrayList** thÆ°á»ng Ä‘Æ°á»£c Æ°u tiÃªn vÃ¬ nÃ³ hoáº¡t Ä‘á»™ng ráº¥t hiá»‡u quáº£ vá»›i bá»™ nhá»› hiá»‡n Ä‘áº¡i. Chá»‰ chá»n LinkedList khi báº¡n thá»±c sá»± cÃ³ lÃ½ do chÃ­nh Ä‘Ã¡ng vá» viá»‡c chÃ¨n/xÃ³a dá»¯ liá»‡u liÃªn tá»¥c nhÃ©!](#what-is-the-difference-between-arraylist-and-linkedlist) |
| 25 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n lÃ  má»™t thÃ¡m tá»­. Báº¡n cÃ³ má»™t chiáº¿c há»™p Ä‘Ã³ng kÃ­n (má»™t **Object**) vÃ  báº¡n khÃ´ng há» biáº¿t bÃªn trong nÃ³ cÃ³ gÃ¬. Báº¡n khÃ´ng biáº¿t nÃ³ cÃ³ nhá»¯ng kháº£ nÄƒng nÃ o (methods) hay nÃ³ Ä‘ang giáº¥u bÃ­ máº­t gÃ¬ (fields).

BÃ¬nh thÆ°á»ng trong Java, báº¡n pháº£i biáº¿t rÃµ "hÃ¬nh hÃ i" cá»§a má»™t Class thÃ¬ má»›i Ä‘iá»u khiá»ƒn Ä‘Æ°á»£c nÃ³. NhÆ°ng vá»›i **Reflection API**, báº¡n cÃ³ má»™t loáº¡i "siÃªu nÄƒng lá»±c" Ä‘á»ƒ nhÃ¬n tháº¥u qua lá»›p vá» cá»§a báº¥t ká»³ Object nÃ o ngay khi chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y!

### Váº­y Java Reflection thá»±c sá»± lÃ  gÃ¬?

**Java Reflection** lÃ  má»™t bá»™ cÃ´ng cá»¥ (API) cho phÃ©p báº¡n "soi" vÃ o bÃªn trong cÃ¡c Class, Interfaces, Fields vÃ  Methods táº¡i thá»i Ä‘iá»ƒm thá»±c thi (**runtime**). 

NÃ³ cho phÃ©p báº¡n lÃ m nhá»¯ng viá»‡c tÆ°á»Ÿng chá»«ng nhÆ° khÃ´ng thá»ƒ:
*   Há»i má»™t Object: "NÃ y, báº¡n thuá»™c Class nÃ o tháº¿?"
*   Liá»‡t kÃª táº¥t cáº£ cÃ¡c phÆ°Æ¡ng thá»©c cá»§a má»™t Class, ká»ƒ cáº£ nhá»¯ng thá»© bá»‹ áº©n (**private**).
*   Tá»± tay táº¡o ra má»™t Object má»›i mÃ  khÃ´ng cáº§n dÃ¹ng tá»« khÃ³a `new` theo cÃ¡ch thÃ´ng thÆ°á»ng.
*   Thay Ä‘á»•i giÃ¡ trá»‹ cá»§a má»™t biáº¿n, dÃ¹ nÃ³ Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  `private`.

### Táº¡i sao chÃºng ta cáº§n nÃ³?

HÃ£y nghÄ© vá» cÃ¡c cÃ´ng cá»¥ nhÆ° **Eclipse**, **IntelliJ** hay cÃ¡c bá»™ khung (Framework) nhÆ° **Spring** vÃ  **Hibernate**. 

LÃ m sao IntelliJ biáº¿t Ä‘Æ°á»£c báº¡n cÃ³ nhá»¯ng phÆ°Æ¡ng thá»©c nÃ o Ä‘á»ƒ gá»£i Ã½ code (auto-complete)? LÃ m sao Spring cÃ³ thá»ƒ tá»± Ä‘á»™ng táº¡o Object vÃ  "bÆ¡m" (inject) chÃºng vÃ o chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n? 
**CÃ¢u tráº£ lá»i chÃ­nh lÃ  Reflection!**

### Thá»­ xem má»™t vÃ­ dá»¥ nhá» nhÃ©!

Giáº£ sá»­ báº¡n cÃ³ má»™t class Ä‘Æ¡n giáº£n:

```java
public class Cat {
    private String name = "Meow";
    
    public void sayHello() {
        System.out.println("Xin chÃ o, mÃ¬nh lÃ  mÃ¨o!");
    }
}
```

Vá»›i Reflection, báº¡n cÃ³ thá»ƒ "khÃ¡m phÃ¡" class nÃ y nhÆ° sau:

```java
// Láº¥y Ä‘á»‘i tÆ°á»£ng Class Ä‘áº¡i diá»‡n cho Cat
Class catClass = Cat.class;

// In ra tÃªn cá»§a Class
System.out.println("TÃªn class lÃ : " + catClass.getName());

// Láº¥y danh sÃ¡ch cÃ¡c phÆ°Æ¡ng thá»©c
Method[] methods = catClass.getMethods();
for (Method m : methods) {
    System.out.println("TÃ¬m tháº¥y phÆ°Æ¡ng thá»©c: " + m.getName());
}
```

### Nhá»¯ng quy táº¯c vÃ ng cáº§n nhá»›:

DÃ¹ Reflection ráº¥t quyá»n nÄƒng, nhÆ°ng hÃ£y cáº©n tháº­n:

1.  **NÃ³ cháº­m hÆ¡n má»™t chÃºt:** VÃ¬ Java pháº£i tá»‘n cÃ´ng "soi" vÃ  tÃ¬m kiáº¿m thÃ´ng tin, nÃªn nÃ³ khÃ´ng nhanh báº±ng viá»‡c gá»i trá»±c tiáº¿p.
2.  **Váº¥n Ä‘á» báº£o máº­t:** NÃ³ cÃ³ thá»ƒ phÃ¡ vá»¡ tÃ­nh Ä‘Ã³ng gÃ³i (encapsulation) báº±ng cÃ¡ch can thiá»‡p vÃ o cÃ¡c pháº§n `private`. Äá»«ng láº¡m dá»¥ng nÃ³ trá»« khi báº¡n thá»±c sá»± cáº§n!
3.  **Dá»… gÃ¢y lá»—i:** Náº¿u báº¡n gÃµ sai tÃªn phÆ°Æ¡ng thá»©c khi dÃ¹ng Reflection, trÃ¬nh biÃªn dá»‹ch sáº½ khÃ´ng bÃ¡o lá»—i Ä‘Ã¢u. Chá»‰ khi chÆ°Æ¡ng trÃ¬nh cháº¡y, nÃ³ má»›i "bÃ¹m" (nÃ©m ra Exception).

**TÃ³m láº¡i:** Reflection giá»‘ng nhÆ° má»™t chiáº¿c kÃ­nh hiá»ƒn vi. NÃ³ cá»±c ká»³ há»¯u Ã­ch Ä‘á»ƒ xÃ¢y dá»±ng cÃ¡c cÃ´ng cá»¥ máº¡nh máº½ vÃ  linh hoáº¡t, nhÆ°ng hÃ£y dÃ¹ng nÃ³ má»™t cÃ¡ch thÃ´ng minh nhÃ©!](#what-is-java-reflection-api) |
| 26 | [Khi báº¡n cháº¡y má»™t chÆ°Æ¡ng trÃ¬nh Java, mÃ¡y áº£o Java (JVM) sáº½ "mÆ°á»£n" má»™t pháº§n bá»™ nhá»› tá»« há»‡ Ä‘iá»u hÃ nh Ä‘á»ƒ lÃ m viá»‡c. HÃ£y tÆ°á»Ÿng tÆ°á»£ng JVM nhÆ° má»™t ngÆ°á»i quáº£n lÃ½ nhÃ  kho cá»±c ká»³ ngÄƒn náº¯p. Äá»ƒ khÃ´ng lÃ m má»i thá»© rá»‘i tung lÃªn, nÃ³ chia bá»™ nhá»› thÃ nh 5 khu vá»±c riÃªng biá»‡t.

CÃ¹ng khÃ¡m phÃ¡ xem bÃªn trong "nhÃ  kho" nÃ y cÃ³ gÃ¬ nhÃ©!

### 1. Class (Method) Area - Khu vÆ°á»n tri thá»©c
ÄÃ¢y lÃ  nÆ¡i Ä‘áº§u tiÃªn JVM ghÃ© thÄƒm khi Ä‘á»c mÃ£ nguá»“n cá»§a báº¡n.
*   **NÃ³ chá»©a gÃ¬?** Táº¥t cáº£ dá»¯ liá»‡u cáº¥p Ä‘á»™ lá»›p (class level). NÃ³ lÆ°u trá»¯ cáº¥u trÃºc cá»§a lá»›p, cÃ¡c phÆ°Æ¡ng thá»©c (methods), vÃ  cÃ¡c biáº¿n tÄ©nh (static variables).
*   **Äáº·c Ä‘iá»ƒm:** Chá»‰ cÃ³ má»™t khu vá»±c Class duy nháº¥t cho má»—i JVM. Má»i thá»© á»Ÿ Ä‘Ã¢y Ä‘á»u Ä‘Æ°á»£c chia sáº» dÃ¹ng chung cho toÃ n bá»™ chÆ°Æ¡ng trÃ¬nh.

### 2. Heap Area - BÃ£i cá» cá»§a cÃ¡c Äá»‘i tÆ°á»£ng
ÄÃ¢y lÃ  "vÃ¹ng Ä‘áº¥t" quan trá»ng nháº¥t vÃ  thÆ°á»ng lÃ  lá»›n nháº¥t.
*   **NÃ³ chá»©a gÃ¬?** Táº¥t cáº£ cÃ¡c **Äá»‘i tÆ°á»£ng (Objects)** mÃ  báº¡n táº¡o ra báº±ng tá»« khÃ³a `new`. 
*   **VÃ­ dá»¥:** Náº¿u báº¡n viáº¿t `Dog myDog = new Dog();`, thÃ¬ chÃº chÃ³ `Dog` thá»±c sá»± sáº½ náº±m á»Ÿ Ä‘Ã¢y.
*   **Dá»n dáº¹p:** Khi báº¡n khÃ´ng dÃ¹ng Ä‘áº¿n cÃ¡c Ä‘á»‘i tÆ°á»£ng nÃ y ná»¯a, má»™t "anh lao cÃ´ng" táº­n tá»¥y tÃªn lÃ  **Garbage Collector (GC)** sáº½ Ä‘áº¿n dá»n dáº¹p chÃºng Ä‘á»ƒ láº¥y láº¡i chá»— trá»‘ng.

### 3. Stack Area - Chá»“ng Ä‘Ä©a cÃ´ng viá»‡c
HÃ£y tÆ°á»Ÿng tÆ°á»£ng Ä‘Ã¢y lÃ  má»™t chá»“ng Ä‘Ä©a. Má»—i khi báº¡n gá»i má»™t phÆ°Æ¡ng thá»©c, má»™t "chiáº¿c Ä‘Ä©a" (gá»i lÃ  Stack Frame) sáº½ Ä‘Æ°á»£c Ä‘áº·t lÃªn trÃªn cÃ¹ng.
*   **NÃ³ chá»©a gÃ¬?** CÃ¡c biáº¿n cá»¥c bá»™ (local variables) vÃ  káº¿t quáº£ táº¡m thá»i cá»§a phÆ°Æ¡ng thá»©c Ä‘Ã³.
*   **CÃ¡ch hoáº¡t Ä‘á»™ng:** Khi phÆ°Æ¡ng thá»©c cháº¡y xong, chiáº¿c Ä‘Ä©a Ä‘Ã³ sáº½ bá»‹ nháº¥c ra khá»i chá»“ng. 
*   **Äáº·c biá»‡t:** Má»—i luá»“ng (Thread) trong Java sáº½ cÃ³ má»™t Stack riÃªng tÆ°, khÃ´ng ai xÃ¢m pháº¡m Ä‘Æ°á»£c cá»§a ai.

### 4. Program Counter (PC) Register - Kim chá»‰ nam
Má»—i luá»“ng (Thread) Ä‘ang cháº¡y Ä‘á»u cáº§n biáº¿t mÃ¬nh Ä‘ang á»Ÿ Ä‘Ã¢u vÃ  pháº£i lÃ m gÃ¬ tiáº¿p theo.
*   **NÃ³ chá»©a gÃ¬?** Äá»‹a chá»‰ cá»§a lá»‡nh JVM hiá»‡n táº¡i Ä‘ang Ä‘Æ°á»£c thá»±c thi.
*   **Nhiá»‡m vá»¥:** NÃ³ giá»‘ng nhÆ° má»™t dáº¥u trang (bookmark) giÃºp CPU biáº¿t bÆ°á»›c káº¿ tiáº¿p trong mÃ£ nguá»“n cá»§a báº¡n lÃ  gÃ¬.

### 5. Native Method Stack - CÃ¡nh cá»­a ra tháº¿ giá»›i bÃªn ngoÃ i
ÄÃ´i khi Java cáº§n "nhá» váº£" cÃ¡c ngÃ´n ngá»¯ khÃ¡c nhÆ° C hoáº·c C++ Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c tÃ¡c vá»¥ há»‡ thá»‘ng cáº¥p tháº¥p.
*   **NÃ³ chá»©a gÃ¬?** ThÃ´ng tin vá» cÃ¡c phÆ°Æ¡ng thá»©c "Native" (khÃ´ng pháº£i viáº¿t báº±ng Java).
*   **Nhiá»‡m vá»¥:** ÄÃ¢y lÃ  nÆ¡i lÆ°u trá»¯ cÃ¡c lá»i gá»i hÃ m dÃ nh riÃªng cho há»‡ Ä‘iá»u hÃ nh.

---

**TÃ³m táº¯t nhanh cho báº¡n:**
*   **Heap:** NÆ¡i cÃ¡c Ä‘á»‘i tÆ°á»£ng "sá»‘ng".
*   **Stack:** NÆ¡i cÃ¡c phÆ°Æ¡ng thá»©c "thá»±c thi".
*   **Class Area:** NÆ¡i lÆ°u trá»¯ "báº£n thiáº¿t káº¿".
*   **PC Register:** Chá»‰ Ä‘Æ°á»ng "Ä‘i Ä‘Ã¢u tiáº¿p theo".
*   **Native Stack:** DÃ nh cho cÃ¡c ngÃ´n ngá»¯ "ngoáº¡i bang".](#what-are-the-different-types-of-memory-areas-allocated-by-jvm) |
| 27 | [Báº¡n Ä‘Ã£ bao giá» tá»± há»i lÃ m tháº¿ nÃ o Java xá»­ lÃ½ khi cÃ³ lá»—i xáº£y ra chÆ°a? Trong tháº¿ giá»›i Java, chÃºng ta cÃ³ hai tá»« khÃ³a nghe ráº¥t giá»‘ng nhau nhÆ°ng láº¡i lÃ m nhá»¯ng viá»‡c hoÃ n toÃ n khÃ¡c nhau: `throw` vÃ  `throws`.

HÃ£y cÃ¹ng bÃ³c tÃ¡ch chÃºng nhÃ©!

### 1. `throw`: Káº» trá»±c tiáº¿p "nÃ©m" lá»—i
HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang kiá»ƒm tra tuá»•i cá»§a ngÆ°á»i dÃ¹ng. Náº¿u tuá»•i nhá» hÆ¡n 18, báº¡n muá»‘n dá»«ng chÆ°Æ¡ng trÃ¬nh láº¡i vÃ  bÃ¡o lá»—i ngay láº­p tá»©c. ÄÃ³ chÃ­nh lÃ  lÃºc báº¡n dÃ¹ng `throw`.

*   **NÃ³ lÃ m gÃ¬?** NÃ³ dÃ¹ng Ä‘á»ƒ táº¡o ra má»™t ngoáº¡i lá»‡ (exception) cá»¥ thá»ƒ má»™t cÃ¡ch thá»§ cÃ´ng.
*   **Vá»‹ trÃ­:** NÃ³ náº±m **bÃªn trong** thÃ¢n phÆ°Æ¡ng thá»©c.
*   **CÃ¡ch dÃ¹ng:** Theo sau nÃ³ lÃ  má»™t **Ä‘á»‘i tÆ°á»£ng** (instance) cá»§a lá»›p Exception.

```java
public void checkAge(int age) {
    if (age < 18) {
        // "NÃ©m" má»™t lá»—i ra ngoÃ i ngay láº­p tá»©c!
        throw new ArithmeticException("Báº¡n chÆ°a Ä‘á»§ tuá»•i rá»“i!");
    }
}
```

### 2. `throws`: Lá»i "cáº£nh bÃ¡o" trÆ°á»›c
`throws` thÃ¬ khÃ¡c. NÃ³ khÃ´ng trá»±c tiáº¿p gÃ¢y ra lá»—i. NÃ³ giá»‘ng nhÆ° má»™t táº¥m biá»ƒn bÃ¡o ghi ráº±ng: "Cáº©n tháº­n nhÃ©, phÆ°Æ¡ng thá»©c nÃ y cÃ³ thá»ƒ xáº£y ra váº¥n Ä‘á» Ä‘áº¥y!"

*   **NÃ³ lÃ m gÃ¬?** NÃ³ khai bÃ¡o ráº±ng má»™t phÆ°Æ¡ng thá»©c *cÃ³ kháº£ nÄƒng* sáº½ tung ra má»™t ngoáº¡i lá»‡. NÃ³ Ä‘áº©y trÃ¡ch nhiá»‡m xá»­ lÃ½ lá»—i cho ai Ä‘Ã³ gá»i phÆ°Æ¡ng thá»©c nÃ y.
*   **Vá»‹ trÃ­:** NÃ³ náº±m á»Ÿ **chá»¯ kÃ½** cá»§a phÆ°Æ¡ng thá»©c (ngay cáº¡nh tÃªn phÆ°Æ¡ng thá»©c).
*   **CÃ¡ch dÃ¹ng:** Theo sau nÃ³ lÃ  cÃ¡c **tÃªn lá»›p** Exception.

```java
// "NÃ y, tÃ´i bÃ¡o trÆ°á»›c lÃ  phÆ°Æ¡ng thá»©c nÃ y cÃ³ thá»ƒ bá»‹ lá»—i Ä‘á»c file Ä‘áº¥y!"
public void readFile() throws IOException {
    // Code Ä‘á»c file cÃ³ thá»ƒ gÃ¢y lá»—i á»Ÿ Ä‘Ã¢y
}
```

---

### Báº£ng so sÃ¡nh nhanh Ä‘á»ƒ báº¡n khÃ´ng bá»‹ nháº§m:

| Äáº·c Ä‘iá»ƒm | `throw` | `throws` |
| :--- | :--- | :--- |
| **Má»¥c Ä‘Ã­ch** | DÃ¹ng Ä‘á»ƒ chá»§ Ä‘á»™ng nÃ©m ra má»™t lá»—i cá»¥ thá»ƒ. | DÃ¹ng Ä‘á»ƒ khai bÃ¡o cÃ¡c lá»—i cÃ³ thá»ƒ xáº£y ra. |
| **Vá»‹ trÃ­** | Náº±m bÃªn trong phÆ°Æ¡ng thá»©c. | Náº±m á»Ÿ dÃ²ng khai bÃ¡o phÆ°Æ¡ng thá»©c. |
| **Sá»‘ lÆ°á»£ng** | Chá»‰ nÃ©m Ä‘Æ°á»£c **má»™t** Ä‘á»‘i tÆ°á»£ng lá»—i má»—i láº§n. | CÃ³ thá»ƒ khai bÃ¡o **nhiá»u** loáº¡i lá»—i (cÃ¡ch nhau báº±ng dáº¥u pháº©y). |
| **CÃº phÃ¡p** | `throw new Exception();` | `void method() throws Exception1, Exception2` |

### TÃ³m láº¡i lÃ ...
- Báº¡n dÃ¹ng **`throw`** khi báº¡n muá»‘n nÃ³i: "TÃ´i phÃ¡t hiá»‡n ra lá»—i rá»“i, nÃ©m nÃ³ Ä‘i!"
- Báº¡n dÃ¹ng **`throws`** khi báº¡n muá»‘n nÃ³i: "TÃ´i lÆ°á»i xá»­ lÃ½ lá»—i nÃ y láº¯m, ai gá»i tÃ´i thÃ¬ tá»± Ä‘i mÃ  giáº£i quyáº¿t (try-catch) nhÃ©!"](#what-is-the-difference-between-throw-and-throws) |
| 28 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang xÃ¢y dá»±ng má»™t trÃ² chÆ¡i. Báº¡n chá»‰ cáº§n **duy nháº¥t má»™t** Ä‘á»‘i tÆ°á»£ng Ä‘á»ƒ quáº£n lÃ½ cÃ¡c thiáº¿t láº­p (Settings) hoáº·c má»™t Ä‘á»‘i tÆ°á»£ng duy nháº¥t Ä‘á»ƒ Ä‘iá»u khiá»ƒn káº¿t ná»‘i CÆ¡ sá»Ÿ dá»¯ liá»‡u. Náº¿u má»—i nÆ¡i trong chÆ°Æ¡ng trÃ¬nh tá»± táº¡o ra má»™t báº£n sao riÃªng, má»i thá»© sáº½ rá»‘i tung lÃªn!

ÄÃ³ chÃ­nh lÃ  lÃºc **Singleton Pattern** xuáº¥t hiá»‡n Ä‘á»ƒ giáº£i cá»©u báº¡n.

### Singleton Class lÃ  gÃ¬?

NÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n nháº¥t: Má»™t lá»›p Ä‘Æ°á»£c gá»i lÃ  **Singleton** khi nÃ³ Ä‘áº£m báº£o ráº±ng **chá»‰ cÃ³ duy nháº¥t má»™t thá»±c thá»ƒ (instance)** cá»§a lá»›p Ä‘Ã³ Ä‘Æ°á»£c táº¡o ra trong suá»‘t thá»i gian chÆ°Æ¡ng trÃ¬nh cháº¡y. Má»i nÆ¡i khÃ¡c muá»‘n sá»­ dá»¥ng Ä‘á»u pháº£i dÃ¹ng chung thá»±c thá»ƒ nÃ y.

### LÃ m sao Ä‘á»ƒ táº¡o ra má»™t Singleton?

Äá»ƒ táº¡o ra má»™t lá»›p "Ä‘á»™c nháº¥t vÃ´ nhá»‹", chÃºng ta cáº§n thá»±c hiá»‡n 3 bÆ°á»›c Ä‘Æ¡n giáº£n sau:

1.  **Cháº·n cá»­a chÃ­nh (Private Constructor):** KhÃ´ng cho phÃ©p báº¥t ká»³ ai bÃªn ngoÃ i dÃ¹ng tá»« khÃ³a `new` Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng má»›i.
2.  **Táº¡o má»™t "há»™p lÆ°u trá»¯" (Static Variable):** DÃ¹ng má»™t biáº¿n `static` Ä‘á»ƒ giá»¯ thá»±c thá»ƒ duy nháº¥t cá»§a lá»›p Ä‘Ã³.
3.  **Cung cáº¥p má»™t "lá»‘i Ä‘i riÃªng" (Public Static Method):** Táº¡o má»™t phÆ°Æ¡ng thá»©c Ä‘á»ƒ cáº£ tháº¿ giá»›i cÃ³ thá»ƒ truy cáº­p vÃ o thá»±c thá»ƒ duy nháº¥t kia.

---

### CÃ¡ch thá»±c hiá»‡n (Tá»«ng bÆ°á»›c má»™t)

DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch viáº¿t code theo kiá»ƒu **Lazy Initialization** (chá»‰ táº¡o Ä‘á»‘i tÆ°á»£ng khi thá»±c sá»± cáº§n Ä‘áº¿n).

```java
public class DatabaseConnection {
    
    // 1. Táº¡o má»™t biáº¿n static Ä‘á»ƒ giá»¯ thá»±c thá»ƒ duy nháº¥t. 
    // NÃ³ giá»‘ng nhÆ° má»™t chiáº¿c há»™p rá»—ng lÃºc ban Ä‘áº§u.
    private static DatabaseConnection instance;

    // 2. "KhÃ³a" hÃ m khá»Ÿi táº¡o láº¡i báº±ng private.
    // Giá» thÃ¬ khÃ´ng ai cÃ³ thá»ƒ gá»i "new DatabaseConnection()" tá»« bÃªn ngoÃ i ná»¯a!
    private DatabaseConnection() {
        System.out.println("Äang khá»Ÿi táº¡o káº¿t ná»‘i duy nháº¥t...");
    }

    // 3. Cung cáº¥p má»™t phÆ°Æ¡ng thá»©c static Ä‘á»ƒ láº¥y thá»±c thá»ƒ nÃ y.
    public static DatabaseConnection getInstance() {
        // Náº¿u chiáº¿c há»™p váº«n rá»—ng, chÃºng ta má»›i táº¡o má»›i Ä‘á»‘i tÆ°á»£ng.
        if (instance == null) {
            instance = new DatabaseConnection();
        }
        // Náº¿u cÃ³ rá»“i, chá»‰ viá»‡c Ä‘Æ°a thá»±c thá»ƒ cÅ© ra dÃ¹ng thÃ´i.
        return instance;
    }

    public void showMessage() {
        System.out.println("ChÃ o báº¡n! TÃ´i lÃ  thá»±c thá»ƒ duy nháº¥t Ä‘Ã¢y.");
    }
}
```

### CÃ¡ch sá»­ dá»¥ng trong chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n:

Báº¡n khÃ´ng thá»ƒ dÃ¹ng `new` Ä‘Æ°á»£c ná»¯a, thay vÃ o Ä‘Ã³ báº¡n sáº½ gá»i nhÆ° tháº¿ nÃ y:

```java
public class Main {
    public static void main(String[] args) {
        
        // Láº¥y thá»±c thá»ƒ duy nháº¥t
        DatabaseConnection connection = DatabaseConnection.getInstance();
        
        // Sá»­ dá»¥ng nÃ³
        connection.showMessage();
        
        // Thá»­ láº¥y thÃªm má»™t láº§n ná»¯a xem sao?
        DatabaseConnection anotherConnection = DatabaseConnection.getInstance();
        
        // Kiá»ƒm tra xem chÃºng cÃ³ pháº£i lÃ  má»™t khÃ´ng?
        if (connection == anotherConnection) {
            System.out.println("ÄÃºng rá»“i! Cáº£ hai Ä‘á»u lÃ  cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng.");
        }
    }
}
```

### Táº¡i sao chÃºng ta cáº§n nÃ³?

*   **Tiáº¿t kiá»‡m tÃ i nguyÃªn:** Báº¡n khÃ´ng lÃ£ng phÃ­ bá»™ nhá»› Ä‘á»ƒ táº¡o ra nhiá»u Ä‘á»‘i tÆ°á»£ng giá»‘ng há»‡t nhau.
*   **Dá»… kiá»ƒm soÃ¡t:** Báº¡n biáº¿t cháº¯c cháº¯n dá»¯ liá»‡u cá»§a mÃ¬nh khÃ´ng bá»‹ phÃ¢n tÃ¡n á»Ÿ nhiá»u nÆ¡i.
*   **ToÃ n cá»¥c:** Báº¡n cÃ³ thá»ƒ truy cáº­p nÃ³ á»Ÿ báº¥t cá»© Ä‘Ã¢u trong dá»± Ã¡n.

**LÆ°u Ã½ nhá»:** CÃ¡ch lÃ m trÃªn ráº¥t tuyá»‡t vá»i cho ngÆ°á»i má»›i báº¯t Ä‘áº§u, nhÆ°ng trong mÃ´i trÆ°á»ng Ä‘a luá»“ng (multi-threading), chÃºng ta sáº½ cáº§n thÃªm má»™t chÃºt "gia vá»‹" (nhÆ° tá»« khÃ³a `synchronized`) Ä‘á»ƒ Ä‘áº£m báº£o an toÃ n tuyá»‡t Ä‘á»‘i Ä‘áº¥y!](#what-is-a-singleton-class-and-how-to-create-one) |
| 29 | [ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i tháº¿ giá»›i cá»§a **Streams**! HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang cÃ³ má»™t danh sÃ¡ch dÃ i cÃ¡c mÃ³n Ä‘á»“ chÆ¡i vÃ  báº¡n muá»‘n lá»c ra nhá»¯ng mÃ³n mÃ u Ä‘á», sau Ä‘Ã³ sáº¯p xáº¿p chÃºng theo kÃ­ch thÆ°á»›c. Thay vÃ¬ pháº£i tá»± tay nháº·t tá»«ng mÃ³n má»™t cÃ¡ch má»‡t má»i, Java 8 mang Ä‘áº¿n cho báº¡n má»™t "dÃ¢y chuyá»n sáº£n xuáº¥t" tá»± Ä‘á»™ng cá»±c ká»³ xá»‹n xÃ².

DÆ°á»›i Ä‘Ã¢y lÃ  nhá»¯ng Ä‘áº·c Ä‘iá»ƒm "Ä‘Ã¡ng Ä‘á»“ng tiá»n bÃ¡t gáº¡o" cá»§a Stream API mÃ  báº¡n cáº§n biáº¿t:

### 1. Stream khÃ´ng lÆ°u trá»¯ dá»¯ liá»‡u
Äá»«ng nháº§m láº«n nhÃ©! Stream khÃ´ng pháº£i lÃ  má»™t cáº¥u trÃºc dá»¯ liá»‡u nhÆ° ArrayList hay Set. NÃ³ giá»‘ng nhÆ° má»™t **Ä‘Æ°á»ng á»‘ng dáº«n nÆ°á»›c**. Dá»¯ liá»‡u cháº£y qua á»‘ng, Ä‘Æ°á»£c xá»­ lÃ½, nhÆ°ng báº£n thÃ¢n cÃ¡i á»‘ng khÃ´ng giá»¯ nÆ°á»›c láº¡i. NÃ³ chá»‰ láº¥y dá»¯ liá»‡u tá»« má»™t nguá»“n (nhÆ° Collection hoáº·c Array) vÃ  chuyá»ƒn Ä‘i thÃ´i.

### 2. KhÃ´ng lÃ m thay Ä‘á»•i nguá»“n dá»¯ liá»‡u
ÄÃ¢y lÃ  má»™t Ä‘iá»ƒm cá»±c ká»³ vÄƒn minh. Khi báº¡n lá»c má»™t danh sÃ¡ch báº±ng Stream, danh sÃ¡ch gá»‘c cá»§a báº¡n váº«n cÃ²n nguyÃªn váº¹n. Stream sáº½ táº¡o ra má»™t káº¿t quáº£ má»›i dá»±a trÃªn nhá»¯ng gÃ¬ nÃ³ Ä‘Ã£ xá»­ lÃ½. Ráº¥t an toÃ n, Ä‘Ãºng khÃ´ng?

### 3. Thiáº¿t káº¿ theo kiá»ƒu "LÆ°á»i biáº¿ng" (Lazy Evaluation)
Stream ráº¥t thÃ´ng minh. NÃ³ sáº½ khÃ´ng lÃ m gÃ¬ cáº£ cho Ä‘áº¿n khi báº¡n thá»±c sá»± yÃªu cáº§u káº¿t quáº£ cuá»‘i cÃ¹ng. CÃ¡c thao tÃ¡c nhÆ° `filter()` hay `map()` chá»‰ lÃ  nhá»¯ng lá»i há»©a "tÃ´i sáº½ lÃ m viá»‡c nÃ y". Chá»‰ khi báº¡n gá»i má»™t lá»‡nh káº¿t thÃºc (nhÆ° `collect()` hay `forEach()`), Stream má»›i thá»±c sá»± báº¯t tay vÃ o cháº¡y. Äiá»u nÃ y giÃºp tá»‘i Æ°u hiá»‡u suáº¥t cá»±c tá»‘t!

### 4. CÃ³ thá»ƒ Ä‘i tiáº¿p hoáº·c dá»«ng láº¡i (Intermediate & Terminal Operations)
HÃ£y tÆ°á»Ÿng tÆ°á»£ng Stream giá»‘ng nhÆ° má»™t cÃ´ng thá»©c náº¥u Äƒn:
*   **Thao tÃ¡c trung gian (Intermediate):** Giá»‘ng nhÆ° bÆ°á»›c "thÃ¡i rau", "rá»­a thá»‹t". NÃ³ luÃ´n tráº£ vá» má»™t Stream má»›i Ä‘á»ƒ báº¡n cÃ³ thá»ƒ lÃ m tiáº¿p bÆ°á»›c ná»¯a. VÃ­ dá»¥: `filter()`, `map()`, `sorted()`.
*   **Thao tÃ¡c káº¿t thÃºc (Terminal):** Giá»‘ng nhÆ° bÆ°á»›c "dá»n ra Ä‘Ä©a". NÃ³ sáº½ Ä‘Ã³ng Ä‘Æ°á»ng á»‘ng láº¡i vÃ  tráº£ vá» káº¿t quáº£ cuá»‘i cÃ¹ng (má»™t con sá»‘, má»™t danh sÃ¡ch, hoáº·c cháº³ng tráº£ vá» gÃ¬ cáº£). VÃ­ dá»¥: `forEach()`, `collect()`, `reduce()`.

### 5. Kháº£ nÄƒng xá»­ lÃ½ song song (Parallelism)
Báº¡n cÃ³ má»™t Ä‘á»‘ng dá»¯ liá»‡u khá»•ng lá»“? Thay vÃ¬ xá»­ lÃ½ tá»«ng cÃ¡i má»™t, Stream cho phÃ©p báº¡n chia viá»‡c ra cho nhiá»u "cÃ´ng nhÃ¢n" (lÃµi CPU) lÃ m cÃ¹ng lÃºc chá»‰ vá»›i má»™t cÃ¢u lá»‡nh Ä‘Æ¡n giáº£n: `.parallelStream()`. Nhanh hÆ¡n gáº¥p bá»™i mÃ  khÃ´ng cáº§n pháº£i Ä‘au Ä‘áº§u viáº¿t code Ä‘a luá»“ng phá»©c táº¡p!

### 6. Code ngáº¯n gá»n, dá»… Ä‘á»c (Declarative Style)
Thay vÃ¬ viáº¿t nhá»¯ng vÃ²ng láº·p `for` loáº±ng ngoáº±ng vá»›i cÃ¡c biáº¿n Ä‘áº¿m `i, j`, báº¡n chá»‰ cáº§n nÃ³i cho Java biáº¿t báº¡n **muá»‘n gÃ¬**, chá»© khÃ´ng pháº£i **lÃ m tháº¿ nÃ o**. 

HÃ£y nhÃ¬n thá»­ xem:

```java
// CÃ¡ch cÅ© (Láº·p Ä‘i láº·p láº¡i phÃ¡t má»‡t!)
List<String> result = new ArrayList<>();
for (String s : list) {
    if (s.startsWith("A")) {
        result.add(s.toUpperCase());
    }
}

// CÃ¡ch dÃ¹ng Stream (Gá»n nháº¹, sang cháº£nh!)
List<String> result = list.stream()
    .filter(s -> s.startsWith("A")) // Lá»c nhá»¯ng tá»« báº¯t Ä‘áº§u báº±ng 'A'
    .map(String::toUpperCase)       // Chuyá»ƒn sang chá»¯ hoa
    .collect(Collectors.toList());  // Gom láº¡i vÃ o danh sÃ¡ch má»›i
```

Tháº­t tuyá»‡t vá»i pháº£i khÃ´ng? Stream API giÃºp code cá»§a báº¡n trÃ´ng sáº¡ch sáº½, chuyÃªn nghiá»‡p vÃ  Ã­t lá»—i hÆ¡n háº³n!](#what-are-java-8-stream-api-features) |
| 30 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang duyá»‡t qua má»™t danh sÃ¡ch (List) cÃ¡c mÃ³n Ä‘á»“. Äá»™t nhiÃªn, cÃ³ ai Ä‘Ã³ nháº£y vÃ o thÃªm hoáº·c xÃ³a má»™t mÃ³n Ä‘á»“ ngay khi báº¡n Ä‘ang Ä‘áº¿m. Chuyá»‡n gÃ¬ sáº½ xáº£y ra? 

Trong Java, cÃ¡c Iterator xá»­ lÃ½ tÃ¬nh huá»‘ng nÃ y theo hai cÃ¡ch khÃ¡c nhau: **Fail-Fast** vÃ  **Fail-Safe**. HÃ£y cÃ¹ng khÃ¡m phÃ¡ nhÃ©!

### 1. Fail-Fast Iterator (Káº» nÃ³ng tÃ­nh)

ÄÃºng nhÆ° cÃ¡i tÃªn, loáº¡i nÃ y sáº½ "bÃ¡o lá»—i ngay láº­p tá»©c" náº¿u nÃ³ phÃ¡t hiá»‡n cáº¥u trÃºc cá»§a táº­p há»£p (Collection) bá»‹ thay Ä‘á»•i trong khi nÃ³ Ä‘ang lÃ m viá»‡c.

*   **CÆ¡ cháº¿:** NÃ³ sá»­ dá»¥ng má»™t bá»™ Ä‘áº¿m ná»™i bá»™ gá»i lÃ  `modCount`. Má»—i khi báº¡n thÃªm hoáº·c xÃ³a pháº§n tá»­, `modCount` sáº½ tÄƒng lÃªn. Náº¿u Iterator tháº¥y con sá»‘ nÃ y thay Ä‘á»•i báº¥t ngá», nÃ³ sáº½ ná»•i giáº­n!
*   **Háº­u quáº£:** NÃ³ nÃ©m ngay ra má»™t ngoáº¡i lá»‡: `ConcurrentModificationException`.
*   **VÃ­ dá»¥:** `ArrayList`, `HashMap`, `Vector`.

**Thá»­ xem code nhÃ©:**

```java
List<String> list = new ArrayList<>();
list.add("Java");
list.add("Python");

Iterator<String> it = list.iterator();
while (it.hasNext()) {
    String language = it.next();
    list.add("C++"); // Ãi chÃ ! Thay Ä‘á»•i danh sÃ¡ch khi Ä‘ang duyá»‡t nÃ¨.
    // Ngay láº­p tá»©c: BÃ™M! QuÄƒng lá»—i ConcurrentModificationException
}
```

---

### 2. Fail-Safe Iterator (NgÆ°á»i Ä‘iá»m tÄ©nh)

Loáº¡i nÃ y thÃ¬ "hiá»n" hÆ¡n nhiá»u. NÃ³ khÃ´ng lÃ m viá»‡c trá»±c tiáº¿p trÃªn dá»¯ liá»‡u gá»‘c mÃ  lÃ m viá»‡c trÃªn má»™t **báº£n sao** (copy).

*   **CÆ¡ cháº¿:** Khi báº¡n báº¯t Ä‘áº§u duyá»‡t, nÃ³ táº¡o ra má»™t báº£n sao cá»§a táº­p há»£p. Má»i thay Ä‘á»•i sau Ä‘Ã³ lÃªn táº­p há»£p gá»‘c sáº½ khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n quÃ¡ trÃ¬nh duyá»‡t hiá»‡n táº¡i.
*   **Æ¯u Ä‘iá»ƒm:** KhÃ´ng bao giá» nÃ©m lá»—i `ConcurrentModificationException`.
*   **NhÆ°á»£c Ä‘iá»ƒm:** Báº¡n cÃ³ thá»ƒ khÃ´ng tháº¥y Ä‘Æ°á»£c nhá»¯ng dá»¯ liá»‡u má»›i nháº¥t vá»«a Ä‘Æ°á»£c thÃªm vÃ o. NgoÃ i ra, viá»‡c táº¡o báº£n sao sáº½ tá»‘n bá»™ nhá»› hÆ¡n.
*   **VÃ­ dá»¥:** `CopyOnWriteArrayList`, `ConcurrentHashMap`.

**Thá»­ xem code nhÃ©:**

```java
CopyOnWriteArrayList<String> list = new CopyOnWriteArrayList<>();
list.add("Java");
list.add("Python");

Iterator<String> it = list.iterator();
while (it.hasNext()) {
    String language = it.next();
    list.add("C++"); // KhÃ´ng sao cáº£! NÃ³ Ä‘ang lÃ m viá»‡c trÃªn báº£n sao mÃ .
}
// Káº¿t quáº£: VÃ²ng láº·p cháº¡y mÆ°á»£t mÃ , khÃ´ng cÃ³ lá»—i nÃ o xáº£y ra!
```

---

### Báº£ng so sÃ¡nh nhanh

| Äáº·c Ä‘iá»ƒm | Fail-Fast | Fail-Safe |
| :--- | :--- | :--- |
| **Lá»—i xáº£y ra?** | CÃ³ (`ConcurrentModificationException`) | KhÃ´ng bao giá» |
| **LÃ m viá»‡c trÃªn** | Dá»¯ liá»‡u gá»‘c (Original) | Báº£n sao (Clone/Copy) |
| **Hiá»‡u nÄƒng** | Nhanh, Ã­t tá»‘n bá»™ nhá»› | Cháº­m hÆ¡n, tá»‘n bá»™ nhá»› cho báº£n sao |
| **VÃ­ dá»¥** | `ArrayList`, `HashSet` | `CopyOnWriteArrayList` |

**Lá»i khuyÃªn tá»« chuyÃªn gia:** 
Náº¿u báº¡n Æ°u tiÃªn tá»‘c Ä‘á»™ vÃ  muá»‘n biáº¿t lá»—i ngay khi cÃ³ xung Ä‘á»™t, hÃ£y chá»n **Fail-Fast**. Náº¿u báº¡n lÃ m viá»‡c trong mÃ´i trÆ°á»ng Ä‘a luá»“ng (multi-threading) vÃ  khÃ´ng muá»‘n chÆ°Æ¡ng trÃ¬nh bá»‹ dá»«ng Ä‘á»™t ngá»™t, **Fail-Safe** lÃ  ngÆ°á»i báº¡n Ä‘á»“ng hÃ nh tin cáº­y!](#what-is-the-difference-between-fail-fast-and-fail-safe-iterators) |
| 31 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng mÃ¡y tÃ­nh cá»§a báº¡n giá»‘ng nhÆ° má»™t thÃ nh phá»‘ báº­n rá»™n. Äá»ƒ hiá»ƒu vá» Process (Tiáº¿n trÃ¬nh) vÃ  Thread (Luá»“ng), chÃºng ta hÃ£y cÃ¹ng dáº¡o quanh thÃ nh phá»‘ nÃ y nhÃ©!

### 1. Process (Tiáº¿n trÃ¬nh) lÃ  gÃ¬?

HÃ£y coi má»—i **Process** lÃ  má»™t **TÃ²a nhÃ  vÄƒn phÃ²ng** riÃªng biá»‡t.

*   **KhÃ´ng gian riÃªng:** Má»—i tÃ²a nhÃ  cÃ³ Ä‘á»‹a chá»‰ riÃªng, khu Ä‘áº¥t riÃªng vÃ  tÃ i nguyÃªn riÃªng (Ä‘iá»‡n, nÆ°á»›c, bÃ n gháº¿).
*   **Sá»± Ä‘á»™c láº­p:** Náº¿u má»™t tÃ²a nhÃ  bá»‹ há»a hoáº¡n, cÃ¡c tÃ²a nhÃ  bÃªn cáº¡nh váº«n hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng. Trong mÃ¡y tÃ­nh cÅ©ng váº­y, náº¿u trÃ¬nh duyá»‡t Chrome bá»‹ treo (má»™t Process), á»©ng dá»¥ng Spotify cá»§a báº¡n váº«n hÃ¡t lÃ­u lo.
*   **Giao tiáº¿p khÃ³ khÄƒn:** Muá»‘n gá»­i Ä‘á»“ tá»« tÃ²a nhÃ  nÃ y sang tÃ²a nhÃ  khÃ¡c, báº¡n pháº£i dÃ¹ng dá»‹ch vá»¥ chuyá»ƒn phÃ¡t nhanh (trong mÃ¡y tÃ­nh gá»i lÃ  IPC - Inter-Process Communication). Viá»‡c nÃ y khÃ¡ tá»‘n thá»i gian vÃ  cÃ´ng sá»©c.

### 2. Thread (Luá»“ng) lÃ  gÃ¬?

Náº¿u Process lÃ  tÃ²a nhÃ , thÃ¬ **Thread** chÃ­nh lÃ  nhá»¯ng **NhÃ¢n viÃªn** Ä‘ang lÃ m viá»‡c bÃªn trong tÃ²a nhÃ  Ä‘Ã³.

*   **LÃ m viá»‡c nhÃ³m:** Má»™t tÃ²a nhÃ  cÃ³ thá»ƒ cÃ³ nhiá»u nhÃ¢n viÃªn cÃ¹ng lÃ m viá»‡c Ä‘á»ƒ hoÃ n thÃ nh má»™t dá»± Ã¡n lá»›n. Má»™t Process cÃ³ thá»ƒ cÃ³ nhiá»u Thread cháº¡y cÃ¹ng lÃºc.
*   **DÃ¹ng chung tÃ i nguyÃªn:** CÃ¡c nhÃ¢n viÃªn trong cÃ¹ng má»™t tÃ²a nhÃ  dÃ¹ng chung tá»§ láº¡nh, mÃ¡y pha cÃ  phÃª vÃ  há»“ sÆ¡ tÃ i liá»‡u. CÃ¡c Thread dÃ¹ng chung vÃ¹ng nhá»› cá»§a Process Ä‘Ã³.
*   **Giao tiáº¿p dá»… dÃ ng:** VÃ¬ ngá»“i cÃ¹ng má»™t vÄƒn phÃ²ng, cÃ¡c nhÃ¢n viÃªn chá»‰ cáº§n quay sang nÃ³i chuyá»‡n vá»›i nhau lÃ  xong. CÃ¡c Thread trao Ä‘á»•i dá»¯ liá»‡u cá»±c nhanh vÃ¬ chÃºng á»Ÿ chung má»™t nhÃ .
*   **Rá»§i ro:** Náº¿u má»™t nhÃ¢n viÃªn lÃ m há»ng há»‡ thá»‘ng Ä‘iá»‡n cá»§a tÃ²a nhÃ , táº¥t cáº£ nhá»¯ng ngÆ°á»i khÃ¡c Ä‘á»u pháº£i ngá»«ng lÃ m viá»‡c. Náº¿u má»™t Thread bá»‹ lá»—i nghiÃªm trá»ng, cáº£ Process cÃ³ thá»ƒ bá»‹ "sáº­p" theo.

---

### Báº£ng so sÃ¡nh nhanh

| Äáº·c Ä‘iá»ƒm | Process (Tiáº¿n trÃ¬nh) | Thread (Luá»“ng) |
| :--- | :--- | :--- |
| **Äá»‹nh nghÄ©a** | Má»™t chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y. | Má»™t Ä‘Æ¡n vá»‹ thá»±c thi nhá» nháº¥t bÃªn trong Process. |
| **Bá»™ nhá»›** | CÃ³ vÃ¹ng nhá»› riÃªng biá»‡t. | DÃ¹ng chung bá»™ nhá»› vá»›i cÃ¡c Thread khÃ¡c trong cÃ¹ng Process. |
| **Tá»‘c Ä‘á»™ khá»Ÿi táº¡o** | Cháº­m (vÃ¬ pháº£i xÃ¢y cáº£ "tÃ²a nhÃ "). | Ráº¥t nhanh (chá»‰ lÃ  tuyá»ƒn thÃªm "nhÃ¢n viÃªn"). |
| **Sá»± cÃ´ láº­p** | Ráº¥t an toÃ n, khÃ´ng áº£nh hÆ°á»Ÿng láº«n nhau. | Dá»… gÃ¢y lá»—i dÃ¢y chuyá»n cho nhau. |

---

### VÃ­ dá»¥ trong code Java

Khi báº¡n cháº¡y má»™t chÆ°Æ¡ng trÃ¬nh Java, báº¡n Ä‘ang táº¡o ra má»™t **Process**. BÃªn trong Ä‘Ã³, báº¡n cÃ³ thá»ƒ táº¡o ra nhiá»u **Thread** Ä‘á»ƒ lÃ m cÃ¡c viá»‡c khÃ¡c nhau cÃ¹ng lÃºc.

```java
public class MyLearningApp {
    public static void main(String[] args) {
        // ÄÃ¢y lÃ  Thread chÃ­nh (Main Thread) - NhÃ¢n viÃªn trÆ°á»Ÿng
        
        Thread threadHocCode = new Thread(() -> {
            System.out.println("TÃ´i Ä‘ang há»c Java nÃ¨...");
        });

        Thread threadNgheNhac = new Thread(() -> {
            System.out.println("TÃ´i Ä‘ang nghe nháº¡c Lo-fi Ä‘á»ƒ táº­p trung...");
        });

        // KÃ­ch hoáº¡t cÃ¡c nhÃ¢n viÃªn báº¯t Ä‘áº§u lÃ m viá»‡c!
        threadHocCode.start();
        threadNgheNhac.start();
    }
}
```

**TÃ³m láº¡i:**
*   **Process** = Má»™t chÆ°Æ¡ng trÃ¬nh, má»™t khÃ´ng gian riÃªng, náº·ng ná» nhÆ°ng an toÃ n.
*   **Thread** = Má»™t cÃ´ng viá»‡c nhá» bÃªn trong chÆ°Æ¡ng trÃ¬nh, nháº¹ nhÃ ng vÃ  nhanh nháº¹n nhÆ°ng cáº§n cáº©n tháº­n vÃ¬ dÃ¹ng chung Ä‘á»“ Ä‘áº¡c](#what-is-the-difference-between-process-and-thread) |
| 32 | [Trong Java, cÃ³ hai cÃ¡ch phá»• biáº¿n nháº¥t Ä‘á»ƒ táº¡o ra má»™t luá»“ng (Thread). HÃ£y tÆ°á»Ÿng tÆ°á»£ng Thread giá»‘ng nhÆ° má»™t nhÃ¢n viÃªn trong vÄƒn phÃ²ng, vÃ  báº¡n cáº§n giao viá»‡c cho há» lÃ m.

DÆ°á»›i Ä‘Ã¢y lÃ  hai cÃ¡ch Ä‘á»ƒ báº¡n thá»±c hiá»‡n Ä‘iá»u Ä‘Ã³:

### 1. Káº¿ thá»«a lá»›p `Thread` (Extending the Thread class)

ÄÃ¢y lÃ  cÃ¡ch trá»±c tiáº¿p nháº¥t. Báº¡n táº¡o ra má»™t lá»›p má»›i "lÃ  má»™t" loáº¡i Thread.

*   **BÆ°á»›c 1:** Táº¡o má»™t lá»›p con káº¿ thá»«a tá»« lá»›p `Thread`.
*   **BÆ°á»›c 2:** Ghi Ä‘Ã¨ (override) phÆ°Æ¡ng thá»©c `run()`. ÄÃ¢y chÃ­nh lÃ  nÆ¡i báº¡n viáº¿t mÃ£ lá»‡nh mÃ  báº¡n muá»‘n luá»“ng thá»±c thi.
*   **BÆ°á»›c 3:** Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng tá»« lá»›p Ä‘Ã³ vÃ  gá»i phÆ°Æ¡ng thá»©c `start()`.

```java
class MyWorker extends Thread {
    public void run() {
        System.out.println("TÃ´i Ä‘ang lÃ m viá»‡c trong má»™t luá»“ng riÃªng biá»‡t nÃ¨!");
    }
}

public class Main {
    public static void main(String[] args) {
        MyWorker worker = new MyWorker();
        worker.start(); // Äá»«ng gá»i run() nhÃ©, pháº£i gá»i start() Ä‘á»ƒ kÃ­ch hoáº¡t luá»“ng!
    }
}
```

### 2. Triá»ƒn khai Interface `Runnable` (Implementing the Runnable interface)

ÄÃ¢y lÃ  cÃ¡ch linh hoáº¡t hÆ¡n vÃ  Ä‘Æ°á»£c cÃ¡c láº­p trÃ¬nh viÃªn chuyÃªn nghiá»‡p Æ°a chuá»™ng hÆ¡n. Thay vÃ¬ nÃ³i "Lá»›p nÃ y lÃ  má»™t Thread", báº¡n chá»‰ nÃ³i "Lá»›p nÃ y chá»©a cÃ´ng viá»‡c cáº§n lÃ m".

*   **BÆ°á»›c 1:** Táº¡o má»™t lá»›p triá»ƒn khai interface `Runnable`.
*   **BÆ°á»›c 2:** Viáº¿t ná»™i dung cÃ´ng viá»‡c vÃ o phÆ°Æ¡ng thá»©c `run()`.
*   **BÆ°á»›c 3:** Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng `Thread` má»›i vÃ  Ä‘Æ°a "cÃ´ng viá»‡c" (`Runnable`) Ä‘Ã³ vÃ o bÃªn trong.
*   **BÆ°á»›c 4:** Gá»i `start()`.

```java
class MyJob implements Runnable {
    public void run() {
        System.out.println("TÃ´i Ä‘ang thá»±c hiá»‡n cÃ´ng viá»‡c Ä‘Æ°á»£c giao!");
    }
}

public class Main {
    public static void main(String[] args) {
        MyJob job = new MyJob();
        Thread thread = new Thread(job); // ÄÆ°a cÃ´ng viá»‡c vÃ o "mÃ¡y cháº¡y" Thread
        thread.start();
    }
}
```

### Váº­y nÃªn chá»n cÃ¡ch nÃ o?

Háº§u háº¿t má»i ngÆ°á»i chá»n **CÃ¡ch 2 (Runnable)**. Táº¡i sao Æ°?
1.  **Linh hoáº¡t:** Java khÃ´ng cho phÃ©p Ä‘a káº¿ thá»«a. Náº¿u báº¡n Ä‘Ã£ káº¿ thá»«a lá»›p `Thread`, báº¡n khÃ´ng thá»ƒ káº¿ thá»«a thÃªm lá»›p nÃ o khÃ¡c ná»¯a. Vá»›i `Runnable`, báº¡n váº«n cÃ³ thá»ƒ káº¿ thá»«a má»™t lá»›p khÃ¡c thoáº£i mÃ¡i.
2.  **ChuyÃªn biá»‡t:** NÃ³ tÃ¡ch biá»‡t pháº§n "cÃ´ng viá»‡c" (`Runnable`) ra khá»i pháº§n "cÆ¡ cháº¿ váº­n hÃ nh" (`Thread`). Ráº¥t sáº¡ch sáº½ vÃ  gá»n gÃ ng!](#what-are-the-different-ways-to-create-a-thread-in-java) |
| 33 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang á»Ÿ trong má»™t cÄƒn báº¿p nhá» vá»›i má»™t ngÆ°á»i báº¡n. Cáº£ hai Ä‘á»u muá»‘n lÃ m mÃ³n trá»©ng á»‘p la. NhÆ°ng váº¥n Ä‘á» lÃ : **Cáº£ hai chá»‰ cÃ³ duy nháº¥t má»™t chiáº¿c cháº£o!**

Náº¿u cáº£ hai cÃ¹ng Ä‘á»• trá»©ng vÃ o cháº£o má»™t lÃºc, mÃ³n Äƒn sáº½ há»ng bÃ©t. Äá»ƒ má»i thá»© ngon lÃ nh, báº¡n cáº§n má»™t quy táº¯c: "Ai cáº§m Ä‘Æ°á»£c cháº£o trÆ°á»›c thÃ¬ Ä‘Æ°á»£c náº¥u, ngÆ°á»i kia pháº£i Ä‘á»£i cho Ä‘áº¿n khi cháº£o trá»‘ng."

Trong Java, **Synchronization (Äá»“ng bá»™ hÃ³a)** chÃ­nh lÃ  quy táº¯c Ä‘Ã³!

### Táº¡i sao chÃºng ta cáº§n nÃ³?

Khi báº¡n viáº¿t chÆ°Æ¡ng trÃ¬nh Ä‘a luá»“ng (multi-threading), nhiá»u "luá»“ng" (thread) sáº½ cháº¡y cÃ¹ng má»™t lÃºc. Náº¿u cÃ¡c luá»“ng nÃ y cÃ¹ng nháº£y vÃ o thay Ä‘á»•i má»™t dá»¯ liá»‡u chung (nhÆ° sá»‘ dÆ° tÃ i khoáº£n ngÃ¢n hÃ ng), má»i thá»© sáº½ trá»Ÿ nÃªn há»—n loáº¡n.

HÃ£y xem vÃ­ dá»¥ nÃ y:
1. Luá»“ng A Ä‘á»c sá»‘ dÆ° lÃ  100$.
2. Luá»“ng B cÅ©ng Ä‘á»c sá»‘ dÆ° lÃ  100$.
3. Luá»“ng A cá»™ng thÃªm 50$ (thÃ nh 150$).
4. Luá»“ng B cá»™ng thÃªm 20$ (thÃ nh 120$).
5. Cuá»‘i cÃ¹ng, sá»‘ dÆ° chá»‰ lÃ  120$ thay vÃ¬ 170$. **Máº¥t tiá»n rá»“i!**

### CÃ¡ch Java giáº£i quyáº¿t: Tá»« khÃ³a `synchronized`

Java cung cáº¥p má»™t "chiáº¿c khÃ³a" (lock). Khi má»™t luá»“ng Ä‘i vÃ o má»™t phÆ°Æ¡ng thá»©c Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  `synchronized`, nÃ³ sáº½ cáº§m láº¥y chiáº¿c khÃ³a vÃ  Ä‘Ã³ng cá»­a láº¡i. CÃ¡c luá»“ng khÃ¡c Ä‘áº¿n sau sáº½ pháº£i Ä‘á»©ng ngoÃ i hÃ ng Ä‘á»£i.

#### 1. Äá»“ng bá»™ hÃ³a má»™t phÆ°Æ¡ng thá»©c (Synchronized Method)
ÄÃ¢y lÃ  cÃ¡ch Ä‘Æ¡n giáº£n nháº¥t. Báº¡n chá»‰ cáº§n thÃªm tá»« khÃ³a `synchronized` vÃ o trÆ°á»›c tÃªn hÃ m.

```java
public synchronized void rutTien(int soTien) {
    // Chá»‰ má»™t luá»“ng Ä‘Æ°á»£c phÃ©p á»Ÿ trong nÃ y táº¡i má»™t thá»i Ä‘iá»ƒm
    this.balance -= soTien;
}
```

#### 2. Khá»‘i Ä‘á»“ng bá»™ hÃ³a (Synchronized Block)
ÄÃ´i khi báº¡n khÃ´ng muá»‘n khÃ³a cáº£ má»™t cÄƒn phÃ²ng lá»›n, báº¡n chá»‰ muá»‘n khÃ³a cÃ¡i kÃ©t sáº¯t thÃ´i. Khá»‘i Ä‘á»“ng bá»™ hÃ³a giÃºp báº¡n tiáº¿t kiá»‡m thá»i gian hÆ¡n.

```java
public void updateData() {
    // Äoáº¡n code nÃ y ai cÅ©ng vÃ o Ä‘Æ°á»£c
    System.out.println("Äang chuáº©n bá»‹...");

    synchronized(this) {
        // Chá»‰ Ä‘oáº¡n code quan trá»ng nÃ y má»›i bá»‹ khÃ³a
        this.count++;
    }
}
```

### Nhá»¯ng Ä‘iá»ƒm máº¥u chá»‘t cáº§n nhá»›:

*   **TÃ­nh nguyÃªn tá»­ (Atomicity):** CÃ¡c hÃ nh Ä‘á»™ng trong vÃ¹ng Ä‘á»“ng bá»™ hÃ³a sáº½ diá»…n ra nhÆ° má»™t bÆ°á»›c duy nháº¥t, khÃ´ng bá»‹ ngáº¯t quÃ£ng.
*   **Má»—i Ä‘á»‘i tÆ°á»£ng cÃ³ má»™t chiáº¿c khÃ³a:** Khi luá»“ng giá»¯ khÃ³a cá»§a Ä‘á»‘i tÆ°á»£ng A, nÃ³ váº«n cÃ³ thá»ƒ Ä‘á»ƒ luá»“ng khÃ¡c vÃ o Ä‘á»‘i tÆ°á»£ng B.
*   **Äá»«ng láº¡m dá»¥ng:** Náº¿u báº¡n khÃ³a quÃ¡ nhiá»u, chÆ°Æ¡ng trÃ¬nh sáº½ cháº¡y cháº­m nhÆ° rÃ¹a vÃ¬ cÃ¡c luá»“ng cá»© pháº£i Ä‘á»©ng xáº¿p hÃ ng chá» Ä‘á»£i nhau.

**TÃ³m láº¡i:** Synchronization giÃºp cÃ¡c luá»“ng lÃ m viá»‡c cÃ³ tráº­t tá»±, trÃ¡nh viá»‡c tranh giÃ nh dá»¯ liá»‡u vÃ  giá»¯ cho chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n luÃ´n cháº¡y Ä‘Ãºng Ä‘áº¯n](#what-is-synchronization-in-java) |
| 34 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang á»Ÿ trong má»™t tÃ¬nh huá»‘ng oÃ¡i oÄƒm: Báº¡n Ä‘ang cáº§m chÃ¬a khÃ³a xe nhÆ°ng láº¡i cáº§n Ä‘iá»‡n thoáº¡i Ä‘á»ƒ má»Ÿ báº£n Ä‘á»“. Trong khi Ä‘Ã³, báº¡n cá»§a báº¡n Ä‘ang cáº§m Ä‘iá»‡n thoáº¡i nhÆ°ng láº¡i cáº§n chÃ¬a khÃ³a xe cá»§a báº¡n Ä‘á»ƒ cáº¥t Ä‘á»“. Cáº£ hai cá»© Ä‘á»©ng nhÃ¬n nhau, khÃ´ng ai chá»‹u Ä‘Æ°a Ä‘á»“ mÃ¬nh Ä‘ang cáº§m trÆ°á»›c khi nháº­n Ä‘Æ°á»£c thá»© mÃ¬nh cáº§n. 

Káº¿t quáº£ lÃ ? Cáº£ hai Ä‘á»©ng yÃªn mÃ£i mÃ£i. ÄÃ³ chÃ­nh lÃ  **Deadlock** (Báº¿ táº¯c)!

### Deadlock lÃ  gÃ¬?

Trong láº­p trÃ¬nh Ä‘a luá»“ng (multi-threading), Deadlock xáº£y ra khi hai hoáº·c nhiá»u luá»“ng (threads) bá»‹ treo vÄ©nh viá»…n vÃ¬ má»—i luá»“ng Ä‘á»u Ä‘ang Ä‘á»£i luá»“ng kia giáº£i phÃ³ng "á»• khÃ³a" (lock) mÃ  nÃ³ cáº§n.

NÃ³ giá»‘ng nhÆ° má»™t vÃ²ng láº·p chá» Ä‘á»£i khÃ´ng bao giá» káº¿t thÃºc:
1. **Luá»“ng A** giá»¯ **KhÃ³a 1** vÃ  muá»‘n cÃ³ **KhÃ³a 2**.
2. **Luá»“ng B** giá»¯ **KhÃ³a 2** vÃ  muá»‘n cÃ³ **KhÃ³a 1**.
3. KhÃ´ng ai chá»‹u buÃ´ng tay, vÃ  chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n "Ä‘á»©ng hÃ¬nh"!

### VÃ­ dá»¥ báº±ng code (Äá»«ng thá»­ táº¡i nhÃ !)

```java
public class DeadlockDemo {
    public static Object Lock1 = new Object();
    public static Object Lock2 = new Object();

    public static void main(String[] args) {
        Thread threadA = new Thread(() -> {
            synchronized (Lock1) {
                System.out.println("Thread A: Äang giá»¯ Lock 1...");
                try { Thread.sleep(100); } catch (Exception e) {}
                System.out.println("Thread A: Äang Ä‘á»£i Lock 2...");
                synchronized (Lock2) {
                    System.out.println("Thread A: ÄÃ£ láº¥y Ä‘Æ°á»£c cáº£ hai!");
                }
            }
        });

        Thread threadB = new Thread(() -> {
            synchronized (Lock2) {
                System.out.println("Thread B: Äang giá»¯ Lock 2...");
                try { Thread.sleep(100); } catch (Exception e) {}
                System.out.println("Thread B: Äang Ä‘á»£i Lock 1...");
                synchronized (Lock1) {
                    System.out.println("Thread B: ÄÃ£ láº¥y Ä‘Æ°á»£c cáº£ hai!");
                }
            }
        });

        threadA.start();
        threadB.start();
    }
}
```

### LÃ m sao Ä‘á»ƒ trÃ¡nh Deadlock?

Äá»«ng quÃ¡ lo láº¯ng! ChÃºng ta cÃ³ nhá»¯ng "máº¹o" cá»±c hay Ä‘á»ƒ giá»¯ cho cÃ¡c luá»“ng luÃ´n vui váº» vÃ  cháº¡y mÆ°á»£t mÃ :

*   **Sáº¯p xáº¿p thá»© tá»± Æ°u tiÃªn (Lock Ordering):** ÄÃ¢y lÃ  cÃ¡ch Ä‘Æ¡n giáº£n nháº¥t. HÃ£y quy Ä‘á»‹nh ráº±ng táº¥t cáº£ cÃ¡c luá»“ng pháº£i láº¥y khÃ³a theo má»™t thá»© tá»± nháº¥t Ä‘á»‹nh. VÃ­ dá»¥: LuÃ´n láº¥y `Lock 1` trÆ°á»›c rá»“i má»›i Ä‘áº¿n `Lock 2`. Náº¿u cáº£ Thread A vÃ  Thread B Ä‘á»u lÃ m váº­y, sáº½ khÃ´ng cÃ³ ai pháº£i tranh giÃ nh theo vÃ²ng trÃ²n ná»¯a.
*   **Sá»­ dá»¥ng thá»i gian chá» (Lock Timeout):** Thay vÃ¬ Ä‘á»£i mÃ£i mÃ£i, hÃ£y sá»­ dá»¥ng `tryLock()` vá»›i má»™t khoáº£ng thá»i gian chá» (timeout). Náº¿u sau 5 giÃ¢y mÃ  khÃ´ng láº¥y Ä‘Æ°á»£c khÃ³a, luá»“ng sáº½ tá»« bá» vÃ  thá»­ láº¡i sau. Viá»‡c nÃ y giÃºp giáº£i phÃ³ng cÃ¡c khÃ³a hiá»‡n cÃ³ Ä‘á»ƒ luá»“ng khÃ¡c cÃ³ cÆ¡ há»™i lÃ m viá»‡c.
*   **Háº¡n cháº¿ dÃ¹ng quÃ¡ nhiá»u khÃ³a:** CÃ ng nhiá»u khÃ³a, rá»§i ro cÃ ng cao. HÃ£y cá»‘ gáº¯ng thiáº¿t káº¿ sao cho má»™t luá»“ng khÃ´ng cáº§n pháº£i náº¯m giá»¯ quÃ¡ nhiá»u tÃ i nguyÃªn cÃ¹ng má»™t lÃºc.
*   **PhÃ¢n tÃ­ch báº±ng cÃ´ng cá»¥:** CÃ¡c IDE hiá»‡n Ä‘áº¡i vÃ  cÃ´ng cá»¥ nhÆ° `jstack` cÃ³ thá»ƒ giÃºp báº¡n phÃ¡t hiá»‡n ra luá»“ng nÃ o Ä‘ang bá»‹ "káº¹t" á»Ÿ Ä‘Ã¢u.

**Quy táº¯c vÃ ng:** Äá»«ng Ä‘á»ƒ cÃ¡c luá»“ng cá»§a báº¡n rÆ¡i vÃ o tÃ¬nh tráº¡ng "chá» Ä‘á»£i vÃ²ng trÃ²n". HÃ£y luÃ´n cÃ³ má»™t káº¿ hoáº¡ch láº¥y khÃ³a rÃµ rÃ ng!](#what-is-deadlock-and-how-to-avoid-it) |
| 35 | [### Tá»« khÃ³a `volatile` trong Java lÃ  gÃ¬ nhá»‰?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang Ä‘iá»u hÃ nh má»™t Ä‘á»™i quÃ¢n gá»“m nhiá»u **Thread** (luá»“ng) cÃ¹ng lÃ m viá»‡c trong má»™t chiáº¿c mÃ¡y tÃ­nh. Má»—i Thread giá»‘ng nhÆ° má»™t cÃ´ng nhÃ¢n báº­n rá»™n. Äá»ƒ lÃ m viá»‡c nhanh hÆ¡n, má»—i cÃ´ng nhÃ¢n thÆ°á»ng copy dá»¯ liá»‡u tá»« "kho tá»•ng" (Bá»™ nhá»› chÃ­nh - Main Memory) vá» "ngÄƒn bÃ n lÃ m viá»‡c" riÃªng cá»§a mÃ¬nh (CPU Cache).

Váº¥n Ä‘á» báº¯t Ä‘áº§u tá»« Ä‘Ã¢y! Náº¿u má»™t cÃ´ng nhÃ¢n thay Ä‘á»•i dá»¯ liá»‡u táº¡i ngÄƒn bÃ n cá»§a há», nhÆ°ng chÆ°a ká»‹p mang tráº£ láº¡i kho tá»•ng, thÃ¬ cÃ¡c cÃ´ng nhÃ¢n khÃ¡c váº«n sáº½ nhÃ¬n tháº¥y dá»¯ liá»‡u cÅ© ká»¹. Äiá»u nÃ y gÃ¢y ra sá»± há»—n loáº¡n!

ÄÃ³ lÃ  lÃºc tá»« khÃ³a `volatile` xuáº¥t hiá»‡n Ä‘á»ƒ giáº£i cá»©u.

---

### CÃ¡ch `volatile` hoáº¡t Ä‘á»™ng

Khi báº¡n Ä‘Ã¡nh dáº¥u má»™t biáº¿n lÃ  `volatile`, báº¡n Ä‘ang ra lá»‡nh cho Java ráº±ng: *"NÃ y, Ä‘á»«ng cÃ³ cáº¥t biáº¿n nÃ y vÃ o ngÄƒn bÃ n riÃªng (Cache). Má»i ngÆ°á»i pháº£i Ä‘á»c vÃ  viáº¿t nÃ³ trá»±c tiáº¿p táº¡i kho tá»•ng (Main Memory)!"*

1.  **TÃ­nh hiá»ƒn thá»‹ (Visibility):** Náº¿u Thread A thay Ä‘á»•i má»™t biáº¿n `volatile`, Thread B sáº½ nhÃ¬n tháº¥y thay Ä‘á»•i Ä‘Ã³ ngay láº­p tá»©c. KhÃ´ng cÃ³ chuyá»‡n dÃ¹ng dá»¯ liá»‡u cÅ©!
2.  **KhÃ´ng lÆ°u bá»™ nhá»› Ä‘á»‡m (No Caching):** Biáº¿n Ä‘Ã³ sáº½ khÃ´ng bao giá» bá»‹ "nhá»‘t" trong cache riÃªng cá»§a CPU.

---

### Thá»­ xem vÃ­ dá»¥ nÃ y nhÃ©!

Giáº£ sá»­ chÃºng ta cÃ³ má»™t trÃ² chÆ¡i Ä‘Æ¡n giáº£n:

```java
class Game extends Thread {
    // Náº¿u khÃ´ng cÃ³ volatile, Thread nÃ y cÃ³ thá»ƒ cháº¡y mÃ£i mÃ£i 
    // vÃ¬ nÃ³ khÃ´ng biáº¿t flag Ä‘Ã£ bá»‹ Ä‘á»•i thÃ nh true!
    private volatile boolean stopRequest = false;

    public void run() {
        while (!stopRequest) {
            // Äang chÆ¡i game...
        }
        System.out.println("Game dá»«ng láº¡i rá»“i!");
    }

    public void stopGame() {
        stopRequest = true;
    }
}
```

**Chuyá»‡n gÃ¬ xáº£y ra náº¿u KHÃ”NG cÃ³ `volatile`?**
*   Thread cháº¡y game cá»© nhÃ¬n vÃ o "ngÄƒn bÃ n" cá»§a nÃ³ vÃ  tháº¥y `stopRequest` váº«n lÃ  `false`.
*   Trong khi Ä‘Ã³, Thread chÃ­nh (Main Thread) Ä‘Ã£ gá»i `stopGame()` vÃ  Ä‘á»•i giÃ¡ trá»‹ á»Ÿ "kho tá»•ng" thÃ nh `true`.
*   Káº¿t quáº£: Game khÃ´ng bao giá» dá»«ng!

**Khi CÃ“ `volatile`:**
*   Ngay khi `stopRequest` thÃ nh `true`, Thread cháº¡y game sáº½ tháº¥y ngay láº­p tá»©c vÃ¬ nÃ³ luÃ´n nhÃ¬n vÃ o "kho tá»•ng". Game dá»«ng láº¡i an toÃ n!

---

### LÆ°u Ã½ quan trá»ng: `volatile` khÃ´ng pháº£i lÃ  "váº¡n nÄƒng"

Äá»«ng nháº§m láº«n `volatile` vá»›i `synchronized`. 

*   `volatile` chá»‰ Ä‘áº£m báº£o má»i ngÆ°á»i **nhÃ¬n tháº¥y** Ä‘Ãºng giÃ¡ trá»‹.
*   `volatile` **KHÃ”NG** giÃºp Ã­ch gÃ¬ náº¿u báº¡n lÃ m nhá»¯ng viá»‡c phá»©c táº¡p nhÆ° `count++` (vÃ¬ `count++` thá»±c cháº¥t lÃ  3 bÆ°á»›c: Ä‘á»c, tÄƒng, ghi). Náº¿u nhiá»u Thread cÃ¹ng `count++`, báº¡n váº«n sáº½ máº¥t dá»¯ liá»‡u nhÆ° thÆ°á»ng.

**Quy táº¯c bá» tÃºi:**
*   DÃ¹ng `volatile` khi báº¡n chá»‰ cáº§n **Ä‘á»c/ghi** má»™t giÃ¡ trá»‹ Ä‘Æ¡n giáº£n giá»¯a cÃ¡c Thread.
*   DÃ¹ng `synchronized` hoáº·c `AtomicInteger` náº¿u báº¡n cáº§n thá»±c hiá»‡n cÃ¡c phÃ©p toÃ¡n phá»©c táº¡p hÆ¡n.](#what-is-the-volatile-keyword-in-java) |
| 36 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang Ä‘Ã³ng gÃ³i má»™t chiáº¿c vali (Ä‘Ã¢y chÃ­nh lÃ  quÃ¡ trÃ¬nh **Serialization** - chuyá»ƒn Ä‘á»‘i tÆ°á»£ng thÃ nh má»™t chuá»—i byte Ä‘á»ƒ lÆ°u trá»¯ hoáº·c gá»­i Ä‘i qua máº¡ng).

ThÃ´ng thÆ°á»ng, khi báº¡n Ä‘Ã³ng gÃ³i, Java sáº½ bÃª nguyÃªn xi má»i thá»© trong Ä‘á»‘i tÆ°á»£ng bá» vÃ o vali. NhÆ°ng Ä‘Ã´i khi, cÃ³ nhá»¯ng thá»© báº¡n **khÃ´ng muá»‘n** hoáº·c **khÃ´ng thá»ƒ** mang theo. ÄÃ³ chÃ­nh lÃ  lÃºc tá»« khÃ³a `transient` xuáº¥t hiá»‡n!

### 1. `transient` lÃ  gÃ¬?

Trong Java, `transient` lÃ  má»™t tá»« khÃ³a dÃ¹ng cho cÃ¡c biáº¿n (instance variables). Khi báº¡n Ä‘Ã¡nh dáº¥u má»™t biáº¿n lÃ  `transient`, báº¡n Ä‘ang nÃ³i vá»›i Java ráº±ng: *"NÃ y, khi nÃ o lÆ°u trá»¯ Ä‘á»‘i tÆ°á»£ng nÃ y, hÃ£y lá» biáº¿n nÃ y Ä‘i nhÃ©! Äá»«ng cho nÃ³ vÃ o vali."*

### 2. Táº¡i sao chÃºng ta cáº§n nÃ³?

CÃ³ hai lÃ½ do chÃ­nh khiáº¿n báº¡n muá»‘n dÃ¹ng `transient`:

*   **Báº£o máº­t:** Báº¡n cÃ³ muá»‘n lÆ°u máº­t kháº©u ngÆ°á»i dÃ¹ng vÃ o má»™t file vÄƒn báº£n bÃ¬nh thÆ°á»ng khÃ´ng? Cháº¯c cháº¯n lÃ  khÃ´ng! HÃ£y Ä‘Ã¡nh dáº¥u nÃ³ lÃ  `transient`.
*   **Dá»¯ liá»‡u táº¡m thá»i hoáº·c khÃ´ng cáº§n thiáº¿t:** VÃ­ dá»¥ nhÆ° má»™t bá»™ Ä‘áº¿m thá»i gian (timer) hoáº·c má»™t biáº¿n Ä‘Æ°á»£c tÃ­nh toÃ¡n dá»±a trÃªn cÃ¡c biáº¿n khÃ¡c. LÆ°u chÃºng láº¡i chá»‰ lÃ m náº·ng vali mÃ  thÃ´i.

### 3. HÃ£y xem nÃ³ hoáº¡t Ä‘á»™ng tháº¿ nÃ o!

Giáº£ sá»­ chÃºng ta cÃ³ má»™t lá»›p `UserAccount`:

```java
import java.io.Serializable;

public class UserAccount implements Serializable {
    private String username;
    
    // ChÃºng ta khÃ´ng muá»‘n lÆ°u máº­t kháº©u vÃ o file!
    private transient String password; 

    public UserAccount(String name, String pwd) {
        this.username = name;
        this.password = pwd;
    }

    public String toString() {
        return "User: " + username + " | Password: " + password;
    }
}
```

**Chuyá»‡n gÃ¬ sáº½ xáº£y ra khi báº¡n lÆ°u vÃ  má»Ÿ láº¡i Ä‘á»‘i tÆ°á»£ng nÃ y?**

1.  **TrÆ°á»›c khi lÆ°u:** `username` lÃ  "admin", `password` lÃ  "12345".
2.  **Sau khi "má»Ÿ vali" (Deserialization):** 
    *   `username` váº«n lÃ  "admin" (tuyá»‡t vá»i!).
    *   `password` bÃ¢y giá» lÃ  **null**! 

**Táº¡i sao láº¡i lÃ  null?** VÃ¬ Java Ä‘Ã£ lá» nÃ³ Ä‘i khi Ä‘Ã³ng gÃ³i. Khi má»Ÿ ra, Java táº¡o láº¡i biáº¿n Ä‘Ã³ nhÆ°ng gÃ¡n cho nÃ³ giÃ¡ trá»‹ máº·c Ä‘á»‹nh (null cho Ä‘á»‘i tÆ°á»£ng, 0 cho sá»‘).

### 4. Nhá»¯ng lÆ°u Ã½ nhá» báº¡n cáº§n nhá»›:

*   `transient` chá»‰ Ä‘i vá»›i **biáº¿n**, khÃ´ng dÃ¹ng cho phÆ°Æ¡ng thá»©c hay lá»›p.
*   Biáº¿n `static` máº·c Ä‘á»‹nh lÃ  "transient" (theo má»™t cÃ¡ch hiá»ƒu nÃ o Ä‘Ã³), vÃ¬ chÃºng thuá»™c vá» lá»›p chá»© khÃ´ng pháº£i Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ. Java sáº½ khÃ´ng lÆ°u biáº¿n `static` khi serialize Ä‘á»‘i tÆ°á»£ng.
*   Biáº¿n `final` váº«n cÃ³ thá»ƒ dÃ¹ng `transient`, nhÆ°ng hÃ£y cáº©n tháº­n vÃ¬ nÃ³ cÃ³ thá»ƒ gÃ¢y bá»‘i rá»‘i khi báº¡n khá»Ÿi táº¡o láº¡i Ä‘á»‘i tÆ°á»£ng.

**TÃ³m láº¡i:** HÃ£y dÃ¹ng `transient` khi báº¡n muá»‘n nÃ³i: *"CÃ¡i nÃ y chá»‰ lÃ  táº¡m thá»i thÃ´i, Ä‘á»«ng lÆ°u nÃ³ láº¡i!"*](#what-is-the-transient-keyword-in-java) |
| 37 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang chÆ¡i má»™t trÃ² chÆ¡i Ä‘iá»‡n tá»­ cá»±c ká»³ hay vÃ  báº¡n muá»‘n "lÆ°u" (save) tráº¡ng thÃ¡i hiá»‡n táº¡i Ä‘á»ƒ mai chÆ¡i tiáº¿p. Trong láº­p trÃ¬nh Java, chÃºng ta cÅ©ng cÃ³ nhu cáº§u tÆ°Æ¡ng tá»± vá»›i cÃ¡c **Ä‘á»‘i tÆ°á»£ng** (objects).

ÄÃ³ chÃ­nh lÃ  lÃºc **Serialization** vÃ  **Deserialization** xuáº¥t hiá»‡n!

### 1. Serialization lÃ  gÃ¬? (ÄÃ³ng gÃ³i Ä‘á»“ Ä‘áº¡c)

HÃ£y nghÄ© vá» má»™t Ä‘á»‘i tÆ°á»£ng Java nhÆ° má»™t ngÃ´i nhÃ  Ä‘áº§y Ä‘á»§ ná»™i tháº¥t. Báº¡n muá»‘n gá»­i ngÃ´i nhÃ  nÃ y qua bÆ°u Ä‘iá»‡n cho má»™t ngÆ°á»i báº¡n á»Ÿ xa. Báº¡n khÃ´ng thá»ƒ bÃª nguyÃªn cáº£ ngÃ´i nhÃ  Ä‘i Ä‘Æ°á»£c, Ä‘Ãºng khÃ´ng?

**Serialization** lÃ  quÃ¡ trÃ¬nh "thÃ¡o dá»¡" ngÃ´i nhÃ  Ä‘Ã³ vÃ  ghi láº¡i chÃ­nh xÃ¡c vá»‹ trÃ­ cá»§a tá»«ng viÃªn gáº¡ch, tá»«ng mÃ³n Ä‘á»“ vÃ o má»™t danh sÃ¡ch (chuá»—i byte). 

*   **Nhiá»‡m vá»¥:** Biáº¿n má»™t Ä‘á»‘i tÆ°á»£ng Ä‘ang cháº¡y trong bá»™ nhá»› thÃ nh má»™t chuá»—i cÃ¡c sá»‘ 0 vÃ  1 (byte stream).
*   **Má»¥c Ä‘Ã­ch:** Äá»ƒ báº¡n cÃ³ thá»ƒ lÆ°u nÃ³ vÃ o má»™t tá»‡p tin (.ser) hoáº·c gá»­i nÃ³ qua máº¡ng Internet.

```java
// Giáº£ sá»­ báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng 'nguoiChoi'
// Serialization sáº½ biáº¿n nÃ³ thÃ nh má»™t file "game_save.ser"
FileOutputStream fileOut = new FileOutputStream("game_save.ser");
ObjectOutputStream out = new ObjectOutputStream(fileOut);
out.writeObject(nguoiChoi); // ÄÃ¢y chÃ­nh lÃ  phÃ©p thuáº­t Serialization!
```

### 2. Deserialization lÃ  gÃ¬? (Láº¯p rÃ¡p láº¡i tá»« Ä‘áº§u)

BÃ¢y giá», ngÆ°á»i báº¡n cá»§a báº¡n nháº­n Ä‘Æ°á»£c kiá»‡n hÃ ng chá»©a cÃ¡c máº£nh ghÃ©p vÃ  báº£n hÆ°á»›ng dáº«n. Há» cáº§n xÃ¢y dá»±ng láº¡i Ä‘Ãºng ngÃ´i nhÃ  y há»‡t nhÆ° cÅ©.

**Deserialization** lÃ  quÃ¡ trÃ¬nh ngÆ°á»£c láº¡i. NÃ³ Ä‘á»c chuá»—i cÃ¡c sá»‘ 0 vÃ  1 tá»« tá»‡p tin vÃ  "há»“i sinh" chÃºng thÃ nh má»™t Ä‘á»‘i tÆ°á»£ng sá»‘ng Ä‘á»™ng trong bá»™ nhá»› Java.

*   **Nhiá»‡m vá»¥:** Biáº¿n chuá»—i byte trá»Ÿ láº¡i thÃ nh má»™t Ä‘á»‘i tÆ°á»£ng Java thá»±c thá»¥.
*   **Káº¿t quáº£:** Báº¡n cÃ³ láº¡i Ä‘á»‘i tÆ°á»£ng vá»›i Ä‘áº§y Ä‘á»§ cÃ¡c dá»¯ liá»‡u (biáº¿n instance) y nhÆ° lÃºc báº¡n lÆ°u nÃ³.

```java
// Äá»c file "game_save.ser" vÃ  biáº¿n nÃ³ láº¡i thÃ nh Ä‘á»‘i tÆ°á»£ng
FileInputStream fileIn = new FileInputStream("game_save.ser");
ObjectInputStream in = new ObjectInputStream(fileIn);
NguoiChoi nguoiChoiHoiSinh = (NguoiChoi) in.readObject(); // PhÃ©p thuáº­t Deserialization!
```

### TÃ³m láº¡i, quy trÃ¬nh nÃ y giá»‘ng nhÆ°:

1.  **Serialization:** Chá»¥p áº£nh Ä‘á»‘i tÆ°á»£ng -> Biáº¿n thÃ nh file (Cáº¥t vÃ o tá»§).
2.  **Deserialization:** Láº¥y file ra -> Biáº¿n láº¡i thÃ nh Ä‘á»‘i tÆ°á»£ng (Mang ra dÃ¹ng).

**LÆ°u Ã½ quan trá»ng:** Äá»ƒ má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ "Ä‘i du lá»‹ch" qua Serialization, lá»›p (class) cá»§a nÃ³ pháº£i thá»±c thi (implement) interface `Serializable`. ÄÃ¢y giá»‘ng nhÆ° má»™t chiáº¿c tháº» thÃ´ng hÃ nh cho phÃ©p Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c phÃ©p Ä‘Ã³ng gÃ³i váº­y!](#what-is-serialization-and-deserialization) |
| 38 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t chiáº¿c há»™p Ä‘áº·c biá»‡t. Chiáº¿c há»™p nÃ y chá»‰ cÃ³ duy nháº¥t **má»™t** khe cáº¯m Ä‘á»ƒ thá»±c hiá»‡n má»™t hÃ nh Ä‘á»™ng nÃ o Ä‘Ã³. Trong Java, chÃºng ta gá»i Ä‘Ã³ lÃ  **Functional Interface**.

Vá» cÆ¡ báº£n, Functional Interface lÃ  má»™t Interface chá»‰ sá»Ÿ há»¯u Ä‘Ãºng **má»™t phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng (abstract method)**. Chá»‰ má»™t mÃ  thÃ´i!

### Táº¡i sao chÃºng ta láº¡i cáº§n nÃ³?

HÃ£y nghÄ© theo cÃ¡ch nÃ y: Náº¿u báº¡n chá»‰ cÃ³ má»™t viá»‡c duy nháº¥t Ä‘á»ƒ lÃ m, Java sáº½ giÃºp báº¡n viáº¿t mÃ£ cá»±c ká»³ gá»n nháº¹ báº±ng cÃ¡ch sá»­ dá»¥ng **Lambda Expressions**. NÃ³ giá»‘ng nhÆ° viá»‡c thay vÃ¬ pháº£i viáº¿t cáº£ má»™t báº£n hÆ°á»›ng dáº«n dÃ i dÃ²ng, báº¡n chá»‰ cáº§n Ä‘Æ°a ra má»™t dÃ²ng lá»‡nh thá»±c thi ngay láº­p tá»©c.

### HÃ¬nh dÃ¡ng cá»§a nÃ³ ra sao?

ÄÃ¢y lÃ  cÃ¡ch báº¡n táº¡o ra má»™t Functional Interface:

```java
@FunctionalInterface
public interface SimpleGreeting {
    void sayHello(String name);
}
```

**CÃ³ gÃ¬ Ä‘áº·c biá»‡t á»Ÿ Ä‘Ã¢y?**

1.  **@FunctionalInterface**: ÄÃ¢y lÃ  má»™t "nhÃ£n dÃ¡n" thÃ´ng minh. NÃ³ bÃ¡o vá»›i Java ráº±ng: "NÃ y, interface nÃ y chá»‰ Ä‘Æ°á»£c phÃ©p cÃ³ má»™t phÆ°Æ¡ng thá»©c thÃ´i nhÃ©!". Náº¿u báº¡n lá»¡ tay thÃªm phÆ°Æ¡ng thá»©c thá»© hai, Java sáº½ bÃ¡o lá»—i ngay láº­p tá»©c.
2.  **Chá»‰ má»™t phÆ°Æ¡ng thá»©c**: NhÆ° báº¡n tháº¥y, chÃºng ta chá»‰ cÃ³ `sayHello`. KhÃ´ng hÆ¡n, khÃ´ng kÃ©m.

### CÃ¡ch sá»­ dá»¥ng "kiá»ƒu cÅ©" vs "kiá»ƒu má»›i"

TrÆ°á»›c Ä‘Ã¢y, khi chÆ°a cÃ³ Functional Interface vÃ  Lambda, báº¡n pháº£i viáº¿t ráº¥t rÆ°á»m rÃ :

```java
// Kiá»ƒu cÅ©: Cá»“ng ká»nh quÃ¡!
SimpleGreeting greeting = new SimpleGreeting() {
    @Override
    public void sayHello(String name) {
        System.out.println("ChÃ o " + name);
    }
};
```

CÃ²n bÃ¢y giá», vá»›i sá»©c máº¡nh cá»§a Functional Interface, má»i thá»© tháº­t nháº¹ nhÃ ng:

```java
// Kiá»ƒu má»›i: Gá»n gÃ ng vÃ  sÃ nh Ä‘iá»‡u!
SimpleGreeting greeting = (name) -> System.out.println("ChÃ o " + name);

greeting.sayHello("Java Beginner");
```

### Nhá»¯ng "siÃªu anh hÃ¹ng" cÃ³ sáºµn trong Java

Java biáº¿t báº¡n sáº½ cáº§n dÃ¹ng ráº¥t nhiá»u, nÃªn há» Ä‘Ã£ chuáº©n bá»‹ sáºµn má»™t bá»™ "Ä‘á»“ nghá»" trong gÃ³i `java.util.function`. DÆ°á»›i Ä‘Ã¢y lÃ  4 gÆ°Æ¡ng máº·t thÃ¢n quen nháº¥t:

*   **Predicate<T>**: Giá»‘ng nhÆ° má»™t cÃ¡i mÃ¡y kiá»ƒm tra. Báº¡n Ä‘Æ°a nÃ³ má»™t thá»©, nÃ³ tráº£ lá»i **ÄÃºng (True)** hoáº·c **Sai (False)**.
*   **Consumer<T>**: Giá»‘ng nhÆ° má»™t ngÆ°á»i tiÃªu thá»¥. NÃ³ nháº­n Ä‘á»“ báº¡n Ä‘Æ°a, lÃ m gÃ¬ Ä‘Ã³ vá»›i nÃ³ (nhÆ° in ra mÃ n hÃ¬nh) vÃ  **khÃ´ng tráº£ láº¡i gÃ¬ cáº£**.
*   **Supplier<T>**: Giá»‘ng nhÆ° má»™t kho chá»©a. NÃ³ khÃ´ng nháº­n gÃ¬ vÃ o, nhÆ°ng cá»© gá»i lÃ  nÃ³ sáº½ **cung cáº¥p** cho báº¡n má»™t thá»© gÃ¬ Ä‘Ã³.
*   **Function<T, R>**: Giá»‘ng nhÆ° má»™t mÃ¡y biáº¿n hÃ¬nh. Báº¡n Ä‘Æ°a cho nÃ³ má»™t váº­t liá»‡u (T), nÃ³ sáº½ biáº¿n Ä‘á»•i vÃ  tráº£ vá» má»™t káº¿t quáº£ má»›i (R).

### TÃ³m láº¡i lÃ ...

*   Functional Interface lÃ  interface **chá»‰ cÃ³ 1 phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng**.
*   NÃ³ lÃ  "táº¥m vÃ©" Ä‘á»ƒ báº¡n sá»­ dá»¥ng **Lambda Expressions**.
*   Sá»­ dá»¥ng nÃ³ giÃºp mÃ£ nguá»“n cá»§a báº¡n sáº¡ch sáº½, dá»… Ä‘á»c vÃ  hiá»‡n Ä‘áº¡i hÆ¡n ráº¥t nhiá»u!](#what-are-functional-interfaces-in-java) |
| 39 | [ChÃ o báº¡n! Báº¡n Ä‘Ã£ bao giá» cáº£m tháº¥y má»‡t má»i khi pháº£i viáº¿t cáº£ má»™t Ä‘á»‘ng mÃ£ nguá»“n dÃ i ngoáº±ng chá»‰ Ä‘á»ƒ thá»±c hiá»‡n má»™t cÃ´ng viá»‡c bÃ© xÃ­u chÆ°a? HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n muá»‘n báº£o Java: "NÃ y, khi nÃ o nÃºt nÃ y Ä‘Æ°á»£c báº¥m, hÃ£y in dÃ²ng chá»¯ 'Hello' ra nhÃ©."

TrÆ°á»›c Ä‘Ã¢y, báº¡n sáº½ pháº£i táº¡o ra má»™t "Class áº©n danh" (Anonymous Class) ráº¥t cá»“ng ká»nh. NhÆ°ng tá»« Java 8, chÃºng ta Ä‘Ã£ cÃ³ má»™t "phÃ©p mÃ u" gá»i lÃ  **Lambda Expressions**.

### Lambda lÃ  gÃ¬ váº­y?

NÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n nháº¥t: **Lambda lÃ  má»™t hÃ m khÃ´ng cÃ³ tÃªn.**

Thay vÃ¬ pháº£i khai bÃ¡o tÃªn phÆ°Æ¡ng thá»©c, kiá»ƒu tráº£ vá», hay tá»« khÃ³a `public`, báº¡n chá»‰ táº­p trung vÃ o Ä‘Ãºng hai thá»©: **Dá»¯ liá»‡u vÃ o** vÃ  **Viá»‡c cáº§n lÃ m**.

### Cáº¥u trÃºc cá»§a má»™t Lambda

HÃ£y nhÃ¬n vÃ o "cÃ´ng thá»©c" cá»±c ká»³ Ä‘Æ¡n giáº£n nÃ y:

```text
(tham_sá»‘) -> { thÃ¢n_hÃ m }
```

NÃ³ giá»‘ng nhÆ° má»™t mÅ©i tÃªn chá»‰ Ä‘Æ°á»ng: "Vá»›i Ä‘á»‘ng dá»¯ liá»‡u nÃ y `( )`, hÃ£y thá»±c hiá»‡n viá»‡c nÃ y `->`."

### HÃ£y so sÃ¡nh nhÃ©!

Giáº£ sá»­ báº¡n muá»‘n in má»™t lá»i chÃ o.

**CÃ¡ch cÅ© (DÃ i dÃ²ng):**
```java
// Báº¡n pháº£i táº¡o cáº£ má»™t Ä‘á»‘i tÆ°á»£ng, rá»“i Ä‘á»‹nh nghÄ©a phÆ°Æ¡ng thá»©c... má»‡t quÃ¡!
Runnable r = new Runnable() {
    @Override
    public void run() {
        System.out.println("ChÃ o tháº¿ giá»›i!");
    }
};
```

**CÃ¡ch dÃ¹ng Lambda (Gá»n nháº¹):**
```java
// NhÃ¬n nÃ y! Chá»‰ má»™t dÃ²ng duy nháº¥t.
Runnable r = () -> System.out.println("ChÃ o tháº¿ giá»›i!");
```

### Táº¡i sao chÃºng ta láº¡i yÃªu Lambda?

1.  **Code cá»±c ngáº¯n:** Báº¡n khÃ´ng cÃ²n pháº£i viáº¿t nhá»¯ng Ä‘oáº¡n mÃ£ "thá»«a thÃ£i".
2.  **Dá»… Ä‘á»c:** Báº¡n nhÃ¬n vÃ o lÃ  biáº¿t ngay Ä‘oáº¡n code Ä‘Ã³ lÃ m gÃ¬, khÃ´ng bá»‹ rá»‘i máº¯t bá»Ÿi cÃ¡c dáº¥u ngoáº·c nhá»n lá»“ng nhau.
3.  **Linh hoáº¡t:** Báº¡n cÃ³ thá»ƒ truyá»n tháº³ng má»™t "hÃ nh Ä‘á»™ng" vÃ o trong má»™t phÆ°Æ¡ng thá»©c khÃ¡c nhÆ° thá»ƒ nÃ³ lÃ  má»™t biáº¿n sá»‘ váº­y.

### Khi nÃ o thÃ¬ dÃ¹ng Ä‘Æ°á»£c Lambda?

Lambda khÃ´ng pháº£i lÃ  "váº¡n nÄƒng". Báº¡n chá»‰ cÃ³ thá»ƒ dÃ¹ng nÃ³ vá»›i **Functional Interface**. ÄÃ³ lÃ  nhá»¯ng Interface "cÃ´ Ä‘Æ¡n" chá»‰ cÃ³ duy nháº¥t **má»™t phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng**.

VÃ­ dá»¥ nhÆ°:
*   `ActionListener` (chá»‰ cÃ³ `actionPerformed`)
*   `Runnable` (chá»‰ cÃ³ `run`)
*   `Comparator` (chá»‰ cÃ³ `compare`)

### Má»™t vÃ i vÃ­ dá»¥ thá»±c táº¿

*   **KhÃ´ng cÃ³ tham sá»‘:**
    `() -> System.out.println("Alo?")`

*   **CÃ³ má»™t tham sá»‘:**
    `name -> System.out.println("ChÃ o " + name)`

*   **CÃ³ nhiá»u tham sá»‘ vÃ  xá»­ lÃ½ phá»©c táº¡p:**
    ```java
    (a, b) -> {
        int sum = a + b;
        return sum;
    }
    ```

**TÃ³m láº¡i:** Lambda giá»‘ng nhÆ° má»™t tá» giáº¥y ghi chÃº dÃ¡n trÃªn tá»§ láº¡nh. Thay vÃ¬ viáº¿t cáº£ má»™t cuá»‘n sÃ¡ch hÆ°á»›ng dáº«n náº¥u Äƒn, báº¡n chá»‰ cáº§n ghi: "ÄÃ³i thÃ¬ hÃ¢m láº¡i cÆ¡m nhÃ©!". Ngáº¯n gá»n, sÃºc tÃ­ch vÃ  hiá»‡u quáº£](#what-are-lambda-expressions-in-java) |
| 40 | [ChÃ o báº¡n! Báº¡n Ä‘Ã£ bao giá» gáº·p pháº£i lá»—i "Ã¡m áº£nh" mang tÃªn `NullPointerException` (NPE) chÆ°a? Cháº¯c cháº¯n lÃ  cÃ³ rá»“i, ai láº­p trÃ¬nh Java mÃ  cháº³ng tá»«ng Ä‘au Ä‘áº§u vÃ¬ nÃ³! 

NhÆ°ng Ä‘á»«ng lo, Java 8 Ä‘Ã£ mang Ä‘áº¿n má»™t "vá»‹ cá»©u tinh" mang tÃªn **Optional**. HÃ£y cÃ¹ng khÃ¡m phÃ¡ xem nÃ³ lÃ  gÃ¬ nhÃ©!

### Optional lÃ  gÃ¬ váº­y?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng **Optional** giá»‘ng nhÆ° má»™t chiáº¿c há»™p. 
- ÄÃ´i khi, bÃªn trong há»™p cÃ³ chá»©a má»™t mÃ³n quÃ  (giÃ¡ trá»‹ cá»§a báº¡n).
- ÄÃ´i khi, chiáº¿c há»™p Ä‘Ã³ hoÃ n toÃ n **trá»‘ng rá»—ng**.

Thay vÃ¬ tráº£ vá» giÃ¡ trá»‹ `null` vÃ  cáº§u nguyá»‡n ráº±ng ngÆ°á»i dÃ¹ng sáº½ khÃ´ng quÃªn kiá»ƒm tra nÃ³, báº¡n tráº£ vá» má»™t chiáº¿c há»™p `Optional`. Äiá»u nÃ y nháº¯c nhá»Ÿ ngÆ°á»i láº­p trÃ¬nh ráº±ng: "NÃ y, cÃ¡i nÃ y cÃ³ thá»ƒ rá»—ng Ä‘áº¥y, nhá»› kiá»ƒm tra trÆ°á»›c khi dÃ¹ng nhÃ©!"

### Táº¡i sao chÃºng ta cáº§n nÃ³?

TrÆ°á»›c Java 8, chÃºng ta thÆ°á»ng viáº¿t code tháº¿ nÃ y:

```java
String name = getName();
if (name != null) {
    System.out.println(name.length());
}
```

Náº¿u báº¡n quÃªn dÃ²ng `if (name != null)`, bÃ¹m! ChÆ°Æ¡ng trÃ¬nh cá»§a báº¡n sáº½ bá»‹ "sáº­p" ngay láº­p tá»©c vÃ¬ lá»—i Null. 

Vá»›i **Optional**, code cá»§a báº¡n sáº½ trÃ´ng chuyÃªn nghiá»‡p vÃ  an toÃ n hÆ¡n háº³n.

### CÃ¡ch sá»­ dá»¥ng Optional cá»±c ká»³ Ä‘Æ¡n giáº£n

DÆ°á»›i Ä‘Ã¢y lÃ  3 cÃ¡ch phá»• biáº¿n nháº¥t Ä‘á»ƒ báº¡n táº¡o vÃ  dÃ¹ng chiáº¿c há»™p nÃ y:

1.  **Táº¡o má»™t chiáº¿c há»™p trá»‘ng rá»—ng:**
    ```java
    Optional<String> emptyBox = Optional.empty();
    ```

2.  **Táº¡o má»™t chiáº¿c há»™p cháº¯c cháº¯n cÃ³ quÃ  (khÃ´ng Ä‘Æ°á»£c null):**
    ```java
    Optional<String> giftBox = Optional.of("Head First Java");
    ```

3.  **Táº¡o má»™t chiáº¿c há»™p "hÃªn xui" (cÃ³ thá»ƒ cÃ³ quÃ  hoáº·c null):**
    ```java
    Optional<String> maybeBox = Optional.ofNullable(getNameFromDatabase());
    ```

### LÃ m sao Ä‘á»ƒ láº¥y quÃ  ra khá»i há»™p?

Äá»«ng chá»‰ láº¥y bá»«a nhÃ©! HÃ£y dÃ¹ng cÃ¡c phÆ°Æ¡ng thá»©c thÃ´ng minh sau:

*   **isPresent()**: Kiá»ƒm tra xem trong há»™p cÃ³ gÃ¬ khÃ´ng. Tráº£ vá» `true` náº¿u cÃ³ quÃ .
*   **ifPresent()**: Náº¿u cÃ³ quÃ  thÃ¬ lÃ m má»™t viá»‡c gÃ¬ Ä‘Ã³ luÃ´n (ráº¥t gá»n gÃ ng!).
*   **orElse()**: "Náº¿u há»™p rá»—ng, hÃ£y cho tÃ´i má»™t giÃ¡ trá»‹ máº·c Ä‘á»‹nh thay tháº¿".
    ```java
    String result = maybeBox.orElse("GiÃ¡ trá»‹ máº·c Ä‘á»‹nh");
    ```

### TÃ³m láº¡i lÃ ...

**Optional** khÃ´ng pháº£i lÃ  cÃ´ng cá»¥ Ä‘á»ƒ tiÃªu diá»‡t hoÃ n toÃ n `null`, mÃ  nÃ³ lÃ  cÃ¡ch Ä‘á»ƒ báº¡n thiáº¿t káº¿ code **rÃµ rÃ ng** hÆ¡n. NÃ³ buá»™c báº¡n pháº£i Ä‘á»‘i máº·t vá»›i kháº£ nÄƒng "khÃ´ng cÃ³ giÃ¡ trá»‹" ngay tá»« Ä‘áº§u, giÃºp á»©ng dá»¥ng cá»§a báº¡n cháº¡y á»•n Ä‘á»‹nh vÃ  Ã­t lá»—i hÆ¡n.

Tháº­t tuyá»‡t vá»i pháº£i khÃ´ng nÃ o? HÃ£y báº¯t Ä‘áº§u Ä‘Ã³ng gÃ³i cÃ¡c giÃ¡ trá»‹ cá»§a báº¡n vÃ o `Optional` ngay hÃ´m nay nhÃ©](#what-is-optional-class-in-java-8) |
| 41 | [Äá»«ng Ä‘á»ƒ hai cÃ¡i tÃªn nÃ y Ä‘Ã¡nh lá»«a báº¡n nhÃ©! DÃ¹ trÃ´ng chÃºng cÃ³ váº» "sinh Ä‘Ã´i", nhÆ°ng trong tháº¿ giá»›i Java, chÃºng Ä‘Ã³ng nhá»¯ng vai trÃ² hoÃ n toÃ n khÃ¡c nhau Ä‘áº¥y.

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang chuáº©n bá»‹ cho má»™t bá»¯a tiá»‡c:
*   **Collection** giá»‘ng nhÆ° cÃ¡i **giá» Ä‘á»±ng Ä‘á»“**. NÃ³ lÃ  thá»© dÃ¹ng Ä‘á»ƒ chá»©a trÃ¡i cÃ¢y, bÃ¡nh káº¹o hay nÆ°á»›c ngá»t.
*   **Collections** giá»‘ng nhÆ° má»™t **anh chÃ ng quáº£n gia Ä‘a nÄƒng**. Anh áº¥y khÃ´ng chá»©a Ä‘á»“, nhÆ°ng anh áº¥y biáº¿t cÃ¡ch sáº¯p xáº¿p, tÃ¬m kiáº¿m vÃ  dá»n dáº¹p Ä‘á»‘ng Ä‘á»“ trong giá» cá»§a báº¡n sao cho ngÄƒn náº¯p nháº¥t.

CÃ¹ng Ä‘i sÃ¢u vÃ o chi tiáº¿t nÃ o!

### 1. Collection (Giao diá»‡n - Interface)

**Collection** lÃ  má»™t "báº£n thiáº¿t káº¿" (interface) náº±m á»Ÿ Ä‘á»‰nh cao nháº¥t trong há»‡ thá»‘ng phÃ¢n cáº¥p cÃ¡c cáº¥u trÃºc dá»¯ liá»‡u cá»§a Java. 

*   **Nhiá»‡m vá»¥:** NÃ³ Ä‘á»‹nh nghÄ©a nhá»¯ng hÃ nh Ä‘á»™ng cÆ¡ báº£n mÃ  báº¥t ká»³ "nhÃ³m Ä‘á»‘i tÆ°á»£ng" nÃ o cÅ©ng pháº£i cÃ³ (nhÆ° thÃªm, xÃ³a, kiá»ƒm tra kÃ­ch thÆ°á»›c).
*   **Gia Ä‘Ã¬nh:** NÃ³ cÃ³ nhá»¯ng "Ä‘á»©a con" ná»•i tiáº¿ng mÃ  báº¡n cháº¯c cháº¯n sáº½ gáº·p nhÆ° `List`, `Set`, vÃ  `Queue`.
*   **CÃ¡ch dÃ¹ng:** Báº¡n dÃ¹ng nÃ³ Ä‘á»ƒ khai bÃ¡o cÃ¡c kiá»ƒu danh sÃ¡ch.

```java
// Táº¡o má»™t danh sÃ¡ch cÃ¡c bÃ i hÃ¡t yÃªu thÃ­ch
Collection<String> songs = new ArrayList<>();
songs.add("Yesterday");
songs.add("Let It Be");
```

### 2. Collections (Lá»›p tiá»‡n Ã­ch - Utility Class)

**Collections** (cÃ³ chá»¯ **s** á»Ÿ cuá»‘i) lÃ  má»™t "há»™p cÃ´ng cá»¥" chá»©a toÃ n nhá»¯ng phÆ°Æ¡ng thá»©c tÄ©nh (static methods). 

*   **Nhiá»‡m vá»¥:** NÃ³ khÃ´ng dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ pháº§n tá»­. Thay vÃ o Ä‘Ã³, nÃ³ cung cáº¥p cÃ¡c thuáº­t toÃ¡n Ä‘á»ƒ thao tÃ¡c trÃªn cÃ¡c Collection. Báº¡n muá»‘n sáº¯p xáº¿p má»™t danh sÃ¡ch? Muá»‘n tÃ¬m giÃ¡ trá»‹ lá»›n nháº¥t? HÃ£y gá»i "anh chÃ ng" nÃ y!
*   **Äáº·c Ä‘iá»ƒm:** Báº¡n khÃ´ng thá»ƒ táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng tá»« lá»›p nÃ y (vÃ¬ nÃ³ cÃ³ private constructor). Báº¡n chá»‰ viá»‡c gá»i trá»±c tiáº¿p tÃªn lá»›p.
*   **CÃ¡ch dÃ¹ng:** DÃ¹ng Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c phÃ©p toÃ¡n thÃ´ng minh.

```java
List<Integer> numbers = new ArrayList<>();
numbers.add(5);
numbers.add(1);
numbers.add(9);

// Sá»­ dá»¥ng "há»™p cÃ´ng cá»¥" Collections Ä‘á»ƒ sáº¯p xáº¿p
Collections.sort(numbers); 

// BÃ¢y giá» numbers sáº½ lÃ : [1, 5, 9]
```

### Báº£ng so sÃ¡nh nhanh

| Äáº·c Ä‘iá»ƒm | Collection | Collections |
| :--- | :--- | :--- |
| **NÃ³ lÃ  gÃ¬?** | LÃ  má»™t **Interface**. | LÃ  má»™t **Utility Class** (Lá»›p tiá»‡n Ã­ch). |
| **Má»¥c Ä‘Ã­ch** | DÃ¹ng Ä‘á»ƒ Ä‘áº¡i diá»‡n cho má»™t nhÃ³m cÃ¡c Ä‘á»‘i tÆ°á»£ng. | DÃ¹ng Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c thao tÃ¡c (sáº¯p xáº¿p, tÃ¬m kiáº¿m...) trÃªn Collection. |
| **PhÆ°Æ¡ng thá»©c** | Chá»©a cÃ¡c phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng (add, remove...). | Chá»©a cÃ¡c phÆ°Æ¡ng thá»©c tÄ©nh (sort, reverse, max...). |
| **Má»‘i quan há»‡** | LÃ  ná»n táº£ng cho List, Set, Queue. | LÃ  "ngÆ°á»i phá»¥c vá»¥" cho cÃ¡c List, Set, Queue Ä‘Ã³. |

**TÃ³m láº¡i:** 
Khi báº¡n cáº§n má»™t nÆ¡i Ä‘á»ƒ **chá»©a** dá»¯ liá»‡u, hÃ£y nghÄ© Ä‘áº¿n **Collection**. 
Khi báº¡n cáº§n má»™t cÃ´ng cá»¥ Ä‘á»ƒ **xá»­ lÃ½** Ä‘á»‘ng dá»¯ liá»‡u Ä‘Ã³, hÃ£y gá»i ngay **Collections**](#what-is-the-difference-between-collection-and-collections) |
| 42 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t chiáº¿c tÃºi tháº§n ká»³ Ä‘á»ƒ Ä‘á»±ng Ä‘á»“ chÆ¡i. Trong tháº¿ giá»›i Java, chÃºng ta gá»i nhá»¯ng "chiáº¿c tÃºi" nÃ y lÃ  **Collections**. Hai loáº¡i tÃºi phá»• biáº¿n nháº¥t mÃ  báº¡n sáº½ gáº·p chÃ­nh lÃ  **List** vÃ  **Set**.

DÃ¹ cáº£ hai Ä‘á»u dÃ¹ng Ä‘á»ƒ chá»©a Ä‘á»“, nhÆ°ng cÃ¡ch chÃºng hoáº¡t Ä‘á»™ng láº¡i khÃ¡c nhau hoÃ n toÃ n Ä‘áº¥y! HÃ£y cÃ¹ng khÃ¡m phÃ¡ nhÃ©.

### 1. List: "Danh sÃ¡ch xáº¿p hÃ ng"
HÃ£y nghÄ© vá» **List** nhÆ° má»™t hÃ ng dÃ i cÃ¡c báº¡n nhá» Ä‘ang Ä‘á»©ng chá» mua kem.

*   **Thá»© tá»± lÃ  trÃªn háº¿t:** Ai Ä‘áº¿n trÆ°á»›c Ä‘á»©ng trÆ°á»›c, ai Ä‘áº¿n sau Ä‘á»©ng sau. List ráº¥t tÃ´n trá»ng vá»‹ trÃ­ (index) cá»§a báº¡n.
*   **Cho phÃ©p "sinh Ä‘Ã´i":** Trong hÃ ng cÃ³ thá»ƒ cÃ³ hai báº¡n giá»‘ng há»‡t nhau (pháº§n tá»­ trÃ¹ng láº·p). List khÃ´ng quan tÃ¢m, nÃ³ cá»© chá»©a háº¿t thÃ´i!
*   **Truy tÃ¬m vá»‹ trÃ­:** Báº¡n cÃ³ thá»ƒ nÃ³i: "NÃ y, cho tÃ´i xem báº¡n Ä‘á»©ng thá»© 2 lÃ  ai?" vÃ  List sáº½ tráº£ lá»i ngay láº­p tá»©c.

**VÃ­ dá»¥ vá»›i code:**
```java
List<String> tuiDoAn = new ArrayList<>();
tuiDoAn.add("BÃ¡nh mÃ¬");
tuiDoAn.add("XÃºc xÃ­ch");
tuiDoAn.add("BÃ¡nh mÃ¬"); // Váº«n Ä‘Æ°á»£c cháº¥p nháº­n luÃ´n!

System.out.println(tuiDoAn); // Káº¿t quáº£: [BÃ¡nh mÃ¬, XÃºc xÃ­ch, BÃ¡nh mÃ¬]
```

---

### 2. Set: "Bá»™ sÆ°u táº­p Ä‘á»™c nháº¥t"
BÃ¢y giá», hÃ£y nghÄ© vá» **Set** nhÆ° má»™t bá»™ sÆ°u táº­p tem quÃ½ hiáº¿m.

*   **KhÃ´ng thÃ­ch sá»± trÃ¹ng láº·p:** Náº¿u báº¡n cá»‘ tÃ¬nh bá» thÃªm má»™t con tem mÃ  báº¡n Ä‘Ã£ cÃ³ rá»“i vÃ o bá»™ sÆ°u táº­p, Set sáº½ tá»« chá»‘i ngay. "TÃ´i cÃ³ cÃ¡i nÃ y rá»“i, cáº£m Æ¡n!"
*   **Thá»© tá»±? HÃªn xui thÃ´i:** Äa sá»‘ cÃ¡c loáº¡i Set (nhÆ° HashSet) khÃ´ng quan tÃ¢m ai Ä‘áº¿n trÆ°á»›c hay sau. ChÃºng chá»‰ quÄƒng má»i thá»© vÃ o má»™t cÃ¡i giá». Äá»«ng mong Ä‘á»£i chÃºng Ä‘á»©ng Ä‘Ãºng hÃ ng lá»‘i nhÃ©.
*   **Äá»™c báº£n:** Má»—i mÃ³n Ä‘á»“ trong Set lÃ  duy nháº¥t.

**VÃ­ dá»¥ vá»›i code:**
```java
Set<String> boSuu Tap = new HashSet<>();
boSuuTap.add("Tem Rá»“ng");
boSuuTap.add("Tem Há»•");
boSuuTap.add("Tem Rá»“ng"); // Set sáº½ Ã¢m tháº§m lá» Ä‘i vÃ¬ Ä‘Ã£ cÃ³ rá»“i!

System.out.println(boSuuTap); // Káº¿t quáº£: [Tem Há»•, Tem Rá»“ng] (Chá»‰ cÃ³ 1 Tem Rá»“ng thÃ´i nhÃ©!)
```

---

### TÃ³m láº¡i, báº¡n nÃªn chá»n cÃ¡i nÃ o?

| Äáº·c Ä‘iá»ƒm | List | Set |
| :--- | :--- | :--- |
| **TrÃ¹ng láº·p?** | CÃ³ (Thoáº£i mÃ¡i Ä‘i!) | KhÃ´ng (Chá»‰ má»™t lÃ  duy nháº¥t) |
| **Thá»© tá»±?** | CÃ³ (Giá»¯ Ä‘Ãºng vá»‹ trÃ­ báº¡n thÃªm vÃ o) | ThÆ°á»ng lÃ  khÃ´ng (Lá»™n xá»™n láº¯m) |
| **CÃ¡ch dÃ¹ng?** | DÃ¹ng khi báº¡n cáº§n biáº¿t cÃ¡i gÃ¬ Ä‘á»©ng á»Ÿ Ä‘Ã¢u. | DÃ¹ng khi báº¡n muá»‘n Ä‘áº£m báº£o khÃ´ng cÃ³ gÃ¬ bá»‹ láº·p láº¡i. |

**Máº¹o nhá» cho báº¡n:** 
- Náº¿u báº¡n muá»‘n lÆ°u danh sÃ¡ch bÃ i hÃ¡t trong má»™t album (cÃ³ thá»ƒ cÃ³ bÃ i trÃ¹ng tÃªn): HÃ£y chá»n **List**.
- Náº¿u báº¡n muá»‘n lÆ°u danh sÃ¡ch ID cá»§a khÃ¡ch hÃ ng (má»—i ngÆ°á»i chá»‰ cÃ³ má»™t mÃ£ duy nháº¥t): HÃ£y chá»n **Set**.](#what-is-the-difference-between-set-and-list) |
| 43 | [ChÃ o báº¡n! Báº¡n Ä‘ang tháº¯c máº¯c khÃ´ng biáº¿t nÃªn chá»n **HashSet** hay **TreeSet** cho táº­p há»£p dá»¯ liá»‡u cá»§a mÃ¬nh? Äá»«ng lo, hÃ£y tÆ°á»Ÿng tÆ°á»£ng chÃºng nhÆ° hai ngÆ°á»i báº¡n cÃ³ tÃ­nh cÃ¡ch hoÃ n toÃ n khÃ¡c biá»‡t nhÃ©!

DÆ°á»›i Ä‘Ã¢y lÃ  báº£ng so sÃ¡nh nhanh Ä‘á»ƒ báº¡n náº¯m báº¯t "tÃ­nh náº¿t" cá»§a tá»«ng anh chÃ ng:

### 1. Tá»‘c Ä‘á»™ vÃ  Hiá»‡u suáº¥t (Ai nhanh hÆ¡n?)

*   **HashSet:** Giá»‘ng nhÆ° má»™t chiáº¿c tÃºi tháº§n ká»³. Báº¡n nÃ©m Ä‘á»“ vÃ o vÃ  láº¥y Ä‘á»“ ra cá»±c ká»³ nhanh (thá»i gian háº±ng sá»‘ $O(1)$). Náº¿u báº¡n chá»‰ cáº§n lÆ°u trá»¯ vÃ  kiá»ƒm tra xem mÃ³n Ä‘á»“ cÃ³ trong tÃºi khÃ´ng, HashSet lÃ  vÃ´ Ä‘á»‹ch!
*   **TreeSet:** Cháº­m hÆ¡n má»™t chÃºt vÃ¬ nÃ³ máº¥t thá»i gian Ä‘á»ƒ sáº¯p xáº¿p (thá»i gian $O(\log n)$). NÃ³ giá»‘ng nhÆ° viá»‡c báº¡n pháº£i xáº¿p sÃ¡ch lÃªn giÃ¡ theo thá»© tá»± chá»¯ cÃ¡i má»—i khi mua cuá»‘n má»›i váº­y.

### 2. Thá»© tá»± (Ai ngÄƒn náº¯p hÆ¡n?)

*   **HashSet:** Anh chÃ ng nÃ y khÃ¡ "bá»«a bá»™n". Báº¡n cho dá»¯ liá»‡u vÃ o theo thá»© tá»± A, B, C, nhÆ°ng khi láº¥y ra cÃ³ thá»ƒ lÃ  C, A, B. NÃ³ khÃ´ng há»©a háº¹n giá»¯ Ä‘Ãºng thá»© tá»± cho báº¡n Ä‘Ã¢u!
*   **TreeSet:** ÄÃ¢y lÃ  má»™t ngÆ°á»i cá»±c ká»³ ngÄƒn náº¯p. Má»i thá»© báº¡n cho vÃ o sáº½ tá»± Ä‘á»™ng Ä‘Æ°á»£c sáº¯p xáº¿p theo thá»© tá»± tÄƒng dáº§n (vÃ­ dá»¥: 1, 2, 3 hoáº·c A, B, C).

### 3. GiÃ¡ trá»‹ Null (Ai dá»… tÃ­nh hÆ¡n?)

*   **HashSet:** KhÃ¡ thoáº£i mÃ¡i, báº¡n cÃ³ thá»ƒ cho phÃ©p má»™t giÃ¡ trá»‹ `null` náº±m trong bá»™ sÆ°u táº­p.
*   **TreeSet:** Ráº¥t nghiÃªm kháº¯c! NÃ³ khÃ´ng cháº¥p nháº­n `null`. Náº¿u báº¡n cá»‘ tÃ¬nh Ä‘Æ°a `null` vÃ o, nÃ³ sáº½ "nÃ©m" ngay má»™t lá»—i `NullPointerException` vÃ o máº·t báº¡n Ä‘áº¥y.

---

### HÃ£y xem thá»­ code thá»±c táº¿ nhÃ©!

CÃ¹ng xem sá»± khÃ¡c biá»‡t khi chÃºng ta cháº¡y thá»­ hai anh chÃ ng nÃ y:

```java
import java.util.*;

public class SoSanhSet {
    public static void main(String[] args) {
        // --- Thá»­ vá»›i HashSet ---
        Set<String> hashSet = new HashSet<>();
        hashSet.add("Zebra");
        hashSet.add("Apple");
        hashSet.add("Mango");
        System.out.println("HashSet (Thá»© tá»± ngáº«u nhiÃªn): " + hashSet);

        // --- Thá»­ vá»›i TreeSet ---
        Set<String> treeSet = new TreeSet<>();
        treeSet.add("Zebra");
        treeSet.add("Apple");
        treeSet.add("Mango");
        System.out.println("TreeSet (ÄÃ£ sáº¯p xáº¿p A-Z): " + treeSet);
    }
}
```

**Káº¿t quáº£ sáº½ lÃ :**
*   **HashSet:** `[Apple, Zebra, Mango]` (Thá»© tá»± lá»™n xá»™n, khÃ´ng Ä‘oÃ¡n trÆ°á»›c Ä‘Æ°á»£c).
*   **TreeSet:** `[Apple, Mango, Zebra]` (Tá»± Ä‘á»™ng xáº¿p theo báº£ng chá»¯ cÃ¡i).

---

### Váº­y khi nÃ o thÃ¬ dÃ¹ng cÃ¡i nÃ o?

1.  **DÃ¹ng HashSet khi:** Báº¡n cáº§n tá»‘c Ä‘á»™ nhanh nháº¥t cÃ³ thá»ƒ vÃ  báº¡n **khÃ´ng quan tÃ¢m** Ä‘áº¿n viá»‡c dá»¯ liá»‡u náº±m á»Ÿ vá»‹ trÃ­ nÃ o.
2.  **DÃ¹ng TreeSet khi:** Báº¡n cáº§n dá»¯ liá»‡u cá»§a mÃ¬nh luÃ´n luÃ´n Ä‘Æ°á»£c **sáº¯p xáº¿p** sáºµn sÃ ng (vÃ­ dá»¥: danh sÃ¡ch tÃªn há»c sinh theo báº£ng chá»¯ cÃ¡i).

**Ghi nhá»›:** Cáº£ hai Ä‘á»u **khÃ´ng cho phÃ©p** trÃ¹ng láº·p. Náº¿u báº¡n cá»‘ thÃªm hai chá»¯ "Apple", chÃºng cÅ©ng chá»‰ lÆ°u má»™t cÃ¡i duy nháº¥t thÃ´i!](#what-is-the-difference-between-hashset-and-treeset) |
| 44 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang Ä‘á»©ng á»Ÿ má»™t ngÃ£ tÆ° Ä‘Æ°á»ng. BÃªn trÃ¡i lÃ  nhÃ  cá»§a Bá»‘, bÃªn pháº£i lÃ  nhÃ  cá»§a Máº¹. Cáº£ hai Ä‘á»u cÃ³ má»™t chiáº¿c xe hÆ¡i tÃªn lÃ  "Xe Cá»§a TÃ´i". Náº¿u báº¡n nÃ³i: "TÃ´i muá»‘n lÃ¡i Xe Cá»§a TÃ´i", há»‡ thá»‘ng nÃ£o bá»™ cá»§a báº¡n sáº½ bá»‹ "treo" ngay láº­p tá»©c: Báº¡n Ä‘ang nháº¯c Ä‘áº¿n chiáº¿c xe cá»§a Bá»‘ hay cá»§a Máº¹ Ä‘Ã¢y?

ÄÃ³ chÃ­nh lÃ  hÃ¬nh áº£nh minh há»a cho **Váº¥n Ä‘á» Kim cÆ°Æ¡ng (Diamond Problem)** trong láº­p trÃ¬nh!

### Táº¡i sao láº¡i gá»i lÃ  "Kim cÆ°Æ¡ng"?

HÃ£y nhÃ¬n vÃ o sÆ¡ Ä‘á»“ thá»«a káº¿ nÃ y:

1.  **Lá»›p A (Ã”ng ná»™i):** CÃ³ má»™t phÆ°Æ¡ng thá»©c `lamViec()`.
2.  **Lá»›p B (Bá»‘) vÃ  Lá»›p C (Máº¹):** Cáº£ hai Ä‘á»u thá»«a káº¿ tá»« A vÃ  **ghi Ä‘Ã¨** (override) phÆ°Æ¡ng thá»©c `lamViec()` theo cÃ¡ch riÃªng cá»§a mÃ¬nh.
3.  **Lá»›p D (Con):** Thá»«a káº¿ tá»« cáº£ B vÃ  C.

Náº¿u báº¡n váº½ sÆ¡ Ä‘á»“ nÃ y ra giáº¥y, nÃ³ sáº½ cÃ³ hÃ¬nh thoi trÃ´ng giá»‘ng nhÆ° má»™t viÃªn kim cÆ°Æ¡ng.

### Ráº¯c rá»‘i náº±m á»Ÿ Ä‘Ã¢u?

Khi báº¡n Ä‘á»©ng á»Ÿ Lá»›p D vÃ  gá»i lá»‡nh `lamViec()`, Java sáº½ gÃ£i Ä‘áº§u bá»‘i rá»‘i: *"á»¦a, mÃ¬nh nÃªn dÃ¹ng phiÃªn báº£n cá»§a Bá»‘ hay phiÃªn báº£n cá»§a Máº¹ nhá»‰?"*. VÃ¬ cáº£ hai Ä‘á»u náº±m á»Ÿ cÃ¹ng má»™t cáº¥p Ä‘á»™ Æ°u tiÃªn, Java khÃ´ng biáº¿t chá»n cÃ¡i nÃ o.

### Java giáº£i quyáº¿t viá»‡c nÃ y tháº¿ nÃ o?

Äá»ƒ trÃ¡nh cho cÃ¡c láº­p trÃ¬nh viÃªn khá»i bá»‹ "ná»• nÃ£o", Java Ä‘Ã£ Ä‘Æ°a ra má»™t quyáº¿t Ä‘á»‹nh cá»±c ká»³ dá»©t khoÃ¡t:

**Java KHÃ”NG cho phÃ©p Äa thá»«a káº¿ vá»›i Lá»›p (Class).**

Báº¡n khÃ´ng thá»ƒ viáº¿t nhÆ° tháº¿ nÃ y:
```java
// Cáº¢NH BÃO: Code nÃ y sáº½ bá»‹ lá»—i biÃªn dá»‹ch!
class Con extends Bo, Me { 
    // Java sáº½ bÃ¡o lá»—i ngay táº¡i Ä‘Ã¢y!
}
```

### NhÆ°ng Ä‘á»£i Ä‘Ã£... cÃ²n Interface thÃ¬ sao?

Java cho phÃ©p báº¡n thá»±c thi (implement) nhiá»u Interface cÃ¹ng lÃºc. Váº­y náº¿u hai Interface cÃ³ cÃ¹ng má»™t phÆ°Æ¡ng thá»©c thÃ¬ sao?

Ká»ƒ tá»« Java 8, chÃºng ta cÃ³ **Default Method**. Náº¿u hai Interface cÃ³ cÃ¹ng má»™t phÆ°Æ¡ng thá»©c máº·c Ä‘á»‹nh, Java sáº½ báº¯t báº¡n pháº£i tá»± tay giáº£i quyáº¿t mÃ¢u thuáº«n Ä‘Ã³.

```java
interface Bo {
    default void loiKhuyen() {
        System.out.println("HÃ£y tiáº¿t kiá»‡m tiá»n!");
    }
}

interface Me {
    default void loiKhuyen() {
        System.out.println("HÃ£y tiÃªu xÃ i hÆ°á»Ÿng thá»¥!");
    }
}

class Con implements Bo, Me {
    // Java báº¯t buá»™c báº¡n pháº£i ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c nÃ y Ä‘á»ƒ chá»n phe!
    @Override
    public void loiKhuyen() {
        // Báº¡n cÃ³ thá»ƒ chá»n dÃ¹ng cá»§a Bá»‘:
        Bo.super.loiKhuyen();
        
        // Hoáº·c tá»± viáº¿t cÃ¡i má»›i cá»§a riÃªng báº¡n:
        System.out.println("TÃ´i sáº½ lÃ m cáº£ hai!");
    }
}
```

### TÃ³m láº¡i lÃ :
*   **Váº¥n Ä‘á» Kim cÆ°Æ¡ng** xáº£y ra khi má»™t lá»›p con thá»«a káº¿ tá»« hai lá»›p cha cÃ³ cÃ¹ng má»™t phÆ°Æ¡ng thá»©c.
*   **Java cáº¥m Ä‘a thá»«a káº¿ lá»›p** Ä‘á»ƒ giá»¯ cho code luÃ´n rÃµ rÃ ng vÃ  dá»… hiá»ƒu.
*   Náº¿u dÃ¹ng **Interface**, báº¡n pháº£i lÃ  ngÆ°á»i Ä‘á»©ng ra "phÃ¢n xá»­" khi cÃ³ xung Ä‘á»™t xáº£y ra.

Tháº­t Ä‘Æ¡n giáº£n pháº£i khÃ´ng nÃ o? Java luÃ´n cá»‘ gáº¯ng báº£o vá»‡ báº¡n khá»i nhá»¯ng tÃ¬nh huá»‘ng gÃ¢y lÃº láº«n Ä‘áº¥y](#what-is-the-diamond-problem-in-java) |
| 45 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang muá»‘n láº¯p rÃ¡p má»™t chiáº¿c mÃ¡y tÃ­nh.

ThÃ´ng thÆ°á»ng, báº¡n sáº½ pháº£i tá»± mÃ¬nh Ä‘i mua tá»«ng linh kiá»‡n: chá»n CPU á»Ÿ cá»­a hÃ ng A, mua RAM á»Ÿ cá»­a hÃ ng B, rá»“i tá»± tay gáº¯n chÃºng láº¡i vá»›i nhau. Trong láº­p trÃ¬nh, chÃºng ta gá»i Ä‘Ã¢y lÃ  viá»‡c má»™t Ä‘á»‘i tÆ°á»£ng **tá»± khá»Ÿi táº¡o** cÃ¡c phá»¥ thuá»™c (dependencies) cá»§a nÃ³.

NhÆ°ng cÃ³ má»™t cÃ¡ch nhÃ n hÆ¡n nhiá»u! Báº¡n chá»‰ cáº§n Ä‘Æ°a danh sÃ¡ch linh kiá»‡n cho má»™t "anh thá»£ giá»i". Anh áº¥y sáº½ chuáº©n bá»‹ sáºµn má»i thá»© vÃ  mang Ä‘áº¿n táº­n nhÃ  cho báº¡n. Báº¡n chá»‰ viá»‡c láº¯p chÃºng vÃ o mÃ¡y. ÄÃ³ chÃ­nh lÃ  **Dependency Injection (DI)**.

### Váº­y Dependency Injection thá»±c sá»± lÃ  gÃ¬?

NÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n: Thay vÃ¬ Ä‘á»ƒ má»™t Ä‘á»‘i tÆ°á»£ng tá»± Ä‘i tÃ¬m hoáº·c tá»± táº¡o ra cÃ¡c mÃ³n Ä‘á»“ nÃ³ cáº§n, chÃºng ta sáº½ "bÆ¡m" (inject) nhá»¯ng mÃ³n Ä‘á»“ Ä‘Ã³ tá»« bÃªn ngoÃ i vÃ o.

HÃ£y xem vÃ­ dá»¥ báº±ng code nhÃ©!

#### CÃ¡ch lÃ m "Cá»• Ä‘iá»ƒn" (KhÃ´ng dÃ¹ng DI)
á» Ä‘Ã¢y, lá»›p `Car` (Xe hÆ¡i) Ä‘ang tá»± mÃ¬nh Ä‘i mua má»™t cÃ¡i `Engine` (Äá»™ng cÆ¡).

```java
public class Car {
    private Engine engine;

    public Car() {
        // Xe tá»± táº¡o ra Ä‘á»™ng cÆ¡. QuÃ¡ váº¥t váº£!
        this.engine = new Engine();
    }

    public void start() {
        engine.run();
    }
}
```

**Váº¥n Ä‘á» lÃ  gÃ¬?** Chiáº¿c xe nÃ y bá»‹ "dÃ­nh cháº·t" vá»›i má»™t loáº¡i Ä‘á»™ng cÆ¡ cá»‘ Ä‘á»‹nh. Náº¿u báº¡n muá»‘n dÃ¹ng Ä‘á»™ng cÆ¡ Ä‘iá»‡n? Báº¡n pháº£i sá»­a láº¡i toÃ n bá»™ code cá»§a lá»›p `Car`. Ráº¥t phiá»n phá»©c!

#### CÃ¡ch lÃ m hiá»‡n Ä‘áº¡i (DÃ¹ng Dependency Injection)
BÃ¢y giá», chÃºng ta sáº½ khÃ´ng Ä‘á»ƒ chiáº¿c xe tá»± táº¡o Ä‘á»™ng cÆ¡ ná»¯a. ChÃºng ta sáº½ Ä‘Æ°a Ä‘á»™ng cÆ¡ vÃ o thÃ´ng qua hÃ m khá»Ÿi táº¡o (Constructor).

```java
public class Car {
    private Engine engine;

    // "NÃ y Car, Ä‘Ã¢y lÃ  Ä‘á»™ng cÆ¡ cá»§a báº¡n. HÃ£y dÃ¹ng nÃ³ nhÃ©!"
    public Car(Engine engine) {
        this.engine = engine;
    }

    public void start() {
        engine.run();
    }
}
```

### Táº¡i sao chÃºng ta láº¡i cáº§n DI?

1.  **Dá»… dÃ ng thay Ä‘á»•i:** Báº¡n muá»‘n Ä‘á»•i Ä‘á»™ng cÆ¡ xÄƒng sang Ä‘á»™ng cÆ¡ Ä‘iá»‡n? Chá»‰ cáº§n Ä‘Æ°a má»™t Ä‘á»‘i tÆ°á»£ng `ElectricEngine` vÃ o lÃºc táº¡o xe lÃ  xong. KhÃ´ng cáº§n sá»­a code lá»›p `Car`.
2.  **Dá»… kiá»ƒm thá»­ (Testing):** Báº¡n cÃ³ thá»ƒ Ä‘Æ°a vÃ o má»™t "Ä‘á»™ng cÆ¡ giáº£" (Mock Engine) Ä‘á»ƒ kiá»ƒm tra xem xe cÃ³ cháº¡y Ä‘Ãºng khÃ´ng mÃ  khÃ´ng cáº§n ná»• mÃ¡y tháº­t.
3.  **Code gá»n gÃ ng:** Lá»›p `Car` bÃ¢y giá» chá»‰ táº­p trung vÃ o viá»‡c lÃ¡i xe, khÃ´ng cáº§n quan tÃ¢m Ä‘áº¿n viá»‡c cháº¿ táº¡o Ä‘á»™ng cÆ¡ nhÆ° tháº¿ nÃ o ná»¯a.

### TÃ³m láº¡i lÃ ...

Dependency Injection giá»‘ng nhÆ° viá»‡c báº¡n gá»i Ä‘á»“ Äƒn vá» nhÃ  thay vÃ¬ pháº£i tá»± Ä‘i chá»£ vÃ  náº¥u nÆ°á»›ng. Báº¡n chá»‰ cáº§n táº­p trung vÃ o viá»‡c **thÆ°á»Ÿng thá»©c mÃ³n Äƒn** (sá»­ dá»¥ng Ä‘á»‘i tÆ°á»£ng), cÃ²n viá»‡c **chuáº©n bá»‹ nguyÃªn liá»‡u** (táº¡o Ä‘á»‘i tÆ°á»£ng) Ä‘Ã£ cÃ³ ngÆ°á»i khÃ¡c lo](#what-is-dependency-injection) |
| 46 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang cÃ³ má»™t cuá»‘n sá»• tay ghi chÃ©p cá»±c ká»³ quan trá»ng. Báº¡n muá»‘n táº¡o má»™t báº£n sao cá»§a nÃ³. Trong tháº¿ giá»›i láº­p trÃ¬nh Java, chÃºng ta cÃ³ hai cÃ¡ch Ä‘á»ƒ lÃ m viá»‡c nÃ y: **Shallow Copy** (Sao chÃ©p nÃ´ng) vÃ  **Deep Copy** (Sao chÃ©p sÃ¢u).

Nghe cÃ³ váº» phá»©c táº¡p nhá»‰? Äá»«ng lo, hÃ£y cÃ¹ng bÃ³c tÃ¡ch chÃºng nhÃ©!

### 1. Shallow Copy (Sao chÃ©p nÃ´ng) - "Káº» lÆ°á»i biáº¿ng"

HÃ£y coi Shallow Copy nhÆ° viá»‡c báº¡n photocopy trang bÃ¬a cá»§a cuá»‘n sá»• nhÆ°ng cáº£ hai báº£n copy váº«n dÃ¹ng chung cÃ¡c trang ruá»™t bÃªn trong.

*   **CÃ¡ch hoáº¡t Ä‘á»™ng:** NÃ³ táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng má»›i, nhÆ°ng cÃ¡c biáº¿n bÃªn trong Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ váº«n trá» (tham chiáº¿u) vá» cÃ¹ng má»™t Ä‘á»‹a chá»‰ bá»™ nhá»› vá»›i Ä‘á»‘i tÆ°á»£ng cÅ©.
*   **Háº­u quáº£:** Náº¿u Ä‘á»‘i tÆ°á»£ng cÅ© thay Ä‘á»•i má»™t "váº­t thá»ƒ" bÃªn trong nÃ³, Ä‘á»‘i tÆ°á»£ng má»›i cÅ©ng bá»‹ thay Ä‘á»•i theo. VÃ¬ thá»±c cháº¥t chÃºng Ä‘ang dÃ¹ng chung Ä‘á»“!

**VÃ­ dá»¥ báº±ng code:**
```java
class Backpack {
    String owner;
    Pen pen; // ÄÃ¢y lÃ  má»™t Ä‘á»‘i tÆ°á»£ng khÃ¡c náº±m bÃªn trong
}

// Shallow Copy
Backpack copy = originalBackpack; 
```
> **LÆ°u Ã½:** Náº¿u báº¡n thay Ä‘á»•i mÃ u má»±c cá»§a cÃ¢y bÃºt (`pen`) trong tÃºi cá»§a báº¡n, cÃ¢y bÃºt trong tÃºi cá»§a báº£n sao cÅ©ng Ä‘á»•i mÃ u luÃ´n!

---

### 2. Deep Copy (Sao chÃ©p sÃ¢u) - "NgÆ°á»i cáº§u toÃ n"

Deep Copy thÃ¬ khÃ¡c háº³n. NÃ³ giá»‘ng nhÆ° viá»‡c báº¡n Ä‘i mua má»™t cuá»‘n sá»• má»›i tinh vÃ  chÃ©p tay láº¡i toÃ n bá»™ ná»™i dung tá»« Ä‘áº§u Ä‘áº¿n cuá»‘i.

*   **CÃ¡ch hoáº¡t Ä‘á»™ng:** NÃ³ táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng hoÃ n toÃ n má»›i vÃ  **sao chÃ©p luÃ´n cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng con** bÃªn trong Ä‘Ã³. 
*   **Káº¿t quáº£:** Báº¡n cÃ³ hai thá»±c thá»ƒ hoÃ n toÃ n Ä‘á»™c láº­p. ChÃºng khÃ´ng liÃªn quan gÃ¬ Ä‘áº¿n nhau ná»¯a.

**VÃ­ dá»¥ báº±ng code:**
```java
// Deep Copy
Backpack copy = new Backpack();
copy.owner = original.owner;
copy.pen = new Pen(original.pen.getColor()); // Táº¡o háº³n má»™t cÃ¢y bÃºt má»›i!
```
> **LÆ°u Ã½:** BÃ¢y giá», náº¿u báº¡n lÃ m há»ng cÃ¢y bÃºt á»Ÿ tÃºi nÃ y, cÃ¢y bÃºt á»Ÿ tÃºi kia váº«n hoÃ n toÃ n bÃ¬nh thÆ°á»ng. An toÃ n tuyá»‡t Ä‘á»‘i!

---

### Báº£ng so sÃ¡nh nhanh

| Äáº·c Ä‘iá»ƒm | Shallow Copy | Deep Copy |
| :--- | :--- | :--- |
| **Tá»‘c Ä‘á»™** | Ráº¥t nhanh (vÃ¬ lÆ°á»i) | Cháº­m hÆ¡n (vÃ¬ pháº£i lÃ m nhiá»u viá»‡c) |
| **Bá»™ nhá»›** | Tiáº¿t kiá»‡m | Tá»‘n kÃ©m hÆ¡n |
| **TÃ­nh Ä‘á»™c láº­p** | Tháº¥p (thay má»™t, Ä‘á»•i cáº£ hai) | Cao (Ä‘Æ°á»ng ai náº¥y Ä‘i) |

### Váº­y khi nÃ o dÃ¹ng cÃ¡i nÃ o?

*   DÃ¹ng **Shallow Copy** khi báº¡n muá»‘n tiáº¿t kiá»‡m bá»™ nhá»› vÃ  cháº¯c cháº¯n ráº±ng cÃ¡c Ä‘á»‘i tÆ°á»£ng con bÃªn trong sáº½ khÃ´ng bao giá» bá»‹ thay Ä‘á»•i (immutable).
*   DÃ¹ng **Deep Copy** khi báº¡n muá»‘n má»™t báº£n sao hoÃ n toÃ n riÃªng biá»‡t, Ä‘á»ƒ khi báº¡n "vá»c váº¡ch" báº£n nÃ y thÃ¬ báº£n kia váº«n khÃ´ng há» háº¥n gÃ¬.

**Quy táº¯c vÃ ng:** Náº¿u Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n cÃ³ chá»©a cÃ¡c Ä‘á»‘i tÆ°á»£ng phá»©c táº¡p khÃ¡c bÃªn trong, hÃ£y luÃ´n cáº©n tháº­n vá»›i Shallow Copy káº»o "rÃ¢u Ã´ng ná» cáº¯m cáº±m bÃ  kia" nhÃ©!](#what-is-the-difference-between-shallow-copy-and-deep-copy) |
| 47 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang Ä‘á»‘i máº·t vá»›i má»™t váº¥n Ä‘á» láº­p trÃ¬nh hÃ³c bÃºa. Báº¡n loay hoay tÃ¬m cÃ¡ch giáº£i quyáº¿t, nhÆ°ng báº¡n cÃ³ biáº¿t ráº±ng hÃ ng ngÃ n láº­p trÃ¬nh viÃªn khÃ¡c cÅ©ng tá»«ng gáº·p ráº¯c rá»‘i y há»‡t nhÆ° váº­y khÃ´ng?

Thay vÃ¬ tá»± mÃ¬nh "cháº¿ táº¡o láº¡i bÃ¡nh xe", táº¡i sao chÃºng ta khÃ´ng sá»­ dá»¥ng nhá»¯ng giáº£i phÃ¡p Ä‘Ã£ Ä‘Æ°á»£c kiá»ƒm chá»©ng? ÄÃ³ chÃ­nh lÃ  lÃºc **Design Patterns** (Máº«u thiáº¿t káº¿) xuáº¥t hiá»‡n!

### Design Patterns lÃ  gÃ¬?

NÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n nháº¥t: Design Patterns lÃ  nhá»¯ng **giáº£i phÃ¡p máº«u** cho cÃ¡c váº¥n Ä‘á» phá»• biáº¿n mÃ  chÃºng ta thÆ°á»ng gáº·p khi thiáº¿t káº¿ pháº§n má»m.

HÃ£y coi chÃºng nhÆ° nhá»¯ng báº£n thiáº¿t káº¿ (blueprints) Ä‘Ã£ Ä‘Æ°á»£c thá»­ nghiá»‡m ká»¹ lÆ°á»¡ng. ChÃºng khÃ´ng pháº£i lÃ  nhá»¯ng Ä‘oáº¡n mÃ£ cá»¥ thá»ƒ mÃ  báº¡n cÃ³ thá»ƒ copy-paste vÃ o chÆ°Æ¡ng trÃ¬nh, mÃ  lÃ  nhá»¯ng **khÃ¡i niá»‡m** giÃºp báº¡n tá»• chá»©c code cá»§a mÃ¬nh thÃ´ng minh hÆ¡n.

### Táº¡i sao chÃºng ta cáº§n chÃºng?

1.  **Äá»«ng tá»‘n cÃ´ng vÃ´ Ã­ch:** Táº¡i sao pháº£i vÃ² Ä‘áº§u bá»©t tai khi Ä‘Ã£ cÃ³ sáºµn má»™t cÃ´ng thá»©c thÃ nh cÃ´ng?
2.  **NgÃ´n ngá»¯ chung:** Khi báº¡n nÃ³i "TÃ´i sáº½ dÃ¹ng mÃ´ hÃ¬nh *Singleton* á»Ÿ Ä‘Ã¢y", cÃ¡c láº­p trÃ¬nh viÃªn khÃ¡c sáº½ hiá»ƒu ngay láº­p tá»©c báº¡n Ä‘á»‹nh lÃ m gÃ¬.
3.  **Code dá»… báº£o trÃ¬:** Pattern giÃºp code cá»§a báº¡n linh hoáº¡t hÆ¡n, dá»… sá»­a Ä‘á»•i mÃ  khÃ´ng lÃ m há»ng nhá»¯ng pháº§n khÃ¡c.

### 3 NhÃ³m Design Patterns chÃ­nh

Trong tháº¿ giá»›i Java, chÃºng ta thÆ°á»ng chia cÃ¡c máº«u nÃ y thÃ nh 3 "gia Ä‘Ã¬nh" lá»›n:

*   **NhÃ³m Khá»Ÿi táº¡o (Creational):** Táº­p trung vÃ o cÃ¡ch chÃºng ta táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng. Thay vÃ¬ cá»© dÃ¹ng tá»« khÃ³a `new` má»™t cÃ¡ch bá»«a bÃ£i, nhÃ³m nÃ y giÃºp viá»‡c táº¡o Ä‘á»‘i tÆ°á»£ng trá»Ÿ nÃªn linh hoáº¡t vÃ  kiá»ƒm soÃ¡t tá»‘t hÆ¡n.
    *   *VÃ­ dá»¥:* **Singleton** (Ä‘áº£m báº£o má»™t lá»›p chá»‰ cÃ³ duy nháº¥t má»™t Ä‘á»‘i tÆ°á»£ng).
*   **NhÃ³m Cáº¥u trÃºc (Structural):** Giá»‘ng nhÆ° viá»‡c láº¯p rÃ¡p cÃ¡c bá»™ pháº­n cá»§a má»™t chiáº¿c xe, nhÃ³m nÃ y giÃºp chÃºng ta káº¿t ná»‘i cÃ¡c lá»›p (class) vÃ  Ä‘á»‘i tÆ°á»£ng láº¡i vá»›i nhau thÃ nh má»™t cáº¥u trÃºc lá»›n hÆ¡n, vá»¯ng cháº¯c hÆ¡n.
    *   *VÃ­ dá»¥:* **Adapter** (giÃºp hai giao diá»‡n khÃ´ng tÆ°Æ¡ng thÃ­ch cÃ³ thá»ƒ lÃ m viá»‡c cÃ¹ng nhau).
*   **NhÃ³m HÃ nh vi (Behavioral):** NhÃ³m nÃ y táº­p trung vÃ o cÃ¡ch cÃ¡c Ä‘á»‘i tÆ°á»£ng "nÃ³i chuyá»‡n" vÃ  tÆ°Æ¡ng tÃ¡c vá»›i nhau.
    *   *VÃ­ dá»¥:* **Observer** (giÃºp má»™t Ä‘á»‘i tÆ°á»£ng thÃ´ng bÃ¡o cho cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c khi nÃ³ cÃ³ thay Ä‘á»•i).

### Má»™t vÃ­ dá»¥ nhá»: Máº«u Singleton

Báº¡n muá»‘n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng `DatabaseConnection` mÃ  cáº£ chÆ°Æ¡ng trÃ¬nh chá»‰ Ä‘Æ°á»£c dÃ¹ng chung má»™t cÃ¡i duy nháº¥t? Äá»«ng Ä‘á»ƒ ai cÅ©ng cÃ³ thá»ƒ táº¡o má»›i nÃ³!

```java
public class DatabaseConnector {
    // BÆ°á»›c 1: Táº¡o má»™t biáº¿n tÄ©nh Ä‘á»ƒ giá»¯ thá»±c thá»ƒ duy nháº¥t
    private static DatabaseConnector instance;

    // BÆ°á»›c 2: Äá»ƒ Constructor lÃ  private Ä‘á»ƒ khÃ´ng ai bÃªn ngoÃ i 'new' Ä‘Æ°á»£c
    private DatabaseConnector() {}

    // BÆ°á»›c 3: Cung cáº¥p má»™t phÆ°Æ¡ng thá»©c Ä‘á»ƒ láº¥y thá»±c thá»ƒ Ä‘Ã³
    public static DatabaseConnector getInstance() {
        if (instance == null) {
            instance = new DatabaseConnector();
        }
        return instance;
    }
}
```

### Lá»i khuyÃªn cho báº¡n
Äá»«ng cá»‘ gáº¯ng há»c thuá»™c lÃ²ng táº¥t cáº£ cÃ¡c pattern ngay láº­p tá»©c! HÃ£y báº¯t Ä‘áº§u báº±ng cÃ¡ch hiá»ƒu rÃµ váº¥n Ä‘á» mÃ¬nh Ä‘ang gáº·p pháº£i, sau Ä‘Ã³ tÃ¬m xem cÃ³ "máº«u" nÃ o phÃ¹ há»£p Ä‘á»ƒ giáº£i quyáº¿t nÃ³ hay khÃ´ng. ÄÃ³ má»›i lÃ  cÃ¡ch há»c cá»§a má»™t siÃªu sao láº­p trÃ¬nh](#what-are-design-patterns-in-java) |
| 48 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang Ä‘iá»u hÃ nh má»™t cá»­a hÃ ng bÃ¡nh Pizza. Khi khÃ¡ch hÃ ng gá»i mÃ³n, báº¡n pháº£i kiá»ƒm tra xem há» muá»‘n loáº¡i nÃ o: Pizza phÃ´ mai, Pizza háº£i sáº£n hay Pizza chay?

Náº¿u báº¡n viáº¿t mÃ£ theo cÃ¡ch thÃ´ng thÆ°á»ng, nÃ³ sáº½ trÃ´ng nhÆ° tháº¿ nÃ y:

```java
Pizza orderPizza(String type) {
    Pizza pizza;

    // Code thay Ä‘á»•i liÃªn tá»¥c á»Ÿ Ä‘Ã¢y!
    if (type.equals("cheese")) {
        pizza = new CheesePizza();
    } else if (type.equals("seafood")) {
        pizza = new SeafoodPizza();
    } else if (type.equals("veggie")) {
        pizza = new VeggiePizza();
    }

    pizza.prepare();
    pizza.bake();
    pizza.cut();
    pizza.box();
    return pizza;
}
```

### Váº¥n Ä‘á» lÃ  gÃ¬?
Má»—i khi cá»­a hÃ ng cÃ³ thÃªm mÃ³n má»›i hoáº·c bá» mÃ³n cÅ©, báº¡n láº¡i pháº£i má»Ÿ file nÃ y ra Ä‘á»ƒ sá»­a code. Äiá»u nÃ y tháº­t phiá»n phá»©c! Trong láº­p trÃ¬nh, chÃºng ta muá»‘n code Ä‘Æ°á»£c "Ä‘Ã³ng" vá»›i viá»‡c chá»‰nh sá»­a nhÆ°ng "má»Ÿ" vá»›i viá»‡c má»Ÿ rá»™ng.

### Factory Pattern xuáº¥t hiá»‡n Ä‘á»ƒ giáº£i cá»©u!
Factory (NhÃ  mÃ¡y) Ä‘Æ¡n giáº£n lÃ  má»™t Ä‘á»‘i tÆ°á»£ng chuyÃªn lÃ m má»™t viá»‡c duy nháº¥t: **táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c**. 

Thay vÃ¬ tá»± mÃ¬nh dÃ¹ng lá»‡nh `new` Ä‘á»ƒ táº¡o Pizza trong cá»­a hÃ ng, báº¡n sáº½ nhá» "NhÃ  mÃ¡y" lÃ m viá»‡c Ä‘Ã³.

#### BÆ°á»›c 1: Táº¡o ra NhÃ  mÃ¡y (Simple Factory)
```java
public class SimplePizzaFactory {
    public Pizza createPizza(String type) {
        Pizza pizza = null;

        if (type.equals("cheese")) {
            pizza = new CheesePizza();
        } else if (type.equals("seafood")) {
            pizza = new SeafoodPizza();
        } else if (type.equals("veggie")) {
            pizza = new VeggiePizza();
        }
        return pizza;
    }
}
```

#### BÆ°á»›c 2: Sá»­ dá»¥ng NhÃ  mÃ¡y trong cá»­a hÃ ng cá»§a báº¡n
```java
public class PizzaStore {
    SimpleFactory factory;

    public PizzaStore(SimpleFactory factory) {
        this.factory = factory;
    }

    public Pizza orderPizza(String type) {
        Pizza pizza;

        // NhÃ  mÃ¡y sáº½ lo viá»‡c táº¡o Ä‘á»‘i tÆ°á»£ng!
        pizza = factory.createPizza(type);

        pizza.prepare();
        pizza.bake();
        pizza.cut();
        pizza.box();
        return pizza;
    }
}
```

### Táº¡i sao chÃºng ta láº¡i lÃ m váº­y?
1.  **Gá»n gÃ ng:** Cá»­a hÃ ng Pizza giá» Ä‘Ã¢y khÃ´ng cáº§n quan tÃ¢m lÃ m sao Ä‘á»ƒ táº¡o ra má»™t chiáº¿c bÃ¡nh ná»¯a. NÃ³ chá»‰ cáº§n biáº¿t nÆ°á»›ng vÃ  Ä‘Ã³ng há»™p thÃ´i.
2.  **Dá»… báº£o trÃ¬:** Náº¿u thá»±c Ä‘Æ¡n thay Ä‘á»•i, báº¡n chá»‰ cáº§n sá»­a mÃ£ á»Ÿ Ä‘Ãºng má»™t nÆ¡i duy nháº¥t: Ä‘Ã³ lÃ  táº¡i **Factory**.
3.  **TÃ¡i sá»­ dá»¥ng:** Báº¡n cÃ³ thá»ƒ dÃ¹ng Factory nÃ y cho nhiá»u cá»­a hÃ ng khÃ¡c nhau mÃ  khÃ´ng cáº§n viáº¿t láº¡i code.

**TÃ³m láº¡i:** Factory Pattern giÃºp báº¡n tÃ¡ch rá»i pháº§n "thay Ä‘á»•i" (viá»‡c táº¡o Ä‘á»‘i tÆ°á»£ng) ra khá»i pháº§n "khÃ´ng Ä‘á»•i" (quy trÃ¬nh xá»­ lÃ½), giÃºp code cá»§a báº¡n linh hoáº¡t vÃ  chuyÃªn nghiá»‡p hÆ¡n ráº¥t nhiá»u](#what-is-the-factory-design-pattern) |
| 49 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang xÃ¢y dá»±ng má»™t Ä‘á»‘i tÆ°á»£ng "SiÃªu phá»©c táº¡p". 

Giáº£ sá»­ báº¡n muá»‘n táº¡o má»™t Ä‘á»‘i tÆ°á»£ng `Pizza`. Má»™t chiáº¿c Pizza cÃ³ thá»ƒ cÃ³ ráº¥t nhiá»u tÃ¹y chá»n: kÃ­ch cá»¡, loáº¡i Ä‘áº¿, cÃ³ phÃ´ mai khÃ´ng, cÃ³ xÃºc xÃ­ch khÃ´ng, cÃ³ thÃªm dá»©a khÃ´ng? 

Náº¿u dÃ¹ng cÃ¡ch thÃ´ng thÆ°á»ng (Constructor), báº¡n sáº½ cÃ³ má»™t dÃ²ng code trÃ´ng ráº¥t "kinh dá»‹" nhÆ° tháº¿ nÃ y:

```java
Pizza myPizza = new Pizza("Lá»›n", true, false, true, true, false, true);
```

Äá»£i Ä‘Ã£! Sá»‘ `true` thá»© hai cÃ³ nghÄ©a lÃ  gÃ¬ nhá»‰? LÃ  thÃªm hÃ nh hay thÃªm náº¥m? Tháº­t khÃ³ Ä‘á»ƒ nhá»› háº¿t thá»© tá»± cá»§a chÃºng!

### Giáº£i phÃ¡p: Builder Pattern!

Builder Pattern giá»‘ng nhÆ° má»™t **thá»±c Ä‘Æ¡n tá»± chá»n**. Thay vÃ¬ pháº£i Ä‘Æ°a táº¥t cáº£ nguyÃªn liá»‡u vÃ o má»™t lÃºc, báº¡n sáº½ nháº·t tá»«ng thá»© má»™t.

NÃ³ giÃºp báº¡n:
1. Táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng phá»©c táº¡p tá»«ng bÆ°á»›c má»™t.
2. Code dá»… Ä‘á»c vÃ  dá»… hiá»ƒu hÆ¡n (nhÃ¬n vÃ o lÃ  biáº¿t Ä‘ang thÃªm gÃ¬).
3. TrÃ¡nh Ä‘Æ°á»£c tÃ¬nh tráº¡ng "Constructor khá»•ng lá»“" vá»›i quÃ¡ nhiá»u tham sá»‘.

### CÃ¡ch nÃ³ hoáº¡t Ä‘á»™ng trong code

HÃ£y xem cÃ¡ch chÃºng ta xÃ¢y dá»±ng chiáº¿c Pizza má»™t cÃ¡ch chuyÃªn nghiá»‡p nhÃ©:

```java
Pizza myPizza = new PizzaBuilder()
                    .setSize("Lá»›n")
                    .addCheese()
                    .addPepperoni()
                    .build(); // Cuá»‘i cÃ¹ng má»›i "xuáº¥t xÆ°á»Ÿng" chiáº¿c Pizza!
```

### Táº¡i sao báº¡n láº¡i cáº§n nÃ³?

*   **TÃ­nh linh hoáº¡t:** Báº¡n muá»‘n thÃªm phÃ´ mai? Gá»i `.addCheese()`. KhÃ´ng muá»‘n? Äá»«ng gá»i nÃ³. Ráº¥t Ä‘Æ¡n giáº£n!
*   **Sá»± rÃµ rÃ ng:** Báº¡n khÃ´ng cÃ²n pháº£i nhÃ¬n má»™t dÃ£y `true, false, true` vÃ´ nghÄ©a ná»¯a. Má»—i phÆ°Æ¡ng thá»©c Ä‘á»u cÃ³ tÃªn gá»i rÃµ rÃ ng.
*   **Äá»‘i tÆ°á»£ng báº¥t biáº¿n (Immutable):** Sau khi gá»i `.build()`, chiáº¿c Pizza cá»§a báº¡n Ä‘Ã£ hoÃ n thÃ nh vÃ  khÃ´ng bá»‹ thay Ä‘á»•i lung tung ná»¯a.

**TÃ³m láº¡i:** Builder Pattern giá»‘ng nhÆ° má»™t ngÆ°á»i Ä‘áº§u báº¿p táº­n tá»¥y. Báº¡n chá»‰ viá»‡c báº£o: "Cho tÃ´i Ä‘áº¿ dÃ y, thÃªm phÃ´ mai, Ä‘á»«ng cho hÃ nh", vÃ  ngÆ°á»i Ä‘áº§u báº¿p (Builder) sáº½ láº¯p rÃ¡p má»i thá»© chÃ­nh xÃ¡c cho báº¡n!](#what-is-the-builder-design-pattern) |
| 50 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng bá»™ nhá»› mÃ¡y tÃ­nh giá»‘ng nhÆ° má»™t xÆ°á»Ÿng lÃ m viá»‡c lá»›n. Äá»ƒ giá»¯ cho má»i thá»© ngÄƒn náº¯p, Java chia bá»™ nhá»› thÃ nh hai khu vá»±c riÃªng biá»‡t: **Stack** vÃ  **Heap**.

### 1. Stack: "NgÄƒn xáº¿p" siÃªu tá»‘c
HÃ£y nghÄ© vá» Stack nhÆ° má»™t chá»“ng Ä‘Ä©a. Báº¡n Ä‘áº·t má»™t cÃ¡i Ä‘Ä©a lÃªn trÃªn cÃ¹ng vÃ  cÅ©ng láº¥y ra tá»« trÃªn cÃ¹ng.

*   **NÃ³ chá»©a gÃ¬?** Stack lÆ°u trá»¯ cÃ¡c biáº¿n cá»¥c bá»™ (local variables) vÃ  cÃ¡c lá»‡nh gá»i hÃ m (method calls).
*   **CÃ¡ch hoáº¡t Ä‘á»™ng:** Khi báº¡n gá»i má»™t hÃ m, Java táº¡o má»™t "khung" (frame) má»›i trÃªn Ä‘á»‰nh Stack. Khi hÃ m cháº¡y xong, cÃ¡i khung Ä‘Ã³ bá»‹ "Ä‘Ã¡" ra ngoÃ i ngay láº­p tá»©c.
*   **Äáº·c Ä‘iá»ƒm:**
    *   Cá»±c ká»³ nhanh.
    *   KhÃ´ng gian nhá» háº¹p.
    *   NguyÃªn táº¯c: "VÃ o sau, ra trÆ°á»›c" (LIFO).

### 2. Heap: "Kho chá»©a" khá»•ng lá»“
Náº¿u Stack lÃ  má»™t chá»“ng Ä‘Ä©a nhá», thÃ¬ Heap giá»‘ng nhÆ° má»™t nhÃ  kho rá»™ng thÃªnh thang.

*   **NÃ³ chá»©a gÃ¬?** Táº¥t cáº£ cÃ¡c **Äá»‘i tÆ°á»£ng** (Objects) Ä‘á»u sá»‘ng á»Ÿ Ä‘Ã¢y. DÃ¹ báº¡n táº¡o ra má»™t `String`, má»™t `ArrayList` hay má»™t con `Dog`, chÃºng Ä‘á»u náº±m trong Heap.
*   **CÃ¡ch hoáº¡t Ä‘á»™ng:** Khi báº¡n dÃ¹ng tá»« khÃ³a `new`, Java sáº½ tÃ¬m má»™t chá»— trá»‘ng trong Heap Ä‘á»ƒ Ä‘áº·t Ä‘á»‘i tÆ°á»£ng vÃ o. 
*   **Äáº·c Ä‘iá»ƒm:**
    *   Ráº¥t rá»™ng rÃ£i.
    *   Cháº­m hÆ¡n Stack má»™t chÃºt vÃ¬ pháº£i tÃ¬m chá»— trá»‘ng.
    *   ÄÆ°á»£c dá»n dáº¹p bá»Ÿi "Anh lao cÃ´ng" **Garbage Collector** khi khÃ´ng cÃ²n ai sá»­ dá»¥ng Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ ná»¯a.

---

### Báº£ng so sÃ¡nh nhanh

| Äáº·c Ä‘iá»ƒm | Stack (NgÄƒn xáº¿p) | Heap (Kho chá»©a) |
| :--- | :--- | :--- |
| **Äá»‘i tÆ°á»£ng lÆ°u trá»¯** | CÃ¡c biáº¿n táº¡m thá»i, lá»i gá»i hÃ m. | Táº¥t cáº£ cÃ¡c Objects (Ä‘á»‘i tÆ°á»£ng). |
| **KÃ­ch thÆ°á»›c** | Nhá», cá»‘ Ä‘á»‹nh. | Lá»›n, linh hoáº¡t. |
| **Tá»‘c Ä‘á»™** | Nhanh nhÆ° chá»›p. | Cháº­m hÆ¡n má»™t chÃºt. |
| **Quáº£n lÃ½** | Tá»± Ä‘á»™ng thÃªm/bá»›t khi hÃ m cháº¡y. | Do Garbage Collector dá»n dáº¹p. |

---

### VÃ­ dá»¥ thá»±c táº¿

HÃ£y xem Ä‘oáº¡n code nhá» nÃ y:

```java
public void myMethod() {
    int x = 10;          // Biáº¿n x náº±m á»Ÿ Stack
    Dog myDog = new Dog(); // Biáº¿n myDog á»Ÿ Stack, nhÆ°ng Ä‘á»‘i tÆ°á»£ng Dog náº±m á»Ÿ Heap!
}
```

**Chuyá»‡n gÃ¬ Ä‘ang xáº£y ra?**
1.  Sá»‘ `10` (kiá»ƒu nguyÃªn thá»§y) náº±m gá»n gÃ ng trong **Stack**.
2.  `myDog` thá»±c cháº¥t chá»‰ lÃ  má»™t cÃ¡i "Ä‘iá»u khiá»ƒn tá»« xa" (reference). CÃ¡i Ä‘iá»u khiá»ƒn nÃ y náº±m á»Ÿ **Stack**.
3.  NhÆ°ng con chÃ³ `Dog` thá»±c sá»± (Ä‘á»‘i tÆ°á»£ng vá»›i Ä‘áº§y Ä‘á»§ thuá»™c tÃ­nh) thÃ¬ Ä‘ang tung tÄƒng cháº¡y nháº£y trong **Heap**. CÃ¡i Ä‘iá»u khiá»ƒn á»Ÿ Stack sáº½ "trá»" tá»›i vá»‹ trÃ­ cá»§a con chÃ³ trong Heap.

**Ghi nhá»› náº±m lÃ²ng:** 
*   Biáº¿n cá»¥c bá»™ vÃ  phÆ°Æ¡ng thá»©c? **VÃ o Stack!**
*   Äá»‘i tÆ°á»£ng (Objects)? **VÃ o Heap!**](#what-is-the-difference-between-heap-and-stack-memory) |
| 51 | [Trong tháº¿ giá»›i cá»§a Java, cÃ³ má»™t "anh hÃ¹ng tháº§m láº·ng" luÃ´n Ä‘i dá»n dáº¹p sau khi báº¡n viáº¿t code. Anh áº¥y tÃªn lÃ  **Garbage Collector (Bá»™ thu gom rÃ¡c)**.

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang tá»• chá»©c má»™t bá»¯a tiá»‡c linh Ä‘Ã¬nh (Ä‘Ã³ lÃ  chÆ°Æ¡ng trÃ¬nh Java cá»§a báº¡n). Báº¡n láº¥y Ä‘Ä©a ra, dÃ¹ng chÃºng, rá»“i Ä‘á»ƒ bá»«a bÃ£i trÃªn bÃ n. Náº¿u khÃ´ng ai dá»n dáº¹p, cháº³ng máº¥y chá»‘c nhÃ  báº¡n sáº½ háº¿t chá»— chá»©a Ä‘Ä©a sáº¡ch vÃ  khÃ´ng cÃ²n khÃ´ng gian Ä‘á»ƒ thá»Ÿ ná»¯a!

Trong láº­p trÃ¬nh, "Ä‘Ä©a" chÃ­nh lÃ  cÃ¡c **Object (Äá»‘i tÆ°á»£ng)** vÃ  "nhÃ " chÃ­nh lÃ  bá»™ nhá»› **Heap**.

### 1. Váº¥n Ä‘á»: Bá»™ nhá»› khÃ´ng pháº£i lÃ  vÃ´ táº­n
Má»—i khi báº¡n dÃ¹ng tá»« khÃ³a `new`, Java sáº½ cáº¥p cho báº¡n má»™t khoáº£ng khÃ´ng gian trong bá»™ nhá»› Heap.
```java
Dog myDog = new Dog(); // Má»™t chÃº chÃ³ má»›i vá»«a chiáº¿m chá»— trong bá»™ nhá»›!
```
NhÆ°ng chuyá»‡n gÃ¬ xáº£y ra náº¿u báº¡n khÃ´ng cáº§n chÃº chÃ³ Ä‘Ã³ ná»¯a? á» cÃ¡c ngÃ´n ngá»¯ cÅ© nhÆ° C++, báº¡n pháº£i tá»± tay "tiÃªu há»§y" nÃ³. Náº¿u quÃªn? MÃ¡y tÃ­nh cá»§a báº¡n sáº½ háº¿t sáº¡ch bá»™ nhá»› vÃ  bá»‹ treo (lá»—i Memory Leak).

### 2. Giáº£i phÃ¡p: Garbage Collection (GC) lÃ  gÃ¬?
**Garbage Collection** lÃ  quÃ¡ trÃ¬nh tá»± Ä‘á»™ng cá»§a Java nháº±m tÃ¬m kiáº¿m vÃ  tiÃªu há»§y cÃ¡c Ä‘á»‘i tÆ°á»£ng mÃ  chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n khÃ´ng cÃ²n dÃ¹ng tá»›i ná»¯a. 

NÃ³ hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ y:
*   **BÆ°á»›c 1: ÄÃ¡nh dáº¥u (Marking).** GC Ä‘i dáº¡o quanh bá»™ nhá»› vÃ  xem Ä‘á»‘i tÆ°á»£ng nÃ o váº«n cÃ²n "ngÆ°á»i thÃ¢n" (biáº¿n tham chiáº¿u) quan tÃ¢m Ä‘áº¿n.
*   **BÆ°á»›c 2: QuÃ©t sáº¡ch (Sweeping).** Nhá»¯ng Ä‘á»‘i tÆ°á»£ng má»“ cÃ´i, khÃ´ng cÃ²n ai trá» tá»›i ná»¯a, sáº½ bá»‹ coi lÃ  "rÃ¡c". GC sáº½ tá»‘ng khá»© chÃºng Ä‘i Ä‘á»ƒ láº¥y láº¡i chá»— trá»‘ng.

### 3. Khi nÃ o má»™t Ä‘á»‘i tÆ°á»£ng trá»Ÿ thÃ nh "rÃ¡c"?
Má»™t Ä‘á»‘i tÆ°á»£ng sáº½ lá»t vÃ o táº§m ngáº¯m cá»§a GC khi nÃ³ khÃ´ng cÃ²n Ä‘Æ°á»ng dáº«n nÃ o káº¿t ná»‘i tá»›i chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y.

**VÃ­ dá»¥ 1: GÃ¡n báº±ng null**
```java
Dog fido = new Dog();
fido = null; // ChÃº chÃ³ Dog ban Ä‘áº§u giá» Ä‘Ã£ thÃ nh "rÃ¡c" vÃ¬ khÃ´ng ai tÃ¬m tháº¥y nÃ³ ná»¯a.
```

**VÃ­ dá»¥ 2: Thay Ä‘á»•i tham chiáº¿u**
```java
Dog d1 = new Dog();
Dog d2 = new Dog();
d1 = d2; // Äá»‘i tÆ°á»£ng Dog Ä‘áº§u tiÃªn giá» lÃ  rÃ¡c. d1 vÃ  d2 giá» cÃ¹ng nhÃ¬n vá» chÃº chÃ³ thá»© hai.
```

### 4. Táº¡i sao báº¡n nÃªn yÃªu quÃ½ GC?
*   **An toÃ n:** Báº¡n khÃ´ng cáº§n lo láº¯ng vá» viá»‡c quÃªn giáº£i phÃ³ng bá»™ nhá»›.
*   **Táº­p trung vÃ o logic:** Báº¡n chá»‰ viá»‡c táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng vÃ  lÃ m chÃºng hoáº¡t Ä‘á»™ng. Viá»‡c dá»n dáº¹p Ä‘Ã£ cÃ³ Java lo.

**LÆ°u Ã½ nhá» tá»« chuyÃªn gia:** 
Báº¡n khÃ´ng thá»ƒ Ã©p Java Ä‘i dá»n rÃ¡c ngay láº­p tá»©c. Báº¡n cÃ³ thá»ƒ gá»i `System.gc()`, nhÆ°ng Ä‘Ã³ chá»‰ giá»‘ng nhÆ° má»™t lá»i "gá»£i Ã½" nháº¹ nhÃ ng. Java sáº½ tá»± quyáº¿t Ä‘á»‹nh khi nÃ o lÃ  thá»i Ä‘iá»ƒm thÃ­ch há»£p nháº¥t Ä‘á»ƒ hÃ nh Ä‘á»™ng](#what-is-garbage-collection-in-java) |
| 52 | [Trong tháº¿ giá»›i Java, chÃºng ta cÃ³ má»™t "biá»‡t Ä‘á»™i dá»n dáº¹p" siÃªu Ä‘áº³ng gá»i lÃ  Garbage Collectors (GC). Má»—i thÃ nh viÃªn trong biá»‡t Ä‘á»™i nÃ y cÃ³ má»™t phong cÃ¡ch lÃ m viá»‡c riÃªng. HÃ£y cÃ¹ng lÃ m quen vá»›i há» nhÃ©!

### 1. Serial GC (NgÆ°á»i lÃ m viá»‡c Ä‘á»™c láº­p)
ÄÃ¢y lÃ  kiá»ƒu Ä‘Æ¡n giáº£n nháº¥t. HÃ£y tÆ°á»Ÿng tÆ°á»£ng chá»‰ cÃ³ duy nháº¥t má»™t nhÃ¢n viÃªn vá»‡ sinh Ä‘i gom rÃ¡c.
*   **CÃ¡ch hoáº¡t Ä‘á»™ng:** Khi lÃ m viá»‡c, nÃ³ sáº½ táº¡m dá»«ng má»i hoáº¡t Ä‘á»™ng khÃ¡c cá»§a chÆ°Æ¡ng trÃ¬nh (hiá»‡n tÆ°á»£ng nÃ y gá»i lÃ  "Stop-the-world").
*   **DÃ¹ng khi nÃ o?** Ráº¥t tá»‘t cho cÃ¡c á»©ng dá»¥ng nhá», cháº¡y trÃªn mÃ¡y tÃ­nh cÃ¡ nhÃ¢n hoáº·c mÃ´i trÆ°á»ng khÃ´ng cáº§n tá»‘c Ä‘á»™ quÃ¡ cao.
*   **Lá»‡nh kÃ­ch hoáº¡t:** `-XX:+UseSerialGC`

### 2. Parallel GC (Biá»‡t Ä‘á»™i cÆ¡ báº¯p)
CÃ²n Ä‘Æ°á»£c gá»i lÃ  Throughput Collector. Thay vÃ¬ má»™t ngÆ°á»i, chÃºng ta cÃ³ má»™t nhÃ³m nhÃ¢n viÃªn cÃ¹ng lÃ m viá»‡c má»™t lÃºc.
*   **CÃ¡ch hoáº¡t Ä‘á»™ng:** NÃ³ sá»­ dá»¥ng nhiá»u luá»“ng (threads) Ä‘á»ƒ dá»n rÃ¡c nhanh hÆ¡n. Tuy nhiÃªn, nÃ³ váº«n khiáº¿n chÆ°Æ¡ng trÃ¬nh pháº£i táº¡m dá»«ng khi Ä‘ang dá»n dáº¹p.
*   **DÃ¹ng khi nÃ o?** PhÃ¹ há»£p vá»›i cÃ¡c á»©ng dá»¥ng xá»­ lÃ½ dá»¯ liá»‡u lá»›n, nÆ¡i mÃ  hiá»‡u suáº¥t tá»•ng thá»ƒ quan trá»ng hÆ¡n viá»‡c thá»‰nh thoáº£ng bá»‹ khá»±ng láº¡i má»™t chÃºt.
*   **Lá»‡nh kÃ­ch hoáº¡t:** `-XX:+UseParallelGC`

### 3. CMS - Concurrent Mark Sweep (NgÆ°á»i phá»¥c vá»¥ Ã¢m tháº§m)
Má»¥c tiÃªu cá»§a CMS lÃ  giáº£m thiá»ƒu thá»i gian "Ä‘á»©ng hÃ¬nh" cá»§a chÆ°Æ¡ng trÃ¬nh.
*   **CÃ¡ch hoáº¡t Ä‘á»™ng:** NÃ³ cá»‘ gáº¯ng dá»n rÃ¡c cÃ¹ng lÃºc vá»›i khi chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y. NÃ³ chá»‰ dá»«ng chÆ°Æ¡ng trÃ¬nh trong nhá»¯ng khoáº£ng thá»i gian cá»±c ngáº¯n.
*   **LÆ°u Ã½:** Hiá»‡n nay CMS Ä‘Ã£ bá»‹ coi lÃ  cÅ© (deprecated) vÃ  dáº§n thay tháº¿ bá»Ÿi G1.
*   **Lá»‡nh kÃ­ch hoáº¡t:** `-XX:+UseConcMarkSweepGC`

### 4. G1 - Garbage First (NgÆ°á»i quáº£n lÃ½ thÃ´ng minh)
ÄÃ¢y lÃ  "ngÃ´i sao" hiá»‡n Ä‘áº¡i, Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ thay tháº¿ CMS cho cÃ¡c há»‡ thá»‘ng cÃ³ bá»™ nhá»› RAM lá»›n.
*   **CÃ¡ch hoáº¡t Ä‘á»™ng:** Thay vÃ¬ nhÃ¬n bá»™ nhá»› nhÆ° má»™t khá»‘i lá»›n, G1 chia bá»™ nhá»› thÃ nh nhiá»u vÃ¹ng nhá». NÃ³ sáº½ Æ°u tiÃªn dá»n dáº¹p nhá»¯ng vÃ¹ng nÃ o "chá»©a nhiá»u rÃ¡c nháº¥t" trÆ°á»›c (Ä‘Ã³ lÃ  lÃ½ do nÃ³ cÃ³ tÃªn lÃ  Garbage First).
*   **DÃ¹ng khi nÃ o?** ÄÃ¢y lÃ  lá»±a chá»n máº·c Ä‘á»‹nh tá»« Java 9 trá»Ÿ Ä‘i. Cá»±c ká»³ á»•n Ä‘á»‹nh vÃ  hiá»‡u quáº£.
*   **Lá»‡nh kÃ­ch hoáº¡t:** `-XX:+UseG1GC`

### 5. ZGC (SiÃªu nhÃ¢n tá»‘c Ä‘á»™)
Má»™t tÃ¢n binh má»›i xuáº¥t hiá»‡n vá»›i sá»©c máº¡nh Ä‘Ã¡ng kinh ngáº¡c.
*   **CÃ¡ch hoáº¡t Ä‘á»™ng:** ZGC cÃ³ thá»ƒ xá»­ lÃ½ cÃ¡c bá»™ nhá»› khá»•ng lá»“ (lÃªn Ä‘áº¿n hÃ ng Terabyte) mÃ  thá»i gian táº¡m dá»«ng chÆ°Æ¡ng trÃ¬nh khÃ´ng quÃ¡ 10 miligiÃ¢y!
*   **DÃ¹ng khi nÃ o?** DÃ nh cho cÃ¡c á»©ng dá»¥ng cá»±c lá»›n, Ä‘Ã²i há»i Ä‘á»™ trá»… cá»±c tháº¥p.
*   **Lá»‡nh kÃ­ch hoáº¡t:** `-XX:+UseZGC`

**TÃ³m láº¡i:**
*   MÃ¡y yáº¿u, á»©ng dá»¥ng nhá»? DÃ¹ng **Serial**.
*   Cáº§n xá»­ lÃ½ dá»¯ liá»‡u trÃ¢u bÃ²? DÃ¹ng **Parallel**.
*   MÃ¡y chá»§ hiá»‡n Ä‘áº¡i, Ä‘a nÄƒng? Cá»© Ä‘á»ƒ **G1** lo!](#what-are-the-different-types-of-garbage-collectors-in-java) |
| 53 | [Báº¡n Ä‘Ã£ bao giá» tháº¯c máº¯c táº¡i sao chÃºng ta láº¡i cÃ³ hai cÃ¡ch khÃ¡c nhau Ä‘á»ƒ táº¡m dá»«ng má»™t Thread (luá»“ng) chÆ°a? ÄÃ³ lÃ  `wait()` vÃ  `sleep()`. NhÃ¬n thÃ¬ cÃ³ váº» giá»‘ng nhau Ä‘áº¥y, nhÆ°ng thá»±c cháº¥t chÃºng lÃ m viá»‡c ráº¥t khÃ¡c nhau!

HÃ£y cÃ¹ng khÃ¡m phÃ¡ sá»± khÃ¡c biá»‡t nÃ y qua má»™t gÃ³c nhÃ¬n Ä‘Æ¡n giáº£n nhÃ©.

### 1. PhÆ°Æ¡ng thá»©c sleep() - "TÃ´i Ä‘i ngá»§ má»™t chÃºt Ä‘Ã¢y!"

HÃ£y tÆ°á»Ÿng tÆ°á»£ng má»™t Thread Ä‘ang cháº¡y. Khi báº¡n gá»i `Thread.sleep(1000)`, nÃ³ sáº½ nÃ³i: *"TÃ´i má»‡t rá»“i, tÃ´i sáº½ Ä‘i ngá»§ Ä‘Ãºng 1 giÃ¢y. Äá»«ng ai lÃ m phiá»n tÃ´i nhÃ©!"*

*   **NÃ³ á»Ÿ Ä‘Ã¢u?** Náº±m trong lá»›p `Thread`.
*   **NÃ³ lÃ m gÃ¬?** NÃ³ báº¯t Thread hiá»‡n táº¡i dá»«ng láº¡i trong má»™t khoáº£ng thá»i gian nháº¥t Ä‘á»‹nh.
*   **Giá»¯ cháº·t chÃ¬a khÃ³a:** ÄÃ¢y lÃ  Ä‘iá»ƒm quan trá»ng! Náº¿u Thread Ä‘Ã³ Ä‘ang giá»¯ má»™t "chiáº¿c chÃ¬a khÃ³a" (chÃ­nh lÃ  **Lock** trong khá»‘i `synchronized`), nÃ³ sáº½ **khÃ´ng nhÆ°á»ng** chÃ¬a khÃ³a Ä‘Ã³ cho ai cáº£. NÃ³ cáº§m chÃ¬a khÃ³a Ä‘i ngá»§ luÃ´n. Nhá»¯ng Thread khÃ¡c muá»‘n vÃ o phÃ²ng cÅ©ng pháº£i Ä‘á»©ng ngoÃ i Ä‘á»£i nÃ³ thá»©c dáº­y.

### 2. PhÆ°Æ¡ng thá»©c wait() - "TÃ´i sáº½ Ä‘á»£i cho Ä‘áº¿n khi cÃ³ ai Ä‘Ã³ gá»i."

PhÆ°Æ¡ng thá»©c `wait()` láº¡i mang má»™t Ã½ nghÄ©a hoÃ n toÃ n khÃ¡c. NÃ³ giá»‘ng nhÆ° viá»‡c báº¡n Ä‘ang á»Ÿ trong má»™t phÃ²ng há»p vÃ  nÃ³i: *"TÃ´i chÆ°a lÃ m tiáº¿p Ä‘Æ°á»£c vÃ¬ Ä‘ang thiáº¿u tÃ i liá»‡u, tÃ´i sáº½ Ä‘á»©ng sang má»™t bÃªn Ä‘á»£i. Khi nÃ o cÃ³ tÃ i liá»‡u thÃ¬ gá»i tÃ´i nhÃ©!"*

*   **NÃ³ á»Ÿ Ä‘Ã¢u?** Náº±m trong lá»›p `Object` (má»i Ä‘á»‘i tÆ°á»£ng Java Ä‘á»u cÃ³ nÃ³).
*   **NÃ³ lÃ m gÃ¬?** NÃ³ khiáº¿n Thread rÆ¡i vÃ o tráº¡ng thÃ¡i chá» Ä‘á»£i cho Ä‘áº¿n khi má»™t Thread khÃ¡c gá»i `notify()` hoáº·c `notifyAll()`.
*   **BuÃ´ng chÃ¬a khÃ³a ra:** Khi báº¡n gá»i `wait()`, Thread sáº½ **nhÆ°á»ng láº¡i chÃ¬a khÃ³a** (giáº£i phÃ³ng **Lock**). Nhá» Ä‘Ã³, cÃ¡c Thread khÃ¡c cÃ³ thá»ƒ vÃ o phÃ²ng vÃ  lÃ m viá»‡c cá»§a chÃºng.

---

### Báº£ng so sÃ¡nh nhanh

| Äáº·c Ä‘iá»ƒm | sleep() | wait() |
| :--- | :--- | :--- |
| **Lá»›p sá»Ÿ há»¯u** | `Thread` | `Object` |
| **Giáº£i phÃ³ng Lock?** | **KhÃ´ng.** NÃ³ giá»¯ cháº·t chÃ¬a khÃ³a. | **CÃ³.** NÃ³ nhÆ°á»ng láº¡i chÃ¬a khÃ³a. |
| **CÃ¡ch thá»©c dáº­y** | Háº¿t thá»i gian lÃ  tá»± dáº­y. | Pháº£i cÃ³ ai Ä‘Ã³ gá»i báº±ng `notify()`. |
| **NÆ¡i sá»­ dá»¥ng** | CÃ³ thá»ƒ gá»i á»Ÿ báº¥t cá»© Ä‘Ã¢u. | Chá»‰ Ä‘Æ°á»£c gá»i bÃªn trong khá»‘i `synchronized`. |

---

### VÃ­ dá»¥ báº±ng mÃ£ nguá»“n (Code)

HÃ£y xem sá»± khÃ¡c biá»‡t trong cÃ¡ch chÃºng ta viáº¿t mÃ£:

**Vá»›i sleep():**
```java
synchronized (lock) {
    // Thread Ä‘i ngá»§ nhÆ°ng váº«n giá»¯ 'lock'
    Thread.sleep(2000); 
    // KhÃ´ng ai vÃ o Ä‘Æ°á»£c khá»‘i nÃ y cho Ä‘áº¿n khi 2 giÃ¢y trÃ´i qua
}
```

**Vá»›i wait():**
```java
synchronized (lock) {
    // Thread nhÆ°á»ng 'lock' vÃ  Ä‘á»©ng Ä‘á»£i
    lock.wait(); 
    // BÃ¢y giá» Thread khÃ¡c cÃ³ thá»ƒ láº¥y 'lock' vÃ  lÃ m viá»‡c cá»§a nÃ³
}
```

### TÃ³m láº¡i lÃ :
*   DÃ¹ng **`sleep()`** khi báº¡n chá»‰ muá»‘n táº¡m dá»«ng cÃ´ng viá»‡c trong má»™t khoáº£ng thá»i gian ngáº¯n (nhÆ° táº¡o hiá»‡u á»©ng chá»).
*   DÃ¹ng **`wait()`** khi báº¡n muá»‘n cÃ¡c Thread nÃ³i chuyá»‡n vá»›i nhau (Ä‘á»“ng bá»™ hÃ³a), chá» má»™t Ä‘iá»u kiá»‡n nÃ o Ä‘Ã³ thay Ä‘á»•i Ä‘á»ƒ tiáº¿p tá»¥c lÃ m viá»‡c.](#what-is-the-difference-between-wait-and-sleep-methods) |
| 54 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n lÃ  má»™t ngÆ°á»i quáº£n lÃ½ khÃ¡ch sáº¡n. CÃ¡c luá»“ng (threads) giá»‘ng nhÆ° nhá»¯ng vá»‹ khÃ¡ch Ä‘ang ngá»§ trong phÃ²ng chá». Khi cÃ³ Ä‘iá»u gÃ¬ Ä‘Ã³ thay Ä‘á»•i, báº¡n cáº§n Ä‘Ã¡nh thá»©c há» dáº­y. NhÆ°ng báº¡n nÃªn gá»i má»™t ngÆ°á»i hay gá»i táº¥t cáº£? ÄÃ³ chÃ­nh lÃ  sá»± khÃ¡c biá»‡t giá»¯a `notify()` vÃ  `notifyAll()`.

### 1. notify() - "Gá»i má»™t ngÆ°á»i may máº¯n"

Khi báº¡n dÃ¹ng `notify()`, mÃ¡y áº£o Java (JVM) sáº½ chá»n **duy nháº¥t má»™t** luá»“ng Ä‘ang Ä‘á»£i trong "hÃ ng chá»" (wait set) vÃ  Ä‘Ã¡nh thá»©c nÃ³ dáº­y.

*   **CÆ¡ cháº¿:** Chá»‰ má»™t luá»“ng Ä‘Æ°á»£c chá»n. Báº¡n khÃ´ng Ä‘Æ°á»£c quyá»n chá»n Ä‘Ã³ lÃ  luá»“ng nÃ o; Java sáº½ tá»± quyáº¿t Ä‘á»‹nh.
*   **Æ¯u Ä‘iá»ƒm:** Tiáº¿t kiá»‡m nÄƒng lÆ°á»£ng. VÃ¬ chá»‰ cÃ³ má»™t luá»“ng thá»©c dáº­y, nÃ³ sáº½ khÃ´ng pháº£i tranh giÃ nh quyá»n cháº¡y vá»›i ai khÃ¡c.
*   **Rá»§i ro:** Ráº¥t nguy hiá»ƒm! Náº¿u luá»“ng Ä‘Æ°á»£c Ä‘Ã¡nh thá»©c láº¡i khÃ´ng thá»ƒ tiáº¿p tá»¥c cÃ´ng viá»‡c (vÃ¬ Ä‘iá»u kiá»‡n nÃ³ cáº§n váº«n chÆ°a thá»a mÃ£n), nÃ³ sáº½ láº¡i Ä‘i ngá»§. Trong khi Ä‘Ã³, cÃ¡c luá»“ng khÃ¡c váº«n Ä‘ang ngá»§ say vÃ  cháº³ng ai lÃ m viá»‡c cáº£. ToÃ n bá»™ chÆ°Æ¡ng trÃ¬nh cÃ³ thá»ƒ bá»‹ "treo".

### 2. notifyAll() - "ÄÃ¡nh thá»©c cáº£ lÃ ng"

Khi báº¡n dÃ¹ng `notifyAll()`, JVM sáº½ Ä‘Ã¡nh thá»©c **táº¥t cáº£** cÃ¡c luá»“ng Ä‘ang Ä‘á»£i Ä‘á»‘i tÆ°á»£ng Ä‘Ã³.

*   **CÆ¡ cháº¿:** Má»i luá»“ng Ä‘ang ngá»§ Ä‘á»u báº­t dáº­y. ChÃºng sáº½ cÃ¹ng nhau tranh giÃ nh "chiáº¿c chÃ¬a khÃ³a" (monitor) Ä‘á»ƒ Ä‘Æ°á»£c cháº¡y tiáº¿p.
*   **Æ¯u Ä‘iá»ƒm:** Cá»±c ká»³ an toÃ n. Äáº£m báº£o ráº±ng Ã­t nháº¥t sáº½ cÃ³ má»™t luá»“ng cÃ³ thá»ƒ lÃ m viá»‡c Ä‘Æ°á»£c, vÃ¬ chÃºng ta Ä‘Ã£ Ä‘Ã¡nh thá»©c táº¥t cáº£ má»i ngÆ°á»i.
*   **NhÆ°á»£c Ä‘iá»ƒm:** HÆ¡i tá»‘n tÃ i nguyÃªn má»™t chÃºt vÃ¬ nhiá»u luá»“ng cÃ¹ng thá»©c dáº­y má»™t lÃºc, nhÆ°ng thÆ°á»ng thÃ¬ sá»± Ä‘Ã¡nh Ä‘á»•i nÃ y lÃ  xá»©ng Ä‘Ã¡ng Ä‘á»ƒ chÆ°Æ¡ng trÃ¬nh cháº¡y á»•n Ä‘á»‹nh.

### Báº£ng so sÃ¡nh nhanh

| Äáº·c Ä‘iá»ƒm | notify() | notifyAll() |
| :--- | :--- | :--- |
| **Sá»‘ luá»“ng thá»©c dáº­y** | Chá»‰ 1 luá»“ng duy nháº¥t. | Táº¥t cáº£ cÃ¡c luá»“ng Ä‘ang Ä‘á»£i. |
| **TÃ­nh an toÃ n** | Tháº¥p (dá»… gÃ¢y lá»—i treo mÃ¡y). | Cao (khuyÃªn dÃ¹ng). |
| **Khi nÃ o dÃ¹ng?** | Khi cÃ¡c luá»“ng lÃ m viá»‡c giá»‘ng há»‡t nhau. | Khi cÃ³ nhiá»u loáº¡i luá»“ng lÃ m viá»‡c khÃ¡c nhau. |

### Lá»i khuyÃªn tá»« chuyÃªn gia "Head First":

> "Náº¿u báº¡n khÃ´ng cháº¯c cháº¯n mÃ¬nh nÃªn dÃ¹ng cÃ¡i nÃ o, hÃ£y luÃ´n chá»n **`notifyAll()`**. NÃ³ giÃºp báº¡n trÃ¡nh Ä‘Æ°á»£c nhá»¯ng lá»—i logic cá»±c ká»³ khÃ³ tÃ¬m khi cÃ¡c luá»“ng cá»© mÃ£i ngá»§ quÃªn mÃ  khÃ´ng bao giá» thá»©c dáº­y!"

### VÃ­ dá»¥ báº±ng mÃ£ nguá»“n:

```java
synchronized(obj) {
    // Thiáº¿t láº­p Ä‘iá»u kiá»‡n thay Ä‘á»•i
    conditionChanged = true;
    
    // ÄÃ¡nh thá»©c táº¥t cáº£ cho cháº¯c Äƒn!
    obj.notifyAll(); 
}
```

**Ghi nhá»›:** Cáº£ hai phÆ°Æ¡ng thá»©c nÃ y Ä‘á»u pháº£i Ä‘Æ°á»£c gá»i bÃªn trong má»™t khá»‘i `synchronized`, náº¿u khÃ´ng Java sáº½ nÃ©m ra má»™t ngoáº¡i lá»‡ ngay láº­p tá»©c](#what-is-the-difference-between-notify-and-notifyall) |
| 55 | [### Lá»›p Báº¥t Biáº¿n (Immutable Class) lÃ  gÃ¬ nhá»‰?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t chiáº¿c há»™p Ä‘á»±ng káº¹o. Náº¿u chiáº¿c há»™p Ä‘Ã³ lÃ  **báº¥t biáº¿n**, Ä‘iá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ  má»™t khi báº¡n Ä‘Ã£ bá» káº¹o vÃ o vÃ  Ä‘Ã³ng náº¯p láº¡i, khÃ´ng ai (ká»ƒ cáº£ báº¡n) cÃ³ thá»ƒ thay Ä‘á»•i sá»‘ lÆ°á»£ng hay loáº¡i káº¹o bÃªn trong Ä‘Ã³ Ä‘Æ°á»£c ná»¯a. Muá»‘n cÃ³ káº¹o khÃ¡c Æ°? Báº¡n buá»™c pháº£i táº¡o má»™t chiáº¿c há»™p má»›i toanh!

Trong Java, má»™t **Immutable Class** cÅ©ng váº­y. Khi báº¡n Ä‘Ã£ táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng (object) tá»« lá»›p nÃ y, tráº¡ng thÃ¡i cá»§a nÃ³ (cÃ¡c giÃ¡ trá»‹ biáº¿n) sáº½ giá»¯ nguyÃªn mÃ£i mÃ£i. Báº¡n khÃ´ng thá»ƒ sá»­a, khÃ´ng thá»ƒ xÃ³a, chá»‰ cÃ³ thá»ƒ Ä‘á»©ng nhÃ¬n thÃ´i!

VÃ­ dá»¥ Ä‘iá»ƒn hÃ¬nh nháº¥t chÃ­nh lÃ  lá»›p `String` mÃ  báº¡n váº«n dÃ¹ng hÃ ng ngÃ y Ä‘áº¥y.

---

### Táº¡i sao chÃºng ta láº¡i cáº§n nÃ³?

1.  **Cá»±c ká»³ an toÃ n:** Báº¡n khÃ´ng lo bá»‹ "ai Ä‘Ã³" vÃ´ tÃ¬nh thay Ä‘á»•i dá»¯ liá»‡u cháº¡y lung tung trong chÆ°Æ¡ng trÃ¬nh.
2.  **DÃ¹ng chung thoáº£i mÃ¡i:** VÃ¬ nÃ³ khÃ´ng bao giá» thay Ä‘á»•i, nÃªn nhiá»u pháº§n cá»§a chÆ°Æ¡ng trÃ¬nh cÃ³ thá»ƒ dÃ¹ng chung má»™t Ä‘á»‘i tÆ°á»£ng mÃ  khÃ´ng sá»£ bá»‹ há»ng.
3.  **Tuyá»‡t vá»i cho Ä‘a luá»“ng (Thread-safe):** Báº¡n khÃ´ng cáº§n lo láº¯ng vá» viá»‡c nhiá»u "anh cÃ´ng nhÃ¢n" (thread) cÃ¹ng nháº£y vÃ o sá»­a má»™t mÃ³n Ä‘á»“ cÃ¹ng lÃºc.

---

### 5 BÆ°á»›c Ä‘á»ƒ táº¡o ra má»™t Lá»›p Báº¥t Biáº¿n "xá»‹n"

Äá»ƒ táº¡o ra má»™t lá»›p mÃ  khÃ´ng ai cÃ³ thá»ƒ "Ä‘á»¥ng cháº¡m" vÃ o Ä‘Æ°á»£c, báº¡n cáº§n tuÃ¢n thá»§ 5 quy táº¯c vÃ ng sau Ä‘Ã¢y:

1.  **Gáº¯n nhÃ£n `final` cho lá»›p:** Äá»ƒ khÃ´ng ai cÃ³ thá»ƒ káº¿ hoáº¡ch (extends) vÃ  "phÃ¡ hoáº¡i" cÃ¡c phÆ°Æ¡ng thá»©c cá»§a báº¡n.
2.  **Äá»ƒ cÃ¡c biáº¿n lÃ  `private`:** KhÃ´ng cho phÃ©p truy cáº­p trá»±c tiáº¿p tá»« bÃªn ngoÃ i. Báº£o máº­t lÃ  trÃªn háº¿t!
3.  **Gáº¯n nhÃ£n `final` cho cÃ¡c biáº¿n:** Äá»ƒ Ä‘áº£m báº£o giÃ¡ trá»‹ chá»‰ Ä‘Æ°á»£c gÃ¡n má»™t láº§n duy nháº¥t.
4.  **KhÃ´ng táº¡o hÃ m "Setter":** Äá»«ng cung cáº¥p cÃ¡c hÃ m kiá»ƒu `setAge()` hay `setName()`. KhÃ´ng cÃ³ setter thÃ¬ khÃ´ng cÃ³ thay Ä‘á»•i!
5.  **Cáº©n tháº­n vá»›i cÃ¡c Ä‘á»‘i tÆ°á»£ng thay Ä‘á»•i Ä‘Æ°á»£c (Mutable Objects):** Náº¿u trong lá»›p cÃ³ chá»©a cÃ¡c Ä‘á»‘i tÆ°á»£ng nhÆ° `List` hay `Date`, Ä‘á»«ng tráº£ vá» trá»±c tiáº¿p Ä‘á»‘i tÆ°á»£ng gá»‘c. HÃ£y tráº£ vá» má»™t báº£n sao (clone) cá»§a nÃ³.

---

### HÃ£y xem vÃ­ dá»¥ thá»±c táº¿ nhÃ©!

DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch chÃºng ta táº¡o ra má»™t lá»›p `Student` báº¥t biáº¿n:

```java
import java.util.Date;

// BÆ°á»›c 1: Khai bÃ¡o class lÃ  final
public final class Student {
    
    // BÆ°á»›c 2 & 3: Biáº¿n private vÃ  final
    private final String name;
    private final int id;
    private final Date joiningDate;

    // Khá»Ÿi táº¡o giÃ¡ trá»‹ thÃ´ng qua Constructor
    public Student(String name, int id, Date joiningDate) {
        this.name = name;
        this.id = id;
        // BÆ°á»›c 5: Táº¡o báº£n sao cho Ä‘á»‘i tÆ°á»£ng Date (vÃ¬ Date cÃ³ thá»ƒ bá»‹ sá»­a)
        this.joiningDate = new Date(joiningDate.getTime());
    }

    // BÆ°á»›c 4: Chá»‰ cÃ³ Getter, khÃ´ng cÃ³ Setter
    public String getName() {
        return name;
    }

    public int getId() {
        return id;
    }

    public Date getJoiningDate() {
        // BÆ°á»›c 5: Tráº£ vá» báº£n sao, khÃ´ng tráº£ vá» báº£n gá»‘c!
        return new Date(joiningDate.getTime());
    }
}
```

**Báº¡n tháº¥y Ä‘áº¥y:**
*   ChÃºng ta khÃ³a cháº·t cÃ¡i lá»›p láº¡i báº±ng `final`.
*   Dá»¯ liá»‡u Ä‘Æ°á»£c náº¡p vÃ o má»™t láº§n lÃºc má»›i sinh ra (Constructor) vÃ  náº±m im á»Ÿ Ä‘Ã³.
*   Náº¿u ai Ä‘Ã³ muá»‘n láº¥y ngÃ y nháº­p há»c (`joiningDate`), mÃ¬nh Ä‘Æ°a cho há» má»™t báº£n copy. Há» cÃ³ lÃ m há»ng báº£n copy Ä‘Ã³ thÃ¬ báº£n gá»‘c cá»§a mÃ¬nh váº«n an toÃ n](#what-is-an-immutable-class-and-how-to-create-one) |
| 56 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang lÃ m viá»‡c vá»›i nhá»¯ng chuá»—i vÄƒn báº£n (String) trong Java. CÃ³ ba "nhÃ¢n váº­t" chÃ­nh mÃ  báº¡n cáº§n lÃ m quen: **String**, **StringBuilder**, vÃ  **StringBuffer**. DÃ¹ Ä‘á»u dÃ¹ng Ä‘á»ƒ xá»­ lÃ½ vÄƒn báº£n, nhÆ°ng má»—i anh chÃ ng láº¡i cÃ³ má»™t tÃ­nh cÃ¡ch riÃªng biá»‡t Ä‘áº¥y!

### 1. String: "ChÃ ng trai báº¥t biáº¿n"

Trong Java, `String` lÃ  **immutable** (khÃ´ng thá»ƒ thay Ä‘á»•i). 

HÃ£y nghÄ© vá» má»™t hÃ²n Ä‘Ã¡ Ä‘Ã£ Ä‘Æ°á»£c kháº¯c chá»¯ lÃªn. Náº¿u báº¡n muá»‘n thay Ä‘á»•i ná»™i dung, báº¡n khÃ´ng thá»ƒ táº©y xÃ³a hÃ²n Ä‘Ã¡ cÅ©. Thay vÃ o Ä‘Ã³, báº¡n pháº£i láº¥y má»™t hÃ²n Ä‘Ã¡ hoÃ n toÃ n má»›i vÃ  kháº¯c láº¡i tá»« Ä‘áº§u.

```java
String s = "Hello";
s = s + " World"; 
```
Khi báº¡n cháº¡y Ä‘oáº¡n code trÃªn, Java khÃ´ng há» sá»­a chá»¯ "World" vÃ o Ä‘uÃ´i cá»§a "Hello". Thay vÃ o Ä‘Ã³, nÃ³ táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng String thá»© ba hoÃ n toÃ n má»›i lÃ  "Hello World" vÃ  vá»©t bá» hai cÃ¡i cÅ© Ä‘i. 

*   **DÃ¹ng khi nÃ o?** Khi báº¡n cÃ³ nhá»¯ng Ä‘oáº¡n vÄƒn báº£n Ã­t thay Ä‘á»•i.
*   **Äiá»ƒm yáº¿u:** Náº¿u báº¡n ná»‘i chuá»—i hÃ ng ngÃ n láº§n trong vÃ²ng láº·p, bá»™ nhá»› cá»§a báº¡n sáº½ Ä‘áº§y rÃ¡c vÃ¬ quÃ¡ nhiá»u Ä‘á»‘i tÆ°á»£ng táº¡m thá»i Ä‘Æ°á»£c táº¡o ra.

---

### 2. StringBuilder: "Thá»£ xÃ¢y nhanh nháº¹n"

KhÃ¡c vá»›i String, `StringBuilder` lÃ  **mutable** (cÃ³ thá»ƒ thay Ä‘á»•i). NÃ³ giá»‘ng nhÆ° má»™t chiáº¿c báº£ng tráº¯ng. Báº¡n cÃ³ thá»ƒ viáº¿t lÃªn, xÃ³a Ä‘i, hoáº·c chÃ¨n thÃªm chá»¯ vÃ o mÃ  khÃ´ng cáº§n pháº£i mua báº£ng má»›i.

```java
StringBuilder sb = new StringBuilder("Hello");
sb.append(" World"); // Thay Ä‘á»•i trá»±c tiáº¿p trÃªn chÃ­nh nÃ³
```

*   **Æ¯u Ä‘iá»ƒm:** Cá»±c ká»³ nhanh! NÃ³ khÃ´ng táº¡o ra Ä‘á»‘i tÆ°á»£ng má»›i má»—i khi báº¡n thay Ä‘á»•i ná»™i dung.
*   **DÃ¹ng khi nÃ o?** Khi báº¡n cáº§n cá»™ng dá»“n, sá»­a Ä‘á»•i chuá»—i ráº¥t nhiá»u láº§n (vÃ­ dá»¥: trong vÃ²ng láº·p `for`).
*   **LÆ°u Ã½:** NÃ³ khÃ´ng "an toÃ n" náº¿u cÃ³ nhiá»u luá»“ng (Thread) cÃ¹ng nháº£y vÃ o xÃ¢u xÃ© má»™t lÃºc.

---

### 3. StringBuffer: "Anh chÃ ng báº£o vá»‡ cáº©n tháº­n"

`StringBuffer` giá»‘ng há»‡t `StringBuilder` vá» cÃ¡ch sá»­ dá»¥ng. NÃ³ cÅ©ng lÃ  "báº£ng tráº¯ng" cÃ³ thá»ƒ thay Ä‘á»•i Ä‘Æ°á»£c. Tuy nhiÃªn, nÃ³ cÃ³ thÃªm má»™t tÃ­nh nÄƒng Ä‘áº·c biá»‡t: **Thread-safe** (an toÃ n Ä‘a luá»“ng).

HÃ£y tÆ°á»Ÿng tÆ°á»£ng `StringBuffer` lÃ  má»™t cÃ¡i báº£ng cÃ³ khÃ³a. Chá»‰ má»™t ngÆ°á»i Ä‘Æ°á»£c phÃ©p viáº¿t lÃªn báº£ng táº¡i má»™t thá»i Ä‘iá»ƒm. Nhá»¯ng ngÆ°á»i khÃ¡c pháº£i xáº¿p hÃ ng chá» Ä‘á»£i.

*   **Æ¯u Ä‘iá»ƒm:** An toÃ n tuyá»‡t Ä‘á»‘i khi nhiá»u pháº§n cá»§a chÆ°Æ¡ng trÃ¬nh cháº¡y cÃ¹ng lÃºc vÃ  cÃ¹ng sá»­a má»™t chuá»—i.
*   **Äiá»ƒm yáº¿u:** VÃ¬ pháº£i máº¥t cÃ´ng "khÃ³a cá»­a" vÃ  "má»Ÿ cá»­a", nÃ³ cháº­m hÆ¡n `StringBuilder`.
*   **DÃ¹ng khi nÃ o?** Chá»‰ khi báº¡n thá»±c sá»± lÃ m viá»‡c vá»›i Ä‘a luá»“ng (multi-threading).

---

### TÃ³m láº¡i, chá»n ai bÃ¢y giá»?

DÆ°á»›i Ä‘Ã¢y lÃ  bÃ­ kÃ­p Ä‘á»ƒ báº¡n chá»n lá»±a:

1.  **Báº¡n cÃ³ thay Ä‘á»•i chuá»—i thÆ°á»ng xuyÃªn khÃ´ng?**
    *   KhÃ´ng: DÃ¹ng **String**.
    *   CÃ³: Sang cÃ¢u há»i 2.

2.  **Báº¡n cÃ³ dÃ¹ng Ä‘a luá»“ng (multi-thread) khÃ´ng?**
    *   KhÃ´ng (Háº§u háº¿t cÃ¡c trÆ°á»ng há»£p má»›i há»c): DÃ¹ng **StringBuilder** (Nhanh nháº¥t).
    *   CÃ³: DÃ¹ng **StringBuffer** (An toÃ n nháº¥t).

**Báº£ng so sÃ¡nh nhanh:**

| Äáº·c Ä‘iá»ƒm | String | StringBuilder | StringBuffer |
| :--- | :--- | :--- | :--- |
| **Thay Ä‘á»•i Ä‘Æ°á»£c?** | KhÃ´ng (Immutable) | CÃ³ (Mutable) | CÃ³ (Mutable) |
| **Tá»‘c Ä‘á»™** | Cháº­m (náº¿u sá»­a nhiá»u) | Nhanh nháº¥t | Trung bÃ¬nh |
| **An toÃ n Ä‘a luá»“ng?** | CÃ³ | KhÃ´ng | CÃ³ |](#what-is-the-difference-between-string-stringbuilder-and-stringbuffer) |
| 57 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang thiáº¿t káº¿ má»™t lá»›p (class) cÃ³ tÃªn lÃ  `Dog`. Má»—i chÃº chÃ³ sáº½ cÃ³ nhá»¯ng Ä‘áº·c Ä‘iá»ƒm riÃªng, nhÆ°ng cÅ©ng cÃ³ nhá»¯ng thá»© mÃ  cáº£ "loÃ i chÃ³" Ä‘á»u dÃ¹ng chung. ÄÃ¢y chÃ­nh lÃ  lÃºc chÃºng ta cáº§n phÃ¢n biá»‡t giá»¯a **biáº¿n instance** vÃ  **biáº¿n static**.

### 1. Biáº¿n Instance (Biáº¿n thá»±c thá»ƒ) - "Cá»§a riÃªng má»—i Ä‘á»©a"

HÃ£y nghÄ© vá» tÃªn cá»§a má»™t chÃº chÃ³. Má»—i chÃº chÃ³ khi sinh ra (táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng) sáº½ cÃ³ má»™t cÃ¡i tÃªn riÃªng. 

*   **NÃ³ lÃ  gÃ¬?** LÃ  biáº¿n Ä‘Æ°á»£c khai bÃ¡o bÃªn trong má»™t lá»›p, nhÆ°ng náº±m ngoÃ i cÃ¡c phÆ°Æ¡ng thá»©c.
*   **Äáº·c Ä‘iá»ƒm:** Má»—i khi báº¡n dÃ¹ng tá»« khÃ³a `new` Ä‘á»ƒ táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng má»›i, há»‡ thá»‘ng sáº½ cáº¥p má»™t vÃ¹ng nhá»› riÃªng cho cÃ¡c biáº¿n nÃ y.
*   **Khi nÃ o dÃ¹ng?** Khi báº¡n muá»‘n má»—i Ä‘á»‘i tÆ°á»£ng cÃ³ má»™t giÃ¡ trá»‹ khÃ¡c nhau.

```java
class Dog {
    String name; // ÄÃ¢y lÃ  biáº¿n instance! Má»—i chÃº chÃ³ cÃ³ tÃªn riÃªng.
}
```

### 2. Biáº¿n Static (Biáº¿n tÄ©nh) - "Cá»§a chung cáº£ xÃ³m"

BÃ¢y giá», hÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n muá»‘n Ä‘áº¿m xem cÃ³ tá»•ng cá»™ng bao nhiÃªu chÃº chÃ³ Ä‘Ã£ Ä‘Æ°á»£c táº¡o ra. Báº¡n khÃ´ng thá»ƒ Ä‘á»ƒ má»—i chÃº chÃ³ tá»± giá»¯ má»™t con sá»‘ riÃªng Ä‘Æ°á»£c, Ä‘Ãºng khÃ´ng? Báº¡n cáº§n má»™t "táº¥m báº£ng chung" Ä‘á»ƒ táº¥t cáº£ cÃ¹ng nhÃ¬n vÃ o.

*   **NÃ³ lÃ  gÃ¬?** LÃ  biáº¿n cÃ³ tá»« khÃ³a `static` Ä‘i kÃ¨m.
*   **Äáº·c Ä‘iá»ƒm:** NÃ³ khÃ´ng thuá»™c vá» báº¥t ká»³ Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ nÃ o. NÃ³ thuá»™c vá» **Lá»›p**. Chá»‰ cÃ³ duy nháº¥t má»™t báº£n sao cá»§a biáº¿n nÃ y, báº¥t ká»ƒ báº¡n cÃ³ táº¡o ra bao nhiÃªu Ä‘á»‘i tÆ°á»£ng Ä‘i chÄƒng ná»¯a.
*   **Khi nÃ o dÃ¹ng?** Khi báº¡n muá»‘n chia sáº» dá»¯ liá»‡u chung cho táº¥t cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p Ä‘Ã³.

```java
class Dog {
    static int dogCount = 0; // ÄÃ¢y lÃ  biáº¿n static! Cáº£ loÃ i chÃ³ dÃ¹ng chung cÃ¡i nÃ y.
}
```

### So sÃ¡nh nhanh Ä‘á»ƒ ghi nhá»›:

| Äáº·c Ä‘iá»ƒm | Biáº¿n Instance | Biáº¿n Static |
| :--- | :--- | :--- |
| **Vá»‹ trÃ­ lÆ°u trá»¯** | Náº±m trong tá»«ng Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ (Heap). | Náº±m á»Ÿ má»™t vÃ¹ng nhá»› chung dÃ nh cho Lá»›p. |
| **Sá»‘ lÆ°á»£ng báº£n sao** | Má»—i Ä‘á»‘i tÆ°á»£ng cÃ³ má»™t báº£n sao riÃªng. | Chá»‰ cÃ³ duy nháº¥t má»™t báº£n cho cáº£ Lá»›p. |
| **CÃ¡ch gá»i** | Pháº£i táº¡o Ä‘á»‘i tÆ°á»£ng má»›i gá»i Ä‘Æ°á»£c: `myDog.name`. | Gá»i trá»±c tiáº¿p qua tÃªn Lá»›p: `Dog.dogCount`. |
| **Thá»i thá»** | Sá»‘ng vÃ  cháº¿t cÃ¹ng Ä‘á»‘i tÆ°á»£ng. | Sá»‘ng ngay khi chÆ°Æ¡ng trÃ¬nh cháº¡y vÃ  chá»‰ máº¥t Ä‘i khi chÆ°Æ¡ng trÃ¬nh dá»«ng. |

### VÃ­ dá»¥ tá»•ng há»£p cho dá»… hÃ¬nh dung:

```java
class Dog {
    String name;        // Biáº¿n instance: TÃªn cá»§a má»—i con
    static int count;   // Biáº¿n static: Tá»•ng sá»‘ lÆ°á»£ng chÃ³

    Dog(String n) {
        name = n;
        count++;        // Má»—i láº§n "Ä‘áº»" ra má»™t con, tÄƒng tá»•ng sá»‘ lÃªn
    }
}

// Khi sá»­ dá»¥ng:
Dog d1 = new Dog("Fido");
Dog d2 = new Dog("Rex");

System.out.println(d1.name);   // Káº¿t quáº£: Fido
System.out.println(d2.name);   // Káº¿t quáº£: Rex
System.out.println(Dog.count); // Káº¿t quáº£: 2 (Cáº£ hai Ä‘á»u tháº¥y con sá»‘ 2 nÃ y)
```

**TÃ³m láº¡i:** Náº¿u Ä‘Ã³ lÃ  thÃ´ng tin riÃªng tÆ° cá»§a tá»«ng Ä‘á»‘i tÆ°á»£ng, hÃ£y dÃ¹ng **Instance**. Náº¿u lÃ  thÃ´ng tin chung mÃ  cáº£ "dÃ²ng há»" cáº§n biáº¿t, hÃ£y dÃ¹ng **Static**](#what-is-the-difference-between-static-and-instance-variables) |
| 58 | [Báº¡n Ä‘Ã£ bao giá» tá»± há»i lÃ m tháº¿ nÃ o Ä‘á»ƒ gá»i má»™t "ngÆ°á»i cha" (lá»›p cha) khi báº¡n Ä‘ang á»Ÿ trong "nhÃ " cá»§a "ngÆ°á»i con" (lá»›p con) chÆ°a? ÄÃ³ chÃ­nh lÃ  lÃºc tá»« khÃ³a `super` xuáº¥t hiá»‡n!

HÃ£y coi `super` nhÆ° má»™t chiáº¿c Ä‘iá»‡n thoáº¡i Ä‘áº·c biá»‡t giÃºp lá»›p con liÃªn láº¡c trá»±c tiáº¿p vá»›i lá»›p cha cá»§a nÃ³. DÆ°á»›i Ä‘Ã¢y lÃ  3 cÃ¡ch chÃ­nh mÃ  báº¡n sáº½ sá»­ dá»¥ng nÃ³:

### 1. Gá»i Constructor cá»§a lá»›p cha
Khi báº¡n táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng con, nÃ³ cáº§n pháº£i "khá»Ÿi táº¡o" pháº§n cha trÆ°á»›c Ä‘Ã£. Náº¿u báº¡n khÃ´ng nÃ³i gÃ¬, Java sáº½ tá»± Ä‘á»™ng gá»i constructor khÃ´ng tham sá»‘ cá»§a lá»›p cha. NhÆ°ng náº¿u báº¡n muá»‘n truyá»n dá»¯ liá»‡u cá»¥ thá»ƒ lÃªn trÃªn? HÃ£y dÃ¹ng `super()`.

```java
class Animal {
    Animal(String name) {
        System.out.println("TÃ´i lÃ  Ä‘á»™ng váº­t tÃªn lÃ : " + name);
    }
}

class Dog extends Animal {
    Dog() {
        super("Ki"); // Gá»i constructor cá»§a Animal
        System.out.println("TÃ´i lÃ  má»™t chÃº chÃ³!");
    }
}
```
*LÆ°u Ã½ nhá»: `super()` pháº£i lÃ  cÃ¢u lá»‡nh Ä‘áº§u tiÃªn trong constructor cá»§a lá»›p con Ä‘áº¥y nhÃ©!*

### 2. Truy cáº­p cÃ¡c phÆ°Æ¡ng thá»©c bá»‹ ghi Ä‘Ã¨ (Override)
ÄÃ´i khi lá»›p con "ghi Ä‘Ã¨" má»™t phÆ°Æ¡ng thá»©c cá»§a lá»›p cha Ä‘á»ƒ lÃ m Ä‘iá»u gÃ¬ Ä‘Ã³ khÃ¡c Ä‘i. NhÆ°ng náº¿u báº¡n váº«n muá»‘n cháº¡y phiÃªn báº£n gá»‘c cá»§a lá»›p cha thÃ¬ sao? Chá»‰ cáº§n thÃªm `super.` vÃ o trÆ°á»›c tÃªn phÆ°Æ¡ng thá»©c.

```java
class Animal {
    void eat() {
        System.out.println("Äang Äƒn...");
    }
}

class Dog extends Animal {
    void eat() {
        super.eat(); // Cháº¡y phiÃªn báº£n cá»§a Animal trÆ°á»›c
        System.out.println("ChÃ³ Ä‘ang gáº·m xÆ°Æ¡ng!");
    }
}
```

### 3. PhÃ¢n biá»‡t cÃ¡c biáº¿n trÃ¹ng tÃªn
Náº¿u lá»›p con cÃ³ má»™t biáº¿n trÃ¹ng tÃªn vá»›i biáº¿n cá»§a lá»›p cha, Java sáº½ Æ°u tiÃªn biáº¿n cá»§a lá»›p con. Äá»ƒ "chá»‰ táº­n tay" vÃ o biáº¿n cá»§a lá»›p cha, báº¡n dÃ¹ng `super.tenBien`.

```java
class Parent {
    String color = "Tráº¯ng";
}

class Child extends Parent {
    String color = "Äen";

    void display() {
        System.out.println(color);       // In ra "Äen"
        System.out.println(super.color); // In ra "Tráº¯ng"
    }
}
```

### TÃ³m láº¡i lÃ :
*   **`super()`**: Gá»i constructor cá»§a cha.
*   **`super.method()`**: Gá»i phÆ°Æ¡ng thá»©c cá»§a cha.
*   **`super.variable`**: Truy cáº­p biáº¿n cá»§a cha.

Tháº­t Ä‘Æ¡n giáº£n pháº£i khÃ´ng? Tá»« khÃ³a `super` chÃ­nh lÃ  cáº§u ná»‘i giÃºp lá»›p con táº­n dá»¥ng tá»‘i Ä‘a nhá»¯ng gÃ¬ lá»›p cha Ä‘Ã£ cÃ³](#what-is-the-purpose-of-the-super-keyword) |
| 59 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang Ä‘á»©ng trong má»™t ngÃ´i nhÃ  vÃ  muá»‘n nÃ³i vá» "cÃ¡i cá»­a sá»• nÃ y" â€” chÃ­nh lÃ  cÃ¡i cá»­a sá»• thuá»™c vá» ngÃ´i nhÃ  báº¡n Ä‘ang Ä‘á»©ng, chá»© khÃ´ng pháº£i nhÃ  hÃ ng xÃ³m. Trong láº­p trÃ¬nh Java, tá»« khÃ³a `this` cÅ©ng hoáº¡t Ä‘á»™ng y há»‡t nhÆ° váº­y!

Vá» cÆ¡ báº£n, `this` lÃ  má»™t biáº¿n tham chiáº¿u tá»± Ä‘á»™ng trá» tháº³ng Ä‘áº¿n **Ä‘á»‘i tÆ°á»£ng hiá»‡n táº¡i** mÃ  code Ä‘ang thá»±c thi.

DÆ°á»›i Ä‘Ã¢y lÃ  3 tÃ¬nh huá»‘ng phá»• biáº¿n nháº¥t mÃ  báº¡n sáº½ cáº§n dÃ¹ng Ä‘áº¿n "trá»£ thá»§" nÃ y:

### 1. Giáº£i quyáº¿t sá»± nháº­p nháº±ng (Ambiguity)
ÄÃ¢y lÃ  trÆ°á»ng há»£p hay gáº·p nháº¥t. Khi tÃªn cá»§a **biáº¿n instance** (biáº¿n cá»§a Ä‘á»‘i tÆ°á»£ng) vÃ  tÃªn **tham sá»‘** (parameter) trong phÆ°Æ¡ng thá»©c giá»‘ng há»‡t nhau, Java sáº½ bá»‹ bá»‘i rá»‘i. `this` sáº½ giÃºp báº¡n chá»‰ rÃµ: "NÃ y, tÃ´i Ä‘ang nÃ³i vá» biáº¿n cá»§a Ä‘á»‘i tÆ°á»£ng nhÃ©!"

```java
public class Dog {
    private String name;

    public void setName(String name) {
        // this.name lÃ  biáº¿n instance cá»§a Ä‘á»‘i tÆ°á»£ng Dog
        // name (bÃªn pháº£i) lÃ  tham sá»‘ vá»«a truyá»n vÃ o
        this.name = name; 
    }
}
```

### 2. Gá»i Constructor nÃ y tá»« Constructor khÃ¡c
ÄÃ´i khi báº¡n cÃ³ nhiá»u Constructor (náº¡p chá»“ng - overloading) vÃ  khÃ´ng muá»‘n viáº¿t Ä‘i viáº¿t láº¡i cÃ¹ng má»™t Ä‘oáº¡n code logic. Báº¡n cÃ³ thá»ƒ dÃ¹ng `this()` Ä‘á»ƒ gá»i má»™t Constructor khÃ¡c ngay trong cÃ¹ng má»™t class.

*LÆ°u Ã½ nhá»: Lá»‡nh `this()` pháº£i luÃ´n lÃ  dÃ²ng code Ä‘áº§u tiÃªn trong Constructor nhÃ©!*

```java
public class Hero {
    String name;
    int hp;

    public Hero(String name) {
        // Gá»i constructor bÃªn dÆ°á»›i Ä‘á»ƒ gÃ¡n máº·c Ä‘á»‹nh 100 HP
        this(name, 100); 
    }

    public Hero(String name, int hp) {
        this.name = name;
        this.hp = hp;
    }
}
```

### 3. Tá»± chuyá»ƒn chÃ­nh mÃ¬nh lÃ m tham sá»‘
ÄÃ´i khi má»™t Ä‘á»‘i tÆ°á»£ng muá»‘n nÃ³i vá»›i má»™t phÆ°Æ¡ng thá»©c khÃ¡c ráº±ng: "NÃ y, hÃ£y dÃ¹ng chÃ­nh tÃ´i Ä‘á»ƒ xá»­ lÃ½ cÃ´ng viá»‡c nÃ y Ä‘i!". LÃºc Ä‘Ã³, báº¡n chá»‰ cáº§n truyá»n `this` vÃ o phÆ°Æ¡ng thá»©c Ä‘Ã³.

```java
public void updateStatus() {
    // Truyá»n chÃ­nh Ä‘á»‘i tÆ°á»£ng hiá»‡n táº¡i vÃ o má»™t phÆ°Æ¡ng thá»©c khÃ¡c
    Database.save(this); 
}
```

### TÃ³m láº¡i lÃ :
*   `this` giÃºp phÃ¢n biá»‡t biáº¿n cá»§a lá»›p vá»›i biáº¿n cá»¥c bá»™.
*   `this` giÃºp cÃ¡c Constructor "nÃ³i chuyá»‡n" vá»›i nhau.
*   `this` chÃ­nh lÃ  cÃ¡ch Ä‘á»ƒ má»™t Ä‘á»‘i tÆ°á»£ng tá»± trá» vÃ o chÃ­nh nÃ³.

HÃ£y coi `this` nhÆ° má»™t ngÃ³n tay Ä‘ang chá»‰ tháº³ng vÃ o Ä‘á»‘i tÆ°á»£ng mÃ  báº¡n Ä‘ang lÃ m viá»‡c cÃ¹ng. Tháº­t Ä‘Æ¡n giáº£n pháº£i khÃ´ng nÃ o?](#what-is-the-purpose-of-the-this-keyword) |
| 60 | [HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t chiáº¿c há»™p. TrÆ°á»›c Ä‘Ã¢y, báº¡n cÃ³ thá»ƒ bá» **báº¥t cá»© thá»© gÃ¬** vÃ o chiáº¿c há»™p Ä‘Ã³: má»™t quáº£ tÃ¡o, má»™t chiáº¿c chÃ¬a khÃ³a, hoáº·c tháº­m chÃ­ lÃ  má»™t chiáº¿c Ã´ tÃ´! 

Nghe cÃ³ váº» tiá»‡n lá»£i nhá»‰? NhÆ°ng váº¥n Ä‘á» lÃ  khi báº¡n thÃ² tay vÃ o há»™p Ä‘á»ƒ láº¥y Ä‘á»“, báº¡n khÃ´ng thá»ƒ biáº¿t cháº¯c mÃ¬nh sáº½ cháº¡m vÃ o thá»© gÃ¬. Báº¡n pháº£i hy vá»ng Ä‘Ã³ lÃ  quáº£ tÃ¡o mÃ¬nh Ä‘ang tÃ¬m, náº¿u khÃ´ng... *bÃ¹m*, lá»—i chÆ°Æ¡ng trÃ¬nh sáº½ xáº£y ra!

ÄÃ³ chÃ­nh lÃ  cÃ¡ch Java hoáº¡t Ä‘á»™ng trÆ°á»›c khi cÃ³ **Generics**.

### Generics lÃ  gÃ¬?

NÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n nháº¥t: **Generics giÃºp báº¡n dÃ¡n nhÃ£n cho chiáº¿c há»™p cá»§a mÃ¬nh.**

Thay vÃ¬ nÃ³i "ÄÃ¢y lÃ  má»™t chiáº¿c há»™p Ä‘á»±ng Ä‘á»“ váº­t chung chung", báº¡n sáº½ nÃ³i "ÄÃ¢y lÃ  chiáº¿c há»™p **chá»‰ dÃ nh riÃªng cho Chuá»—i vÄƒn báº£n (String)**".

### Táº¡i sao chÃºng ta cáº§n nÃ³?

HÃ£y xem vÃ­ dá»¥ "ngÃ y xá»­a ngÃ y xÆ°a" khi chÆ°a cÃ³ Generics:

```java
// Má»™t danh sÃ¡ch cÃ³ thá»ƒ chá»©a má»i thá»© (Object)
ArrayList list = new ArrayList(); 
list.add("Xin chÃ o");

// Khi láº¥y ra, báº¡n pháº£i Ã©p kiá»ƒu (cast) má»™t cÃ¡ch thá»§ cÃ´ng
// Ráº¥t phiá»n phá»©c vÃ  dá»… sai sÃ³t!
String s = (String) list.get(0); 
```

CÃ²n Ä‘Ã¢y lÃ  cÃ¡ch hiá»‡n Ä‘áº¡i vá»›i **Generics**:

```java
// ChÃºng ta dÃ¹ng dáº¥u < > Ä‘á»ƒ chá»‰ Ä‘á»‹nh kiá»ƒu dá»¯ liá»‡u
ArrayList<String> list = new ArrayList<String>();
list.add("Xin chÃ o");

// KhÃ´ng cáº§n Ã©p kiá»ƒu ná»¯a! Java Ä‘Ã£ biáº¿t cháº¯c cháº¯n nÃ³ lÃ  String rá»“i.
String s = list.get(0); 
```

### 3 lá»£i Ã­ch tuyá»‡t vá»i cá»§a Generics:

1.  **An toÃ n lÃ  trÃªn háº¿t (Type Safety):** Náº¿u báº¡n cá»‘ tÃ¬nh bá» má»™t "Quáº£ cam" vÃ o chiáº¿c há»™p dÃ¡n nhÃ£n "TÃ¡o", trÃ¬nh biÃªn dá»‹ch sáº½ ngÄƒn báº¡n ngay láº­p tá»©c. ThÃ  bá»‹ máº¯ng lÃºc Ä‘ang viáº¿t code cÃ²n hÆ¡n lÃ  Ä‘á»ƒ chÆ°Æ¡ng trÃ¬nh bá»‹ há»ng khi Ä‘ang cháº¡y, Ä‘Ãºng khÃ´ng?
2.  **Táº¡m biá»‡t Ã©p kiá»ƒu (No Casting):** Báº¡n khÃ´ng cáº§n pháº£i viáº¿t `(String)` hay `(Integer)` láº·p Ä‘i láº·p láº¡i ná»¯a. Code cá»§a báº¡n sáº½ sáº¡ch sáº½ vÃ  dá»… Ä‘á»c hÆ¡n háº³n.
3.  **TÃ¡i sá»­ dá»¥ng code:** Báº¡n cÃ³ thá»ƒ viáº¿t má»™t phÆ°Æ¡ng thá»©c hoáº·c má»™t lá»›p dÃ¹ng chung cho nhiá»u kiá»ƒu dá»¯ liá»‡u khÃ¡c nhau mÃ  khÃ´ng cáº§n pháº£i viáº¿t láº¡i nhiá»u láº§n.

### HÃ£y nhá»› quy táº¯c dáº¥u ngoáº·c nhá»n `< >`

Khi báº¡n tháº¥y dáº¥u `<T>`, `<E>` hoáº·c `<String>` bÃªn cáº¡nh má»™t tÃªn lá»›p, Ä‘Ã³ chÃ­nh lÃ  Generics. Chá»¯ cÃ¡i bÃªn trong chá»‰ lÃ  má»™t **biáº¿n Ä‘áº¡i diá»‡n** cho kiá»ƒu dá»¯ liá»‡u mÃ  báº¡n sáº½ truyá»n vÃ o sau nÃ y.

**TÃ³m láº¡i:** Generics giá»‘ng nhÆ° má»™t há»‡ thá»‘ng kiá»ƒm soÃ¡t cháº¥t lÆ°á»£ng. NÃ³ giÃºp code cá»§a báº¡n cháº¯c cháº¯n hÆ¡n, Ã­t lá»—i hÆ¡n vÃ  chuyÃªn nghiá»‡p hÆ¡n!](#what-are-generics-in-java) |
| 61 | [Báº¡n Ä‘Ã£ bao giá» tháº¯c máº¯c chuyá»‡n gÃ¬ sáº½ xáº£y ra vá»›i cÃ¡c Generics (nhÆ° `<String>` hay `<Integer>`) sau khi báº¡n nháº¥n nÃºt biÃªn dá»‹ch chÆ°Æ¡ng trÃ¬nh chÆ°a? 

ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i tháº¿ giá»›i cá»§a **Type Erasure** (XÃ³a bá» kiá»ƒu dá»¯ liá»‡u). HÃ£y tÆ°á»Ÿng tÆ°á»£ng Ä‘Ã¢y lÃ  má»™t mÃ n áº£o thuáº­t mÃ  Java thá»±c hiá»‡n Ä‘á»ƒ giá»¯ cho má»i thá»© gá»n gÃ ng vÃ  tÆ°Æ¡ng thÃ­ch vá»›i cÃ¡c phiÃªn báº£n cÅ©!

### Type Erasure lÃ  gÃ¬ váº­y?

NÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n: **Generics chá»‰ tá»“n táº¡i khi báº¡n viáº¿t code.** Khi trÃ¬nh biÃªn dá»‹ch Java (javac) báº¯t tay vÃ o viá»‡c, nÃ³ sáº½ thá»±c hiá»‡n má»™t "cÃº bÃºng tay" vÃ  xÃ³a sáº¡ch cÃ¡c thÃ´ng tin vá» kiá»ƒu dá»¯ liá»‡u trong ngoáº·c nhá»n `< >`.

Táº¡i sao Java láº¡i lÃ m tháº¿? Äá»ƒ nhá»¯ng Ä‘oáº¡n code hiá»‡n Ä‘áº¡i cÃ³ Generics váº«n cÃ³ thá»ƒ cháº¡y mÆ°á»£t mÃ  trÃªn cÃ¡c mÃ¡y áº£o Java (JVM) Ä‘á»i cÅ© khÃ´ng há» biáº¿t Generics lÃ  gÃ¬.

### TrÃ¬nh biÃªn dá»‹ch thá»±c sá»± lÃ m gÃ¬?

Khi báº¡n biÃªn dá»‹ch code, Java thá»±c hiá»‡n 3 bÆ°á»›c dá»n dáº¹p sau:

1.  **Thay tháº¿ kiá»ƒu dá»¯ liá»‡u:** NÃ³ thay cÃ¡c tham sá»‘ kiá»ƒu (nhÆ° `T` hay `E`) báº±ng cÃ¡c kiá»ƒu dá»¯ liá»‡u thá»±c táº¿ nhÆ° `Object` hoáº·c kiá»ƒu giá»›i háº¡n cá»§a nÃ³ (Bounded Type).
2.  **ChÃ¨n thÃªm Ã©p kiá»ƒu (Type Casting):** Náº¿u cáº§n thiáº¿t, nÃ³ sáº½ tá»± Ä‘á»™ng thÃªm cÃ¡c cÃ¢u lá»‡nh Ã©p kiá»ƒu Ä‘á»ƒ Ä‘áº£m báº£o chÆ°Æ¡ng trÃ¬nh cháº¡y Ä‘Ãºng.
3.  **Táº¡o cÃ¡c phÆ°Æ¡ng thá»©c cáº§u ná»‘i (Bridge Methods):** ÄÃ¢y lÃ  cÃ¡ch Java giá»¯ cho tÃ­nh Ä‘a hÃ¬nh (polymorphism) khÃ´ng bá»‹ há»ng.

---

### HÃ£y xem vÃ­ dá»¥ thá»±c táº¿ nhÃ©!

Giáº£ sá»­ báº¡n viáº¿t má»™t chiáº¿c há»™p chá»©a Ä‘á»“ váº­t nhÆ° tháº¿ nÃ y:

```java
// Code báº¡n viáº¿t (TrÆ°á»›c khi biÃªn dá»‹ch)
public class Box<T> {
    private T data;

    public void set(T data) {
        this.data = data;
    }

    public T get() {
        return data;
    }
}
```

Sau khi báº¡n biÃªn dá»‹ch, trÃ¬nh biÃªn dá»‹ch sáº½ "xÃ³a" chá»¯ `T` Ä‘i vÃ  thay báº±ng `Object`. Káº¿t quáº£ lÃ  file `.class` cá»§a báº¡n trÃ´ng sáº½ giá»‘ng nhÆ° tháº¿ nÃ y:

```java
// Code sau khi bá»‹ "XÃ³a bá» kiá»ƒu" (Type Erasure)
public class Box {
    private Object data; // T Ä‘Ã£ biáº¿n thÃ nh Object!

    public void set(Object data) {
        this.data = data;
    }

    public Object get() {
        return data;
    }
}
```

### Äiá»u nÃ y cÃ³ Ã½ nghÄ©a gÃ¬ vá»›i báº¡n?

VÃ¬ Type Erasure, cÃ³ má»™t sá»‘ quy táº¯c "ngáº§m" mÃ  báº¡n cáº§n nhá»›:

*   **KhÃ´ng thá»ƒ dÃ¹ng kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y:** Báº¡n khÃ´ng thá»ƒ viáº¿t `ArrayList<int>`. Báº¡n pháº£i dÃ¹ng lá»›p bao (Wrapper class) nhÆ° `ArrayList<Integer>`.
*   **KhÃ´ng thá»ƒ kiá»ƒm tra kiá»ƒu lÃºc cháº¡y (Runtime):** Báº¡n khÃ´ng thá»ƒ dÃ¹ng `instanceof` vá»›i Generics. VÃ­ dá»¥: `if (list instanceof ArrayList<String>)` lÃ  sai, vÃ¬ lÃºc nÃ y `String` Ä‘Ã£ bá»‹ xÃ³a máº¥t rá»“i!
*   **Má»i Box Ä‘á»u giá»‘ng nhau:** `Box<String>` vÃ  `Box<Integer>` thá»±c cháº¥t Ä‘á»u dÃ¹ng chung má»™t mÃ£ bytecode (cÃ¹ng má»™t class) khi chÆ°Æ¡ng trÃ¬nh cháº¡y.

**TÃ³m láº¡i:** Generics giá»‘ng nhÆ° má»™t táº¥m báº£n Ä‘á»“ chá»‰ Ä‘Æ°á»ng cho trÃ¬nh biÃªn dá»‹ch. Má»™t khi trÃ¬nh biÃªn dá»‹ch Ä‘Ã£ hiá»ƒu Ã½ báº¡n vÃ  kiá»ƒm tra lá»—i xong, nÃ³ sáº½ vá»©t táº¥m báº£n Ä‘á»“ Ä‘Ã³ Ä‘i Ä‘á»ƒ chÆ°Æ¡ng trÃ¬nh cháº¡y nháº¹ nhÃ ng vÃ  tÆ°Æ¡ng thÃ­ch nháº¥t](#what-is-type-erasure-in-java-generics) |
ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i tháº¿ giá»›i láº­p trÃ¬nh! Äá»«ng lo láº¯ng náº¿u báº¡n tháº¥y má»i thá»© cÃ³ váº» phá»©c táº¡p lÃºc Ä‘áº§u. ChÃºng ta sáº½ cÃ¹ng nhau bÃ³c tÃ¡ch tá»«ng váº¥n Ä‘á» má»™t cÃ¡ch tháº­t Ä‘Æ¡n giáº£n, giá»‘ng nhÆ° Ä‘ang trÃ² chuyá»‡n váº­y. Sáºµn sÃ ng chÆ°a? Báº¯t Ä‘áº§u thÃ´i!

<!-- TOC_END -->

### 1. Biáº¿n lÃ  gÃ¬? HÃ£y tÆ°á»Ÿng tÆ°á»£ng nÃ³ lÃ  má»™t chiáº¿c há»™p!

Trong láº­p trÃ¬nh, **biáº¿n (variable)** giá»‘ng nhÆ° má»™t chiáº¿c há»™p nhá» Ä‘á»ƒ báº¡n cáº¥t giá»¯ Ä‘á»“ Ä‘áº¡c. 

*   **TÃªn biáº¿n:** LÃ  nhÃ£n dÃ¡n bÃªn ngoÃ i há»™p Ä‘á»ƒ báº¡n biáº¿t bÃªn trong cÃ³ gÃ¬.
*   **GiÃ¡ trá»‹:** LÃ  mÃ³n Ä‘á»“ thá»±c sá»± báº¡n Ä‘áº·t vÃ o trong há»™p.

VÃ­ dá»¥: Báº¡n cÃ³ má»™t chiáº¿c há»™p tÃªn lÃ  `tuoi` vÃ  báº¡n Ä‘áº·t sá»‘ `25` vÃ o Ä‘Ã³.

### 2. CÃ¡ch khai bÃ¡o biáº¿n (Táº¡o há»™p)

Äá»ƒ táº¡o má»™t chiáº¿c há»™p trong Java, báº¡n cáº§n nÃ³i cho mÃ¡y tÃ­nh biáº¿t hai Ä‘iá»u: **Kiá»ƒu dá»¯ liá»‡u** (cÃ¡i há»™p nÃ y Ä‘á»±ng Ä‘Æ°á»£c gÃ¬?) vÃ  **TÃªn biáº¿n** (tÃªn há»™p lÃ  gÃ¬?).

```java
int myNumber = 10;
```

PhÃ¢n tÃ­ch má»™t chÃºt nhÃ©:
1.  `int`: ÄÃ¢y lÃ  kiá»ƒu sá»‘ nguyÃªn (nhÆ° 1, 2, 3...). NÃ³ nÃ³i ráº±ng: "CÃ¡i há»™p nÃ y chá»‰ Ä‘á»±ng Ä‘Æ°á»£c sá»‘ nguyÃªn thÃ´i nhÃ©!"
2.  `myNumber`: ÄÃ¢y lÃ  cÃ¡i tÃªn báº¡n Ä‘áº·t cho há»™p.
3.  `=`: PhÃ©p gÃ¡n. NghÄ©a lÃ  "hÃ£y Ä‘áº·t giÃ¡ trá»‹ bÃªn pháº£i vÃ o cÃ¡i há»™p bÃªn trÃ¡i".
4.  `10`: GiÃ¡ trá»‹ báº¡n muá»‘n cáº¥t giá»¯.
5.  `;`: Dáº¥u cháº¥m pháº©y giá»‘ng nhÆ° dáº¥u cháº¥m cÃ¢u váº­y. NÃ³ bÃ¡o cho Java biáº¿t: "CÃ¢u lá»‡nh káº¿t thÃºc á»Ÿ Ä‘Ã¢y!"

### 3. CÃ¡c kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n báº¡n cáº§n nhá»›

Äá»«ng cá»‘ há»c thuá»™c lÃ²ng háº¿t ngay láº­p tá»©c! HÃ£y nhá»› nhá»¯ng "ngÆ°á»i báº¡n" hay gáº·p nháº¥t nÃ y:

*   **int**: DÃ¹ng cho sá»‘ nguyÃªn (vÃ­ dá»¥: 5, 100, -50).
*   **double**: DÃ¹ng cho sá»‘ cÃ³ dáº¥u pháº©y tháº­p phÃ¢n (vÃ­ dá»¥: 3.14, 9.99).
*   **String**: DÃ¹ng cho chá»¯ viáº¿t hoáº·c vÄƒn báº£n (vÃ­ dá»¥: "ChÃ o báº¡n", "Java ráº¥t vui"). *LÆ°u Ã½: String luÃ´n náº±m trong dáº¥u ngoáº·c kÃ©p nhÃ©!*
*   **boolean**: Chá»‰ cÃ³ hai giÃ¡ trá»‹: `true` (Ä‘Ãºng) hoáº·c `false` (sai). Giá»‘ng nhÆ° cÃ´ng táº¯c Ä‘Ã¨n váº­y!

### 4. Quy táº¯c Ä‘áº·t tÃªn (Äá»«ng lÃ m mÃ¡y tÃ­nh bá»‘i rá»‘i!)

Khi Ä‘áº·t tÃªn cho "chiáº¿c há»™p" cá»§a mÃ¬nh, hÃ£y tuÃ¢n theo cÃ¡c quy táº¯c lá»‹ch sá»± sau:

*   **KhÃ´ng báº¯t Ä‘áº§u báº±ng sá»‘**: `1stNumber` lÃ  sai, `number1` thÃ¬ ok!
*   **KhÃ´ng cÃ³ khoáº£ng cÃ¡ch**: Thay vÃ¬ `ten cua toi`, hÃ£y viáº¿t lÃ  `tenCuaToi` (Ä‘Ã¢y gá»i lÃ  kiá»ƒu Láº¡c ÄÃ  - camelCase).
*   **CÃ³ Ã½ nghÄ©a**: Äá»«ng Ä‘áº·t tÃªn lÃ  `a`, `b`, `c`. HÃ£y Ä‘áº·t lÃ  `giaTien` hoáº·c `soLuong` Ä‘á»ƒ sau nÃ y Ä‘á»c láº¡i báº¡n váº«n hiá»ƒu mÃ¬nh Ä‘ang lÃ m gÃ¬.

### 5. Thá»­ nghiá»‡m má»™t chÃºt nÃ o!

HÃ£y nhÃ¬n Ä‘oáº¡n mÃ£ dÆ°á»›i Ä‘Ã¢y vÃ  Ä‘oÃ¡n xem nÃ³ lÃ m gÃ¬:

```java
String name = "Alice";
int age = 20;

System.out.println("Xin chÃ o, mÃ¬nh tÃªn lÃ  " + name);
System.out.println("NÄƒm nay mÃ¬nh " + age + " tuá»•i.");
```

**Káº¿t quáº£ sáº½ lÃ :**
*   Xin chÃ o, mÃ¬nh tÃªn lÃ  Alice
*   NÄƒm nay mÃ¬nh 20 tuá»•i.

Tháº¥y khÃ´ng? Java sáº½ láº¥y "Ä‘á»“ váº­t" trong há»™p `name` vÃ  `age` ra Ä‘á»ƒ hiá»ƒn thá»‹ cho báº¡n tháº¥y. Tháº­t dá»… dÃ ng Ä‘Ãºng khÃ´ng nÃ o?

ChÃ o báº¡n! Báº¡n Ä‘Ã£ bao giá» tá»± há»i lÃ m tháº¿ nÃ o Ä‘á»ƒ mÃ¡y tÃ­nh thá»±c hiá»‡n cÃ¡c phÃ©p toÃ¡n chÆ°a? Äá»«ng lo, chÃºng ta sáº½ cÃ¹ng khÃ¡m phÃ¡ ngay Ä‘Ã¢y. HÃ£y coi cÃ¡c toÃ¡n tá»­ nhÆ° lÃ  nhá»¯ng "nhÃ¢n viÃªn" trong má»™t dÃ¢y chuyá»n sáº£n xuáº¥t. Má»—i ngÆ°á»i cÃ³ má»™t nhiá»‡m vá»¥ riÃªng Ä‘á»ƒ xá»­ lÃ½ cÃ¡c con sá»‘.

HÃ£y cÃ¹ng xem qua cÃ¡c "nhÃ¢n viÃªn" cá»‘t cÃ¡n nÃ y nhÃ©:

### 1. ToÃ¡n tá»­ Sá»‘ há»c (Arithmetic Operators)
ÄÃ¢y lÃ  nhá»¯ng gÆ°Æ¡ng máº·t thÃ¢n quen nháº¥t, giá»‘ng nhÆ° chiáº¿c mÃ¡y tÃ­nh bá» tÃºi cá»§a báº¡n váº­y:

*   **Cá»™ng (`+`):** Gá»™p hai giÃ¡ trá»‹ láº¡i vá»›i nhau.
*   **Trá»« (`-`):** Láº¥y giÃ¡ trá»‹ nÃ y bá»›t Ä‘i giÃ¡ trá»‹ kia.
*   **NhÃ¢n (`*`):** Gáº¥p bá»™i giÃ¡ trá»‹ lÃªn.
*   **Chia (`/`):** Chia Ä‘á»u giÃ¡ trá»‹ ra. *LÆ°u Ã½ nhá»:* Náº¿u báº¡n chia hai sá»‘ nguyÃªn, Java sáº½ bá» pháº§n dÆ° Ä‘i Ä‘áº¥y!
*   **Chia láº¥y dÆ° (`%`):** PhÃ©p toÃ¡n nÃ y chá»‰ quan tÃ¢m Ä‘áº¿n pháº§n cÃ²n dÆ° sau khi chia. (VÃ­ dá»¥: 5 chia 2 dÆ° 1, váº­y `5 % 2` lÃ  1).

### 2. ToÃ¡n tá»­ Quan há»‡ (Relational Operators)
Nhá»¯ng toÃ¡n tá»­ nÃ y Ä‘Ã³ng vai trÃ² nhÆ° cÃ¡c "tháº©m phÃ¡n". ChÃºng so sÃ¡nh hai bÃªn vÃ  Ä‘Æ°a ra káº¿t luáº­n: ÄÃºng (`true`) hoáº·c Sai (`false`).

*   **Báº±ng (`==`):** Hai bÃªn cÃ³ giá»‘ng há»‡t nhau khÃ´ng?
*   **KhÃ¡c (`!=`):** Hai bÃªn cÃ³ khÃ¡c nhau khÃ´ng?
*   **Lá»›n hÆ¡n (`>`) vÃ  Nhá» hÆ¡n (`<`)**
*   **Lá»›n hÆ¡n hoáº·c báº±ng (`>=`) vÃ  Nhá» hÆ¡n hoáº·c báº±ng (`<=`)**

### 3. ToÃ¡n tá»­ Logic (Logical Operators)
ÄÃ¢y lÃ  bá»™ nÃ£o Ä‘iá»u khiá»ƒn cÃ¡c quyáº¿t Ä‘á»‹nh phá»©c táº¡p hÆ¡n báº±ng cÃ¡ch káº¿t há»£p nhiá»u Ä‘iá»u kiá»‡n:

*   **VÃ€ (`&&`):** Chá»‰ Ä‘Ãºng khi *táº¥t cáº£* cÃ¡c Ä‘iá»u kiá»‡n Ä‘á»u Ä‘Ãºng.
*   **HOáº¶C (`||`):** Chá»‰ cáº§n *má»™t trong cÃ¡c* Ä‘iá»u kiá»‡n Ä‘Ãºng lÃ  Ä‘Æ°á»£c.
*   **PHá»¦ Äá»ŠNH (`!`):** Äáº£o ngÆ°á»£c tráº¡ng thÃ¡i. ÄÃºng thÃ nh Sai, Sai thÃ nh ÄÃºng.

---

### Thá»­ thÃ¡ch nhá» cho báº¡n!

HÃ£y nhÃ¬n vÃ o Ä‘oáº¡n mÃ£ dÆ°á»›i Ä‘Ã¢y vÃ  thá»­ Ä‘oÃ¡n xem chuyá»‡n gÃ¬ Ä‘ang xáº£y ra:

```java
int apples = 10;
int friends = 3;

int applesPerFriend = apples / friends; // Má»—i ngÆ°á»i Ä‘Æ°á»£c máº¥y quáº£?
int leftoverApples = apples % friends; // CÃ²n dÆ° quáº£ nÃ o khÃ´ng?

boolean isEnough = apples > 5; // ChÃºng ta cÃ³ nhiá»u hÆ¡n 5 quáº£ chá»©?
```

**Báº¡n cÃ³ Ä‘oÃ¡n Ä‘Æ°á»£c káº¿t quáº£ khÃ´ng?**
*   `applesPerFriend` sáº½ lÃ  `3` (vÃ¬ Java bá» pháº§n tháº­p phÃ¢n).
*   `leftoverApples` sáº½ lÃ  `1` (vÃ¬ 10 chia 3 dÆ° 1).
*   `isEnough` sáº½ lÃ  `true` (vÃ¬ 10 rÃµ rÃ ng lá»›n hÆ¡n 5 rá»“i!).

Tháº­t Ä‘Æ¡n giáº£n pháº£i khÃ´ng nÃ o? HÃ£y tiáº¿p tá»¥c luyá»‡n táº­p nhÃ©!

<!-- QUESTIONS_END -->

1. ### JVM, JRE vÃ  JDK khÃ¡c nhau nhÆ° tháº¿ nÃ o?

Báº¡n má»›i báº¯t Ä‘áº§u há»c Java vÃ  cáº£m tháº¥y "rá»‘i nÃ£o" vá»›i ba cÃ¡i tÃªn viáº¿t táº¯t nÃ y? Äá»«ng lo! HÃ£y tÆ°á»Ÿng tÆ°á»£ng viá»‡c láº­p trÃ¬nh Java giá»‘ng nhÆ° viá»‡c xÃ¢y dá»±ng má»™t ngÃ´i nhÃ , vÃ  ba anh báº¡n nÃ y chÃ­nh lÃ  bá»™ dá»¥ng cá»¥ giÃºp báº¡n hoÃ n thÃ nh cÃ´ng viá»‡c Ä‘Ã³.

CÃ¹ng "má»• xáº»" tá»«ng anh chÃ ng nhÃ©!

---

#### 1. JVM (Java Virtual Machine) â€“ "Cá»— mÃ¡y áº£o" siÃªu nÄƒng lá»±c
HÃ£y nghÄ© vá» **JVM** nhÆ° má»™t ngÆ°á»i thÃ´ng ngÃ´n. 

MÃ¡y tÃ­nh cá»§a báº¡n thá»±c ra ráº¥t... ngÃ¢y ngÃ´, nÃ³ khÃ´ng hiá»ƒu code Java báº¡n viáº¿t Ä‘Ã¢u. NÃ³ chá»‰ hiá»ƒu mÃ£ mÃ¡y (0 vÃ  1). 
*   **Nhiá»‡m vá»¥:** JVM sáº½ nháº­n file Java Ä‘Ã£ biÃªn dá»‹ch (gá»i lÃ  bytecode) vÃ  dá»‹ch nÃ³ sang ngÃ´n ngá»¯ mÃ  há»‡ Ä‘iá»u hÃ nh hiá»ƒu Ä‘Æ°á»£c.
*   **Äáº·c Ä‘iá»ƒm:** JVM giÃºp Java cÃ³ tÃ­nh nÄƒng "Viáº¿t má»™t láº§n, cháº¡y má»i nÆ¡i". DÃ¹ báº¡n dÃ¹ng Windows, Mac hay Linux, chá»‰ cáº§n cÃ³ JVM phÃ¹ há»£p lÃ  xong!

> **Ghi nhá»›:** JVM lÃ  nÆ¡i code cá»§a báº¡n thá»±c sá»± "cháº¡y".

---

#### 2. JRE (Java Runtime Environment) â€“ "ThÃ¹ng Ä‘á»“ nghá»" Ä‘á»ƒ cháº¡y á»©ng dá»¥ng
Náº¿u báº¡n chá»‰ muá»‘n chÆ¡i má»™t trÃ² chÆ¡i viáº¿t báº±ng Java hoáº·c cháº¡y má»™t pháº§n má»m Java, báº¡n cáº§n **JRE**.

*   **BÃªn trong cÃ³ gÃ¬?** JRE chá»©a Ä‘á»±ng **JVM** bÃªn trong nÃ³, cá»™ng thÃªm má»™t bá»™ cÃ¡c thÆ° viá»‡n chuáº©n (nhÆ° thÆ° viá»‡n Ä‘á»ƒ váº½ hÃ¬nh, káº¿t ná»‘i máº¡ng...).
*   **Nhiá»‡m vá»¥:** NÃ³ cung cáº¥p mÃ´i trÆ°á»ng Ä‘áº§y Ä‘á»§ Ä‘á»ƒ má»™t chÆ°Æ¡ng trÃ¬nh Java cÃ³ thá»ƒ khá»Ÿi Ä‘á»™ng vÃ  hoáº¡t Ä‘á»™ng trÆ¡n tru.

> **Ghi nhá»›:** JRE = JVM + ThÆ° viá»‡n há»— trá»£. Náº¿u báº¡n chá»‰ lÃ  ngÆ°á»i dÃ¹ng (khÃ´ng pháº£i láº­p trÃ¬nh viÃªn), báº¡n chá»‰ cáº§n JRE.

---

#### 3. JDK (Java Development Kit) â€“ "XÆ°á»Ÿng sáº£n xuáº¥t" cho láº­p trÃ¬nh viÃªn
ÄÃ¢y chÃ­nh lÃ  thá»© mÃ  **Báº N** â€“ má»™t láº­p trÃ¬nh viÃªn tÆ°Æ¡ng lai â€“ cáº§n cÃ i Ä‘áº·t.

*   **BÃªn trong cÃ³ gÃ¬?** JDK bao gá»“m táº¥t cáº£ má»i thá»©: NÃ³ chá»©a **JRE** vÃ  kÃ¨m theo cÃ¡c cÃ´ng cá»¥ phÃ¡t triá»ƒn nhÆ° bá»™ biÃªn dá»‹ch (`javac`), bá»™ gá»¡ lá»—i (debugger), vÃ  tÃ i liá»‡u hÆ°á»›ng dáº«n.
*   **Nhiá»‡m vá»¥:** GiÃºp báº¡n viáº¿t code, kiá»ƒm tra lá»—i vÃ  Ä‘Ã³ng gÃ³i thÃ nh chÆ°Æ¡ng trÃ¬nh hoÃ n chá»‰nh.

> **Ghi nhá»›:** JDK = JRE + CÃ´ng cá»¥ phÃ¡t triá»ƒn. CÃ³ JDK lÃ  báº¡n cÃ³ táº¥t cáº£!

---

### TÃ³m láº¡i báº±ng má»™t sÆ¡ Ä‘á»“ nhá»:

```text
JDK (CÃ´ng cá»¥ láº­p trÃ¬nh + JRE)
  |
  â””â”€â”€ JRE (ThÆ° viá»‡n chuáº©n + JVM)
        |
        â””â”€â”€ JVM (MÃ¡y áº£o thá»±c thi code)
```

*   Báº¡n muá»‘n **cháº¡y** chÆ°Æ¡ng trÃ¬nh Java? CÃ i **JRE**.
*   Báº¡n muá»‘n **há»c vÃ  viáº¿t** chÆ°Æ¡ng trÃ¬nh Java? CÃ i **JDK**.
*   Thá»© gÃ¬ thá»±c sá»± **Ä‘á»c code** cá»§a báº¡n? ÄÃ³ lÃ  **JVM**.

Dá»… hiá»ƒu Ä‘Ãºng khÃ´ng nÃ o? BÃ¢y giá» thÃ¬ hÃ£y cÃ i Ä‘áº·t JDK vÃ  báº¯t Ä‘áº§u viáº¿t dÃ²ng code Ä‘áº§u tiÃªn thÃ´i!

   ChÃ o báº¡n! Báº¡n Ä‘ang báº¯t Ä‘áº§u hÃ nh trÃ¬nh chinh phá»¥c Java Ä‘Ãºng khÃ´ng? Äá»ƒ hiá»ƒu cÃ¡ch Java váº­n hÃ nh, chÃºng ta cáº§n lÃ m quen vá»›i "Bá»™ ba quyá»n lá»±c": **JVM**, **JRE** vÃ  **JDK**. 

Äá»«ng lo láº¯ng vá» nhá»¯ng tá»« viáº¿t táº¯t nÃ y, hÃ£y cÃ¹ng bÃ³c tÃ¡ch chÃºng má»™t cÃ¡ch tháº­t Ä‘Æ¡n giáº£n nhÃ©!

### 1. JVM (Java Virtual Machine) - "Cá»— mÃ¡y áº£o" siÃªu nÄƒng suáº¥t
HÃ£y tÆ°á»Ÿng tÆ°á»£ng JVM giá»‘ng nhÆ° má»™t **thÃ´ng dá»‹ch viÃªn** táº­n tá»¥y. 
*   **Nhiá»‡m vá»¥:** NÃ³ khÃ´ng hiá»ƒu mÃ£ code báº¡n viáº¿t trá»±c tiáº¿p Ä‘Ã¢u. NÃ³ chá»‰ Ä‘á»c tá»‡p `.class` (Bytecode) vÃ  dá»‹ch chÃºng sang ngÃ´n ngá»¯ mÃ  mÃ¡y tÃ­nh cá»§a báº¡n hiá»ƒu Ä‘Æ°á»£c.
*   **Äáº·c Ä‘iá»ƒm:** JVM giÃºp Java cÃ³ kháº£ nÄƒng "Viáº¿t má»™t láº§n, cháº¡y má»i nÆ¡i". DÃ¹ báº¡n dÃ¹ng Windows, Mac hay Linux, chá»‰ cáº§n cÃ³ JVM phÃ¹ há»£p, chÆ°Æ¡ng trÃ¬nh Java cá»§a báº¡n sáº½ cháº¡y mÆ°á»£t mÃ .

### 2. JRE (Java Runtime Environment) - "NhÃ  kho" phá»¥ tÃ¹ng
Náº¿u báº¡n chá»‰ muá»‘n **cháº¡y** má»™t á»©ng dá»¥ng Java (nhÆ° chÆ¡i game Minecraft cháº³ng háº¡n), báº¡n chá»‰ cáº§n JRE.
*   **BÃªn trong cÃ³ gÃ¬?** JRE chá»©a JVM bÃªn trong nÃ³, cá»™ng thÃªm má»™t bá»™ cÃ¡c thÆ° viá»‡n (libraries) vÃ  tá»‡p há»— trá»£ khÃ¡c.
*   **Nhiá»‡m vá»¥:** NÃ³ táº¡o ra mÃ´i trÆ°á»ng cáº§n thiáº¿t Ä‘á»ƒ chÆ°Æ¡ng trÃ¬nh Java cÃ³ thá»ƒ khá»Ÿi Ä‘á»™ng vÃ  hoáº¡t Ä‘á»™ng.
*   **Ghi nhá»›:** JRE = JVM + ThÆ° viá»‡n há»— trá»£.

### 3. JDK (Java Development Kit) - "Há»™p cÃ´ng cá»¥" cá»§a thá»£ xÃ¢y
ÄÃ¢y lÃ  thá»© mÃ  cÃ¡c láº­p trÃ¬nh viÃªn nhÆ° chÃºng ta cáº§n! 
*   **Nhiá»‡m vá»¥:** JDK cung cáº¥p má»i thá»© Ä‘á»ƒ báº¡n **viáº¿t** vÃ  **cháº¡y** pháº§n má»m Java.
*   **BÃªn trong cÃ³ gÃ¬?** NÃ³ bao gá»“m cáº£ JRE, cá»™ng thÃªm cÃ¡c cÃ´ng cá»¥ phÃ¡t triá»ƒn nhÆ° trÃ¬nh biÃªn dá»‹ch (javac), trÃ¬nh gá»¡ lá»—i (debugger), vÃ  tÃ i liá»‡u hÆ°á»›ng dáº«n.
*   **Ghi nhá»›:** JDK = JRE + CÃ´ng cá»¥ phÃ¡t triá»ƒn.

---

### TÃ³m táº¯t nhanh Ä‘á»ƒ báº¡n khÃ´ng bá»‹ rá»‘i:

| Äáº·c Ä‘iá»ƒm | JVM | JRE | JDK |
| :--- | :--- | :--- | :--- |
| **TÃªn Ä‘áº§y Ä‘á»§** | Java Virtual Machine | Java Runtime Environment | Java Development Kit |
| **Má»¥c Ä‘Ã­ch** | Cháº¡y mÃ£ Bytecode | Cung cáº¥p mÃ´i trÆ°á»ng Ä‘á»ƒ cháº¡y app | Viáº¿t vÃ  phÃ¡t triá»ƒn app |
| **Äá»‘i tÆ°á»£ng dÃ¹ng** | MÃ¡y tÃ­nh (ngáº§m Ä‘á»‹nh) | NgÆ°á»i dÃ¹ng cuá»‘i | Láº­p trÃ¬nh viÃªn (lÃ  báº¡n Ä‘Ã³!) |
| **ThÃ nh pháº§n** | Chá»‰ lÃ  thá»±c thi mÃ£ | JVM + ThÆ° viá»‡n | JRE + CÃ´ng cá»¥ (javac,...) |

**Lá»i khuyÃªn nhá»:** Náº¿u báº¡n Ä‘á»‹nh há»c láº­p trÃ¬nh, hÃ£y cÃ i Ä‘áº·t **JDK**. NÃ³ Ä‘Ã£ bao gá»“m táº¥t cáº£ nhá»¯ng gÃ¬ báº¡n cáº§n rá»“i! Báº¡n Ä‘Ã£ sáºµn sÃ ng Ä‘á»ƒ viáº¿t dÃ²ng code Ä‘áº§u tiÃªn chÆ°a?

   **JVM lÃ  gÃ¬ nhá»‰?**

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t "cá»— mÃ¡y áº£o" siÃªu nÄƒng lá»±c náº±m ngay trong mÃ¡y tÃ­nh cá»§a mÃ¬nh. ÄÃ³ chÃ­nh lÃ  **JVM (Java Virtual Machine)**. 

Nhiá»‡m vá»¥ cá»§a nÃ³ cá»±c ká»³ quan trá»ng: táº¡o ra má»™t mÃ´i trÆ°á»ng Ä‘á»ƒ cháº¡y cÃ¡c chÆ°Æ¡ng trÃ¬nh Java. Náº¿u khÃ´ng cÃ³ JVM, nhá»¯ng dÃ²ng mÃ£ Java cá»§a báº¡n chá»‰ lÃ  nhá»¯ng con chá»¯ vÃ´ há»“n thÃ´i!

DÆ°á»›i Ä‘Ã¢y lÃ  nhá»¯ng Ä‘iá»u "sá»‘ng cÃ²n" mÃ  báº¡n cáº§n biáº¿t vá» JVM:

*   **NÃ³ lÃ  má»™t pháº§n cá»§a JRE:** JVM náº±m gá»n bÃªn trong JRE (Java Runtime Environment). Báº¡n cá»© coi JRE lÃ  má»™t cÃ¡i há»™p Ä‘á»“ nghá», vÃ  JVM lÃ  cÃ´ng cá»¥ quan trá»ng nháº¥t trong Ä‘Ã³.
*   **NgÆ°á»i phiÃªn dá»‹ch táº­n tÃ¢m:** Khi báº¡n biÃªn dá»‹ch code Java, báº¡n nháº­n Ä‘Æ°á»£c **Bytecode**. NhÆ°ng mÃ¡y tÃ­nh láº¡i khÃ´ng hiá»ƒu Bytecode Ä‘Ã¢u! JVM sáº½ Ä‘á»©ng ra "thÃ´ng dá»‹ch" Bytecode Ä‘Ã³ thÃ nh ngÃ´n ngá»¯ mÃ¡y (machine code) Ä‘á»ƒ mÃ¡y tÃ­nh cÃ³ thá»ƒ hiá»ƒu vÃ  cháº¡y Ä‘Æ°á»£c.
*   **Vá»«a phá»¥ thuá»™c, vá»«a tá»± do:** 
    *   **JVM thÃ¬ phá»¥ thuá»™c ná»n táº£ng:** Má»—i há»‡ Ä‘iá»u hÃ nh (Windows, Mac, Linux) sáº½ cÃ³ má»™t báº£n JVM riÃªng. 
    *   **Bytecode thÃ¬ tá»± do:** File Bytecode cá»§a báº¡n láº¡i khÃ´ng quan tÃ¢m nÃ³ Ä‘ang á»Ÿ Ä‘Ã¢u. 
*   **PhÃ©p mÃ u "Viáº¿t má»™t láº§n, cháº¡y má»i nÆ¡i":** Nhá» cÃ³ JVM, báº¡n chá»‰ cáº§n viáº¿t code má»™t láº§n duy nháº¥t. Sau Ä‘Ã³, báº¡n cÃ³ thá»ƒ mang nÃ³ Ä‘i cháº¡y trÃªn báº¥t ká»³ há»‡ Ä‘iá»u hÃ nh nÃ o, miá»…n lÃ  á»Ÿ Ä‘Ã³ cÃ³ cÃ i JVM phÃ¹ há»£p. Tháº­t tiá»‡n lá»£i pháº£i khÃ´ng nÃ o?

   **JRE: NgÆ°á»i báº¡n Ä‘á»“ng hÃ nh giÃºp cháº¡y chÆ°Æ¡ng trÃ¬nh Java**

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n vá»«a viáº¿t xong má»™t pháº§n má»m cá»±c hay báº±ng ngÃ´n ngá»¯ Java. NhÆ°ng lÃ m sao Ä‘á»ƒ mÃ¡y tÃ­nh cÃ³ thá»ƒ hiá»ƒu vÃ  cháº¡y Ä‘Æ°á»£c nÃ³? ÄÃ³ chÃ­nh lÃ  lÃºc chÃºng ta cáº§n Ä‘áº¿n **JRE**!

**JRE** lÃ  viáº¿t táº¯t cá»§a **Java Runtime Environment** (MÃ´i trÆ°á»ng thá»±c thi Java). Báº¡n cÃ³ thá»ƒ coi nÃ³ nhÆ° má»™t "gÃ³i cÃ i Ä‘áº·t" Ä‘áº·c biá»‡t giÃºp mÃ¡y tÃ­nh cá»§a báº¡n sáºµn sÃ ng Ä‘á»ƒ cháº¡y cÃ¡c á»©ng dá»¥ng Java. 

BÃªn trong "chiáº¿c há»™p" JRE nÃ y cÃ³ gÃ¬?

*   **JVM (Java Virtual Machine):** ÄÃ¢y lÃ  "trÃ¡i tim" cá»§a há»‡ thá»‘ng, Ä‘Ã³ng vai trÃ² nhÆ° má»™t cá»— mÃ¡y áº£o giÃºp Ä‘á»c vÃ  thá»±c hiá»‡n cÃ¡c dÃ²ng lá»‡nh Java.
*   **ThÆ° viá»‡n lá»›p (Class Libraries):** Táº­p há»£p cÃ¡c mÃ£ nguá»“n cÃ³ sáºµn Ä‘á»ƒ há»— trá»£ chÆ°Æ¡ng trÃ¬nh hoáº¡t Ä‘á»™ng mÆ°á»£t mÃ .
*   **CÃ¡c thÃ nh pháº§n phá»¥ trá»£:** Nhá»¯ng cÃ´ng cá»¥ giÃºp káº¿t ná»‘i vÃ  váº­n hÃ nh á»©ng dá»¥ng trÃªn báº¥t ká»³ mÃ¡y tÃ­nh nÃ o.

NÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n: Náº¿u báº¡n chá»‰ muá»‘n **cháº¡y** má»™t chÆ°Æ¡ng trÃ¬nh Java trÃªn mÃ¡y tÃ­nh cá»§a mÃ¬nh, báº¡n chá»‰ cáº§n cÃ i Ä‘áº·t JRE lÃ  xong!

   ### **JDK lÃ  gÃ¬ nhá»‰?**

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang muá»‘n xÃ¢y dá»±ng má»™t ngÃ´i nhÃ  báº±ng gá»—. Báº¡n sáº½ cáº§n gÃ¬ nÃ o? Cháº¯c cháº¯n lÃ  cáº§n báº£n thiáº¿t káº¿, bÃºa, cÆ°a, Ä‘inh... vÃ  cáº£ má»™t máº£nh Ä‘áº¥t Ä‘á»ƒ Ä‘áº·t ngÃ´i nhÃ  lÃªn Ä‘Ã³ ná»¯a Ä‘Ãºng khÃ´ng?

Trong tháº¿ giá»›i Java, **JDK (Java Development Kit)** chÃ­nh lÃ  "bá»™ Ä‘á»“ nghá»" Ä‘áº§y quyá»n nÄƒng Ä‘Ã³!

*   **NÃ³ lÃ  gÃ¬?** JDK lÃ  má»™t bá»™ cÃ´ng cá»¥ phÃ¡t triá»ƒn pháº§n má»m giÃºp báº¡n vá»«a **táº¡o ra** (viáº¿t code), vá»«a **cháº¡y** Ä‘Æ°á»£c cÃ¡c chÆ°Æ¡ng trÃ¬nh Java.
*   **BÃªn trong cÃ³ gÃ¬?** JDK cá»±c ká»³ hÃ o phÃ³ng khi táº·ng kÃ¨m cho báº¡n:
    *   **CÃ¡c cÃ´ng cá»¥ phÃ¡t triá»ƒn:** Nhá»¯ng ngÆ°á»i báº¡n Ä‘á»“ng hÃ nh giÃºp báº¡n láº­p trÃ¬nh, theo dÃµi lá»—i (debugging) vÃ  giÃ¡m sÃ¡t xem chÆ°Æ¡ng trÃ¬nh cháº¡y cÃ³ á»•n khÃ´ng.
    *   **JRE (Java Runtime Environment):** ÄÃ¢y chÃ­nh lÃ  "máº£nh Ä‘áº¥t" Ä‘á»ƒ chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cÃ³ thá»ƒ thá»±c thi vÃ  cháº¡y mÆ°á»£t mÃ .

NÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n: Náº¿u khÃ´ng cÃ³ JDK, báº¡n sáº½ khÃ´ng thá»ƒ viáº¿t code Java vÃ  báº£o mÃ¡y tÃ­nh hiá»ƒu Ä‘Æ°á»£c báº¡n Ä‘ang muá»‘n lÃ m gÃ¬ Ä‘Ã¢u

   HÃ£y tÆ°á»Ÿng tÆ°á»£ng ba thÃ nh pháº§n nÃ y giá»‘ng nhÆ° cÃ¡c máº£nh ghÃ©p trong má»™t bá»©c tranh. Khi rÃ¡p chÃºng láº¡i vá»›i nhau, chÃºng ta sáº½ cÃ³ má»™t sÆ¡ Ä‘á»“ cá»±c ká»³ dá»… hiá»ƒu nhÆ° sau:

![SÆ¡ Ä‘á»“ minh há»a](link_hÃ¬nh_áº£nh_táº¡i_Ä‘Ã¢y)

NhÃ¬n vÃ o hÃ¬nh trÃªn, báº¡n sáº½ tháº¥y cÃ¡ch chÃºng "nÃ³i chuyá»‡n" vá»›i nhau:

*   **ThÃ nh pháº§n thá»© nháº¥t:** ÄÃ³ng vai trÃ² khá»Ÿi Ä‘áº§u.
*   **ThÃ nh pháº§n thá»© hai:** Xá»­ lÃ½ cÃ¡c bÆ°á»›c á»Ÿ giá»¯a.
*   **ThÃ nh pháº§n thá»© ba:** ÄÆ°a ra káº¿t quáº£ cuá»‘i cÃ¹ng.

Má»i thá»© tháº­t Ä‘Æ¡n giáº£n vÃ  rÃµ rÃ ng pháº£i khÃ´ng nÃ o? HÃ£y cÃ¹ng Ä‘i sÃ¢u vÃ o chi tiáº¿t nhÃ©

   ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i tháº¿ giá»›i Java! TrÆ°á»›c khi báº¯t Ä‘áº§u viáº¿t code, hÃ£y cÃ¹ng lÃ m quen vá»›i "Bá»™ ba quyá»n lá»±c" giÃºp Java váº­n hÃ nh nhÃ©. Äá»«ng lo, nÃ³ cá»±c ká»³ dá»… hiá»ƒu thÃ´i!

### 1. JVM (Java Virtual Machine) - "Cá»— mÃ¡y áº£o"
HÃ£y tÆ°á»Ÿng tÆ°á»£ng **JVM** nhÆ° má»™t ngÆ°á»i thÃ´ng dá»‹ch viÃªn táº­n tá»¥y. 
*   **Nhiá»‡m vá»¥:** NÃ³ Ä‘á»c mÃ£ Java cá»§a báº¡n vÃ  chuyá»ƒn nÃ³ thÃ nh ngÃ´n ngá»¯ mÃ  mÃ¡y tÃ­nh cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c.
*   **Äiá»ƒm Ä‘áº·c biá»‡t:** Nhá» cÃ³ JVM, báº¡n viáº¿t code má»™t láº§n nhÆ°ng cÃ³ thá»ƒ cháº¡y á»Ÿ báº¥t cá»© Ä‘Ã¢u (Windows, Mac, Linux).
*   **Ghi nhá»›:** JVM chá»‰ cháº¡y chÆ°Æ¡ng trÃ¬nh, nÃ³ khÃ´ng giÃºp báº¡n viáº¿t code Ä‘Ã¢u nhÃ©!

### 2. JRE (Java Runtime Environment) - "MÃ´i trÆ°á»ng thá»±c thi"
Náº¿u JVM lÃ  trÃ¡i tim, thÃ¬ **JRE** lÃ  cáº£ cÆ¡ thá»ƒ.
*   **Bao gá»“m:** NÃ³ chá»©a JVM bÃªn trong vÃ  cá»™ng thÃªm má»™t Ä‘á»‘ng "phá»¥ kiá»‡n" (cÃ¡c thÆ° viá»‡n mÃ£ máº«u) Ä‘á»ƒ chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cÃ³ thá»ƒ cháº¡y mÆ°á»£t mÃ .
*   **Sá»­ dá»¥ng khi nÃ o?** Náº¿u báº¡n chá»‰ muá»‘n **cháº¡y** má»™t trÃ² chÆ¡i hay pháº§n má»m viáº¿t báº±ng Java, báº¡n chá»‰ cáº§n cÃ i JRE lÃ  Ä‘á»§.

### 3. JDK (Java Development Kit) - "Bá»™ Ä‘á»“ nghá» cho láº­p trÃ¬nh viÃªn"
ÄÃ¢y chÃ­nh lÃ  thá»© **báº¡n** cáº§n!
*   **Bao gá»“m:** NÃ³ chá»©a táº¥t cáº£ má»i thá»©! Cáº£ JRE (Ä‘á»ƒ cháº¡y code) vÃ  cÃ¡c cÃ´ng cá»¥ quan trá»ng nhÆ° `javac` (trÃ¬nh biÃªn dá»‹ch) Ä‘á»ƒ biáº¿n file chá»¯ báº¡n viáº¿t thÃ nh file mÃ  mÃ¡y tÃ­nh cháº¡y Ä‘Æ°á»£c.
*   **Sá»­ dá»¥ng khi nÃ o?** Khi báº¡n muá»‘n **táº¡o ra** nhá»¯ng chÆ°Æ¡ng trÃ¬nh Java tuyá»‡t vá»i cá»§a riÃªng mÃ¬nh.

---

### TÃ³m láº¡i cho dá»… nhá»›:
*   **JVM:** TrÃ¡i tim (Cháº¡y mÃ£).
*   **JRE:** JVM + ThÆ° viá»‡n (MÃ´i trÆ°á»ng Ä‘á»ƒ cháº¡y).
*   **JDK:** JRE + CÃ´ng cá»¥ phÃ¡t triá»ƒn (Äá»ƒ láº­p trÃ¬nh viÃªn lÃ m viá»‡c).

<img src="images/JVM_JRE_JDK.png" width="400" height="400" />

**Máº¹o nhá»:** LÃ  má»™t láº­p trÃ¬nh viÃªn tÆ°Æ¡ng lai, báº¡n chá»‰ cáº§n táº£i vÃ  cÃ i Ä‘áº·t **JDK**. Tháº¿ lÃ  báº¡n Ä‘Ã£ cÃ³ Ä‘áº§y Ä‘á»§ "vÅ© khÃ­" trong tay rá»“i!

   **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

2. ### Táº¡i sao Java láº¡i lÃ  ngÃ´n ngá»¯ "Ä‘á»™c láº­p ná»n táº£ng"?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n viáº¿t má»™t bá»©c thÆ° báº±ng tiáº¿ng Viá»‡t. Náº¿u gá»­i cho má»™t ngÆ°á»i báº¡n á»Ÿ PhÃ¡p khÃ´ng biáº¿t tiáº¿ng Viá»‡t, há» sáº½ cháº³ng hiá»ƒu gÃ¬ cáº£. Báº¡n sáº½ pháº£i dá»‹ch bá»©c thÆ° Ä‘Ã³ sang tiáº¿ng PhÃ¡p. Trong tháº¿ giá»›i mÃ¡y tÃ­nh, cÃ¡c há»‡ Ä‘iá»u hÃ nh khÃ¡c nhau (nhÆ° Windows, Mac, hay Linux) cÅ©ng giá»‘ng nhÆ° nhá»¯ng ngÆ°á»i nÃ³i cÃ¡c ngÃ´n ngá»¯ khÃ¡c nhau váº­y.

ThÃ´ng thÆ°á»ng, khi báº¡n viáº¿t code báº±ng cÃ¡c ngÃ´n ngá»¯ nhÆ° C hay C++, chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n sáº½ Ä‘Æ°á»£c biÃªn dá»‹ch trá»±c tiáº¿p thÃ nh "ngÃ´n ngá»¯ mÃ¡y" mÃ  mÃ¡y tÃ­nh Ä‘Ã³ hiá»ƒu Ä‘Æ°á»£c. NhÆ°ng cÃ³ má»™t váº¥n Ä‘á»: ngÃ´n ngá»¯ mÃ¡y cá»§a Windows khÃ´ng giá»‘ng vá»›i ngÃ´n ngá»¯ mÃ¡y cá»§a Mac. Tháº¿ lÃ  xong! Code cá»§a báº¡n bá»‹ "káº¹t" trÃªn má»™t ná»n táº£ng duy nháº¥t.

**NhÆ°ng Java thÃ¬ khÃ¡c!** Java cÃ³ má»™t "bÃ­ kÃ­p" riÃªng.

#### Quy trÃ¬nh hoáº¡t Ä‘á»™ng cá»§a Java:

1.  **Viáº¿t code:** Báº¡n viáº¿t mÃ£ nguá»“n trong cÃ¡c file `.java`.
2.  **BiÃªn dá»‹ch (Compile):** Thay vÃ¬ dá»‹ch tháº³ng ra ngÃ´n ngá»¯ mÃ¡y, trÃ¬nh biÃªn dá»‹ch Java (`javac`) sáº½ dá»‹ch code cá»§a báº¡n thÃ nh má»™t thá»© gá»i lÃ  **Bytecode** (lÆ°u trong file `.class`).
3.  **Cháº¡y má»i nÆ¡i:** Bytecode nÃ y khÃ´ng dÃ nh riÃªng cho Windows hay Mac. NÃ³ lÃ  má»™t loáº¡i ngÃ´n ngá»¯ trung gian.

#### "Vá»‹ cá»©u tinh" mang tÃªn JVM

Äá»ƒ Ä‘á»c Ä‘Æ°á»£c Bytecode, má»—i mÃ¡y tÃ­nh cáº§n má»™t "thÃ´ng dá»‹ch viÃªn" gá»i lÃ  **JVM (Java Virtual Machine)**.

*   Náº¿u báº¡n dÃ¹ng Windows, báº¡n cÃ i JVM báº£n cho Windows.
*   Náº¿u báº¡n dÃ¹ng Mac, báº¡n cÃ i JVM báº£n cho Mac.

Khi báº¡n Ä‘Æ°a file `.class` (Bytecode) cho JVM, nÃ³ sáº½ nhanh chÃ³ng dá»‹ch sang ngÃ´n ngá»¯ mÃ  mÃ¡y tÃ­nh Ä‘Ã³ hiá»ƒu Ä‘Æ°á»£c ngay táº¡i thá»i Ä‘iá»ƒm cháº¡y.

#### TÃ³m láº¡i:

*   **Viáº¿t má»™t láº§n (Write Once):** Báº¡n chá»‰ cáº§n viáº¿t code vÃ  biÃªn dá»‹ch ra Bytecode má»™t láº§n duy nháº¥t.
*   **Cháº¡y má»i nÆ¡i (Run Anywhere):** Báº¥t cá»© thiáº¿t bá»‹ nÃ o cÃ³ cÃ i JVM Ä‘á»u cÃ³ thá»ƒ hiá»ƒu vÃ  cháº¡y Ä‘Æ°á»£c file Bytecode Ä‘Ã³.

ÄÃ³ chÃ­nh lÃ  lÃ½ do táº¡i sao ngÆ°á»i ta gá»i Java lÃ  ngÃ´n ngá»¯ **Ä‘á»™c láº­p ná»n táº£ng** (Platform Independent). Báº¡n lo pháº§n viáº¿t code, cÃ²n viá»‡c "nÃ³i chuyá»‡n" vá»›i pháº§n cá»©ng Ä‘Ã£ cÃ³ JVM lo

   Java lÃ  má»™t ngÃ´n ngá»¯ "Ä‘á»™c láº­p vá»›i ná»n táº£ng". Nghe cÃ³ váº» to tÃ¡t nhá»‰? NhÆ°ng thá»±c ra nÃ³ cá»±c ká»³ Ä‘Æ¡n giáº£n!

ThÃ´ng thÆ°á»ng, khi báº¡n viáº¿t code, mÃ¡y tÃ­nh khÃ´ng hiá»ƒu ngay Ä‘Æ°á»£c Ä‘Ã¢u. Báº¡n cáº§n má»™t trÃ¬nh biÃªn dá»‹ch Ä‘á»ƒ dá»‹ch code Ä‘Ã³ sang ngÃ´n ngá»¯ mÃ¡y. Váº¥n Ä‘á» lÃ  má»—i há»‡ Ä‘iá»u hÃ nh (nhÆ° Windows hay macOS) láº¡i nÃ³i má»™t thá»© tiáº¿ng khÃ¡c nhau.

NhÆ°ng Java thÃ¬ khÃ¡c! Thay vÃ¬ dá»‹ch tháº³ng sang ngÃ´n ngá»¯ cá»§a má»™t mÃ¡y tÃ­nh cá»¥ thá»ƒ, Java dá»‹ch code cá»§a báº¡n thÃ nh má»™t thá»© gá»i lÃ  **bytecode**.

ÄÃ¢y lÃ  cÃ¡ch phÃ©p mÃ u xáº£y ra:

*   **Bytecode lÃ  "ngÃ´n ngá»¯ chung":** NÃ³ khÃ´ng dÃ nh riÃªng cho Windows, cÅ©ng cháº³ng dÃ nh riÃªng cho Mac.
*   **JVM (Java Virtual Machine) lÃ  "thÃ´ng dá»‹ch viÃªn":** Báº¥t ká»³ thiáº¿t bá»‹ nÃ o cÃ³ cÃ i Ä‘áº·t JVM Ä‘á»u cÃ³ thá»ƒ Ä‘á»c Ä‘Æ°á»£c bytecode nÃ y vÃ  cháº¡y chÆ°Æ¡ng trÃ¬nh Java mÆ°á»£t mÃ .

CÃ¡c láº­p trÃ¬nh viÃªn gá»i kháº£ nÄƒng nÃ y lÃ  **"Write Once, Run Anywhere" (Viáº¿t má»™t láº§n, cháº¡y má»i nÆ¡i - WORA)**.

HÃ£y tÆ°á»Ÿng tÆ°á»£ng xem:
1.  Báº¡n ngá»“i gÃµ code Java trÃªn má»™t chiáº¿c mÃ¡y tÃ­nh cháº¡y **Windows**.
2.  Báº¡n biÃªn dá»‹ch nÃ³.
3.  Báº¡n cáº§m file Ä‘Ã³ sang má»™t chiáº¿c mÃ¡y **macOS** hoáº·c **Linux** Ä‘á»ƒ cháº¡y.

VÃ  Ä‘oÃ¡n xem? NÃ³ váº«n hoáº¡t Ä‘á»™ng hoÃ n háº£o mÃ  báº¡n cháº³ng cáº§n sá»­a dÃ¹ chá»‰ má»™t dÃ²ng code! Tháº­t tuyá»‡t vá»i Ä‘Ãºng khÃ´ng?

   HÃ£y nhÃ¬n vÃ o sÆ¡ Ä‘á»“ dÆ°á»›i Ä‘Ã¢y Ä‘á»ƒ hiá»ƒu táº¡i sao Java láº¡i cÃ³ kháº£ nÄƒng "cháº¡y á»Ÿ má»i nÆ¡i" (platform independence) cá»±c ká»³ lá»£i háº¡i nhÃ©:

![SÆ¡ Ä‘á»“ minh há»a tÃ­nh Ä‘á»™c láº­p ná»n táº£ng cá»§a Java]

Äá»ƒ hiá»ƒu tÃ­nh nÄƒng nÃ y hoáº¡t Ä‘á»™ng tháº¿ nÃ o, chÃºng ta hÃ£y Ä‘i tá»«ng bÆ°á»›c má»™t:

1.  **Viáº¿t mÃ£ nguá»“n (Source Code):**
    Báº¡n báº¯t Ä‘áº§u báº±ng viá»‡c viáº¿t mÃ£ trong má»™t file cÃ³ Ä‘uÃ´i lÃ  `.java`. ÄÃ¢y lÃ  ngÃ´n ngá»¯ mÃ  con ngÆ°á»i chÃºng ta cÃ³ thá»ƒ Ä‘á»c vÃ  hiá»ƒu Ä‘Æ°á»£c.

2.  **BiÃªn dá»‹ch thÃ nh Bytecode:**
    Thay vÃ¬ dá»‹ch tháº³ng sang ngÃ´n ngá»¯ mÃ  mÃ¡y tÃ­nh (nhÆ° Windows hay Mac) hiá»ƒu ngay, trÃ¬nh biÃªn dá»‹ch Java (`javac`) sáº½ dá»‹ch mÃ£ cá»§a báº¡n sang má»™t dáº¡ng trung gian gá»i lÃ  **Bytecode** (file `.class`). 
    *   *BÃ­ máº­t á»Ÿ Ä‘Ã¢y lÃ :* Bytecode khÃ´ng dÃ nh cho báº¥t ká»³ chiáº¿c mÃ¡y tÃ­nh cá»¥ thá»ƒ nÃ o cáº£!

3.  **MÃ¡y áº£o Java (JVM) - NgÆ°á»i hÃ¹ng tháº§m láº·ng:**
    ÄÃ¢y má»›i lÃ  pháº§n thÃº vá»‹! Äá»ƒ cháº¡y Ä‘Æ°á»£c file `.class` Ä‘Ã³, má»—i há»‡ Ä‘iá»u hÃ nh (Windows, Mac hay Linux) sáº½ cÃ³ má»™t "thÃ´ng dá»‹ch viÃªn" riÃªng gá»i lÃ  **JVM (Java Virtual Machine)**.

4.  **Cháº¡y á»Ÿ má»i nÆ¡i:**
    *   Báº¡n chá»‰ cáº§n viáº¿t chÆ°Æ¡ng trÃ¬nh **má»™t láº§n duy nháº¥t**.
    *   Báº¡n táº¡o ra file Bytecode.
    *   Sau Ä‘Ã³, báº¡n cÃ³ thá»ƒ mang file Bytecode Ä‘Ã³ sang mÃ¡y Windows, mÃ¡y Mac hay mÃ¡y Linux. Miá»…n lÃ  mÃ¡y Ä‘Ã³ cÃ³ cÃ i JVM, chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n sáº½ cháº¡y "vÃ¨o vÃ¨o" mÃ  khÃ´ng cáº§n sá»­a láº¡i má»™t dÃ²ng code nÃ o!

ÄÃ³ chÃ­nh lÃ  lÃ½ do cÃ¡c láº­p trÃ¬nh viÃªn Java hay rá»‰ tai nhau cÃ¢u kháº©u hiá»‡u ná»•i tiáº¿ng: **"Write Once, Run Anywhere"** (Viáº¿t má»™t láº§n, cháº¡y má»i nÆ¡i)

   ![Screenshot](images/JavaIndependent.png)

   **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

3. ### JVM hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o nhá»‰?

ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i tháº¿ giá»›i bÃªn trong cá»§a Java! Báº¡n Ä‘Ã£ bao giá» tháº¯c máº¯c Ä‘iá»u gÃ¬ thá»±c sá»± xáº£y ra khi báº¡n nháº¥n nÃºt "Run" chÆ°a? HÃ£y cÃ¹ng khÃ¡m phÃ¡ cá»— mÃ¡y ká»³ diá»‡u mang tÃªn **JVM (Java Virtual Machine)** nhÃ©!

#### 1. Tá»« mÃ£ nguá»“n Ä‘áº¿n Bytecode
Äáº§u tiÃªn, báº¡n viáº¿t code trong file `.java`. NhÆ°ng mÃ¡y tÃ­nh thÃ¬ "ngá»‘c" láº¯m, nÃ³ khÃ´ng hiá»ƒu ngÃ´n ngá»¯ cá»§a con ngÆ°á»i Ä‘Ã¢u. Tháº¿ nÃªn, chÃºng ta cáº§n má»™t trÃ¬nh biÃªn dá»‹ch (**Compiler**).

*   **Báº¡n lÃ m:** Viáº¿t code trong file `Hello.java`.
*   **Compiler lÃ m:** Chuyá»ƒn nÃ³ thÃ nh file `Hello.class`.

CÃ¡i file `.class` nÃ y chá»©a má»™t thá»© gá»i lÃ  **Bytecode**. HÃ£y coi Bytecode nhÆ° má»™t loáº¡i ngÃ´n ngá»¯ trung gian mÃ  chá»‰ JVM má»›i hiá»ƒu Ä‘Æ°á»£c. NÃ³ cá»±c ká»³ quan trá»ng vÃ¬ nÃ³ giÃºp Java cÃ³ thá»ƒ "cháº¡y á»Ÿ báº¥t cá»© Ä‘Ã¢u"!

#### 2. Ba bÆ°á»›c nháº£y cá»§a JVM
Khi báº¡n cháº¡y chÆ°Æ¡ng trÃ¬nh, JVM sáº½ thá»±c hiá»‡n ba nhiá»‡m vá»¥ chÃ­nh:

1.  **Náº¡p mÃ£ (Class Loader):**
    JVM tÃ¬m náº¡p táº¥t cáº£ cÃ¡c file `.class` cáº§n thiáº¿t Ä‘á»ƒ cháº¡y chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n. NÃ³ giá»‘ng nhÆ° viá»‡c gom Ä‘á»§ nguyÃªn liá»‡u trÆ°á»›c khi náº¥u Äƒn váº­y.

2.  **Kiá»ƒm tra mÃ£ (Bytecode Verifier):**
    JVM ráº¥t cáº©n tháº­n! NÃ³ sáº½ kiá»ƒm tra xem code cá»§a báº¡n cÃ³ an toÃ n khÃ´ng, cÃ³ vi pháº¡m quy táº¯c báº£o máº­t nÃ o khÃ´ng. Náº¿u cÃ³ ai Ä‘Ã³ cá»‘ tÃ¬nh sá»­a file `.class` Ä‘á»ƒ gÃ¢y háº¡i, JVM sáº½ phÃ¡t hiá»‡n ra ngay.

3.  **Thá»±c thi mÃ£ (Execution Engine):**
    ÄÃ¢y lÃ  nÆ¡i phÃ©p mÃ u xáº£y ra. JVM chuyá»ƒn Bytecode thÃ nh ngÃ´n ngá»¯ mÃ¡y (0 vÃ  1) Ä‘á»ƒ chip xá»­ lÃ½ cá»§a mÃ¡y tÃ­nh cÃ³ thá»ƒ hiá»ƒu vÃ  cháº¡y.

#### 3. Bá»™ nhá»› cá»§a JVM (VÃ¹ng quan trá»ng!)
Trong khi cháº¡y, JVM chia bá»™ nhá»› ra thÃ nh nhiá»u khu vá»±c. CÃ³ hai khu vá»±c mÃ  báº¡n cáº§n nhá»› nháº¥t:

*   **Stack:** NÆ¡i lÆ°u trá»¯ cÃ¡c lá»i gá»i hÃ m vÃ  cÃ¡c biáº¿n cá»¥c bá»™. NÃ³ hoáº¡t Ä‘á»™ng ráº¥t nhanh vÃ  ngÄƒn náº¯p.
*   **Heap:** ÄÃ¢y lÃ  "bÃ£i Ä‘áº¥t trá»‘ng" khá»•ng lá»“ nÆ¡i cÃ¡c Ä‘á»‘i tÆ°á»£ng (Objects) sinh sá»‘ng. Khi báº¡n dÃ¹ng tá»« khÃ³a `new`, má»™t Ä‘á»‘i tÆ°á»£ng má»›i sáº½ Ä‘Æ°á»£c táº¡o ra á»Ÿ Ä‘Ã¢y.

#### 4. Garbage Collector (NgÆ°á»i dá»n rÃ¡c táº­n tá»¥y)
Trong cÃ¡c ngÃ´n ngá»¯ cÅ©, báº¡n pháº£i tá»± tay dá»n dáº¹p bá»™ nhá»›. NhÆ°ng vá»›i Java, báº¡n cÃ³ má»™t "quáº£n gia" riÃªng gá»i lÃ  **Garbage Collector (GC)**.
*   Khi má»™t Ä‘á»‘i tÆ°á»£ng trong vÃ¹ng **Heap** khÃ´ng cÃ²n ai dÃ¹ng Ä‘áº¿n ná»¯a, GC sáº½ tá»± Ä‘á»™ng Ä‘áº¿n vÃ  "há»‘t" nÃ³ Ä‘i Ä‘á»ƒ giáº£i phÃ³ng chá»— trá»‘ng. Tháº­t tiá»‡n lá»£i pháº£i khÃ´ng?

#### TÃ³m táº¯t quy trÃ¬nh:
```text
Viáº¿t Code (.java) 
    -> BiÃªn dá»‹ch (javac) 
        -> Bytecode (.class) 
            -> JVM náº¡p & kiá»ƒm tra 
                -> Thá»±c thi trÃªn mÃ¡y tÃ­nh cá»§a báº¡n!
```

**Ghi nhá»›:** JVM chÃ­nh lÃ  "thÃ´ng dá»‹ch viÃªn" giÃºp code Java cá»§a báº¡n cÃ³ thá»ƒ cháº¡y mÆ°á»£t mÃ  trÃªn Windows, Mac hay Linux mÃ  khÃ´ng cáº§n thay Ä‘á»•i báº¥t cá»© dÃ²ng code nÃ o

   HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n vá»«a viáº¿t xong má»™t chÆ°Æ¡ng trÃ¬nh Java. LÃ m tháº¿ nÃ o Ä‘á»ƒ mÃ¡y tÃ­nh thá»±c sá»± hiá»ƒu vÃ  cháº¡y Ä‘Æ°á»£c nÃ³? ÄÃ³ chÃ­nh lÃ  lÃºc **JVM (Java Virtual Machine)** xuáº¥t hiá»‡n!

NghÄ© vá» JVM nhÆ° má»™t "cá»— mÃ¡y áº£o" siÃªu nÄƒng suáº¥t. NÃ³ lÃ  má»™t pháº§n cá»±c ká»³ quan trá»ng náº±m bÃªn trong JRE (Java Runtime Environment). Nhiá»‡m vá»¥ chÃ­nh cá»§a nÃ³? Cháº¡y cÃ¡c Ä‘oáº¡n mÃ£ bytecode mÃ  trÃ¬nh biÃªn dá»‹ch Java Ä‘Ã£ táº¡o ra cho báº¡n.

ÄÃ¢y lÃ  lÃ½ do táº¡i sao Java láº¡i cá»±c ká»³ "ngáº§u":

*   **PhÃ©p mÃ u mang tÃªn WORA:** Viáº¿t má»™t láº§n, cháº¡y má»i nÆ¡i (Write Once, Run Anywhere). Báº¡n cÃ³ thá»ƒ viáº¿t code trÃªn mÃ¡y Windows, nhÆ°ng nÃ³ váº«n sáº½ cháº¡y mÆ°á»£t mÃ  trÃªn Mac hay Linux mÃ  cháº³ng cáº§n sá»­a má»™t dÃ²ng code nÃ o. Miá»…n lÃ  há»‡ thá»‘ng Ä‘Ã³ cÃ³ cÃ i Ä‘áº·t JVM!
*   **Quy trÃ¬nh hoáº¡t Ä‘á»™ng:**
    1.  Báº¡n viáº¿t code trong file `.java`.
    2.  Báº¡n biÃªn dá»‹ch nÃ³ thÃ nh file `.class` (file nÃ y chá»©a mÃ£ **bytecode** - ngÃ´n ngá»¯ riÃªng cá»§a JVM).
    3.  File `.class` nÃ y sáº½ Ä‘Æ°á»£c Ä‘Æ°a vÃ o JVM. Táº¡i Ä‘Ã¢y, nÃ³ sáº½ tráº£i qua má»™t vÃ i bÆ°á»›c xá»­ lÃ½ quan trá»ng Ä‘á»ƒ biáº¿n thÃ nh hÃ nh Ä‘á»™ng thá»±c táº¿ trÃªn mÃ¡y tÃ­nh.

TÃ³m láº¡i, JVM giá»‘ng nhÆ° má»™t thÃ´ng dá»‹ch viÃªn Ä‘a nÄƒng, giÃºp chÆ°Æ¡ng trÃ¬nh Java cá»§a báº¡n "nÃ³i chuyá»‡n" Ä‘Æ°á»£c vá»›i báº¥t ká»³ loáº¡i mÃ¡y tÃ­nh nÃ o!

   JVM Ä‘Æ°á»£c cáº¥u táº¡o tá»« ba thÃ nh pháº§n chÃ­nh, giá»‘ng nhÆ° má»™t bá»™ mÃ¡y váº­n hÃ nh nhá»‹p nhÃ ng váº­y:

*   **Class Loader (Bá»™ náº¡p lá»›p):** HÃ£y tÆ°á»Ÿng tÆ°á»£ng Ä‘Ã¢y lÃ  ngÆ°á»i thá»§ thÆ°. Khi chÆ°Æ¡ng trÃ¬nh báº¯t Ä‘áº§u cháº¡y, Class Loader sáº½ Ä‘i tÃ¬m cÃ¡c tá»‡p `.class` cá»§a báº¡n vÃ  náº¡p chÃºng vÃ o bá»™ nhá»›. NÃ³ Ä‘áº£m báº£o má»i thá»© Ä‘Ã£ sáºµn sÃ ng trÆ°á»›c khi báº¯t Ä‘áº§u cuá»™c chÆ¡i.

*   **Runtime Data Areas (VÃ¹ng dá»¯ liá»‡u thá»±c thi):** ÄÃ¢y chÃ­nh lÃ  "kho chá»©a" cá»§a JVM. Khi chÆ°Æ¡ng trÃ¬nh cháº¡y, nÃ³ cáº§n nÆ¡i Ä‘á»ƒ cáº¥t giá»¯ dá»¯ liá»‡u, biáº¿n vÃ  cÃ¡c Ä‘á»‘i tÆ°á»£ng. JVM chia kho nÃ y thÃ nh nhiá»u khu vá»±c nhá» (nhÆ° Stack hay Heap) Ä‘á»ƒ quáº£n lÃ½ má»i thá»© ngÄƒn náº¯p vÃ  khÃ´ng bá»‹ láº«n lá»™n.

*   **Execution Engine (Bá»™ mÃ¡y thá»±c thi):** ÄÃ¢y lÃ  "trÃ¡i tim" cá»§a cáº£ há»‡ thá»‘ng. Sau khi mÃ£ cá»§a báº¡n Ä‘Ã£ Ä‘Æ°á»£c náº¡p vÃ o bá»™ nhá»›, Execution Engine sáº½ Ä‘á»c tá»«ng dÃ²ng lá»‡nh vÃ  thá»±c hiá»‡n chÃºng. NÃ³ biáº¿n nhá»¯ng tá»‡p bytecode khÃ´ khan thÃ nh nhá»¯ng hÃ nh Ä‘á»™ng thá»±c táº¿ mÃ  mÃ¡y tÃ­nh cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c.

   1. ### Há»‡ thá»‘ng náº¡p lá»›p (Class Loader Subsystem)

ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i bá»™ nÃ£o Ä‘iá»u hÃ nh cá»§a Java! HÃ£y tÆ°á»Ÿng tÆ°á»£ng Java Virtual Machine (JVM) giá»‘ng nhÆ° má»™t nhÃ  mÃ¡y khá»•ng lá»“. TrÆ°á»›c khi nhÃ  mÃ¡y cÃ³ thá»ƒ sáº£n xuáº¥t ra báº¥t cá»© thá»© gÃ¬, nÃ³ cáº§n cÃ³ báº£n thiáº¿t káº¿. Há»‡ thá»‘ng náº¡p lá»›p (Class Loader Subsystem) chÃ­nh lÃ  bá»™ pháº­n chuyÃªn Ä‘i tÃ¬m vÃ  mang nhá»¯ng báº£n thiáº¿t káº¿ Ä‘Ã³ (cÃ¡c file `.class`) vÃ o trong nhÃ  mÃ¡y.

NÃ³ khÃ´ng chá»‰ lÃ m má»™t viá»‡c Ä‘Ã¢u, mÃ  cÃ³ táº­n ba cÃ´ng Ä‘oáº¡n quan trá»ng: **Náº¡p (Loading)**, **LiÃªn káº¿t (Linking)**, vÃ  **Khá»Ÿi táº¡o (Initialization)**. HÃ£y cÃ¹ng khÃ¡m phÃ¡ nhÃ©!

---

### 1. CÃ´ng Ä‘oáº¡n Náº¡p (Loading)

ÄÃ¢y lÃ  lÃºc Class Loader Ä‘i tÃ¬m file `.class` trÃªn á»• cá»©ng vÃ  Ä‘Æ°a nÃ³ vÃ o bá»™ nhá»›. CÃ³ ba "anh nhÃ¢n viÃªn" phá»¥ trÃ¡ch viá»‡c nÃ y theo thá»© tá»± Æ°u tiÃªn:

*   **Bootstrap Class Loader:** Anh cáº£ quyá»n lá»±c nháº¥t. ChuyÃªn náº¡p cÃ¡c lá»›p cá»‘t lÃµi cá»§a Java (nhÆ° `java.lang`, `java.util`) tá»« thÆ° má»¥c ná»™i bá»™ cá»§a JRE.
*   **Extension Class Loader:** Anh thá»£ phá»¥. Náº¡p cÃ¡c lá»›p má»Ÿ rá»™ng náº±m trong thÆ° má»¥c `jre/lib/ext`.
*   **Application Class Loader:** NgÆ°á»i báº¡n Ä‘á»“ng hÃ nh cá»§a láº­p trÃ¬nh viÃªn. Anh nÃ y sáº½ tÃ¬m cÃ¡c lá»›p mÃ  **chÃ­nh báº¡n** viáº¿t ra dá»±a trÃªn Ä‘Æ°á»ng dáº«n `CLASSPATH`.

---

### 2. CÃ´ng Ä‘oáº¡n LiÃªn káº¿t (Linking)

Sau khi Ä‘Ã£ cÃ³ file trong tay, JVM cáº§n kiá»ƒm tra xem file Ä‘Ã³ cÃ³ "xá»‹n" khÃ´ng vÃ  chuáº©n bá»‹ chá»— ngá»“i cho nÃ³. CÃ´ng Ä‘oáº¡n nÃ y chia lÃ m 3 bÆ°á»›c nhá»:

1.  **XÃ¡c minh (Verification):** JVM sáº½ soi cá»±c ká»³ ká»¹ Ä‘á»ƒ Ä‘áº£m báº£o file `.class` Ä‘Ãºng cáº¥u trÃºc vÃ  khÃ´ng gÃ¢y háº¡i cho há»‡ thá»‘ng. Náº¿u file bá»‹ lá»—i hoáº·c bá»‹ chá»‰nh sá»­a trÃ¡i phÃ©p, Java sáº½ "nÃ©m" ra lá»—i ngay láº­p tá»©c!
2.  **Chuáº©n bá»‹ (Preparation):** á» bÆ°á»›c nÃ y, JVM sáº½ cáº¥p phÃ¡t bá»™ nhá»› cho cÃ¡c biáº¿n tÄ©nh (static variables) vÃ  gÃ¡n cho chÃºng giÃ¡ trá»‹ máº·c Ä‘á»‹nh (vÃ­ dá»¥: `int` sáº½ lÃ  `0`, `boolean` lÃ  `false`).
3.  **Giáº£i quyáº¿t (Resolution):** ÄÃ¢y lÃ  lÃºc JVM thay tháº¿ cÃ¡c tÃªn gá»i mang tÃ­nh tÆ°á»£ng trÆ°ng trong code báº±ng cÃ¡c Ä‘á»‹a chá»‰ bá»™ nhá»› tháº­t sá»±.

---

### 3. CÃ´ng Ä‘oáº¡n Khá»Ÿi táº¡o (Initialization)

ÄÃ¢y lÃ  bÆ°á»›c cuá»‘i cÃ¹ng vÃ  cÅ©ng lÃ  lÃºc cÃ¡c biáº¿n tÄ©nh (static variables) nháº­n giÃ¡ trá»‹ tháº­t mÃ  báº¡n Ä‘Ã£ gÃ¡n trong code. CÃ¡c khá»‘i lá»‡nh `static { ... }` cÅ©ng sáº½ Ä‘Æ°á»£c cháº¡y á»Ÿ bÆ°á»›c nÃ y.

**VÃ­ dá»¥ nhá» vá» cÃ¡ch nÃ³ hoáº¡t Ä‘á»™ng:**

```java
public class HelloJava {
    static int age = 25; // BÆ°á»›c 'Preparation' sáº½ cho age = 0, 
                         // nhÆ°ng bÆ°á»›c 'Initialization' má»›i cho age = 25!

    public static void main(String[] args) {
        System.out.println("ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i tháº¿ giá»›i Java!");
    }
}
```

**TÃ³m láº¡i lÃ  gÃ¬?**
Há»‡ thá»‘ng náº¡p lá»›p hoáº¡t Ä‘á»™ng theo cÆ¡ cháº¿ **á»¦y thÃ¡c (Delegation Model)**. Khi cáº§n tÃ¬m má»™t lá»›p, nÃ³ sáº½ há»i anh cáº£ (Bootstrap) trÆ°á»›c, náº¿u khÃ´ng tháº¥y má»›i há»i Ä‘áº¿n anh phá»¥ (Extension), vÃ  cuá»‘i cÃ¹ng má»›i Ä‘áº¿n lÆ°á»£t Application Class Loader. Ráº¥t ngÄƒn náº¯p vÃ  báº£o máº­t!
   2. HÃ£y tÆ°á»Ÿng tÆ°á»£ng JVM (MÃ¡y áº£o Java) giá»‘ng nhÆ° má»™t há»‡ Ä‘iá»u hÃ nh thu nhá». Khi nÃ³ cháº¡y chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n, nÃ³ cáº§n má»™t nÆ¡i Ä‘á»ƒ "bÃ y biá»‡n" Ä‘á»“ Ä‘áº¡c. NÆ¡i Ä‘Ã³ chÃ­nh lÃ  **Runtime Data Areas** (VÃ¹ng dá»¯ liá»‡u thá»±c thi) â€” hay nÃ´m na lÃ  **Bá»™ nhá»› cá»§a JVM**.

Äá»«ng lo láº¯ng! ChÃºng ta sáº½ chia nhá» nÃ³ ra thÃ nh tá»«ng khu vá»±c dá»… hiá»ƒu nhÆ° sau:

### 1. Khu vá»±c dÃ nh cho táº¥t cáº£ má»i ngÆ°á»i (Shared Areas)
Hai khu vá»±c nÃ y giá»‘ng nhÆ° "phÃ²ng khÃ¡ch" vÃ  "nhÃ  báº¿p", nÆ¡i má»i luá»“ng (thread) trong chÆ°Æ¡ng trÃ¬nh Ä‘á»u cÃ³ thá»ƒ ra vÃ o.

*   **Heap (VÃ¹ng nhá»› Heap):**
    *   ÄÃ¢y lÃ  "nhÃ  kho" khá»•ng lá»“. Má»i Ä‘á»‘i tÆ°á»£ng (Object) báº¡n táº¡o ra báº±ng tá»« khÃ³a `new` Ä‘á»u náº±m á»Ÿ Ä‘Ã¢y.
    *   NÃ³ lÃ  nÆ¡i lá»›n nháº¥t vÃ  cÅ©ng lÃ  nÆ¡i mÃ  bá»™ dá»n rÃ¡c **Garbage Collector (GC)** lÃ m viá»‡c chÄƒm chá»‰ nháº¥t Ä‘á»ƒ dá»n dáº¹p cÃ¡c mÃ³n Ä‘á»“ cÅ© khÃ´ng dÃ¹ng ná»¯a.
*   **Method Area (VÃ¹ng nhá»› phÆ°Æ¡ng thá»©c):**
    *   HÃ£y coi Ä‘Ã¢y lÃ  "thÆ° viá»‡n". NÃ³ lÆ°u trá»¯ cáº¥u trÃºc cá»§a cÃ¡c lá»›p (class), thÃ´ng tin vá» cÃ¡c trÆ°á»ng (field), vÃ  mÃ£ lá»‡nh cá»§a cÃ¡c phÆ°Æ¡ng thá»©c.
    *   NÃ³ Ä‘Æ°á»£c táº¡o ra khi JVM khá»Ÿi Ä‘á»™ng.

---

### 2. Khu vá»±c riÃªng tÆ° (Per-thread Areas)
Má»—i khi má»™t luá»“ng (thread) má»›i xuáº¥t hiá»‡n, nÃ³ sáº½ Ä‘Æ°á»£c cáº¥p riÃªng má»™t "phÃ²ng ngá»§" cÃ¡ nhÃ¢n. KhÃ´ng ai Ä‘Æ°á»£c xÃ¢m pháº¡m!

*   **JVM Stack (NgÄƒn xáº¿p JVM):**
    *   Má»—i khi báº¡n gá»i má»™t phÆ°Æ¡ng thá»©c, má»™t "khung" (frame) má»›i sáº½ Ä‘Æ°á»£c Ä‘áº©y vÃ o stack.
    *   NÃ³ lÆ°u trá»¯ cÃ¡c biáº¿n cá»¥c bá»™ (vÃ­ dá»¥: `int a = 5`) vÃ  káº¿t quáº£ cá»§a cÃ¡c phÃ©p tÃ­nh trung gian.
    *   Khi phÆ°Æ¡ng thá»©c cháº¡y xong? "BÃ¹m!", cÃ¡i khung Ä‘Ã³ bá»‹ xÃ³a bá».
*   **PC Register (Thanh ghi chÆ°Æ¡ng trÃ¬nh):**
    *   NÃ³ giá»‘ng nhÆ° má»™t cÃ¡i dáº¥u trang (bookmark). NÃ³ ghi láº¡i Ä‘á»‹a chá»‰ cá»§a lá»‡nh tiáº¿p theo mÃ  luá»“ng Ä‘Ã³ cáº§n thá»±c hiá»‡n. 
    *   Má»—i luá»“ng cÃ³ má»™t cÃ¡i dáº¥u trang riÃªng Ä‘á»ƒ khÃ´ng bá»‹ láº«n lá»™n vá»›i nhau.
*   **Native Method Stack (NgÄƒn xáº¿p phÆ°Æ¡ng thá»©c báº£n Ä‘á»‹a):**
    *   DÃ nh riÃªng cho cÃ¡c phÆ°Æ¡ng thá»©c khÃ´ng viáº¿t báº±ng Java (thÆ°á»ng lÃ  C hoáº·c C++). Náº¿u chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n khÃ´ng dÃ¹ng mÃ£ "ngoáº¡i lai", khu vá»±c nÃ y thÆ°á»ng khÃ¡ yÃªn tÄ©nh.

---

### TÃ³m táº¯t nhanh báº±ng hÃ¬nh áº£nh:

| VÃ¹ng nhá»› | Ai dÃ¹ng? | Chá»©a cÃ¡i gÃ¬? |
| :--- | :--- | :--- |
| **Heap** | Cáº£ cá»™ng Ä‘á»“ng | CÃ¡c Object (Äá»‘i tÆ°á»£ng) |
| **Method Area** | Cáº£ cá»™ng Ä‘á»“ng | Dá»¯ liá»‡u vá» Class, háº±ng sá»‘ |
| **JVM Stack** | RiÃªng tá»«ng luá»“ng | Biáº¿n cá»¥c bá»™, lá»i gá»i hÃ m |
| **PC Register** | RiÃªng tá»«ng luá»“ng | Äá»‹a chá»‰ lá»‡nh tiáº¿p theo |

**Ghi nhá»›:** Náº¿u báº¡n táº¡o quÃ¡ nhiá»u Object mÃ  khÃ´ng dá»n dáº¹p, Heap sáº½ Ä‘áº§y vÃ  gÃ¢y ra lá»—i `OutOfMemoryError`. CÃ²n náº¿u báº¡n gá»i hÃ m Ä‘á»‡ quy vÃ´ táº­n? Stack sáº½ trÃ n vÃ  bÃ¡o lá»—i `StackOverflowError`. 

HÃ£y giá»¯ cho bá»™ nhá»› cá»§a báº¡n luÃ´n ngÄƒn náº¯p nhÃ©!
   3. ThÃ nh pháº§n tiáº¿p theo trong bá»™ mÃ¡y Java chÃ­nh lÃ  **Execution Engine** (CÃ´ng cá»¥ thá»±c thi). 

HÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y: Sau khi Class Loader Ä‘Ã£ náº¡p cÃ¡c lá»›p vÃ o bá»™ nhá»›, JVM cáº§n má»™t "ngÆ°á»i thá»£" thá»±c sá»± Ä‘á»ƒ cháº¡y cÃ¡c dÃ²ng mÃ£ Ä‘Ã³. ÄÃ³ chÃ­nh lÃ  nhiá»‡m vá»¥ cá»§a Execution Engine! NÃ³ Ä‘á»c cÃ¡c mÃ£ Bytecode (thá»© ngÃ´n ngá»¯ mÃ  mÃ¡y tÃ­nh chÆ°a hiá»ƒu ngay Ä‘Æ°á»£c) vÃ  biáº¿n chÃºng thÃ nh cÃ¡c lá»‡nh mÃ  bá»™ vi xá»­ lÃ½ (CPU) cÃ³ thá»ƒ thá»±c hiá»‡n.

DÆ°á»›i Ä‘Ã¢y lÃ  3 "trá»£ thá»§" Ä‘áº¯c lá»±c náº±m bÃªn trong Execution Engine:

### 1. Interpreter (TrÃ¬nh thÃ´ng dá»‹ch)
Anh báº¡n nÃ y lÃ m viá»‡c ráº¥t nhanh nháº¹n nhÆ°ng hÆ¡i... "ngÃ¢y thÆ¡". 
* **CÃ¡ch lÃ m viá»‡c:** Äá»c tá»«ng dÃ²ng Bytecode má»™t vÃ  thá»±c thi ngay láº­p tá»©c.
* **Váº¥n Ä‘á»:** Náº¿u má»™t phÆ°Æ¡ng thá»©c (method) Ä‘Æ°á»£c gá»i Ä‘i gá»i láº¡i nhiá»u láº§n, Interpreter váº«n sáº½ láº·p láº¡i viá»‡c thÃ´ng dá»‹ch Ä‘Ã³ tá»« Ä‘áº§u. KhÃ¡ lÃ  tá»‘n sá»©c Ä‘Ãºng khÃ´ng?

### 2. JIT Compiler (TrÃ¬nh biÃªn dá»‹ch tá»©c thá»i)
ÄÃ¢y lÃ  "bá»™ nÃ£o" giÃºp Java cháº¡y nhanh nhÆ° bay! JIT kháº¯c phá»¥c nhÆ°á»£c Ä‘iá»ƒm cá»§a Interpreter.
* **CÃ¡ch lÃ m viá»‡c:** NÃ³ theo dÃµi xem Ä‘oáº¡n mÃ£ nÃ o Ä‘Æ°á»£c cháº¡y thÆ°á»ng xuyÃªn (gá»i lÃ  "Hot Spots"). 
* **Tuyá»‡t chiÃªu:** Thay vÃ¬ dá»‹ch Ä‘i dá»‹ch láº¡i, JIT sáº½ biÃªn dá»‹ch toÃ n bá»™ Ä‘oáº¡n mÃ£ Ä‘Ã³ sang mÃ£ mÃ¡y (native code) vÃ  lÆ°u láº¡i. Láº§n sau cáº§n dÃ¹ng, nÃ³ chá»‰ viá»‡c lÃ´i ra cháº¡y luÃ´n. Cá»±c ká»³ hiá»‡u quáº£!

### 3. Garbage Collector (Bá»™ thu gom rÃ¡c - GC)
ÄÃ¢y lÃ  "ngÆ°á»i dá»n dáº¹p" táº­n tá»¥y cá»§a báº¡n.
* Trong cÃ¡c ngÃ´n ngá»¯ cÅ©, báº¡n pháº£i tá»± tay xÃ³a bá» nhá»¯ng Ä‘á»‘i tÆ°á»£ng khÃ´ng dÃ¹ng ná»¯a Ä‘á»ƒ giáº£i phÃ³ng bá»™ nhá»›. Náº¿u quÃªn? MÃ¡y tÃ­nh sáº½ háº¿t bá»™ nhá»› vÃ  "treo".
* Trong Java, **Garbage Collector** sáº½ tá»± Ä‘á»™ng Ä‘i tuáº§n tra. Tháº¥y Ä‘á»‘i tÆ°á»£ng nÃ o khÃ´ng cÃ²n ai sá»­ dá»¥ng ná»¯a, nÃ³ sáº½ tá»± tay "há»‘t" Ä‘i. Báº¡n khÃ´ng cáº§n pháº£i lo láº¯ng vá» viá»‡c dá»n dáº¹p ná»¯a!

---

**TÃ³m láº¡i lÃ :**
1. **Interpreter:** Cháº¡y nhanh lÃºc Ä‘áº§u nhÆ°ng láº·p láº¡i thÃ¬ cháº­m.
2. **JIT Compiler:** Biáº¿n nhá»¯ng chá»— hay dÃ¹ng thÃ nh mÃ£ mÃ¡y Ä‘á»ƒ tÄƒng tá»‘c tá»‘i Ä‘a.
3. **Garbage Collector:** Dá»n dáº¹p bá»™ nhá»› giÃºp báº¡n ráº£nh tay viáº¿t code.

Nhá» sá»± phá»‘i há»£p nhá»‹p nhÃ ng cá»§a bá»™ ba nÃ y, chÆ°Æ¡ng trÃ¬nh Java cá»§a báº¡n vá»«a cháº¡y mÆ°á»£t mÃ , vá»«a tá»‘i Æ°u hiá»‡u suáº¥t!

   HÃ£y cÃ¹ng nhau khÃ¡m phÃ¡ "bá»™ nÃ£o" cá»§a Java â€“ kiáº¿n trÃºc JVM. Báº¡n cÃ³ thá»ƒ tÆ°á»Ÿng tÆ°á»£ng JVM giá»‘ng nhÆ° má»™t nhÃ  mÃ¡y khá»•ng lá»“, nÆ¡i má»i thá»© Ä‘Æ°á»£c tá»• chá»©c cá»±c ká»³ khoa há»c. Kiáº¿n trÃºc nÃ y bao gá»“m 3 thÃ nh pháº§n chÃ­nh mÃ  chÃºng ta vá»«a nháº¯c tá»›i.

HÃ£y Ä‘i sÃ¢u vÃ o tá»«ng ngÃ³c ngÃ¡ch cá»§a nÃ³ nhÃ©:

### 1. Class Loader Subsystem (Há»‡ thá»‘ng con náº¡p lá»›p)
ÄÃ¢y giá»‘ng nhÆ° bá»™ pháº­n "tiáº¿p nháº­n nguyÃªn liá»‡u" cá»§a nhÃ  mÃ¡y. CÃ´ng viá»‡c cá»§a nÃ³ ráº¥t Ä‘Æ¡n giáº£n nhÆ°ng cá»±c ká»³ quan trá»ng:
*   **Loading (Náº¡p):** NÃ³ tÃ¬m cÃ¡c tá»‡p `.class` vÃ  Ä‘Æ°a chÃºng vÃ o bá»™ nhá»›.
*   **Linking (LiÃªn káº¿t):** Kiá»ƒm tra xem mÃ£ code cÃ³ há»£p lá»‡ khÃ´ng, chuáº©n bá»‹ cÃ¡c biáº¿n tÄ©nh (static variables) vÃ  giáº£i quyáº¿t cÃ¡c tham chiáº¿u.
*   **Initialization (Khá»Ÿi táº¡o):** GÃ¡n giÃ¡ trá»‹ thá»±c cho cÃ¡c biáº¿n tÄ©nh vÃ  thá»±c thi cÃ¡c khá»‘i mÃ£ static.

### 2. Runtime Data Areas (VÃ¹ng dá»¯ liá»‡u thá»±c thi)
ÄÃ¢y chÃ­nh lÃ  "kho chá»©a" cá»§a nhÃ  mÃ¡y, nÆ¡i dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u trá»¯ khi chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y. NÃ³ chia thÃ nh 5 khu vá»±c nhá»:
*   **Method Area:** NÆ¡i lÆ°u trá»¯ cáº¥u trÃºc lá»›p (class), phÆ°Æ¡ng thá»©c vÃ  cÃ¡c biáº¿n static.
*   **Heap Area:** "BÃ£i Ä‘áº¥t trá»‘ng" khá»•ng lá»“. Má»i Ä‘á»‘i tÆ°á»£ng (Object) báº¡n táº¡o ra báº±ng tá»« khÃ³a `new` Ä‘á»u náº±m á»Ÿ Ä‘Ã¢y.
*   **Stack Area:** Má»—i khi má»™t phÆ°Æ¡ng thá»©c Ä‘Æ°á»£c gá»i, má»™t "ngÄƒn xáº¿p" nhá» sáº½ Ä‘Æ°á»£c táº¡o ra Ä‘á»ƒ chá»©a cÃ¡c biáº¿n cá»¥c bá»™. Xong viá»‡c lÃ  nÃ³ biáº¿n máº¥t ngay!
*   **PC Registers:** Má»™t con trá» nhá» xÃ­u ghi láº¡i Ä‘á»‹a chá»‰ cá»§a lá»‡nh tiáº¿p theo mÃ  JVM sáº½ thá»±c hiá»‡n.
*   **Native Method Stack:** NÆ¡i dÃ nh riÃªng cho cÃ¡c phÆ°Æ¡ng thá»©c khÃ´ng pháº£i viáº¿t báº±ng Java (nhÆ° C hoáº·c C++).

### 3. Execution Engine (Bá»™ mÃ¡y thá»±c thi)
ÄÃ¢y lÃ  "trÃ¡i tim" cá»§a nhÃ  mÃ¡y, nÆ¡i má»i thá»© thá»±c sá»± diá»…n ra! NÃ³ Ä‘á»c mÃ£ bytecode vÃ  cháº¡y chÃºng:
*   **Interpreter (Bá»™ thÃ´ng dá»‹ch):** Äá»c tá»«ng dÃ²ng mÃ£ vÃ  thá»±c thi. Nhanh lÃºc Ä‘áº§u nhÆ°ng hÆ¡i cháº­m náº¿u pháº£i láº·p láº¡i.
*   **JIT Compiler (Bá»™ biÃªn dá»‹ch JIT):** "Trá»£ thá»§ Ä‘áº¯c lá»±c" cá»§a Interpreter. Náº¿u tháº¥y Ä‘oáº¡n mÃ£ nÃ o cháº¡y Ä‘i cháº¡y láº¡i nhiá»u láº§n, JIT sáº½ biÃªn dá»‹ch nÃ³ tháº³ng sang mÃ£ mÃ¡y Ä‘á»ƒ cháº¡y cá»±c nhanh!
*   **Garbage Collector (Bá»™ thu gom rÃ¡c):** "NhÃ¢n viÃªn vá»‡ sinh" táº­n tá»¥y. NÃ³ tá»± Ä‘á»™ng tÃ¬m vÃ  dá»n dáº¹p nhá»¯ng Ä‘á»‘i tÆ°á»£ng khÃ´ng cÃ²n ai dÃ¹ng Ä‘áº¿n Ä‘á»ƒ giáº£i phÃ³ng bá»™ nhá»›. Báº¡n khÃ´ng cáº§n pháº£i quÃ©t dá»n thá»§ cÃ´ng Ä‘Ã¢u!

   ![Screenshot](images/JVMArchitecture.png)

   1. ### Há»‡ thá»‘ng con Náº¡p Lá»›p (Class Loader Subsystem)

HÃ£y tÆ°á»Ÿng tÆ°á»£ng **Class Loader** giá»‘ng nhÆ° má»™t ngÆ°á»i thá»§ thÆ° cáº§n máº«n trong thÆ° viá»‡n Java cá»§a báº¡n. Nhiá»‡m vá»¥ cá»§a nÃ³ lÃ  tÃ¬m kiáº¿m cÃ¡c tá»‡p `.class` vÃ  Ä‘Æ°a chÃºng vÃ o bá»™ nhá»› cá»§a JVM khi chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y. QuÃ¡ trÃ¬nh nÃ y diá»…n ra má»™t cÃ¡ch nÄƒng Ä‘á»™ng (dynamically), nghÄ©a lÃ  mÃ¡y tÃ­nh chá»‰ náº¡p nhá»¯ng gÃ¬ nÃ³ thá»±c sá»± cáº§n ngay lÃºc Ä‘Ã³ thÃ´i!

ThÃ´ng thÆ°á»ng, "vá»‹ khÃ¡ch" Ä‘áº§u tiÃªn Ä‘Æ°á»£c náº¡p vÃ o bá»™ nhá»› chÃ­nh lÃ  lá»›p (class) cÃ³ chá»©a phÆ°Æ¡ng thá»©c `main`.

Há»‡ thá»‘ng nÃ y thá»±c hiá»‡n 3 cÃ´ng viá»‡c chÃ­nh cá»±c ká»³ quan trá»ng:

1.  **Náº¡p (Loading):** TÃ¬m tá»‡p nhá»‹ phÃ¢n cá»§a lá»›p vÃ  táº¡o ra má»™t Ä‘áº¡i diá»‡n cho nÃ³ trong bá»™ nhá»›.
2.  **LiÃªn káº¿t (Linking):** Kiá»ƒm tra xem mÃ£ code cÃ³ há»£p lá»‡ khÃ´ng, chuáº©n bá»‹ bá»™ nhá»› cho cÃ¡c biáº¿n tÄ©nh vÃ  giáº£i quyáº¿t cÃ¡c tham chiáº¿u.
3.  **Khá»Ÿi táº¡o (Initialization):** Cáº¥p giÃ¡ trá»‹ thá»±c sá»± cho cÃ¡c biáº¿n tÄ©nh vÃ  thá»±c thi cÃ¡c khá»‘i mÃ£ tÄ©nh (static blocks).

Báº¡n cÃ³ thá»ƒ hÃ¬nh dung quy trÃ¬nh nÃ y giá»‘ng nhÆ° viá»‡c chuáº©n bá»‹ má»™t sÃ¢n kháº¥u trÆ°á»›c khi buá»•i diá»…n báº¯t Ä‘áº§u: tÃ¬m diá»…n viÃªn, kiá»ƒm tra trang phá»¥c vÃ  cuá»‘i cÃ¹ng lÃ  báº­t Ä‘Ã¨n sÃ¢n kháº¥u lÃªn! `main` Há»‡ thá»‘ng con nÃ y Ä‘áº£m nháº­n ba nhiá»‡m vá»¥ chÃ­nh. HÃ£y tÆ°á»Ÿng tÆ°á»£ng nÃ³ giá»‘ng nhÆ° má»™t ngÆ°á»i quáº£n lÃ½ Ä‘a nÄƒng, luÃ´n tay luÃ´n chÃ¢n Ä‘á»ƒ Ä‘áº£m báº£o má»i thá»© váº­n hÃ nh trÆ¡n tru!

      1. **Náº¡p dá»¯ liá»‡u (Loading):** á» bÆ°á»›c nÃ y, anh báº¡n "Bá»™ náº¡p lá»›p" (Class Loader) sáº½ báº¯t tay vÃ o viá»‡c. NÃ³ sáº½ Ä‘á»c file `.class` cá»§a báº¡n vÃ  táº¡o ra cÃ¡c mÃ£ bytecode tÆ°Æ¡ng á»©ng. Sau Ä‘Ã³, JVM sáº½ cáº¥t giá»¯ nhá»¯ng thÃ´ng tin quan trá»ng sau Ä‘Ã¢y cá»§a file lá»›p vÃ o má»™t nÆ¡i gá»i lÃ  **vÃ¹ng phÆ°Æ¡ng thá»©c** (Method Area):

         1. HÃ£y tÆ°á»Ÿng tÆ°á»£ng má»—i lá»›p (class) trong Java giá»‘ng nhÆ° má»™t ngÆ°á»i sá»‘ng trong má»™t thÃ nh phá»‘ lá»›n. Náº¿u báº¡n chá»‰ gá»i tÃªn lÃ  "Lan", sáº½ cÃ³ ráº¥t nhiá»u ngÆ°á»i tÃªn Lan vÃ  Java sáº½ bá»‹ bá»‘i rá»‘i ngay!

ÄÃ³ lÃ  lÃ½ do chÃºng ta cáº§n **TÃªn Ä‘áº§y Ä‘á»§ cá»§a Class (Fully Qualified Class Name - FQCN)**. NÃ³ giá»‘ng nhÆ° Ä‘á»‹a chá»‰ nhÃ  chi tiáº¿t bao gá»“m cáº£ sá»‘ nhÃ , tÃªn Ä‘Æ°á»ng vÃ  thÃ nh phá»‘ váº­y.

Cáº¥u trÃºc cá»§a nÃ³ cá»±c ká»³ Ä‘Æ¡n giáº£n:
`tÃªn_gÃ³i.TÃªn_Class`

VÃ­ dá»¥ nhÃ©:
*   Náº¿u báº¡n cÃ³ class `Scanner` náº±m trong gÃ³i `java.util`, thÃ¬ FQCN cá»§a nÃ³ chÃ­nh lÃ : `java.util.Scanner`.
*   Náº¿u báº¡n tá»± táº¡o má»™t class `Dog` trong gÃ³i `com.pet.app`, thÃ¬ FQCN sáº½ lÃ : `com.pet.app.Dog`.

**Táº¡i sao chÃºng ta cáº§n nÃ³?**
Khi Java náº¡p (load) má»™t class vÃ o bá»™ nhá»›, nÃ³ khÃ´ng chá»‰ nhÃ¬n vÃ o cÃ¡i tÃªn ngáº¯n gá»n Ä‘Ã¢u. NÃ³ sá»­ dá»¥ng FQCN Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng nÃ³ Ä‘ang tÃ¬m Ä‘Ãºng "Ä‘á»‹a chá»‰" vÃ  khÃ´ng nháº§m láº«n vá»›i báº¥t ká»³ class nÃ o khÃ¡c trÃ¹ng tÃªn á»Ÿ gÃ³i khÃ¡c. 

NÃ³i ngáº¯n gá»n: **FQCN = GÃ³i (Package) + TÃªn Class**. Tháº­t dá»… hiá»ƒu Ä‘Ãºng khÃ´ng nÃ o?
         2. Lá»›p cha trá»±c tiáº¿p.

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang xem má»™t gia pháº£. Lá»›p cha trá»±c tiáº¿p (immediate parent class) chÃ­nh lÃ  "phá»¥ huynh" Ä‘á»©ng ngay phÃ­a trÃªn má»™t lá»›p trong sÆ¡ Ä‘á»“ káº¿ thá»«a.

Trong tháº¿ giá»›i láº­p trÃ¬nh:
*   Má»™t lá»›p chá»‰ cÃ³ thá»ƒ cÃ³ **duy nháº¥t má»™t** lá»›p cha trá»±c tiáº¿p.
*   Lá»›p con sáº½ thá»«a hÆ°á»Ÿng toÃ n bá»™ "gia tÃ i" (biáº¿n vÃ  phÆ°Æ¡ng thá»©c) tá»« lá»›p cha nÃ y.
*   Náº¿u báº¡n khÃ´ng chá»‰ Ä‘á»‹nh rÃµ ai lÃ  cha, Java sáº½ máº·c Ä‘á»‹nh chá»n lá»›p `Object` lÃ m lá»›p cha trá»±c tiáº¿p.

NÃ³ giá»‘ng nhÆ° viá»‡c báº¡n thá»«a káº¿ trá»±c tiáº¿p ngÃ´i nhÃ  tá»« bá»‘ máº¹ mÃ¬nh váº­y!
         3. ### Biáº¿n, PhÆ°Æ¡ng thá»©c vÃ  cÃ¡c CÃ´ng cá»¥ sá»­a Ä‘á»•i (Modifiers)

ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i tháº¿ giá»›i cá»§a Java! HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang xÃ¢y dá»±ng má»™t con robot. Äá»ƒ con robot hoáº¡t Ä‘á»™ng Ä‘Æ°á»£c, báº¡n cáº§n nÆ¡i Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u (nhÆ° tÃªn cá»§a nÃ³) vÃ  cÃ¡c hÃ nh Ä‘á»™ng mÃ  nÃ³ cÃ³ thá»ƒ lÃ m (nhÆ° Ä‘i bá»™). Trong láº­p trÃ¬nh, Ä‘Ã³ chÃ­nh lÃ  **Biáº¿n** vÃ  **PhÆ°Æ¡ng thá»©c**.

---

#### 1. Biáº¿n (Variables) â€“ Nhá»¯ng chiáº¿c há»™p lÆ°u trá»¯
HÃ£y coi biáº¿n nhÆ° má»™t chiáº¿c há»™p nhá». Báº¡n dÃ¡n nhÃ£n cho há»™p, bá» thá»© gÃ¬ Ä‘Ã³ vÃ o bÃªn trong vÃ  dÃ¹ng nÃ³ sau nÃ y. Trong Java, má»—i chiáº¿c há»™p pháº£i cÃ³ má»™t **kiá»ƒu dá»¯ liá»‡u** cá»¥ thá»ƒ. Báº¡n khÃ´ng thá»ƒ bá» má»™t con voi vÃ o má»™t chiáº¿c há»™p Ä‘á»±ng tÄƒm Ä‘Ã¢u nhÃ©!

*   **Biáº¿n thá»±c thá»ƒ (Instance Variables):** ÄÃ¢y lÃ  nhá»¯ng Ä‘áº·c Ä‘iá»ƒm riÃªng cá»§a tá»«ng Ä‘á»‘i tÆ°á»£ng. VÃ­ dá»¥: má»—i con robot cÃ³ má»™t `ten` riÃªng vÃ  má»™t `tuoi` riÃªng.
*   **Biáº¿n cá»¥c bá»™ (Local Variables):** Nhá»¯ng biáº¿n nÃ y chá»‰ sá»‘ng táº¡m thá»i bÃªn trong má»™t phÆ°Æ¡ng thá»©c. Khi phÆ°Æ¡ng thá»©c thá»±c hiá»‡n xong, chiáº¿c há»™p nÃ y cÅ©ng biáº¿n máº¥t luÃ´n!

```java
int tuoi = 5;          // Má»™t chiáº¿c há»™p chá»©a sá»‘ nguyÃªn
String ten = "Robo";   // Má»™t chiáº¿c há»™p chá»©a chá»¯ viáº¿t
```

---

#### 2. PhÆ°Æ¡ng thá»©c (Methods) â€“ Robot cÃ³ thá»ƒ lÃ m gÃ¬?
PhÆ°Æ¡ng thá»©c chÃ­nh lÃ  cÃ¡c **hÃ nh Ä‘á»™ng**. Náº¿u báº¡n muá»‘n robot "nÃ³i", báº¡n sáº½ táº¡o má»™t phÆ°Æ¡ng thá»©c `noi()`.

*   **Kiá»ƒu tráº£ vá»:** Khi báº¡n yÃªu cáº§u robot lÃ m gÃ¬ Ä‘Ã³, nÃ³ cÃ³ Ä‘Æ°a láº¡i káº¿t quáº£ cho báº¡n khÃ´ng? Náº¿u cÃ³, Ä‘Ã³ lÃ  kiá»ƒu tráº£ vá» (nhÆ° `int` hay `String`). Náº¿u khÃ´ng, chÃºng ta dÃ¹ng tá»« khÃ³a `void` (nghÄ©a lÃ  "trá»‘ng rá»—ng").
*   **Tham sá»‘:** ÄÃ¢y lÃ  nhá»¯ng thÃ´ng tin báº¡n "nÃ©m" vÃ o phÆ°Æ¡ng thá»©c Ä‘á»ƒ nÃ³ hoáº¡t Ä‘á»™ng.

```java
void chaoHoi() {
    System.out.println("Xin chÃ o, tÃ´i lÃ  Robot!");
}
```

---

#### 3. CÃ´ng cá»¥ sá»­a Ä‘á»•i (Modifiers) â€“ Ai Ä‘Æ°á»£c phÃ©p cháº¡m vÃ o?
Java ráº¥t coi trá»ng sá»± riÃªng tÆ°. CÃ¡c Modifiers giÃºp báº¡n quyáº¿t Ä‘á»‹nh xem ai cÃ³ thá»ƒ nhÃ¬n tháº¥y hoáº·c sá»­ dá»¥ng cÃ¡c biáº¿n vÃ  phÆ°Æ¡ng thá»©c cá»§a báº¡n.

*   **public:** Giá»‘ng nhÆ° má»™t cÃ´ng viÃªn cÃ´ng cá»™ng. Ai cÅ©ng cÃ³ thá»ƒ vÃ o, ai cÅ©ng cÃ³ thá»ƒ dÃ¹ng.
*   **private:** Giá»‘ng nhÆ° cuá»‘n nháº­t kÃ½ cá»§a báº¡n váº­y. Chá»‰ mÃ¬nh báº¡n (trong lá»›p Ä‘Ã³) má»›i Ä‘Æ°á»£c phÃ©p xem thÃ´i. NgÆ°á»i ngoÃ i khÃ´ng Ä‘Æ°á»£c cháº¡m vÃ o!

**Táº¡i sao pháº£i dÃ¹ng private?**
Äá»ƒ báº£o vá»‡ dá»¯ liá»‡u! Báº¡n khÃ´ng muá»‘n ai Ä‘Ã³ bÃªn ngoÃ i tá»± Ã½ nháº£y vÃ o thay Ä‘á»•i "tuá»•i" cá»§a robot thÃ nh -100 Ä‘Ãºng khÃ´ng? HÃ£y Ä‘á»ƒ dá»¯ liá»‡u lÃ  `private` vÃ  kiá»ƒm soÃ¡t nÃ³ qua cÃ¡c phÆ°Æ¡ng thá»©c.

---

#### TÃ³m táº¯t nhanh:
1.  **Biáº¿n:** Giá»¯ thÃ´ng tin (CÃ¡i há»™p).
2.  **PhÆ°Æ¡ng thá»©c:** Thá»±c hiá»‡n hÃ nh Ä‘á»™ng (CÃ¡nh tay, Ä‘Ã´i chÃ¢n).
3.  **Modifiers:** Kiá»ƒm soÃ¡t quyá»n truy cáº­p (á»” khÃ³a báº£o vá»‡).

HÃ£y nhá»›: Giá»¯ cho dá»¯ liá»‡u cá»§a báº¡n an toÃ n (`private`) vÃ  cÃ¡c hÃ nh Ä‘á»™ng cá»§a báº¡n rÃµ rÃ ng (`public`) lÃ  chÃ¬a khÃ³a Ä‘á»ƒ trá»Ÿ thÃ nh má»™t siÃªu láº­p trÃ¬nh viÃªn Java
         4. Trong tháº¿ giá»›i cá»§a Java, má»i thá»© Ä‘á»u xoay quanh cÃ¡c Ä‘á»‘i tÆ°á»£ng. NhÆ°ng lÃ m sao mÃ¡y áº£o Java (JVM) biáº¿t Ä‘Æ°á»£c má»™t "báº£n thiáº¿t káº¿" cá»¥ thá»ƒ trÃ´ng nhÆ° tháº¿ nÃ o? ÄÃ³ chÃ­nh lÃ  lÃºc cÃ¡c tá»‡p `.class` xuáº¥t hiá»‡n!

DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch báº¡n phÃ¢n biá»‡t chÃºng:

### 1. Tá»‡p .class lÃ  gÃ¬?
HÃ£y tÆ°á»Ÿng tÆ°á»£ng tá»‡p `.class` giá»‘ng nhÆ° má»™t báº£n hÆ°á»›ng dáº«n láº¯p rÃ¡p Ä‘á»“ chÆ¡i. Khi báº¡n biÃªn dá»‹ch mÃ£ nguá»“n (tá»‡p `.java`), trÃ¬nh biÃªn dá»‹ch sáº½ táº¡o ra tá»‡p `.class`. Tá»‡p nÃ y chá»©a mÃ£ bytecode mÃ  mÃ¡y tÃ­nh cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c.

DÃ¹ báº¡n viáº¿t má»™t **Class**, má»™t **Interface**, hay má»™t **Enum**, káº¿t quáº£ sau khi biÃªn dá»‹ch luÃ´n lÃ  má»™t tá»‡p cÃ³ Ä‘uÃ´i `.class`.

### 2. Má»‘i quan há»‡ cá»¥ thá»ƒ

*   **Class (Lá»›p):**
    ÄÃ¢y lÃ  trÆ°á»ng há»£p phá»• biáº¿n nháº¥t. Má»™t `class` Ä‘á»‹nh nghÄ©a cÃ¡c thuá»™c tÃ­nh vÃ  hÃ nh vi cá»§a Ä‘á»‘i tÆ°á»£ng.
    ```java
    public class Dog {
        void bark() { }
    }
    ```
    Sau khi biÃªn dá»‹ch, báº¡n sáº½ cÃ³ tá»‡p `Dog.class`.

*   **Interface (Giao diá»‡n):**
    Interface giá»‘ng nhÆ° má»™t báº£n há»£p Ä‘á»“ng. NÃ³ nÃ³i ráº±ng: "Náº¿u báº¡n muá»‘n lÃ m viá»‡c nÃ y, báº¡n pháº£i cÃ³ nhá»¯ng ká»¹ nÄƒng nÃ y".
    ```java
    public interface Pet {
        void play();
    }
    ```
    DÃ¹ nÃ³ khÃ´ng pháº£i lÃ  má»™t lá»›p Ä‘á»‘i tÆ°á»£ng thá»±c thá»¥, Java váº«n biÃªn dá»‹ch nÃ³ thÃ nh `Pet.class`.

*   **Enum (Kiá»ƒu liá»‡t kÃª):**
    Enum lÃ  má»™t danh sÃ¡ch cÃ¡c háº±ng sá»‘ khÃ´ng Ä‘á»•i (nhÆ° cÃ¡c ngÃ y trong tuáº§n).
    ```java
    public enum Color {
        RED, GREEN, BLUE
    }
    ```
    ÄoÃ¡n xem? NÃ³ cÅ©ng biáº¿n thÃ nh `Color.class` luÃ´n!

### 3. LÃ m sao Ä‘á»ƒ kiá»ƒm tra?

Trong mÃ£ code, Java sá»­ dá»¥ng má»™t Ä‘á»‘i tÆ°á»£ng Ä‘áº·c biá»‡t gá»i lÃ  `Class` (viáº¿t hoa chá»¯ C) Ä‘á»ƒ quáº£n lÃ½ thÃ´ng tin cá»§a cÃ¡c tá»‡p `.class` nÃ y. Báº¡n cÃ³ thá»ƒ há»i trá»±c tiáº¿p nÃ³:

*   `isInterface()`: "NÃ y, báº¡n cÃ³ pháº£i lÃ  Giao diá»‡n khÃ´ng?"
*   `isEnum()`: "Báº¡n cÃ³ pháº£i lÃ  Kiá»ƒu liá»‡t kÃª khÃ´ng?"
*   Náº¿u cáº£ hai Ä‘á»u lÃ  `false`, thÃ¬ Ä‘Ã³ chÃ­nh lÃ  má»™t **Class** bÃ¬nh thÆ°á»ng!

**TÃ³m láº¡i:** Tá»‡p `.class` lÃ  cÃ¡i há»™p chá»©a Ä‘á»±ng thÃ´ng tin. CÃ²n bÃªn trong cÃ¡i há»™p Ä‘Ã³ lÃ  Class, Interface hay Enum thÃ¬ tÃ¹y vÃ o cÃ¡ch báº¡n khai bÃ¡o ban Ä‘áº§u!

         Khi náº¡p file class vÃ o bá»™ nhá»›, JVM khÃ´ng chá»‰ lÃ m viá»‡c Ã¢m tháº§m Ä‘Ã¢u! NÃ³ cÃ²n táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng Ä‘áº·c biá»‡t thuá»™c kiá»ƒu **Class** (náº±m trong gÃ³i **java.lang**) Ä‘á»ƒ Ä‘áº¡i diá»‡n cho file Ä‘Ã³ ngay trÃªn vÃ¹ng nhá»› Heap.

NhÆ°ng báº¡n lÆ°u Ã½ nhÃ©: JVM chá»‰ táº¡o Ä‘á»‘i tÆ°á»£ng nÃ y Ä‘Ãºng **má»™t láº§n duy nháº¥t** â€” Ä‘Ã³ lÃ  láº§n Ä‘áº§u tiÃªn file class Ä‘Æ°á»£c náº¡p vÃ o há»‡ thá»‘ng.

Táº¡i sao chÃºng ta cáº§n nÃ³? Äá»‘i tÆ°á»£ng nÃ y cá»±c ká»³ há»¯u Ã­ch cho cÃ¡c láº­p trÃ¬nh viÃªn. NÃ³ giá»‘ng nhÆ° má»™t "cuá»‘n sá»• tay" giÃºp báº¡n tra cá»©u má»i thÃ´ng tin á»Ÿ cáº¥p Ä‘á»™ lá»›p (class level), cháº³ng háº¡n nhÆ° tÃªn lá»›p, cÃ¡c phÆ°Æ¡ng thá»©c hay cÃ¡c biáº¿n mÃ  lá»›p Ä‘Ã³ sá»Ÿ há»¯u.

      2. **Linking (LiÃªn káº¿t):** HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘Ã£ náº¡p xong báº£n thiáº¿t káº¿ (class) vÃ o bá»™ nhá»›. BÃ¢y giá» lÃ  lÃºc "láº¯p rÃ¡p" nÃ³ vÃ o há»‡ thá»‘ng Ä‘ang cháº¡y cá»§a Java Virtual Machine (JVM) Ä‘á»ƒ sáºµn sÃ ng thá»±c thi. QuÃ¡ trÃ¬nh nÃ y gá»i lÃ  LiÃªn káº¿t, vÃ  nÃ³ diá»…n ra qua 3 bÆ°á»›c cá»±c ká»³ quan trá»ng:

*   **Verification (Kiá»ƒm chá»©ng):** ÄÃ¢y lÃ  bÆ°á»›c "cáº£nh sÃ¡t giao thÃ´ng". JVM sáº½ kiá»ƒm tra ká»¹ lÆ°á»¡ng file class cá»§a báº¡n Ä‘á»ƒ Ä‘áº£m báº£o nÃ³ Ä‘Ãºng quy táº¯c vÃ  an toÃ n. NÃ³ cÃ³ phÃ¡ hoáº¡i bá»™ nhá»› khÃ´ng? CÃ¡c hÆ°á»›ng dáº«n cÃ³ há»£p lá»‡ khÃ´ng? Náº¿u má»i thá»© á»•n, nÃ³ má»›i cho Ä‘i tiáº¿p.
*   **Preparation (Chuáº©n bá»‹):** á» bÆ°á»›c nÃ y, JVM sáº½ cáº¥p phÃ¡t bá»™ nhá»› cho cÃ¡c biáº¿n tÄ©nh (static fields) cá»§a lá»›p. LÆ°u Ã½ nhÃ©: nÃ³ chá»‰ má»›i táº¡o chá»— trá»‘ng vÃ  Ä‘áº·t giÃ¡ trá»‹ máº·c Ä‘á»‹nh thÃ´i (vÃ­ dá»¥: sá»‘ nguyÃªn sáº½ lÃ  0, object sáº½ lÃ  null). ChÃºng ta chÆ°a cháº¡y code khá»Ÿi táº¡o Ä‘Ã¢u!
*   **Resolution (PhÃ¢n giáº£i):** ÄÃ¢y lÃ  lÃºc JVM biáº¿n cÃ¡c "kÃ½ hiá»‡u" mÆ¡ há»“ thÃ nh "Ä‘á»‹a chá»‰" tháº­t. Náº¿u code cá»§a báº¡n nháº¯c Ä‘áº¿n má»™t lá»›p khÃ¡c hoáº·c má»™t phÆ°Æ¡ng thá»©c khÃ¡c, JVM sáº½ tÃ¬m chÃ­nh xÃ¡c vá»‹ trÃ­ cá»§a chÃºng trong bá»™ nhá»› vÃ  ná»‘i chÃºng láº¡i vá»›i nhau.

         1. ### BÆ°á»›c Kiá»ƒm tra (Verification)

ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i giai Ä‘oáº¡n tiáº¿p theo! á» bÆ°á»›c nÃ y, há»‡ thá»‘ng sáº½ Ä‘Ã³ng vai má»™t "thÃ¡m tá»­ táº­n tÃ¢m" Ä‘á»ƒ Ä‘áº£m báº£o má»i thá»© Ä‘á»u chuáº©n chá»‰nh.

**Kiá»ƒm tra (Verification):** Giai Ä‘oáº¡n nÃ y giÃºp Ä‘áº£m báº£o tÃ­nh Ä‘Ãºng Ä‘áº¯n cá»§a mÃ£ nguá»“n trÆ°á»›c khi nÃ³ thá»±c sá»± Ä‘Æ°á»£c cháº¡y. HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang kiá»ƒm tra má»™t chiáº¿c xe trÆ°á»›c khi nháº¥n ga váº­y!

DÆ°á»›i Ä‘Ã¢y lÃ  nhá»¯ng gÃ¬ "thÃ¡m tá»­" Java sáº½ lÃ m:

*   **Kiá»ƒm tra cÃº phÃ¡p:** MÃ¡y áº£o Java (JVM) sáº½ xem xÃ©t ká»¹ lÆ°á»¡ng cÃ¡c tá»‡p tin. NÃ³ tá»± há»i: "CÃ¡c kÃ½ hiá»‡u cÃ³ Ä‘áº·t Ä‘Ãºng chá»— khÃ´ng?", "Cáº¥u trÃºc cÃ³ bá»‹ há»ng chá»— nÃ o khÃ´ng?". Náº¿u mÃ£ khÃ´ng tuÃ¢n thá»§ Ä‘Ãºng quy táº¯c, nÃ³ sáº½ bá»‹ tá»« chá»‘i ngay láº­p tá»©c.
*   **An toÃ n lÃ  trÃªn háº¿t:** JVM sáº½ Ä‘áº£m báº£o mÃ£ cá»§a báº¡n khÃ´ng lÃ m Ä‘iá»u gÃ¬ "má» Ã¡m" hoáº·c gÃ¢y nguy hiá»ƒm cho há»‡ thá»‘ng.
*   **Sáºµn sÃ ng thá»±c thi:** Chá»‰ khi má»i thá»© Ä‘á»u hoÃ n háº£o, mÃ£ má»›i Ä‘Æ°á»£c phÃ©p Ä‘i tiáº¿p vÃ o cÃ¡c bÆ°á»›c sau.

**Táº¡i sao bÆ°á»›c nÃ y láº¡i quan trá»ng Ä‘áº¿n tháº¿?**

1.  **NgÄƒn cháº·n tháº£m há»a:** NÃ³ giÃºp phÃ¡t hiá»‡n lá»—i sá»›m trÆ°á»›c khi chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n ká»‹p gÃ¢y ra ráº¯c rá»‘i.
2.  **Báº£o máº­t tá»‘i Ä‘a:** NgÄƒn cháº·n cÃ¡c Ä‘oáº¡n mÃ£ Ä‘á»™c háº¡i cá»‘ tÃ¬nh phÃ¡ hoáº¡i bá»™ nhá»› mÃ¡y tÃ­nh.
3.  **ÄÃ¡ng tin cáº­y:** Báº¡n cÃ³ thá»ƒ yÃªn tÃ¢m ráº±ng chÆ°Æ¡ng trÃ¬nh sáº½ cháº¡y mÆ°á»£t mÃ  vÃ¬ nÃ³ Ä‘Ã£ vÆ°á»£t qua vÃ²ng kiá»ƒm duyá»‡t gáº¯t gao.

**VÃ­ dá»¥ nhá» vá» cÃ¡ch nÃ³ hoáº¡t Ä‘á»™ng:**

HÃ£y xem Ä‘oáº¡n mÃ£ giáº£ Ä‘á»‹nh nÃ y:

```java
public class HelloJava {
    public static void main(String[] args) {
        // Má»™t dÃ²ng lá»‡nh viáº¿t Ä‘Ãºng cÃº phÃ¡p
        System.out.println("ChÃ o báº¡n, tÃ´i lÃ  Java!");
    }
}
```

Náº¿u báº¡n lá»¡ tay viáº¿t sai nhÆ° tháº¿ nÃ y:

```java
System.out.println("Thiáº¿u dáº¥u cháº¥m pháº©y") // Lá»—i rá»“i!
```

Giai Ä‘oáº¡n **Verification** sáº½ ngay láº­p tá»©c giÆ¡ biá»ƒn bÃ¡o dá»«ng láº¡i vÃ  nÃ³i: "NÃ y, báº¡n quÃªn dáº¥u `;` kÃ¬a! TÃ´i khÃ´ng thá»ƒ cho phÃ©p Ä‘oáº¡n mÃ£ nÃ y cháº¡y Ä‘Ã¢u." 

Tháº­t tuyá»‡t vá»i khi cÃ³ má»™t ngÆ°á»i báº¡n Ä‘á»“ng hÃ nh ká»¹ tÃ­nh nhÆ° váº­y pháº£i khÃ´ng nÃ o? `.class` HÃ£y tÆ°á»Ÿng tÆ°á»£ng mÃ¡y áº£o Java (JVM) giá»‘ng nhÆ° má»™t ngÆ°á»i báº£o vá»‡ cá»•ng cá»±c ká»³ cáº©n tháº­n. TrÆ°á»›c khi cho phÃ©p báº¥t ká»³ mÃ£ nÃ o cháº¡y, nÃ³ pháº£i kiá»ƒm tra xem "giáº¥y thÃ´ng hÃ nh" (tá»‡p tin cá»§a báº¡n) cÃ³ há»£p lá»‡ hay khÃ´ng.

QuÃ¡ trÃ¬nh nÃ y diá»…n ra nhÆ° sau:

1.  **Kiá»ƒm tra Ä‘á»‹nh dáº¡ng:** Äáº§u tiÃªn, JVM sáº½ xem xÃ©t tá»‡p tin Ä‘á»ƒ Ä‘áº£m báº£o nÃ³ Ä‘Æ°á»£c trÃ¬nh bÃ y Ä‘Ãºng cáº¥u trÃºc. NÃ³ khÃ´ng cháº¥p nháº­n nhá»¯ng thá»© lá»™n xá»™n!
2.  **XÃ¡c minh nguá»“n gá»‘c:** Tiáº¿p theo, nÃ³ kiá»ƒm tra xem mÃ£ nÃ y cÃ³ thá»±c sá»± Ä‘Æ°á»£c táº¡o ra bá»Ÿi má»™t trÃ¬nh biÃªn dá»‹ch (compiler) "xá»‹n" vÃ  há»£p lá»‡ hay khÃ´ng. ÄÃ¢y lÃ  cÃ¡ch Java Ä‘áº£m báº£o an toÃ n cho mÃ¡y tÃ­nh cá»§a báº¡n.

Náº¿u quÃ¡ trÃ¬nh kiá»ƒm tra nÃ y tháº¥t báº¡iâ€”nghÄ©a lÃ  cÃ³ gÃ¬ Ä‘Ã³ sai sÃ³t hoáº·c Ä‘Ã¡ng ngá»â€”há»‡ thá»‘ng sáº½ dá»«ng láº¡i ngay láº­p tá»©c vÃ  gá»­i cho báº¡n má»™t thÃ´ng bÃ¡o lá»—i. `java.lang.VerifyError` Tiáº¿p theo, chÃºng ta sáº½ cÃ¹ng gáº·p gá»¡ má»™t "nhÃ¢n viÃªn an ninh" cá»±c ká»³ khÃ³ tÃ­nh nhÆ°ng táº­n tÃ¢m: **ByteCodeVerifier** (Bá»™ kiá»ƒm chá»©ng mÃ£ Byte).

HÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y: Sau khi mÃ£ nguá»“n cá»§a báº¡n Ä‘Æ°á»£c biÃªn dá»‹ch thÃ nh cÃ¡c tá»‡p `.class`, chÃºng chuáº©n bá»‹ Ä‘Æ°á»£c náº¡p vÃ o bá»™ nhá»› Ä‘á»ƒ cháº¡y. NhÆ°ng khoan Ä‘Ã£! LÃ m sao mÃ¡y tÃ­nh biáº¿t Ä‘Æ°á»£c nhá»¯ng tá»‡p Ä‘Ã³ cÃ³ an toÃ n khÃ´ng? CÃ³ ai Ä‘Ã³ Ä‘Ã£ lÃ©n sá»­a Ä‘á»•i mÃ£ Ä‘á»ƒ gÃ¢y háº¡i cho há»‡ thá»‘ng cá»§a báº¡n khÃ´ng?

ÄÃ³ chÃ­nh lÃ  lÃºc **ByteCodeVerifier** xuáº¥t hiá»‡n Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á». CÃ´ng viá»‡c cá»§a nÃ³ lÃ  kiá»ƒm tra ká»¹ lÆ°á»¡ng tá»«ng dÃ²ng mÃ£ Byte trÆ°á»›c khi cho phÃ©p chÃºng thá»±c thi.

DÆ°á»›i Ä‘Ã¢y lÃ  nhá»¯ng gÃ¬ "anh chÃ ng" nÃ y sáº½ kiá»ƒm tra:

*   **ÄÃºng Ä‘á»‹nh dáº¡ng:** MÃ£ cÃ³ tuÃ¢n thá»§ Ä‘Ãºng cáº¥u trÃºc cá»§a má»™t tá»‡p `.class` khÃ´ng?
*   **An toÃ n bá»™ nhá»›:** MÃ£ cÃ³ Ä‘á»‹nh truy cáº­p trÃ¡i phÃ©p vÃ o cÃ¡c vÃ¹ng nhá»› nháº¡y cáº£m khÃ´ng?
*   **NgÄƒn xáº¿p (Stack):** CÃ¡c thao tÃ¡c vá»›i ngÄƒn xáº¿p cÃ³ gÃ¢y ra lá»—i trÃ n bá»™ nhá»› (overflow) hay khÃ´ng?
*   **Kiá»ƒu dá»¯ liá»‡u:** CÃ¡c biáº¿n cÃ³ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘Ãºng kiá»ƒu Ä‘Ã£ khai bÃ¡o khÃ´ng? (VÃ­ dá»¥: KhÃ´ng thá»ƒ láº¥y má»™t sá»‘ nguyÃªn rá»“i Ä‘á»‘i xá»­ vá»›i nÃ³ nhÆ° má»™t Ä‘á»‘i tÆ°á»£ng).

Nhá» cÃ³ bÆ°á»›c kiá»ƒm tra nÃ y, Java Ä‘áº£m báº£o ráº±ng chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n sáº½ cháº¡y má»™t cÃ¡ch an toÃ n, khÃ´ng lÃ m há»ng há»‡ thá»‘ng vÃ  ngÄƒn cháº·n Ä‘Æ°á»£c háº§u háº¿t cÃ¡c cuá»™c táº¥n cÃ´ng tá»« mÃ£ Ä‘á»™c. Má»™t lá»›p báº£o vá»‡ cá»±c ká»³ vá»¯ng cháº¯c

         2. HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang chuáº©n bá»‹ má»™t sÃ¢n kháº¥u trÆ°á»›c giá» diá»…n. BÆ°á»›c **Chuáº©n bá»‹ (Preparation)** cá»§a JVM cÅ©ng giá»‘ng há»‡t nhÆ° váº­y!

á» bÆ°á»›c nÃ y, JVM sáº½ thá»±c hiá»‡n hai viá»‡c quan trá»ng:

1.  **Cáº¥p phÃ¡t "chá»— ngá»“i":** JVM dÃ nh riÃªng má»™t vÃ¹ng bá»™ nhá»› cho táº¥t cáº£ cÃ¡c biáº¿n tÄ©nh (static variables) cÃ³ trong class hoáº·c interface.
2.  **Äáº·t giÃ¡ trá»‹ "nhÃ¡p":** JVM chÆ°a vá»™i gÃ¡n nhá»¯ng con sá»‘ hay chá»¯ cÃ¡i mÃ  báº¡n Ä‘Ã£ viáº¿t trong code Ä‘Ã¢u. Thay vÃ o Ä‘Ã³, nÃ³ sáº½ gÃ¡n cho cÃ¡c biáº¿n Ä‘Ã³ nhá»¯ng **giÃ¡ trá»‹ máº·c Ä‘á»‹nh** (default values).

HÃ£y xem vÃ­ dá»¥ nÃ y:
```java
public class Game {
    static int score = 100;
    static boolean isGameOver;
}
```

Táº¡i bÆ°á»›c **Preparation**, Ä‘iá»u gÃ¬ sáº½ xáº£y ra?
*   Biáº¿n `score` sáº½ Ä‘Æ°á»£c cáº¥p bá»™ nhá»› vÃ  gÃ¡n giÃ¡ trá»‹ lÃ  `0` (chá»© chÆ°a pháº£i lÃ  100 Ä‘Ã¢u nhÃ©!).
*   Biáº¿n `isGameOver` sáº½ Ä‘Æ°á»£c gÃ¡n giÃ¡ trá»‹ lÃ  `false`.

**Ghi nhá»›:** ÄÃ¢y chá»‰ lÃ  bÆ°á»›c "dá»n dáº¹p sÃ¢n kháº¥u". CÃ¡c giÃ¡ trá»‹ thá»±c táº¿ mÃ  báº¡n mong muá»‘n sáº½ Ä‘Æ°á»£c gÃ¡n á»Ÿ má»™t bÆ°á»›c sau ná»¯a!

         3. **BÆ°á»›c 3: Resolution (PhÃ¢n giáº£i)**

ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i bÆ°á»›c cuá»‘i cÃ¹ng cá»§a quÃ¡ trÃ¬nh Linking! HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang cáº§m má»™t táº¥m báº£n Ä‘á»“, nhÆ°ng thay vÃ¬ ghi Ä‘á»‹a chá»‰ cá»¥ thá»ƒ, nÃ³ chá»‰ ghi nhá»¯ng cÃ¡i tÃªn chung chung nhÆ° "NhÃ  cá»§a TÃ¨o" hay "Tiá»‡m bÃ¡nh mÃ¬ Ä‘áº§u ngÃµ". Äá»ƒ thá»±c sá»± Ä‘áº¿n Ä‘Æ°á»£c Ä‘Ã³, báº¡n cáº§n biáº¿t chÃ­nh xÃ¡c sá»‘ nhÃ  vÃ  tÃªn Ä‘Æ°á»ng, Ä‘Ãºng khÃ´ng nÃ o?

Trong Java, bÆ°á»›c **Resolution** cÅ©ng lÃ m nhiá»‡m vá»¥ tÆ°Æ¡ng tá»± nhÆ° váº­y:

*   **Nhiá»‡m vá»¥:** MÃ¡y áº£o Java (JVM) sáº½ lá»¥c tÃ¬m trong bá»™ nhá»› vÃ  thay tháº¿ táº¥t cáº£ cÃ¡c "tham chiáº¿u kÃ½ hiá»‡u" (symbolic references) â€” chÃ­nh lÃ  nhá»¯ng cÃ¡i tÃªn cá»§a class hoáº·c interface â€” báº±ng **Ä‘á»‹a chá»‰ bá»™ nhá»› thá»±c táº¿** cá»§a chÃºng.
*   **Káº¿t quáº£:** Sau bÆ°á»›c nÃ y, chÆ°Æ¡ng trÃ¬nh khÃ´ng cÃ²n gá»i tÃªn má»™t cÃ¡ch mÆ¡ há»“ ná»¯a. Thay vÃ o Ä‘Ã³, nÃ³ biáº¿t chÃ­nh xÃ¡c pháº£i tÃ¬m dá»¯ liá»‡u á»Ÿ Ä‘Ã¢u trong RAM.
*   **TÃªn gá»i khÃ¡c:** QuÃ¡ trÃ¬nh nÃ y cÃ²n Ä‘Æ°á»£c gá»i lÃ  **Dynamic Linking** (LiÃªn káº¿t Ä‘á»™ng).

NÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n: Resolution biáº¿n nhá»¯ng "cÃ¡i tÃªn" thÃ nh nhá»¯ng "Ä‘á»‹a chá»‰" thá»±c thá»¥ Ä‘á»ƒ mÃ¡y tÃ­nh cÃ³ thá»ƒ truy cáº­p ngay láº­p tá»©c

      3. **Khá»Ÿi táº¡o (Initialization):** ÄÃ¢y lÃ  bÆ°á»›c cuá»‘i cÃ¹ng trong quÃ¡ trÃ¬nh náº¡p lá»›p (class loading). HÃ£y tÆ°á»Ÿng tÆ°á»£ng Ä‘Ã¢y lÃ  lÃºc má»i thá»© thá»±c sá»± "vÃ o vá»‹ trÃ­":

*   Táº¥t cáº£ cÃ¡c **biáº¿n tÄ©nh (static variables)** sáº½ Ä‘Æ°á»£c thay tháº¿ báº±ng giÃ¡ trá»‹ thá»±c sá»± mÃ  báº¡n Ä‘Ã£ gÃ¡n cho chÃºng.
*   CÃ¡c **khá»‘i mÃ£ tÄ©nh (static blocks)** sáº½ Ä‘Æ°á»£c kÃ­ch hoáº¡t vÃ  cháº¡y ngay láº­p tá»©c.

NÃ³i cÃ¡ch khÃ¡c, Ä‘Ã¢y lÃ  lÃºc Java dá»n dáº¹p xong "báº£n váº½" vÃ  chÃ­nh thá»©c Ä‘á»• Ä‘áº§y dá»¯ liá»‡u vÃ o cÃ¡c Ã´ nhá»› Ä‘á»ƒ lá»›p há»c cá»§a báº¡n sáºµn sÃ ng hoáº¡t Ä‘á»™ng

   CÃ³ ba "ngÆ°á»i váº­n chuyá»ƒn" (classloader) chÃ­nh trong Java giÃºp náº¡p code cá»§a báº¡n vÃ o há»‡ thá»‘ng. HÃ£y tÆ°á»Ÿng tÆ°á»£ng chÃºng giá»‘ng nhÆ° má»™t Ä‘á»™i háº­u cáº§n chia lÃ m ba cáº¥p Ä‘á»™ khÃ¡c nhau:

1.  **Bootstrap Class Loader**
    ÄÃ¢y lÃ  "Ã´ng trÃ¹m" Ä‘á»©ng Ä‘áº§u trong há»‡ thá»‘ng. Nhiá»‡m vá»¥ cá»§a nÃ³ lÃ  náº¡p cÃ¡c lá»›p (class) cá»‘t lÃµi nháº¥t cá»§a Java, vÃ­ dá»¥ nhÆ° gÃ³i `java.lang` (chá»©a cÃ¡c thá»© siÃªu cÆ¡ báº£n nhÆ° `Object` hay `String`). VÃ¬ Ä‘Ã¢y lÃ  thÃ nh pháº§n ná»n táº£ng, nÃ³ thÆ°á»ng Ä‘Æ°á»£c viáº¿t báº±ng mÃ£ mÃ¡y (C/C++) chá»© khÃ´ng pháº£i báº±ng Java Ä‘Ã¢u nhÃ©!

2.  **Extension Class Loader**
    ÄÃºng nhÆ° cÃ¡i tÃªn, anh báº¡n nÃ y chuyÃªn lo cÃ¡c pháº§n "má»Ÿ rá»™ng". Náº¿u báº¡n cÃ³ cÃ¡c thÆ° viá»‡n bá»• sung náº±m trong thÆ° má»¥c cÃ i Ä‘áº·t Java (thÆ°á»ng lÃ  thÆ° má»¥c `lib/ext`), Extension Class Loader sáº½ chá»‹u trÃ¡ch nhiá»‡m mang chÃºng vÃ o chÆ°Æ¡ng trÃ¬nh. NÃ³ lÃ  "con" cá»§a Bootstrap Class Loader.

3.  **System/Application Class Loader**
    ÄÃ¢y lÃ  ngÆ°á»i gáº§n gÅ©i vá»›i báº¡n nháº¥t! NÃ³ cÃ³ nhiá»‡m vá»¥ náº¡p cÃ¡c file `.class` mÃ  chÃ­nh tay báº¡n viáº¿t hoáº·c cÃ¡c thÆ° viá»‡n bÃªn ngoÃ i mÃ  báº¡n thÃªm vÃ o thÃ´ng qua `classpath`. Náº¿u báº¡n cháº¡y má»™t chÆ°Æ¡ng trÃ¬nh Java Ä‘Æ¡n giáº£n, chÃ­nh anh báº¡n nÃ y sáº½ Ä‘i tÃ¬m vÃ  náº¡p code cá»§a báº¡n Ä‘áº¥y.

   1. HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang má»Ÿ má»™t chiáº¿c há»™p kho bÃ¡u Java. Äá»ƒ má»i thá»© hoáº¡t Ä‘á»™ng, chÃºng ta cáº§n má»™t "ngÆ°á»i váº­n chuyá»ƒn" Ä‘áº§u tiÃªn Ä‘á»ƒ mang cÃ¡c cÃ´ng cá»¥ cÆ¡ báº£n vÃ o bá»™ nhá»›. ÄÃ³ chÃ­nh lÃ  **Bootstrap ClassLoader**.

DÆ°á»›i Ä‘Ã¢y lÃ  nhá»¯ng Ä‘iá»u thÃº vá»‹ vá» "vá»‹ thuyá»n trÆ°á»Ÿng" nÃ y:

*   **Ã”ng trÃ¹m cá»§a cÃ¡c Class Loader:** ÄÃ¢y lÃ  lá»›p náº¡p sÆ¡ khai nháº¥t, Ä‘Ã³ng vai trÃ² lÃ  "gá»‘c" cá»§a má»i thá»©.
*   **Káº» vÃ´ hÃ¬nh:** Trong mÃ£ nguá»“n Java, náº¿u báº¡n thá»­ kiá»ƒm tra nÃ³, báº¡n sáº½ thÆ°á»ng chá»‰ tháº¥y káº¿t quáº£ lÃ  `null`. NÃ³ giá»‘ng nhÆ° má»™t bÃ³ng ma quyá»n nÄƒng Ä‘á»©ng sau háº­u trÆ°á»ng váº­y!
*   **Nhiá»‡m vá»¥ cao cáº£:** NÃ³ chá»‹u trÃ¡ch nhiá»‡m náº¡p cÃ¡c thÆ° viá»‡n cá»‘t lÃµi nháº¥t cá»§a Java. Nhá»¯ng thÆ° viá»‡n nÃ y náº±m trong thÆ° má»¥c `<JAVA_HOME>/jmods`, vÃ­ dá»¥ nhÆ°:

```java
// CÃ¡c thÆ° viá»‡n ná»n táº£ng cá»±c ká»³ quan trá»ng nhÆ°:
java.base.jmod
java.desktop.jmod
java.logging.jmod
```

NÃ³i cÃ¡ch khÃ¡c, khÃ´ng cÃ³ "ngÆ°á»i váº­n chuyá»ƒn" Bootstrap nÃ y, chÆ°Æ¡ng trÃ¬nh Java cá»§a báº¡n tháº­m chÃ­ cÃ²n khÃ´ng biáº¿t cÃ¡ch Ä‘á»ƒ... báº¯t Ä‘áº§u! `java.lang`, `java.util` HÃ£y tÆ°á»Ÿng tÆ°á»£ng Bootstrap Class Loader giá»‘ng nhÆ° "ngÆ°á»i khá»Ÿi khá»Ÿi Ä‘áº§u" cho má»i thá»© trong tháº¿ giá»›i Java. ÄÃ¢y lÃ  trÃ¬nh táº£i lá»›p (class loader) quan trá»ng nháº¥t, Ä‘Ã³ng vai trÃ² lÃ  "gá»‘c" cá»§a toÃ n bá»™ há»‡ thá»‘ng.

Nhiá»‡m vá»¥ cá»§a nÃ³ lÃ  gÃ¬? NÃ³ chá»‹u trÃ¡ch nhiá»‡m táº£i cÃ¡c lá»›p cÆ¡ báº£n vÃ  thiáº¿t yáº¿u nháº¥t cá»§a Java, vÃ­ dá»¥ nhÆ° gÃ³i `java.lang`, `java.util`, vÃ  nhiá»u gÃ³i quan trá»ng khÃ¡c.

CÃ³ hai Ä‘iá»ƒm cá»±c ká»³ thÃº vá»‹ vá» "anh báº¡n" nÃ y mÃ  báº¡n cáº§n nhá»›:

*   **KhÃ´ng giá»‘ng nhÆ° nhá»¯ng ngÆ°á»i anh em khÃ¡c:** Háº§u háº¿t cÃ¡c class loader trong Java Ä‘á»u Ä‘Æ°á»£c viáº¿t báº±ng chÃ­nh ngÃ´n ngá»¯ Java. NhÆ°ng Bootstrap Class Loader thÃ¬ khÃ¡c biá»‡t hoÃ n toÃ n!
*   **ÄÆ°á»£c viáº¿t báº±ng mÃ£ mÃ¡y (Native Code):** NÃ³ Ä‘Æ°á»£c viáº¿t báº±ng cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh há»‡ thá»‘ng (nhÆ° C hoáº·c C++). Táº¡i sao Æ°? VÃ¬ nÃ³ cáº§n pháº£i cháº¡y cá»±c nhanh vÃ  lÃ  thá»© Ä‘áº§u tiÃªn "thá»©c dáº­y" khi mÃ¡y áº£o Java (JVM) khá»Ÿi Ä‘á»™ng.

Báº¡n cÃ³ thá»ƒ coi nÃ³ nhÆ° lÃ  ná»n mÃ³ng cá»§a má»™t ngÃ´i nhÃ . TrÆ°á»›c khi báº¡n cÃ³ thá»ƒ xÃ¢y tÆ°á»ng hay lá»£p mÃ¡i (táº£i cÃ¡c lá»›p á»©ng dá»¥ng cá»§a báº¡n), thÃ¬ ná»n mÃ³ng nÃ y pháº£i Ä‘Æ°á»£c Ä‘áº·t xuá»‘ng trÆ°á»›c Ä‘Ã£

   2. ### Platform ClassLoader lÃ  gÃ¬ nhá»‰?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t "ngÆ°á»i váº­n chuyá»ƒn" chuyÃªn biá»‡t trong Java. Nhiá»‡m vá»¥ cá»§a anh chÃ ng **Platform ClassLoader** nÃ y lÃ  Ä‘i láº¥y nhá»¯ng bá»™ cÃ´ng cá»¥ ná»n táº£ng (Platform APIs) Ä‘á»ƒ chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cÃ³ thá»ƒ cháº¡y Ä‘Æ°á»£c.

NÃ³ chá»‹u trÃ¡ch nhiá»‡m táº£i cÃ¡c lá»›p quan trá»ng nhÆ°:
*   CÃ¡c bá»™ API tiÃªu chuáº©n cá»§a Java SE.
*   CÃ¡c lá»›p triá»ƒn khai chi tiáº¿t Ä‘áº±ng sau nhá»¯ng API Ä‘Ã³.
*   VÃ  cáº£ nhá»¯ng lá»›p Ä‘áº·c thÃ¹ chá»‰ dÃ nh cho mÃ´i trÆ°á»ng cháº¡y (runtime) cá»§a JDK.

HÃ£y xem vÃ­ dá»¥ vá» cÃ¡c lá»›p ná»n táº£ng mÃ  nÃ³ thÆ°á»ng Ä‘áº£m nháº­n nhÃ©: `java.net.http`, `java.sql`, `org.graalvm.compile`Ã€, nhá»› nhÃ©! CÃ¡i nÃ y lÃ  *Ä‘áº·c thÃ¹* cá»§a JDK Ä‘Ã³.

   3. **ClassLoader Há»‡ thá»‘ng/á»¨ng dá»¥ng:**
*   Ã€, Ä‘Ã¢y rá»“i! CÃ¡i ClassLoader nÃ y cÃ³ má»™t nhiá»‡m vá»¥ cá»±c ká»³ quan trá»ng Ä‘Ã³ nha.
*   NÃ³ chá»‹u trÃ¡ch nhiá»‡m táº£i Táº¤T Cáº¢ cÃ¡c lá»›p (class) mÃ  báº¡n Ä‘Ã£ "cáº¥u hÃ¬nh" tá»« cÃ¡i "classpath" cá»§a mÃ¬nh.
*   Váº­y cÃ¡i "classpath" nÃ y lÃ  gÃ¬? ÄÆ¡n giáº£n thÃ´i! NÃ³ lÃ  má»™t danh sÃ¡ch cÃ¡c vá»‹ trÃ­ mÃ  Java biáº¿t Ä‘á»ƒ Ä‘i tÃ¬m cÃ¡c file lá»›p cáº§n thiáº¿t Ä‘á»ƒ cháº¡y chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n.
*   CÃ¡i classpath nÃ y cÃ³ thá»ƒ chá»©a cÃ¡c lá»›p tá»« nhiá»u nÆ¡i khÃ¡c nhau, vÃ­ dá»¥ nhÆ° tá»« cÃ¡c thÆ° má»¥c (folder) mÃ  báº¡n chá»‰ Ä‘á»‹nh, hay tá»« cÃ¡c file JAR (nhá»¯ng gÃ³i chá»©a nhiá»u lá»›p Ä‘Æ°á»£c nÃ©n láº¡i) vÃ  cÃ¡c nguá»“n khÃ¡c ná»¯a.

   CÃ¡c Class Loader mÃ  chÃºng ta Ä‘Ã£ nÃ³i á»Ÿ trÃªn, há» khÃ´ng hoáº¡t Ä‘á»™ng riÃªng láº» Ä‘Ã¢u nhÃ©. Há» tuÃ¢n theo má»™t 'há»‡ thá»‘ng phÃ¢n cáº¥p' (hierarchy) cÃ³ thá»© tá»± rÃµ rÃ ng.

ChÃ­nh há»‡ thá»‘ng nÃ y táº¡o ra má»™t 'cÆ¡ cháº¿ á»§y quyá»n' (delegation) ráº¥t thÃ´ng minh. NghÄ©a lÃ  sao?

Náº¿u má»™t class cáº§n Ä‘Æ°á»£c táº£i nhÆ°ng:

*   **Anh Application Class Loader khÃ´ng tÃ¬m tháº¥y nÃ³**, thÃ¬ yÃªu cáº§u nÃ y sáº½ Ä‘Æ°á»£c 'á»§y quyá»n' (chuyá»ƒn giao) lÃªn...
*   **...cho anh Platform Class Loader.** Anh nÃ y sáº½ thá»­ tÃ¬m.
*   **NhÆ°ng náº¿u Platform Class Loader cÅ©ng khÃ´ng tÃ¬m tháº¥y**, thÃ¬ yÃªu cáº§u láº¡i tiáº¿p tá»¥c Ä‘Æ°á»£c 'á»§y quyá»n' lÃªn...
*   **...cho anh Bootstrap Class Loader.** Anh nÃ y lÃ  ngÆ°á»i cuá»‘i cÃ¹ng sáº½ tÃ¬m kiáº¿m.

Cá»© nhÆ° váº­y, há» láº§n lÆ°á»£t 'chuyá»n tay' nhau nhiá»‡m vá»¥ tÃ¬m class, tá»« dÆ°á»›i lÃªn trÃªn.

   **LÆ°u Ã½:** NÃ y, báº¡n biáº¿t gÃ¬ khÃ´ng? NgoÃ i nhá»¯ng anh chÃ ng class loader "cÃ³ sáºµn" mÃ  chÃºng ta vá»«a tÃ¬m hiá»ƒu, báº¡n cÃ²n cÃ³ thá»ƒ tá»± tay táº¡o ra má»™t **class loader cá»§a riÃªng mÃ¬nh** Ä‘áº¥y!

Táº¡i sao láº¡i pháº£i lÃ m tháº¿ Æ°? ÄÆ¡n giáº£n lÃ  Ä‘á»ƒ Ä‘áº£m báº£o cÃ¡c á»©ng dá»¥ng cá»§a báº¡n hoáº¡t Ä‘á»™ng tháº­t *Ä‘á»™c láº­p* vá»›i nhau. TÆ°á»Ÿng tÆ°á»£ng má»—i á»©ng dá»¥ng lÃ  má»™t "hÃ nh tinh" riÃªng, khÃ´ng bá»‹ áº£nh hÆ°á»Ÿng bá»Ÿi nhá»¯ng hÃ nh tinh khÃ¡c.

VÃ­ dá»¥ Ä‘iá»ƒn hÃ¬nh nháº¥t chÃ­nh lÃ  mÃ¡y chá»§ web Tomcat. NÃ³ sá»­ dá»¥ng cÃ¡ch nÃ y (vá»›i má»™t thá»© gá»i lÃ  `WebAppClassLoader`) Ä‘á»ƒ lÃ m gÃ¬? Äá»ƒ khi báº¡n cháº¡y nhiá»u á»©ng dá»¥ng web khÃ¡c nhau trÃªn cÃ¹ng má»™t Tomcat, má»—i á»©ng dá»¥ng cÃ³ thá»ƒ tá»± do táº£i vÃ  "cÃ¡ch ly" cÃ¡c lá»›p (classes) vÃ  thÆ° viá»‡n (jars) cá»§a riÃªng mÃ¬nh. KhÃ´ng ai Ä‘á»™ng cháº¡m Ä‘áº¿n ai, má»—i á»©ng dá»¥ng cÃ³ tháº¿ giá»›i riÃªng cá»§a nÃ³!

   2. **VÃ¹ng Dá»¯ liá»‡u & Bá»™ nhá»› Runtime: NÆ¡i Java 'Ä‘áº·t' má»i thá»© khi chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y**

      NÃ y báº¡n, khi chÆ°Æ¡ng trÃ¬nh Java cá»§a chÃºng ta cháº¡y, nÃ³ cáº§n má»™t "khu vá»±c" riÃªng Ä‘á»ƒ lÆ°u trá»¯ vÃ  xá»­ lÃ½ Ä‘á»§ thá»©, Ä‘Ãºng khÃ´ng?
ChÃºng ta gá»i Ä‘Ã³ lÃ  cÃ¡c vÃ¹ng dá»¯ liá»‡u lÃºc cháº¡y (runtime data areas).
VÃ  nÃ y, cÃ¡c vÃ¹ng dá»¯ liá»‡u nÃ y Ä‘Æ°á»£c chia thÃ nh nÄƒm pháº§n chÃ­nh Ä‘Ã³!

      1. **Method:** NÃ y, cÃ¡i Method Area nÃ y lÃ m gÃ¬ áº¥y háº£? NÃ³ lÃ  nÆ¡i cáº¥t giá»¯ nhá»¯ng thÃ´ng tin *cáº¥p Ä‘á»™ lá»›p* (class level information) â€“ tá»©c lÃ  nhá»¯ng thá»© chung cá»§a cáº£ cÃ¡i lá»›p (class) Ä‘Ã³.

         1. Báº¡n cÃ³ Ä‘ang tháº¯c máº¯c ClassLoader lÃ  gÃ¬ khÃ´ng? ÄÃ¢y chÃ­nh lÃ  nÆ¡i báº¡n sáº½ tÃ¬m tháº¥y táº¥t táº§n táº­t nhá»¯ng thÃ´ng tin cáº§n thiáº¿t Ä‘á»ƒ "tham kháº£o" vá» ClassLoader Ä‘áº¥y!
         2. NÃ y báº¡n, chÃºng ta cÃ¹ng khÃ¡m phÃ¡ má»™t cÃ¡i tÃªn nghe cÃ³ váº» 'khá»§ng' nhÆ°ng thá»±c ra láº¡i ráº¥t hay ho trong tháº¿ giá»›i Java nhÃ©: **Runtime constant pool**!

Nghe tÃªn Ä‘Ã£ tháº¥y cÃ³ chá»¯ 'constant' (háº±ng sá»‘) rá»“i Ä‘Ãºng khÃ´ng? Tá»©c lÃ  nÃ³ sáº½ chá»©a máº¥y cÃ¡i giÃ¡ trá»‹ khÃ´ng Ä‘á»•i. CÃ²n chá»¯ 'runtime' thÃ¬ sao? Ã€, nghÄ©a lÃ  nÃ³ sáº½ xuáº¥t hiá»‡n vÃ  lÃ m viá»‡c *trong lÃºc chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n Ä‘ang cháº¡y* Ä‘Ã³!

Váº­y, cá»¥ thá»ƒ nÃ³ lÃ  cÃ¡i gÃ¬?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y: Má»—i khi báº¡n viáº¿t má»™t lá»›p (class) trong Java, vÃ­ dá»¥ nhÆ° `MyClass.java`, rá»“i báº¡n biÃªn dá»‹ch nÃ³ thÃ nh `MyClass.class` (bytecode), thÃ¬ cÃ¡i file `.class` nÃ y khÃ´ng chá»‰ chá»©a mÃ£ lá»‡nh cá»§a báº¡n Ä‘Ã¢u.

BÃªn trong má»—i file `.class` áº¥y, cÃ³ má»™t pháº§n Ä‘áº·c biá»‡t gá»i lÃ  **constant pool** (bá»ƒ háº±ng sá»‘). NÃ³ giá»‘ng nhÆ° má»™t cuá»‘n sá»• tay ghi chÃº riÃªng cá»§a cÃ¡i lá»›p Ä‘Ã³ váº­y.

Cuá»‘n sá»• tay nÃ y ghi nhá»¯ng gÃ¬?
*   Nhá»¯ng giÃ¡ trá»‹ 'cá»©ng' mÃ  báº¡n dÃ¹ng trong code, vÃ­ dá»¥ nhÆ° sá»‘ `10`, chuá»—i `"Hello World"`, hay sá»‘ tháº­p phÃ¢n `3.14`.
*   VÃ  quan trá»ng hÆ¡n: NÃ³ ghi láº¡i nhá»¯ng 'lá»i há»©a' hoáº·c 'chá»‰ dáº«n' vá» nhá»¯ng thá»© mÃ  lá»›p cá»§a báº¡n cáº§n dÃ¹ng tá»« cÃ¡c lá»›p khÃ¡c. VÃ­ dá»¥, nÃ³ cÃ³ thá»ƒ nÃ³i 'ÃŠ, tÃ´i cáº§n gá»i phÆ°Æ¡ng thá»©c `doSomething()` trong lá»›p `AnotherClass` Ä‘áº¥y nhÃ¡!' hoáº·c 'TÃ´i cáº§n truy cáº­p trÆ°á»ng `myField` cá»§a lá»›p `MyClass` nÃ y'.

Khi chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n báº¯t Ä‘áº§u cháº¡y, vÃ  cÃ¡i lá»›p `MyClass` cá»§a báº¡n Ä‘Æ°á»£c táº£i vÃ o Java Virtual Machine (JVM), thÃ¬ cÃ¡i 'constant pool' tá»« file `.class` Ä‘Ã³ sáº½ Ä‘Æ°á»£c 'biáº¿n hÃ¬nh' thÃ nh **Runtime constant pool**.

NÃ³ váº«n lÃ  má»™t 'bá»ƒ háº±ng sá»‘', nhÆ°ng giá» nÃ³ Ä‘Ã£ 'sá»‘ng' dáº­y trong bá»™ nhá»› cá»§a JVM rá»“i. Má»—i lá»›p Ä‘Æ°á»£c táº£i vÃ o sáº½ cÃ³ má»™t cÃ¡i Runtime constant pool riÃªng cá»§a mÃ¬nh.

VÃ  nhiá»‡m vá»¥ cá»§a nÃ³ lÃ  gÃ¬?
*   NÃ³ giÃºp JVM dá»… dÃ ng tÃ¬m kiáº¿m vÃ  truy cáº­p cÃ¡c háº±ng sá»‘ (nhÆ° sá»‘, chuá»—i) mÃ  lá»›p Ä‘Ã³ sá»­ dá»¥ng.
*   Quan trá»ng nháº¥t: NÃ³ giÃºp 'giáº£i quyáº¿t' nhá»¯ng 'lá»i há»©a' hay 'chá»‰ dáº«n' mÃ  chÃºng ta nÃ³i á»Ÿ trÃªn. Khi lá»›p `MyClass` cáº§n gá»i `doSomething()` tá»« `AnotherClass`, Runtime constant pool sáº½ giÃºp JVM tÃ¬m ra chÃ­nh xÃ¡c Ä‘á»‹a chá»‰ cá»§a `doSomething()` trong bá»™ nhá»› vÃ  káº¿t ná»‘i chÃºng láº¡i vá»›i nhau.

TÃ³m láº¡i, **Runtime constant pool** lÃ  má»™t 'báº£ng tra cá»©u' Ä‘áº·c biá»‡t, chá»©a cÃ¡c háº±ng sá»‘ vÃ  thÃ´ng tin tham chiáº¿u mÃ  má»™t lá»›p cáº§n dÃ¹ng, vÃ  nÃ³ tá»“n táº¡i trong bá»™ nhá»› khi chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y. NÃ³ giÃºp JVM lÃ m viá»‡c hiá»‡u quáº£ vÃ  'hiá»ƒu' Ä‘Æ°á»£c cÃ¡c má»‘i liÃªn káº¿t giá»¯a cÃ¡c pháº§n khÃ¡c nhau trong chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n!
         3. ThÃ´ng tin vá» má»—i trÆ°á»ng (field) áº¥y Ã ? NÃ³ bao gá»“m nhá»¯ng thá»© nhÆ° tÃªn cá»§a trÆ°á»ng, kiá»ƒu dá»¯ liá»‡u cá»§a nÃ³, cÃ¡c 'bá»• ngá»¯' (modifiers) Ä‘i kÃ¨m (vÃ­ dá»¥ nhÆ° `public` hay `private`), vÃ  cáº£ nhá»¯ng thuá»™c tÃ­nh khÃ¡c ná»¯a.
         4. Má»—i phÆ°Æ¡ng thá»©c (method) trong chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n Ä‘á»u cÃ³ "lÃ½ lá»‹ch" riÃªng, hay cÃ²n gá»i lÃ  dá»¯ liá»‡u vá» nÃ³ Ä‘áº¥y!
Báº¡n muá»‘n biáº¿t nhá»¯ng gÃ¬ vá» má»™t phÆ°Æ¡ng thá»©c? Cá»© hÃ¬nh dung nhÆ° báº¡n Ä‘ang há»i "ThÃ´ng tin cÃ¡ nhÃ¢n" cá»§a nÃ³ váº­y.
Nhá»¯ng thÃ´ng tin nÃ y bao gá»“m:

*   **TÃªn cá»§a phÆ°Æ¡ng thá»©c**: ÄÆ¡n giáº£n lÃ  tÃªn báº¡n dÃ¹ng Ä‘á»ƒ gá»i nÃ³ thÃ´i. VÃ­ dá»¥: `tinhTong()`, `inThongTin()`.
*   **Kiá»ƒu dá»¯ liá»‡u tráº£ vá» (return type)**: Khi phÆ°Æ¡ng thá»©c nÃ y lÃ m xong nhiá»‡m vá»¥, nÃ³ sáº½ "tráº£ láº¡i" cho báº¡n má»™t giÃ¡ trá»‹ kiá»ƒu gÃ¬? LÃ  má»™t sá»‘ nguyÃªn (`int`)? Má»™t chuá»—i vÄƒn báº£n (`String`)? Hay nÃ³ cháº³ng tráº£ láº¡i gÃ¬ cáº£ (khi Ä‘Ã³ kiá»ƒu tráº£ vá» lÃ  `void`)?
*   **CÃ¡c tá»« khÃ³a bá»• trá»£ (modifiers)**: Nhá»¯ng tá»« khÃ³a Ä‘áº·c biá»‡t nhÆ° `public`, `private`, `static`, `final`... ChÃºng cho biáº¿t phÆ°Æ¡ng thá»©c nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c ai sá»­ dá»¥ng, tá»« Ä‘Ã¢u, vÃ  nÃ³ hoáº¡t Ä‘á»™ng theo cÃ¡ch Ä‘áº·c biá»‡t nÃ o Ä‘Ã³.
*   **CÃ¡c Ä‘áº·c Ä‘iá»ƒm bá»• sung (attributes)**: ÄÃ´i khi cÃ³ nhá»¯ng thÃ´ng tin khÃ¡c gáº¯n liá»n vá»›i phÆ°Æ¡ng thá»©c, vÃ­ dá»¥ nhÆ° cÃ¡c chÃº thÃ­ch (annotations) Ä‘áº·c biá»‡t.
*   **Kiá»ƒu dá»¯ liá»‡u cá»§a cÃ¡c tham sá»‘ (parameter types)**: PhÆ°Æ¡ng thá»©c nÃ y cÃ³ cáº§n báº¡n "Ä‘Æ°a" cho nÃ³ thÃ´ng tin gÃ¬ Ä‘Ã³ Ä‘á»ƒ lÃ m viá»‡c khÃ´ng? Náº¿u cÃ³, thÃ¬ nhá»¯ng thÃ´ng tin Ä‘áº§u vÃ o (tham sá»‘) Ä‘Ã³ cÃ³ kiá»ƒu dá»¯ liá»‡u lÃ  gÃ¬? (VÃ­ dá»¥: `int soThuNhat, int soThuHai`).

VÃ  cÃ²n nhiá»u Ä‘iá»u thÃº vá»‹ khÃ¡c ná»¯a mÃ  chÃºng ta sáº½ cÃ¹ng tÃ¬m hiá»ƒu!
         5. Dá»¯ liá»‡u vá» má»™t constructor sáº½ cho báº¡n biáº¿t nhá»¯ng Ä‘iá»u nÃ y:

*   'Kiá»ƒu dá»¯ liá»‡u' cá»§a cÃ¡c 'tham sá»‘' mÃ  nÃ³ cáº§n.
*   VÃ  'thá»© tá»±' cá»§a nhá»¯ng 'tham sá»‘' Ä‘Ã³.

Ã€, nhá»› lÃ  cÃ¡i nÃ y lÃ  cho Tá»ªNG constructor RIÃŠNG biá»‡t nha!

      NÃ y, báº¡n nhá»› ká»¹ Ä‘iá»u nÃ y nhÃ©! ÄÃ¢y lÃ  má»™t **tÃ i nguyÃªn dÃ¹ng chung** Ä‘áº¥y.

Cá»© má»—i khi má»™t `JVM` (Java Virtual Machine) khá»Ÿi Ä‘á»™ng, nÃ³ sáº½ **CHá»ˆ cÃ³ DUY NHáº¤T Má»˜T** `Method Area` mÃ  thÃ´i. KhÃ´ng cÃ³ cÃ¡i thá»© hai Ä‘Ã¢u nhÃ©!

VÃ  vÃ¬ chá»‰ cÃ³ má»™t, nÃªn nÃ³ Ä‘Æ°á»£c táº¥t cáº£ má»i thá»© trong `JVM` Ä‘Ã³ dÃ¹ng chung Ä‘áº¥y!

      2. **Heap:** NÃ y báº¡n, báº¡n Ä‘Ã£ bao giá» tá»± há»i "máº¥y cá»¥c" `object` cá»§a mÃ¬nh Ä‘i Ä‘Ã¢u khi chÆ°Æ¡ng trÃ¬nh Java cháº¡y chÆ°a? HÃ£y lÃ m quen vá»›i **Heap** nhÃ©!

Heap chÃ­nh lÃ  má»™t "khu vá»±c dá»¯ liá»‡u" Ä‘áº·c biá»‡t Ä‘Æ°á»£c táº¡o ra *trong lÃºc chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y*. ÄÃ¢y lÃ  nÆ¡i mÃ  Táº¤T Cáº¢ cÃ¡c `object` vÃ  cÃ¡c `instance variable` (máº¥y cÃ¡i dá»¯ liá»‡u riÃªng cá»§a tá»«ng `object`) Ä‘Æ°á»£c cáº¥t giá»¯.

NÃ³ Ä‘Æ°á»£c táº¡o ra ngay khi JVM (MÃ¡y áº£o Java) cá»§a báº¡n khá»Ÿi Ä‘á»™ng. VÃ  nhá»› nhÃ©, má»—i JVM chá»‰ cÃ³ DUY NHáº¤T má»™t Heap thÃ´i! ÄÃ¢y lÃ  "ngÃ´i nhÃ  chung" cho má»i `object` cá»§a báº¡n Ä‘áº¥y.

      3. **Stack (NgÄƒn xáº¿p):**

Báº¡n hÃ¬nh dung tháº¿ nÃ y nhÃ©, má»—i khi báº¡n táº¡o ra má»™t "thread" (má»™t tiáº¿n trÃ¬nh con) trong JVM cá»§a chÃºng ta, thÃ¬ JVM cÅ©ng ráº¥t "chu Ä‘Ã¡o", nÃ³ sáº½ táº¡o ra má»™t cÃ¡i "stack" (ngÄƒn xáº¿p) riÃªng biá»‡t cho thread Ä‘Ã³ ngay láº­p tá»©c. Giá»‘ng nhÆ° má»—i thread cÃ³ má»™t "há»™p cÃ´ng cá»¥" riÃªng cá»§a mÃ¬nh váº­y.

Váº­y cÃ¡i "stack" nÃ y dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬? NÃ³ lÃ  nÆ¡i Ä‘á»ƒ thread "cáº¥t giá»¯" nhá»¯ng thÃ´ng tin quan trá»ng trong lÃºc nÃ³ Ä‘ang lÃ m viá»‡c, vÃ­ dá»¥ nhÆ°:

*   CÃ¡c biáº¿n cá»¥c bá»™ (local variables) mÃ  báº¡n khai bÃ¡o bÃªn trong má»™t phÆ°Æ¡ng thá»©c.
*   ThÃ´ng tin vá» cÃ¡c lá»i gá»i phÆ°Æ¡ng thá»©c (method calls). Khi phÆ°Æ¡ng thá»©c A gá»i phÆ°Æ¡ng thá»©c B, JVM sáº½ "ghi nhá»›" thá»© tá»± nÃ y trong stack.
*   Káº¿t quáº£ táº¡m thá»i (intermediate results) cá»§a cÃ¡c phÃ©p tÃ­nh.

NhÆ°ng mÃ , cÃ¡i "stack" nÃ y khÃ´ng pháº£i lÃ  vÃ´ háº¡n Ä‘Ã¢u nhÃ©! NÃ³ cÃ³ má»™t kÃ­ch thÆ°á»›c giá»›i háº¡n nháº¥t Ä‘á»‹nh. Náº¿u má»™t thread nÃ o Ä‘Ã³ cáº§n má»™t cÃ¡i stack lá»›n hÆ¡n so vá»›i nhá»¯ng gÃ¬ nÃ³ Ä‘Æ°á»£c cáº¥p phÃ©p, thÃ¬ JVM sáº½ "nÃ©m" (throws) ra má»™t lá»—i... `StackOverflow` **Lá»—i**

á» lÃ  la! Khi báº¡n tháº¥y chá»¯ nÃ y, Ä‘Ã³ lÃ  dáº¥u hiá»‡u cho biáº¿t cÃ³ Ä‘iá»u gÃ¬ Ä‘Ã³ khÃ´ng á»•n trong chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n. MÃ¡y tÃ­nh cá»§a báº¡n Ä‘ang cá»‘ gáº¯ng nÃ³i, "NÃ y, tÃ´i khÃ´ng hiá»ƒu báº¡n muá»‘n tÃ´i lÃ m gÃ¬ á»Ÿ Ä‘Ã¢y!"

NÃ³ giá»‘ng nhÆ° báº¡n Ä‘ang cá»‘ gáº¯ng láº¯p má»™t máº£nh ghÃ©p hÃ¬nh vÃ o sai vá»‹ trÃ­ váº­y. NÃ³ khÃ´ng khá»›p!

Äá»«ng lo láº¯ng! Gáº·p **lá»—i** lÃ  má»™t pháº§n ráº¥t, ráº¥t bÃ¬nh thÆ°á»ng khi báº¡n há»c láº­p trÃ¬nh. ChÃºng giÃºp chÃºng ta biáº¿t mÃ¬nh cáº§n sá»­a gÃ¬ Ä‘á»ƒ code hoáº¡t Ä‘á»™ng Ä‘Ãºng. ChÃºng ta sáº½ há»c cÃ¡ch tÃ¬m vÃ  sá»­a chÃºng!

      NÃ y, báº¡n cÃ³ biáº¿t Ä‘iá»u gÃ¬ xáº£y ra má»—i khi chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n 'nháº£y vÃ o' má»™t `method` (hay cÃ²n gá»i lÃ  phÆ°Æ¡ng thá»©c) khÃ´ng?

ÄÃºng váº­y! Má»—i láº§n má»™t `method` Ä‘Æ°á»£c gá»i, má»™t 'khung cÃ´ng viá»‡c' Ä‘áº·c biá»‡t cÃ³ tÃªn lÃ  **`stack frame`** sáº½ Ä‘Æ°á»£c táº¡o ra ngay láº­p tá»©c. NÃ³ 'cÆ° trÃº' trong má»™t khu vá»±c bá»™ nhá»› tÃªn lÃ  **`stack`**.

HÃ£y hÃ¬nh dung `stack frame` nhÆ° má»™t vÄƒn phÃ²ng lÃ m viá»‡c táº¡m thá»i dÃ nh riÃªng cho `method` Ä‘Ã³ váº­y.

VÃ  khi `method` Ä‘Ã³ hoÃ n thÃ nh xong nhiá»‡m vá»¥ cá»§a mÃ¬nh, lÃ m xong má»i thá»© nÃ³ cáº§n lÃ m... bÃ¹m! `stack frame` Ä‘Ã³ sáº½ bá»‹ 'xÃ³a sá»•', dá»n dáº¹p sáº¡ch sáº½ khá»i bá»™ nhá»›.

NhÆ°ng chá» Ä‘Ã£, chÆ°a háº¿t Ä‘Ã¢u nhÃ©! Má»—i `stack frame` nÃ y khÃ´ng pháº£i lÃ  má»™t khá»‘i Ä‘Æ¡n láº» Ä‘Ã¢u. NÃ³ cÃ²n Ä‘Æ°á»£c chia nhá» ra thÃ nh **ba pháº§n** riÃªng biá»‡t ná»¯a cÆ¡!

      1. **Biáº¿n cá»¥c bá»™:**
NÃ y, nhá»› khÃ´ng, má»—i khi cÃ³ má»™t "khung" (frame) má»›i Ä‘Æ°á»£c táº¡o ra?
ThÃ¬ Ä‘Ã¢y, táº¥t cáº£ cÃ¡c biáº¿n cá»¥c bá»™ (local variables) thuá»™c vá» cÃ¡i khung Ä‘Ã³, cÃ¹ng vá»›i giÃ¡ trá»‹ cá»§a chÃºng, sáº½ Ä‘Æ°á»£c lÆ°u trá»¯.
VÃ  báº¡n biáº¿t chÃºng Ä‘Æ°á»£c sáº¯p xáº¿p tháº¿ nÃ o khÃ´ng? ChÃºng Ä‘Æ°á»£c "táº­p káº¿t" gá»n gÃ ng, y nhÆ° cÃ¡c pháº§n tá»­ trong má»™t máº£ng (array) váº­y Ä‘Ã³!
      2. **Operand stack:**

NÃ y, báº¡n Ä‘Ã£ sáºµn sÃ ng gáº·p gá»¡ **Operand Stack** chÆ°a?

Má»—i khi má»™t phÆ°Æ¡ng thá»©c (method) cháº¡y, nÃ³ sáº½ cÃ³ má»™t "khung" (frame) riÃªng. HÃ£y tÆ°á»Ÿng tÆ°á»£ng Ä‘Ã³ lÃ  khÃ´ng gian lÃ m viá»‡c cÃ¡ nhÃ¢n cá»§a phÆ°Æ¡ng thá»©c Ä‘Ã³.

BÃªn trong má»—i "khung" nÃ y, cÃ³ má»™t nÆ¡i Ä‘áº·c biá»‡t Ä‘á»ƒ lÆ°u trá»¯ má»i thá»© cáº§n thiáº¿t cho cÃ¡c phÃ©p toÃ¡n.

ÄÃ³ chÃ­nh lÃ  nÆ¡i cÃ¡c biáº¿n (vÃ­ dá»¥: cÃ¡c con sá»‘ báº¡n muá»‘n cá»™ng, trá»«) vÃ  cÃ¡c toÃ¡n tá»­ (vÃ­ dá»¥: +, -, *) Ä‘Æ°á»£c cáº¥t giá»¯. ChÃºng chá» Ä‘á»£i Ä‘á»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng trong cÃ¡c phÃ©p tÃ­nh toÃ¡n há»c.

VÃ  Ä‘Ã¢y lÃ  cÃ¡ch chÃºng Ä‘Æ°á»£c sáº¯p xáº¿p: chÃºng Ä‘Æ°á»£c lÆ°u trá»¯ trong má»™t "stack" theo nguyÃªn táº¯c LIFO.

LIFO nghÄ©a lÃ  "Last In, First Out" (VÃ o sau, ra trÆ°á»›c). Tá»©c lÃ , thá»© gÃ¬ Ä‘Æ°á»£c Ä‘áº·t vÃ o stack cuá»‘i cÃ¹ng thÃ¬ sáº½ Ä‘Æ°á»£c láº¥y ra Ä‘áº§u tiÃªn khi cáº§n dÃ¹ng!
      3. **Dá»¯ liá»‡u Frame:**

ÄÃ¢y lÃ  má»™t khu vá»±c ráº¥t quan trá»ng Ä‘Ã³ báº¡n! NÃ³ lÃ m gÃ¬ nhá»‰?

*   Äáº§u tiÃªn, nÃ³ giá»¯ táº¥t cáº£ cÃ¡c **tham chiáº¿u kÃ½ hiá»‡u** (symbolic references). Nghe cÃ³ váº» phá»©c táº¡p, nhÆ°ng báº¡n cá»© hÃ¬nh dung Ä‘Ã¢y lÃ  nhá»¯ng cÃ¡i tÃªn táº¡m thá»i mÃ  chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n dÃ¹ng Ä‘á»ƒ chá»‰ cÃ¡c háº±ng sá»‘, tÃªn lá»›p, hay tÃªn phÆ°Æ¡ng thá»©c. Java sáº½ dÃ¹ng chÃºng Ä‘á»ƒ **giáº£i quyáº¿t** (constant pool resolution) vÃ  tÃ¬m ra giÃ¡ trá»‹ tháº­t khi cáº§n.
*   Thá»© hai, nÃ³ lÆ°u trá»¯ dá»¯ liá»‡u mÃ  má»™t phÆ°Æ¡ng thá»©c **tráº£ vá»** sau khi nÃ³ cháº¡y xong. Tá»©c lÃ , káº¿t quáº£ cuá»‘i cÃ¹ng mÃ  phÆ°Æ¡ng thá»©c Ä‘Ã³ tráº£ láº¡i cho báº¡n.
*   VÃ  má»™t Ä‘iá»u cá»±c ká»³ há»¯u Ã­ch ná»¯a: NÃ³ cÃ²n giá»¯ má»™t **tham chiáº¿u** (reference) Ä‘áº¿n **báº£ng ngoáº¡i lá»‡** (exception table). Báº£ng nÃ y giá»‘ng nhÆ° má»™t báº£n Ä‘á»“, chá»©a táº¥t cáº£ thÃ´ng tin vá» cÃ¡c khá»‘i `catch` (catch block) cá»§a báº¡n. Náº¿u cÃ³ lá»—i (ngoáº¡i lá»‡) xáº£y ra, Java sáº½ nhÃ¬n vÃ o Ä‘Ã¢y Ä‘á»ƒ biáº¿t pháº£i lÃ m gÃ¬, pháº£i nháº£y Ä‘áº¿n khá»‘i `catch` nÃ o Ä‘á»ƒ xá»­ lÃ½ ráº¯c rá»‘i Ä‘Ã³. Hay ho Ä‘Ãºng khÃ´ng?

      **LÆ°u Ã½ quan trá»ng:**
Nhá»› nhÃ©! VÃ¹ng Stack *khÃ´ng pháº£i* lÃ  tÃ i nguyÃªn dÃ¹ng chung Ä‘Ã¢u. Má»—i luá»“ng (thread) sáº½ cÃ³ má»™t vÃ¹ng Stack riÃªng biá»‡t cá»§a riÃªng mÃ¬nh. KhÃ´ng ai chia sáº» vá»›i ai cáº£!

      4. **PC Registers:**

NÃ y, báº¡n cÃ³ biáº¿t khÃ´ng? JVM (Java Virtual Machine) nhÃ  ta siÃªu xá»‹n sÃ², nÃ³ cÃ³ thá»ƒ cháº¡y nhiá»u "thread" (hay cÃ²n gá»i lÃ  luá»“ng, hiá»ƒu Ä‘Æ¡n giáº£n lÃ  nhiá»u cÃ´ng viá»‡c nhá») cÃ¹ng má»™t lÃºc Ä‘áº¥y!

VÃ  Ä‘Ã¢y lÃ  pháº§n thÃº vá»‹: má»—i "thread" nÃ y láº¡i Ä‘Æ°á»£c cáº¥p phÃ¡t má»™t "PC register" riÃªng biá»‡t cho mÃ¬nh. ÄÃºng váº­y, má»—i thread má»™t cÃ¡i, khÃ´ng ai dÃ¹ng chung cá»§a ai cáº£!

Váº­y cÃ¡i "PC register" nÃ y dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬ nhá»‰? Ã€, nÃ³ giá»‘ng nhÆ° má»™t ngÆ°á»i chá»‰ Ä‘Æ°á»ng siÃªu thÃ´ng minh váº­y. NÃ³ cÃ³ nhiá»‡m vá»¥ ghi nhá»› Ä‘á»‹a chá»‰ (kiá»ƒu nhÆ° vá»‹ trÃ­) cá»§a *lá»‡nh JVM mÃ  thread Ä‘Ã³ Ä‘ang cháº¡y ngay bÃ¢y giá»*. Kiá»ƒu nhÆ° "Ok, tÃ´i Ä‘ang xá»­ lÃ½ lá»‡nh á»Ÿ Ä‘á»‹a chá»‰ X nÃ y!"

Tháº¿ rá»“i sao ná»¯a? Khi lá»‡nh hiá»‡n táº¡i "hoÃ n thÃ nh nhiá»‡m vá»¥" cá»§a nÃ³, "PC register" sáº½ khÃ´ng "ngá»§ quÃªn" Ä‘Ã¢u. NÃ³ sáº½ tá»± Ä‘á»™ng cáº­p nháº­t! NÃ³ sáº½ nhanh chÃ³ng chuyá»ƒn sang ghi nhá»› Ä‘á»‹a chá»‰ cá»§a *lá»‡nh tiáº¿p theo* cáº§n pháº£i cháº¡y. Cá»© tháº¿, tá»«ng bÆ°á»›c má»™t, má»i thá»© diá»…n ra tháº­t tráº­t tá»± vÃ  hiá»‡u quáº£!

      5. **Native method stack:**
Báº¡n nhá»› "stack" khÃ´ng? ÄÃ¢y lÃ  má»™t anh chÃ ng "stack" ná»¯a nÃ¨, nhÆ°ng mÃ  lÃ  loáº¡i Ä‘áº·c biá»‡t nha!
NÃ³ dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬ Æ°? Ã€, nÃ³ cÃ³ nhiá»‡m vá»¥ "cáº¥t giá»¯" má»i thÃ´ng tin liÃªn quan Ä‘áº¿n cÃ¡c "native method".
"Native method" lÃ  gÃ¬ váº­y? ÄÆ¡n giáº£n thÃ´i, Ä‘Ã³ lÃ  nhá»¯ng phÆ°Æ¡ng thá»©c (hay hÃ m) khÃ´ng Ä‘Æ°á»£c viáº¿t báº±ng Java Ä‘Ã¢u. Thay vÃ o Ä‘Ã³, chÃºng Ä‘Æ°á»£c viáº¿t báº±ng cÃ¡c ngÃ´n ngá»¯ khÃ¡c nhÆ° C, C++ hay Assembly Ä‘Ã³.
Tháº¿ nÃªn, cÃ¡i "Native method stack" nÃ y chÃ­nh lÃ  nÆ¡i dÃ nh riÃªng cho cÃ¡c hÃ m "ngoáº¡i lai" nÃ y Ä‘Ã³!

   3. **Execution engine:**

Gáº·p gá»¡ má»™t thÃ nh pháº§n quan trá»ng khÃ¡c: **Execution Engine** (Bá»™ mÃ¡y thá»±c thi)!

Báº¡n cÃ²n nhá»› nhá»¯ng bytecode mÃ  JVM Ä‘Ã£ táº£i vÃ o khÃ´ng? Váº­y ai sáº½ biáº¿n chÃºng thÃ nh nhá»¯ng gÃ¬ mÃ¡y tÃ­nh thá»±c sá»± lÃ m Ä‘Ã¢y? ChÃ­nh lÃ  anh chÃ ng nÃ y!

Nhiá»‡m vá»¥ chÃ­nh cá»§a **Execution Engine** lÃ  "cháº¡y" (thá»±c thi) táº¥t cáº£ nhá»¯ng bytecode Ä‘Ã£ Ä‘Æ°á»£c táº£i vÃ o JVM.

Trong lÃºc nÃ³ Ä‘ang hÃ¬ há»¥i lÃ m viá»‡c, nÃ³ khÃ´ng lÃ m viá»‡c Ä‘Æ¡n Ä‘á»™c Ä‘Ã¢u. NÃ³ cáº§n liÃªn láº¡c vÃ  tÆ°Æ¡ng tÃ¡c vá»›i cÃ¡c khu vá»±c bá»™ nhá»› khÃ¡c cá»§a JVM. ChÃºng ta gá»i Ä‘Ã³ lÃ  cÃ¡c "vÃ¹ng dá»¯ liá»‡u runtime" (runtime data areas). NÃ³ cáº§n dá»¯ liá»‡u tá»« Ä‘Ã³, hoáº·c cáº§n chá»— Ä‘á»ƒ lÆ°u táº¡m káº¿t quáº£.

VÃ  khi chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n Ä‘Ã£ cháº¡y xong, hoÃ n thÃ nh nhiá»‡m vá»¥ rá»“i... thÃ¬ bá»™ nhá»› mÃ  nÃ³ Ä‘Ã£ sá»­ dá»¥ng trong cÃ¡c "vÃ¹ng dá»¯ liá»‡u runtime" sáº½ Ä‘Æ°á»£c "giáº£i phÃ³ng" (released). Giá»‘ng nhÆ° dá»n dáº¹p sau má»™t bá»¯a tiá»‡c váº­y!

      NÃ³ cÃ³ ba thÃ nh pháº§n chÃ­nh, chuyÃªn dÃ¹ng Ä‘á»ƒ cháº¡y máº¥y cÃ¡i file .class Ä‘Ã³!

      1. **Interpreter:**

Ã€, váº­y thÃ¬ "Interpreter" lÃ  gÃ¬ nhá»‰? HÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y: báº¡n cÃ³ má»™t táº­p há»£p cÃ¡c hÆ°á»›ng dáº«n (gá»i lÃ  *bytecode*) vÃ  mÃ¡y tÃ­nh cá»§a báº¡n cáº§n hiá»ƒu chÃºng Ä‘á»ƒ lÃ m viá»‡c.

*   Interpreter giá»‘ng nhÆ° má»™t ngÆ°á»i phiÃªn dá»‹ch siÃªu tá»‘c. Anh áº¥y sáº½ Ä‘á»c Tá»ªNG DÃ’NG hÆ°á»›ng dáº«n *bytecode* má»™t.
*   Sau Ä‘Ã³, anh áº¥y dá»‹ch ngay láº­p tá»©c dÃ²ng Ä‘Ã³ sang "ngÃ´n ngá»¯ mÃ¡y" Ä‘á»ƒ mÃ¡y tÃ­nh cÃ³ thá»ƒ hiá»ƒu vÃ  thá»±c hiá»‡n. Cá»© tháº¿, tá»«ng dÃ²ng, tá»«ng dÃ²ng má»™t.

**Váº­y Interpreter cÃ³ gÃ¬ hay?**

*   Æ¯u Ä‘iá»ƒm chÃ­nh lÃ  anh áº¥y *cá»±c ká»³ nhanh* khi báº¯t Ä‘áº§u! Khi báº¡n Ä‘Æ°a cho Interpreter má»™t Ä‘oáº¡n code, anh áº¥y sáº½ báº¯t Ä‘áº§u dá»‹ch vÃ  cháº¡y ngay láº­p tá»©c mÃ  khÃ´ng cáº§n chá» Ä‘á»£i gÃ¬ nhiá»u. Code Ä‘Æ°á»£c táº£i vÃ  thá»±c thi má»™t cÃ¡ch ráº¥t láº¹ lÃ ng.

**NhÆ°ng mÃ ... cÃ³ má»™t Ä‘iá»ƒm yáº¿u nhá»:**

*   Giáº£ sá»­ báº¡n cÃ³ má»™t Ä‘oáº¡n code mÃ  nÃ³ cá»© láº·p Ä‘i láº·p láº¡i cÃ¹ng má»™t cÃ´ng viá»‡c (vÃ­ dá»¥: "lÃ m A", sau Ä‘Ã³ "lÃ m A" láº¡i, rá»“i láº¡i "lÃ m A" láº§n ná»¯a).
*   Má»—i khi gáº·p láº¡i Ä‘oáº¡n "lÃ m A", Interpreter sáº½ láº¡i pháº£i Ä‘á»c láº¡i vÃ  dá»‹ch láº¡i *tá»« Ä‘áº§u*, y há»‡t nhÆ° láº§n Ä‘áº§u tiÃªn. Anh áº¥y khÃ´ng "ghi nhá»›" Ä‘Æ°á»£c lÃ  "Ã , Ä‘oáº¡n nÃ y mÃ¬nh vá»«a dá»‹ch xong rá»“i mÃ !".
*   ChÃ­nh vÃ¬ tháº¿, náº¿u code cá»§a báº¡n cÃ³ nhiá»u pháº§n láº·p Ä‘i láº·p láº¡i, Interpreter khÃ´ng thá»ƒ tá»‘i Æ°u hÃ³a Ä‘á»ƒ cháº¡y nhanh hÆ¡n theo thá»i gian Ä‘Æ°á»£c. Anh áº¥y cá»© lÃ m láº¡i y chang tá»«ng bÆ°á»›c má»™t, má»—i láº§n gáº·p láº¡i.

      2. **TrÃ¬nh biÃªn dá»‹ch JIT:** NÃ y, báº¡n cÃ²n nhá»› anh chÃ ng trÃ¬nh thÃ´ng dá»‹ch khÃ´ng? Anh áº¥y cÃ³ má»™t vÃ i Ä‘iá»ƒm yáº¿u, Ä‘áº·c biá»‡t lÃ  khi pháº£i cháº¡y Ä‘i cháº¡y láº¡i má»™t Ä‘oáº¡n mÃ£ nhiá»u láº§n. Tháº¿ lÃ , trÃ¬nh biÃªn dá»‹ch **Just-In-Time Compiler** (hay cÃ²n gá»i lÃ  **JIT Compiler**) xuáº¥t hiá»‡n Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» Ä‘Ã³!

JIT ráº¥t thÃ´ng minh! NÃ³ cÃ³ thá»ƒ 'ghi nhá»›' nhá»¯ng Ä‘oáº¡n mÃ£ mÃ  báº¡n cá»© cháº¡y láº·p Ä‘i láº·p láº¡i. Khi JIT tháº¥y má»™t Ä‘oáº¡n mÃ£ Ä‘Æ°á»£c láº·p láº¡i nhiá»u láº§n, nÃ³ sáº½ biáº¿n Ä‘oáº¡n mÃ£ Ä‘Ã³ thÃ nh 'mÃ£ gá»‘c' (native code) siÃªu tá»‘c Ä‘á»™ vÃ  cáº¥t giá»¯ nÃ³ vÃ o má»™t chá»— Ä‘áº·c biá»‡t gá»i lÃ  'bá»™ nhá»› Ä‘á»‡m' (cache).

Tháº¿ lÃ , láº§n tá»›i khi JIT gáº·p láº¡i Ä‘Ãºng cÃ¡i Ä‘oáº¡n mÃ£ Ä‘Ã³, nÃ³ sáº½ khÃ´ng máº¥t cÃ´ng dá»‹ch láº¡i tá»« Ä‘áº§u ná»¯a. Thay vÃ o Ä‘Ã³, nÃ³ chá»‰ cáº§n láº¥y ngay cÃ¡i 'mÃ£ gá»‘c' siÃªu nhanh Ä‘Ã£ Ä‘Æ°á»£c lÆ°u sáºµn trong cache ra mÃ  dÃ¹ng thÃ´i! Tiáº¿t kiá»‡m biáº¿t bao nhiÃªu thá»i gian!

      JIT compiler cá»§a chÃºng ta áº¥y, nÃ³ cÃ²n Ä‘Æ°á»£c chia nhá» ra thÃ nh cÃ¡c thÃ nh pháº§n sau Ä‘Ã¢y ná»¯a Ä‘Ã³:

      1. **TrÃ¬nh táº¡o mÃ£ trung gian:**
Váº­y anh báº¡n nÃ y lÃ m gÃ¬ nhá»‰? ÄÆ¡n giáº£n láº¯m! Nhiá»‡m vá»¥ cá»§a nÃ³ lÃ  "táº¡o ra" má»™t thá»© mÃ  chÃºng ta gá»i lÃ  mÃ£ trung gian Ä‘Ã³.
      2. **TrÃ¬nh Tá»‘i Æ¯u MÃ£ (Code Optimizer):**
ÄÃ¢y lÃ  má»™t "ngÆ°á»i báº¡n" Ä‘áº·c biá»‡t.
NÃ³ sáº½ láº¥y cÃ¡i "mÃ£ trung gian" (intermediate code) cá»§a báº¡n...
...rá»“i tÃ¬m cÃ¡ch "tá»‘i Æ°u hÃ³a" nÃ³ (nghÄ©a lÃ  lÃ m cho nÃ³ tá»‘t hÆ¡n, gá»n gÃ ng hÆ¡n).
Má»¥c tiÃªu cuá»‘i cÃ¹ng lÃ  gÃ¬? Äá»ƒ chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cháº¡y "nhanh hÆ¡n" vÃ  "hiá»‡u quáº£ hÆ¡n" ráº¥t nhiá»u Ä‘Ã³!
      3. **Bá»™ táº¡o mÃ£ Ä‘Ã­ch** (Target Code Generator):
Ã€, Ä‘Ã¢y lÃ  anh chÃ ng giÃºp báº¡n chuyá»ƒn Ä‘á»•i mÃ£ trung gian (intermediate code) â€“ cÃ¡i mÃ£ mÃ  mÃ¡y tÃ­nh chÆ°a thá»ƒ hiá»ƒu ngay Ä‘Æ°á»£c â€“ thÃ nh mÃ£ mÃ¡y gá»‘c (native machine code). MÃ£ mÃ¡y gá»‘c chÃ­nh lÃ  ngÃ´n ngá»¯ "máº¹ Ä‘áº»" mÃ  CPU cá»§a mÃ¡y tÃ­nh báº¡n cÃ³ thá»ƒ Ä‘á»c vÃ  cháº¡y tháº³ng táº¯p luÃ´n!
      4. **Profiler:**
NÃ y báº¡n! Báº¡n cÃ³ bao giá» nghÄ© lÃ m tháº¿ nÃ o mÃ  Java giÃºp code cá»§a mÃ¬nh cháº¡y nhanh hÆ¡n chÆ°a? HÃ£y gáº·p gá»¡ **Profiler** nhÃ©!

Báº¡n cÃ³ thá»ƒ hÃ¬nh dung nÃ³ nhÆ° má»™t "thÃ¡m tá»­" siÃªu thÃ´ng minh váº­y. CÃ´ng viá»‡c chÃ­nh cá»§a Profiler lÃ  gÃ¬? NÃ³ sáº½ "quan sÃ¡t" chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n khi nÃ³ Ä‘ang cháº¡y Ä‘á»ƒ tÃ¬m ra nhá»¯ng "Hotspots".

Váº­y "Hotspots" lÃ  gÃ¬ nhá»‰?
ÄÃ³ chÃ­nh lÃ  nhá»¯ng pháº§n code (hay cÃ²n gá»i lÃ  cÃ¡c phÆ°Æ¡ng thá»©c) mÃ  chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cá»© cháº¡y Ä‘i cháº¡y láº¡i, cháº¡y Ä‘i cháº¡y láº¡i ráº¥t nhiá»u láº§n. ChÃºng lÃ  nhá»¯ng "Ä‘iá»ƒm nÃ³ng" báº­n rá»™n nháº¥t trong á»©ng dá»¥ng cá»§a báº¡n Ä‘áº¥y!

Khi Profiler tÃ¬m tháº¥y nhá»¯ng "Hotspots" nÃ y, nÃ³ sáº½ lÃ m má»™t Ä‘iá»u tuyá»‡t vá»i: thay tháº¿ nhá»¯ng pháº§n code Java cháº¡y láº·p Ä‘i láº·p láº¡i Ä‘Ã³ báº±ng "mÃ£ gá»‘c" (native code). "MÃ£ gá»‘c" nÃ y Ä‘Æ°á»£c tá»‘i Æ°u hÃ³a Ä‘áº·c biá»‡t cho mÃ¡y tÃ­nh cá»§a báº¡n, giÃºp nhá»¯ng Ä‘oáº¡n code báº­n rá»™n kia cháº¡y nhanh hÆ¡n "chÃ³ng máº·t" luÃ´n!

      5. **Garbage Collector:**
TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©: ChÆ°Æ¡ng trÃ¬nh Java cá»§a báº¡n cá»© táº¡o ra Ä‘á»§ thá»© Ä‘á»‘i tÆ°á»£ng (objects) trong bá»™ nhá»›, giá»‘ng nhÆ° báº¡n cá»© mua Ä‘á»“ vá» nhÃ  váº­y. Sáº½ cÃ³ lÃºc báº¡n khÃ´ng dÃ¹ng Ä‘áº¿n mÃ³n Ä‘á»“ nÃ o Ä‘Ã³ ná»¯a, Ä‘Ãºng khÃ´ng? NÃ³ cá»© náº±m Ä‘Ã³ chiáº¿m chá»— thÃ´i.

Ã€ ha! ÄÃ¢y chÃ­nh lÃ  lÃºc **Garbage Collector (GC)** ra tay!

GC lÃ  má»™t "ngÆ°á»i hÃ¹ng tháº§m láº·ng" cÃ³ nhiá»‡m vá»¥ cá»±c ká»³ quan trá»ng:
*   NÃ³ sáº½ Ä‘i "lÃ¹ng sá»¥c" kháº¯p khu vá»±c bá»™ nhá»› "heap" (nÆ¡i cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n Ä‘ang sá»‘ng).
*   TÃ¬m vÃ  "thu gom" nhá»¯ng Ä‘á»‘i tÆ°á»£ng mÃ  chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n **khÃ´ng cÃ²n dÃ¹ng Ä‘áº¿n ná»¯a** (hay cÃ²n gá»i lÃ  "Ä‘á»‘i tÆ°á»£ng khÃ´ng Ä‘Æ°á»£c tham chiáº¿u").

Má»¥c Ä‘Ã­ch cá»§a viá»‡c nÃ y lÃ  gÃ¬ Æ°? ÄÆ¡n giáº£n thÃ´i:
*   GC sáº½ "thu há»“i" láº¡i vÃ¹ng bá»™ nhá»› Ä‘ang bá»‹ lÃ£ng phÃ­.
*   Nhá» Ä‘Ã³, chÃºng ta sáº½ cÃ³ **thÃªm chá»— trá»‘ng** quÃ½ giÃ¡ Ä‘á»ƒ táº¡o ra nhá»¯ng Ä‘á»‘i tÆ°á»£ng má»›i toanh mÃ  chÆ°Æ¡ng trÃ¬nh cáº§n dÃ¹ng.

Cá»© nhÆ° cÃ³ má»™t ngÆ°á»i dá»n dáº¹p nhÃ  cá»­a tá»± Ä‘á»™ng váº­y! VÃ  báº¡n biáº¿t khÃ´ng, cÃ´ng viá»‡c dá»n dáº¹p nÃ y Ä‘Æ°á»£c thá»±c hiá»‡n qua hai "giai Ä‘oáº¡n" chÃ­nh, ráº¥t cÃ³ bÃ i báº£n nhÃ©:

         1. **Mark:** NÃ o, Ä‘áº¿n bÆ°á»›c "ÄÃ¡nh dáº¥u" rá»“i! á» bÆ°á»›c nÃ y, anh chÃ ng GC sáº½ Ä‘i "Ä‘iá»ƒm danh" kháº¯p bá»™ nhá»›. Anh ta sáº½ tÃ¬m ra xem "ai" lÃ  nhá»¯ng Ä‘á»‘i tÆ°á»£ng khÃ´ng cÃ²n Ä‘Æ°á»£c chÆ°Æ¡ng trÃ¬nh "Ä‘á»ƒ máº¯t" tá»›i hay dÃ¹ng Ä‘áº¿n ná»¯a.
         2. **Sweep:**
ÄÆ°á»£c rá»“i, Ä‘áº¿n bÆ°á»›c nÃ y! Báº¡n cÃ²n nhá»› nhá»¯ng Ä‘á»‘i tÆ°á»£ng mÃ  GC Ä‘Ã£ "Ä‘Ã¡nh dáº¥u" lÃ  khÃ´ng cÃ²n dÃ¹ng ná»¯a á»Ÿ bÆ°á»›c trÆ°á»›c khÃ´ng? Giá» thÃ¬ GC sáº½ báº¯t Ä‘áº§u *dá»n dáº¹p* chÃºng. NÃ³ sáº½ xÃ³a bá» táº¥t cáº£ nhá»¯ng Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ Ä‘i!

   4. **Java Native Interface (JNI):**

NÃ y báº¡n, cÃ³ bao giá» báº¡n nghÄ©: "LÃ m sao Java cÃ³ thá»ƒ nÃ³i chuyá»‡n vá»›i nhá»¯ng thá»© khÃ´ng pháº£i lÃ  Java nhá»‰?" VÃ­ dá»¥ nhÆ° code Ä‘Æ°á»£c viáº¿t báº±ng C hay C++ cháº³ng háº¡n.

ÄÃ³ chÃ­nh lÃ  lÃºc **JNI** (viáº¿t táº¯t cá»§a Java Native Interface) xuáº¥t hiá»‡n!

Báº¡n cá»© hÃ¬nh dung tháº¿ nÃ y: JNI giá»‘ng nhÆ° má»™t "cÃ¢y cáº§u" ná»‘i váº­y. NÃ³ giÃºp code Java cá»§a báº¡n cÃ³ thá»ƒ "gá»i" (call) vÃ  "trÃ² chuyá»‡n" vá»›i cÃ¡c thÆ° viá»‡n "gá»‘c" (native libraries) Ä‘Æ°á»£c viáº¿t báº±ng nhá»¯ng ngÃ´n ngá»¯ khÃ¡c nhÆ° C, C++, v.v.

Váº­y táº¡i sao chÃºng ta láº¡i cáº§n Ä‘áº¿n cÃ¡i cáº§u ná»‘i nÃ y?

ÄÆ¡n giáº£n lÃ  vÃ¬ Ä‘Ã´i khi, báº¡n sáº½ cáº§n pháº£i cháº¡y nhá»¯ng Ä‘oáº¡n code "gá»‘c" Ä‘Ã³. Äáº·c biá»‡t lÃ  khi báº¡n muá»‘n tÆ°Æ¡ng tÃ¡c trá»±c tiáº¿p vá»›i má»™t pháº§n cá»©ng nÃ o Ä‘Ã³ ráº¥t cá»¥ thá»ƒ, mÃ  Java khÃ´ng thá»ƒ tá»± mÃ¬nh lÃ m Ä‘Æ°á»£c. JNI chÃ­nh lÃ  "ngÆ°á»i phiÃªn dá»‹ch" giÃºp Java thá»±c hiá»‡n Ä‘iá»u Ä‘Ã³!
   5. **ThÆ° viá»‡n PhÆ°Æ¡ng thá»©c Gá»‘c (Native Method Libraries):**

Váº­y ThÆ° viá»‡n PhÆ°Æ¡ng thá»©c Gá»‘c lÃ  gÃ¬ nhá»‰? TÆ°á»Ÿng tÆ°á»£ng nhÃ©, chÃºng lÃ  má»™t bá»™ sÆ°u táº­p cÃ¡c thÆ° viá»‡n "native" (nghÄ©a lÃ , chÃºng Ä‘Æ°á»£c viáº¿t báº±ng nhá»¯ng ngÃ´n ngá»¯ "sÃ¡t" vá»›i pháº§n cá»©ng hÆ¡n nhÆ° C, C++ hay Assembly). Bá»™ mÃ¡y thá»±c thi cá»§a báº¡n cáº§n nhá»¯ng thÆ° viá»‡n nÃ y Ä‘á»ƒ lÃ m nhá»¯ng cÃ´ng viá»‡c Ä‘áº·c biá»‡t Ä‘Ã³.

VÃ  lÃ m sao Java cÃ³ thá»ƒ "nÃ³i chuyá»‡n" Ä‘Æ°á»£c vá»›i máº¥y thÆ° viá»‡n "khÃ³ tÃ­nh" nÃ y? Ã€, chÃºng Ä‘Æ°á»£c táº£i (load) vÃ o thÃ´ng qua má»™t cÃ¢y cáº§u Ä‘áº·c biá»‡t tÃªn lÃ  JNI (Java Native Interface) Ä‘Ã³. Sau khi Ä‘Æ°á»£c táº£i, chÃºng sáº½ Ä‘Æ°á»£c thá»ƒ hiá»‡n dÆ°á»›i dáº¡ng... `.dll` ChÃ o báº¡n! ChÃºng ta cÃ¹ng tÃ¬m hiá»ƒu tá»« `or` nhÃ©.

Trong tiáº¿ng Viá»‡t, `or` cÃ³ nghÄ©a lÃ  **hoáº·c**.

NghÄ© Ä‘Æ¡n giáº£n tháº¿ nÃ y nÃ¨:

Khi báº¡n nÃ³i "Báº¡n cÃ³ thá»ƒ Äƒn bÃ¡nh quy **hoáº·c** Äƒn má»™t quáº£ tÃ¡o."

Äiá»u nÃ y cÃ³ nghÄ©a lÃ  báº¡n cÃ³ hai lá»±a chá»n, vÃ  báº¡n chá»‰ cáº§n chá»n *má»™t trong hai* lÃ  Ä‘Æ°á»£c.

Trong láº­p trÃ¬nh, `hoáº·c` (hay `or`) cÅ©ng hoáº¡t Ä‘á»™ng tÆ°Æ¡ng tá»± váº­y Ä‘Ã³!

VÃ­ dá»¥, báº¡n muá»‘n Ä‘i chÆ¡i náº¿u trá»i **khÃ´ng mÆ°a** `hoáº·c` **lÃ  cuá»‘i tuáº§n**.

*   Náº¿u trá»i khÃ´ng mÆ°a (dÃ¹ khÃ´ng pháº£i cuá»‘i tuáº§n), báº¡n váº«n Ä‘i chÆ¡i!
*   Náº¿u lÃ  cuá»‘i tuáº§n (dÃ¹ trá»i cÃ³ mÆ°a), báº¡n váº«n Ä‘i chÆ¡i!
*   Náº¿u trá»i vá»«a khÃ´ng mÆ°a *láº¡i vá»«a* lÃ  cuá»‘i tuáº§n, thÃ¬ quÃ¡ tuyá»‡t vá»i rá»“i, báº¡n cháº¯c cháº¯n Ä‘i chÆ¡i!

Váº­y tÃ³m láº¡i, `hoáº·c` cÃ³ nghÄ©a lÃ : **chá»‰ cáº§n *Ã­t nháº¥t má»™t* Ä‘iá»u kiá»‡n Ä‘Ãºng thÃ¬ toÃ n bá»™ cÃ¢u lá»‡nh sáº½ Ä‘Ãºng.**

Dá»… hiá»ƒu pháº£i khÃ´ng nÃ o? `.so` ChÃ o báº¡n! Báº¡n cÃ³ bao giá» tá»± há»i mÃ¡y tÃ­nh cá»§a mÃ¬nh lÆ°u trá»¯ má»i thá»© á»Ÿ Ä‘Ã¢u khÃ´ng?

Ã€, báº¡n biáº¿t Ä‘áº¥y, nhá»¯ng bá»©c áº£nh, bÃ i nháº¡c, hay cÃ¡c tÃ i liá»‡u quan trá»ng cá»§a báº¡n...

NÃ³ giá»¯ táº¥t cáº£ nhá»¯ng thá»© Ä‘Ã³ trong cÃ¡c **tá»‡p** (hoáº·c cÃ²n gá»i lÃ  táº­p tin)!

HÃ£y nghÄ© má»™t tá»‡p nhÆ° má»™t cÃ¡i há»™p nhá». NÃ³ chá»©a má»™t Ã­t dá»¯ liá»‡u bÃªn trong.

CÃ³ thá»ƒ lÃ  má»™t tá»‡p vÄƒn báº£n, chá»©a toÃ n chá»¯. Hoáº·c má»™t tá»‡p áº£nh, chá»©a má»™t bá»©c hÃ¬nh.

ÄÆ¡n giáº£n váº­y thÃ´i Ä‘Ã³!

   **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

4. ### Java cÃ³ gÃ¬ Ä‘áº·c biá»‡t? CÃ¹ng xem cÃ¡c tÃ­nh nÄƒng chÃ­nh nhÃ©!

   NÃ y, báº¡n cÃ³ biáº¿t khÃ´ng? Java cÃ³ ráº¥t nhiá»u tÃ­nh nÄƒng "Ä‘á»‰nh cá»§a chÃ³p" Ä‘áº¥y! ChÃ­nh máº¥y cÃ¡i tÃ­nh nÄƒng nÃ y Ä‘Ã£ giÃºp Java ná»•i báº­t háº³n so vá»›i cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh khÃ¡c mÃ  má»i ngÆ°á»i hay dÃ¹ng. Báº¡n muá»‘n biáº¿t Ä‘Ã³ lÃ  nhá»¯ng gÃ¬ khÃ´ng? CÃ¹ng xem má»™t vÃ i "siÃªu nÄƒng lá»±c" cá»§a nÃ³ nhÃ©:

   1. **ÄÆ¡n giáº£n:** Java Ã¡? NÃ³ Ä‘Æ¡n giáº£n láº¯m luÃ´n! ÄÃ¢y lÃ  má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh cá»±c ká»³ dá»… hiá»ƒu. Báº¡n sáº½ khÃ´ng gáº·p pháº£i máº¥y cÃ¡i ráº¯c rá»‘i phá»©c táº¡p nhÆ° khi dÃ¹ng nhá»¯ng ngÃ´n ngá»¯ láº­p trÃ¬nh "ngÃ y xÆ°a" Ä‘Ã¢u. Dá»… tiáº¿p cáº­n láº¯m!
      ÄÃ¢y lÃ  má»™t vÃ i lÃ½ do táº¡i sao Java láº¡i "dá»… thá»Ÿ" Ä‘áº¿n váº­y:

1.  **Báº¡n Ä‘Ã£ tá»«ng "nghÃ­a" qua C++ rá»“i Ã ? Tuyá»‡t vá»i!**
    Náº¿u báº¡n Ä‘Ã£ biáº¿t má»™t chÃºt vá» C++ rá»“i, thÃ¬ há»c Java sáº½ tháº¥y quen quen vÃ  nhanh láº¯m! Java Ä‘Æ°á»£c xÃ¢y dá»±ng dá»±a trÃªn má»™t sá»‘ Ã½ tÆ°á»Ÿng tá»« C++, giÃºp nhá»¯ng láº­p trÃ¬nh viÃªn má»›i dá»… dÃ ng báº¯t nhá»‹p vÃ  há»c nhanh hÆ¡n nhiá»u. Giá»‘ng nhÆ° báº¡n Ä‘Ã£ biáº¿t Ä‘i xe Ä‘áº¡p rá»“i, giá» há»c Ä‘i xe mÃ¡y sáº½ dá»… hÆ¡n váº­y Ä‘Ã³.

2.  **Táº¡m biá»‡t nhá»¯ng "cÆ¡n Ä‘au Ä‘áº§u" vá»›i con trá»!**
    Nhá»› máº¥y cÃ¡i con trá» (pointers) trong C hay C++ khÃ´ng? ChÃºng ráº¯c rá»‘i láº¯m, Ä‘Ãºng khÃ´ng? VÃ  cÃ²n dá»… gÃ¢y ra máº¥y lá»—i báº£o máº­t "khÃ³ chá»‹u" ná»¯a chá»©! Tháº¿ nÃªn, Java nÃ³i "Táº¡m biá»‡t!" vá»›i chÃºng. Báº¡n sáº½ KHÃ”NG BAO GIá»œ pháº£i Ä‘au Ä‘áº§u vá»›i con trá» trong Java ná»¯a.
    Ã€, vá»›i cáº£ cÃ¡i "operator overloading" (tá»©c lÃ  dÃ¹ng má»™t toÃ¡n tá»­ cho nhiá»u má»¥c Ä‘Ã­ch khÃ¡c nhau) cÅ©ng khÃ´ng cÃ³ trong Java. Má»i thá»© sáº½ rÃµ rÃ ng vÃ  dá»… hiá»ƒu hÆ¡n nhiá»u. Java muá»‘n báº¡n táº­p trung vÃ o viá»‡c táº¡o ra nhá»¯ng pháº§n má»m tuyá»‡t vá»i, chá»© khÃ´ng pháº£i váº­t lá»™n vá»›i máº¥y thá»© phá»©c táº¡p Ä‘Ã³.

3.  **CÃ³ "ngÆ°á»i giÃºp viá»‡c" tá»± Ä‘á»™ng dá»n dáº¹p cho báº¡n!**
    Trong má»™t sá»‘ ngÃ´n ngá»¯ khÃ¡c, khi báº¡n táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng mÃ  sau nÃ y khÃ´ng dÃ¹ng Ä‘áº¿n ná»¯a, báº¡n sáº½ pháº£i tá»± tay "dá»n dáº¹p" nÃ³ khá»i bá»™ nhá»›. Má»‡t má»i láº¯m! NhÆ°ng vá»›i Java thÃ¬ KHÃ”NG! Java cÃ³ má»™t anh hÃ¹ng tháº§m láº·ng tÃªn lÃ  **Automatic Garbage Collection** (Bá»™ thu gom rÃ¡c tá»± Ä‘á»™ng). Anh chÃ ng nÃ y sáº½ tá»± Ä‘á»™ng tÃ¬m vÃ  dá»n dáº¹p nhá»¯ng Ä‘á»‘i tÆ°á»£ng "vÃ´ chá»§" mÃ  chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n khÃ´ng cáº§n dÃ¹ng Ä‘áº¿n ná»¯a. Báº¡n cá»© thoáº£i mÃ¡i táº¡o Ä‘á»‘i tÆ°á»£ng Ä‘i, viá»‡c dá»n dáº¹p cá»© Ä‘á»ƒ Garbage Collector lo! Cá»© nhÆ° cÃ³ má»™t ngÆ°á»i giÃºp viá»‡c tá»± Ä‘á»™ng váº­y Ä‘Ã³!

   2. **HÆ°á»›ng Ä‘á»‘i tÆ°á»£ng:**
Báº¡n biáº¿t khÃ´ng, Java lÃ  má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh HÆ°á»›ng Ä‘á»‘i tÆ°á»£ng (Object-Oriented Programming - OOPS) Ä‘áº¥y! Nghe cÃ³ váº» "oÃ¡ch" Ä‘Ãºng khÃ´ng? Äá»«ng lo láº¯ng! Äiá»u Ä‘Ã³ Ä‘Æ¡n giáº£n cÃ³ nghÄ©a lÃ  trong Java, má»i thá»© báº¡n lÃ m viá»‡c cÃ¹ng, má»i thá»© báº¡n muá»‘n táº¡o ra, Ä‘á»u Ä‘Æ°á»£c biá»ƒu diá»…n dÆ°á»›i dáº¡ng cÃ¡c "lá»›p" (classes) vÃ  "Ä‘á»‘i tÆ°á»£ng" (objects) khÃ¡c nhau.

Váº­y OOPS nÃ y cÃ³ tÃ¡c dá»¥ng gÃ¬? Ã€, nÃ³ lÃ  má»™t "phÆ°Æ¡ng phÃ¡p" (methodology) cá»±c ká»³ hay ho, giÃºp chÃºng ta Ä‘Æ¡n giáº£n hÃ³a viá»‡c phÃ¡t triá»ƒn pháº§n má»m vÃ  "báº£o trÃ¬" (sá»­a chá»¯a, nÃ¢ng cáº¥p) chÃºng ná»¯a. NÃ³ lÃ m Ä‘Æ°á»£c Ä‘iá»u Ä‘Ã³ báº±ng cÃ¡ch tuÃ¢n theo má»™t vÃ i "tÃ­nh nÄƒng" Ä‘áº·c biá»‡t mÃ  chÃºng ta sáº½ tÃ¬m hiá»ƒu ngay sau Ä‘Ã¢y.

      1. ## Trá»«u TÆ°á»£ng (Abstraction)

NÃ y báº¡n! Báº¡n cÃ³ bao giá» lÃ¡i má»™t chiáº¿c xe hÆ¡i chÆ°a? Báº¡n chá»‰ cáº§n báº­t chÃ¬a khÃ³a, Ä‘áº¡p ga, nháº¥n phanh... vÃ  xe cháº¡y! VÃ¹ vÃ¹!

Báº¡n cÃ³ cáº§n biáº¿t chÃ­nh xÃ¡c tá»«ng chi tiáº¿t Ä‘á»™ng cÆ¡ hoáº¡t Ä‘á»™ng ra sao khÃ´ng? Tá»«ng cÃ¡i pÃ­t-tÃ´ng nháº¥p nhÃ´ tháº¿ nÃ o? Tá»«ng cÃ¡i bugi Ä‘Ã¡nh lá»­a ra sao? Hay há»‡ thá»‘ng Ä‘iá»‡n phá»©c táº¡p bÃªn trong?

KHÃ”NG Há»€! Báº¡n chá»‰ cáº§n biáº¿t *cÃ¡ch sá»­ dá»¥ng* nÃ³. Báº¡n chá»‰ cáº§n biáº¿t "CÃI GÃŒ" nÃ³ lÃ m Ä‘Æ°á»£c (cháº¡y, dá»«ng, ráº½), chá»© khÃ´ng cáº§n quan tÃ¢m "LÃ€M THáº¾ NÃ€O" nÃ³ lÃ m Ä‘Æ°á»£c nhá»¯ng viá»‡c Ä‘Ã³.

ÄÃ³ chÃ­nh lÃ  TRá»ªU TÆ¯á»¢NG!

### Váº­y Trá»«u TÆ°á»£ng lÃ  gÃ¬?

*   Trá»«u tÆ°á»£ng lÃ  má»™t cÃ¡ch Ä‘á»ƒ chÃºng ta **giáº¥u Ä‘i nhá»¯ng chi tiáº¿t phá»©c táº¡p, láº±ng nháº±ng** bÃªn trong.
*   NÃ³ giÃºp chÃºng ta **táº­p trung vÃ o nhá»¯ng gÃ¬ quan trá»ng** â€“ tá»©c lÃ  "CÃI GÃŒ" má»™t thá»© lÃ m Ä‘Æ°á»£c, thay vÃ¬ "LÃ€M THáº¾ NÃ€O" nÃ³ thá»±c hiá»‡n.

HÃ£y nghÄ© vá» cÃ¡i Ä‘iá»u khiá»ƒn TV cá»§a báº¡n. Báº¡n báº¥m nÃºt "TÄƒng Ã¢m lÆ°á»£ng", vÃ  Ã¢m lÆ°á»£ng tÄƒng. Báº¡n Ä‘Ã¢u cáº§n biáº¿t bÃªn trong cÃ¡i Ä‘iá»u khiá»ƒn Ä‘Ã³ cÃ³ con chip gÃ¬, nÃ³ gá»­i tÃ­n hiá»‡u há»“ng ngoáº¡i ra sao, hay TV nháº­n tÃ­n hiá»‡u Ä‘Ã³ rá»“i xá»­ lÃ½ tháº¿ nÃ o, Ä‘Ãºng khÃ´ng? Báº¡n chá»‰ cáº§n biáº¿t "nÃºt nÃ y dÃ¹ng Ä‘á»ƒ tÄƒng Ã¢m lÆ°á»£ng".

### Táº¡i sao láº¡i cáº§n Trá»«u TÆ°á»£ng?

Trong láº­p trÃ¬nh, má»i thá»© cÃ³ thá»ƒ trá»Ÿ nÃªn ráº¥t, ráº¥t phá»©c táº¡p. Náº¿u chÃºng ta cá»© pháº£i suy nghÄ© vá» táº¥t cáº£ má»i chi tiáº¿t nhá» nháº·t cÃ¹ng má»™t lÃºc, thÃ¬ Ä‘áº§u Ã³c chÃºng ta sáº½ "ná»• tung" máº¥t!

Trá»«u tÆ°á»£ng giÃºp chÃºng ta:

1.  **ÄÆ¡n giáº£n hÃ³a má»i thá»©:** GiÃºp code dá»… Ä‘á»c, dá»… hiá»ƒu hÆ¡n.
2.  **Giáº£m sá»± phá»©c táº¡p:** Báº¡n chá»‰ cáº§n quan tÃ¢m Ä‘áº¿n nhá»¯ng gÃ¬ báº¡n cáº§n dÃ¹ng, khÃ´ng bá»‹ choÃ¡ng ngá»£p bá»Ÿi hÃ ng tÃ¡ chi tiáº¿t khÃ´ng liÃªn quan.
3.  **Dá»… báº£o trÃ¬ vÃ  má»Ÿ rá»™ng:** Náº¿u sau nÃ y báº¡n muá»‘n thay Ä‘á»•i cÃ¡ch má»™t thá»© hoáº¡t Ä‘á»™ng, báº¡n chá»‰ cáº§n thay Ä‘á»•i "bÃªn trong" mÃ  khÃ´ng lÃ m áº£nh hÆ°á»Ÿng Ä‘áº¿n nhá»¯ng chá»— khÃ¡c Ä‘ang sá»­ dá»¥ng nÃ³.

### Trá»«u TÆ°á»£ng trong code trÃ´ng nhÆ° tháº¿ nÃ o?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang viáº¿t má»™t chÆ°Æ¡ng trÃ¬nh vá» cÃ¡c loáº¡i hÃ¬nh váº½. Báº¡n cÃ³ thá»ƒ cÃ³:

*   `HÃ¬nhTrÃ²n`
*   `HÃ¬nhVuÃ´ng`
*   `HÃ¬nhTamGiÃ¡c`

Táº¥t cáº£ cÃ¡c hÃ¬nh nÃ y Ä‘á»u cÃ³ thá»ƒ "váº½" Ä‘Æ°á»£c. NhÆ°ng cÃ¡ch mÃ  `HÃ¬nhTrÃ²n` váº½ sáº½ khÃ¡c `HÃ¬nhVuÃ´ng`, vÃ  khÃ¡c `HÃ¬nhTamGiÃ¡c`, Ä‘Ãºng khÃ´ng?

Vá»›i trá»«u tÆ°á»£ng, chÃºng ta cÃ³ thá»ƒ táº¡o ra má»™t "khuÃ´n máº«u" chung, kiá»ƒu nhÆ°:

```java
// ÄÃ¢y lÃ  má»™t "khuÃ´n máº«u trá»«u tÆ°á»£ng" cho má»i HÃ¬nhVáº½
abstract class HinhVe {
    // Má»i HÃ¬nhVáº½ Äá»€U pháº£i biáº¿t cÃ¡ch váº½!
    // NhÆ°ng chÃºng ta chÆ°a biáº¿t CÃCH Váº¼ Cá»¤ THá»‚ cá»§a tá»«ng hÃ¬nh.
    abstract void ve(); 
}

// HÃ¬nhTrÃ²n sáº½ tá»± lo cÃ¡ch váº½ cá»§a nÃ³
class HinhTron extends HinhVe {
    @Override
    void ve() {
        System.out.println("Váº½ má»™t hÃ¬nh trÃ²n mÃ u Ä‘á»!");
    }
}

// HÃ¬nhVuÃ´ng cÅ©ng tá»± lo cÃ¡ch váº½ cá»§a nÃ³
class HinhVuong extends HinhVe {
    @Override
    void ve() {
        System.out.println("Váº½ má»™t hÃ¬nh vuÃ´ng vá»›i 4 cáº¡nh báº±ng nhau!");
    }
}
```

á» Ä‘Ã¢y, chÃºng ta Ä‘Ã£ trá»«u tÆ°á»£ng hÃ³a khÃ¡i niá»‡m "váº½". Má»i `HinhVe` **cÃ³ thá»ƒ `ve()`**, nhÆ°ng chÃºng ta khÃ´ng quan tÃ¢m *cÃ¡ch* chÃºng `ve()` á»Ÿ cáº¥p Ä‘á»™ `HinhVe` chung. Má»—i `HinhTron` hay `HinhVuong` sáº½ tá»± lo chi tiáº¿t `ve()` cá»§a mÃ¬nh.

Khi báº¡n dÃ¹ng chÃºng, báº¡n chá»‰ cáº§n gá»i `hinhTron.ve()` hoáº·c `hinhVuong.ve()`, vÃ  báº¡n sáº½ nháº­n Ä‘Æ°á»£c káº¿t quáº£ mong muá»‘n mÃ  khÃ´ng cáº§n báº­n tÃ¢m Ä‘áº¿n má»› chi tiáº¿t bÃªn trong! ÄÃ³ chÃ­nh lÃ  sá»©c máº¡nh cá»§a Trá»«u TÆ°á»£ng!
      2. ### TÃ­nh Ä‘Ã³ng gÃ³i (Encapsulation)

ChÃ o báº¡n, láº­p trÃ¬nh viÃªn Java tÆ°Æ¡ng lai! Báº¡n Ä‘Ã£ bao giá» nghe Ä‘áº¿n tá»« "TÃ­nh Ä‘Ã³ng gÃ³i" chÆ°a? Nghe cÃ³ váº» "pro" quÃ¡ nhá»‰? NhÆ°ng tin tÃ´i Ä‘i, nÃ³ cá»±c ká»³ hay ho vÃ  sáº½ giÃºp code cá»§a báº¡n tá»‘t hÆ¡n ráº¥t nhiá»u Ä‘áº¥y!

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng `Dog` (ChÃº chÃ³). ChÃº chÃ³ nÃ y cÃ³ má»™t `name` (tÃªn) vÃ  má»™t `age` (tuá»•i).

```java
public class Dog {
    public String name;
    public int age;

    public void bark() {
        System.out.println(name + " nÃ³i GÃ¢u gÃ¢u!");
    }
}
```

BÃ¢y giá», giáº£ sá»­ cÃ³ ai Ä‘Ã³ táº¡o má»™t Ä‘á»‘i tÆ°á»£ng `Dog`:

```java
Dog myDog = new Dog();
myDog.name = "Buddy";
myDog.age = 5;
```

TrÃ´ng á»•n Ä‘Ãºng khÃ´ng? NhÆ°ng náº¿u ai Ä‘Ã³ lÃ m tháº¿ nÃ y thÃ¬ sao?

```java
myDog.age = -2; // Ã”i khÃ´ng, má»™t chÃº chÃ³ khÃ´ng thá»ƒ Ã¢m tuá»•i Ä‘Æ°á»£c!
```

Ãi chÃ ! ChÃºng ta vá»«a gÃ¡n cho chÃº chÃ³ má»™t cÃ¡i tuá»•i hoÃ n toÃ n vÃ´ lÃ½. ChÃºng ta khÃ´ng muá»‘n Ä‘iá»u Ä‘Ã³ xáº£y ra! ChÃºng ta muá»‘n **báº£o vá»‡** dá»¯ liá»‡u cá»§a chÃº chÃ³ khá»i nhá»¯ng giÃ¡ trá»‹ khÃ´ng há»£p lá»‡.

**ÄÃ£ Ä‘áº¿n lÃºc TÃ­nh Ä‘Ã³ng gÃ³i xuáº¥t hiá»‡n!**

**TÃ­nh Ä‘Ã³ng gÃ³i** (Encapsulation) giá»‘ng nhÆ° viá»‡c báº¡n Ä‘áº·t má»™t "táº¥m khiÃªn báº£o vá»‡" xung quanh dá»¯ liá»‡u ná»™i bá»™ cá»§a Ä‘á»‘i tÆ°á»£ng. Báº¡n sáº½ gÃ³i gá»n dá»¯ liá»‡u (nhÆ° `name` vÃ  `age`) vÃ  cÃ¡c phÆ°Æ¡ng thá»©c hoáº¡t Ä‘á»™ng trÃªn dá»¯ liá»‡u Ä‘Ã³ (nhÆ° `bark` hoáº·c cÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ *thiáº¿t láº­p* `age`) vÃ o má»™t Ä‘Æ¡n vá»‹ duy nháº¥t â€“ chÃ­nh lÃ  lá»›p (class) cá»§a báº¡n!

NhÆ°ng Ä‘Ã¢y má»›i lÃ  Ä‘iá»u quan trá»ng: báº¡n sáº½ lÃ m cho dá»¯ liá»‡u trá»Ÿ thÃ nh `private`. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  chá»‰ cÃ¡c phÆ°Æ¡ng thá»©c *bÃªn trong* lá»›p `Dog` má»›i cÃ³ thá»ƒ trá»±c tiáº¿p cháº¡m vÃ o `name` vÃ  `age`. KhÃ´ng cÃ³ Ä‘oáº¡n mÃ£ bÃªn ngoÃ i nÃ o cÃ³ thá»ƒ tá»± tiá»‡n nháº£y vÃ o vÃ  thay Ä‘á»•i chÃºng má»™t cÃ¡ch trá»±c tiáº¿p Ä‘Æ°á»£c.

Sau Ä‘Ã³, Ä‘á»ƒ tháº¿ giá»›i bÃªn ngoÃ i cÃ³ thá»ƒ tÆ°Æ¡ng tÃ¡c vá»›i dá»¯ liá»‡u cá»§a báº¡n, báº¡n sáº½ cung cáº¥p cÃ¡c phÆ°Æ¡ng thá»©c `public` Ä‘áº·c biá»‡t, thÆ°á»ng Ä‘Æ°á»£c gá»i lÃ  "getters" (phÆ°Æ¡ng thá»©c láº¥y giÃ¡ trá»‹) vÃ  "setters" (phÆ°Æ¡ng thá»©c Ä‘áº·t giÃ¡ trá»‹).

HÃ£y cÃ¹ng sá»­a láº¡i lá»›p `Dog` cá»§a chÃºng ta vá»›i tÃ­nh Ä‘Ã³ng gÃ³i nhÃ©:

```java
public class Dog {
    private String name; // BÃ¢y giá» lÃ  private!
    private int age;    // CÅ©ng lÃ  private!

    public void bark() {
        System.out.println(name + " nÃ³i GÃ¢u gÃ¢u!");
    }

    // Má»™t phÆ°Æ¡ng thá»©c "setter" cho tuá»•i
    public void setAge(int newAge) {
        if (newAge >= 0) { // ChÃºng ta cÃ³ thá»ƒ thÃªm kiá»ƒm tra há»£p lá»‡ á»Ÿ Ä‘Ã¢y!
            age = newAge;
        } else {
            System.out.println("KhÃ´ng Ä‘Æ°á»£c! Tuá»•i khÃ´ng thá»ƒ Ã¢m.");
        }
    }

    // Má»™t phÆ°Æ¡ng thá»©c "getter" cho tuá»•i
    public int getAge() {
        return age;
    }

    // Má»™t "setter" cho tÃªn (cÃ³ thá»ƒ khÃ´ng cáº§n kiá»ƒm tra há»£p lá»‡, nhÆ°ng váº«n dÃ¹ng setter)
    public void setName(String newName) {
        name = newName;
    }

    // Má»™t "getter" cho tÃªn
    public String getName() {
        return name;
    }
}
```

BÃ¢y giá», hÃ£y xem cÃ¡ch chÃºng ta tÆ°Æ¡ng tÃ¡c vá»›i `Dog` cá»§a mÃ¬nh:

```java
Dog myDog = new Dog();
myDog.setName("Buddy"); // DÃ¹ng setter
myDog.setAge(5);        // DÃ¹ng setter

System.out.println("TÃªn chÃ³ cá»§a tÃ´i lÃ  " + myDog.getName()); // DÃ¹ng getter
System.out.println("Tuá»•i chÃ³ cá»§a tÃ´i lÃ  " + myDog.getAge());   // DÃ¹ng getter

myDog.setAge(-2); // Thá»­ Ä‘áº·t má»™t tuá»•i khÃ´ng há»£p lá»‡...
// Káº¿t quáº£: KhÃ´ng Ä‘Æ°á»£c! Tuá»•i khÃ´ng thá»ƒ Ã¢m.
System.out.println("Tuá»•i chÃ³ cá»§a tÃ´i váº«n lÃ  " + myDog.getAge()); // Tuá»•i váº«n lÃ  5! PhÃ¹!
```

Tháº¥y chÆ°a? ChÃºng ta Ä‘Ã£ báº£o vá»‡ `age` khá»i viá»‡c nháº­n má»™t giÃ¡ trá»‹ ká»³ láº¡, khÃ´ng thá»ƒ cÃ³ Ä‘Æ°á»£c!

**Ã tÆ°á»Ÿng lá»›n lÃ  gÃ¬?**

TÃ­nh Ä‘Ã³ng gÃ³i mang láº¡i cho báº¡n:
*   **Sá»± kiá»ƒm soÃ¡t:** Báº¡n kiá»ƒm soÃ¡t *cÃ¡ch thá»©c* dá»¯ liá»‡u cá»§a Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ Ä‘Æ°á»£c truy cáº­p vÃ  chá»‰nh sá»­a.
*   **Sá»± báº£o vá»‡:** Báº¡n cÃ³ thá»ƒ ngÄƒn cháº·n cÃ¡c tráº¡ng thÃ¡i dá»¯ liá»‡u khÃ´ng há»£p lá»‡.
*   **Sá»± linh hoáº¡t:** Náº¿u sau nÃ y báº¡n thay Ä‘á»•i cÃ¡ch `age` Ä‘Æ°á»£c lÆ°u trá»¯ ná»™i bá»™ (vÃ­ dá»¥, báº¡n dÃ¹ng `Date` ngÃ y sinh thay vÃ¬ sá»‘ tuá»•i), thÃ¬ Ä‘oáº¡n mÃ£ bÃªn ngoÃ i gá»i `setAge()` sáº½ khÃ´ng cáº§n pháº£i biáº¿t hay thay Ä‘á»•i gÃ¬ cáº£!

Táº¥t cáº£ lÃ  Ä‘á»ƒ giá»¯ má»i thá»© gá»n gÃ ng, an toÃ n vÃ  dá»… quáº£n lÃ½. Báº¡n áº©n Ä‘i cÃ¡c hoáº¡t Ä‘á»™ng bÃªn trong vÃ  chá»‰ Ä‘á»ƒ lá»™ nhá»¯ng gÃ¬ cáº§n thiáº¿t thÃ´ng qua cÃ¡c phÆ°Æ¡ng thá»©c Ä‘Æ°á»£c kiá»ƒm soÃ¡t. ÄÃ³ chÃ­nh lÃ  tÃ­nh Ä‘Ã³ng gÃ³i!
      3. NÃ y báº¡n! Báº¡n Ä‘Ã£ bao giá» nghÄ© vá» cÃ¡c má»‘i quan há»‡ "lÃ  má»™t" trong tháº¿ giá»›i thá»±c chÆ°a?
*   Má»™t con ChÃ³ *lÃ  má»™t* Äá»™ng váº­t cÃ³ vÃº.
*   Má»™t con MÃ¨o *lÃ  má»™t* Äá»™ng váº­t cÃ³ vÃº.
*   Má»™t con Äá»™ng váº­t cÃ³ vÃº *lÃ  má»™t* Äá»™ng váº­t.

Tháº¿ giá»›i láº­p trÃ¬nh cá»§a chÃºng ta cÅ©ng Ä‘áº§y nhá»¯ng má»‘i quan há»‡ kiá»ƒu nÃ y Ä‘áº¥y!

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang viáº¿t má»™t chÆ°Æ¡ng trÃ¬nh vá» cÃ¡c loÃ i Ä‘á»™ng váº­t. Báº¡n cÃ³ thá»ƒ cÃ³ cÃ¡c lá»›p nhÆ° `Dog` (ChÃ³), `Cat` (MÃ¨o), `Bird` (Chim)...

Má»—i loÃ i Ä‘á»™ng váº­t nÃ y Ä‘á»u cÃ³ nhá»¯ng hÃ nh Ä‘á»™ng chung, vÃ­ dá»¥:
*   `Äƒn()` (eat)
*   `ngá»§()` (sleep)
*   `di chuyá»ƒn()` (move)

Náº¿u báº¡n viáº¿t code cho tá»«ng lá»›p riÃªng láº», báº¡n sáº½ pháº£i viáº¿t Ä‘i viáº¿t láº¡i cÃ¹ng má»™t Ä‘oáº¡n code cho `Äƒn()`, `ngá»§()`, `di chuyá»ƒn()` trong cáº£ lá»›p `Dog`, lá»›p `Cat`, lá»›p `Bird`... Nghe cÃ³ váº» *ráº¥t* má»‡t má»i vÃ  láº·p Ä‘i láº·p láº¡i Ä‘Ãºng khÃ´ng?

Tháº­t may máº¯n, chÃºng ta cÃ³ má»™t thá»© gá»i lÃ  **Thá»«a káº¿** (Inheritance) Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y!

**Thá»«a káº¿ lÃ  gÃ¬ váº­y?**
ÄÆ¡n giáº£n lÃ , khi má»™t lá»›p "thá»«a káº¿" tá»« má»™t lá»›p khÃ¡c, nÃ³ sáº½ tá»± Ä‘á»™ng nháº­n Ä‘Æ°á»£c (káº¿ thá»«a) táº¥t cáº£ cÃ¡c Ä‘áº·c Ä‘iá»ƒm (biáº¿n) vÃ  hÃ nh vi (phÆ°Æ¡ng thá»©c) mÃ  lá»›p kia cÃ³. Giá»‘ng nhÆ° má»™t Ä‘á»©a con thá»«a hÆ°á»Ÿng gen tá»« bá»‘ máº¹ váº­y!

ChÃºng ta gá»i lá»›p mÃ  cÃ¡c lá»›p khÃ¡c thá»«a káº¿ tá»« Ä‘Ã³ lÃ  **lá»›p cha** (superclass) hoáº·c **lá»›p cÆ¡ sá»Ÿ** (base class).
VÃ  lá»›p mÃ  thá»«a káº¿ lÃ  **lá»›p con** (subclass) hoáº·c **lá»›p dáº«n xuáº¥t** (derived class).

Trong vÃ­ dá»¥ vá» Ä‘á»™ng váº­t, báº¡n cÃ³ thá»ƒ táº¡o má»™t lá»›p chung lÃ  `Animal` (Äá»™ng váº­t). Lá»›p `Animal` nÃ y sáº½ cÃ³ cÃ¡c phÆ°Æ¡ng thá»©c chung nhÆ° `Äƒn()`, `ngá»§()`, `di chuyá»ƒn()`.

Sau Ä‘Ã³, báº¡n cÃ³ thá»ƒ cho lá»›p `Dog` **thá»«a káº¿** tá»« lá»›p `Animal`.
Lá»›p `Cat` cÅ©ng **thá»«a káº¿** tá»« lá»›p `Animal`.

Khi Ä‘Ã³, lá»›p `Dog` vÃ  `Cat` sáº½ *tá»± Ä‘á»™ng* cÃ³ cÃ¡c phÆ°Æ¡ng thá»©c `Äƒn()`, `ngá»§()`, `di chuyá»ƒn()` mÃ  khÃ´ng cáº§n báº¡n pháº£i viáº¿t láº¡i chÃºng ná»¯a! Tháº­t tuyá»‡t vá»i pháº£i khÃ´ng?

NÃ³ giÃºp báº¡n:
*   **TÃ¡i sá»­ dá»¥ng code:** Viáº¿t má»™t láº§n, dÃ¹ng nhiá»u nÆ¡i.
*   **Giáº£m trÃ¹ng láº·p:** Ãt code hÆ¡n, Ã­t lá»—i hÆ¡n.
*   **Dá»… quáº£n lÃ½:** Khi báº¡n muá»‘n thay Ä‘á»•i cÃ¡ch táº¥t cáº£ Ä‘á»™ng váº­t Äƒn, báº¡n chá»‰ cáº§n sá»­a trong lá»›p `Animal` lÃ  xong!

ÄÃ¢y lÃ  cÃ¡ch chÃºng ta thÆ°á»ng tháº¥y nÃ³ trong code (chá»‰ lÃ  Ã½ tÆ°á»Ÿng thÃ´i nhÃ©):

```java
// Lá»›p cha - Superclass
class Animal {
    void eat() {
        // Code cho hÃ nh Ä‘á»™ng Äƒn
    }
    void sleep() {
        // Code cho hÃ nh Ä‘á»™ng ngá»§
    }
    // ... nhiá»u thá»© khÃ¡c ná»¯a
}

// Lá»›p con - Subclass
// Tá»« khÃ³a 'extends' nÃ³i ráº±ng Dog thá»«a káº¿ tá»« Animal
class Dog extends Animal {
    void bark() {
        // Code riÃªng cá»§a chÃ³: sá»§a
    }
}

// Lá»›p con khÃ¡c
class Cat extends Animal {
    void meow() {
        // Code riÃªng cá»§a mÃ¨o: kÃªu meo meo
    }
}
```

Tháº¥y chÆ°a? Lá»›p `Dog` vÃ  `Cat` khÃ´ng cáº§n pháº£i cÃ³ phÆ°Æ¡ng thá»©c `eat()` hay `sleep()` riÃªng ná»¯a, chÃºng Ä‘Ã£ cÃ³ sáºµn tá»« `Animal` rá»“i!

**TÃ³m láº¡i:** Thá»«a káº¿ lÃ  má»™t cÃ´ng cá»¥ siÃªu máº¡nh giÃºp báº¡n xÃ¢y dá»±ng cÃ¡c má»‘i quan há»‡ "lÃ  má»™t" giá»¯a cÃ¡c lá»›p, tÃ¡i sá»­ dá»¥ng code vÃ  lÃ m cho chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n gá»n gÃ ng, dá»… báº£o trÃ¬ hÆ¡n ráº¥t nhiá»u!
      4. Äa hÃ¬nh

Nghe cÃ¡i tÃªn "Polymorphism" (Äa hÃ¬nh) cÃ³ váº» "khoai" Ä‘Ãºng khÃ´ng? Äá»«ng lo! NÃ³ chá»‰ lÃ  má»™t tá»« "Ä‘ao to bÃºa lá»›n" cho má»™t Ã½ tÆ°á»Ÿng siÃªu Ä‘Æ¡n giáº£n thÃ´i.

NghÄ©a Ä‘en cá»§a "Äa hÃ¬nh" lÃ  "nhiá»u hÃ¬nh dáº¡ng" hay "nhiá»u hÃ¬nh thá»©c".

TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©:

*   Báº¡n cÃ³ má»™t ngÆ°á»i báº¡n tÃªn lÃ  An.
*   Khi á»Ÿ nhÃ , An lÃ  "con cá»§a bá»‘ máº¹ An".
*   Khi Ä‘áº¿n trÆ°á»ng, An lÃ  "há»c sinh".
*   Khi chÆ¡i vá»›i báº¡n bÃ¨, An lÃ  "má»™t ngÆ°á»i báº¡n".

CÃ¹ng lÃ  má»™t ngÆ°á»i An, nhÆ°ng á»Ÿ má»—i hoÃ n cáº£nh, An láº¡i "mang" má»™t "hÃ¬nh dáº¡ng" khÃ¡c nhau, Ä‘Ãºng khÃ´ng? VÃ  má»—i "hÃ¬nh dáº¡ng" Ä‘Ã³ láº¡i cÃ³ nhá»¯ng vai trÃ², hÃ nh Ä‘á»™ng riÃªng biá»‡t.

Trong láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng, "Äa hÃ¬nh" cÅ©ng y chang váº­y Ä‘Ã³!

NÃ³ cho phÃ©p báº¡n coi má»™t Ä‘á»‘i tÆ°á»£ng nhÆ° lÃ  má»™t thá»ƒ loáº¡i chung chung hÆ¡n.

VÃ­ dá»¥:

*   Báº¡n cÃ³ má»™t con `ChÃ³` (Dog).
*   Báº¡n cÅ©ng cÃ³ má»™t con `MÃ¨o` (Cat).
*   Cáº£ `ChÃ³` vÃ  `MÃ¨o` Ä‘á»u lÃ  `Äá»™ng váº­t` (Animal) Ä‘Ãºng khÃ´ng?

Tháº¿ nÃªn, báº¡n cÃ³ thá»ƒ táº¡o má»™t biáº¿n kiá»ƒu `Äá»™ng váº­t` vÃ  gÃ¡n cho nÃ³ má»™t Ä‘á»‘i tÆ°á»£ng `ChÃ³` hoáº·c má»™t Ä‘á»‘i tÆ°á»£ng `MÃ¨o`!

```java
Animal dongVat1 = new Dog(); // Má»™t con ChÃ³, nhÆ°ng chÃºng ta coi nÃ³ lÃ  Äá»™ng váº­t
Animal dongVat2 = new Cat(); // Má»™t con MÃ¨o, nhÆ°ng chÃºng ta coi nÃ³ lÃ  Äá»™ng váº­t
```

Giá» thÃ¬ sao? Cáº£ hai `dongVat1` vÃ  `dongVat2` Ä‘á»u lÃ  `Animal` (Äá»™ng váº­t). Náº¿u báº¡n gá»i phÆ°Æ¡ng thá»©c `keu()` (makeSound()) trÃªn chÃºng:

```java
dongVat1.keu(); // ChÃ³ sáº½ "GÃ¢u gÃ¢u!"
dongVat2.keu(); // MÃ¨o sáº½ "Meo meo!"
```

Tháº¥y khÃ´ng? CÃ¹ng má»™t lá»‡nh `keu()`, nhÆ°ng vÃ¬ Ä‘á»‘i tÆ°á»£ng thá»±c sá»± bÃªn trong lÃ  `ChÃ³` hay `MÃ¨o`, mÃ  hÃ nh Ä‘á»™ng láº¡i khÃ¡c nhau! ÄÃ³ chÃ­nh lÃ  "Äa hÃ¬nh" Ä‘Ã³ báº¡n!

NÃ³ giÃºp code cá»§a báº¡n siÃªu linh hoáº¡t, dá»… quáº£n lÃ½ vÃ  má»Ÿ rá»™ng hÆ¡n ráº¥t nhiá»u. Báº¡n cÃ³ thá»ƒ viáº¿t code dÃ¹ng kiá»ƒu chung (nhÆ° `Animal`) mÃ  khÃ´ng cáº§n biáº¿t chÃ­nh xÃ¡c Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ bÃªn trong lÃ  gÃ¬ (lÃ  `Dog` hay `Cat`). SiÃªu tiá»‡n lá»£i luÃ´n!

   3. **Kháº£ chuyá»ƒn (Portable):**
Báº¡n biáº¿t khÃ´ng, Java cÃ³ má»™t siÃªu nÄƒng lá»±c cá»±c ká»³ hay ho gá»i lÃ  "kháº£ chuyá»ƒn" (portable) Ä‘Ã³!
NghÄ©a lÃ  tháº¿ nÃ y: Khi báº¡n viáº¿t code Java trÃªn mÃ¡y tÃ­nh cá»§a mÃ¬nh vÃ  "biÃªn dá»‹ch" nÃ³, Java khÃ´ng táº¡o ra má»™t chÆ°Æ¡ng trÃ¬nh chá»‰ cháº¡y Ä‘Æ°á»£c riÃªng trÃªn mÃ¡y Ä‘Ã³ Ä‘Ã¢u. Thay vÃ o Ä‘Ã³, nÃ³ táº¡o ra má»™t thá»© Ä‘áº·c biá»‡t gá»i lÃ  **"bytecode"**.
CÃ¡i hay lÃ , báº¡n cÃ³ thá»ƒ láº¥y cÃ¡i file bytecode nÃ y vÃ  mang nÃ³ Ä‘i kháº¯p nÆ¡i! DÃ¹ lÃ  mÃ¡y tÃ­nh cháº¡y Windows, Mac hay Linux, chá»‰ cáº§n cÃ³ "MÃ¡y áº£o Java" (JVM) lÃ  bytecode cá»§a báº¡n sáº½ cháº¡y Ä‘Æ°á»£c ngon lÃ nh.
TÃ³m láº¡i, báº¡n chá»‰ cáº§n viáº¿t code Java má»™t láº§n, rá»“i cÃ¡i bytecode Ä‘Ã³ cÃ³ thá»ƒ cháº¡y trÃªn Báº¤T Ká»² ná»n táº£ng nÃ o!

   4. **KhÃ´ng Phá»¥ Thuá»™c Ná»n Táº£ng: BÃ­ Máº­t Cá»§a Java!**

Báº¡n cÃ³ bao giá» tá»± há»i táº¡i sao Java láº¡i "Ä‘áº·c biá»‡t" Ä‘áº¿n tháº¿ khÃ´ng? Má»™t trong nhá»¯ng Ä‘iá»u tuyá»‡t vá»i nháº¥t cá»§a Java chÃ­nh lÃ  kháº£ nÄƒng **khÃ´ng phá»¥ thuá»™c ná»n táº£ng** (Platform Independent) Ä‘áº¥y! Nghe cÃ³ váº» "ngáº§u" Ä‘Ãºng khÃ´ng? CÃ¹ng xem nÃ³ hoáº¡t Ä‘á»™ng tháº¿ nÃ o nhÃ©.

ÄÃ¢y lÃ  cÃ¡ch Java lÃ m viá»‡c:

*   Báº¡n viáº¿t code Java. ÄÃ¢y lÃ  "mÃ£ nguá»“n" cá»§a báº¡n.
*   TrÃ¬nh biÃªn dá»‹ch Java (Java Compiler) sáº½ láº¥y cÃ¡i mÃ£ nguá»“n "ngÃ´n ngá»¯ ngÆ°á»i" cá»§a báº¡n...
*   ...vÃ  biáº¿n nÃ³ thÃ nh má»™t thá»© gá»i lÃ  **bytecode**.
    *   HÃ£y nghÄ© bytecode nhÆ° má»™t "ngÃ´n ngá»¯ trung gian" mÃ  má»i há»‡ Ä‘iá»u hÃ nh Ä‘á»u cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c, miá»…n lÃ  cÃ³ "phiÃªn dá»‹ch viÃªn" phÃ¹ há»£p.
*   Sau Ä‘Ã³, MÃ¡y áº£o Java (JVM - Java Virtual Machine) xuáº¥t hiá»‡n! ÄÃ¢y chÃ­nh lÃ  "phiÃªn dá»‹ch viÃªn" siÃªu viá»‡t cá»§a chÃºng ta!
    *   JVM sáº½ Ä‘á»c cÃ¡i bytecode Ä‘Ã³.
    *   Rá»“i nÃ³ thá»±c thi bytecode Ä‘á»ƒ táº¡o ra káº¿t quáº£ mÃ  báº¡n muá»‘n hiá»ƒn thá»‹!

Giá» thÃ¬ Ä‘áº¿n pháº§n thÃº vá»‹ nÃ y:

*   TÆ°á»Ÿng tÆ°á»£ng báº¡n viáº¿t vÃ  biÃªn dá»‹ch má»™t chÆ°Æ¡ng trÃ¬nh Java trÃªn mÃ¡y tÃ­nh cháº¡y **Windows** cá»§a mÃ¬nh.
*   Báº¡n cÃ³ má»™t file bytecode rá»“i, Ä‘Ãºng khÃ´ng?
*   BÃ¢y giá», báº¡n láº¥y cÃ¡i file bytecode Ä‘Ã³...
*   ...mang sang má»™t mÃ¡y tÃ­nh khÃ¡c cháº¡y **Linux**. Wow! NÃ³ váº«n cháº¡y Ä‘Æ°á»£c!
*   Hay báº¡n mang nÃ³ sang má»™t chiáº¿c **Mac**? Tuyá»‡t vá»i! NÃ³ cÅ©ng cháº¡y ngon lÃ nh luÃ´n!

**BÃ­ máº­t lÃ  gÃ¬?** Miá»…n lÃ  trÃªn má»—i ná»n táº£ng (Windows, Linux hay Mac) Ä‘Ã³ cÃ³ má»™t JVM "riÃªng" cá»§a ná»n táº£ng Ä‘Ã³, thÃ¬ chÆ°Æ¡ng trÃ¬nh Java cá»§a báº¡n sáº½ cháº¡y Ä‘Æ°á»£c!

ÄÃ³ chÃ­nh lÃ  lÃ½ do vÃ¬ sao chÃºng ta gá»i Java lÃ  má»™t ngÃ´n ngá»¯ **khÃ´ng phá»¥ thuá»™c ná»n táº£ng** Ä‘áº¥y. Viáº¿t má»™t láº§n, cháº¡y má»i nÆ¡i! Tháº­t tiá»‡n lá»£i pháº£i khÃ´ng nÃ o?

   5. **Bá»€N Bá»ˆ (Robust):** NÃ y, báº¡n cÃ³ biáº¿t khÃ´ng? Java Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ "siÃªu bá»n bá»‰" luÃ´n Ä‘Ã³! NÃ³ cÃ³ cáº£ má»™t lÃ´ cÃ¡c "lÃ¡ cháº¯n an toÃ n" xá»‹n sÃ², giÃºp code cá»§a báº¡n cháº¡y á»•n Ä‘á»‹nh, khÃ´ng lo trá»¥c tráº·c gÃ¬ háº¿t. DÆ°á»›i Ä‘Ã¢y lÃ  má»™t sá»‘ "lÃ¡ cháº¯n an toÃ n" cá»§a nÃ³:

      1. Báº¡n biáº¿t khÃ´ng, Ä‘Ã´i khi chÆ°Æ¡ng trÃ¬nh cá»§a chÃºng ta cÃ³ thá»ƒ gáº·p 'sá»± cá»‘ báº¥t ngá»' vÃ  'dá»«ng Ä‘á»™t ngá»™t' (kiá»ƒu nhÆ° bá»‹ sáº­p áº¥y!).

NhÆ°ng Ä‘á»«ng lo! Nhá» cÃ³ 'tÃ­nh nÄƒng xá»­ lÃ½ ngoáº¡i lá»‡' (exception handling), chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cÃ³ 'kháº£ nÄƒng' 'Ä‘á»‘i phÃ³' vá»›i nhá»¯ng tÃ¬nh huá»‘ng Ä‘Ã³.

NÃ³ giÃºp chÆ°Æ¡ng trÃ¬nh 'khÃ´ng bá»‹ dá»«ng Ä‘á»™t ngá»™t' má»™t cÃ¡ch báº¥t thÃ¬nh lÃ¬nh ná»¯a!
      2. NÃ y, báº¡n cÃ³ biáº¿t khÃ´ng? Má»™t trong nhá»¯ng Ä‘iá»u *tuyá»‡t vá»i* cá»§a Java lÃ  cÃ¡ch nÃ³ quáº£n lÃ½ bá»™ nhá»› Ä‘áº¥y!

Nhá» cÃ³ **JVM** (MÃ¡y áº£o Java), Java cung cáº¥p má»™t há»‡ thá»‘ng quáº£n lÃ½ bá»™ nhá»› *cá»±c ká»³ máº¡nh máº½*. NÃ³ cÃ³ má»™t 'ngÆ°á»i dá»n dáº¹p' Ä‘áº·c biá»‡t, gá»i lÃ  **Garbage Collector** (Bá»™ thu gom rÃ¡c).

Nhiá»‡m vá»¥ cá»§a anh chÃ ng Garbage Collector nÃ y lÃ  gÃ¬ Æ°?
ÄÆ¡n giáº£n láº¯m: anh áº¥y sáº½ Ä‘i kháº¯p nÆ¡i, tÃ¬m kiáº¿m táº¥t cáº£ cÃ¡c biáº¿n vÃ  Ä‘á»‘i tÆ°á»£ng mÃ  báº¡n khÃ´ng cÃ²n dÃ¹ng Ä‘áº¿n ná»¯a trong chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh.

Khi tÃ¬m tháº¥y, anh áº¥y sáº½ 'gom' chÃºng láº¡i vÃ  **giáº£i phÃ³ng khÃ´ng gian bá»™ nhá»›** Ä‘Ã³. Äiá»u nÃ y giÃºp mÃ¡y tÃ­nh cá»§a báº¡n cÃ³ nhiá»u chá»— trá»‘ng hÆ¡n Ä‘á»ƒ cháº¡y cÃ¡c tÃ¡c vá»¥ khÃ¡c, vÃ  chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cÅ©ng mÆ°á»£t mÃ  hÆ¡n!

Báº¡n thá»­ nghÄ© xem, há»“i xÆ°a trong cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh *trÆ°á»›c Ä‘Ã¢y* thÃ¬ sao?
Khi Ä‘Ã³, chÃ­nh báº¡n â€“ ngÆ°á»i láº­p trÃ¬nh â€“ pháº£i tá»± mÃ¬nh lo liá»‡u *táº¥t táº§n táº­t* má»i thá»© liÃªn quan Ä‘áº¿n bá»™ nhá»›. Báº¡n pháº£i tá»± tay 'xin' chá»— trong bá»™ nhá»› khi cáº§n (gá»i lÃ  cáº¥p phÃ¡t bá»™ nhá»›). VÃ  khi dÃ¹ng xong, báº¡n cÅ©ng pháº£i nhá»› 'tráº£ láº¡i' chá»— Ä‘Ã³ (gá»i lÃ  giáº£i phÃ³ng bá»™ nhá»›).

Náº¿u quÃªn khÃ´ng tráº£ láº¡i, cÃ³ thá»ƒ gÃ¢y ra rÃ² rá»‰ bá»™ nhá»›, lÃ m chÆ°Æ¡ng trÃ¬nh cháº­m rÃ¬ hoáº·c tháº­m chÃ­ lÃ  'sáº­p' luÃ´n! Nghe cÃ³ váº» Ä‘au Ä‘áº§u Ä‘Ãºng khÃ´ng? May máº¯n lÃ  vá»›i Java, báº¡n khÃ´ng cáº§n pháº£i báº­n tÃ¢m vá» viá»‡c Ä‘Ã³ ná»¯a rá»“i!

   6. **Báº£o máº­t:**
Java cá»±c ká»³ an toÃ n! Nghe cÃ³ váº» hay ho Ä‘Ãºng khÃ´ng? Äiá»u nÃ y lÃ  nhá» vÃ o má»™t loáº¡t cÃ¡c tÃ­nh nÄƒng "cá»±c cháº¥t" mÃ  chÃºng ta sáº½ tÃ¬m hiá»ƒu ngay bÃªn dÆ°á»›i Ä‘Ã¢y:

      1. Trong Java, báº¡n sáº½ khÃ´ng gáº·p máº¥y cÃ¡i 'con trá»' (pointers) rÃµ rÃ ng Ä‘Ã¢u nhÃ©.

Äiá»u nÃ y cÃ³ nghÄ©a lÃ  gÃ¬? Ã€, nÃ³ giÃºp báº¡n an toÃ n hÆ¡n Ä‘áº¥y! Báº¡n sáº½ khÃ´ng thá»ƒ nÃ o 'chá»c' vÃ o má»™t vá»‹ trÃ­ náº±m ngoÃ i giá»›i háº¡n cá»§a máº£ng (hay cÃ²n gá»i lÃ  'out-of-bound') Ä‘Æ°á»£c.

NhÆ°ng lá»¡ mÃ  báº¡n cá»‘ tÃ¬nh (hoáº·c vÃ´ tÃ¬nh) thá»­ truy cáº­p má»™t pháº§n tá»­ á»Ÿ 'khu vá»±c cáº¥m' (tá»©c lÃ  ngoÃ i giá»›i háº¡n cá»§a máº£ng) thÃ¬ sao?

ThÃ¬ Java sáº½ khÃ´ng Ä‘á»ƒ yÃªn Ä‘Ã¢u! NÃ³ sáº½ nÃ©m ra má»™t... `ArrayIndexOutOfBound` Ã€, Java cÃ³ má»™t thá»© gá»i lÃ  `Exception` (Ngoáº¡i lá»‡) Ä‘áº¥y!

Khi cÃ³ gÃ¬ Ä‘Ã³ khÃ´ng á»•n xáº£y ra trong chÆ°Æ¡ng trÃ¬nh, Java sáº½ 'nÃ©m' ra má»™t `Exception` Ä‘á»ƒ xá»­ lÃ½.
VÃ  báº¡n biáº¿t khÃ´ng? ChÃ­nh nhá» cÃ¡ch Java quáº£n lÃ½ bá»™ nhá»› cá»±c ká»³ cháº·t cháº½, cá»™ng vá»›i cÆ¡ cháº¿ `Exception` nÃ y...
NÃ³ khiáº¿n cho viá»‡c khai thÃ¡c cÃ¡c lá»— há»•ng báº£o máº­t kiá»ƒu nhÆ° 'lÃ m há»ng stack' (stack corruption) hay 'trÃ n bá»™ Ä‘á»‡m' (buffer overflow) lÃ  ÄIá»€U Báº¤T KHáº¢ THI trong Java Ä‘Ã³!

ÄÃºng váº­y, Java an toÃ n khá»i nhá»¯ng kiá»ƒu táº¥n cÃ´ng nÃ y!
      2. ChÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cháº¡y trong má»™t 'mÃ´i trÆ°á»ng' riÃªng biá»‡t, cá»±c ká»³ an toÃ n. ChÃºng ta gá»i Ä‘Ã³ lÃ  **JVM** (Java Virtual Machine).

HÃ£y hÃ¬nh dung tháº¿ nÃ y: JVM giá»‘ng nhÆ° má»™t cÃ¡i 'há»™p' Ä‘áº·c biá»‡t, nÆ¡i chÆ°Æ¡ng trÃ¬nh Java cá»§a báº¡n Ä‘Æ°á»£c báº£o vá»‡ cáº©n tháº­n.

VÃ  Ä‘Ã¢y lÃ  pháº§n hay nháº¥t: CÃ¡i 'há»™p' nÃ y khÃ´ng há» quan tÃ¢m Ä‘áº¿n há»‡ Ä‘iá»u hÃ nh (OS) mÃ  mÃ¡y tÃ­nh cá»§a báº¡n Ä‘ang dÃ¹ng! DÃ¹ lÃ  Windows, macOS, hay Linux, chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n váº«n cháº¡y ngon lÃ nh. NÃ³ Ä‘á»™c láº­p hoÃ n toÃ n vá»›i OS!
      3. NÃ y, Java cÃ³ má»™t anh chÃ ng Ä‘áº·c biá»‡t tÃªn lÃ  *bytecode verifier* Ä‘áº¥y. Cá»© hÃ¬nh dung anh áº¥y nhÆ° má»™t báº£o vá»‡ siÃªu khÃ³ tÃ­nh Ä‘i!

Viá»‡c cá»§a anh áº¥y lÃ  gÃ¬ Æ°?

Anh áº¥y sáº½ Ä‘i soi xÃ©t *táº¥t cáº£* cÃ¡c Ä‘oáº¡n mÃ£ (code blocks) cá»§a báº¡n, tá»«ng khá»‘i má»™t. Anh áº¥y tÃ¬m kiáº¿m báº¥t cá»© thá»© gÃ¬ "báº¥t há»£p phÃ¡p" - Ä‘áº·c biá»‡t lÃ  nhá»¯ng mÃ£ nÃ o cá»‘ gáº¯ng truy cáº­p cÃ¡c Ä‘á»‘i tÆ°á»£ng (objects) theo má»™t cÃ¡ch mÃ  nÃ³ khÃ´ng Ä‘Æ°á»£c phÃ©p.

Äáº£m báº£o khÃ´ng cÃ³ chuyá»‡n truy cáº­p trÃ¡i phÃ©p á»Ÿ Ä‘Ã¢y Ä‘Ã¢u nhÃ©!

   7. **PhÃ¢n tÃ¡n:**
Báº¡n muá»‘n á»©ng dá»¥ng cá»§a mÃ¬nh khÃ´ng chá»‰ cháº¡y trÃªn Má»˜T mÃ¡y tÃ­nh duy nháº¥t Æ°? Báº¡n muá»‘n nÃ³ cÃ³ thá»ƒ lÃ m viá»‡c cÃ¹ng lÃºc trÃªn nhiá»u mÃ¡y tÃ­nh khÃ¡c nhau, cÃ³ khi á»Ÿ kháº¯p nÆ¡i trÃªn tháº¿ giá»›i? ChÃ , Java cÃ³ thá»ƒ giÃºp báº¡n lÃ m Ä‘iá»u Ä‘Ã³ Ä‘áº¥y!

Java há»— trá»£ báº¡n táº¡o ra cÃ¡c á»©ng dá»¥ng "phÃ¢n tÃ¡n". NghÄ©a lÃ , cÃ¡c pháº§n cá»§a á»©ng dá»¥ng cÃ³ thá»ƒ cháº¡y trÃªn cÃ¡c mÃ¡y tÃ­nh khÃ¡c nhau, nhÆ°ng chÃºng váº«n "nÃ³i chuyá»‡n" vÃ  lÃ m viá»‡c cÃ¹ng nhau nhÆ° má»™t thá»ƒ thá»‘ng nháº¥t.

Äá»ƒ lÃ m Ä‘Æ°á»£c Ä‘iá»u nÃ y, Java cÃ³ nhá»¯ng "cÃ´ng cá»¥" Ä‘áº·c biá»‡t nhÆ° RMI (Remote Method Invocation) vÃ  Enterprise Java Beans (EJB).

Nhá» Ä‘Ã³, cÃ¡c chÆ°Æ¡ng trÃ¬nh Java cá»§a báº¡n cÃ³ thá»ƒ dá»… dÃ ng Ä‘Æ°á»£c "phÃ¢n phá»‘i" (chia ra) vÃ  cháº¡y trÃªn má»™t hoáº·c nhiá»u há»‡ thá»‘ng mÃ¡y tÃ­nh khÃ¡c nhau, chá»‰ cáº§n chÃºng cÃ³ káº¿t ná»‘i internet lÃ  Ä‘Æ°á»£c! Tháº­t tiá»‡n lá»£i pháº£i khÃ´ng nÃ o?

   8. **Multi-threaded (Äa luá»“ng):**
Java cÃ³ má»™t tÃ­nh nÄƒng cá»±c ká»³ tuyá»‡t vá»i gá»i lÃ  "Ä‘a luá»“ng" (multithreading).
TÃ­nh nÄƒng nÃ y cho phÃ©p chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n chia nhá» thÃ nh nhiá»u pháº§n. Sau Ä‘Ã³, nhá»¯ng pháº§n nÃ y cÃ³ thá»ƒ cháº¡y *cÃ¹ng má»™t lÃºc* (hay cÃ²n gá»i lÃ  cháº¡y song song).
Táº¡i sao láº¡i lÃ m tháº¿? Äá»ƒ "bá»™ nÃ£o" cá»§a mÃ¡y tÃ­nh (CPU) Ä‘Æ°á»£c táº­n dá»¥ng tá»‘i Ä‘a cÃ´ng suáº¥t!
Äiá»u nÃ y cÃ³ thá»ƒ thá»±c hiá»‡n Ä‘Æ°á»£c lÃ  nhá» cÃ³ *nhiá»u luá»“ng* (multiple threads) cÃ¹ng cháº¡y chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n *Ä‘á»“ng thá»i*. Giá»‘ng nhÆ° cÃ³ nhiá»u ngÆ°á»i cÃ¹ng lÃ m nhiá»u viá»‡c khÃ¡c nhau trong má»™t dá»± Ã¡n váº­y!

   9. **BiÃªn dá»‹ch vÃ  ThÃ´ng dá»‹ch:**

Java cÃ³ má»™t cÃ¡ch lÃ m viá»‡c ráº¥t thÃº vá»‹! NÃ³ káº¿t há»£p cáº£ hai kiá»ƒu: **biÃªn dá»‹ch (compile)** vÃ  **thÃ´ng dá»‹ch (interpret)** chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n.

Nghe cÃ³ váº» hÆ¡i "láº±ng nháº±ng" Ä‘Ãºng khÃ´ng? CÃ¹ng xem nÃ³ hoáº¡t Ä‘á»™ng tháº¿ nÃ o nhÃ©:

1.  **Äáº§u tiÃªn, biÃªn dá»‹ch:**
    *   Báº¡n viáº¿t mÃ£ nguá»“n (code) xong xuÃ´i.
    *   Má»™t cÃ´ng cá»¥ Ä‘áº·c biá»‡t tÃªn lÃ  **TrÃ¬nh biÃªn dá»‹ch (Compiler)** sáº½ Ä‘á»c toÃ n bá»™ mÃ£ cá»§a báº¡n.
    *   NÃ³ sáº½ "biÃªn dá»‹ch" (dá»‹ch) mÃ£ nguá»“n Ä‘Ã³ thÃ nh má»™t dáº¡ng trung gian gá»i lÃ  **mÃ£ byte (bytecode)**.
    *   HÃ£y nghÄ© mÃ£ byte nhÆ° má»™t ngÃ´n ngá»¯ "Ä‘áº·c biá»‡t" mÃ  mÃ¡y tÃ­nh cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c, nhÆ°ng chÆ°a pháº£i lÃ  ngÃ´n ngá»¯ mÃ¡y hoÃ n chá»‰nh.

2.  **Sau Ä‘Ã³, thÃ´ng dá»‹ch:**
    *   Khi Ä‘Ã£ cÃ³ mÃ£ byte rá»“i, má»™t cÃ´ng cá»¥ khÃ¡c tÃªn lÃ  **TrÃ¬nh thÃ´ng dá»‹ch (Interpreter)** sáº½ vÃ o cuá»™c.
    *   NÃ³ sáº½ Ä‘á»c vÃ  "thÃ´ng dá»‹ch" (giáº£i thÃ­ch) tá»«ng dÃ²ng mÃ£ byte má»™t, trá»±c tiáº¿p cho mÃ¡y tÃ­nh cá»§a báº¡n Ä‘á»ƒ chÆ°Æ¡ng trÃ¬nh cÃ³ thá»ƒ cháº¡y.

Váº­y lÃ  chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n sáº½ tráº£i qua hai bÆ°á»›c: Ä‘Æ°á»£c biÃªn dá»‹ch thÃ nh mÃ£ byte trÆ°á»›c, rá»“i sau Ä‘Ã³ mÃ£ byte Ä‘Ã³ má»›i Ä‘Æ°á»£c thÃ´ng dá»‹ch Ä‘á»ƒ cháº¡y. Hay ho pháº£i khÃ´ng?

   10. **Hiá»‡u suáº¥t cao nÃ¨!**

Bytecode cá»§a Java 'gáº§n nhÆ°' lÃ  ngÃ´n ngá»¯ mÃ  mÃ¡y tÃ­nh hiá»ƒu tháº³ng Ä‘Æ°á»£c luÃ´n Ä‘Ã³. Nhá» váº­y, nÃ³ cháº¡y nhanh hÆ¡n háº³n so vá»›i cÃ¡c ngÃ´n ngá»¯ khÃ¡c mÃ  cá»© pháº£i 'phiÃªn dá»‹ch' tá»«ng cÃ¢u lá»‡nh má»™t (máº¥y ngÃ´n ngá»¯ diá»…n giáº£i thÃ´ng thÆ°á»ng Ä‘Ã³).

NhÆ°ng mÃ  nÃ¨, nÃ³ váº«n chÆ°a nhanh báº±ng máº¥y ngÃ´n ngá»¯ Ä‘Æ°á»£c 'biÃªn dá»‹ch' tháº³ng ra code mÃ¡y tÃ­nh nhÆ° C hay C++ Ä‘Ã¢u nha.

Ã€, cÃ²n má»™t 'phÃ¹ thá»§y' ná»¯a giÃºp Java cháº¡y nhanh hÆ¡n Ä‘Ã³! JVM (cÃ¡i 'mÃ¡y áº£o' Java Ä‘Ã³) cÃ²n cÃ³ thÃªm má»™t anh báº¡n cá»±c ká»³ xá»‹n sÃ² tÃªn lÃ  JIT compiler. Anh báº¡n nÃ y giÃºp Java Ä‘áº¡t hiá»‡u suáº¥t cao hÆ¡n ná»¯a nhá» máº¥y tÃ­nh nÄƒng 'hay ho' dÆ°á»›i Ä‘Ã¢y nÃ¨.
   11. NÃ y báº¡n! Báº¡n cÃ²n nhá»› cÃ¡c **phÆ°Æ¡ng thá»©c (methods)** khÃ´ng? ChÃºng ta dÃ¹ng chÃºng Ä‘á»ƒ nhÃ³m cÃ¡c Ä‘oáº¡n mÃ£ láº¡i, Ä‘Ãºng khÃ´ng nÃ o? Kiá»ƒu nhÆ° báº¡n cÃ³ má»™t cÃ´ng viá»‡c nhá» cáº§n lÃ m Ä‘i lÃ m láº¡i nhiá»u láº§n, báº¡n sáº½ gÃ³i nÃ³ vÃ o má»™t phÆ°Æ¡ng thá»©c vÃ  gá»i nÃ³ khi cáº§n.

NhÆ°ng mÃ , má»—i khi báº¡n gá»i má»™t phÆ°Æ¡ng thá»©c, mÃ¡y tÃ­nh pháº£i lÃ m má»™t vÃ i viá»‡c nhá» xÃ­u xiu:
1.  NÃ³ pháº£i "nháº£y" Ä‘áº¿n chá»— mÃ£ cá»§a phÆ°Æ¡ng thá»©c Ä‘Ã³.
2.  Thá»±c hiá»‡n cÃ¡c lá»‡nh bÃªn trong phÆ°Æ¡ng thá»©c.
3.  Sau Ä‘Ã³, nÃ³ láº¡i pháº£i "nháº£y" vá» chá»— cÅ© Ä‘á»ƒ tiáº¿p tá»¥c cÃ´ng viá»‡c Ä‘ang dang dá»Ÿ.

TÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang Ä‘á»c má»™t cuá»‘n sÃ¡ch vÃ  tháº¥y ghi chÃº: "Xem thÃªm chi tiáº¿t á»Ÿ trang 50". Báº¡n pháº£i láº­t sang trang 50, Ä‘á»c xong, rá»“i láº­t láº¡i trang cÅ© Ä‘á»ƒ Ä‘á»c tiáº¿p. Viá»‡c "láº­t Ä‘i láº­t láº¡i" nÃ y tuy nhá» nhÆ°ng váº«n tá»‘n má»™t chÃºt thá»i gian, Ä‘Ãºng khÃ´ng?

**Váº­y thÃ¬ chuyá»‡n gÃ¬ sáº½ xáº£y ra náº¿u...**
Náº¿u cÃ¡i "chi tiáº¿t á»Ÿ trang 50" Ä‘Ã³ chá»‰ lÃ  Má»˜T CÃ‚U NÃ“I Cá»°C Ká»² NGáº®N Gá»ŒN vÃ  Ä‘Æ¡n giáº£n thÃ´i? Thay vÃ¬ báº£o báº¡n láº­t trang, ngÆ°á»i ta viáº¿t tháº³ng cÃ¢u Ä‘Ã³ vÃ o ngay chá»— báº¡n Ä‘ang Ä‘á»c thÃ¬ tiá»‡n hÆ¡n biáº¿t bao nhiÃªu! Báº¡n khÃ´ng cáº§n láº­t trang ná»¯a vÃ  cá»© tháº¿ Ä‘á»c liá»n máº¡ch!

ÄÃ³ chÃ­nh lÃ  Ã½ tÆ°á»Ÿng cá»§a **PhÆ°Æ¡ng thá»©c ná»™i tuyáº¿n (Method Inlining)** Ä‘áº¥y!

Khi trÃ¬nh biÃªn dá»‹ch JIT (Just-In-Time compiler) cá»§a Java cháº¡y, nÃ³ ráº¥t thÃ´ng minh. Náº¿u nÃ³ tháº¥y má»™t phÆ°Æ¡ng thá»©c nÃ o Ä‘Ã³ **quÃ¡ nhá» vÃ  Ä‘Æ¡n giáº£n** (chá»‰ cÃ³ vÃ i dÃ²ng lá»‡nh thÃ´i), nÃ³ sáº½ lÃ m má»™t viá»‡c "ma thuáº­t":

*   Thay vÃ¬ Ä‘á»ƒ báº¡n "gá»i" phÆ°Æ¡ng thá»©c Ä‘Ã³ (tá»‘n cÃ´ng "nháº£y Ä‘i nháº£y láº¡i"), trÃ¬nh biÃªn dá»‹ch JIT sáº½ **sao chÃ©p (copy)** toÃ n bá»™ mÃ£ bÃªn trong phÆ°Æ¡ng thá»©c nhá» bÃ© Ä‘Ã³.
*   Rá»“i nÃ³ **dÃ¡n (paste)** tháº³ng mÃ£ Ä‘Ã³ vÃ o ngay chá»— mÃ  phÆ°Æ¡ng thá»©c Ä‘Æ°á»£c gá»i!

NghÄ©a lÃ , náº¿u báº¡n cÃ³ má»™t phÆ°Æ¡ng thá»©c nhÆ° tháº¿ nÃ y:

```java
int congHaiSo(int a, int b) {
    return a + b; // Chá»‰ cÃ³ má»™t dÃ²ng lá»‡nh siÃªu Ä‘Æ¡n giáº£n!
}
```

VÃ  báº¡n gá»i nÃ³ á»Ÿ má»™t chá»— khÃ¡c:

```java
int ketQua = congHaiSo(5, 3);
```

ThÃ¬ sau khi Ä‘Æ°á»£c "ná»™i tuyáº¿n hÃ³a" bá»Ÿi trÃ¬nh biÃªn dá»‹ch JIT, mÃ£ cá»§a báº¡n trong thá»±c táº¿ sáº½ giá»‘ng nhÆ° lÃ :

```java
int ketQua = 5 + 3; // MÃ£ cá»§a congHaiSo() Ä‘Ã£ Ä‘Æ°á»£c dÃ¡n tháº³ng vÃ o Ä‘Ã¢y!
```

**Lá»£i Ã­ch lÃ  gÃ¬ Æ°?**

*   **Tá»‘c Ä‘á»™ NHANH HÆ N!** KhÃ´ng cÃ²n pháº£i tá»‘n thá»i gian cho viá»‡c "nháº£y Ä‘i nháº£y láº¡i" Ä‘á»ƒ gá»i phÆ°Æ¡ng thá»©c vÃ  quay vá» ná»¯a.
*   MÃ£ cháº¡y "mÆ°á»£t mÃ " hÆ¡n ráº¥t nhiá»u, Ä‘áº·c biá»‡t lÃ  vá»›i cÃ¡c phÆ°Æ¡ng thá»©c nhá» Ä‘Æ°á»£c gá»i láº·p Ä‘i láº·p láº¡i.

ÄÃ¢y lÃ  má»™t trong nhá»¯ng ká»¹ thuáº­t tá»‘i Æ°u hÃ³a thÃ´ng minh mÃ  Java dÃ¹ng Ä‘á»ƒ lÃ m cho chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cháº¡y hiá»‡u quáº£ vÃ  nhanh hÆ¡n mÃ  báº¡n tháº­m chÃ­ cÃ²n khÃ´ng cáº§n pháº£i báº­n tÃ¢m Ä‘áº¿n nÃ³! Tuyá»‡t vá»i, pháº£i khÃ´ng nÃ o?
   12. Loáº¡i bá» mÃ£ cháº¿t

Báº¡n cÃ³ bao giá» viáº¿t má»™t Ä‘oáº¡n code, rá»“i sau Ä‘Ã³, cÃ³ thá»ƒ lÃ  Ä‘á»•i Ã½ khÃ´ng? Hay thÃªm má»™t cÃ¢u lá»‡nh `return` á»Ÿ Ä‘Ã¢u Ä‘Ã³ mÃ  lÃ m cho cáº£ má»™t khá»‘i code phÃ­a sau trá»Ÿ nÃªn... khÃ´ng bao giá» cháº¡y tá»›i Ä‘Æ°á»£c?

```java
public void doSomething() {
    System.out.println("NÃ y, tÃ´i cháº¡y Ä‘Ã¢y!");
    return; // Dá»«ng ngay táº¡i Ä‘Ã¢y!

    // Äoáº¡n code nÃ y thÃ¬ sao?
    System.out.println("TÃ´i sáº½ khÃ´ng bao giá» Ä‘Æ°á»£c in ra Ä‘Ã¢u!"); // MÃ£ cháº¿t!
}
```

Váº­y thÃ¬, Ä‘oÃ¡n xem? CÃ¡i Ä‘oáº¡n code khÃ´ng thá»ƒ cháº¡y tá»›i Ä‘Ã³ giá»‘ng nhÆ° má»™t... zombie váº­y! NÃ³ á»Ÿ Ä‘Ã³, nÃ³ tá»“n táº¡i, nhÆ°ng nÃ³ sáº½ khÃ´ng bao giá» *lÃ m* Ä‘Æ°á»£c gÃ¬ cáº£. ChÃºng ta gá»i Ä‘Ã³ lÃ  "mÃ£ cháº¿t" (dead code).

VÃ  máº¥y anh chÃ ng compiler siÃªu thÃ´ng minh cá»§a chÃºng ta thÃ¬ sao? Há» giá»‘ng nhÆ° nhá»¯ng thÃ¡m tá»­ siÃªu Ä‘áº³ng váº­y. Há» nhÃ¬n vÃ o chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n vÃ  nÃ³i, "Hmm, cÃ¡i dÃ²ng code nÃ y háº£? DÃ¹ cÃ³ chuyá»‡n gÃ¬ xáº£y ra Ä‘i ná»¯a, chÃºng ta *khÃ´ng bao giá»* cÃ³ thá»ƒ Ä‘i tá»›i nÃ³ Ä‘Æ°á»£c."

Váº­y thÃ¬, há» sáº½ lÃ m gÃ¬ vá»›i cÃ¡i Ä‘oáº¡n code vÃ´ dá»¥ng, khÃ´ng bao giá» cháº¡y Ä‘Æ°á»£c nÃ y? Há» chá»‰ Ä‘Æ¡n giáº£n lÃ ... *biáº¿n máº¥t*! XÃ³a nÃ³ Ä‘i thÃ´i!

CÃ¡i mÃ¡nh lá»«a tuyá»‡t vá»i nÃ y Ä‘Æ°á»£c gá»i lÃ  **Loáº¡i bá» mÃ£ cháº¿t** (Dead Code Elimination).

Táº¡i sao pháº£i báº­n tÃ¢m lÃ m tháº¿?

*   ChÆ°Æ¡ng trÃ¬nh cá»§a báº¡n sáº½ nhá» hÆ¡n! Ãt thá»© pháº£i mang vÃ¡c Ä‘i kháº¯p nÆ¡i hÆ¡n.
*   ChÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cÃ³ thá»ƒ cháº¡y nhanh hÆ¡n má»™t chÃºt xÃ­u! Ãt mÃ£ vÃ´ dá»¥ng hÆ¡n Ä‘á»ƒ mÃ¡y tÃ­nh pháº£i báº­n tÃ¢m suy nghÄ©.

Táº¥t cáº£ lÃ  Ä‘á»ƒ lÃ m cho code cá»§a báº¡n tháº­t gá»n gÃ ng, máº¡nh máº½ vÃ  siÃªu hiá»‡u quáº£!
   13. Loáº¡i bá» kiá»ƒm tra null

NÃ y báº¡n! Báº¡n cÃ²n nhá»› cÃ¡i lá»—i "NullPointerException" Ä‘Ã¡ng sá»£ khÃ´ng? NÃ³ cá»© nháº£y ra báº¥t ngá» vÃ  lÃ m chÆ°Æ¡ng trÃ¬nh cá»§a chÃºng ta "Ä‘á»©ng hÃ¬nh"! ğŸ˜±

Äá»ƒ trÃ¡nh nÃ³, chÃºng ta thÆ°á»ng lÃ m gÃ¬ nhá»‰? ÄÃºng rá»“i! ChÃºng ta thÃªm cÃ¡c Ä‘oáº¡n kiá»ƒm tra `if (biáº¿n != null)` Ä‘Ãºng khÃ´ng?

```java
String tenNguoiDung = null;
// ... (cÃ³ thá»ƒ gÃ¡n giÃ¡ trá»‹ á»Ÿ Ä‘Ã¢u Ä‘Ã³)

if (tenNguoiDung != null) { // Kiá»ƒm tra null Ä‘á»ƒ trÃ¡nh lá»—i!
    System.out.println("ChÃ o báº¡n, " + tenNguoiDung.toUpperCase());
} else {
    System.out.println("ChÃ o báº¡n, tÃ´i khÃ´ng biáº¿t tÃªn báº¡n.");
}
```

Kiá»ƒm tra nhÆ° tháº¿ thÃ¬ an toÃ n Ä‘áº¥y. NhÆ°ng mÃ ... Ä‘Ã´i khi, mÃ¡y tÃ­nh cá»§a chÃºng ta láº¡i pháº£i lÃ m má»™t cÃ´ng viá»‡c hÆ¡i "thá»«a thÃ£i" má»™t chÃºt.

### NgÆ°á»i hÃ¹ng JIT xuáº¥t hiá»‡n!

Ã€ hÃ¡! May máº¯n thay, chÃºng ta cÃ³ má»™t "ngÆ°á»i hÃ¹ng" tháº§m láº·ng trong Java: TrÃ¬nh biÃªn dá»‹ch JIT (Just-In-Time Compiler)! ğŸ’ª

Anh chÃ ng JIT nÃ y siÃªu thÃ´ng minh luÃ´n. Anh áº¥y cÃ³ thá»ƒ nhÃ¬n vÃ o mÃ£ cá»§a báº¡n khi nÃ³ Ä‘ang cháº¡y vÃ  tá»± nhá»§: "Há»«m, chá»— nÃ y mÃ¬nh biáº¿t cháº¯c biáº¿n nÃ y khÃ´ng thá»ƒ lÃ  `null` Ä‘Æ°á»£c! Váº­y thÃ¬... mÃ¬nh cÃ³ thá»ƒ bá» qua cÃ¡i bÆ°á»›c kiá»ƒm tra `null` Ä‘Ã³ Ä‘i!"

### JIT lÃ m Ä‘iá»u Ä‘Ã³ nhÆ° tháº¿ nÃ o?

Tháº¿ lÃ  sao ta? TÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ Ä‘oáº¡n mÃ£ tháº¿ nÃ y:

```java
public void inDoDaiChuoi(String vanBan) {
    if (vanBan == null) {
        System.out.println("VÄƒn báº£n bá»‹ null rá»“i!");
        return; // Náº¿u null thÃ¬ dá»«ng láº¡i ngay!
    }

    // Náº¿u chÆ°Æ¡ng trÃ¬nh cháº¡y Ä‘áº¿n Ä‘Ã¢y, JIT biáº¿t cháº¯c cháº¯n 'vanBan' KHÃ”NG THá»‚ LÃ€ NULL!
    // VÃ¬ náº¿u nÃ³ lÃ  null, chÆ°Æ¡ng trÃ¬nh Ä‘Ã£ 'return' á»Ÿ dÃ²ng trÃªn rá»“i!
    System.out.println("Äá»™ dÃ i cá»§a vÄƒn báº£n lÃ : " + vanBan.length());
    System.out.println("In hoa: " + vanBan.toUpperCase());
    // JIT nhÃ¬n tháº¥y: "Ã€, mÃ¬nh biáº¿t 'vanBan' khÃ´ng null rá»“i, váº­y máº¥y cÃ¡i .length() hay .toUpperCase() nÃ y cá»© cháº¡y tháº³ng thÃ´i!"
}
```

Khi JIT nhÃ¬n vÃ o phÆ°Æ¡ng thá»©c `inDoDaiChuoi`, nÃ³ sáº½ phÃ¢n tÃ­ch: "Náº¿u `vanBan` lÃ  `null`, thÃ¬ phÆ°Æ¡ng thá»©c sáº½ káº¿t thÃºc ngay láº­p tá»©c. Váº­y náº¿u code cháº¡y tiáº¿p xuá»‘ng cÃ¡c dÃ²ng `System.out.println(...)` bÃªn dÆ°á»›i, thÃ¬ `vanBan` *cháº¯c cháº¯n pháº£i cÃ³ giÃ¡ trá»‹* (khÃ´ng pháº£i `null`)!"

VÃ¬ JIT Ä‘Ã£ "biáº¿t cháº¯c" Ä‘iá»u nÃ y, nÃ³ cÃ³ thá»ƒ tá»‘i Æ°u hÃ³a mÃ£ cá»§a báº¡n. NÃ³ sáº½ "loáº¡i bá»" (eliminate) báº¥t ká»³ kiá»ƒm tra `null` ngáº§m Ä‘á»‹nh nÃ o mÃ  CPU thÆ°á»ng pháº£i lÃ m khi báº¡n gá»i cÃ¡c phÆ°Æ¡ng thá»©c nhÆ° `length()` hay `toUpperCase()` trÃªn má»™t Ä‘á»‘i tÆ°á»£ng.

### Lá»£i Ã­ch lÃ  gÃ¬?

Tuyá»‡t vá»i chÆ°a? Nhá» JIT, chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cÃ³ thá»ƒ cháº¡y nhanh hÆ¡n má»™t chÃºt, vÃ¬ nÃ³ khÃ´ng pháº£i tá»‘n thá»i gian cho nhá»¯ng bÆ°á»›c kiá»ƒm tra mÃ  nÃ³ Ä‘Ã£ "biáº¿t trÆ°á»›c káº¿t quáº£"!

NÃ³i cÃ¡ch khÃ¡c, JIT Ä‘Ã£ "loáº¡i bá»" (eliminate) cÃ¡c bÆ°á»›c kiá»ƒm tra `null` (null check) khÃ´ng cáº§n thiáº¿t!

**Äiá»ƒm máº¥u chá»‘t:**

*   **JIT siÃªu thÃ´ng minh:** NÃ³ phÃ¢n tÃ­ch mÃ£ cá»§a báº¡n trong lÃºc cháº¡y Ä‘á»ƒ tÃ¬m ra nhá»¯ng chá»— mÃ  má»™t biáº¿n *khÃ´ng thá»ƒ* lÃ  `null`.
*   **Tá»‘i Æ°u hÃ³a ngáº§m:** Báº¡n khÃ´ng cáº§n pháº£i lÃ m gÃ¬ Ä‘áº·c biá»‡t Ä‘á»ƒ kÃ­ch hoáº¡t tÃ­nh nÄƒng nÃ y Ä‘Ã¢u. JIT tá»± Ä‘á»™ng lÃ m Ä‘iá»u Ä‘Ã³ cho báº¡n!
*   **Hiá»‡u suáº¥t tá»‘t hÆ¡n:** Báº±ng cÃ¡ch bá» qua cÃ¡c kiá»ƒm tra `null` "thá»«a", chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cÃ³ thá»ƒ cháº¡y nhanh hÆ¡n má»™t chÃºt.

Cá»© viáº¿t mÃ£ an toÃ n, cÃ²n tá»‘i Æ°u cá»© Ä‘á»ƒ JIT lo! ğŸ‰
   14. **Gáº¥p háº±ng sá»‘**

NÃ y báº¡n, cÃ³ bao giá» báº¡n tá»± há»i mÃ¡y tÃ­nh cá»§a mÃ¬nh "nghÄ©" gÃ¬ khi báº¡n viáº¿t code khÃ´ng? ÄÃ´i khi, nÃ³ cÃ²n thÃ´ng minh hÆ¡n chÃºng ta nghÄ© Ä‘áº¥y!

HÃ´m nay, chÃºng ta sáº½ nÃ³i vá» má»™t chiÃªu trÃ² nhá» mÃ  trÃ¬nh biÃªn dá»‹ch (compiler) sá»­ dá»¥ng Ä‘á»ƒ lÃ m cho code cá»§a báº¡n cháº¡y nhanh hÆ¡n má»™t chÃºt. NÃ³ Ä‘Æ°á»£c gá»i lÃ  **"gáº¥p háº±ng sá»‘"** (hay **Constant folding**).

Nghe cÃ³ váº» "khoa há»c" quÃ¡ nhá»‰? Äá»«ng lo, nÃ³ Ä‘Æ¡n giáº£n láº¯m!

**"Háº±ng sá»‘" lÃ  gÃ¬?**

Nhá»› láº¡i cÃ¡c biáº¿n `final` chá»©? Hoáº·c Ä‘Æ¡n giáº£n lÃ  cÃ¡c con sá»‘ mÃ  báº¡n viáº¿t tháº³ng vÃ o code, nhÆ° `5`, `10`, `100`. ÄÃ³ chÃ­nh lÃ  cÃ¡c "háº±ng sá»‘" Ä‘áº¥y. GiÃ¡ trá»‹ cá»§a chÃºng khÃ´ng thay Ä‘á»•i.

**"Gáº¥p" lÃ  gÃ¬?**

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t phÃ©p tÃ­nh cá»™ng, trá»«, nhÃ¢n, chia mÃ  táº¥t cáº£ cÃ¡c sá»‘ trong Ä‘Ã³ Ä‘á»u lÃ  háº±ng sá»‘. VÃ­ dá»¥: `5 + 3`.

BÃ¬nh thÆ°á»ng, khi chÆ°Æ¡ng trÃ¬nh cháº¡y, CPU sáº½ pháº£i thá»±c hiá»‡n phÃ©p cá»™ng `5 + 3` Ä‘á»ƒ ra `8`.

NhÆ°ng mÃ , Ä‘á»£i Ä‘Ã£! `5` lÃ  háº±ng sá»‘, `3` cÅ©ng lÃ  háº±ng sá»‘. Váº­y thÃ¬ `5 + 3` LUÃ”N LUÃ”N báº±ng `8` Ä‘Ãºng khÃ´ng? NÃ³ khÃ´ng bao giá» thay Ä‘á»•i cáº£.

Tháº¿ thÃ¬, viá»‡c gÃ¬ pháº£i Ä‘á»£i Ä‘áº¿n lÃºc chÆ°Æ¡ng trÃ¬nh cháº¡y má»›i tÃ­nh?

ÄÃ¢y chÃ­nh lÃ  lÃºc **"gáº¥p háº±ng sá»‘"** xuáº¥t hiá»‡n!

TrÃ¬nh biÃªn dá»‹ch cá»§a báº¡n (cÃ¡i anh chÃ ng biáº¿n code báº¡n thÃ nh thá»© mÃ¡y tÃ­nh hiá»ƒu Ä‘Æ°á»£c) sáº½ nhÃ¬n vÃ o phÃ©p tÃ­nh `5 + 3`. NÃ³ tháº¥y: "á»’, hai cÃ¡i nÃ y lÃ  háº±ng sá»‘! MÃ¬nh cÃ³ thá»ƒ tÃ­nh luÃ´n káº¿t quáº£ bÃ¢y giá», lÃºc mÃ  mÃ¬nh Ä‘ang biÃªn dá»‹ch code!".

VÃ  tháº¿ lÃ , nÃ³ sáº½ "gáº¥p" (hay "tÃ­nh gá»n") `5 + 3` thÃ nh `8`.

Thay vÃ¬ lÆ°u trá»¯ `int x = 5 + 3;` trong mÃ£ cuá»‘i cÃ¹ng, trÃ¬nh biÃªn dá»‹ch sáº½ "Ã¢m tháº§m" biáº¿n nÃ³ thÃ nh `int x = 8;` NGAY Tá»ª LÃšC BIÃŠN Dá»ŠCH!

**Lá»£i Ã­ch lÃ  gÃ¬?**

Khi chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cháº¡y, CPU KHÃ”NG Cáº¦N pháº£i tá»‘n thá»i gian Ä‘á»ƒ thá»±c hiá»‡n phÃ©p cá»™ng `5 + 3` ná»¯a. NÃ³ chá»‰ cáº§n láº¥y tháº³ng giÃ¡ trá»‹ `8` ra dÃ¹ng thÃ´i. Nhanh hÆ¡n má»™t tÃ­!

**Xem vÃ­ dá»¥ nÃ y nhÃ©:**

```java
int soThuNhat = 10;
int soThuHai = 20;
int tong = soThuNhat + soThuHai; // DÃ²ng nÃ y KHÃ”NG Ä‘Æ°á»£c "gáº¥p háº±ng sá»‘"

// Táº¡i sao Æ°? VÃ¬ soThuNhat vÃ  soThuHai lÃ  cÃ¡c biáº¿n (dÃ¹ cÃ³ thá»ƒ lÃ  giÃ¡ trá»‹ cá»‘ Ä‘á»‹nh),
// trÃ¬nh biÃªn dá»‹ch khÃ´ng cháº¯c cháº¯n 100% chÃºng sáº½ khÃ´ng thay Ä‘á»•i
// (trá»« khi chÃºng Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  final vÃ  Ä‘Æ°á»£c gÃ¡n giÃ¡ trá»‹ ngay láº­p tá»©c).
// Hoáº·c Ä‘Æ¡n giáº£n lÃ  trÃ¬nh biÃªn dá»‹ch chá»‰ gáº¥p gá»n nhá»¯ng biá»ƒu thá»©c mÃ  nÃ³
// cÃ³ thá»ƒ tá»± tin tÃ­nh toÃ¡n Ä‘Æ°á»£c Táº I THá»œI ÄIá»‚M BIÃŠN Dá»ŠCH.
```

NhÆ°ng náº¿u báº¡n dÃ¹ng `final` thÃ¬ sao?

```java
final int HANG_SO_X = 10;
final int HANG_SO_Y = 20;
int ketQua = HANG_SO_X + HANG_SO_Y; // DÃ’NG NÃ€Y Sáº¼ ÄÆ¯á»¢C "Gáº¤P Háº°NG Sá»"!
```

á» dÃ²ng cuá»‘i cÃ¹ng, trÃ¬nh biÃªn dá»‹ch tháº¥y `HANG_SO_X` lÃ  `final` vÃ  cÃ³ giÃ¡ trá»‹ `10`. `HANG_SO_Y` cÅ©ng lÃ  `final` vÃ  cÃ³ giÃ¡ trá»‹ `20`.

NÃ³ biáº¿t cháº¯c cháº¯n `10 + 20` LUÃ”N LUÃ”N lÃ  `30`.

Tháº¿ lÃ , nÃ³ sáº½ biáº¿n Ä‘á»•i dÃ²ng `int ketQua = HANG_SO_X + HANG_SO_Y;` thÃ nh `int ketQua = 30;` NGAY TRONG LÃšC BIÃŠN Dá»ŠCH!

Giá»‘ng nhÆ° viá»‡c báº¡n chuáº©n bá»‹ sáºµn bá»¯a trÆ°a tá»« tá»‘i hÃ´m trÆ°á»›c Ä‘á»ƒ sÃ¡ng hÃ´m sau khÃ´ng pháº£i náº¥u ná»¯a váº­y! Tiáº¿t kiá»‡m thá»i gian, pháº£i khÃ´ng?

TÃ³m láº¡i, **"gáº¥p háº±ng sá»‘"** lÃ  má»™t cÃ¡ch thÃ´ng minh mÃ  trÃ¬nh biÃªn dá»‹ch giÃºp code cá»§a báº¡n hiá»‡u quáº£ hÆ¡n báº±ng cÃ¡ch tÃ­nh toÃ¡n trÆ°á»›c cÃ¡c phÃ©p toÃ¡n vá»›i háº±ng sá»‘ ngay táº¡i thá»i Ä‘iá»ƒm biÃªn dá»‹ch, thay vÃ¬ Ä‘á»£i Ä‘áº¿n lÃºc chÆ°Æ¡ng trÃ¬nh cháº¡y. Báº¡n khÃ´ng cáº§n lÃ m gÃ¬ cáº£, nÃ³ tá»± Ä‘á»™ng xáº£y ra!

   **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

5. ### Váº­y `public static void main` lÃ  gÃ¬?

   Ã€, chÃ­nh lÃ ... `main()` Báº¡n hÃ¬nh dung tháº¿ nÃ y nhÃ©: phÆ°Æ¡ng thá»©c `main` chÃ­nh lÃ  **Ä‘iá»ƒm khá»Ÿi Ä‘áº§u** cá»§a má»i chÆ°Æ¡ng trÃ¬nh Java! Khi báº¡n báº£o JVM (Java Virtual Machine) cháº¡y chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh, nÃ³ sáº½ tÃ¬m Ä‘áº¿n `main` Ä‘áº§u tiÃªn, giá»‘ng nhÆ° tÃ¬m nÃºt 'Start' váº­y.

NÃ³i cÃ¡ch khÃ¡c, náº¿u code cá»§a báº¡n mÃ  **khÃ´ng cÃ³** phÆ°Æ¡ng thá»©c `main`, thÃ¬ JVM sáº½... Ä‘á»©ng im re! NÃ³ sáº½ khÃ´ng biáº¿t pháº£i báº¯t Ä‘áº§u cháº¡y tá»« Ä‘Ã¢u cáº£.

Ã€ mÃ  nÃ y, phÆ°Æ¡ng thá»©c `main` khÃ´ng pháº£i muá»‘n viáº¿t sao cÅ©ng Ä‘Æ°á»£c Ä‘Ã¢u nhÃ©. Äá»ƒ JVM cÃ³ thá»ƒ 'nháº­n diá»‡n' nÃ³ chÃ­nh xÃ¡c lÃ  'cÃ¡nh cá»­a khá»Ÿi Ä‘áº§u' Ä‘Ã³, thÃ¬ 'chá»¯ kÃ½' (signature) cá»§a `main` pháº£i tuÃ¢n theo má»™t **máº«u cá»¥ thá»ƒ** Ä‘áº¥y.

VÃ¬ Ä‘Ã¢y lÃ  má»™t phÆ°Æ¡ng thá»©c cá»±c ká»³ quan trá»ng trong Java, nÃªn báº¡n cáº§n pháº£i hiá»ƒu tháº­t rÃµ tá»«ng chi tiáº¿t vá» 'chá»¯ kÃ½' cá»§a nÃ³ Ä‘áº¥y. ChÃºng ta sáº½ cÃ¹ng 'má»• xáº»' nÃ³ tháº­t ká»¹ nhÃ©!

   Báº¡n muá»‘n in dÃ²ng chá»¯ "Hello World" ra mÃ n hÃ¬nh Ä‘Ãºng khÃ´ng? Tuyá»‡t vá»i! Äá»ƒ lÃ m Ä‘Æ°á»£c Ä‘iá»u Ä‘Ã³, báº¡n sáº½ cáº§n má»™t phÆ°Æ¡ng thá»©c Ä‘áº·c biá»‡t. NÃ³ tÃªn lÃ  `main` vÃ  nÃ³ trÃ´ng nhÆ° tháº¿ nÃ y:

   ```java
   public static void main(String[] args) {
        System.out.println("Hello World");
   }
   ```

   Khi nÃ o? `java.exe` Khi nÃ³ phÃ¢n tÃ­ch dÃ²ng lá»‡nh (tá»©c lÃ  Ä‘á»c vÃ  hiá»ƒu nhá»¯ng gÃ¬ báº¡n gÃµ vÃ o), nÃ³ sáº½ táº¡o ra má»™t *máº£ng String* hoÃ n toÃ n má»›i toanh. VÃ  sau Ä‘Ã³, nÃ³ sáº½ *gá»i* (hay cháº¡y) phÆ°Æ¡ng thá»©c `main()` cá»§a báº¡n.
Giá» thÃ¬, chÃºng ta cÃ¹ng xem tá»«ng tá»« trong cÃ¢u trÃªn cÃ³ nghÄ©a lÃ  gÃ¬ nÃ o:

   1. **Public:**

NÃ y, hÃ£y lÃ m quen vá»›i tá»« khÃ³a `public` nhÃ©! NÃ³ giá»‘ng nhÆ° má»™t táº¥m vÃ© VIP váº­y Ä‘Ã³.

*   Khi báº¡n Ä‘Ã¡nh dáº¥u má»™t thá»© gÃ¬ Ä‘Ã³ lÃ  `public`, cÃ³ nghÄ©a lÃ : "NÃ y má»i ngÆ°á»i Æ¡i, ai cÅ©ng cÃ³ thá»ƒ nhÃ¬n tháº¥y vÃ  dÃ¹ng tÃ´i Ä‘Æ°á»£c háº¿t!"
*   NÃ³ cho phÃ©p **má»i nÆ¡i**, tá»« trong ra ngoÃ i, truy cáº­p vÃ o nÃ³.

Váº­y táº¡i sao phÆ°Æ¡ng thá»©c `main` cá»§a chÃºng ta láº¡i cáº§n `public` nhá»‰?

*   Ã€, lÃ  vÃ¬ Java Virtual Machine (JVM) â€“ cÃ¡i "Ä‘á»™ng cÆ¡" giÃºp cháº¡y chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n â€“ nÃ³ náº±m **bÃªn ngoÃ i** lá»›p cá»§a báº¡n Ä‘Ã³.
*   Äá»ƒ JVM cÃ³ thá»ƒ tÃ¬m tháº¥y vÃ  gá»i phÆ°Æ¡ng thá»©c `main` cá»§a báº¡n Ä‘á»ƒ báº¯t Ä‘áº§u chÆ°Æ¡ng trÃ¬nh, phÆ°Æ¡ng thá»©c `main` pháº£i Ä‘Æ°á»£c "cÃ´ng khai" ra bÃªn ngoÃ i.
*   Náº¿u `main` khÃ´ng pháº£i lÃ  `public`, JVM sáº½ cháº³ng thá»ƒ nÃ o "nhÃ¬n tháº¥y" nÃ³ tá»« bÃªn ngoÃ i Ä‘Æ°á»£c. Giá»‘ng nhÆ° nÃ³ Ä‘ang áº©n mÃ¬nh váº­y.

VÃ  náº¿u báº¡n quÃªn máº¥t tá»« khÃ³a `public` (Ã´i khÃ´ng!):

*   Báº¡n sáº½ nháº­n Ä‘Æ°á»£c má»™t thÃ´ng bÃ¡o lá»—i Ä‘áº¡i loáº¡i nhÆ° tháº¿ nÃ y: "Main method not found in class" (KhÃ´ng tÃ¬m tháº¥y phÆ°Æ¡ng thá»©c Main trong lá»›p).
*   JVM sáº½ bá»‘i rá»‘i vÃ  khÃ´ng biáº¿t pháº£i báº¯t Ä‘áº§u tá»« Ä‘Ã¢u cáº£.

   2. Static:
ChÃ o báº¡n! Tá»« khÃ³a **`static`** nÃ y cá»±c ká»³ quan trá»ng Ä‘Ã³ nha.
NÃ³ Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ *lÃ m cho* má»™t thÃ nh pháº§n (nhÆ° biáº¿n hay phÆ°Æ¡ng thá»©c) **thuá»™c vá» Lá»šP** (class) cá»§a nÃ³, chá»© khÃ´ng pháº£i thuá»™c vá» *tá»«ng Ä‘á»‘i tÆ°á»£ng* (object) cá»¥ thá»ƒ nÃ o Ä‘Ã¢u. `main()` Báº¡n tháº¥y Ä‘Ã³, phÆ°Æ¡ng thá»©c `main` lÃ  má»™t phÆ°Æ¡ng thá»©c 'gáº¯n liá»n' vá»›i chÃ­nh *lá»›p* (class) cá»§a nÃ³.

Äiá»u nÃ y cÃ³ nghÄ©a lÃ  gÃ¬? Ã€, nÃ³ cÃ³ nghÄ©a lÃ  MÃ¡y áº£o Java (JVM) cÃ³ thá»ƒ gá»i `main` mÃ  khÃ´ng cáº§n pháº£i 'khá»Ÿi táº¡o' (instantiate) má»™t *Ä‘á»‘i tÆ°á»£ng* (object) nÃ o tá»« lá»›p Ä‘Ã³ cáº£.

TÆ°á»Ÿng tÆ°á»£ng xem, JVM chá»‰ cáº§n 'gÃµ cá»­a' lá»›p vÃ  nÃ³i: "Cho tÃ´i gá»i `main` nhÃ©!".

KhÃ´ng cáº§n pháº£i táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng 'vÃ´ duyÃªn' chá»‰ Ä‘á»ƒ gá»i má»—i phÆ°Æ¡ng thá»©c `main` Ä‘Ã¢u. Tháº¿ nÃªn, nÃ³ giÃºp chÃºng ta trÃ¡nh lÃ£ng phÃ­ bá»™ nhá»› má»™t cÃ¡ch khÃ´ng cáº§n thiáº¿t Ä‘áº¥y!

   3. **Void**: Tá»« khÃ³a `void` lÃ  má»™t anh báº¡n khÃ¡ Ä‘áº·c biá»‡t. Khi báº¡n tháº¥y `void` Ä‘á»©ng trÆ°á»›c má»™t phÆ°Æ¡ng thá»©c nÃ o Ä‘Ã³ (vÃ­ dá»¥ nhÆ° `main()`), nÃ³ muá»‘n nÃ³i ráº±ng: "NÃ y, phÆ°Æ¡ng thá»©c nÃ y sáº½ lÃ m viá»‡c cá»§a nÃ³ Ä‘áº¥y, nhÆ°ng nÃ³ sáº½ *khÃ´ng tráº£ láº¡i báº¥t cá»© thá»© gÃ¬* cho báº¡n Ä‘Ã¢u nhÃ©!"

Báº¡n cÃ²n nhá»› phÆ°Æ¡ng thá»©c `main()` tháº§n thÃ¡nh cá»§a chÃºng ta khÃ´ng? NÃ³ chÃ­nh lÃ  nÆ¡i chÆ°Æ¡ng trÃ¬nh Java báº¯t Ä‘áº§u cháº¡y. VÃ¬ `main()` khÃ´ng cáº§n tráº£ láº¡i má»™t giÃ¡ trá»‹ nÃ o cáº£ sau khi hoÃ n thÃ nh nhiá»‡m vá»¥ cá»§a mÃ¬nh, nÃªn kiá»ƒu tráº£ vá» cá»§a nÃ³ chÃ­nh lÃ  `void`.

VÃ  Ä‘Ã¢y lÃ  Ä‘iá»u thÃº vá»‹: Má»™t khi phÆ°Æ¡ng thá»©c `main()` Ä‘Ã£ lÃ m xong viá»‡c vÃ  "káº¿t thÃºc", thÃ¬ cáº£ chÆ°Æ¡ng trÃ¬nh Java cá»§a báº¡n cÅ©ng sáº½ "chÃ o táº¡m biá»‡t" vÃ  dá»«ng hoáº¡t Ä‘á»™ng luÃ´n!

   4. Ã€ nÃ y, báº¡n viáº¿t code rá»“i Ä‘Ãºng khÃ´ng? NhÆ°ng mÃ  Java *biáº¿t* báº¯t Ä‘áº§u cháº¡y tá»« Ä‘Ã¢u nhá»‰?

á»ªm, cÃ³ má»™t anh chÃ ng Ä‘áº·c biá»‡t tÃªn lÃ  phÆ°Æ¡ng thá»©c `main`.

Báº¡n cá»© hÃ¬nh dung nÃ³ nhÆ° lÃ  **cá»­a chÃ­nh** Ä‘á»ƒ bÆ°á»›c vÃ o chÆ°Æ¡ng trÃ¬nh Java cá»§a báº¡n váº­y Ä‘Ã³.

Khi cÃ¡i anh báº¡n Java Virtual Machine (JVM) muá»‘n cháº¡y code cá»§a báº¡n, nÃ³ sáº½ Ä‘i tÃ¬m *Ä‘Ãºng cÃ¡i tÃªn nÃ y*: `main`.

Kiá»ƒu nhÆ° má»™t tÃ­n hiá»‡u bÃ­ máº­t váº­y Ä‘Ã³ â€“ JVM biáº¿t ngay, "Ã€ ha! Bá»¯a tiá»‡c báº¯t Ä‘áº§u tá»« Ä‘Ã¢y rá»“i!"

   5. `String[] args:`
Báº¡n cÃ³ tháº¥y `String[] args` nÃ y khÃ´ng?
NÃ³ chÃ­nh lÃ  má»™t **máº£ng** (kiá»ƒu nhÆ° má»™t danh sÃ¡ch Ã½) chá»©a cÃ¡c **chuá»—i kÃ½ tá»±** (tá»©c lÃ  cÃ¡c Ä‘oáº¡n vÄƒn báº£n).
Váº­y nÃ³ Ä‘á»ƒ lÃ m gÃ¬?
NÃ³ cÃ³ nhiá»‡m vá»¥ **lÆ°u trá»¯** nhá»¯ng "thÃ´ng tin thÃªm" hay cÃ²n gá»i lÃ  **Ä‘á»‘i sá»‘** (arguments) mÃ  báº¡n muá»‘n gá»­i cho chÆ°Æ¡ng trÃ¬nh.
Nhá»¯ng Ä‘á»‘i sá»‘ nÃ y sáº½ Ä‘Æ°á»£c truyá»n vÃ o tá»« **dÃ²ng lá»‡nh** (cÃ¡i mÃ n hÃ¬nh Ä‘en Ä‘en báº¡n gÃµ lá»‡nh Ä‘á»ƒ cháº¡y chÆ°Æ¡ng trÃ¬nh áº¥y) **ngay khi báº¡n khá»Ÿi Ä‘á»™ng chÆ°Æ¡ng trÃ¬nh** Ä‘Ã³!

   **LÆ°u Ã½:** NÃ y báº¡n Æ¡i, cÃ³ má»™t Ä‘iá»u thÃº vá»‹ cáº§n ghi nhá»› nÃ¨!

Báº¡n cÃ³ thá»ƒ táº¡o ra *bao nhiÃªu* phÆ°Æ¡ng thá»©c `main` tÃ¹y thÃ­ch Ä‘Ã³! Nghe láº¡ Ä‘Ãºng khÃ´ng?

Äiá»u nÃ y lÃ  nhá» vÃ o tÃ­nh nÄƒng *náº¡p chá»“ng phÆ°Æ¡ng thá»©c* (overloading) cá»§a Java.

Tá»©c lÃ  sao Ã¡?

Ã€, cÃ³ nghÄ©a lÃ  báº¡n cÃ³ thá»ƒ táº¡o nhiá»u phÆ°Æ¡ng thá»©c `main` khÃ¡c nhau, miá»…n lÃ  má»—i phÆ°Æ¡ng thá»©c Ä‘Ã³ nháº­n cÃ¡c *tham sá»‘* (parameters) khÃ¡c nhau lÃ  Ä‘Æ°á»£c!

   **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

6. ### Pool háº±ng String lÃ  gÃ¬?

CÃ¹ng "má»• xáº»" cÃ¡i nÃ y nhÃ©!

**HÃ£y tÆ°á»Ÿng tÆ°á»£ng má»™t bÃ£i Ä‘áº­u xe Ä‘áº·c biá»‡t, chá»‰ dÃ nh riÃªng cho cÃ¡c Ä‘á»‘i tÆ°á»£ng `String` thÃ´i.**

BÃ¬nh thÆ°á»ng, khi báº¡n táº¡o má»™t Ä‘á»‘i tÆ°á»£ng báº±ng tá»« khÃ³a `new`, nÃ³ sáº½ chiáº¿m má»™t chá»— trong khu vá»±c bá»™ nhá»› chÃ­nh gá»i lÃ  "heap".

NhÆ°ng cÃ¡c Ä‘á»‘i tÆ°á»£ng `String` thÃ¬ hÆ¡i Ä‘áº·c biá»‡t má»™t chÃºt. ChÃºng Ä‘Æ°á»£c dÃ¹ng *ráº¥t nhiá»u* trong láº­p trÃ¬nh. HÃ£y nghÄ© vá» táº¥t cáº£ cÃ¡c tÃªn, tin nháº¯n, nhÃ£n mÃ  báº¡n sá»­ dá»¥ng xem.

Äá»ƒ tiáº¿t kiá»‡m bá»™ nhá»› vÃ  lÃ m má»i thá»© nhanh hÆ¡n, Java cÃ³ má»™t "máº¹o" dÃ nh riÃªng cho cÃ¡c Ä‘á»‘i tÆ°á»£ng `String`.

"Máº¹o" Ä‘Ã³ chÃ­nh lÃ  "String Constant Pool" (hay cÃ²n gá»i lÃ  Pool háº±ng String).

**Váº­y, chÃ­nh xÃ¡c thÃ¬ nÃ³ lÃ  cÃ¡i gÃ¬?**

NÃ³ lÃ  má»™t khu vá»±c Ä‘áº·c biá»‡t bÃªn trong bá»™ nhá»› heap, Ä‘Æ°á»£c thiáº¿t káº¿ riÃªng Ä‘á»ƒ lÆ°u trá»¯ cÃ¡c giÃ¡ trá»‹ `String` (literal) *duy nháº¥t*.

**`String` literal lÃ  gÃ¬ váº­y?**

ÄÃ³ lÃ  má»™t giÃ¡ trá»‹ `String` mÃ  báº¡n viáº¿t trá»±c tiáº¿p vÃ o code cá»§a mÃ¬nh, vÃ­ dá»¥ nhÆ° `"hello"`, `"Java"`, hay `"my name is Bob"`.

**ÄÃ¢y lÃ  cÃ¡ch nÃ³ hoáº¡t Ä‘á»™ng nÃ¨:**

1.  **Khi báº¡n táº¡o má»™t `String` literal:**
    `String s1 = "hello";`

2.  **Java sáº½ kiá»ƒm tra trong Pool háº±ng String trÆ°á»›c tiÃªn.**
    "NÃ y, cÃ³ anh 'hello' nÃ o Ä‘Ã£ Ä‘áº­u xe á»Ÿ Ä‘Ã¢y chÆ°a nhá»‰?"

3.  **Náº¿u "hello" CHÆ¯A cÃ³ á»Ÿ Ä‘Ã³:**
    *   Java sáº½ táº¡o má»™t Ä‘á»‘i tÆ°á»£ng `String` *má»›i* cho "hello".
    *   NÃ³ sáº½ "Ä‘áº­u" Ä‘á»‘i tÆ°á»£ng "hello" má»›i nÃ y vÃ o Pool háº±ng String.
    *   VÃ  `s1` bÃ¢y giá» sáº½ trá» tá»›i Ä‘á»‘i tÆ°á»£ng "hello" Ä‘Ã³ trong pool.

4.  **Náº¿u "hello" ÄÃƒ cÃ³ á»Ÿ Ä‘Ã³ rá»“i:**
    *   Java sáº½ nÃ³i, "Tuyá»‡t vá»i! ChÃºng ta Ä‘Ã£ cÃ³ má»™t cÃ¡i rá»“i."
    *   NÃ³ *khÃ´ng* táº¡o má»™t Ä‘á»‘i tÆ°á»£ng "hello" má»›i ná»¯a.
    *   `s1` chá»‰ viá»‡c trá» tá»›i Ä‘á»‘i tÆ°á»£ng "hello" *Ä‘Ã£ tá»“n táº¡i* trong pool. NÃ³ dÃ¹ng chung má»™t cÃ¡i Ä‘Ã³!

**Táº¡i sao chÃºng ta láº¡i cáº§n cÃ¡i nÃ y?**

*   **Tiáº¿t kiá»‡m bá»™ nhá»›:** Náº¿u báº¡n dÃ¹ng tá»« "hello" cáº£ trÄƒm láº§n, Java chá»‰ cáº§n lÆ°u trá»¯ *má»™t* Ä‘á»‘i tÆ°á»£ng "hello" duy nháº¥t trong bá»™ nhá»› thÃ´i. Cáº£ trÄƒm biáº¿n Ä‘Ã³ chá»‰ viá»‡c trá» tá»›i Ä‘á»‘i tÆ°á»£ng duy nháº¥t Ä‘Ã³. DÃ¹ng Ã­t bá»™ nhá»› hÆ¡n háº³n!
*   **Hiá»‡u suáº¥t nhanh hÆ¡n:** Khi Java cáº§n má»™t chuá»—i, nÃ³ cÃ³ thá»ƒ nhanh chÃ³ng kiá»ƒm tra xem chuá»—i Ä‘Ã³ Ä‘Ã£ tá»“n táº¡i chÆ°a. Náº¿u cÃ³ rá»“i, nÃ³ chá»‰ viá»‡c dÃ¹ng láº¡i thay vÃ¬ táº¡o má»™t cÃ¡i má»›i. Äiá»u nÃ y giÃºp tÄƒng tá»‘c má»i thá»©.

**Äiá»ƒm máº¥u chá»‘t cáº§n nhá»›:** Pool háº±ng String lÃ  cÃ¡ch thÃ´ng minh cá»§a Java Ä‘á»ƒ quáº£n lÃ½ cÃ¡c `String` literal, giÃºp tiáº¿t kiá»‡m bá»™ nhá»› vÃ  cáº£i thiá»‡n hiá»‡u suáº¥t báº±ng cÃ¡ch tÃ¡i sá»­ dá»¥ng cÃ¡c giÃ¡ trá»‹ chuá»—i giá»‘ng há»‡t nhau.

   NÃ y báº¡n, hÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©. Trong vÃ¹ng nhá»› "heap" cá»§a mÃ¡y tÃ­nh báº¡n cÃ³ má»™t nÆ¡i ráº¥t Ä‘áº·c biá»‡t. ChÃºng ta gá»i nÃ³ lÃ  **String constant pool**. ÄÃ¢y chÃ­nh lÃ  "ngÃ´i nhÃ " riÃªng dÃ nh cho cÃ¡c chuá»—i kÃ½ tá»± (hay cÃ²n gá»i lÃ  string literals) mÃ  báº¡n viáº¿t ra trong code Ä‘áº¥y.

Ã€, báº¡n cÅ©ng cÃ³ thá»ƒ nghe má»i ngÆ°á»i gá»i nÃ³ báº±ng nhá»¯ng cÃ¡i tÃªn khÃ¡c nhÆ° **String pool** hoáº·c **String Intern Pool** nhÃ©.

Äiá»u thÃº vá»‹ lÃ , lá»›p `String` cá»§a Java chÃ­nh lÃ  "ngÆ°á»i quáº£n lÃ½" riÃªng cá»§a cÃ¡i pool nÃ y. VÃ  ban Ä‘áº§u, nÃ³ hoÃ n toÃ n trá»‘ng rá»—ng, khÃ´ng cÃ³ gÃ¬ bÃªn trong cáº£.

Váº­y chuyá»‡n gÃ¬ xáº£y ra khi báº¡n táº¡o má»™t chuá»—i má»›i? VÃ­ dá»¥, báº¡n viáº¿t:

```java
String myString = "Xin chÃ o";
```

1.  Äáº§u tiÃªn, JVM (mÃ¡y áº£o Java) sáº½ cháº¡y Ä‘i kiá»ƒm tra: "ÃŠ, trong String pool cÃ³ chuá»—i `"Xin chÃ o"` nÃ y chÆ°a nhá»‰?"

2.  **Náº¿u CÃ“ rá»“i** (chuá»—i `"Xin chÃ o"` Ä‘Ã£ tá»“n táº¡i trong pool):
    *   Tuyá»‡t vá»i! JVM sáº½ khÃ´ng táº¡o chuá»—i má»›i ná»¯a Ä‘Ã¢u.
    *   NÃ³ chá»‰ Ä‘Æ¡n giáº£n lÃ  "chá»‰" biáº¿n `myString` cá»§a báº¡n Ä‘áº¿n Ä‘Ãºng cÃ¡i chuá»—i `"Xin chÃ o"` Ä‘Ã£ cÃ³ sáºµn trong pool thÃ´i. Cáº£ hai biáº¿n (náº¿u cÃ³ biáº¿n khÃ¡c cÅ©ng dÃ¹ng `"Xin chÃ o"`) sáº½ dÃ¹ng chung má»™t Ä‘á»‘i tÆ°á»£ng chuá»—i Ä‘Ã³. Tiáº¿t kiá»‡m bá»™ nhá»› ghÃª chÆ°a!

3.  **Náº¿u CHÆ¯A CÃ“** (chuá»—i `"Xin chÃ o"` chÆ°a cÃ³ trong pool):
    *   KhÃ´ng sao cáº£! JVM sáº½ táº¡o má»™t chuá»—i `"Xin chÃ o"` *má»›i toanh* trong String pool.
    *   Sau Ä‘Ã³, nÃ³ sáº½ "chá»‰" biáº¿n `myString` cá»§a báº¡n Ä‘áº¿n cÃ¡i chuá»—i má»›i nÃ y. Äá»‹a chá»‰ cá»§a biáº¿n `myString` (náº±m trong vÃ¹ng nhá»› stack) sáº½ trá» tá»›i chuá»—i má»›i trong pool Ä‘Ã³.

   **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

7. ### Váº­y thÃ¬... táº¡i sao `String` láº¡i lÃ  báº¥t biáº¿n?

   NÃ y, cÃ³ má»™t Ä‘iá»u cá»±c ká»³ quan trá»ng báº¡n cáº§n biáº¿t vá» String trong Java Ä‘Ã³!

CÃ¡c String nÃ y cÃ³ má»™t Ä‘áº·c tÃ­nh ráº¥t Ä‘áº·c biá»‡t: chÃºng lÃ  **'báº¥t biáº¿n' (immutable)**.

Nghe cÃ³ váº» to tÃ¡t nhá»‰? ÄÆ¡n giáº£n lÃ  tháº¿ nÃ y: má»™t khi báº¡n Ä‘Ã£ táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng String, thÃ¬ ná»™i dung bÃªn trong nÃ³ sáº½ **KHÃ”NG BAO GIá»œ** thay Ä‘á»•i Ä‘Æ°á»£c ná»¯a!

Báº¡n thá»­ tÆ°á»Ÿng tÆ°á»£ng xem: náº¿u báº¡n cÃ³ má»™t String lÃ  "Xin chÃ o" vÃ  sau Ä‘Ã³ báº¡n muá»‘n 'sá»­a' nÃ³ thÃ nh "Xin chÃ o báº¡n".

ThÃ¬ thay vÃ¬ thay Ä‘á»•i cÃ¡i String "Xin chÃ o" ban Ä‘áº§u, Java sáº½ Ã¢m tháº§m táº¡o ra **Má»˜T STRING Má»šI** toanh vá»›i ná»™i dung lÃ  "Xin chÃ o báº¡n" cho báº¡n Ä‘áº¥y!

CÃ¡i String "Xin chÃ o" ban Ä‘áº§u váº«n cá»© y nguyÃªn nhÆ° lÃºc nÃ³ Ä‘Æ°á»£c sinh ra, khÃ´ng há» háº¥n gÃ¬.

ChÃ­nh vÃ¬ hÃ nh vi nÃ y, tráº¡ng thÃ¡i bÃªn trong cá»§a má»™t String sáº½ luÃ´n giá»¯ nguyÃªn, khÃ´ng thay Ä‘á»•i trong suá»‘t quÃ¡ trÃ¬nh chÆ°Æ¡ng trÃ¬nh cháº¡y.

VÃ  cÃ¡i tÃ­nh 'báº¥t biáº¿n' siÃªu hay nÃ y mang láº¡i ráº¥t nhiá»u lá»£i Ã­ch tuyá»‡t vá»i Ä‘Ã³ nha:

*   GiÃºp viá»‡c lÆ°u trá»¯ táº¡m thá»i (caching) dá»¯ liá»‡u hiá»‡u quáº£ hÆ¡n.
*   TÄƒng cÆ°á»ng tÃ­nh báº£o máº­t cho chÆ°Æ¡ng trÃ¬nh.
*   LÃ m cho viá»‡c Ä‘á»“ng bá»™ hÃ³a (synchronization) trá»Ÿ nÃªn dá»… dÃ ng hÆ¡n.
*   VÃ  cÃ²n cáº£i thiá»‡n cáº£ hiá»‡u suáº¥t ná»¯a chá»©!

   **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

8. ### Sá»± khÃ¡c biá»‡t giá»¯a StringBuffer vÃ  StringBuilder lÃ  gÃ¬?

Báº¡n Ä‘Ã£ sáºµn sÃ ng chÆ°a? ChÃºng ta sáº½ cÃ¹ng nhau khÃ¡m phÃ¡ má»™t bÃ­ máº­t thÃº vá»‹ vá» cÃ¡ch Java xá»­ lÃ½ chuá»—i (string) nhÃ©!

Báº¡n cÃ²n nhá»› `String` khÃ´ng? NÃ³ "báº¥t biáº¿n" (immutable) Ä‘áº¥y! Tá»©c lÃ , má»™t khi báº¡n táº¡o ra má»™t `String`, báº¡n khÃ´ng thá»ƒ thay Ä‘á»•i ná»™i dung cá»§a nÃ³ Ä‘Æ°á»£c ná»¯a. Má»—i láº§n báº¡n "thay Ä‘á»•i" má»™t `String`, Java thá»±c ra sáº½ táº¡o ra má»™t `String` *má»›i tinh*! Äiá»u nÃ y Ä‘Ã´i khi hÆ¡i tá»‘n kÃ©m má»™t chÃºt.

Váº­y náº¿u chÃºng ta muá»‘n má»™t chuá»—i mÃ  cÃ³ thá»ƒ *thay Ä‘á»•i ná»™i dung* ngay táº¡i chá»— thÃ¬ sao? Ã€ ha! ÄÃ³ chÃ­nh lÃ  lÃºc `StringBuffer` vÃ  `StringBuilder` xuáº¥t hiá»‡n Ä‘á»ƒ "giáº£i cá»©u" chÃºng ta!

Cáº£ `StringBuffer` vÃ  `StringBuilder` Ä‘á»u giÃºp báº¡n táº¡o ra cÃ¡c chuá»—i "cÃ³ thá»ƒ biáº¿n Ä‘á»•i" (mutable strings). Tá»©c lÃ  báº¡n cÃ³ thá»ƒ thÃªm, bá»›t, sá»­a Ä‘á»•i kÃ½ tá»± mÃ  khÃ´ng cáº§n táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng chuá»—i hoÃ n toÃ n má»›i má»—i láº§n. Tuyá»‡t vá»i pháº£i khÃ´ng?

NhÆ°ng... chÃºng cÃ³ khÃ¡c nhau khÃ´ng? CÃ³ chá»©! ÄÃ¢y lÃ  Ä‘iá»ƒm máº¥u chá»‘t:

#### StringBuffer (Anh cáº£ Ä‘iá»m tÄ©nh)

*   **An toÃ n cho Ä‘a luá»“ng (Thread-safe)**: HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t chiáº¿c há»™p mÃ  nhiá»u ngÆ°á»i (nhiá»u luá»“ng - thread) cÃ¹ng muá»‘n má»Ÿ ra Ä‘á»ƒ bá» Ä‘á»“ vÃ o hoáº·c láº¥y Ä‘á»“ ra. `StringBuffer` giá»‘ng nhÆ° chiáº¿c há»™p cÃ³ má»™t ngÆ°á»i gÃ¡c cá»•ng ráº¥t cáº©n tháº­n. Anh áº¥y Ä‘áº£m báº£o ráº±ng táº¡i má»™t thá»i Ä‘iá»ƒm, chá»‰ cÃ³ *má»™t ngÆ°á»i* Ä‘Æ°á»£c phÃ©p thao tÃ¡c vá»›i chiáº¿c há»™p thÃ´i. Äiá»u nÃ y giÃºp má»i thá»© khÃ´ng bá»‹ lá»™n xá»™n, dá»¯ liá»‡u luÃ´n chÃ­nh xÃ¡c.
*   **Äá»“ng bá»™ hÃ³a (Synchronized)**: VÃ¬ cÃ³ "ngÆ°á»i gÃ¡c cá»•ng" Ä‘Ã³, cÃ¡c thao tÃ¡c trÃªn `StringBuffer` Ä‘Æ°á»£c "Ä‘á»“ng bá»™ hÃ³a".
*   **Cháº­m hÆ¡n má»™t chÃºt**: Viá»‡c cÃ³ ngÆ°á»i gÃ¡c cá»•ng vÃ  quy trÃ¬nh Ä‘á»“ng bá»™ hÃ³a nÃ y khiáº¿n `StringBuffer` hoáº¡t Ä‘á»™ng *cháº­m hÆ¡n* má»™t chÃºt so vá»›i ngÆ°á»i em cá»§a nÃ³. NÃ³ pháº£i tá»‘n thÃªm cÃ´ng sá»©c Ä‘á»ƒ Ä‘áº£m báº£o an toÃ n.

```java
StringBuffer sb = new StringBuffer("Xin chÃ o");
sb.append(" Java!"); // ThÃªm vÃ o cuá»‘i
sb.insert(4, " má»i ngÆ°á»i"); // ChÃ¨n vÃ o vá»‹ trÃ­ 4
System.out.println(sb); // Output: Xin chÃ o má»i ngÆ°á»i Java!
```

#### StringBuilder (Cáº­u em nhanh nháº¹n)

*   **KhÃ´ng an toÃ n cho Ä‘a luá»“ng (Not thread-safe)**: `StringBuilder` thÃ¬ khÃ¡c. NÃ³ giá»‘ng nhÆ° má»™t chiáº¿c há»™p khÃ´ng cÃ³ ngÆ°á»i gÃ¡c cá»•ng. Ai muá»‘n lÃ m gÃ¬ thÃ¬ lÃ m, cá»© xÃ´ng vÃ o! Náº¿u chá»‰ cÃ³ *má»™t ngÆ°á»i* dÃ¹ng chiáº¿c há»™p nÃ y, thÃ¬ má»i thá»© Ä‘á»u á»•n. NhÆ°ng náº¿u *nhiá»u ngÆ°á»i* cÃ¹ng lÃºc xÃ´ng vÃ o, cÃ³ thá»ƒ sáº½ cÃ³ ráº¯c rá»‘i Ä‘áº¥y! Dá»¯ liá»‡u cÃ³ thá»ƒ bá»‹ sai lá»‡ch.
*   **KhÃ´ng Ä‘á»“ng bá»™ hÃ³a (Not synchronized)**: VÃ¬ khÃ´ng cÃ³ ngÆ°á»i gÃ¡c cá»•ng hay quy trÃ¬nh Ä‘á»“ng bá»™ hÃ³a, nÃ³ cháº¡y ráº¥t "tá»± do".
*   **Nhanh hÆ¡n ráº¥t nhiá»u**: ChÃ­nh vÃ¬ khÃ´ng pháº£i lo láº¯ng vá» viá»‡c nhiá»u luá»“ng cÃ¹ng lÃºc truy cáº­p, `StringBuilder` hoáº¡t Ä‘á»™ng *nhanh hÆ¡n* Ä‘Ã¡ng ká»ƒ so vá»›i `StringBuffer`.

```java
StringBuilder sbuilder = new StringBuilder("Há»c");
sbuilder.append(" láº­p trÃ¬nh"); // ThÃªm vÃ o cuá»‘i
sbuilder.delete(0, 3); // XÃ³a tá»« vá»‹ trÃ­ 0 Ä‘áº¿n 3 (xÃ³a "Há»c")
System.out.println(sbuilder); // Output: láº­p trÃ¬nh
```

#### Váº­y tÃ³m láº¡i, khi nÃ o dÃ¹ng cÃ¡i nÃ o?

Äá»«ng lo láº¯ng, chá»n lá»±a tháº­t dá»… dÃ ng!

*   **DÃ¹ng `StringBuffer` khi**:
    *   Báº¡n Ä‘ang lÃ m viá»‡c trong mÃ´i trÆ°á»ng **Ä‘a luá»“ng (multi-threaded)**.
    *   Báº¡n cáº§n Ä‘áº£m báº£o ráº±ng cÃ¡c thao tÃ¡c vá»›i chuá»—i cá»§a báº¡n pháº£i **an toÃ n vÃ  chÃ­nh xÃ¡c**, khÃ´ng bá»‹ xung Ä‘á»™t dÃ¹ cÃ³ nhiá»u luá»“ng cÃ¹ng truy cáº­p.
    *   Báº¡n cháº¥p nháº­n tá»‘c Ä‘á»™ cháº­m hÆ¡n má»™t chÃºt Ä‘á»ƒ Ä‘á»•i láº¥y sá»± an toÃ n.

*   **DÃ¹ng `StringBuilder` khi**:
    *   Báº¡n Ä‘ang lÃ m viá»‡c trong mÃ´i trÆ°á»ng **Ä‘Æ¡n luá»“ng (single-threaded)** (tá»©c lÃ  chá»‰ cÃ³ má»™t luá»“ng duy nháº¥t thao tÃ¡c vá»›i chuá»—i Ä‘Ã³).
    *   Báº¡n muá»‘n hiá»‡u suáº¥t **nhanh nháº¥t cÃ³ thá»ƒ**.
    *   ÄÃ¢y lÃ  lá»±a chá»n phá»• biáº¿n vÃ  Ä‘Æ°á»£c khuyáº¿n nghá»‹ trong háº§u háº¿t cÃ¡c trÆ°á»ng há»£p thÃ´ng thÆ°á»ng khi báº¡n cáº§n má»™t chuá»—i cÃ³ thá»ƒ thay Ä‘á»•i.

ÄÆ¡n giáº£n váº­y thÃ´i! Giá» thÃ¬ báº¡n Ä‘Ã£ hiá»ƒu rÃµ sá»± khÃ¡c biá»‡t giá»¯a `StringBuffer` vÃ  `StringBuilder` rá»“i Ä‘áº¥y. Báº¡n lÃ  má»™t láº­p trÃ¬nh viÃªn thÃ´ng thÃ¡i!

   `String` lÃ  má»™t "lá»›p" (class) báº¥t biáº¿n, dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ má»™t chuá»—i cÃ¡c kÃ½ tá»±. Kiá»ƒu nhÆ° tÃªn báº¡n, má»™t cÃ¢u nÃ³i, hay báº¥t cá»© dÃ²ng chá»¯ nÃ o áº¥y.

"Báº¥t biáº¿n" (immutable) nghÄ©a lÃ  sao? Tá»©c lÃ  má»™t khi báº¡n Ä‘Ã£ táº¡o ra má»™t `String` rá»“i, báº¡n khÃ´ng thá»ƒ thay Ä‘á»•i ná»™i dung cá»§a nÃ³ Ä‘Æ°á»£c ná»¯a Ä‘Ã¢u!

Tháº¿ nhÆ°ng, Ä‘Ã´i khi chÃºng ta láº¡i muá»‘n thay Ä‘á»•i chuá»—i kÃ½ tá»± cá»§a mÃ¬nh thÃ¬ sao? Äá»«ng lo! Java cÃ³ giáº£i phÃ¡p cho báº¡n Ä‘Ã¢y!

Java Ä‘Ã£ cung cáº¥p thÃªm hai "ngÆ°á»i anh em" khÃ¡c cá»§a `String` lÃ  `StringBuffer` vÃ  `StringBuilder`. Hai anh báº¡n nÃ y thÃ¬ "cÃ³ thá»ƒ biáº¿n Ä‘á»•i" (mutable) Ä‘Æ°á»£c Ä‘áº¥y! NghÄ©a lÃ  báº¡n cÃ³ thá»ƒ thoáº£i mÃ¡i thÃªm, xÃ³a, sá»­a ná»™i dung chuá»—i mÃ  khÃ´ng cáº§n táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng má»›i.

Ã€ ha, váº­y lÃ  cáº£ `StringBuffer` vÃ  `StringBuilder` Ä‘á»u 'biáº¿n Ä‘á»•i' Ä‘Æ°á»£c, nghe cÃ³ váº» giá»‘ng nhau ghÃª ha? ÄÃºng lÃ  nhÆ° váº­y! Tuy nhiÃªn, máº·c dÃ¹ cáº£ hai Ä‘á»u cÃ³ thá»ƒ thay Ä‘á»•i, nhÆ°ng giá»¯a `StringBuffer` vÃ  `StringBuilder` váº«n cÃ³ ráº¥t nhiá»u Ä‘iá»ƒm khÃ¡c biá»‡t quan trá»ng Ä‘Ã³ nha!

   Ok, váº­y nhá»¯ng Ä‘iá»ƒm khÃ¡c biá»‡t lá»›n lÃ  gÃ¬ nhá»‰? ChÃºng ta hÃ£y cÃ¹ng xem trong báº£ng nÃ y nhÃ©:

   | StringBuffer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|---|---|
| Báº¡n cÃ³ biáº¿t khÃ´ng? ÄÃ´i khi trong cÃ¡c chÆ°Æ¡ng trÃ¬nh cá»§a chÃºng ta, cÃ³ nhiá»u 'ngÆ°á»i lÃ m viá»‡c' (chÃºng ta gá»i lÃ  'luá»“ng' hay 'thread') cÃ¹ng lÃºc muá»‘n thay Ä‘á»•i má»™t chuá»—i vÄƒn báº£n. Kiá»ƒu nhÆ° nhiá»u ngÆ°á»i cÃ¹ng muá»‘n viáº¿t vÃ o má»™t tá» giáº¥y duy nháº¥t váº­y. Dá»… lá»™n xá»™n láº¯m, Ä‘Ãºng khÃ´ng? | NÃ y báº¡n! HÃ£y nghÄ© tháº¿ nÃ y: Náº¿u báº¡n chá»‰ cÃ³ Má»˜T luá»“ng duy nháº¥t Ä‘ang lÃ m viá»‡c vá»›i chuá»—i cá»§a mÃ¬nh, khÃ´ng cÃ³ ai tranh giÃ nh cáº£... |
| **`StringBuffer`** Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ 'quáº£n lÃ½' viá»‡c nÃ y má»™t cÃ¡ch Ráº¤T Cáº¨N THáº¬N. NÃ³ Ä‘áº£m báº£o ráº±ng chá»‰ **Má»˜T luá»“ng** Ä‘Æ°á»£c phÃ©p thay Ä‘á»•i chuá»—i táº¡i má»™t thá»i Ä‘iá»ƒm. ChÃºng ta gá»i Ä‘Ã¢y lÃ  **'an toÃ n luá»“ng' (thread-safe)**. | ...thÃ¬ **`StringBuilder`** sáº½ lÃ  má»™t lá»±a chá»n TUYá»†T Vá»œI! VÃ¬ nÃ³ khÃ´ng pháº£i lo chuyá»‡n 'quáº£n lÃ½' hay 'xáº¿p hÃ ng' cho cÃ¡c luá»“ng (vÃ¬ Ä‘Ã¢u cÃ³ nhiá»u luá»“ng Ä‘Ã¢u mÃ  quáº£n lÃ½!), nÃ³ cháº¡y **NHANH HÆ N ráº¥t nhiá»u**! |
| YÃªn tÃ¢m Ä‘i, sáº½ khÃ´ng cÃ³ chuyá»‡n dá»¯ liá»‡u bá»‹ há»ng hÃ³c hay lá»™n xá»™n khi nhiá»u luá»“ng tranh giÃ nh nhau Ä‘Ã¢u! | `StringBuilder` khÃ´ng quan tÃ¢m Ä‘áº¿n viá»‡c cÃ³ bao nhiÃªu luá»“ng Ä‘ang cá»‘ gáº¯ng thay Ä‘á»•i chuá»—i. Ai muá»‘n sá»­a thÃ¬ cá»© sá»­a! KhÃ´ng cáº§n xáº¿p hÃ ng hay chá» Ä‘á»£i gÃ¬ háº¿t. |
| **Khi nÃ o dÃ¹ng?** Khi báº¡n lÃ m viá»‡c trong mÃ´i trÆ°á»ng cÃ³ **nhiá»u luá»“ng cÃ¹ng lÃºc** muá»‘n sá»­a Ä‘á»•i chuá»—i. `StringBuffer` sáº½ lÃ  ngÆ°á»i báº£o vá»‡ Ä‘Ã¡ng tin cáº­y cá»§a báº¡n! | ChÃºng ta gá»i Ä‘Ã¢y lÃ  **'khÃ´ng an toÃ n luá»“ng' (not thread-safe)**. Nghe cÃ³ váº» Ä‘Ã¡ng sá»£ nhá»‰? NhÆ°ng yÃªn tÃ¢m, náº¿u báº¡n biáº¿t cháº¯c cháº¯n mÃ¬nh chá»‰ cÃ³ má»™t luá»“ng lÃ m viá»‡c, nÃ³ hoÃ n toÃ n á»•n! |
| **NhÆ°ng mÃ ...** Viá»‡c 'quáº£n lÃ½ cáº©n tháº­n' nÃ y tá»‘n má»™t chÃºt cÃ´ng sá»©c. NÃªn `StringBuffer` thÆ°á»ng **CHáº¬M HÆ N** má»™t chÃºt so vá»›i ngÆ°á»i anh em kia. | **Khi nÃ o dÃ¹ng?** Khi báº¡n lÃ m viá»‡c trong mÃ´i trÆ°á»ng **chá»‰ cÃ³ má»™t luá»“ng duy nháº¥t** (single-threaded) muá»‘n sá»­a Ä‘á»•i chuá»—i. `StringBuilder` chÃ­nh lÃ  ngÃ´i sao vÃ¬ tá»‘c Ä‘á»™ siÃªu nhanh cá»§a nÃ³! |
   | -------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
   | `StringBuffer` | `StringBuilder` |
|---|---|
| Báº¡n cÃ³ biáº¿t `StringBuffer` Ä‘Ã£ xuáº¥t hiá»‡n tá»« khi nÃ o khÃ´ng? | Tháº¿ cÃ²n `StringBuilder` thÃ¬ sao? |
| NÃ³ ra máº¯t tá»« **phiÃªn báº£n Java 1.0** Ä‘Ã³! | `StringBuilder` chá»‰ má»›i 'lá»™ diá»‡n' tá»« **phiÃªn báº£n Java 1.5** thÃ´i. |
| ÄÃºng váº­y, nÃ³ lÃ  má»™t trong nhá»¯ng thÃ nh viÃªn 'Ä‘áº§u tiÃªn' cá»§a Java luÃ´n Ä‘Ã³. | NÃ³ lÃ  'ngÆ°á»i má»›i' hÆ¡n, xuáº¥t hiá»‡n sau `StringBuffer` má»™t thá»i gian. |
   | StringBuffer | StringBuilder |
|---|---|
| `StringBuffer` Ä‘Æ°á»£c 'Ä‘á»“ng bá»™ hÃ³a' (synchronized) Ä‘áº¥y! | `StringBuilder` thÃ¬ KHÃ”NG Ä‘Æ°á»£c 'Ä‘á»“ng bá»™ hÃ³a' (non-synchronized) Ä‘Ã¢u. |
| NÃ³ siÃªu 'an toÃ n cho luá»“ng' (thread safe) luÃ´n! | NÃ³ KHÃ”NG 'an toÃ n cho luá»“ng' (not thread safe) má»™t chÃºt nÃ o. |
| Äiá»u nÃ y nghÄ©a lÃ  gÃ¬? Khi cÃ³ hai (hoáº·c nhiá»u hÆ¡n) luá»“ng (thread) muá»‘n gá»i cÃ¡c phÆ°Æ¡ng thá»©c cá»§a `StringBuffer`, há» **KHÃ”NG THá»‚** lÃ m cÃ¹ng má»™t lÃºc. | Váº­y thÃ¬ sao? Khi cÃ³ hai (hoáº·c nhiá»u hÆ¡n) luá»“ng muá»‘n gá»i cÃ¡c phÆ°Æ¡ng thá»©c cá»§a `StringBuilder`, há» **HOÃ€N TOÃ€N CÃ“ THá»‚** lÃ m cÃ¹ng má»™t lÃºc. |
| Chá»‰ má»™t luá»“ng Ä‘Æ°á»£c phÃ©p dÃ¹ng táº¡i má»™t thá»i Ä‘iá»ƒm thÃ´i. CÃ¡c luá»“ng khÃ¡c pháº£i 'xáº¿p hÃ ng' chá» Ä‘áº¿n lÆ°á»£t mÃ¬nh. | CÃ¡c luá»“ng cá»© tháº¿ 'nhÃ o vÃ´' dÃ¹ng chung, khÃ´ng cáº§n chá» Ä‘á»£i gÃ¬ cáº£. |
   | Báº¡n biáº¿t khÃ´ng, `StringBuffer` cháº¡y cháº­m hÆ¡n `StringBuilder` Ä‘Ã³! LÃ½ do lÃ  vÃ¬ nÃ³ pháº£i lÃ m cÃ´ng viá»‡c 'Ä‘á»“ng bá»™ hÃ³a' (synchronization). Giá»‘ng nhÆ° cÃ³ má»™t ngÆ°á»i quáº£n lÃ½ xáº¿p hÃ ng, Ä‘áº£m báº£o tá»«ng 'ngÆ°á»i' (luá»“ng - thread) má»™t má»›i Ä‘Æ°á»£c phÃ©p sá»­a chuá»—i. Ráº¥t cáº©n tháº­n! Viá»‡c nÃ y giÃºp an toÃ n khi nhiá»u luá»“ng cÃ¹ng lÃ m viá»‡c, nhÆ°ng láº¡i tá»‘n thá»i gian hÆ¡n. | CÃ²n `StringBuilder` thÃ¬ ngÆ°á»£c láº¡i, nÃ³ nhanh hÆ¡n `StringBuffer` nhiá»u. Táº¡i vÃ¬ nÃ³ cháº³ng cáº§n 'kiá»ƒm tra trÆ°á»›c' xem cÃ³ nhiá»u 'ngÆ°á»i' (luá»“ng) cÃ¹ng lÃºc muá»‘n sá»­a chuá»—i hay khÃ´ng. NÃ³ cá»© tháº¿ mÃ  lÃ m viá»‡c thÃ´i, khÃ´ng cáº§n chá» Ä‘á»£i hay sáº¯p xáº¿p ai cáº£. Giá»‘ng nhÆ° khÃ´ng cÃ³ ngÆ°á»i quáº£n lÃ½. Ai muá»‘n lÃ m gÃ¬ thÃ¬ lÃ m! Nhanh tháº­t Ä‘Ã³! |

   **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

9. ### hashCode() vÃ  equals() quan trá»ng tháº¿ nÃ o?

   Ã€, bá»Ÿi vÃ¬ cáº£ hai... `equals()` ChÃ o báº¡n! Sáºµn sÃ ng cho má»™t tá»« cá»±c ká»³ tiá»‡n lá»£i chÆ°a?

Khi báº¡n muá»‘n nÃ³i cÃ³ `thá»© nÃ y` **vÃ ** `thá»© kia`...

Kiá»ƒu nhÆ° "má»™t cá»‘c cÃ  phÃª" **vÃ ** "má»™t chiáº¿c bÃ¡nh quy" Ã½.

Trong tiáº¿ng Viá»‡t, chÃºng ta cÃ³ má»™t tá»« nhá» bÃ© nhÆ°ng quyá»n nÄƒng Ä‘á»ƒ lÃ m viá»‡c Ä‘Ã³:

```
vÃ 
```

Dá»… nhÆ° Äƒn káº¹o, Ä‘Ãºng khÃ´ng nÃ o? Giá» báº¡n Ä‘Ã£ biáº¿t cÃ¡ch ná»‘i má»i thá»© láº¡i vá»›i nhau rá»“i! `hashCode()` Báº¡n biáº¿t khÃ´ng, trong Java, cÃ³ má»™t lá»›p cá»±c ká»³ Ä‘áº·c biá»‡t, Ä‘Ã³ lÃ  `Object` (tá»©c lÃ  `java.lang.Object`). HÃ£y nghÄ© vá» nÃ³ nhÆ° lÃ  "Ã´ng tá»•" cá»§a táº¥t cáº£ cÃ¡c lá»›p khÃ¡c trong Java váº­y!

Trong lá»›p `Object` "Ã´ng tá»•" nÃ y, cÃ³ sáºµn má»™t vÃ i phÆ°Æ¡ng thá»©c mÃ  má»i lá»›p con Ä‘á»u sáº½ Ä‘Æ°á»£c thá»«a hÆ°á»Ÿng. Hai trong sá»‘ Ä‘Ã³ lÃ  `equals()` vÃ  `hashCode()`.

Äiá»u thÃº vá»‹ lÃ , *má»i* lá»›p Java mÃ  báº¡n táº¡o ra, Ä‘á»u tá»± Ä‘á»™ng cÃ³ sáºµn má»™t phiÃªn báº£n máº·c Ä‘á»‹nh cá»§a hai phÆ°Æ¡ng thá»©c `equals()` vÃ  `hashCode()` nÃ y.

Váº­y chÃºng lÃ m gÃ¬? Hai phÆ°Æ¡ng thá»©c nÃ y Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ lÃ m viá»‡c cÃ¹ng nhau, giÃºp báº¡n kiá»ƒm tra xem hai Ä‘á»‘i tÆ°á»£ng cÃ³ cÃ¹ng má»™t *giÃ¡ trá»‹* hay khÃ´ng. Tá»©c lÃ , chÃºng cÃ³ chá»©a dá»¯ liá»‡u giá»‘ng há»‡t nhau khÃ´ng, chá»© khÃ´ng chá»‰ lÃ  cÃ³ pháº£i cÃ¹ng má»™t "cÃ¡i há»™p" trong bá»™ nhá»› mÃ¡y tÃ­nh hay khÃ´ng!

   **1. `equals`:** Báº¯t Ä‘áº§u vá»›i `equals` nÃ o! CÃ¡i `equals()` CÃ³ má»™t 'phÆ°Æ¡ng thá»©c' (method) mÃ  chÃºng ta dÃ¹ng Ä‘á»ƒ xem xÃ©t liá»‡u hai 'Ä‘á»‘i tÆ°á»£ng' (Object) cÃ³ 'báº±ng nhau' hay khÃ´ng.

Tuy nhiÃªn, theo máº·c Ä‘á»‹nh (náº¿u báº¡n chÆ°a tÃ¹y chá»‰nh gÃ¬), cÃ¡ch nÃ³ hoáº¡t Ä‘á»™ng lÃ  'so sÃ¡nh danh tÃ­nh' (identities) cá»§a cÃ¡c Ä‘á»‘i tÆ°á»£ng. Tá»©c lÃ , nÃ³ chá»‰ kiá»ƒm tra xem chÃºng cÃ³ pháº£i lÃ  CÃ™NG Má»˜T Ä‘á»‘i tÆ°á»£ng trong bá»™ nhá»› hay khÃ´ng thÃ´i.

VÃ  báº¡n biáº¿t khÃ´ng, chÃ­nh 'lá»›p Object' (Object class) â€“ cÃ¡i lá»›p cha cá»§a má»i thá»© trong Java â€“ Ä‘Ã£ 'Ä‘á»‹nh nghÄ©a' sáºµn phÆ°Æ¡ng thá»©c nÃ y rá»“i Ä‘áº¥y! `equals()` Váº­y thÃ¬, má»™t `method` sáº½ Ä‘Æ°á»£c viáº¿t nhÆ° sau:

   ```java
   public boolean equals(Object obj) {
       return (this == obj);
   }
   ```

   NÃ y, khi báº¡n muá»‘n dÃ¹ng phÆ°Æ¡ng thá»©c `equals`, cÃ³ vÃ i quy táº¯c nhá» mÃ  báº¡n *nháº¥t Ä‘á»‹nh* pháº£i tuÃ¢n theo Ä‘áº¥y! Náº¿u khÃ´ng, má»i thá»© cÃ³ thá»ƒ khÃ´ng hoáº¡t Ä‘á»™ng nhÆ° báº¡n mong Ä‘á»£i Ä‘Ã¢u nhÃ©.

   1. **Pháº£n xáº¡** (Reflexive): NÃ o, hÃ£y xem xÃ©t cÃ¡i nÃ y nhÃ©. Vá»›i Báº¤T Ká»² Ä‘á»‘i tÆ°á»£ng `x` nÃ o mÃ  báº¡n cÃ³... `x.equals(x)` NÃ³ sáº½ *gá»­i tráº£ láº¡i* cho báº¡n... `true`.
   2. **Äá»‘i xá»©ng:**
NÃ¨, cá»© hÃ¬nh dung báº¡n cÃ³ hai Ä‘á»‘i tÆ°á»£ng báº¥t ká»³ nhÃ©. ChÃºng ta sáº½ gá»i chÃºng lÃ  `x` vÃ  `y`. `x.equals(y)` NÃ³ sáº½ *gá»­i tráº£ láº¡i* cho báº¡n... `true` Báº¡n Ä‘Ã£ tá»«ng nghe cá»¥m tá»« "if and only if" chÆ°a?
Trong láº­p trÃ¬nh hoáº·c toÃ¡n há»c, Ä‘Ã¢y lÃ  má»™t Ä‘iá»u kiá»‡n ráº¥t Ä‘áº·c biá»‡t Ä‘Ã³!

Dá»‹ch sang tiáº¿ng Viá»‡t, nÃ³ cÃ³ nghÄ©a lÃ  **"khi vÃ  chá»‰ khi"**.

Váº­y "khi vÃ  chá»‰ khi" cÃ³ nghÄ©a lÃ  gÃ¬?
HÃ£y tÆ°á»Ÿng tÆ°á»£ng chÃºng ta cÃ³ hai "Ä‘iá»u kiá»‡n": `Äiá»u_A` vÃ  `Äiá»u_B`.

Khi chÃºng ta nÃ³i "`Äiá»u_A` xáº£y ra khi vÃ  chá»‰ khi `Äiá»u_B` xáº£y ra", Ä‘iá»u nÃ y cÃ³ nghÄ©a lÃ  cáº£ hai Ä‘iá»u sau Ä‘Ã¢y Ä‘á»u Ä‘Ãºng:

*   **Pháº§n 1: "Náº¿u" (If)**
    *   Náº¿u `Äiá»u_B` Ä‘Ãºng, thÃ¬ cháº¯c cháº¯n `Äiá»u_A` cÅ©ng pháº£i Ä‘Ãºng.
    *   VÃ­ dá»¥: "Náº¿u trá»i mÆ°a, thÃ¬ Ä‘Æ°á»ng sáº½ Æ°á»›t."

*   **Pháº§n 2: "Chá»‰ náº¿u" (Only If)**
    *   `Äiá»u_A` chá»‰ cÃ³ thá»ƒ Ä‘Ãºng *náº¿u* `Äiá»u_B` cÅ©ng Ä‘Ãºng.
    *   Äiá»u nÃ y cÃ³ nghÄ©a lÃ : Náº¿u `Äiá»u_B` khÃ´ng Ä‘Ãºng (tá»©c lÃ  sai), thÃ¬ `Äiá»u_A` cÅ©ng sáº½ khÃ´ng bao giá» Ä‘Ãºng Ä‘Ã¢u nhÃ©!
    *   VÃ­ dá»¥: "ÄÆ°á»ng chá»‰ Æ°á»›t *náº¿u* trá»i mÆ°a." (Náº¿u trá»i khÃ´ng mÆ°a, thÃ¬ Ä‘Æ°á»ng khÃ´ng thá»ƒ Æ°á»›t Ä‘Æ°á»£c, trá»« khi cÃ³ ai Ä‘Ã³ Ä‘á»• nÆ°á»›c ra!)

TÃ³m láº¡i, "`Äiá»u_A` khi vÃ  chá»‰ khi `Äiá»u_B`" cÃ³ nghÄ©a lÃ :
`Äiá»u_A` vÃ  `Äiá»u_B` luÃ´n Ä‘i Ä‘Ã´i vá»›i nhau, chÃºng khÃ´ng thá»ƒ tÃ¡ch rá»i!
*   Náº¿u má»™t cÃ¡i Ä‘Ãºng, thÃ¬ cÃ¡i kia cÅ©ng pháº£i Ä‘Ãºng.
*   Náº¿u má»™t cÃ¡i sai, thÃ¬ cÃ¡i kia cÅ©ng pháº£i sai.

ChÃºng giá»‘ng nhÆ° hai ngÆ°á»i báº¡n thÃ¢n khÃ´ng bao giá» rá»i xa váº­y! `y.equals(x)` NÃ y báº¡n! Báº¡n cÃ³ nhá»› máº¥y cÃ¡i *method* khÃ´ng? Coi nhÆ° má»—i method lÃ  má»™t anh chÃ ng Ä‘áº§u báº¿p mini siÃªu giá»i Ä‘i!

Khi báº¡n "gá»i" (call) má»™t method, giá»‘ng nhÆ° báº¡n giao cho anh áº¥y má»™t nhiá»‡m vá»¥, Ä‘Ãºng khÃ´ng?

*   Báº¡n nhá» anh áº¥y "tÃ­nh tá»•ng hai sá»‘".
*   Hoáº·c "tÃ¬m sá»‘ lá»›n nháº¥t".
*   Hoáº·c "táº¡o má»™t tin nháº¯n Ä‘áº·c biá»‡t".

Sau khi anh áº¥y hoÃ n thÃ nh cÃ´ng viá»‡c, anh áº¥y sáº½ *Ä‘Æ°a láº¡i* cho báº¡n má»™t cÃ¡i gÃ¬ Ä‘Ã³, Ä‘Ãºng khÃ´ng?

Trong láº­p trÃ¬nh, cÃ¡i hÃ nh Ä‘á»™ng *Ä‘Æ°a láº¡i* Ä‘Ã³ chÃ­nh lÃ  **tráº£ vá»** (returns)!

NÃ³ cÃ³ nghÄ©a lÃ :

*   Sau khi method lÃ m xong nhiá»‡m vá»¥ cá»§a mÃ¬nh, nÃ³ sáº½ **gá»­i ngÆ°á»£c láº¡i má»™t giÃ¡ trá»‹** cho cÃ¡i Ä‘oáº¡n code Ä‘Ã£ gá»i nÃ³.
*   CÃ¡i giÃ¡ trá»‹ Ä‘Ã³ chÃ­nh lÃ  **káº¿t quáº£** mÃ  method Ä‘Ã£ táº¡o ra.

Kiá»ƒu nhÆ°, báº¡n nhá» anh Ä‘áº§u báº¿p lÃ m mÃ³n bÃ¡nh. Anh áº¥y lÃ m xong, anh áº¥y *tráº£ vá»* cho báº¡n **cÃ¡i bÃ¡nh Ä‘Ã£ lÃ m xong** Ä‘Ã³! Äá»ƒ báº¡n cÃ³ thá»ƒ Äƒn (hoáº·c dÃ¹ng) nÃ³.

TÆ°Æ¡ng tá»±, cÃ¡i Ä‘oáº¡n code Ä‘Ã£ "gá»i" (call) method Ä‘Ã³ sáº½ nháº­n Ä‘Æ°á»£c cÃ¡i giÃ¡ trá»‹ *tráº£ vá»* nÃ y vÃ  cÃ³ thá»ƒ dÃ¹ng nÃ³ cho viá»‡c khÃ¡c. Tuyá»‡t vá»i chÆ°a? `true`.
   3. **TÃ­nh báº¯c cáº§u:**
NÃ y, hÃ£y tÆ°á»Ÿng tÆ°á»£ng chÃºng ta cÃ³ ba 'Ä‘á»‘i tÆ°á»£ng' khÃ¡c nhau nhÃ©. Cá»© gá»i chÃºng lÃ  x, y, vÃ  z Ä‘i! `if x.equals(y)` NÃ y báº¡n! Báº¡n cÃ³ nhá»› máº¥y cÃ¡i *method* khÃ´ng? Coi nhÆ° má»—i method lÃ  má»™t anh chÃ ng Ä‘áº§u báº¿p mini siÃªu giá»i Ä‘i!

Khi báº¡n "gá»i" (call) má»™t method, giá»‘ng nhÆ° báº¡n giao cho anh áº¥y má»™t nhiá»‡m vá»¥, Ä‘Ãºng khÃ´ng?

*   Báº¡n nhá» anh áº¥y "tÃ­nh tá»•ng hai sá»‘".
*   Hoáº·c "tÃ¬m sá»‘ lá»›n nháº¥t".
*   Hoáº·c "táº¡o má»™t tin nháº¯n Ä‘áº·c biá»‡t".

Sau khi anh áº¥y hoÃ n thÃ nh cÃ´ng viá»‡c, anh áº¥y sáº½ *Ä‘Æ°a láº¡i* cho báº¡n má»™t cÃ¡i gÃ¬ Ä‘Ã³, Ä‘Ãºng khÃ´ng?

Trong láº­p trÃ¬nh, cÃ¡i hÃ nh Ä‘á»™ng *Ä‘Æ°a láº¡i* Ä‘Ã³ chÃ­nh lÃ  **tráº£ vá»** (returns)!

NÃ³ cÃ³ nghÄ©a lÃ :

*   Sau khi method lÃ m xong nhiá»‡m vá»¥ cá»§a mÃ¬nh, nÃ³ sáº½ **gá»­i ngÆ°á»£c láº¡i má»™t giÃ¡ trá»‹** cho cÃ¡i Ä‘oáº¡n code Ä‘Ã£ gá»i nÃ³.
*   CÃ¡i giÃ¡ trá»‹ Ä‘Ã³ chÃ­nh lÃ  **káº¿t quáº£** mÃ  method Ä‘Ã£ táº¡o ra.

Kiá»ƒu nhÆ°, báº¡n nhá» anh Ä‘áº§u báº¿p lÃ m mÃ³n bÃ¡nh. Anh áº¥y lÃ m xong, anh áº¥y *tráº£ vá»* cho báº¡n **cÃ¡i bÃ¡nh Ä‘Ã£ lÃ m xong** Ä‘Ã³! Äá»ƒ báº¡n cÃ³ thá»ƒ Äƒn (hoáº·c dÃ¹ng) nÃ³.

TÆ°Æ¡ng tá»±, cÃ¡i Ä‘oáº¡n code Ä‘Ã£ "gá»i" (call) method Ä‘Ã³ sáº½ nháº­n Ä‘Æ°á»£c cÃ¡i giÃ¡ trá»‹ *tráº£ vá»* nÃ y vÃ  cÃ³ thá»ƒ dÃ¹ng nÃ³ cho viá»‡c khÃ¡c. Tuyá»‡t vá»i chÆ°a? `true` ChÃ o báº¡n! Sáºµn sÃ ng cho má»™t tá»« cá»±c ká»³ tiá»‡n lá»£i chÆ°a?

Khi báº¡n muá»‘n nÃ³i cÃ³ `thá»© nÃ y` **vÃ ** `thá»© kia`...

Kiá»ƒu nhÆ° "má»™t cá»‘c cÃ  phÃª" **vÃ ** "má»™t chiáº¿c bÃ¡nh quy" Ã½.

Trong tiáº¿ng Viá»‡t, chÃºng ta cÃ³ má»™t tá»« nhá» bÃ© nhÆ°ng quyá»n nÄƒng Ä‘á»ƒ lÃ m viá»‡c Ä‘Ã³:

```
vÃ 
```

Dá»… nhÆ° Äƒn káº¹o, Ä‘Ãºng khÃ´ng nÃ o? Giá» báº¡n Ä‘Ã£ biáº¿t cÃ¡ch ná»‘i má»i thá»© láº¡i vá»›i nhau rá»“i! `y.equals(z)` NÃ y báº¡n! Báº¡n cÃ³ nhá»› máº¥y cÃ¡i *method* khÃ´ng? Coi nhÆ° má»—i method lÃ  má»™t anh chÃ ng Ä‘áº§u báº¿p mini siÃªu giá»i Ä‘i!

Khi báº¡n "gá»i" (call) má»™t method, giá»‘ng nhÆ° báº¡n giao cho anh áº¥y má»™t nhiá»‡m vá»¥, Ä‘Ãºng khÃ´ng?

*   Báº¡n nhá» anh áº¥y "tÃ­nh tá»•ng hai sá»‘".
*   Hoáº·c "tÃ¬m sá»‘ lá»›n nháº¥t".
*   Hoáº·c "táº¡o má»™t tin nháº¯n Ä‘áº·c biá»‡t".

Sau khi anh áº¥y hoÃ n thÃ nh cÃ´ng viá»‡c, anh áº¥y sáº½ *Ä‘Æ°a láº¡i* cho báº¡n má»™t cÃ¡i gÃ¬ Ä‘Ã³, Ä‘Ãºng khÃ´ng?

Trong láº­p trÃ¬nh, cÃ¡i hÃ nh Ä‘á»™ng *Ä‘Æ°a láº¡i* Ä‘Ã³ chÃ­nh lÃ  **tráº£ vá»** (returns)!

NÃ³ cÃ³ nghÄ©a lÃ :

*   Sau khi method lÃ m xong nhiá»‡m vá»¥ cá»§a mÃ¬nh, nÃ³ sáº½ **gá»­i ngÆ°á»£c láº¡i má»™t giÃ¡ trá»‹** cho cÃ¡i Ä‘oáº¡n code Ä‘Ã£ gá»i nÃ³.
*   CÃ¡i giÃ¡ trá»‹ Ä‘Ã³ chÃ­nh lÃ  **káº¿t quáº£** mÃ  method Ä‘Ã£ táº¡o ra.

Kiá»ƒu nhÆ°, báº¡n nhá» anh Ä‘áº§u báº¿p lÃ m mÃ³n bÃ¡nh. Anh áº¥y lÃ m xong, anh áº¥y *tráº£ vá»* cho báº¡n **cÃ¡i bÃ¡nh Ä‘Ã£ lÃ m xong** Ä‘Ã³! Äá»ƒ báº¡n cÃ³ thá»ƒ Äƒn (hoáº·c dÃ¹ng) nÃ³.

TÆ°Æ¡ng tá»±, cÃ¡i Ä‘oáº¡n code Ä‘Ã£ "gá»i" (call) method Ä‘Ã³ sáº½ nháº­n Ä‘Æ°á»£c cÃ¡i giÃ¡ trá»‹ *tráº£ vá»* nÃ y vÃ  cÃ³ thá»ƒ dÃ¹ng nÃ³ cho viá»‡c khÃ¡c. Tuyá»‡t vá»i chÆ°a? `true`, rá»“i thÃ¬ `x.equals(z)` NÃ³ sáº½ *gá»­i tráº£ láº¡i* cho báº¡n... `true`.
   4. **Nháº¥t quÃ¡n:**
Vá»›i báº¥t ká»³ hai Ä‘á»‘i tÆ°á»£ng nÃ o, cá»© gá»i chÃºng lÃ  `x` vÃ  `y` nhÃ©.
Náº¿u báº¡n gá»i (thá»±c thi) má»™t phÆ°Æ¡ng thá»©c nÃ o Ä‘Ã³ nhiá»u láº§n liÃªn tiáº¿p... `x.equals(y)` NÃ³ nÃªn tráº£ vá» cÃ¹ng má»™t káº¿t quáº£ nhÃ© (`true` ChÃ o báº¡n! ChÃºng ta cÃ¹ng tÃ¬m hiá»ƒu tá»« `or` nhÃ©.

Trong tiáº¿ng Viá»‡t, `or` cÃ³ nghÄ©a lÃ  **hoáº·c**.

NghÄ© Ä‘Æ¡n giáº£n tháº¿ nÃ y nÃ¨:

Khi báº¡n nÃ³i "Báº¡n cÃ³ thá»ƒ Äƒn bÃ¡nh quy **hoáº·c** Äƒn má»™t quáº£ tÃ¡o."

Äiá»u nÃ y cÃ³ nghÄ©a lÃ  báº¡n cÃ³ hai lá»±a chá»n, vÃ  báº¡n chá»‰ cáº§n chá»n *má»™t trong hai* lÃ  Ä‘Æ°á»£c.

Trong láº­p trÃ¬nh, `hoáº·c` (hay `or`) cÅ©ng hoáº¡t Ä‘á»™ng tÆ°Æ¡ng tá»± váº­y Ä‘Ã³!

VÃ­ dá»¥, báº¡n muá»‘n Ä‘i chÆ¡i náº¿u trá»i **khÃ´ng mÆ°a** `hoáº·c` **lÃ  cuá»‘i tuáº§n**.

*   Náº¿u trá»i khÃ´ng mÆ°a (dÃ¹ khÃ´ng pháº£i cuá»‘i tuáº§n), báº¡n váº«n Ä‘i chÆ¡i!
*   Náº¿u lÃ  cuá»‘i tuáº§n (dÃ¹ trá»i cÃ³ mÆ°a), báº¡n váº«n Ä‘i chÆ¡i!
*   Náº¿u trá»i vá»«a khÃ´ng mÆ°a *láº¡i vá»«a* lÃ  cuá»‘i tuáº§n, thÃ¬ quÃ¡ tuyá»‡t vá»i rá»“i, báº¡n cháº¯c cháº¯n Ä‘i chÆ¡i!

Váº­y tÃ³m láº¡i, `hoáº·c` cÃ³ nghÄ©a lÃ : **chá»‰ cáº§n *Ã­t nháº¥t má»™t* Ä‘iá»u kiá»‡n Ä‘Ãºng thÃ¬ toÃ n bá»™ cÃ¢u lá»‡nh sáº½ Ä‘Ãºng.**

Dá»… hiá»ƒu pháº£i khÃ´ng nÃ o? `false`Trá»« khi báº¡n *thay Ä‘á»•i* báº¥t ká»³ thuá»™c tÃ­nh nÃ o cá»§a Ä‘á»‘i tÆ°á»£ng. MÃ  nhá»¯ng thuá»™c tÃ­nh Ä‘Ã³ láº¡i chÃ­nh lÃ  nhá»¯ng thá»© Ä‘ang *Ä‘Æ°á»£c dÃ¹ng* bÃªn trong phÆ°Æ¡ng thá»©c `equals()` cá»§a báº¡n Ä‘á»ƒ so sÃ¡nh Ä‘áº¥y!

   **2. hashCode:** NÃ y, báº¡n cÃ³ biáº¿t `hashCode` lÃ  gÃ¬ khÃ´ng? NÃ³ giá»‘ng nhÆ° má»™t "mÃ£ sá»‘ bÃ­ máº­t" Ä‘áº·c biá»‡t, má»™t mÃ£ Ä‘á»‹nh danh duy nháº¥t mÃ  Java gÃ¡n cho má»—i Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n váº­y. HÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y: báº¡n cÃ³ má»™t Ä‘á»‘ng Ä‘á»“ chÆ¡i khá»•ng lá»“ vÃ  muá»‘n tÃ¬m mÃ³n Ä‘á»“ yÃªu thÃ­ch cá»§a mÃ¬nh tháº­t nhanh. Cháº¯c báº¡n sáº½ dÃ¡n má»™t cÃ¡i nhÃ£n nhá» cÃ³ sá»‘ lÃªn má»—i mÃ³n Ä‘á»“ chÆ¡i, Ä‘Ãºng khÃ´ng? `hashCode` cÅ©ng lÃ m Ä‘iá»u tÆ°Æ¡ng tá»± Ä‘áº¥y! NÃ³ giÃºp Java sáº¯p xáº¿p vÃ  tÃ¬m kiáº¿m cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n nhanh nhÆ° chá»›p, Ä‘áº·c biá»‡t lÃ  khi chÃºng náº±m trong cÃ¡c bá»™ sÆ°u táº­p Ä‘áº·c biá»‡t nhÆ° `HashMap` hay `HashSet`. Khi báº¡n yÃªu cáº§u má»™t Ä‘á»‘i tÆ°á»£ng tráº£ vá» `hashCode()`, nÃ³ sáº½ "nháº£" ra má»™t sá»‘ nguyÃªn (integer). Con sá»‘ nÃ y chÃ­nh lÃ  má»™t "lá»‘i táº¯t" siÃªu tá»‘c Ä‘á»ƒ Java biáº¿t Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ *cÃ³ thá»ƒ* Ä‘ang áº©n nÃ¡u á»Ÿ Ä‘Ã¢u! `hashCode()` CÃ¡i `method` nÃ y sáº½ **tráº£ vá» má»™t con sá»‘ nguyÃªn** Ä‘áº·c biá»‡t, Ä‘Ã³ lÃ  `hash code` cá»§a `object` báº¡n Ä‘ang dÃ¹ng.

VÃ  Ä‘Ã¢y lÃ  má»™t quy táº¯c cá»±c ká»³ quan trá»ng: CÃ¡i `method` nÃ y **báº¯t buá»™c pháº£i Ä‘Æ°á»£c ghi Ä‘Ã¨** (override) trong **má»i `class`** mÃ  báº¡n Ä‘Ã£ **ghi Ä‘Ã¨** (override) má»™t `method` nÃ o Ä‘Ã³ (thÆ°á»ng lÃ  `equals()`). `equals()` Ã€, nÃ³i vá» cÃ¡i `hashCode()` method áº¥y, nÃ³ cÃ³ má»™t vÃ i "luáº­t chÆ¡i" cÆ¡ báº£n mÃ  báº¡n cáº§n tuÃ¢n theo Ä‘á»ƒ má»i thá»© hoáº¡t Ä‘á»™ng Ä‘Ãºng Ä‘áº¯n. NgÆ°á»i ta gá»i Ä‘Ã³ lÃ  'há»£p Ä‘á»“ng chung' (general contract) cá»§a `hashCode`. ÄÃ¢y lÃ  nhá»¯ng gÃ¬ báº¡n cáº§n biáº¿t:

   1. Khi á»©ng dá»¥ng cá»§a báº¡n Ä‘ang cháº¡y "bon bon" nhÃ©, thÃ¬ cÃ³ má»™t thá»© gÃ¬ Ä‘Ã³ Ä‘Æ°á»£c gá»i tá»›i, khÃ´ng pháº£i má»™t mÃ  lÃ  *nhiá»u* láº§n láº­n Ä‘Ã³! `hashCode()` ...trÃªn Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ *pháº£i luÃ´n* tráº£ vá» cÃ¹ng má»™t giÃ¡ trá»‹ sá»‘ nguyÃªn (lÃ  sá»‘ khÃ´ng cÃ³ pháº§n tháº­p phÃ¢n) y há»‡t nhau. Trá»« khi má»™t 'Ä‘áº·c tÃ­nh' (hay 'thuá»™c tÃ­nh') cá»§a Ä‘á»‘i tÆ°á»£ng, mÃ  Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ tÃ­nh toÃ¡n giÃ¡ trá»‹ nÃ y, bá»‹ thay Ä‘á»•i... `equals()` PhÆ°Æ¡ng thá»©c Ä‘ang Ä‘Æ°á»£c thay Ä‘á»•i.
   2. Báº¡n biáº¿t khÃ´ng, má»—i láº§n báº¡n cháº¡y á»©ng dá»¥ng cá»§a mÃ¬nh...

CÃ¡i `hashCode` cá»§a má»™t Ä‘á»‘i tÆ°á»£ng áº¥y, nÃ³ CÃ“ THá»‚ thay Ä‘á»•i Ä‘áº¥y!

ÄÃºng váº­y, khÃ´ng pháº£i lÃºc nÃ o nÃ³ cÅ©ng giá»¯ nguyÃªn giÃ¡ trá»‹ qua má»—i láº§n báº¡n khá»Ÿi Ä‘á»™ng chÆ°Æ¡ng trÃ¬nh Ä‘Ã¢u nha.
   3. Náº¿u hai Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c coi lÃ  **giá»‘ng há»‡t nhau** (hay 'báº±ng nhau' vá» máº·t giÃ¡ trá»‹) Dá»°A TRÃŠN `equals()` Ã€, náº¿u hai Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c coi lÃ  "báº±ng nhau" (khi báº¡n so sÃ¡nh chÃºng báº±ng phÆ°Æ¡ng thá»©c `equals()` áº¥y), thÃ¬ mÃ£ hash cá»§a chÃºng (tá»©c lÃ  cÃ¡i sá»‘ tráº£ vá» tá»« `hashCode()`) *báº¯t buá»™c pháº£i giá»‘ng há»‡t nhau* luÃ´n nhÃ©. ÄÃ¢y lÃ  má»™t quy táº¯c "vÃ ng" Ä‘Ã³!
   4. Náº¿u hai Ä‘á»‘i tÆ°á»£ng mÃ  báº¡n Ä‘ang xem xÃ©t, chÃºng láº¡i 'khÃ´ng báº±ng nhau' (tá»©c lÃ  khÃ¡c biá»‡t) Dá»°A TRÃŠN `equals()` Vá» phÆ°Æ¡ng thá»©c, báº¡n biáº¿t khÃ´ng, giÃ¡ trá»‹ mÃ£ bÄƒm cá»§a chÃºng *cÃ³ thá»ƒ* báº±ng nhau, hoáº·c *cÅ©ng cÃ³ thá»ƒ* KHÃ”NG báº±ng nhau Ä‘Ã¢u nhÃ©.

   Khi chÃºng ta ghÃ©p chÃºng láº¡i vá»›i nhau, thÃ¬ cÃ¡ch mÃ  chÃºng ta triá»ƒn khai `equals()` ChÃ o báº¡n! Sáºµn sÃ ng cho má»™t tá»« cá»±c ká»³ tiá»‡n lá»£i chÆ°a?

Khi báº¡n muá»‘n nÃ³i cÃ³ `thá»© nÃ y` **vÃ ** `thá»© kia`...

Kiá»ƒu nhÆ° "má»™t cá»‘c cÃ  phÃª" **vÃ ** "má»™t chiáº¿c bÃ¡nh quy" Ã½.

Trong tiáº¿ng Viá»‡t, chÃºng ta cÃ³ má»™t tá»« nhá» bÃ© nhÆ°ng quyá»n nÄƒng Ä‘á»ƒ lÃ m viá»‡c Ä‘Ã³:

```
vÃ 
```

Dá»… nhÆ° Äƒn káº¹o, Ä‘Ãºng khÃ´ng nÃ o? Giá» báº¡n Ä‘Ã£ biáº¿t cÃ¡ch ná»‘i má»i thá»© láº¡i vá»›i nhau rá»“i! `hashCode()` Báº¡n nÃªn lÃ m theo nhá»¯ng quy táº¯c nÃ y nÃ¨.

   1. ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i tháº¿ giá»›i cá»§a nhá»¯ng quyáº¿t Ä‘á»‹nh!

Báº¡n biáº¿t Ä‘áº¥y, trong cuá»™c sá»‘ng, chÃºng ta luÃ´n pháº£i Ä‘Æ°a ra cÃ¡c lá»±a chá»n, Ä‘Ãºng khÃ´ng? Kiá»ƒu nhÆ°:

*   **Náº¿u** trá»i mÆ°a, **thÃ¬** mÃ¬nh sáº½ mang Ã´.
*   **Náº¿u** mÃ¬nh Ä‘Ã³i bá»¥ng, **thÃ¬** mÃ¬nh sáº½ Ä‘i Äƒn.

Trong láº­p trÃ¬nh cÅ©ng y chang váº­y Ä‘Ã³! Code cá»§a chÃºng ta cÅ©ng cáº§n biáº¿t cÃ¡ch "ra quyáº¿t Ä‘á»‹nh". VÃ  Ä‘Ã¢y lÃ  lÃºc tá»« khÃ³a siÃªu sao cá»§a chÃºng ta xuáº¥t hiá»‡n:

`if`

ÄÃºng váº­y, chá»‰ lÃ  `if` thÃ´i!

NÃ³ cÃ³ nghÄ©a lÃ  "náº¿u".

Khi báº¡n dÃ¹ng `if`, báº¡n Ä‘ang nÃ³i vá»›i chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh ráº±ng:

"NÃ y, hÃ£y kiá»ƒm tra má»™t Ä‘iá»u kiá»‡n gÃ¬ Ä‘Ã³ Ä‘i. **Náº¿u** Ä‘iá»u kiá»‡n nÃ y Ä‘Ãºng, **thÃ¬** hÃ£y lÃ m cÃ¡i nÃ y nhÃ©!"

ÄÆ¡n giáº£n váº­y Ä‘Ã³!

NÃ³ giÃºp chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n khÃ´ng pháº£i lÃºc nÃ o cÅ©ng lÃ m má»i thá»© theo má»™t Ä‘Æ°á»ng tháº³ng táº¯p. Thay vÃ o Ä‘Ã³, nÃ³ cÃ³ thá»ƒ ráº½ nhÃ¡nh, tÃ¹y thuá»™c vÃ o viá»‡c má»™t cÃ¡i gÃ¬ Ä‘Ã³ lÃ  Ä‘Ãºng hay sai.

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t cÃ¢u lá»‡nh `if` nhÆ° tháº¿ nÃ y:

```java
// Náº¿u nhiá»‡t Ä‘á»™ lá»›n hÆ¡n 25 Ä‘á»™ C...
if (nhietDo > 25) {
    // ...thÃ¬ báº­t Ä‘iá»u hÃ²a lÃªn!
    batDieuHoa();
}
```

Tháº¥y chÆ°a? ChÆ°Æ¡ng trÃ¬nh sáº½ *chá»‰* gá»i `batDieuHoa()` **náº¿u** `nhietDo` thá»±c sá»± lá»›n hÆ¡n 25. Náº¿u khÃ´ng, nÃ³ sáº½ bá» qua vÃ  Ä‘i tiáº¿p.

`if` lÃ  cÃ´ng cá»¥ quyá»n nÄƒng giÃºp code cá»§a báº¡n thÃ´ng minh hÆ¡n vÃ  pháº£n á»©ng linh hoáº¡t hÆ¡n vá»›i cÃ¡c tÃ¬nh huá»‘ng khÃ¡c nhau! `x.equals(y)` Khi mÃ  nÃ³ **Ä‘Ãºng** rá»“i, **thÃ¬**... `x.hashCode() === y.hashCode()` CÃ¡i nÃ y *pháº£i luÃ´n luÃ´n Ä‘Ãºng* Ä‘áº¥y nhÃ©!
   2. ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i tháº¿ giá»›i cá»§a nhá»¯ng quyáº¿t Ä‘á»‹nh!

Báº¡n biáº¿t Ä‘áº¥y, trong cuá»™c sá»‘ng, chÃºng ta luÃ´n pháº£i Ä‘Æ°a ra cÃ¡c lá»±a chá»n, Ä‘Ãºng khÃ´ng? Kiá»ƒu nhÆ°:

*   **Náº¿u** trá»i mÆ°a, **thÃ¬** mÃ¬nh sáº½ mang Ã´.
*   **Náº¿u** mÃ¬nh Ä‘Ã³i bá»¥ng, **thÃ¬** mÃ¬nh sáº½ Ä‘i Äƒn.

Trong láº­p trÃ¬nh cÅ©ng y chang váº­y Ä‘Ã³! Code cá»§a chÃºng ta cÅ©ng cáº§n biáº¿t cÃ¡ch "ra quyáº¿t Ä‘á»‹nh". VÃ  Ä‘Ã¢y lÃ  lÃºc tá»« khÃ³a siÃªu sao cá»§a chÃºng ta xuáº¥t hiá»‡n:

`if`

ÄÃºng váº­y, chá»‰ lÃ  `if` thÃ´i!

NÃ³ cÃ³ nghÄ©a lÃ  "náº¿u".

Khi báº¡n dÃ¹ng `if`, báº¡n Ä‘ang nÃ³i vá»›i chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh ráº±ng:

"NÃ y, hÃ£y kiá»ƒm tra má»™t Ä‘iá»u kiá»‡n gÃ¬ Ä‘Ã³ Ä‘i. **Náº¿u** Ä‘iá»u kiá»‡n nÃ y Ä‘Ãºng, **thÃ¬** hÃ£y lÃ m cÃ¡i nÃ y nhÃ©!"

ÄÆ¡n giáº£n váº­y Ä‘Ã³!

NÃ³ giÃºp chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n khÃ´ng pháº£i lÃºc nÃ o cÅ©ng lÃ m má»i thá»© theo má»™t Ä‘Æ°á»ng tháº³ng táº¯p. Thay vÃ o Ä‘Ã³, nÃ³ cÃ³ thá»ƒ ráº½ nhÃ¡nh, tÃ¹y thuá»™c vÃ o viá»‡c má»™t cÃ¡i gÃ¬ Ä‘Ã³ lÃ  Ä‘Ãºng hay sai.

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t cÃ¢u lá»‡nh `if` nhÆ° tháº¿ nÃ y:

```java
// Náº¿u nhiá»‡t Ä‘á»™ lá»›n hÆ¡n 25 Ä‘á»™ C...
if (nhietDo > 25) {
    // ...thÃ¬ báº­t Ä‘iá»u hÃ²a lÃªn!
    batDieuHoa();
}
```

Tháº¥y chÆ°a? ChÆ°Æ¡ng trÃ¬nh sáº½ *chá»‰* gá»i `batDieuHoa()` **náº¿u** `nhietDo` thá»±c sá»± lá»›n hÆ¡n 25. Náº¿u khÃ´ng, nÃ³ sáº½ bá» qua vÃ  Ä‘i tiáº¿p.

`if` lÃ  cÃ´ng cá»¥ quyá»n nÄƒng giÃºp code cá»§a báº¡n thÃ´ng minh hÆ¡n vÃ  pháº£n á»©ng linh hoáº¡t hÆ¡n vá»›i cÃ¡c tÃ¬nh huá»‘ng khÃ¡c nhau! `x.hashCode() === y.hashCode()` lÃ  `true` (Ä‘Ãºng) rá»“i,
thÃ¬ pháº§n cÃ²n láº¡i `khÃ´ng cáº§n pháº£i Ä‘Æ°á»£c kiá»ƒm tra` ná»¯a Ä‘Ã¢u. `x.equals(y)` Ã€, cÃ¡i nÃ y háº£? NÃ³ **luÃ´n luÃ´n Ä‘Ãºng** Ä‘Ã³ nha.

   **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

10. ### Sá»± khÃ¡c biá»‡t giá»¯a cÃ¡c ngoáº¡i lá»‡ Ä‘Æ°á»£c kiá»ƒm tra (checked) vÃ  khÃ´ng Ä‘Æ°á»£c kiá»ƒm tra (unchecked exceptions) lÃ  gÃ¬?

ChÃ o báº¡n! Báº¡n Ä‘Ã£ sáºµn sÃ ng Ä‘á»ƒ cÃ¹ng nhau "giáº£i mÃ£" má»™t trong nhá»¯ng khÃ¡i niá»‡m quan trá»ng nhÆ°ng cÅ©ng dá»… gÃ¢y nháº§m láº«n nháº¥t trong Java chÆ°a? HÃ£y cÃ¹ng tÃ¬m hiá»ƒu vá» hai loáº¡i "sá»± cá»‘" (hay chÃ­nh xÃ¡c hÆ¡n lÃ  *ngoáº¡i lá»‡* - exceptions) mÃ  chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cÃ³ thá»ƒ gáº·p pháº£i nhÃ©!

Báº¡n biáº¿t khÃ´ng, Java cÃ³ cÃ¡ch nhÃ¬n nháº­n ráº¥t khÃ¡c nhau vá» cÃ¡c loáº¡i lá»—i. CÃ³ lá»—i mÃ  Java báº£o: "NÃ y, báº¡n *pháº£i* chuáº©n bá»‹ tinh tháº§n cho viá»‡c nÃ y Ä‘áº¥y!" VÃ  cÃ³ lá»—i thÃ¬ nÃ³ láº¡i "thá» Æ¡" hÆ¡n: "Ã€, lá»—i nÃ y lÃ  do báº¡n code chÆ°a cáº©n tháº­n thÃ´i, tá»± chá»‹u Ä‘i nhÃ©!"

Nghe cÃ³ váº» thÃº vá»‹ Ä‘Ãºng khÃ´ng? HÃ£y Ä‘i sÃ¢u vÃ o tá»«ng loáº¡i nÃ o!

### Checked Exceptions (Ngoáº¡i lá»‡ Báº¯t buá»™c Kiá»ƒm tra)

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang xÃ¢y dá»±ng má»™t á»©ng dá»¥ng cáº§n Ä‘á»c dá»¯ liá»‡u tá»« má»™t táº­p tin trÃªn mÃ¡y tÃ­nh.

1.  **ChÃºng lÃ  gÃ¬?**
    *   ÄÃ¢y lÃ  nhá»¯ng "sá»± cá»‘" mÃ  Java nghÄ© ráº±ng *cÃ³ kháº£ nÄƒng xáº£y ra* ngay cáº£ khi báº¡n Ä‘Ã£ viáº¿t code ráº¥t Ä‘Ãºng logic.
    *   ChÃºng thÆ°á»ng xuáº¥t phÃ¡t tá»« nhá»¯ng yáº¿u tá»‘ *bÃªn ngoÃ i chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n*. VÃ­ dá»¥:
        *   Táº­p tin mÃ  báº¡n muá»‘n Ä‘á»c *khÃ´ng tá»“n táº¡i*.
        *   Máº¡ng internet bá»‹ ngáº¯t káº¿t ná»‘i khi chÆ°Æ¡ng trÃ¬nh cá»‘ gáº¯ng táº£i dá»¯ liá»‡u.
        *   á»” Ä‘Ä©a cá»©ng bá»‹ Ä‘áº§y khi báº¡n cá»‘ gáº¯ng lÆ°u má»™t táº­p tin má»›i.

2.  **Java xá»­ lÃ½ tháº¿ nÃ o?**
    *   ÄÃ¢y lÃ  Ä‘iá»ƒm Ä‘áº·c biá»‡t nháº¥t! TrÃ¬nh biÃªn dá»‹ch Java (cÃ¡i "anh chÃ ng" kiá»ƒm tra code cá»§a báº¡n trÆ°á»›c khi nÃ³ biáº¿n thÃ nh chÆ°Æ¡ng trÃ¬nh cháº¡y Ä‘Æ°á»£c) sáº½ *báº¯t buá»™c báº¡n* pháº£i nghÄ© cÃ¡ch xá»­ lÃ½ nhá»¯ng tÃ¬nh huá»‘ng nÃ y.
    *   Náº¿u báº¡n khÃ´ng "khai bÃ¡o" hoáº·c "xá»­ lÃ½" chÃºng, trÃ¬nh biÃªn dá»‹ch sáº½ *tá»« chá»‘i* biÃªn dá»‹ch code cá»§a báº¡n. NÃ³ sáº½ bÃ¡o lá»—i vÃ  khÃ´ng cho báº¡n cháº¡y chÆ°Æ¡ng trÃ¬nh!
    *   Báº¡n cÃ³ hai cÃ¡ch Ä‘á»ƒ "lÃ m hÃ i lÃ²ng" trÃ¬nh biÃªn dá»‹ch:
        *   **DÃ¹ng `try-catch`:** Báº¡n nÃ³i, "TÃ´i sáº½ *thá»­* thá»±c hiá»‡n hÃ nh Ä‘á»™ng nÃ y. Náº¿u cÃ³ lá»—i, tÃ´i sáº½ *báº¯t láº¥y* nÃ³ vÃ  xá»­ lÃ½ theo cÃ¡ch nÃ y."
        *   **DÃ¹ng `throws`:** Báº¡n nÃ³i, "TÃ´i biáº¿t hÃ nh Ä‘á»™ng nÃ y cÃ³ thá»ƒ gÃ¢y lá»—i, nhÆ°ng tÃ´i khÃ´ng muá»‘n xá»­ lÃ½ nÃ³ á»Ÿ Ä‘Ã¢y. TÃ´i sáº½ *nÃ©m* trÃ¡ch nhiá»‡m xá»­ lÃ½ cho phÆ°Æ¡ng thá»©c (method) nÃ o gá»i tÃ´i."

3.  **VÃ­ dá»¥ nÃ¨:**
    *   `IOException` (khi lÃ m viá»‡c vá»›i cÃ¡c luá»“ng nháº­p/xuáº¥t nhÆ° file, máº¡ng)
    *   `SQLException` (khi lÃ m viá»‡c vá»›i cÆ¡ sá»Ÿ dá»¯ liá»‡u)
    *   `FileNotFoundException` (má»™t loáº¡i cá»§a `IOException`, khi khÃ´ng tÃ¬m tháº¥y file)

    ```java
    import java.io.FileReader; // Äá»ƒ Ä‘á»c file
    import java.io.IOException; // Loáº¡i ngoáº¡i lá»‡ cÃ³ thá»ƒ xáº£y ra

    public class DocFileViDu {
        public static void main(String[] args) {
            FileReader reader = null; // Khai bÃ¡o biáº¿n trÆ°á»›c
            try {
                // DÃ²ng nÃ y cÃ³ thá»ƒ gÃ¢y ra FileNotFoundException (lÃ  má»™t loáº¡i IOException)
                reader = new FileReader("tap_tin_khong_ton_tai.txt");
                System.out.println("ÄÃ£ cá»‘ gáº¯ng má»Ÿ file.");
                // Thá»±c hiá»‡n cÃ¡c thao tÃ¡c Ä‘á»c file á»Ÿ Ä‘Ã¢y...
            } catch (IOException e) { // Báº¯t buá»™c pháº£i cÃ³ khá»‘i catch nÃ y!
                System.out.println("Ã”i khÃ´ng! KhÃ´ng thá»ƒ má»Ÿ hoáº·c Ä‘á»c file. Lá»—i lÃ : " + e.getMessage());
            } finally {
                // Khá»‘i finally luÃ´n cháº¡y, dÃ¹ cÃ³ lá»—i hay khÃ´ng
                if (reader != null) {
                    try {
                        reader.close(); // Viá»‡c Ä‘Ã³ng file cÅ©ng cÃ³ thá»ƒ gÃ¢y IOException
                    } catch (IOException e) {
                        System.out.println("Lá»—i khi Ä‘Ã³ng file: " + e.getMessage());
                    }
                }
            }
        }
    }
    ```
    Náº¿u báº¡n xÃ³a khá»‘i `try-catch` trong vÃ­ dá»¥ trÃªn, trÃ¬nh biÃªn dá»‹ch sáº½ *ngay láº­p tá»©c* bÃ¡o lá»—i vÃ  khÃ´ng cho báº¡n biÃªn dá»‹ch code! NÃ³ muá»‘n báº¡n pháº£i cÃ³ káº¿ hoáº¡ch dá»± phÃ²ng cho trÆ°á»ng há»£p xáº¥u nháº¥t.

### Unchecked Exceptions (Ngoáº¡i lá»‡ KhÃ´ng báº¯t buá»™c Kiá»ƒm tra)

BÃ¢y giá», hÃ£y Ä‘áº¿n vá»›i loáº¡i ngoáº¡i lá»‡ mÃ  Java "dá»… dÃ£i" hÆ¡n nhiá»u.

1.  **ChÃºng lÃ  gÃ¬?**
    *   ÄÃ¢y lÃ  nhá»¯ng "sá»± cá»‘" mÃ  Java nghÄ© ráº±ng *báº¡n hoÃ n toÃ n cÃ³ thá»ƒ trÃ¡nh Ä‘Æ°á»£c* náº¿u báº¡n viáº¿t code cáº©n tháº­n vÃ  Ä‘Ãºng cÃ¡ch.
    *   ChÃºng thÆ°á»ng xáº£y ra do *lá»—i láº­p trÃ¬nh* (bugs) trong chÃ­nh code cá»§a báº¡n.

2.  **Java xá»­ lÃ½ tháº¿ nÃ o?**
    *   ÄÃ¢y lÃ  Ä‘iá»ƒm khÃ¡c biá»‡t lá»›n! TrÃ¬nh biÃªn dá»‹ch Java *khÃ´ng báº¯t buá»™c báº¡n* pháº£i xá»­ lÃ½ nhá»¯ng ngoáº¡i lá»‡ nÃ y báº±ng `try-catch` hay `throws`.
    *   NÃ³ sáº½ khÃ´ng bÃ¡o lá»—i khi báº¡n biÃªn dá»‹ch code. NÃ³ giá»‘ng nhÆ° nÃ³i: "á»ª thÃ¬, báº¡n cá»© lÃ m Ä‘i. Náº¿u cÃ³ lá»—i, chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n sáº½ bá»‹ 'sáº­p' khi cháº¡y thÃ´i!"
    *   Nhá»¯ng ngoáº¡i lá»‡ nÃ y thÆ°á»ng káº¿ thá»«a tá»« lá»›p `RuntimeException`.

3.  **VÃ­ dá»¥ nÃ¨:**
    *   `NullPointerException` (khi báº¡n cá»‘ gáº¯ng sá»­ dá»¥ng má»™t Ä‘á»‘i tÆ°á»£ng mÃ  nÃ³ Ä‘ang "trá»‘ng rá»—ng" - null)
    *   `ArrayIndexOutOfBoundsException` (khi báº¡n cá»‘ gáº¯ng truy cáº­p má»™t pháº§n tá»­ ngoÃ i pháº¡m vi cá»§a máº£ng)
    *   `ArithmeticException` (khi báº¡n cá»‘ gáº¯ng chia má»™t sá»‘ cho 0)

    ```java
    public class NgoaiLeKhongKiemTraViDu {
        public static void main(String[] args) {
            String ten = null; // Biáº¿n nÃ y Ä‘ang rá»—ng!

            // DÃ²ng nÃ y sáº½ gÃ¢y NullPointerException khi cháº¡y!
            // NhÆ°ng trÃ¬nh biÃªn dá»‹ch KHÃ”NG há» bÃ¡o lá»—i lÃºc biÃªn dá»‹ch!
            // System.out.println(ten.length());

            int[] so = {1, 2, 3};

            // DÃ²ng nÃ y sáº½ gÃ¢y ArrayIndexOutOfBoundsException khi cháº¡y!
            // TrÃ¬nh biÃªn dá»‹ch cÅ©ng KHÃ”NG bÃ¡o lá»—i!
            // System.out.println(so[5]);

            // DÃ²ng nÃ y sáº½ gÃ¢y ArithmeticException khi cháº¡y!
            // TrÃ¬nh biÃªn dá»‹ch váº«n KHÃ”NG bÃ¡o lá»—i!
            int ketQua = 10 / 0;
            System.out.println(ketQua); // DÃ²ng nÃ y sáº½ khÃ´ng bao giá» Ä‘Æ°á»£c cháº¡y náº¿u lá»—i xáº£y ra trÆ°á»›c Ä‘Ã³
        }
    }
    ```
    Báº¡n tháº¥y khÃ´ng? TrÃ¬nh biÃªn dá»‹ch hoÃ n toÃ n "im láº·ng" vá» nhá»¯ng dÃ²ng code cÃ³ thá»ƒ gÃ¢y lá»—i trÃªn. NhÆ°ng khi báº¡n *cháº¡y* chÆ°Æ¡ng trÃ¬nh, *BÃ™M*! ChÆ°Æ¡ng trÃ¬nh sáº½ dá»«ng Ä‘á»™t ngá»™t vÃ  hiá»ƒn thá»‹ má»™t thÃ´ng bÃ¡o lá»—i khÃ³ chá»‹u.

### TÃ³m láº¡i, sá»± khÃ¡c biá»‡t lá»›n nháº¥t lÃ  gÃ¬?

*   **Checked Exceptions (Báº¯t buá»™c Kiá»ƒm tra):** LÃ  nhá»¯ng sá»± cá»‘ mÃ  trÃ¬nh biÃªn dá»‹ch *báº¯t báº¡n pháº£i lÃªn káº¿ hoáº¡ch xá»­ lÃ½*. ChÃºng thÆ°á»ng do cÃ¡c yáº¿u tá»‘ *bÃªn ngoÃ i* chÆ°Æ¡ng trÃ¬nh.
*   **Unchecked Exceptions (KhÃ´ng báº¯t buá»™c Kiá»ƒm tra):** LÃ  nhá»¯ng sá»± cá»‘ mÃ  trÃ¬nh biÃªn dá»‹ch *khÃ´ng quan tÃ¢m*. ChÃºng thÆ°á»ng do *lá»—i cá»§a láº­p trÃ¬nh viÃªn* vÃ  sáº½ lÃ m chÆ°Æ¡ng trÃ¬nh "sáº­p" khi cháº¡y.

NÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n:
*   **Checked:** TrÃ¬nh biÃªn dá»‹ch *buá»™c báº¡n* pháº£i xá»­ lÃ½ (`try-catch` hoáº·c `throws`).
*   **Unchecked:** TrÃ¬nh biÃªn dá»‹ch *khÃ´ng buá»™c báº¡n* xá»­ lÃ½, nhÆ°ng náº¿u xáº£y ra thÃ¬ chÆ°Æ¡ng trÃ¬nh sáº½ *dá»«ng Ä‘á»™t ngá»™t* khi cháº¡y.

Hy vá»ng bÃ¢y giá» báº¡n Ä‘Ã£ tháº¥y rÃµ sá»± khÃ¡c biá»‡t rá»“i nhÃ©! Cá»© tá»« tá»« mÃ  thá»±c hÃ nh, báº¡n sáº½ "lÃ m chá»§" Ä‘Æ°á»£c chÃºng thÃ´i!

    HÃ£y tÆ°á»Ÿng tÆ°á»£ng chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n Ä‘ang cháº¡y ngon Æ¡, má»i thá»© cá»© tháº¿ mÃ  tiáº¿n lÃªn. NhÆ°ng bá»—ng dÆ°ng, cÃ³ má»™t *sá»± cá»‘* báº¥t ngá» xáº£y ra! NÃ³ lÃ m cho chÆ°Æ¡ng trÃ¬nh khÃ´ng thá»ƒ cháº¡y tiáº¿p nhÆ° bÃ¬nh thÆ°á»ng Ä‘Æ°á»£c ná»¯a. CÃ¡i *sá»± cá»‘* Ä‘Ã³ chÃ­nh lÃ  má»™t **ngoáº¡i lá»‡** (exception).

VÃ  báº¡n biáº¿t khÃ´ng? CÃ³ *hai loáº¡i* ngoáº¡i lá»‡ chÃ­nh mÃ  chÃºng ta cáº§n biáº¿t Ä‘áº¥y!

    1. NÃ y báº¡n! CÃ³ nhá»¯ng lÃºc Java biáº¿t trÆ°á»›c lÃ  "á»«m, cÃ³ thá»ƒ cÃ³ chuyá»‡n khÃ´ng hay xáº£y ra Ä‘Ã³ nha!". VÃ  khi Ä‘iá»u Ä‘Ã³ xáº£y ra, Java muá»‘n báº¡n pháº£i chuáº©n bá»‹ sáºµn sÃ ng.

ÄÃ¢y chÃ­nh lÃ  lÃºc cÃ¡c **checked exceptions** xuáº¥t hiá»‡n.

TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y: Báº¡n Ä‘ang viáº¿t code vÃ  muá»‘n lÃ m má»™t viá»‡c gÃ¬ Ä‘Ã³ mÃ  cÃ³ *nguy cÆ¡* tháº¥t báº¡i (vÃ­ dá»¥: Ä‘á»c má»™t file mÃ  cÃ³ thá»ƒ file Ä‘Ã³ khÃ´ng tá»“n táº¡i, hoáº·c káº¿t ná»‘i máº¡ng bá»‹ Ä‘á»©t).

Java sáº½ nÃ³i: "NÃ y, báº¡n Æ¡i! CÃ¡i hÃ nh Ä‘á»™ng nÃ y cÃ³ thá»ƒ nÃ©m ra má»™t 'exception' Ä‘áº·c biá»‡t Ä‘Ã³ nha. TÃ´i gá»i nÃ³ lÃ  'checked exception'. Báº¡n *pháº£i* xá»­ lÃ½ nÃ³ Ä‘i!"

NÃ³i cÃ¡ch khÃ¡c, trÃ¬nh biÃªn dá»‹ch (compiler) sáº½ *kiá»ƒm tra* báº¡n. Náº¿u báº¡n khÃ´ng xá»­ lÃ½, nÃ³ sáº½ *la lÃ ng* (bÃ¡o lá»—i) vÃ  khÃ´ng cho code cá»§a báº¡n cháº¡y Ä‘Ã¢u.

CÃ³ hai cÃ¡ch Ä‘á»ƒ báº¡n "lÃ m hÃ i lÃ²ng" trÃ¬nh biÃªn dá»‹ch khi gáº·p má»™t checked exception:

1.  **Báº¯t láº¥y nÃ³ (Catch it!):**
    Báº¡n dÃ¹ng `try-catch` Ä‘á»ƒ xá»­ lÃ½ ngay táº¡i chá»—. Giá»‘ng nhÆ° báº¡n tá»± mÃ¬nh giáº£i quyáº¿t váº¥n Ä‘á» váº­y.

    ```java
    try {
        // Code cÃ³ thá»ƒ nÃ©m ra checked exception
        // VÃ­ dá»¥: Ä‘á»c file
        java.io.FileReader reader = new java.io.FileReader("myFile.txt");
        // ... lÃ m gÃ¬ Ä‘Ã³ vá»›i reader
    } catch (java.io.FileNotFoundException ex) {
        // Oops! KhÃ´ng tÃ¬m tháº¥y file rá»“i!
        System.out.println("KhÃ´ng tÃ¬m tháº¥y file Ä‘Ã¢u nha: " + ex.getMessage());
        // Hoáº·c lÃ m gÃ¬ Ä‘Ã³ khÃ¡c Ä‘á»ƒ phá»¥c há»“i
    }
    ```
    á» Ä‘Ã¢y, `FileNotFoundException` lÃ  má»™t checked exception. TrÃ¬nh biÃªn dá»‹ch sáº½ báº¯t báº¡n pháº£i cÃ³ `try-catch` hoáº·c `throws` nÃ³.

2.  **Khai bÃ¡o nÃ³ (Declare it!):**
    Báº¡n nÃ³i vá»›i Java ráº±ng: "ÄÆ°á»£c thÃ´i, tÃ´i biáº¿t hÃ nh Ä‘á»™ng nÃ y cÃ³ thá»ƒ nÃ©m ra exception Ä‘Ã³. NhÆ°ng tÃ´i *khÃ´ng muá»‘n* xá»­ lÃ½ nÃ³ á»Ÿ Ä‘Ã¢y. TÃ´i sáº½ 'nÃ©m' nÃ³ cho phÆ°Æ¡ng thá»©c nÃ o Ä‘Ã£ gá»i tÃ´i xá»­ lÃ½!"

    Báº¡n lÃ m Ä‘iá»u nÃ y báº±ng cÃ¡ch thÃªm tá»« khÃ³a `throws` vÃ o chá»¯ kÃ½ cá»§a phÆ°Æ¡ng thá»©c.

    ```java
    public void readFile() throws java.io.FileNotFoundException {
        // Code cÃ³ thá»ƒ nÃ©m ra checked exception
        // VÃ­ dá»¥: Ä‘á»c file
        java.io.FileReader reader = new java.io.FileReader("myFile.txt");
        // ... lÃ m gÃ¬ Ä‘Ã³ vá»›i reader
    }
    ```
    BÃ¢y giá», báº¥t ká»³ phÆ°Æ¡ng thá»©c nÃ o gá»i `readFile()` láº¡i pháº£i Ä‘á»‘i máº·t vá»›i `FileNotFoundException` vÃ  tá»± nÃ³ pháº£i `catch` hoáº·c `throws` tiáº¿p. Cá»© tháº¿, quáº£ bÃ³ng trÃ¡ch nhiá»‡m Ä‘Æ°á»£c chuyá»n Ä‘i!

**TÃ³m láº¡i:**
*   **Checked exceptions** lÃ  nhá»¯ng "cáº£nh bÃ¡o báº¯t buá»™c" tá»« trÃ¬nh biÃªn dá»‹ch.
*   Báº¡n *pháº£i* xá»­ lÃ½ chÃºng báº±ng `try-catch` hoáº·c `throws`.
*   ChÃºng giÃºp code cá»§a báº¡n máº¡nh máº½ hÆ¡n, vÃ¬ báº¡n buá»™c pháº£i nghÄ© Ä‘áº¿n nhá»¯ng Ä‘iá»u cÃ³ thá»ƒ Ä‘i sai hÆ°á»›ng.
    2. Ngoáº¡i lá»‡ khÃ´ng Ä‘Æ°á»£c kiá»ƒm tra

    NÃ y, máº¥y cÃ¡i lá»—i (exception) nÃ y khÃ´ng pháº£i cá»© xuáº¥t hiá»‡n lung tung Ä‘Ã¢u nhÃ©! ChÃºng nÃ³ Ä‘Æ°á»£c tá»• chá»©c cá»±c ká»³ bÃ i báº£n luÃ´n Ä‘áº¥y. Giá»‘ng nhÆ° má»™t cÃ¡i cÃ¢y gia pháº£ lá»›n váº­y.

Váº­y thÃ¬, lÃ m sao mÃ  cÃ¡c loáº¡i lá»—i nÃ y láº¡i liÃªn quan Ä‘áº¿n nhau nhá»‰? Ã€, chÃºng cÃ³ má»™t cáº¥u trÃºc phÃ¢n cáº¥p (hierarchical structure) rÃµ rÃ ng.

CÃ¹ng xem cÃ¡i 'cÃ¢y gia pháº£' cá»§a chÃºng trÃ´ng nhÆ° tháº¿ nÃ o á»Ÿ dÆ°á»›i Ä‘Ã¢y nhÃ©:

    ![Screenshot](images/CheckedVsUncheckedException.png)

    CÃ³ nhá»¯ng loáº¡i ngoáº¡i lá»‡ Ä‘áº·c biá»‡t mÃ  Java *kiá»ƒm tra* cho báº¡n ngay tá»« lÃºc báº¡n biÃªn dá»‹ch code. ChÃºng ta gá»i chÃºng lÃ  **checked exceptions** (ngoáº¡i lá»‡ Ä‘Æ°á»£c kiá»ƒm tra).

Náº¿u báº¡n viáº¿t code bÃªn trong má»™t phÆ°Æ¡ng thá»©c mÃ  *cÃ³ kháº£ nÄƒng* nÃ©m ra má»™t **checked exception** nÃ y, thÃ¬ Java sáº½ khÃ´ng cho phÃ©p báº¡n biÃªn dá»‹ch code Ä‘Ã¢u! NÃ³ sáº½ báº¯t báº¡n pháº£i lÃ m Má»˜T trong HAI Ä‘iá»u sau:

1.  Báº¡n pháº£i 'báº¯t' vÃ  'xá»­ lÃ½' cÃ¡i ngoáº¡i lá»‡ Ä‘Ã³ ngay táº¡i chá»—. Äá»ƒ lÃ m Ä‘iá»u nÃ y, báº¡n sáº½ dÃ¹ng khá»‘i **`try/catch`**.
2.  Hoáº·c lÃ , báº¡n pháº£i 'khai bÃ¡o' rÃµ rÃ ng á»Ÿ pháº§n 'chá»¯ kÃ½' cá»§a phÆ°Æ¡ng thá»©c ráº±ng 'ÃŠ, phÆ°Æ¡ng thá»©c nÃ y cÃ³ thá»ƒ nÃ©m ra má»™t ngoáº¡i lá»‡ kiá»ƒu nÃ y Ä‘áº¥y nhÃ©!'. Báº¡n lÃ m Ä‘iá»u nÃ y báº±ng cÃ¡ch thÃªm tá»« khÃ³a **`throws`** vÃ o sau tÃªn phÆ°Æ¡ng thá»©c.

    Okay, váº­y nhá»¯ng *checked exception* phá»• biáº¿n mÃ  báº¡n sáº½ gáº·p lÃ  gÃ¬? CÃ¹ng xem má»™t vÃ i cÃ¡i tÃªn 'ná»•i báº­t' nhÃ©:

    1. Báº¡n Ä‘Ã£ bao giá» thá»­ má»Ÿ má»™t cuá»‘n sÃ¡ch mÃ  nÃ³ khÃ´ng cÃ³ á»Ÿ Ä‘Ã³ chÆ°a? Hay cá»‘ gáº¯ng ghi chÃº vÃ o má»™t trang giáº¥y Ä‘Ã£ Ä‘áº§y rá»“i?

Trong tháº¿ giá»›i láº­p trÃ¬nh, chÃºng ta thÆ°á»ng xuyÃªn cáº§n "Ä‘á»c" (input) vÃ  "ghi" (output) dá»¯ liá»‡u. VÃ­ dá»¥, Ä‘á»c má»™t file tá»« á»• cá»©ng, hay gá»­i dá»¯ liá»‡u qua máº¡ng.

NhÆ°ng Ä‘Ã´i khi, má»i thá»© khÃ´ng suÃ´n sáº». File báº¡n muá»‘n Ä‘á»c cÃ³ thá»ƒ khÃ´ng tá»“n táº¡i. Hoáº·c báº¡n khÃ´ng cÃ³ quyá»n ghi vÃ o má»™t thÆ° má»¥c nÃ o Ä‘Ã³. Hoáº·c káº¿t ná»‘i máº¡ng bá»‹ Ä‘á»©t.

Khi nhá»¯ng sá»± cá»‘ vá» "Ä‘áº§u vÃ o/Ä‘áº§u ra" (Input/Output) nÃ y xáº£y ra, Java sáº½ "nÃ©m" ra má»™t tÃ­n hiá»‡u bÃ¡o Ä‘á»™ng Ä‘áº·c biá»‡t: chÃ­nh lÃ  `IOException`!

NÃ³ giá»‘ng nhÆ° Java Ä‘ang nÃ³i: "NÃ y, cÃ³ váº¥n Ä‘á» vá»›i viá»‡c I/O rá»“i Ä‘Ã³! Báº¡n cáº§n pháº£i chÃº Ã½!"

VÃ  Ä‘Ã¢y lÃ  Ä‘iá»ƒm Ä‘áº·c biá»‡t cá»§a `IOException`: nÃ³ lÃ  má»™t "checked exception" (ngoáº¡i lá»‡ Ä‘Æ°á»£c kiá»ƒm tra). Äiá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ  trÃ¬nh biÃªn dá»‹ch (compiler) sáº½ báº¯t báº¡n pháº£i xá»­ lÃ½ nÃ³. Báº¡n khÃ´ng thá»ƒ "lá» Ä‘i" Ä‘Æ°á»£c Ä‘Ã¢u! Báº¡n pháº£i chuáº©n bá»‹ má»™t káº¿ hoáº¡ch dá»± phÃ²ng, hoáº·c lÃ  dÃ¹ng `try-catch` Ä‘á»ƒ "báº¯t" nÃ³, hoáº·c lÃ  dÃ¹ng `throws` Ä‘á»ƒ "khai bÃ¡o" ráº±ng phÆ°Æ¡ng thá»©c cá»§a báº¡n cÃ³ thá»ƒ gÃ¢y ra lá»—i nÃ y.
    2. á»i giá»i Æ¡i! Báº¡n vá»«a gáº·p pháº£i `FileNotFoundException`!

CÃ¡i Ä‘Ã³ lÃ  cÃ¡i gÃ¬ váº­y?

Ã€, hÃ£y tÆ°á»Ÿng tÆ°á»£ng chÆ°Æ¡ng trÃ¬nh Java cá»§a báº¡n giá»‘ng nhÆ° má»™t thÃ¡m tá»­ nhá». NÃ³ nháº­n Ä‘Æ°á»£c má»™t nhiá»‡m vá»¥: "HÃ£y Ä‘i tÃ¬m tá»‡p cÃ³ tÃªn `myImportantData.txt`!"

Tháº¿ lÃ , chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n báº¯t Ä‘áº§u tÃ¬m kiáº¿m... nÃ³ kiá»ƒm tra trÃªn bÃ n, nhÃ¬n xuá»‘ng gáº§m giÆ°á»ng, tháº­m chÃ­ cÃ²n ngÃ³ vÃ o tá»§ quáº§n Ã¡o. NhÆ°ng báº¡n Ä‘oÃ¡n xem?

KhÃ´ng cÃ³ tá»‡p nÃ o á»Ÿ Ä‘Ã³ cáº£! ğŸ˜±

ÄÃ³ chÃ­nh xÃ¡c lÃ  Ã½ nghÄ©a cá»§a `FileNotFoundException`. ChÆ°Æ¡ng trÃ¬nh cá»§a báº¡n Ä‘Ã£ *cá»‘ gáº¯ng* má»Ÿ má»™t tá»‡p, nhÆ°ng nÃ³ khÃ´ng thá»ƒ tÃ¬m tháº¥y tá»‡p Ä‘Ã³ á»Ÿ báº¥t cá»© Ä‘Ã¢u. Giá»‘ng nhÆ° báº¡n cá»‘ Ä‘á»c má»™t cuá»‘n sÃ¡ch khÃ´ng há» tá»“n táº¡i trÃªn giÃ¡ sÃ¡ch cá»§a mÃ¬nh váº­y.

**Khi nÃ o thÃ¬ Ä‘iá»u nÃ y xáº£y ra?**

*   Báº¡n gÃµ sai tÃªn tá»‡p. (Ã”i, `myImpoortantData.txt` thay vÃ¬ `myImportantData.txt`!)
*   Tá»‡p náº±m á»Ÿ má»™t thÆ° má»¥c khÃ¡c so vá»›i nÆ¡i chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n Ä‘ang tÃ¬m kiáº¿m.
*   Ai Ä‘Ã³ Ä‘Ã£ di chuyá»ƒn hoáº·c xÃ³a tá»‡p.

**Báº¡n nÃªn lÃ m gÃ¬?**

Äá»«ng hoáº£ng sá»£! ÄÃ¢y lÃ  lá»—i ráº¥t phá»• biáº¿n.

1.  **Kiá»ƒm tra ká»¹ láº¡i Ä‘Æ°á»ng dáº«n vÃ  tÃªn tá»‡p.** Má»i thá»© Ä‘Ã£ Ä‘Æ°á»£c gÃµ chÃ­nh xÃ¡c chÆ°a? Tá»‡p Ä‘Ã³ cÃ³ thá»±c sá»± náº±m trong thÆ° má»¥c Ä‘Ã³ khÃ´ng?
2.  **NghÄ© xem chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n Ä‘ang cháº¡y á»Ÿ Ä‘Ã¢u.** ÄÃ´i khi, chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n mong Ä‘á»£i cÃ¡c tá»‡p pháº£i á»Ÿ má»™t vá»‹ trÃ­ cá»¥ thá»ƒ so vá»›i chÃ­nh nÃ³.
3.  **Báº¯t lá»—i Ä‘Ã³!** Báº¡n cÃ³ thá»ƒ nÃ³i vá»›i Java ráº±ng: "NÃ y, náº¿u báº¡n *khÃ´ng thá»ƒ* tÃ¬m tháº¥y tá»‡p, Ä‘á»«ng cÃ³ bá»‹ lá»—i nhÃ©! HÃ£y lÃ m má»™t viá»‡c khÃ¡c thay vÃ o Ä‘Ã³, nhÆ° in ra thÃ´ng bÃ¡o lá»—i hoáº·c yÃªu cáº§u ngÆ°á»i dÃ¹ng nháº­p tÃªn tá»‡p má»›i." ÄÃ¢y lÃ  lÃºc cÃ¡c khá»‘i `try-catch` phÃ¡t huy tÃ¡c dá»¥ng.

```java
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.io.FileNotFoundException; // Äá»«ng quÃªn anh chÃ ng nÃ y nhÃ©!

public class FileFun {
    public static void main(String[] args) {
        try {
            // ChÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cá»‘ gáº¯ng má»Ÿ má»™t tá»‡p á»Ÿ Ä‘Ã¢y
            FileReader reader = new FileReader("nonExistentFile.txt");
            // Náº¿u thÃ nh cÃ´ng, nÃ³ sáº½ lÃ m gÃ¬ Ä‘Ã³ vá»›i tá»‡p
            System.out.println("ÄÃ£ tÃ¬m tháº¥y vÃ  má»Ÿ tá»‡p!");
            reader.close(); // Äá»«ng quÃªn Ä‘Ã³ng láº¡i nhÃ©!
        } catch (FileNotFoundException ex) {
            // á»I CHÃ€! KhÃ´ng tÃ¬m tháº¥y tá»‡p! Giá» sao Ä‘Ã¢y?
            System.out.println("Ráº¥t tiáº¿c, khÃ´ng tÃ¬m tháº¥y tá»‡p Ä‘Ã³!");
            System.out.println("Báº¡n cÃ³ cháº¯c tÃªn tá»‡p vÃ  Ä‘Æ°á»ng dáº«n Ä‘Ãºng khÃ´ng?");
            // Báº¡n cÃ³ thá»ƒ muá»‘n ghi láº¡i lá»—i hoáº·c há»i ngÆ°á»i dÃ¹ng láº¡i
            ex.printStackTrace(); // Tá»‘t cho viá»‡c gá»¡ lá»—i Ä‘Ã³!
        } catch (IOException ex) {
            // CÃ¡i nÃ y báº¯t cÃ¡c lá»—i nháº­p/xuáº¥t chung khÃ¡c
            System.out.println("Xáº£y ra lá»—i I/O khÃ¡c.");
            ex.printStackTrace();
        }
    }
}
```

Váº­y Ä‘Ã³, láº§n tá»›i khi báº¡n tháº¥y `FileNotFoundException`, báº¡n sáº½ biáº¿t chÃ­nh xÃ¡c chuyá»‡n gÃ¬ Ä‘ang xáº£y ra vÃ  cÃ¡ch xá»­ lÃ½ nÃ³ nhÆ° má»™t chuyÃªn gia!
    3. **ClassNotFoundException**

Nghe cÃ¡i tÃªn hÆ¡i "láº±ng nháº±ng" Ä‘Ãºng khÃ´ng? Äá»«ng lo!
NÃ³ chá»‰ Ä‘Æ¡n giáº£n lÃ  má»™t thÃ´ng bÃ¡o lá»—i mÃ  Java gá»­i cho báº¡n, nÃ³i ráº±ng: "Æ  kÃ¬a! Tá»› tÃ¬m mÃ£i mÃ  khÃ´ng tháº¥y cÃ¡i `class` mÃ  báº¡n muá»‘n dÃ¹ng Ä‘Ã¢u cáº£!"

Cá»© hÃ¬nh dung tháº¿ nÃ y nhÃ©:
Báº¡n báº£o Java: "NÃ y Java, cháº¡y giÃºp tá»› cÃ¡i chÆ°Æ¡ng trÃ¬nh nÃ y Ä‘i. Ã€ mÃ  nhá»› dÃ¹ng cÃ¡i `class` tÃªn lÃ  `MySuperClass` nhÃ©!"

Tháº¿ lÃ  Java báº¯t Ä‘áº§u Ä‘i tÃ¬m cÃ¡i `MySuperClass` Ä‘Ã³. NÃ³ lá»¥c tung táº¥t cáº£ cÃ¡c chá»— mÃ  nÃ³ nghÄ© ráº±ng cÃ³ thá»ƒ chá»©a `class` Ä‘Ã³ (chÃºng ta gá»i lÃ  `classpath` Ä‘áº¥y).

NhÆ°ng... Ã´i thÃ´i! Java tÃ¬m mÃ£i, tÃ¬m mÃ£i... mÃ  KHÃ”NG THáº¤Y `MySuperClass` Ä‘Ã¢u cáº£!
NÃ³ khÃ´ng biáº¿t pháº£i lÃ m sao ná»¯a, nÃªn Ä‘Ã nh "Ä‘áº§u hÃ ng" vÃ  nÃ©m ra má»™t cÃ¡i lá»—i (exception) cÃ³ tÃªn lÃ  **ClassNotFoundException** Ä‘á»ƒ bÃ¡o cho báº¡n biáº¿t ráº±ng: "Tá»› chá»‹u rá»“i, khÃ´ng tÃ¬m tháº¥y nÃ³!"

**Váº­y khi nÃ o thÃ¬ báº¡n thÆ°á»ng gáº·p lá»—i "ClassNotFoundException" nÃ y?**
*   Khi báº¡n muá»‘n dÃ¹ng má»™t `class` nÃ o Ä‘Ã³ nhÆ°ng láº¡i quÃªn chÆ°a thÃªm thÆ° viá»‡n (file `.jar` cháº³ng háº¡n) chá»©a `class` Ä‘Ã³ vÃ o dá»± Ã¡n cá»§a mÃ¬nh. Java khÃ´ng biáº¿t pháº£i "nháº·t" nÃ³ á»Ÿ Ä‘Ã¢u ra!
*   Hoáº·c cÃ³ thá»ƒ báº¡n gÃµ sai tÃªn `class` Ä‘Ã³ chÄƒng? (VÃ­ dá»¥: báº¡n muá»‘n dÃ¹ng `MySuperClass` nhÆ°ng láº¡i gÃµ nháº§m thÃ nh `MySuprClass`). TÃªn pháº£i Ä‘Ãºng y chang nhÃ©!
*   Hoáº·c Java khÃ´ng Ä‘Æ°á»£c "chá»‰ dáº«n" Ä‘Ãºng Ä‘Æ°á»ng Ä‘i Ä‘á»ƒ tÃ¬m tháº¥y cÃ¡i `class` Ä‘Ã³.

NÃ³i tÃ³m láº¡i, khi tháº¥y lá»—i nÃ y, hÃ£y nghÄ© ngay Ä‘áº¿n viá»‡c: "Ã€, Java Ä‘ang khÃ´ng tÃ¬m tháº¥y má»™t `class` nÃ o Ä‘Ã³ mÃ  mÃ¬nh muá»‘n dÃ¹ng!" VÃ  viá»‡c cá»§a báº¡n lÃ  giÃºp Java tÃ¬m tháº¥y nÃ³!
    4. NÃ y, báº¡n Ä‘Ã£ nghe Ä‘áº¿n `InterruptedException` bao giá» chÆ°a? Nghe tÃªn cÃ³ váº» hÆ¡i 'nguy hiá»ƒm' nhá»‰?

Äá»«ng lo láº¯ng! Thá»±c ra, nÃ³ chá»‰ lÃ  cÃ¡ch Java nháº¹ nhÃ ng 'thÃ´ng bÃ¡o' cho luá»“ng (thread) cá»§a báº¡n ráº±ng: "ÃŠ, cÃ³ ai Ä‘Ã³ muá»‘n báº¡n dá»«ng cÃ´ng viá»‡c Ä‘ang lÃ m Ä‘Ã³!"

HÃ£y hÃ¬nh dung tháº¿ nÃ y nhÃ©: Luá»“ng cá»§a báº¡n Ä‘ang 'ngá»§ nÆ°á»›ng' má»™t chÃºt (kiá»ƒu nhÆ° báº¡n gá»i `Thread.sleep()` áº¥y) hoáº·c Ä‘ang kiÃªn nháº«n 'chá» Ä‘á»£i' Ä‘iá»u gÃ¬ Ä‘Ã³ xáº£y ra (vÃ­ dá»¥, khi dÃ¹ng `Object.wait()`). Má»i thá»© Ä‘ang ráº¥t Ãªm Ä‘á»m.

Rá»“i 'bá»—ng dÆ°ng', má»™t luá»“ng khÃ¡c 'nháº£y vÃ o' vÃ  nÃ³i: "NÃ y, dáº­y Ä‘i! Dá»«ng láº¡i ngay!". CÃ¡i tÃ­n hiá»‡u 'dá»«ng láº¡i' nÃ y chÃ­nh lÃ  má»™t *interrupt* (ngáº¯t).

VÃ  khi luá»“ng cá»§a báº¡n nháº­n Ä‘Æ°á»£c tÃ­n hiá»‡u ngáº¯t Ä‘Ã³ trong lÃºc Ä‘ang ngá»§ hay chá» Ä‘á»£i, thÃ¬... BÃ™M! Java sáº½ 'quáº³ng' cho nÃ³ má»™t `InterruptedException`.

NÃ³ giá»‘ng nhÆ° má»™t cÃº 'Ä‘Ã¡nh thá»©c' nháº¹ nhÃ ng váº­y Ä‘Ã³, nhÆ°ng láº¡i dÆ°á»›i dáº¡ng má»™t ngoáº¡i lá»‡ (exception).

Váº­y luá»“ng cá»§a báº¡n nÃªn lÃ m gÃ¬ khi nháº­n Ä‘Æ°á»£c cÃ¡i nÃ y? Ã€, Ä‘Ã¢y lÃ  má»™t tÃ­n hiá»‡u Ä‘á»ƒ báº¡n 'dá»n dáº¹p' má»i thá»© vÃ  cÃ³ thá»ƒ káº¿t thÃºc cÃ´ng viá»‡c Ä‘ang lÃ m. ThÆ°á»ng thÃ¬, báº¡n sáº½ 'báº¯t' (catch) ngoáº¡i lá»‡ nÃ y vÃ  sau Ä‘Ã³ quyáº¿t Ä‘á»‹nh xem nÃªn thoÃ¡t ra hay dá»«ng tÃ¡c vá»¥ hiá»‡n táº¡i má»™t cÃ¡ch 'tá»­ táº¿' nháº¥t.
    5. NÃ y báº¡n, nhá»› máº¥y vá»¥ "cÃ³ gÃ¬ Ä‘Ã³ khÃ´ng á»•n" mÃ  chÃºng ta hay nÃ³i khÃ´ng? Kiá»ƒu nhÆ° khi chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n gáº·p pháº£i má»™t Ä‘iá»u báº¥t ngá» áº¥y.

Giá» tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©: báº¡n Ä‘ang viáº¿t má»™t chÆ°Æ¡ng trÃ¬nh siÃªu xá»‹n, vÃ  nÃ³ cáº§n "nÃ³i chuyá»‡n" vá»›i má»™t anh báº¡n quan trá»ng tÃªn lÃ  **cÆ¡ sá»Ÿ dá»¯ liá»‡u** (database). ChÆ°Æ¡ng trÃ¬nh cá»§a báº¡n sáº½ gá»­i cÃ¡c cÃ¢u lá»‡nh SQL (nhÆ° lÃ  "hÃ£y láº¥y dá»¯ liá»‡u nÃ y cho tÃ´i" hoáº·c "hÃ£y lÆ°u cÃ¡i kia vÃ o Ä‘Ã¢y") Ä‘á»ƒ lÃ m viá»‡c vá»›i database.

NhÆ°ng mÃ , lá»¡ Ä‘Ã¢u database khÃ´ng nghe mÃ¡y thÃ¬ sao? Hoáº·c nÃ³ hiá»ƒu sai Ã½ báº¡n? Hoáº·c báº¡n gá»­i má»™t cÃ¢u lá»‡nh SQL mÃ  database khÃ´ng thá»ƒ nÃ o hiá»ƒu Ä‘Æ°á»£c?

LÃºc Ä‘Ã³, má»™t "tÃ­n hiá»‡u SOS" Ä‘áº·c biá»‡t sáº½ xuáº¥t hiá»‡n, nÃ³ tÃªn lÃ  `SQLException`!

### `SQLException` lÃ  gÃ¬?

ÄÆ¡n giáº£n mÃ  nÃ³i, `SQLException` lÃ  má»™t loáº¡i lá»—i Ä‘áº·c biá»‡t, nÃ³ xuáº¥t hiá»‡n khi cÃ³ **váº¥n Ä‘á» gÃ¬ Ä‘Ã³ xáº£y ra trong quÃ¡ trÃ¬nh chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n lÃ m viá»‡c vá»›i database**. Nghe cÃ¡i tÃªn lÃ  tháº¥y "SQL" vÃ  "Exception" rá»“i Ä‘Ãºng khÃ´ng? NÃ³ chÃ­nh lÃ  "lá»—i ngoáº¡i lá»‡" trong tháº¿ giá»›i SQL vÃ  database Ä‘Ã³.

### Khi nÃ o thÃ¬ báº¡n gáº·p `SQLException`?

CÃ¡i anh chÃ ng nÃ y hay xuáº¥t hiá»‡n láº¯m! Äáº¡i loáº¡i lÃ  cá»© Ä‘á»™ng Ä‘áº¿n database mÃ  cÃ³ gÃ¬ khÃ´ng Æ°ng Ã½ lÃ  y nhÆ° ráº±ng `SQLException` sáº½ gÃµ cá»­a. VÃ­ dá»¥ nhÆ°:

*   **Váº¥n Ä‘á» káº¿t ná»‘i:**
    *   Báº¡n cá»‘ gáº¯ng káº¿t ná»‘i Ä‘áº¿n database, nhÆ°ng láº¡i gÃµ sai máº­t kháº©u.
    *   Database Ä‘ang... ngá»§ quÃªn (server down) hoáº·c mÃ¡y chá»§ khÃ´ng cÃ³ máº¡ng.
    *   Báº¡n cá»‘ gáº¯ng káº¿t ná»‘i Ä‘áº¿n má»™t database mÃ  nÃ³ khÃ´ng há» tá»“n táº¡i á»Ÿ Ä‘á»‹a chá»‰ Ä‘Ã³.
*   **CÃ¢u lá»‡nh SQL bá»‹ lá»—i:**
    *   Báº¡n gá»­i má»™t cÃ¢u lá»‡nh SQL (kiá»ƒu nhÆ° `SELECT * FROM ten_bang;`) nhÆ°ng cÃ¢u lá»‡nh Ä‘Ã³ bá»‹ viáº¿t sai cÃº phÃ¡p. Ã”i, lá»—i chÃ­nh táº£!
    *   Báº¡n cá»‘ gáº¯ng chÃ¨n dá»¯ liá»‡u vÃ o má»™t cá»™t mÃ  dá»¯ liá»‡u Ä‘Ã³ khÃ´ng Ä‘Ãºng kiá»ƒu (vÃ­ dá»¥, báº¡n muá»‘n lÆ°u chá»¯ vÃ o má»™t cá»™t mÃ  database chá»‰ cháº¥p nháº­n sá»‘).
*   **Database "khÃ´ng hiá»ƒu":**
    *   Báº¡n muá»‘n tÃ¬m má»™t cÃ¡i bÃ n (table) trong database nhÆ°ng cÃ¡i bÃ n Ä‘Ã³ láº¡i khÃ´ng há» tá»“n táº¡i.
    *   Báº¡n cá»‘ gáº¯ng xÃ³a má»™t dá»¯ liá»‡u mÃ  nÃ³ khÃ´ng cÃ³ á»Ÿ Ä‘Ã³.

NÃ³i chung, báº¥t cá»© khi nÃ o cÃ³ trá»¥c tráº·c giá»¯a chÆ°Æ¡ng trÃ¬nh Java cá»§a báº¡n vÃ  database, `SQLException` lÃ  cÃ¡ch database "mÃ¡ch" báº¡n ráº±ng "nÃ y, cÃ³ gÃ¬ Ä‘Ã³ khÃ´ng á»•n rá»“i!". VÃ¬ tháº¿, viá»‡c "Ä‘Ã³n tiáº¿p" vÃ  xá»­ lÃ½ nÃ³ tháº­t cáº©n tháº­n lÃ  cá»±c ká»³ quan trá»ng Ä‘á»ƒ chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n khÃ´ng bá»‹ "Ä‘á»©ng hÃ¬nh" giá»¯a chá»«ng.
    6. ChÃ o báº¡n! Báº¡n Ä‘Ã£ bao giá» cá»‘ gáº¯ng "dáº¡y" mÃ¡y tÃ­nh cá»§a mÃ¬nh hiá»ƒu má»™t thá»© gÃ¬ Ä‘Ã³, nhÆ°ng nÃ³ cá»© "Ä‘á»©ng hÃ¬nh" vÃ¬ khÃ´ng thá»ƒ hiá»ƒu Ä‘Æ°á»£c "ngÃ´n ngá»¯" cá»§a báº¡n chÆ°a?

ÄÃ³ chÃ­nh lÃ  lÃºc chÃºng ta gáº·p gá»¡ **`ParseException`**!

NÃ³ lÃ  gÃ¬ Æ°? CÃ¹ng xem nhÃ©:

1.  **`Parse` (PhÃ¢n tÃ­ch/PhÃ¢n tÃ­ch cÃº phÃ¡p)**:
    *   TÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t cÃ´ng thá»©c náº¥u Äƒn. Viá»‡c "parse" chÃ­nh lÃ  báº¡n Ä‘á»c vÃ  cá»‘ gáº¯ng *hiá»ƒu* tá»«ng nguyÃªn liá»‡u, tá»«ng bÆ°á»›c trong cÃ´ng thá»©c Ä‘Ã³.
    *   Báº¡n mong Ä‘á»£i tháº¥y "Ä‘Æ°á»ng", "muá»‘i", "trá»©ng", Ä‘Ãºng khÃ´ng? Chá»© khÃ´ng pháº£i "má»™t nhÃºm Ã¡nh sao" hay "ba thÃ¬a mÃ¢y trá»i"!

2.  **`Exception` (Ngoáº¡i lá»‡)**:
    *   ÄÃ¢y lÃ  khi cÃ³ Ä‘iá»u gÃ¬ Ä‘Ã³ *báº¥t ngá»* xáº£y ra, khiáº¿n chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n khÃ´ng thá»ƒ tiáº¿p tá»¥c cÃ´ng viá»‡c nhÆ° bÃ¬nh thÆ°á»ng.
    *   Giá»‘ng nhÆ° báº¡n Ä‘ang Ä‘á»c cÃ´ng thá»©c, rá»“i bá»—ng dÆ°ng cÃ³ má»™t bÆ°á»›c ghi "bay lÃªn máº·t trÄƒng vÃ  hÃ¡i má»™t quáº£ tÃ¡o". Báº¡n sáº½ thá»‘t lÃªn: "Khoan Ä‘Ã£! CÃ¡i gÃ¬ tháº¿ nÃ y? LÃ m sao mÃ  lÃ m Ä‘Æ°á»£c?"

Váº­y, khi nÃ o thÃ¬ `ParseException` xuáº¥t hiá»‡n?

NÃ³ "nháº£y ra" khi chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n Ä‘ang cá»‘ gáº¯ng **Ä‘á»c vÃ  hiá»ƒu (parse)** má»™t máº©u dá»¯ liá»‡u nÃ o Ä‘Ã³ (vÃ­ dá»¥, má»™t Ä‘oáº¡n vÄƒn báº£n), nhÆ°ng máº©u dá»¯ liá»‡u Ä‘Ã³ láº¡i... *khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng mÃ  chÆ°Æ¡ng trÃ¬nh mong Ä‘á»£i chÃºt nÃ o*!

ChÆ°Æ¡ng trÃ¬nh cá»§a báº¡n sáº½ "kÃªu lÃªn": "á»i giá»i Æ¡i! `ParseException`! TÃ´i khÃ´ng thá»ƒ hiá»ƒu Ä‘Æ°á»£c cÃ¡i nÃ y! NÃ³ khÃ´ng giá»‘ng nhÆ° tÃ´i mong Ä‘á»£i!"

**VÃ­ dá»¥ thá»±c táº¿ siÃªu Ä‘Æ¡n giáº£n:**

Báº¡n muá»‘n biáº¿n má»™t Ä‘oáº¡n vÄƒn báº£n thÃ nh má»™t ngÃ y thÃ¡ng.
Giáº£ sá»­ báº¡n mong Ä‘á»£i Ä‘á»‹nh dáº¡ng "NÄƒm-ThÃ¡ng-NgÃ y" (vÃ­ dá»¥: "2023-10-27").

```java
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

public class MyParsingApp {
    public static void main(String[] args) {
        // ÄÃ¢y lÃ  má»™t "cÃ´ng cá»¥" Ä‘á»ƒ biáº¿n vÄƒn báº£n thÃ nh ngÃ y thÃ¡ng
        // (vÃ  nÃ³ chá»‰ hiá»ƒu Ä‘á»‹nh dáº¡ng "yyyy-MM-dd" thÃ´i nhÃ©!)
        SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");

        String dateText = "HÃ´m nay lÃ  thá»© SÃ¡u"; // ÄÃ¢y KHÃ”NG pháº£i lÃ  má»™t ngÃ y thÃ¡ng theo Ä‘á»‹nh dáº¡ng "yyyy-MM-dd"

        try {
            // Cá»‘ gáº¯ng biáº¿n "HÃ´m nay lÃ  thá»© SÃ¡u" thÃ nh má»™t ngÃ y thÃ¡ng
            Date date = formatter.parse(dateText);
            System.out.println("Tuyá»‡t vá»i! ÄÃ£ biáº¿n Ä‘Æ°á»£c thÃ nh ngÃ y: " + date);
        } catch (ParseException e) {
            // A-ha! NÃ³ Ä‘Ã¢y rá»“i!
            System.out.println("Aargh! Gáº·p `ParseException` rá»“i!");
            System.out.println("ChÆ°Æ¡ng trÃ¬nh nÃ³i: 'TÃ´i khÃ´ng thá»ƒ biáº¿n '" + dateText + "' thÃ nh ngÃ y thÃ¡ng vÃ¬ nÃ³ khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng mÃ  tÃ´i mong Ä‘á»£i!'");
            // e.printStackTrace(); // DÃ²ng nÃ y giÃºp báº¡n tháº¥y chi tiáº¿t lá»—i hÆ¡n trong console
        }
    }
}
```

Khi báº¡n cháº¡y Ä‘oáº¡n code trÃªn, Java sáº½ "la lÃ ng" ngay: "Ngoáº¡i lá»‡ phÃ¢n tÃ­ch cÃº phÃ¡p! `ParseException`! TÃ´i khÃ´ng thá»ƒ biáº¿n "HÃ´m nay lÃ  thá»© SÃ¡u" thÃ nh má»™t ngÃ y thÃ¡ng theo Ä‘á»‹nh dáº¡ng 'yyyy-MM-dd'!"

ÄÃ³, `ParseException` chÃ­nh lÃ  lá»i than phiá»n cá»§a mÃ¡y tÃ­nh khi nÃ³ cá»‘ gáº¯ng "giáº£i mÃ£" má»™t thá»© gÃ¬ Ä‘Ã³, nhÆ°ng láº¡i gáº·p pháº£i má»™t "má»› bÃ²ng bong" khÃ´ng thá»ƒ hiá»ƒu ná»•i! NÃ³ giÃºp báº¡n biáº¿t ráº±ng cÃ³ gÃ¬ Ä‘Ã³ sai sai vá»›i dá»¯ liá»‡u Ä‘áº§u vÃ o cá»§a mÃ¬nh Ä‘Ã³.

    Báº¡n sáºµn sÃ ng chÆ°a? HÃ£y xem vÃ­ dá»¥ nÃ y nhÃ©! Lá»›p dÆ°á»›i Ä‘Ã¢y cÃ³ hai phÆ°Æ¡ng thá»©c. VÃ  báº¡n biáº¿t gÃ¬ khÃ´ng? Cáº£ hai Ä‘á»u 'nÃ©m' ra cÃ¡c ngoáº¡i lá»‡ Ä‘Æ°á»£c kiá»ƒm tra (hay cÃ²n gá»i lÃ  'checked exceptions') Ä‘áº¥y!`FileNotFoundException`NÃ y, khi báº¡n táº¡o má»™t Ä‘á»‘i tÆ°á»£ng `FileInputStream`, nÃ³ cÃ³ thá»ƒ "nÃ©m" ra má»™t sá»‘ lá»—i Ä‘Ã³!

Lá»—i nÃ y thÆ°á»ng xáº£y ra khi nÃ o? Ã€, lÃ  khi báº¡n cá»‘ gáº¯ng truy cáº­p má»™t file Ä‘áº§u vÃ o mÃ ... nÃ³ khÃ´ng há» tá»“n táº¡i trÃªn mÃ¡y tÃ­nh cá»§a báº¡n.

Váº­y lÃ m sao Ä‘á»ƒ "giáº£i quyáº¿t" máº¥y cÃ¡i lá»—i khÃ³ chá»‹u nÃ y Ä‘Ã¢y? Äá»«ng lo, báº¡n cÃ³ hai cÃ¡ch chÃ­nh Ä‘á»ƒ xá»­ lÃ½ chÃºng Ä‘Ã³:

*   **CÃ¡ch 1: DÃ¹ng khá»‘i `try/catch`**. ÄÃ¢y lÃ  cÃ¡ch báº¡n nÃ³i vá»›i Java: "Thá»­ lÃ m cÃ¡i nÃ y xem sao. Náº¿u cÃ³ lá»—i xáº£y ra trong quÃ¡ trÃ¬nh Ä‘Ã³, thÃ¬ hÃ£y 'báº¯t' láº¥y nÃ³ vÃ  lÃ m gÃ¬ Ä‘Ã³ Ä‘á»ƒ xá»­ lÃ½ nÃ³ má»™t cÃ¡ch lá»‹ch sá»±."
*   **CÃ¡ch 2: Khai bÃ¡o tá»« khÃ³a `throws` trong chá»¯ kÃ½ cá»§a phÆ°Æ¡ng thá»©c**. CÃ¡ch nÃ y giá»‘ng nhÆ° báº¡n nÃ³i vá»›i Java: "NÃ y, tÃ´i biáº¿t phÆ°Æ¡ng thá»©c nÃ y cÃ³ thá»ƒ gÃ¢y ra lá»—i Ä‘Ã³, nhÆ°ng tÃ´i sáº½ khÃ´ng xá»­ lÃ½ nÃ³ á»Ÿ Ä‘Ã¢y Ä‘Ã¢u. Ai mÃ  gá»i phÆ°Æ¡ng thá»©c nÃ y cá»§a tÃ´i thÃ¬ ngÆ°á»i Ä‘Ã³ pháº£i tá»± lo liá»‡u cÃ¡ch xá»­ lÃ½ lá»—i nÃ y nhÃ©!"

    ```java
        import java.io.*;

        class MyCheckedExceptions {

            private void methodWithTryCatch() {
                    File file = new File("non_existing_file.txt");
                    try {
                        FileInputStream stream = new FileInputStream(file);
                    } catch (FileNotFoundException e) {
                        e.printStackTrace();
                    }
            }

            private void methodWithThrows() throws FileNotFoundException {
                    File file = new File("non_existing_file.txt");
                    FileInputStream stream = new FileInputStream(file);
            }

        }
    ```

    Ã€, cÃ²n má»™t loáº¡i ngoáº¡i lá»‡ ná»¯a mÃ  trÃ¬nh biÃªn dá»‹ch cá»§a chÃºng ta *khÃ´ng thÃ¨m kiá»ƒm tra* Ä‘Ã¢u nhÃ©!

ChÃºng ta gá»i Ä‘Ã³ lÃ  **ngoáº¡i lá»‡ khÃ´ng kiá»ƒm tra** (Unchecked Exceptions).

Äiá»u nÃ y cÃ³ nghÄ©a lÃ , khi báº¡n viáº¿t code, trÃ¬nh biÃªn dá»‹ch sáº½ khÃ´ng báº¯t báº¡n pháº£i xá»­ lÃ½ chÃºng ngay láº­p tá»©c. NÃ³ cá»© Ä‘á»ƒ Ä‘áº¥y, chá» Ä‘áº¿n khi chÆ°Æ¡ng trÃ¬nh cháº¡y tháº­t sá»± má»›i biáº¿t cÃ³ lá»—i hay khÃ´ng.

Báº¡n cÃ²n nhá»› hai anh chÃ ng `Error` vÃ  `RuntimeException` chá»©? ÄÃºng rá»“i! Táº¥t cáº£ cÃ¡c ngoáº¡i lá»‡ thuá»™c nhÃ³m `Error` vÃ  `RuntimeException` (vÃ  cáº£ nhá»¯ng lá»›p con cá»§a chÃºng ná»¯a) Ä‘á»u lÃ  **ngoáº¡i lá»‡ khÃ´ng kiá»ƒm tra** Ä‘áº¥y!

    DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ i 'ngoáº¡i lá»‡ khÃ´ng kiá»ƒm tra' (unchecked exception) mÃ  báº¡n hay gáº·p nÃ¨:

*   **`NullPointerException`**: á»i giá»i Æ¡i, cÃ¡i nÃ y "ná»•i tiáº¿ng" láº¯m nÃ¨! NÃ³ xáº£y ra khi báº¡n cá»‘ gáº¯ng lÃ m gÃ¬ Ä‘Ã³ vá»›i má»™t thá»© mÃ  nÃ³... khÃ´ng cÃ³ tháº­t. Kiá»ƒu nhÆ° báº¡n cÃ³ má»™t cÃ¡i remote TV, nhÆ°ng cÃ¡i remote Ä‘Ã³ láº¡i Ä‘ang "rá»—ng tuáº¿ch" (`null`) â€“ nÃ³ khÃ´ng trá» Ä‘áº¿n cÃ¡i TV nÃ o cáº£. Xong báº¡n báº¥m nÃºt "tÄƒng Ã¢m lÆ°á»£ng". TV nÃ o mÃ  tÄƒng? BÃ¹m! `NullPointerException` Ä‘Ã³. NÃ³i cÃ¡ch khÃ¡c, báº¡n cÃ³ má»™t biáº¿n, báº¡n nghÄ© nÃ³ Ä‘ang "giá»¯" má»™t Ä‘á»‘i tÆ°á»£ng nÃ o Ä‘Ã³, nhÆ°ng thá»±c ra nÃ³ Ä‘ang "giá»¯" chá»¯ `null`. VÃ  khi báº¡n gá»i má»™t phÆ°Æ¡ng thá»©c (hÃ nh Ä‘á»™ng) trÃªn cÃ¡i `null` Ä‘Ã³, Java sáº½ hÃ©t lÃªn.

*   **`ArrayIndexOutOfBoundsException`**: TÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t cÃ¡i ká»‡ sÃ¡ch, nÃ³ cÃ³ 5 ngÄƒn, Ä‘Æ°á»£c Ä‘Ã¡nh sá»‘ tá»« 0 Ä‘áº¿n 4. RÃµ rÃ ng lÃ  chá»‰ cÃ³ 5 ngÄƒn thÃ´i Ä‘Ãºng khÃ´ng? Tháº¿ mÃ  báº¡n láº¡i cá»‘ gáº¯ng láº¥y quyá»ƒn sÃ¡ch á»Ÿ ngÄƒn sá»‘ 5 (hoáº·c sá»‘ 10, sá»‘ Ã¢m gÃ¬ Ä‘Ã³). Ã”i, ngÄƒn Ä‘Ã³ cÃ³ tá»“n táº¡i Ä‘Ã¢u! Java sáº½ bÃ¡o lá»—i ngay: "Báº¡n Ä‘Ã£ vÆ°á»£t ra ngoÃ i giá»›i háº¡n cá»§a máº£ng rá»“i Ä‘Ã³!" NÃ³i chung, khi báº¡n truy cáº­p vÃ o má»™t vá»‹ trÃ­ (chá»‰ má»¥c - index) trong máº£ng mÃ  vá»‹ trÃ­ Ä‘Ã³ khÃ´ng cÃ³ tháº­t, báº¡n sáº½ gáº·p lá»—i nÃ y.

*   **`ClassCastException`**: CÃ¡i nÃ y hÆ¡i giá»‘ng viá»‡c báº¡n cá»‘ gáº¯ng Ã©p má»™t con chÃ³ thÃ nh con mÃ¨o váº­y. Trong Java, Ä‘Ã´i khi báº¡n cáº§n "Ã©p kiá»ƒu" (cast) má»™t Ä‘á»‘i tÆ°á»£ng tá»« kiá»ƒu nÃ y sang kiá»ƒu khÃ¡c. VÃ­ dá»¥, báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng `Animal` (Äá»™ng váº­t), vÃ  báº¡n biáº¿t cháº¯c ráº±ng nÃ³ thá»±c sá»± lÃ  má»™t `Dog` (ChÃ³), thÃ¬ báº¡n cÃ³ thá»ƒ Ã©p nÃ³ thÃ nh `Dog`. NhÆ°ng náº¿u báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng `Cat` (MÃ¨o), mÃ  báº¡n láº¡i cá»‘ gáº¯ng Ã©p nÃ³ thÃ nh `Dog` (ChÃ³) thÃ¬ sao? Java sáº½ kiá»ƒm tra vÃ  tháº¥y "á»¦a, khÃ´ng Ä‘Æ°á»£c! Con mÃ¨o nÃ y Ä‘Ã¢u pháº£i lÃ  con chÃ³ Ä‘Ã¢u mÃ  Ã©p!" Tháº¿ lÃ  `ClassCastException` xuáº¥t hiá»‡n. NÃ³ xáº£y ra khi báº¡n cá»‘ gáº¯ng chuyá»ƒn Ä‘á»•i má»™t Ä‘á»‘i tÆ°á»£ng sang má»™t kiá»ƒu mÃ  nÃ³ khÃ´ng tÆ°Æ¡ng thÃ­ch.

*   **`ArithmeticException`**: CÃ¡i nÃ y thÃ¬ khÃ¡ lÃ  dá»… hiá»ƒu nÃ¨. NÃ³ liÃªn quan Ä‘áº¿n cÃ¡c phÃ©p tÃ­nh toÃ¡n há»c. Báº¡n cÃ²n nhá»› há»“i Ä‘i há»c, tháº§y cÃ´ giÃ¡o luÃ´n dáº·n lÃ  "khÃ´ng Ä‘Æ°á»£c chia cho sá»‘ 0" khÃ´ng? Trong Java cÅ©ng váº­y! Náº¿u báº¡n cá»‘ gáº¯ng thá»±c hiá»‡n má»™t phÃ©p chia mÃ  máº«u sá»‘ lÃ  0 (vÃ­ dá»¥: `10 / 0`), Java sáº½ "ná»•i khÃ¹ng" lÃªn vÃ  nÃ©m ra `ArithmeticException`. NÃ³ nÃ³i ráº±ng "NÃ y, phÃ©p toÃ¡n nÃ y khÃ´ng há»£p lá»‡ trong toÃ¡n há»c!" ThÆ°á»ng thÃ¬ nÃ³ xáº£y ra khi báº¡n chia má»™t sá»‘ nguyÃªn cho 0.

*   **`IllegalArgumentException`**: TÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t cÃ¡i mÃ¡y pha cÃ  phÃª. NÃ³ cÃ³ má»™t nÃºt "chá»n lÆ°á»£ng Ä‘Æ°á»ng", vÃ  báº¡n chá»‰ cÃ³ thá»ƒ chá»n tá»« 0 Ä‘áº¿n 5 muá»—ng Ä‘Æ°á»ng thÃ´i. Tháº¿ mÃ  báº¡n láº¡i cá»‘ gáº¯ng nháº­p vÃ o sá»‘ "-1" muá»—ng Ä‘Æ°á»ng, hoáº·c "100" muá»—ng Ä‘Æ°á»ng. CÃ¡i mÃ¡y pha cÃ  phÃª sáº½ "nhÄƒn máº·t" vÃ  nÃ³i "NÃ y, cÃ¡i giÃ¡ trá»‹ báº¡n vá»«a nháº­p vÃ o khÃ´ng há»£p lá»‡! TÃ´i khÃ´ng biáº¿t lÃ m gÃ¬ vá»›i nÃ³ cáº£!" ÄÃ³ chÃ­nh lÃ  `IllegalArgumentException`. NÃ³ xáº£y ra khi má»™t phÆ°Æ¡ng thá»©c (method) Ä‘Æ°á»£c gá»i vá»›i má»™t Ä‘á»‘i sá»‘ (argument) mÃ  Ä‘á»‘i sá»‘ Ä‘Ã³ khÃ´ng phÃ¹ há»£p hoáº·c khÃ´ng náº±m trong pháº¡m vi mÃ  phÆ°Æ¡ng thá»©c Ä‘Ã³ cho phÃ©p.

    1. **NullPointerException**

NÃ y báº¡n! Báº¡n Ä‘Ã£ bao giá» nghe Ä‘áº¿n cÃ¡i tÃªn "khÃ³ nháº±n" nÃ y chÆ°a: `NullPointerException`? Äá»«ng lo láº¯ng nhÃ©, chÃºng ta sáº½ cÃ¹ng "má»• xáº»" nÃ³ ra xem nÃ³ lÃ  cÃ¡i gÃ¬ vÃ  táº¡i sao nÃ³ láº¡i hay lÃ m chÃºng ta "Ä‘au Ä‘áº§u" Ä‘áº¿n váº­y!

HÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©:

*   Báº¡n cÃ³ má»™t cÃ¡i **Ä‘iá»u khiá»ƒn TV** trong tay. NÃ³ chÃ­nh lÃ  má»™t "tham chiáº¿u" (reference) trong Java. NÃ³ *Ä‘Ã¡ng láº½ ra* pháº£i trá» Ä‘áº¿n má»™t cÃ¡i TV cá»¥ thá»ƒ nÃ o Ä‘Ã³, Ä‘Ãºng khÃ´ng?
*   NhÆ°ng mÃ ... cÃ¡i Ä‘iá»u khiá»ƒn nÃ y **CHÆ¯A ÄÆ¯á»¢C Káº¾T Ná»I** vá»›i cÃ¡i TV nÃ o cáº£! NÃ³ Ä‘ang "rá»—ng tuáº¿ch", khÃ´ng cÃ³ Ä‘Ã­ch Ä‘áº¿n. Trong Java, chÃºng ta gá»i tráº¡ng thÃ¡i nÃ y lÃ  `null`. Tá»©c lÃ , cÃ¡i "tham chiáº¿u" cá»§a báº¡n Ä‘ang trá» Ä‘áº¿n... "khÃ´ng cÃ³ gÃ¬ cáº£".
*   VÃ  rá»“i, báº¡n cá»‘ gáº¯ng **nháº¥n nÃºt** trÃªn cÃ¡i Ä‘iá»u khiá»ƒn Ä‘Ã³ (vÃ­ dá»¥: nÃºt tÄƒng Ã¢m lÆ°á»£ng, nÃºt chuyá»ƒn kÃªnh). ÄÃ¢y chÃ­nh lÃ  hÃ nh Ä‘á»™ng "gá»i má»™t phÆ°Æ¡ng thá»©c" (calling a method) hoáº·c "truy cáº­p má»™t thuá»™c tÃ­nh" (accessing a field) trong láº­p trÃ¬nh.

ÄoÃ¡n xem Ä‘iá»u gÃ¬ sáº½ xáº£y ra?

CÃ¡i Ä‘iá»u khiá»ƒn Ä‘Ã³ sáº½ "kÃªu" lÃªn: "ÃŠ, tÃ´i khÃ´ng káº¿t ná»‘i vá»›i TV nÃ o cáº£! LÃ m sao mÃ  tÃ´i tÄƒng Ã¢m lÆ°á»£ng Ä‘Æ°á»£c Ä‘Ã¢y?"

ÄÃ³ chÃ­nh xÃ¡c lÃ  `NullPointerException`!

NÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n hÆ¡n:

`NullPointerException` lÃ  lá»—i xáº£y ra khi báº¡n cÃ³ má»™t biáº¿n (cÃ¡i "tÃªn" báº¡n Ä‘áº·t cho má»™t thá»© gÃ¬ Ä‘Ã³) mÃ  nÃ³ Ä‘ang trá» Ä‘áº¿n `null` (tá»©c lÃ  "khÃ´ng cÃ³ gÃ¬ cáº£"), vÃ  báº¡n láº¡i cá»‘ gáº¯ng **lÃ m gÃ¬ Ä‘Ã³** vá»›i cÃ¡i "thá»© khÃ´ng cÃ³ gÃ¬" Ä‘Ã³.

VÃ­ dá»¥ nÃ¨:

```java
String tenCuaBan = null; // Báº¡n khai bÃ¡o má»™t biáº¿n tÃªn lÃ  'tenCuaBan',
                         // nhÆ°ng nÃ³ Ä‘ang trá» Ä‘áº¿n 'null' (chÆ°a cÃ³ chuá»—i kÃ½ tá»± nÃ o Ä‘Æ°á»£c gÃ¡n vÃ o cáº£).

// Giá» báº¡n muá»‘n biáº¿t Ä‘á»™ dÃ i cá»§a chuá»—i nÃ y...
int doDai = tenCuaBan.length(); // BÃ™M! Báº¡n Ä‘ang cá»‘ gáº¯ng há»i 'chiá»u dÃ i' cá»§a má»™t chuá»—i
                                // mÃ  nÃ³ KHÃ”NG Há»€ Tá»’N Táº I!
```

ChÆ°Æ¡ng trÃ¬nh cá»§a báº¡n sáº½ "la lÃ ng" lÃªn vÃ  nÃ©m ra má»™t `NullPointerException`! NÃ³ muá»‘n nÃ³i ráº±ng: "TÃ´i khÃ´ng thá»ƒ tÃ¬m tháº¥y cÃ¡i chuá»—i nÃ o Ä‘á»ƒ Ä‘o Ä‘á»™ dÃ i cáº£! CÃ¡i `tenCuaBan` kia Ä‘ang lÃ  `null` mÃ !"

ÄÃ¢y lÃ  má»™t trong nhá»¯ng lá»—i "kinh Ä‘iá»ƒn" mÃ  báº¥t ká»³ láº­p trÃ¬nh viÃªn Java nÃ o cÅ©ng sáº½ gáº·p pháº£i. CÃ¡ch tá»‘t nháº¥t Ä‘á»ƒ trÃ¡nh nÃ³ lÃ :

*   LuÃ´n kiá»ƒm tra xem biáº¿n cá»§a báº¡n cÃ³ pháº£i lÃ  `null` trÆ°á»›c khi báº¡n cá»‘ gáº¯ng lÃ m gÃ¬ Ä‘Ã³ vá»›i nÃ³.
*   Äáº£m báº£o ráº±ng báº¡n Ä‘Ã£ khá»Ÿi táº¡o (táº¡o ra) Ä‘á»‘i tÆ°á»£ng mÃ  biáº¿n cá»§a báº¡n cáº§n trá» tá»›i.

Nhá»› nhÃ©, `NullPointerException` cÃ³ nghÄ©a lÃ  báº¡n Ä‘ang cá»‘ gáº¯ng "nháº¥n nÃºt" trÃªn má»™t "cÃ¡i Ä‘iá»u khiá»ƒn khÃ´ng káº¿t ná»‘i" Ä‘Ã³!
    2. ÃŠ báº¡n! ÄÃ£ bao giá» báº¡n Ä‘ang code rá»“i tá»± nhiÃªn tháº¥y má»™t lá»—i láº¡ hoáº¯c nhÆ° tháº¿ nÃ y chÆ°a?

```
ArrayIndexOutOfBoundsException
```

Nghe cÃ³ váº» "nguy hiá»ƒm" nhá»‰? NhÆ°ng Ä‘á»«ng lo, nÃ³ chá»‰ lÃ  má»™t trong nhá»¯ng lá»—i mÃ  Java dÃ¹ng Ä‘á»ƒ mÃ¡ch báº¡n biáº¿t lÃ  "ÃŠ, cÃ³ gÃ¬ Ä‘Ã³ khÃ´ng á»•n rá»“i Ä‘Ã³!"

HÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©: Báº¡n cÃ³ má»™t cÃ¡i tá»§ sÃ¡ch, nhÆ°ng nÃ³ chá»‰ cÃ³ Ä‘Ãºng 5 ngÄƒn thÃ´i, vÃ  cÃ¡c ngÄƒn Ä‘Æ°á»£c Ä‘Ã¡nh sá»‘ tá»« `0` Ä‘áº¿n `4`.

Náº¿u báº¡n cá»‘ gáº¯ng nhÃ©t má»™t cuá»‘n sÃ¡ch vÃ o "ngÄƒn sá»‘ 5" hoáº·c "ngÄƒn sá»‘ -1", thÃ¬ sao?
ÄÃºng rá»“i! Báº¡n sáº½ khÃ´ng thá»ƒ lÃ m Ä‘Æ°á»£c, vÃ¬ nhá»¯ng ngÄƒn Ä‘Ã³ khÃ´ng há» tá»“n táº¡i!

Trong Java, `ArrayIndexOutOfBoundsException` xáº£y ra khi báº¡n cá»‘ gáº¯ng truy cáº­p vÃ o má»™t "ngÄƒn" (hay cÃ²n gá»i lÃ  "pháº§n tá»­") trong máº£ng mÃ  nÃ³... khÃ´ng cÃ³ tháº­t.

Nhá»› nhÃ©, máº£ng (array) trong Java cÃ³ nhá»¯ng quy táº¯c sau:
*   KÃ­ch thÆ°á»›c cá»§a nÃ³ Ä‘Æ°á»£c **cá»‘ Ä‘á»‹nh** ngay tá»« Ä‘áº§u. Má»™t khi Ä‘Ã£ táº¡o 5 pháº§n tá»­, thÃ¬ nÃ³ mÃ£i mÃ£i lÃ  5 pháº§n tá»­.
*   CÃ¡c pháº§n tá»­ Ä‘Æ°á»£c Ä‘Ã¡nh sá»‘ tá»« `0` (khÃ´ng) cho Ä‘áº¿n `kÃ­ch_thÆ°á»›c - 1`.

VÃ­ dá»¥, náº¿u báº¡n cÃ³ má»™t máº£ng 5 pháº§n tá»­, thÃ¬ cÃ¡c chá»‰ sá»‘ há»£p lá»‡ sáº½ lÃ  `0, 1, 2, 3, 4`.

HÃ£y xem vÃ­ dá»¥ "phÃ¡ hoáº¡i" nÃ y nhÃ©:

```java
int[] diemSo = new int[3]; // Táº¡o má»™t máº£ng cÃ³ 3 pháº§n tá»­.
                           // CÃ¡c chá»‰ sá»‘ há»£p lá»‡ lÃ  0, 1, 2.

diemSo[0] = 90;
diemSo[1] = 85;
diemSo[2] = 95;

// Giá», chuyá»‡n gÃ¬ sáº½ xáº£y ra náº¿u báº¡n thá»­ lÃ m Ä‘iá»u nÃ y?
System.out.println(diemSo[3]); // á»’ khÃ´ng! Chá»‰ sá»‘ 3 khÃ´ng tá»“n táº¡i!
```

BÃ™M! Khi cháº¡y Ä‘oáº¡n code trÃªn, báº¡n sáº½ nháº­n Ä‘Æ°á»£c `ArrayIndexOutOfBoundsException` ngay láº­p tá»©c!
Táº¡i sao Æ°? VÃ¬ máº£ng `diemSo` chá»‰ cÃ³ 3 pháº§n tá»­ thÃ´i, nÃªn chá»‰ sá»‘ lá»›n nháº¥t há»£p lá»‡ lÃ  `2` (nhá»› khÃ´ng? `kÃ­ch_thÆ°á»›c - 1`). Khi báº¡n cá»‘ gáº¯ng truy cáº­p `diemSo[3]`, Java sáº½ la lÃªn "NÃ y, cÃ¡i sá»‘ 3 nÃ y vÆ°á»£t ra ngoÃ i giá»›i háº¡n rá»“i!"

Hoáº·c tá»‡ hÆ¡n ná»¯a, náº¿u báº¡n cá»‘ gáº¯ng truy cáº­p má»™t chá»‰ sá»‘ Ã¢m:

```java
System.out.println(diemSo[-1]); // CÅ©ng gÃ¢y ra ArrayIndexOutOfBoundsException!
```

Váº­y lÃ m sao Ä‘á»ƒ trÃ¡nh lá»—i nÃ y?
ÄÆ¡n giáº£n thÃ´i! LuÃ´n luÃ´n kiá»ƒm tra xem chá»‰ sá»‘ báº¡n Ä‘ang dÃ¹ng cÃ³ náº±m trong pháº¡m vi tá»« `0` Ä‘áº¿n `kich_thuoc_mang - 1` hay khÃ´ng.

ThÆ°á»ng thÃ¬ lá»—i nÃ y xáº£y ra khi báº¡n dÃ¹ng vÃ²ng láº·p (loop) vÃ  tÃ­nh toÃ¡n chá»‰ sá»‘ bá»‹ sai.
VÃ­ dá»¥, náº¿u báº¡n muá»‘n in táº¥t cáº£ cÃ¡c pháº§n tá»­ cá»§a máº£ng `diemSo`:

```java
// CÃ¡ch SAI gÃ¢y ra lá»—i!
for (int i = 0; i <= diemSo.length; i++) { // Lá»—i á»Ÿ chá»— <=
    System.out.println(diemSo[i]);
}
```

Báº¡n tháº¥y khÃ´ng? Khi `i` báº±ng `diemSo.length` (tá»©c lÃ  3), nÃ³ sáº½ cá»‘ gáº¯ng truy cáº­p `diemSo[3]` vÃ ... BÃ™M! Lá»—i!

ÄÃ¢y má»›i lÃ  cÃ¡ch ÄÃšNG nÃ y:

```java
// CÃ¡ch ÄÃšNG!
for (int i = 0; i < diemSo.length; i++) { // DÃ¹ng < thay vÃ¬ <=
    System.out.println(diemSo[i]);
}
```

Nhá»› nhÃ©: `ArrayIndexOutOfBoundsException` chá»‰ lÃ  Java Ä‘ang lá»‹ch sá»± nháº¯c nhá»Ÿ báº¡n ráº±ng báº¡n Ä‘ang cá»‘ gáº¯ng Ä‘i ra ngoÃ i ranh giá»›i cá»§a máº£ng. HÃ£y cáº©n tháº­n vá»›i cÃ¡c chá»‰ sá»‘ vÃ  báº¡n sáº½ á»•n thÃ´i!
    3. `ArithmeticException`

NÃ y báº¡n, báº¡n Ä‘Ã£ bao giá» thá»­ lÃ m phÃ©p toÃ¡n mÃ  káº¿t quáº£ nÃ³... khÃ´ng thá»ƒ tÃ­nh Ä‘Æ°á»£c chÆ°a? Kiá»ƒu nhÆ° chia má»™t cÃ¡i bÃ¡nh thÃ nh 0 pháº§n áº¥y? Nghe vÃ´ lÃ½ Ä‘Ãºng khÃ´ng?

Trong Java, khi báº¡n cá»‘ gáº¯ng lÃ m má»™t phÃ©p toÃ¡n sá»‘ há»c mÃ  nÃ³ "khÃ´ng há»£p lá»‡" (kiá»ƒu nhÆ° toÃ¡n há»c khÃ´ng cho phÃ©p áº¥y), Java sáº½ hÃ©t lÃªn má»™t cÃ¡i lá»—i Ä‘áº·c biá»‡t. CÃ¡i lá»—i Ä‘Ã³ cÃ³ tÃªn lÃ  **`ArithmeticException`** (táº¡m dá»‹ch lÃ  "Ngoáº¡i lá»‡ Sá»‘ há»c").

TrÆ°á»ng há»£p ná»•i tiáº¿ng nháº¥t mÃ  báº¡n sáº½ gáº·p `ArithmeticException` lÃ  khi báº¡n chia má»™t sá»‘ cho... **sá»‘ 0**! Báº¡n biáº¿t Ä‘áº¥y, trong toÃ¡n há»c, chia cho 0 lÃ  Ä‘iá»u cáº¥m ká»µ mÃ , pháº£i khÃ´ng?

Thá»­ tÆ°á»Ÿng tÆ°á»£ng báº¡n viáº¿t code nhÆ° tháº¿ nÃ y:

```java
public class PhepToanSai {
    public static void main(String[] args) {
        int soBiChia = 10;
        int soChia = 0;

        // Ã”i khÃ´ng! MÃ¬nh Ä‘ang cá»‘ chia 10 cho 0 Ä‘Ã¢y nÃ y!
        int ketQua = soBiChia / soChia; 

        System.out.println("Káº¿t quáº£ lÃ : " + ketQua); // DÃ²ng nÃ y sáº½ khÃ´ng bao giá» Ä‘Æ°á»£c cháº¡y!
    }
}
```

Ngay khi dÃ²ng `int ketQua = soBiChia / soChia;` Ä‘Æ°á»£c cháº¡y, Java sáº½ phÃ¡t hiá»‡n ra: "Ã€, cÃ³ ngÆ°á»i Ä‘ang cá»‘ chia cho 0 nÃ y! KhÃ´ng Ä‘Æ°á»£c phÃ©p!" VÃ  nÃ³ sáº½ nÃ©m ra `ArithmeticException`.

ChÆ°Æ¡ng trÃ¬nh cá»§a báº¡n sáº½ dá»«ng láº¡i ngay láº­p tá»©c vÃ  bÃ¡o lá»—i, thay vÃ¬ tiáº¿p tá»¥c cháº¡y vÃ  cho ra má»™t káº¿t quáº£ vÃ´ nghÄ©a.

**Váº­y lÃ m sao Ä‘á»ƒ trÃ¡nh nÃ³?**

ÄÆ¡n giáº£n thÃ´i! TrÆ°á»›c khi báº¡n thá»±c hiá»‡n phÃ©p chia, hÃ£y luÃ´n kiá»ƒm tra xem sá»‘ chia cÃ³ pháº£i lÃ  0 hay khÃ´ng.

Kiá»ƒu nhÆ° váº§y nÃ¨:

```java
public class PhepToanDung {
    public static void main(String[] args) {
        int soBiChia = 10;
        int soChia = 0; // Hoáº·c cÃ³ thá»ƒ lÃ  má»™t giÃ¡ trá»‹ tá»« ngÆ°á»i dÃ¹ng mÃ  báº¡n khÃ´ng kiá»ƒm soÃ¡t

        // MÃ¬nh kiá»ƒm tra trÆ°á»›c khi chia!
        if (soChia != 0) { 
            int ketQua = soBiChia / soChia;
            System.out.println("Káº¿t quáº£ lÃ : " + ketQua);
        } else {
            // Náº¿u sá»‘ chia lÃ  0, mÃ¬nh sáº½ thÃ´ng bÃ¡o cho ngÆ°á»i dÃ¹ng biáº¿t
            System.out.println("KhÃ´ng thá»ƒ chia cho 0! Vui lÃ²ng nháº­p sá»‘ chia khÃ¡c 0.");
        }
    }
}
```

Báº±ng cÃ¡ch nÃ y, báº¡n Ä‘Ã£ "phÃ²ng bá»‡nh hÆ¡n chá»¯a bá»‡nh" rá»“i Ä‘Ã³! ChÆ°Æ¡ng trÃ¬nh cá»§a báº¡n sáº½ cháº¡y mÆ°á»£t mÃ  hÆ¡n ráº¥t nhiá»u!
    4. NÃ y báº¡n! Báº¡n Ä‘Ã£ bao giá» thá»­ biáº¿n má»™t Ä‘oáº¡n vÄƒn báº£n (má»™t `String`) thÃ nh má»™t con sá»‘ chÆ°a? NhÆ°ng mÃ , lá»¡ Ä‘Ã¢u cÃ¡i Ä‘oáº¡n vÄƒn báº£n Ä‘Ã³ *khÃ´ng há» giá»‘ng má»™t con sá»‘* thÃ¬ sao?

VÃ­ dá»¥ nhÃ©, báº¡n thá»­ báº£o Java: "NÃ y, biáº¿n 'quáº£ chuá»‘i' thÃ nh má»™t sá»‘ nguyÃªn giÃºp tÃ´i vá»›i!"

Java sáº½ lÃ m gÃ¬ Æ°? NÃ³ sáº½ hÃ©t lÃªn (theo kiá»ƒu Java áº¥y mÃ ), "KHÃ”NG THá»‚ ÄÆ¯á»¢C! TÃ´i khÃ´ng thá»ƒ biáº¿n cÃ¡i nÃ y thÃ nh sá»‘ Ä‘Æ°á»£c!"

VÃ  tháº¿ lÃ , BÃ™M! Báº¡n sáº½ gáº·p má»™t lá»—i tÃªn lÃ  `NumberFormatException`!

Lá»—i nÃ y xuáº¥t hiá»‡n khi báº¡n cá»‘ gáº¯ng chuyá»ƒn Ä‘á»•i má»™t `String` thÃ nh má»™t kiá»ƒu sá»‘ (nhÆ° `int`, `double`, `float`...) nhÆ°ng ná»™i dung cá»§a `String` Ä‘Ã³ láº¡i khÃ´ng pháº£i lÃ  má»™t sá»‘ há»£p lá»‡.

NÃ³ thÆ°á»ng xuáº¥t hiá»‡n khi báº¡n dÃ¹ng cÃ¡c phÆ°Æ¡ng thá»©c nhÆ°:
*   `Integer.parseInt("má»™t cÃ¡i gÃ¬ Ä‘Ã³")`
*   `Double.parseDouble("má»™t cÃ¡i gÃ¬ Ä‘Ã³")`
*   `Float.parseFloat("má»™t cÃ¡i gÃ¬ Ä‘Ã³")`

Náº¿u cÃ¡i "má»™t cÃ¡i gÃ¬ Ä‘Ã³" Ä‘Ã³ khÃ´ng pháº£i lÃ  má»™t sá»‘ chuáº©n chá»‰nh, thÃ¬ `NumberFormatException` sáº½ ghÃ© thÄƒm vÃ  lÃ m chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n dá»«ng láº¡i Ä‘Ã³ (trá»« khi báº¡n biáº¿t cÃ¡ch "báº¯t" nÃ³)!

Váº­y nÃªn, hÃ£y cáº©n tháº­n vá»›i nhá»¯ng `String` mÃ  báº¡n Ä‘á»‹nh biáº¿n thÃ nh sá»‘ nhÃ©! Äáº£m báº£o chÃºng pháº£i thá»±c sá»± lÃ  sá»‘ Ä‘Ã³!
    5. á»i chÃ ! CÃ³ váº» nhÆ° báº¡n vá»«a gáº·p pháº£i má»™t `IllegalThreadStateException` rá»“i!

Äá»«ng lo láº¯ng nhÃ©, nghe cÃ³ váº» Ä‘Ã¡ng sá»£ nhÆ°ng thá»±c ra nÃ³ khÃ´ng Ä‘áº¿n ná»—i nÃ o Ä‘Ã¢u. HÃ£y hÃ¬nh dung tháº¿ nÃ y:

*   **`Thread` (Luá»“ng)**: Báº¡n nhá»› khÃ´ng, máº¥y "cÃ´ng nhÃ¢n nhá»" chuyÃªn lÃ m viá»‡c trong chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n áº¥y.
*   **`State` (Tráº¡ng thÃ¡i)**: Má»—i "cÃ´ng nhÃ¢n" nÃ y Ä‘á»u cÃ³ má»™t tÃ¬nh tráº¡ng cÃ´ng viá»‡c riÃªng. CÃ³ thá»ƒ lÃ  "sáºµn sÃ ng báº¯t Ä‘áº§u", "Ä‘ang lÃ m viá»‡c", hoáº·c "Ä‘Ã£ xong viá»‡c vÃ  Ä‘ang nghá»‰ ngÆ¡i".
*   **`Illegal` (Báº¥t há»£p lá»‡)**: CÃ¡i nÃ y cÃ³ nghÄ©a lÃ  báº¡n Ä‘Ã£ cá»‘ gáº¯ng ra lá»‡nh cho má»™t "cÃ´ng nhÃ¢n" lÃ m Ä‘iá»u gÃ¬ Ä‘Ã³ mÃ  *tÃ¬nh tráº¡ng hiá»‡n táº¡i* cá»§a há» khÃ´ng cho phÃ©p.

VÃ­ dá»¥ nhÃ©, tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t "cÃ´ng nhÃ¢n" (má»™t luá»“ng) Ä‘Ã£ *hoÃ n thÃ nh* cÃ´ng viá»‡c cá»§a mÃ¬nh rá»“i. Há» xong rá»“i Ä‘áº¥y! NhÆ°ng rá»“i, báº¡n láº¡i cá»‘ gáº¯ng báº£o há», "NÃ y, `start()` (báº¯t Ä‘áº§u) lÃ m viá»‡c láº¡i Ä‘i!"

Tháº¿ thÃ¬ `Illegal` (báº¥t há»£p lá»‡) ngay! Má»™t luá»“ng chá»‰ cÃ³ thá»ƒ Ä‘Æ°á»£c `start()` *má»™t láº§n duy nháº¥t* thÃ´i. Náº¿u nÃ³ Ä‘Ã£ Ä‘ang cháº¡y hoáº·c Ä‘Ã£ hoÃ n thÃ nh, báº¡n khÃ´ng thá»ƒ `start()` nÃ³ láº¡i láº§n ná»¯a Ä‘Ã¢u.

Váº­y nÃªn, khi báº¡n tháº¥y `IllegalThreadStateException`, Ä‘Ã³ lÃ  Java Ä‘ang nÃ³i vá»›i báº¡n ráº±ng: "Khoan Ä‘Ã£! Báº¡n vá»«a cá»‘ gáº¯ng can thiá»‡p vÃ o má»™t luá»“ng theo cÃ¡ch mÃ  tráº¡ng thÃ¡i hiá»‡n táº¡i cá»§a nÃ³ khÃ´ng cho phÃ©p Ä‘Ã³!"

ThÆ°á»ng thÃ¬ nÃ³ xáº£y ra khi báº¡n cá»‘ gáº¯ng `start()` má»™t luá»“ng Ä‘Ã£ Ä‘ang cháº¡y hoáº·c Ä‘Ã£ hoÃ n thÃ nh cÃ´ng viá»‡c cá»§a nÃ³. Chá»‰ cáº§n nhá»›: má»™t luá»“ng chá»‰ Ä‘Æ°á»£c `start()` *má»™t láº§n duy nháº¥t* trong suá»‘t cuá»™c Ä‘á»i cá»§a nÃ³ thÃ´i nhÃ©!

    VÃ­ dá»¥, hÃ£y nhÃ¬n phÆ°Æ¡ng thá»©c nÃ y nhÃ©.
Khi báº¡n biÃªn dá»‹ch nÃ³, trÃ¬nh biÃªn dá»‹ch sáº½ cháº³ng phÃ n nÃ n gÃ¬ Ä‘Ã¢u. KhÃ´ng cÃ³ lá»—i nÃ o cáº£!
NhÆ°ng khi cháº¡y, *bum*, nÃ³ sáº½ nÃ©m ra `ArithmeticException` Báº¡n biáº¿t khÃ´ng, khi chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n *Ä‘ang cháº¡y* (Ã , chÃºng ta gá»i Ä‘Ã³ lÃ  *runtime* Ä‘Ã³ nha)... Náº¿u nÃ³ lá»¡ cá»‘ gáº¯ng thá»±c hiá»‡n phÃ©p chia cho sá»‘ 0? ThÃ¬ bÃ¹m! Má»™t lá»—i sáº½ ná»• ra *ngay lÃºc Ä‘Ã³*! LÃ½ do Æ°? VÃ¬ tá»™i chia cho sá»‘ 0 Ä‘Ã³ mÃ !

    ```java
    class MyUncheckedException {

        private void divideByZero() {
    	    int a = 1;
    	    int b = 0;
    	    int result = a / b;
        }

    }
    ```

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

11. ### Váº­y, Lá»›p bao bá»c lÃ  gÃ¬?

    CÃ¡c lá»›p Wrapper (lá»›p bao bá»c) cung cáº¥p má»™t cÆ¡ cháº¿ giÃºp chÃºng ta biáº¿n Ä‘á»•i cÃ¡c kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y (nhÆ° `int`, `char`) thÃ nh cÃ¡c kiá»ƒu Ä‘á»‘i tÆ°á»£ng (nhÆ° `Integer`, `Character`) vÃ  ngÆ°á»£c láº¡i Ä‘Ã³!

Táº¡i sao chÃºng ta láº¡i cáº§n Ä‘áº¿n chÃºng? Bá»Ÿi vÃ¬ Java lÃ  má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng mÃ . Ráº¥t nhiá»u API vÃ  thÆ° viá»‡n trong Java *yÃªu cáº§u* báº¡n pháº£i dÃ¹ng Ä‘á»‘i tÆ°á»£ng, chá»© khÃ´ng pháº£i cÃ¡c kiá»ƒu nguyÃªn thá»§y Ä‘Ã¢u.

VÃ­ dá»¥ nhÆ°, cÃ¡c cáº¥u trÃºc dá»¯ liá»‡u trong Collection Framework (bá»™ khung táº­p há»£p) cháº³ng háº¡n, hay cÃ¡c lá»›p tiá»‡n Ã­ch tá»«... `java.utils.*`NÃ y, Ä‘á»ƒ Ã½ nha! Máº¥y cÃ¡i vá»¥ nhÆ° quÃ¡ trÃ¬nh nhÃ¢n báº£n (cloning), Tuáº§n tá»± hÃ³a (Serialization), Äá»“ng bá»™ hÃ³a (Synchronization), vÃ¢n vÃ¢n... táº¥t cáº£ chÃºng Ä‘á»u *Ä‘Ã²i há»i* pháº£i lÃ  má»™t Ä‘á»‘i tÆ°á»£ng má»›i lÃ m viá»‡c Ä‘Æ°á»£c Ä‘Ã³!

    NÃ¨, cÃ¡i báº£ng dÆ°á»›i Ä‘Ã¢y sáº½ cho báº¡n biáº¿t vá» cÃ¡c kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y (primitives) vÃ  cÃ¡c lá»›p bao bá»c (wrapper classes) tÆ°Æ¡ng á»©ng cá»§a chÃºng Ä‘Ã³!

    | Kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y | Lá»›p bao bá»c |
    | ------------------- | ------------- |
    | byte (chá»‰ lÃ  má»™t con sá»‘ bÃ© tÃ­) | Byte (má»™t "vá» bá»c" xá»‹n sÃ² cho `byte`) |
    | short               | Sá»‘ nguyÃªn "ngáº¯n" |
    | int (Kiá»ƒu nguyÃªn thá»§y, chá»‰ lÃ  má»™t giÃ¡ trá»‹ sá»‘ thÃ´i. Nhanh gá»n!) | Integer (Má»™t Ä‘á»‘i tÆ°á»£ng 'bá»c' láº¥y int. CÃ³ thá»ƒ lÃ m nhiá»u trÃ² hÆ¡n!) |
    NÃ y, báº¡n Ä‘Ã£ gáº·p `float` rá»“i Ä‘Ãºng khÃ´ng? NÃ³ lÃ  má»™t kiá»ƒu dá»¯ liá»‡u *nguyÃªn thá»§y* (primitive) siÃªu quan trá»ng trong Java, dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ cÃ¡c sá»‘ cÃ³ dáº¥u tháº­p phÃ¢n, vÃ­ dá»¥ nhÆ° `3.14` hay `2.5f` Ä‘Ã³.

NhÆ°ng Ä‘Ã´i khi, Java láº¡i cáº§n má»™t phiÃªn báº£n *Ä‘á»‘i tÆ°á»£ng* (object) cá»§a `float` cÆ¡. Kiá»ƒu nhÆ° khi báº¡n muá»‘n nhÃ©t máº¥y con sá»‘ `float` vÃ o má»™t `ArrayList` cháº³ng háº¡n â€“ mÃ  `ArrayList` thÃ¬ chá»‰ lÃ m viá»‡c vá»›i Ä‘á»‘i tÆ°á»£ng thÃ´i! LÃºc nÃ y, anh báº¡n `Float` (nhá»› lÃ  chá»¯ `F` viáº¿t HOA nha!) sáº½ nháº£y vÃ o giÃºp Ä‘á»¡. `Float` chÃ­nh lÃ  *lá»›p bao bá»c* (wrapper class) cho `float` Ä‘Ã³. NÃ³ giá»‘ng nhÆ° má»™t cÃ¡i há»™p xinh xáº¯n, chá»©a giÃ¡ trá»‹ `float` nguyÃªn thá»§y cá»§a báº¡n vÃ  biáº¿n nÃ³ thÃ nh má»™t Ä‘á»‘i tÆ°á»£ng Ä‘á»ƒ Java cÃ³ thá»ƒ lÃ m viá»‡c Ä‘Æ°á»£c vá»›i nÃ³ dá»… dÃ ng hÆ¡n!
    | `double`: Kiá»ƒu *nguyÃªn thá»§y* nÃ y giá»¯ sá»‘ tháº­p phÃ¢n lá»›n, báº¡n nhá»› khÃ´ng? | `Double`: ÄÃ¢y lÃ  *lá»›p bao* (wrapper class) cá»§a `double`, biáº¿n nÃ³ thÃ nh Ä‘á»‘i tÆ°á»£ng! |
    | long | Long |
|---|---|
| **Báº¡n `long` Ä‘Ã¢y!** (viáº¿t thÆ°á»ng háº¿t nha) <br> MÃ¬nh lÃ  má»™t **kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y** (primitive type) trong Java Ä‘Ã³. Giá»‘ng nhÆ° `int` hay `boolean` váº­y Ã¡. <br> MÃ¬nh chuyÃªn trá»‹ máº¥y con sá»‘ nguyÃªn to Ä‘Ã¹ng, siÃªu to khá»•ng lá»“ luÃ´n! <br> MÃ¬nh chá»‰ lÃ  má»™t *giÃ¡ trá»‹* thÃ´i, khÃ´ng cÃ³ máº¥y cÃ¡i "hÃ nh Ä‘á»™ng" (phÆ°Æ¡ng thá»©c) Ä‘i kÃ¨m Ä‘Ã¢u. ÄÆ¡n giáº£n váº­y Ä‘Ã³! | **CÃ²n tá»› lÃ  `Long`!** (chá»¯ L viáº¿t hoa nha) <br> Tá»› lÃ  **anh em há» hÃ ng** vá»›i `long` Ä‘Ã³, nhÆ°ng mÃ  tá»› "xá»‹n xÃ²" hÆ¡n má»™t chÃºt! <br> Tá»› lÃ  má»™t **lá»›p bao bá»c** (wrapper class) cho cÃ¡i anh `long` nguyÃªn thá»§y kia Ä‘Ã³. NghÄ©a lÃ  sao? NghÄ©a lÃ  tá»› khÃ´ng chá»‰ lÃ  má»™t con sá»‘, mÃ  tá»› cÃ²n lÃ  má»™t *Ä‘á»‘i tÆ°á»£ng* (object) ná»¯a! <br> VÃ¬ lÃ  Ä‘á»‘i tÆ°á»£ng, nÃªn tá»› cÃ³ thá»ƒ lÃ m Ä‘Æ°á»£c nhiá»u thá»© hay ho hÆ¡n, cÃ³ máº¥y cÃ¡i "hÃ nh Ä‘á»™ng" (phÆ°Æ¡ng thá»©c) Ä‘i kÃ¨m Ä‘Ã³. VÃ­ dá»¥ nhÆ° chuyá»ƒn Ä‘á»•i sang chuá»—i, so sÃ¡nh cÃ¡c kiá»ƒu... Ä‘á»§ trÃ² luÃ´n! <br> Báº¡n sáº½ dÃ¹ng tá»› khi cáº§n biáº¿n `long` thÃ nh má»™t Ä‘á»‘i tÆ°á»£ng Ä‘á»ƒ lÃ m viá»‡c vá»›i máº¥y cÃ¡i Collection (nhÆ° `ArrayList` cháº³ng háº¡n) hoáº·c vá»›i cÃ¡c API yÃªu cáº§u Ä‘á»‘i tÆ°á»£ng Ä‘Ã³. |
    | boolean (kiá»ƒu nguyÃªn thá»§y) | Boolean (lá»›p bao bá»c) |
    | char | **Character**: NÃ y, Ä‘Ã¢y lÃ  "phiÃªn báº£n Ä‘á»‘i tÆ°á»£ng" cá»§a `char` Ä‘Ã³! TÆ°á»Ÿng tÆ°á»£ng `char` cá»§a báº¡n cáº§n 'máº·c Ã¡o' Ä‘á»ƒ tham gia vÃ o cÃ¡c 'bá»¯a tiá»‡c' Ä‘á»‘i tÆ°á»£ng. `Character` chÃ­nh lÃ  chiáº¿c 'Ã¡o' Ä‘Ã³ â€“ má»™t lá»›p Ä‘á»‘i tÆ°á»£ng (wrapper class) giÃºp `char` cÃ³ thá»ƒ Ä‘Æ°á»£c xá»­ lÃ½ nhÆ° má»™t Ä‘á»‘i tÆ°á»£ng (vÃ­ dá»¥, khi báº¡n bá» nÃ³ vÃ o `ArrayList`). VÃ  tuyá»‡t hÆ¡n ná»¯a, nÃ³ cÃ²n cÃ³ thÃªm nhiá»u "chiÃªu" hay ho nhÆ° `isDigit()` (kiá»ƒm tra cÃ³ pháº£i sá»‘ khÃ´ng?) hay `toUpperCase()` (chuyá»ƒn thÃ nh chá»¯ hoa) Ä‘á»ƒ báº¡n 'chÆ¡i Ä‘Ã¹a' vá»›i kÃ½ tá»± cá»§a mÃ¬nh! |

    ÄÆ°á»£c rá»“i, báº¡n cÃ³ thá»ƒ dÃ¹ng... `.valueOf` NÃ y báº¡n, báº¡n cÃ³ biáº¿t khÃ´ng? Máº¥y cÃ¡i **lá»›p bao bá»c (wrapper classes)** cÃ³ nhá»¯ng **phÆ°Æ¡ng thá»©c (methods)** siÃªu hay ho Ä‘Ã³! ChÃºng giÃºp báº¡n biáº¿n Ä‘á»•i cÃ¡c kiá»ƒu dá»¯ liá»‡u **nguyÃªn thá»§y (primitive types)** thÃ nh kiá»ƒu **Ä‘á»‘i tÆ°á»£ng (object type)** Ä‘áº¥y.

VÃ  cÅ©ng tÆ°Æ¡ng tá»± nhÆ° váº­y, cÃ¡c lá»›p bao bá»c cÃ²n cÃ³ nhá»¯ng **phÆ°Æ¡ng thá»©c** khÃ¡c, cháº³ng háº¡n nhÆ°... `intValue`, `doubleValue` Báº¡n Ä‘Ã£ dÃ¹ng máº¥y kiá»ƒu 'thá»§ cÃ´ng' nhÆ° `intValue()` hay `doubleValue()` Ä‘á»ƒ 'biáº¿n' má»™t `Wrapper class` thÃ nh `kiá»ƒu nguyÃªn thá»§y` rá»“i Ä‘Ãºng khÃ´ng?

Tháº¿ nhÆ°ng mÃ , cÃ¡i viá»‡c lÃ m thá»§ cÃ´ng nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c tá»± Ä‘á»™ng hÃ³a Ä‘Ã³!

    1. NÃ y báº¡n! Báº¡n Ä‘Ã£ sáºµn sÃ ng khÃ¡m phÃ¡ má»™t trong nhá»¯ng "phÃ©p thuáº­t" nhá» cá»§a Java chÆ°a? NÃ³ giÃºp cuá»™c sá»‘ng cá»§a láº­p trÃ¬nh viÃªn dá»… thá»Ÿ hÆ¡n ráº¥t nhiá»u Ä‘áº¥y!

Nhá»› láº¡i má»™t chÃºt nhÃ©. Trong Java, chÃºng ta cÃ³ hai "tháº¿ giá»›i" dá»¯ liá»‡u khÃ¡c nhau:
*   **Tháº¿ giá»›i kiá»ƒu nguyÃªn thá»§y (primitive types)**: ÄÃ¢y lÃ  nhá»¯ng giÃ¡ trá»‹ Ä‘Æ¡n giáº£n nhÆ° sá»‘ (`int`, `double`), kÃ½ tá»± (`char`), hay Ä‘Ãºng/sai (`boolean`). ChÃºng khÃ´ng pháº£i lÃ  Ä‘á»‘i tÆ°á»£ng Ä‘Ã¢u nhÃ©!
*   **Tháº¿ giá»›i Ä‘á»‘i tÆ°á»£ng (object types)**: ÄÃ¢y lÃ  nhá»¯ng thá»© "phá»©c táº¡p" hÆ¡n, cÃ³ thá»ƒ cÃ³ thuá»™c tÃ­nh vÃ  hÃ nh vi (vÃ­ dá»¥: `String`, `Scanner`, hoáº·c cÃ¡c lá»›p báº¡n tá»± táº¡o).

ÄÃ´i khi, báº¡n sáº½ rÆ¡i vÃ o tÃ¬nh huá»‘ng "tiáº¿n thoÃ¡i lÆ°á»¡ng nan":
*   Báº¡n cÃ³ má»™t giÃ¡ trá»‹ nguyÃªn thá»§y, vÃ­ dá»¥, má»™t sá»‘ `int`.
*   NhÆ°ng báº¡n láº¡i cáº§n nÃ³ pháº£i lÃ  má»™t **Ä‘á»‘i tÆ°á»£ng** `Integer` (vÃ­ dá»¥, khi lÃ m viá»‡c vá»›i `ArrayList` hay cÃ¡c collection khÃ¡c, vÃ¬ chÃºng chá»‰ chá»©a Ä‘á»‘i tÆ°á»£ng thÃ´i!).
*   Hoáº·c ngÆ°á»£c láº¡i! Báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng `Integer` vÃ  chá»‰ muá»‘n láº¥y cÃ¡i sá»‘ nguyÃªn thá»§y bÃªn trong nÃ³.

TrÆ°á»›c Ä‘Ã¢y, báº¡n pháº£i tá»± tay "Ä‘Ã³ng gÃ³i" hoáº·c "má»Ÿ gÃ³i" chÃºng. Tháº­t lÃ ... phiá»n phá»©c!

May máº¯n thay, Java Ä‘Ã£ lÃ m Ä‘iá»u Ä‘Ã³ *tá»± Ä‘á»™ng* cho báº¡n! PhÃ©p thuáº­t Ä‘Ã³ chÃ­nh lÃ  **autoboxing** (tá»± Ä‘á»™ng Ä‘Ã³ng há»™p) vÃ  **unboxing** (tá»± Ä‘á»™ng má»Ÿ há»™p).

### Autoboxing lÃ  gÃ¬? (Tá»± Ä‘á»™ng Ä‘Ã³ng há»™p)

ÄÃ¢y lÃ  lÃºc Java *tá»± Ä‘á»™ng* biáº¿n má»™t kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y thÃ nh Ä‘á»‘i tÆ°á»£ng bao bá»c (wrapper object) tÆ°Æ¡ng á»©ng cá»§a nÃ³. NhÆ° kiá»ƒu "Ä‘Ã³ng há»™p" má»™t giÃ¡ trá»‹ nguyÃªn thá»§y vÃ o má»™t Ä‘á»‘i tÆ°á»£ng váº­y!

HÃ£y xem vÃ­ dá»¥ nÃ y:
```java
int diemSo = 100; // ÄÃ¢y lÃ  má»™t kiá»ƒu nguyÃªn thá»§y 'int'
```
BÃ¢y giá», báº¡n muá»‘n thÃªm `diemSo` vÃ o má»™t `ArrayList` cá»§a `Integer`:
```java
import java.util.ArrayList;

ArrayList<Integer> bangDiem = new ArrayList<>();
bangDiem.add(diemSo); // Wow! Java Ä‘Ã£ tá»± Ä‘á»™ng biáº¿n 'int' diemSo thÃ nh Ä‘á»‘i tÆ°á»£ng 'Integer'
                     // rá»“i thÃªm vÃ o bangDiem! Báº¡n khÃ´ng cáº§n lÃ m gÃ¬ cáº£!
```
á» dÃ²ng `bangDiem.add(diemSo);`, Java Ä‘Ã£ ngáº§m lÃ m Ä‘iá»u nÃ y cho báº¡n:
```java
// bangDiem.add(Integer.valueOf(diemSo)); // Báº¡n KHÃ”NG Cáº¦N viáº¿t dÃ²ng nÃ y!
```
ÄÃ³ chÃ­nh lÃ  **autoboxing**! Java tháº¥y báº¡n cáº§n má»™t `Integer` mÃ  báº¡n láº¡i Ä‘Æ°a `int`, tháº¿ lÃ  nÃ³ tá»± Ä‘á»™ng "Ä‘Ã³ng há»™p" `int` Ä‘Ã³ thÃ nh `Integer` cho báº¡n!

### Unboxing lÃ  gÃ¬? (Tá»± Ä‘á»™ng má»Ÿ há»™p)

ÄÃºng nhÆ° tÃªn gá»i, nÃ³ lÃ  chiá»u ngÆ°á»£c láº¡i! Java *tá»± Ä‘á»™ng* biáº¿n má»™t Ä‘á»‘i tÆ°á»£ng bao bá»c thÃ nh kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y tÆ°Æ¡ng á»©ng cá»§a nÃ³. NhÆ° kiá»ƒu "má»Ÿ há»™p" Ä‘á»‘i tÆ°á»£ng ra Ä‘á»ƒ láº¥y giÃ¡ trá»‹ nguyÃªn thá»§y bÃªn trong váº­y.

Tiáº¿p tá»¥c vá»›i vÃ­ dá»¥ trÃªn, bÃ¢y giá» báº¡n muá»‘n láº¥y Ä‘iá»ƒm sá»‘ tá»« `bangDiem` ra vÃ  lÆ°u vÃ o má»™t biáº¿n `int`:
```java
Integer diemDauTien = bangDiem.get(0); // Láº¥y ra má»™t Ä‘á»‘i tÆ°á»£ng 'Integer' tá»« ArrayList
int diemNgayHomNay = diemDauTien; // Tuyá»‡t vá»i! Java tá»± Ä‘á»™ng biáº¿n Ä‘á»‘i tÆ°á»£ng 'Integer' thÃ nh 'int'!
```
á» dÃ²ng `int diemNgayHomNay = diemDauTien;`, Java Ä‘Ã£ ngáº§m lÃ m Ä‘iá»u nÃ y:
```java
// int diemNgayHomNay = diemDauTien.intValue(); // Báº¡n cÅ©ng KHÃ”NG Cáº¦N viáº¿t dÃ²ng nÃ y!
```
ÄÃ³ chÃ­nh lÃ  **unboxing**! Java tháº¥y báº¡n cáº§n má»™t `int` mÃ  báº¡n láº¡i Ä‘Æ°a `Integer`, tháº¿ lÃ  nÃ³ tá»± Ä‘á»™ng "má»Ÿ há»™p" `Integer` Ä‘Ã³ thÃ nh `int` cho báº¡n!

### TÃ³m láº¡i siÃªu Ä‘Æ¡n giáº£n:

*   **Autoboxing**: Biáº¿n `kiá»ƒu nguyÃªn thá»§y` thÃ nh `Äá»‘i tÆ°á»£ng bao bá»c` (vÃ­ dá»¥: `int` -> `Integer`).
*   **Unboxing**: Biáº¿n `Äá»‘i tÆ°á»£ng bao bá»c` thÃ nh `kiá»ƒu nguyÃªn thá»§y` (vÃ­ dá»¥: `Integer` -> `int`).

Java lÃ m táº¥t cáº£ nhá»¯ng Ä‘iá»u nÃ y *tá»± Ä‘á»™ng* cho báº¡n, giÃºp code cá»§a báº¡n trÃ´ng gá»n gÃ ng vÃ  "sáº¡ch" hÆ¡n ráº¥t nhiá»u. Báº¡n khÃ´ng cáº§n pháº£i lo láº¯ng vá» viá»‡c chuyá»ƒn Ä‘á»•i qua láº¡i ná»¯a! Tháº­t lÃ  má»™t tiá»‡n Ã­ch tuyá»‡t vá»i, pháº£i khÃ´ng nÃ o?

    Báº¡n biáº¿t khÃ´ng, Java cÃ³ má»™t trÃ² ma thuáº­t nhá» tÃªn lÃ  **autoboxing**!

NÃ³ hoáº¡t Ä‘á»™ng tháº¿ nÃ y: khi báº¡n cÃ³ má»™t kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y (nhÆ° `int` hay `double` áº¥y), vÃ  Java cáº§n nÃ³ nhÆ° má»™t Ä‘á»‘i tÆ°á»£ng (vÃ­ dá»¥, má»™t `Integer` hoáº·c `Double`), thÃ¬ Java sáº½ tá»± Ä‘á»™ng biáº¿n Ä‘á»•i kiá»ƒu nguyÃªn thá»§y Ä‘Ã³ thÃ nh Ä‘á»‘i tÆ°á»£ng bao bá»c tÆ°Æ¡ng á»©ng cho báº¡n. KhÃ´ng cáº§n báº¡n pháº£i lÃ m gÃ¬ cáº£!

CÃ¹ng xem má»™t vÃ­ dá»¥ siÃªu Ä‘Æ¡n giáº£n Ä‘á»ƒ tháº¥y nÃ³ hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o nhÃ©:

    ```java
    public class AutoboxingDemo{
        public static void main(String args[]){
            int num = 10;
            Integer x = Integer.valueOf(num); // Converting primitive int into Integer explicitly
            Integer y = num; // Autoboxing without explicit conversion

            System.out.println("x = "+ x + " y " + y);
        }
    }
    ```

    2. Nhá»› khÃ´ng? ChÃºng ta cÃ³ máº¥y anh chÃ ng Ä‘á»‘i tÆ°á»£ng bao bá»c (wrapper objects) nhÆ° `Integer` hay `Double` áº¥y. Máº¥y anh nÃ y thÃ¬ tiá»‡n lá»£i tháº­t, nhÆ°ng Ä‘Ã´i khi, báº¡n láº¡i chá»‰ muá»‘n cÃ¡i giÃ¡ trá»‹ nguyÃªn thá»§y "thÃ´ sÆ¡" bÃªn trong thÃ´i.

VÃ­ dá»¥, báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng `Integer` nhÆ°ng láº¡i cáº§n má»™t giÃ¡ trá»‹ `int` Ä‘á»ƒ lÃ m phÃ©p tÃ­nh. Váº­y lÃ m sao Ä‘á»ƒ "láº¥y Ä‘á»“ ra khá»i há»™p" Ä‘Ã¢y?

Tá»« Java 5 trá»Ÿ Ä‘i, Java Ä‘Ã£ trá»Ÿ nÃªn cá»±c ká»³ thÃ´ng minh! NÃ³ cÃ³ thá»ƒ tá»± Ä‘á»™ng "bÃ³c há»™p" cho báº¡n. Viá»‡c nÃ y Ä‘Æ°á»£c gá»i lÃ  **unboxing** (hay cÃ²n gá»i lÃ  'tá»± Ä‘á»™ng bÃ³c há»™p').

NÃ³ hoáº¡t Ä‘á»™ng tháº¿ nÃ y:
Khi nÃ o báº¡n cáº§n má»™t kiá»ƒu nguyÃªn thá»§y (primitive type), mÃ  báº¡n láº¡i Ä‘Æ°a cho nÃ³ má»™t Ä‘á»‘i tÆ°á»£ng bao bá»c (wrapper object) tÆ°Æ¡ng á»©ng... thÃ¬ Java sáº½ tá»± Ä‘á»™ng bÃ³c tÃ¡ch giÃ¡ trá»‹ nguyÃªn thá»§y ra khá»i Ä‘á»‘i tÆ°á»£ng Ä‘Ã³. Ta-da!

HÃ£y xem vÃ­ dá»¥ nÃ y nhÃ©:

```java
Integer diemSoCuaBan = 100; // ÄÃ¢y lÃ  má»™t Ä‘á»‘i tÆ°á»£ng Integer

// NgÃ y xÆ°a, báº¡n pháº£i tá»± tay lÃ m tháº¿ nÃ y Ä‘á»ƒ láº¥y giÃ¡ trá»‹ int:
// int diemSoDangSo = diemSoCuaBan.intValue();

// NhÆ°ng bÃ¢y giá», Java tá»± Ä‘á»™ng lÃ m Ä‘iá»u Ä‘Ã³ cho báº¡n!
int diemSoDangSo = diemSoCuaBan; // Java tá»± Ä‘á»™ng unboxing á»Ÿ Ä‘Ã¢y!
// Báº¡n khÃ´ng cáº§n gá»i .intValue() ná»¯a!

System.out.println("Äiá»ƒm cá»§a báº¡n lÃ : " + diemSoDangSo); // Káº¿t quáº£: Äiá»ƒm cá»§a báº¡n lÃ : 100

// Hoáº·c khi báº¡n dÃ¹ng trong phÃ©p toÃ¡n:
Integer soTrongHop = 5;
int soNguyenThuy = 2;
int tong = soTrongHop + soNguyenThuy; // Java tá»± Ä‘á»™ng unbox 'soTrongHop' thÃ nh 5 trÆ°á»›c khi cá»™ng.

System.out.println("Tá»•ng lÃ : " + tong); // Káº¿t quáº£: Tá»•ng lÃ : 7
```

Tháº¥y chÆ°a? Java tá»± Ä‘á»™ng "bÃ³c há»™p" vÃ  láº¥y giÃ¡ trá»‹ `int` ra cho báº¡n khi báº¡n cáº§n nÃ³ dÆ°á»›i dáº¡ng `int`. QuÃ¡ tiá»‡n lá»£i pháº£i khÃ´ng nÃ o? NÃ³ giÃºp mÃ£ cá»§a báº¡n gá»n gÃ ng vÃ  dá»… Ä‘á»c hÆ¡n ráº¥t nhiá»u!
       NÃ y, báº¡n cÃ³ nhá»› cÃ¡c Ä‘á»‘i tÆ°á»£ng wrapper class khÃ´ng? Khi Java tá»± Ä‘á»™ng biáº¿n má»™t Ä‘á»‘i tÆ°á»£ng wrapper class thÃ nh kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y cá»§a nÃ³, chÃºng ta gá»i Ä‘Ã³ lÃ  **unboxing**!

VÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y sáº½ cho báº¡n tháº¥y cáº£ cÃ¡ch chÃºng ta tá»± 'giáº£i Ä‘Ã³ng gÃ³i' vÃ  cÃ¡ch Java tá»± Ä‘á»™ng lÃ m Ä‘iá»u Ä‘Ã³ nhÃ©!

    ```java
    public class UnboxingDemo{
       public static void main(String args[]){
           Integer num = new Integer(3);
           int x = num.intValue(); //Converting Integer to int explicitly
           int y = num; //Unboxing without manual conversion

           System.out.println("x ="+ x + "y = "+y);
       }
    }
    ```

    **LÆ°u Ã½:** Ã€ nÃ y, cÃ³ má»™t Ä‘iá»u nhá» xÃ­u báº¡n cáº§n nhá»› nha! Máº¥y cÃ¡i tÃ­nh nÄƒng "tá»± Ä‘á»™ng Ä‘Ã³ng gÃ³i" (autoboxing) vÃ  "tá»± Ä‘á»™ng má»Ÿ gÃ³i" (unboxing) siÃªu tiá»‡n lá»£i nÃ y Ã¡, chÃºng khÃ´ng pháº£i lÃºc nÃ o cÅ©ng cÃ³ sáºµn Ä‘Ã¢u. Báº¡n chá»‰ cÃ³ thá»ƒ dÃ¹ng Ä‘Æ°á»£c chÃºng ká»ƒ tá»« phiÃªn báº£n JDK 1.5 trá»Ÿ Ä‘i thÃ´i Ä‘Ã³! TrÆ°á»›c Ä‘Ã³ lÃ  khÃ´ng cÃ³ Ä‘Ã¢u nha.

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

12. ### Khoan Ä‘Ã£! Java khÃ´ng pháº£i lÃ  ngÃ´n ngá»¯ hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng "thuáº§n tÃºy" sao?

    Báº¡n cÃ³ biáº¿t khÃ´ng? DÃ¹ Java ráº¥t ná»•i tiáº¿ng vá»›i láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng, nhÆ°ng thá»±c ra nÃ³ **khÃ´ng pháº£i lÃ  má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng "thuáº§n chá»§ng"** Ä‘Ã¢u nhÃ©! Nghe láº¡ pháº£i khÃ´ng?

Ã€, cÃ³ hai lÃ½ do chÃ­nh cho chuyá»‡n nÃ y Ä‘áº¥y.

    1. NÃ y, báº¡n cÃ³ biáº¿t khÃ´ng? Java váº«n 'Ä‘á»¡' cÃ¡c kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y (primitive data types) Ä‘áº¥y, vÃ­ dá»¥ nhÆ° `int`, `byte`, `long`, `short`, vÃ  nhiá»u loáº¡i khÃ¡c ná»¯a.

VÃ  Ä‘Ã¢y lÃ  Ä‘iá»u quan trá»ng: **chÃºng khÃ´ng pháº£i lÃ  Ä‘á»‘i tÆ°á»£ng (objects)!** ÄÃºng váº­y, chÃºng chá»‰ lÃ  nhá»¯ng giÃ¡ trá»‹ Ä‘Æ¡n giáº£n thÃ´i.

Tháº¿ nhÆ°ng, báº¡n cÃ³ thá»ƒ tá»± há»i: "Æ , nhÆ°ng tÃ´i cÃ³ thá»ƒ chuyá»ƒn Ä‘á»•i chÃºng thÃ nh Ä‘á»‘i tÆ°á»£ng báº±ng cÃ¡ch dÃ¹ng cÃ¡c lá»›p bao bá»c (wrapper classes) mÃ ?" ÄÃºng rá»“i Ä‘áº¥y! Báº¡n hoÃ n toÃ n cÃ³ thá»ƒ dÃ¹ng `Integer` cho `int`, `Byte` cho `byte`, vÃ¢n vÃ¢n. Nghe cÃ³ váº» nhÆ° má»i thá»© Ä‘á»u lÃ  Ä‘á»‘i tÆ°á»£ng rá»“i nhá»‰?

Ã€, nhÆ°ng khoan Ä‘Ã£! Máº·c dÃ¹ cÃ³ 'mÃ¡nh' nÃ y, Ä‘iá»u Ä‘Ã³ váº«n **khÃ´ng lÃ m cho Java trá»Ÿ thÃ nh má»™t ngÃ´n ngá»¯ hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng 'thuáº§n tÃºy' (pure object-oriented)** Ä‘Ã¢u.

Báº¡n tháº¯c máº¯c táº¡i sao Æ°?

ÄÃ³ lÃ  vÃ¬ nhá»¯ng Ä‘á»‘i tÆ°á»£ng 'bao bá»c' nÃ y khÃ´ng pháº£i lÃ  'nguyÃªn báº£n' thuá»™c vá» Java tá»« Ä‘áº§u. VÃ  quan trá»ng hÆ¡n, khi báº¡n sá»­ dá»¥ng chÃºng, Java sáº½ Ã¢m tháº§m thá»±c hiá»‡n cÃ¡c thao tÃ¡c 'ma thuáº­t' bÃªn trong nhÆ° Unboxing vÃ  Autoboxing.

NÃ³i cÃ¡ch khÃ¡c, ngay cáº£ khi báº¡n Ä‘ang 'diá»‡n' nhá»¯ng chiáº¿c Ã¡o choÃ ng wrapper class hÃ o nhoÃ¡ng, thÃ¬ 'dÆ°á»›i mui xe' (under the hood), khi Ä‘áº¿n lÃºc tÃ­nh toÃ¡n, Java váº«n Ã¢m tháº§m 'cá»Ÿi Ã¡o' ra vÃ  sá»­ dá»¥ng láº¡i cÃ¡c kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y 'cÅ© ká»¹' áº¥y Ä‘áº¥y! Váº­y nÃªn, dÃ¹ cÃ³ wrapper, thÃ¬ báº£n cháº¥t tÃ­nh toÃ¡n váº«n lÃ  cá»§a primitive types!

    2. Cáº£ biáº¿n `static` vÃ  phÆ°Æ¡ng thá»©c `static` Ä‘á»u cÃ³ má»™t siÃªu nÄƒng lá»±c: báº¡n khÃ´ng cáº§n táº¡o ra má»™t *Ä‘á»‘i tÆ°á»£ng* nÃ o Ä‘á»ƒ sá»­ dá»¥ng chÃºng cáº£. Tháº­t Ä‘áº¥y!

Thay vÃ o Ä‘Ã³, chÃºng 'gáº¯n liá»n' vá»›i chÃ­nh cÃ¡i *lá»›p* (class) chá»©a chÃºng.

Nghe cÃ³ váº» hÆ¡i... 'Ä‘i ngÆ°á»£c' láº¡i vá»›i nguyÃªn táº¯c cá»‘t lÃµi cá»§a Láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng (OOP) nhá»‰? Bá»Ÿi vÃ¬ trong OOP, chÃºng ta luÃ´n Ä‘Æ°á»£c há»c ráº±ng *má»i thá»© Ä‘á»u lÃ  má»™t Ä‘á»‘i tÆ°á»£ng*!

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

13. NÃ y báº¡n! Báº¡n Ä‘ang bÄƒn khoÄƒn vá» `abstract class` vÃ  `interface` Æ°? Hai anh báº¡n nÃ y trÃ´ng cÃ³ váº» giá»‘ng nhau nhÆ°ng thá»±c ra láº¡i khÃ¡c nhau má»™t trá»i má»™t vá»±c Ä‘áº¥y. HÃ£y cÃ¹ng "má»• xáº»" xem chÃºng cÃ³ gÃ¬ Ä‘áº·c biá»‡t nhÃ©!

Äáº§u tiÃªn, hÃ£y hÃ¬nh dung má»™t chÃºt:

*   **`abstract class` (lá»›p trá»«u tÆ°á»£ng):**
    *   HÃ£y tÆ°á»Ÿng tÆ°á»£ng nÃ³ nhÆ° má»™t báº£n thiáº¿t káº¿ dá»Ÿ dang cho má»™t ngÃ´i nhÃ . NÃ³ cÃ³ thá»ƒ cÃ³ vÃ i bá»©c tÆ°á»ng Ä‘Ã£ xÃ¢y xong (gá»i lÃ  **phÆ°Æ¡ng thá»©c cá»¥ thá»ƒ**, tá»©c lÃ  cÃ³ code bÃªn trong) vÃ  vÃ i chá»— váº«n cÃ²n trá»‘ng, chá» ngÆ°á»i khÃ¡c Ä‘áº¿n hoÃ n thiá»‡n (gá»i lÃ  **phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng**, chá»‰ cÃ³ tÃªn mÃ  khÃ´ng cÃ³ code).
    *   Báº¡n **khÃ´ng thá»ƒ** tá»± mÃ¬nh xÃ¢y má»™t ngÃ´i nhÃ  tá»« báº£n thiáº¿t káº¿ dá»Ÿ dang nÃ y Ä‘Ã¢u nhÃ©. NÃ³ chá»‰ lÃ  ná»n táº£ng cho cÃ¡c lá»›p con "káº¿ thá»«a" vÃ  "hoÃ n thiá»‡n" mÃ  thÃ´i.
*   **`interface` (giao diá»‡n):**
    *   CÃ²n `interface` thÃ¬ sao? NÃ³ giá»‘ng nhÆ° má»™t **há»£p Ä‘á»“ng** váº­y. Há»£p Ä‘á»“ng nÃ y quy Ä‘á»‹nh rÃµ: "Ai muá»‘n kÃ½ vÃ o Ä‘Ã¢y thÃ¬ pháº£i lÃ m Ä‘Æ°á»£c táº¥t cáº£ nhá»¯ng Ä‘iá»u khoáº£n nÃ y!"
    *   NÃ³ chá»‰ toÃ n lÃ  cÃ¡c "lá»i há»©a háº¹n" (phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng) mÃ  thÃ´i, **khÃ´ng há» cÃ³ báº¥t ká»³ Ä‘oáº¡n mÃ£ thá»±c thi nÃ o** (trá»« cÃ¡c trÆ°á»ng há»£p Ä‘áº·c biá»‡t má»›i xuáº¥t hiá»‡n gáº§n Ä‘Ã¢y, chÃºng ta sáº½ nÃ³i sau). NÃ³ chá»‰ Ä‘á»‹nh nghÄ©a "báº¡n CÃ“ THá»‚ lÃ m gÃ¬", chá»© khÃ´ng pháº£i "báº¡n LÃ€ gÃ¬".

ÄÆ°á»£c rá»“i, bÃ¢y giá» chÃºng ta hÃ£y Ä‘i sÃ¢u vÃ o chi tiáº¿t hÆ¡n má»™t chÃºt nhÃ©!

### 1. Vá» "nhá»¯ng gÃ¬ chÃºng cÃ³ thá»ƒ chá»©a"

*   **`abstract class`:**
    *   CÃ³ thá»ƒ cÃ³ cáº£ **phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng** (khÃ´ng cÃ³ thÃ¢n, pháº£i Ä‘Æ°á»£c lá»›p con cÃ i Ä‘áº·t) VÃ€ **phÆ°Æ¡ng thá»©c cá»¥ thá»ƒ** (cÃ³ thÃ¢n, cÃ³ code bÃªn trong).
    *   CÃ³ thá»ƒ cÃ³ cÃ¡c biáº¿n bÃ¬nh thÆ°á»ng (biáº¿n instance, biáº¿n static, biáº¿n final, non-final).
    *   CÃ³ thá»ƒ cÃ³ `constructor` (hÃ m khá»Ÿi táº¡o), nhÆ°ng báº¡n khÃ´ng thá»ƒ gá»i trá»±c tiáº¿p nÃ³ Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng Ä‘Ã¢u. `Constructor` nÃ y chá»‰ Ä‘Æ°á»£c gá»i khi má»™t lá»›p con cá»§a `abstract class` Ä‘Æ°á»£c táº¡o ra thÃ´i.
    *   CÃ³ thá»ƒ cÃ³ cÃ¡c thÃ nh viÃªn vá»›i cÃ¡c quyá»n truy cáº­p khÃ¡c nhau (`public`, `protected`, `private`).
*   **`interface`:**
    *   NgÃ y xÆ°a, táº¥t cáº£ cÃ¡c phÆ°Æ¡ng thá»©c trong `interface` Ä‘á»u lÃ  **trá»«u tÆ°á»£ng** (vÃ  máº·c Ä‘á»‹nh lÃ  `public abstract`).
    *   NHÆ¯NG, tá»« Java 8 trá»Ÿ Ä‘i, nÃ³ cÃ²n cÃ³ thá»ƒ cÃ³ phÆ°Æ¡ng thá»©c `default` (cÃ³ thÃ¢n máº·c Ä‘á»‹nh) vÃ  `static` ná»¯a. Tá»« Java 9 thÃ¬ cÃ³ cáº£ `private` ná»¯a cÆ¡! Nghe cÃ³ váº» phá»©c táº¡p nhá»‰? Äá»«ng lo, hÃ£y cá»© nhá»› ráº±ng má»¥c Ä‘Ã­ch chÃ­nh cá»§a `interface` lÃ  Ä‘á»‹nh nghÄ©a cÃ¡c hÃ nh vi mÃ  khÃ´ng cáº§n quan tÃ¢m Ä‘áº¿n cÃ¡ch thá»±c hiá»‡n ban Ä‘áº§u.
    *   Táº¥t cáº£ cÃ¡c biáº¿n trong `interface` Ä‘á»u máº·c Ä‘á»‹nh lÃ  `public static final` (háº±ng sá»‘) Ä‘Ã³. Tá»©c lÃ  chÃºng lÃ  háº±ng sá»‘ cÃ´ng khai, khÃ´ng thá»ƒ thay Ä‘á»•i Ä‘Æ°á»£c.
    *   Tuyá»‡t Ä‘á»‘i **KHÃ”NG CÃ“** `constructor` nhÃ©. VÃ¬ nÃ³ khÃ´ng pháº£i lÃ  má»™t "lá»›p" Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng mÃ .
    *   Táº¥t cáº£ cÃ¡c thÃ nh viÃªn Ä‘á»u máº·c Ä‘á»‹nh lÃ  `public`.

### 2. Vá» "cÃ¡ch chÃºng Ä‘Æ°á»£c sá»­ dá»¥ng"

*   **`abstract class`:**
    *   Má»™t lá»›p con chá»‰ cÃ³ thá»ƒ `extends` (káº¿ thá»«a) **DUY NHáº¤T Má»˜T** `abstract class` thÃ´i nhÃ©. Giá»‘ng nhÆ° báº¡n chá»‰ cÃ³ má»™t Ã´ng bá»‘/bÃ  máº¹ ruá»™t váº­y. ÄÃ¢y lÃ  "Ä‘Æ¡n káº¿ thá»«a".
    *   ThÆ°á»ng dÃ¹ng cho cÃ¡c lá»›p cÃ³ quan há»‡ **"IS-A" (lÃ  má»™t loáº¡i...)** máº¡nh máº½, nÆ¡i báº¡n muá»‘n chia sáº» má»™t sá»‘ mÃ£ code chung nhÆ°ng váº«n muá»‘n cÃ³ sá»± linh hoáº¡t cho lá»›p con Ä‘á»ƒ tá»± Ä‘á»‹nh nghÄ©a má»™t sá»‘ hÃ nh vi khÃ¡c.
    *   **VÃ­ dá»¥:** `Animal` lÃ  `abstract class` (cÃ³ thá»ƒ cÃ³ phÆ°Æ¡ng thá»©c `eat()` Ä‘Ã£ Ä‘Æ°á»£c cÃ i Ä‘áº·t vÃ  `makeSound()` lÃ  trá»«u tÆ°á»£ng). `Dog` `extends` `Animal` vÃ  pháº£i cÃ i Ä‘áº·t `makeSound()`.
*   **`interface`:**
    *   Má»™t lá»›p cÃ³ thá»ƒ `implements` (thá»±c thi) **NHIá»€U** `interface` cÃ¹ng lÃºc. Giá»‘ng nhÆ° báº¡n cÃ³ thá»ƒ kÃ½ nhiá»u há»£p Ä‘á»“ng khÃ¡c nhau: há»£p Ä‘á»“ng lÃ m viá»‡c, há»£p Ä‘á»“ng thuÃª nhÃ , há»£p Ä‘á»“ng báº£o hiá»ƒm... ÄÃ¢y lÃ  "Ä‘a káº¿ thá»«a" vá» hÃ nh vi.
    *   ThÆ°á»ng dÃ¹ng Ä‘á»ƒ Ä‘á»‹nh nghÄ©a má»™t **"kháº£ nÄƒng"** hoáº·c **"hÃ nh vi"** mÃ  nhiá»u lá»›p **khÃ´ng liÃªn quan** cÃ³ thá»ƒ cÃ³. Quan há»‡ **"CAN-DO" (cÃ³ thá»ƒ lÃ m...)**.
    *   **VÃ­ dá»¥:** `Flyable` lÃ  `interface` (cÃ³ phÆ°Æ¡ng thá»©c `fly()`). Cáº£ `Bird` vÃ  `Airplane` Ä‘á»u `implements` `Flyable` vÃ  pháº£i cÃ i Ä‘áº·t phÆ°Æ¡ng thá»©c `fly()`.

### TÃ³m táº¯t nhanh gá»n láº¹!

Äá»ƒ dá»… nhá»›, hÃ£y nghÄ© tháº¿ nÃ y:

*   **`abstract class`**: **"LÃ€ Má»˜T"** (IS-A), cÃ³ thá»ƒ cÃ³ cáº£ Ä‘Ã£ lÃ m vÃ  chÆ°a lÃ m xong. Káº¿ thá»«a Ä‘Æ¡n.
*   **`interface`**: **"CÃ“ THá»‚ LÃ€M"** (CAN-DO), chá»‰ lÃ  lá»i há»©a (há»£p Ä‘á»“ng). Káº¿ thá»«a Ä‘a.

Hi vá»ng báº¡n Ä‘Ã£ hÃ¬nh dung Ä‘Æ°á»£c sá»± khÃ¡c biá»‡t giá»¯a hai "ngÆ°á»i báº¡n" nÃ y rá»“i nhÃ©!

    NÃ y báº¡n! Khi chÃºng ta lÃ m viá»‡c vá»›i láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng, Ä‘Ã´i khi mÃ¬nh muá»‘n 'quy Ä‘á»‹nh' nhá»¯ng gÃ¬ mÃ  cÃ¡c lá»›p khÃ¡c *pháº£i* lÃ m, Ä‘Ãºng khÃ´ng? Giá»‘ng nhÆ° má»™t báº£n há»£p Ä‘á»“ng váº­y Ä‘Ã³!

VÃ  báº¡n biáº¿t gÃ¬ khÃ´ng? Cáº£ `abstract class` (lá»›p trá»«u tÆ°á»£ng) láº«n `interface` (giao diá»‡n) Ä‘á»u lÃ  nhá»¯ng cÃ´ng cá»¥ siÃªu hay Ä‘á»ƒ giÃºp chÃºng ta lÃ m Ä‘iá»u Ä‘Ã³ Ä‘áº¥y! ChÃºng Ä‘á»u giÃºp mÃ¬nh Ä‘á»‹nh nghÄ©a cÃ¡c 'há»£p Ä‘á»“ng' trong code.

Nghe cÃ³ váº» giá»‘ng nhau nhá»‰? NhÆ°ng khoan Ä‘Ã£! Máº·c dÃ¹ cáº£ hai Ä‘á»u dÃ¹ng Ä‘á»ƒ táº¡o 'há»£p Ä‘á»“ng', chÃºng láº¡i cÃ³ nhá»¯ng Ä‘iá»ƒm khÃ¡c biá»‡t khÃ¡ quan trá»ng Ä‘áº¥y. HÃ£y cÃ¹ng khÃ¡m phÃ¡ xem Ä‘Ã³ lÃ  gÃ¬ nhÃ©!

    | Lá»›p trá»«u tÆ°á»£ng (Abstract class) | Giao diá»‡n (Interface) |
|---|---|
| TÆ°á»Ÿng tÆ°á»£ng Lá»›p trá»«u tÆ°á»£ng nhÆ° má»™t "khuÃ´n máº«u" chÆ°a hoÃ n chá»‰nh váº­y. NÃ³ cÃ³ thá»ƒ Ä‘Ã£ cÃ³ sáºµn má»™t vÃ i phÆ°Æ¡ng thá»©c hoáº¡t Ä‘á»™ng rá»“i, nhÆ°ng cÅ©ng cÃ³ nhá»¯ng phÆ°Æ¡ng thá»©c "trá»‘ng rá»—ng" (phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng) mÃ  cÃ¡c lá»›p con *nháº¥t Ä‘á»‹nh pháº£i* tá»± mÃ¬nh Ä‘iá»n vÃ o. | CÃ²n Giao diá»‡n thÃ¬ giá»‘ng nhÆ° má»™t "há»£p Ä‘á»“ng" áº¥y. NÃ³ nÃ³i ráº±ng, "NÃ y, náº¿u báº¡n muá»‘n trá»Ÿ thÃ nh loáº¡i nÃ y, báº¡n *pháº£i* cÃ³ Ä‘á»§ cÃ¡c phÆ°Æ¡ng thá»©c nÃ y nhÃ©." NÃ³ chá»‰ Ä‘á»‹nh *cáº§n lÃ m gÃ¬*, chá»© khÃ´ng há» chá»‰ *lÃ m tháº¿ nÃ o*. |
| NÃ³ cÃ³ thá»ƒ chá»©a cáº£ cÃ¡c phÆ°Æ¡ng thá»©c "bÃ¬nh thÆ°á»ng" (cÃ³ code bÃªn trong) VÃ€ cÃ¡c phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng (chá»‰ cÃ³ chá»¯ kÃ½, khÃ´ng cÃ³ code). | TrÆ°á»›c Java 8, táº¥t cáº£ cÃ¡c phÆ°Æ¡ng thá»©c cá»§a nÃ³ *buá»™c pháº£i* lÃ  trá»«u tÆ°á»£ng. KhÃ´ng Ä‘Æ°á»£c phÃ©p cÃ³ code! (Ã€, tá»« Java 8 trá»Ÿ Ä‘i thÃ¬ nÃ³ cÃ³ thá»ƒ cÃ³ thÃªm `default` vÃ  `static` method, nhÆ°ng thÃ´i, Ä‘á»ƒ dá»… hiá»ƒu thÃ¬ mÃ¬nh cá»© táº¡m bá» qua chá»— Ä‘Ã³ nhÃ©!) |
| Má»™t lá»›p chá»‰ cÃ³ thá»ƒ `extend` (káº¿ thá»«a) *duy nháº¥t má»™t* lá»›p trá»«u tÆ°á»£ng. Giá»‘ng nhÆ° báº¡n chá»‰ cÃ³ thá»ƒ cÃ³ má»™t ngÆ°á»i cha/máº¹ trá»±c tiáº¿p thÃ´i áº¥y. | Má»™t lá»›p cÃ³ thá»ƒ `implement` (triá»ƒn khai) *nhiá»u* giao diá»‡n khÃ¡c nhau. Cá»© nhÆ° báº¡n cÃ³ thá»ƒ kÃ½ ráº¥t nhiá»u há»£p Ä‘á»“ng váº­y! |
| CÃ³ thá»ƒ cÃ³ cÃ¡c biáº¿n thá»ƒ hiá»‡n (instance variables), biáº¿n tÄ©nh (static variables), vÃ  tháº­m chÃ­ lÃ  cáº£ hÃ m táº¡o (constructors) ná»¯a cÆ¡. | Táº¥t cáº£ cÃ¡c biáº¿n trong giao diá»‡n Ä‘á»u máº·c Ä‘á»‹nh lÃ  `public static final` (tá»©c lÃ  háº±ng sá»‘). Tuyá»‡t Ä‘á»‘i khÃ´ng Ä‘Æ°á»£c phÃ©p cÃ³ hÃ m táº¡o nhÃ©! |
    | ------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ |
    | CÃ¡i `abstract` NÃ y, báº¡n Ä‘Ã£ sáºµn sÃ ng gáº·p má»™t tá»« khÃ³a siÃªu Ä‘áº·c biá»‡t chÆ°a? ÄÃ³ chÃ­nh lÃ  `abstract`!

### 1. DÃ¹ng `abstract` Ä‘á»ƒ khai bÃ¡o lá»›p trá»«u tÆ°á»£ng

Khi báº¡n muá»‘n nÃ³i vá»›i Java ráº±ng "ÃŠ, cÃ¡i lá»›p nÃ y lÃ  má»™t `abstract class` (lá»›p trá»«u tÆ°á»£ng) Ä‘áº¥y!", báº¡n sáº½ dÃ¹ng tá»« khÃ³a `abstract`.

Báº¡n Ä‘áº·t nÃ³ ngay trÆ°á»›c chá»¯ `class` khi khai bÃ¡o lá»›p.
VÃ­ dá»¥ nhÆ° tháº¿ nÃ y nÃ¨:

```java
public abstract class MyAwesomeAbstractClass {
    // ... bÃªn trong lá»›p trá»«u tÆ°á»£ng nÃ y ...
}
```

Ã€ mÃ , má»™t `abstract class` thÃ¬ cÃ³ gÃ¬ Ä‘áº·c biá»‡t nhá»‰? NÃ³ giá»‘ng nhÆ° má»™t báº£n thiáº¿t káº¿ chÆ°a hoÃ n chá»‰nh váº­y Ä‘Ã³. Báº¡n **khÃ´ng thá»ƒ** tá»± mÃ¬nh táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng (object) trá»±c tiáº¿p tá»« nÃ³ Ä‘Ã¢u!

### 2. "Má»Ÿ rá»™ng" (extend) lá»›p trá»«u tÆ°á»£ng

Váº­y thÃ¬ lÃ m sao Ä‘á»ƒ dÃ¹ng Ä‘Æ°á»£c nÃ³? ÄÆ¡n giáº£n thÃ´i! Báº¡n cáº§n pháº£i "má»Ÿ rá»™ng" (extend) nÃ³!

Tá»©c lÃ , báº¡n pháº£i táº¡o má»™t lá»›p con (subclass) khÃ¡c, vÃ  lá»›p con nÃ y sáº½ "káº¿ thá»«a" tá»« lá»›p trá»«u tÆ°á»£ng cá»§a báº¡n.

VÃ  Ä‘á»ƒ "má»Ÿ rá»™ng" nÃ³, báº¡n sáº½ dÃ¹ng tá»« khÃ³a quen thuá»™c `extends` Ä‘Ã³!
TrÃ´ng nÃ³ sáº½ nhÆ° tháº¿ nÃ y:

```java
public class MyConcreteClass extends MyAwesomeAbstractClass {
    // Lá»›p nÃ y sáº½ hoÃ n thiá»‡n nhá»¯ng pháº§n cÃ²n thiáº¿u
    // tá»« MyAwesomeAbstractClass
}
``` `extends` **tá»« khÃ³a** | ÄÃ¢y lÃ  `interface` Khi báº¡n muá»‘n nÃ³i vá»›i Java ráº±ng "NÃ y, Ä‘Ã¢y lÃ  má»™t `interface`!", báº¡n sáº½ dÃ¹ng tá»« khÃ³a `interface` Ä‘á»ƒ khai bÃ¡o nÃ³.
VÃ  nhá»› ká»¹ nhÃ©, má»™t `interface` *chá»‰ cÃ³ thá»ƒ* "má»Ÿ rá»™ng" (hay `extend`) tá»« má»™t `interface` khÃ¡c mÃ  thÃ´i. NÃ³ khÃ´ng "má»Ÿ rá»™ng" tá»« má»™t `class` Ä‘Æ°á»£c Ä‘Ã¢u!
    | Lá»›p trá»«u tÆ°á»£ng (abstract class) | Giao diá»‡n (interface) |
|---|---|
| Má»™t `abstract class` (lá»›p trá»«u tÆ°á»£ng) cÃ³ thá»ƒ chá»©a cáº£ phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng (chá»‰ lÃ  cÃ¡i tÃªn, chÆ°a cÃ³ "viá»‡c lÃ m" cá»¥ thá»ƒ) **VÃ€** phÆ°Æ¡ng thá»©c khÃ´ng trá»«u tÆ°á»£ng (cÃ³ sáºµn "viá»‡c lÃ m" rá»“i). | Há»“i xÆ°a, má»™t `interface` (giao diá»‡n) chá»‰ Ä‘Æ°á»£c phÃ©p cÃ³ cÃ¡c phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng (toÃ n lÃ  "lá»i há»©a" thÃ´i). **NHÆ¯NG MÃ€ KHOAN!** Tá»« Java 8 trá»Ÿ Ä‘i, `interface` cÃ²n cÃ³ thá»ƒ cÃ³ thÃªm `default method` vÃ  `static method` ná»¯a Ä‘Ã³ (máº¥y cÃ¡i nÃ y thÃ¬ cÃ³ sáºµn "viá»‡c lÃ m" rá»“i nha!). |
    | NÃ³ há»— trá»£ Ä‘á»§ loáº¡i biáº¿n: tá»« biáº¿n `final` (giÃ¡ trá»‹ khÃ´ng Ä‘á»•i) Ä‘áº¿n `non-final` (giÃ¡ trá»‹ thay Ä‘á»•i Ä‘Æ°á»£c). Cáº£ biáº¿n `static` (thuá»™c vá» lá»›p) vÃ  `non-static` (thuá»™c vá» Ä‘á»‘i tÆ°á»£ng) cÅ©ng Ä‘Æ°á»£c luÃ´n. | Ã€, nhÆ°ng bÃªn nÃ y thÃ¬ 'kÃ©n chá»n' hÆ¡n má»™t chÃºt nhÃ©! NÃ³ chá»‰ há»— trá»£ Ä‘Ãºng hai loáº¡i biáº¿n thÃ´i: Ä‘Ã³ lÃ  biáº¿n `final` (giÃ¡ trá»‹ cá»‘ Ä‘á»‹nh) vÃ  biáº¿n `static` (biáº¿n thuá»™c vá» lá»›p). |
    | Má»™t `class` khÃ´ng há»— trá»£ 'Ä‘a káº¿ thá»«a' Ä‘Ã¢u nha. NÃ³ chá»‰ káº¿ thá»«a tá»« Má»˜T `class` thÃ´i! | CÃ²n `interface` thÃ¬ láº¡i OK vá»›i 'Ä‘a káº¿ thá»«a'! Má»™t `class` cÃ³ thá»ƒ `implement` nhiá»u `interface` cÃ¹ng lÃºc Ä‘Ã³. |
    Báº¡n cÃ³ thá»ƒ dÃ¹ng cÃ¡c 'bá»™ Ä‘iá»u chá»‰nh truy cáº­p' (access modifiers) nhÆ° `public`, `protected`, vÃ  `private` cho cÃ¡c phÆ°Æ¡ng thá»©c (hÃ nh Ä‘á»™ng) vÃ  thuá»™c tÃ­nh (dá»¯ liá»‡u) cá»§a nÃ³. TÆ°á»Ÿng tÆ°á»£ng nhÆ° báº¡n Ä‘ang Ä‘áº·t cÃ¡c 'cÃ¡nh cá»­a' khÃ¡c nhau áº¥y! | CÃ²n bÃªn nÃ y thÃ¬ Ä‘Æ¡n giáº£n hÆ¡n nhiá»u! NÃ³ chá»‰ cÃ³ duy nháº¥t má»™t 'cÃ¡nh cá»­a' thÃ´i, Ä‘Ã³ lÃ  `public`. NghÄ©a lÃ  táº¥t cáº£ má»i ngÆ°á»i Ä‘á»u cÃ³ thá»ƒ 'tháº¥y' vÃ  'dÃ¹ng' nÃ³ má»™t cÃ¡ch thoáº£i mÃ¡i.

    **Note:** Cáº£ Lá»›p trá»«u tÆ°á»£ng (Abstract class) vÃ  Giao diá»‡n (interface) Ä‘á»u khÃ´ng thá»ƒ 'táº¡o má»›i' (hay cÃ²n gá»i lÃ  'khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng' - instantiate) trá»±c tiáº¿p Ä‘Æ°á»£c Ä‘Ã¢u nhÃ©!

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

14. ### Váº­y thÃ¬, Giao diá»‡n Ä‘Ã¡nh dáº¥u lÃ  gÃ¬?

    `Marker interface` lÃ  gÃ¬? Nghe tÃªn hÆ¡i láº¡ Ä‘Ãºng khÃ´ng? Äá»«ng lo!

Thá»±c ra, chÃºng chá»‰ lÃ  nhá»¯ng `interface`... rá»—ng tuáº¿ch mÃ  thÃ´i!
ÄÃºng váº­y, bÃªn trong chÃºng cháº³ng cÃ³ báº¥t ká»³ trÆ°á»ng (field), phÆ°Æ¡ng thá»©c (method) hay háº±ng sá»‘ (constant) nÃ o cáº£.

ChÃ­nh vÃ¬ tháº¿, ngÆ°á»i ta cÃ²n gá»i chÃºng báº±ng nhá»¯ng cÃ¡i tÃªn khÃ¡c lÃ  `empty interface` (interface rá»—ng) hay `tag interface` (interface Ä‘Ã¡nh dáº¥u).

Báº¡n cÃ³ thá»ƒ Ä‘Ã£ gáº·p má»™t vÃ i vÃ­ dá»¥ quen thuá»™c rá»“i Ä‘áº¥y:

*   `java.io.Serializable`
*   `java.lang.Cloneable`
*   `java.rmi.Remote`

Váº­y `interface` rá»—ng tuáº¿ch nÃ y sinh ra Ä‘á»ƒ lÃ m gÃ¬?

Nhiá»‡m vá»¥ chÃ­nh cá»§a chÃºng lÃ  Ä‘á»ƒ 'mÃ¡ch' cho JVM (Java Virtual Machine) vÃ  Compiler (trÃ¬nh biÃªn dá»‹ch) biáº¿t thÃªm vá» 'kiá»ƒu' cá»§a má»™t Ä‘á»‘i tÆ°á»£ng (object) khi chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y. NÃ³i cÃ¡ch khÃ¡c, chÃºng cung cáº¥p 'thÃ´ng tin bá»• sung vá» kiá»ƒu' cho Ä‘á»‘i tÆ°á»£ng Ä‘Ã³.

Báº¡n sáº½ tháº¥y chÃºng xuáº¥t hiá»‡n ráº¥t nhiá»u trong phÃ¡t triá»ƒn API, vÃ  Ä‘áº·c biá»‡t lÃ  trong cÃ¡c framework lá»›n nhÆ° Spring. ChÃºng giÃºp 'gáº¯n thÃªm' nhá»¯ng thÃ´ng tin hoáº·c 'Ä‘Ã¡nh dáº¥u' má»™t Ã½ nghÄ©a Ä‘áº·c biá»‡t nÃ o Ä‘Ã³ cho má»™t class.

    Báº¡n sáº½ gáº·p chÃºng *thÆ°á»ng xuyÃªn* Ä‘áº¥y! ÄÃ¢y lÃ  má»™t vÃ i giao diá»‡n Ä‘Ã¡nh dáº¥u (marker interfaces) 'cÃ³ sáºµn' mÃ  Java Ä‘Ã£ chuáº©n bá»‹ cho chÃºng ta:

    1. **Cloneable:**

Báº¡n Ä‘Ã£ bao giá» muá»‘n táº¡o má»™t báº£n sao chÃ­nh xÃ¡c cá»§a má»™t Ä‘á»‘i tÆ°á»£ng chÆ°a? Giá»‘ng nhÆ° báº¡n cÃ³ má»™t bá»©c áº£nh vÃ  muá»‘n in ra má»™t báº£n y há»‡t váº­y Ä‘Ã³!

Äá»ƒ lÃ m Ä‘Æ°á»£c Ä‘iá»u Ä‘Ã³, Java cÃ³ má»™t "anh báº¡n" tÃªn lÃ  `Cloneable`!

`Cloneable` lÃ  gÃ¬?
*   NÃ³ lÃ  má»™t *interface* (giao diá»‡n) Ä‘áº·c biá»‡t.
*   Äiá»u thÃº vá»‹ lÃ : nÃ³ khÃ´ng há» cÃ³ báº¥t ká»³ phÆ°Æ¡ng thá»©c nÃ o bÃªn trong cáº£! ÄÃºng váº­y, nÃ³ trá»‘ng rá»—ng!
*   Váº­y nÃ³ lÃ m gÃ¬? NÃ³ giá»‘ng nhÆ° má»™t *nhÃ£n dÃ¡n* hay má»™t *dáº¥u hiá»‡u* váº­y Ä‘Ã³.

Khi báº¡n "dÃ¡n nhÃ£n" `Cloneable` lÃªn má»™t lá»›p (báº±ng cÃ¡ch cho lá»›p Ä‘Ã³ `implement Cloneable`), báº¡n Ä‘ang nÃ³i vá»›i Java ráº±ng: "NÃ y, cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p nÃ y *cÃ³ thá»ƒ* Ä‘Æ°á»£c nhÃ¢n báº£n (clone) an toÃ n Ä‘áº¥y!"

Náº¿u báº¡n khÃ´ng dÃ¡n nhÃ£n nÃ y mÃ  cá»‘ gáº¯ng nhÃ¢n báº£n, Java sáº½ khÃ´ng vui Ä‘Ã¢u vÃ  nÃ©m ra lá»—i `CloneNotSupportedException` Ä‘áº¥y!

Váº­y `Cloneable` **cÃ³ sáºµn trong** gÃ³i `java.lang`.
ÄÃºng rá»“i, gÃ³i `java.lang` lÃ  nÆ¡i chá»©a ráº¥t nhiá»u thá»© cÆ¡ báº£n vÃ  quan trá»ng nháº¥t cá»§a Java Ä‘Ã³! `java.lang` GÃ³i.
NÃ y, thá»­ tÆ°á»Ÿng tÆ°á»£ng báº¡n muá»‘n táº¡o má»™t báº£n sao y há»‡t (clone) cá»§a má»™t Ä‘á»‘i tÆ°á»£ng nÃ o Ä‘Ã³ nhÃ©.
NhÆ°ng mÃ , náº¿u Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ láº¡i CHÆ¯A "Ä‘Äƒng kÃ½" (implement) cÃ¡i giao diá»‡n Ä‘Ã¡nh dáº¥u (marker interface) Ä‘áº·c biá»‡t nÃ y thÃ¬ sao?
Khi báº¡n cá»‘ gáº¯ng "nhÃ¢n báº£n" nÃ³, thÃ¬ BÃ™M!
JVM sáº½ khÃ´ng vui Ä‘Ã¢u, vÃ  nÃ³ sáº½ NÃ‰M ra má»™t... `CloneNotSupportedException`Ã€, tá»©c lÃ , Ä‘Ã¢y lÃ  má»™t *marker interface* (interface Ä‘Ã¡nh dáº¥u) Ä‘Ã³. NÃ³ Ä‘Æ°á»£c dÃ¹ng nhÆ° má»™t tÃ­n hiá»‡u, má»™t dáº¥u hiá»‡u Ä‘á»ƒ "bÃ¡o" cho JVM biáº¿t ráº±ng: "NÃ¨, hoÃ n toÃ n há»£p lá»‡ khi gá»i..." `Object.clone()` ChÃ o báº¡n! Nhá»› khÃ´ng, chÃºng ta Ä‘Ã£ gáº·p gá»¡ cÃ¡c Ä‘á»‘i tÆ°á»£ng (objects) rá»“i Ä‘Ãºng khÃ´ng?

Má»™t Ä‘á»‘i tÆ°á»£ng khÃ´ng chá»‰ "cÃ³ máº·t" mÃ  nÃ³ cÃ²n pháº£i "lÃ m gÃ¬ Ä‘Ã³" ná»¯a chá»©!

VÃ­ dá»¥, báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng `Dog` (con chÃ³). Con chÃ³ nÃ y cÃ³ thá»ƒ `sá»§a()`, `Äƒn()`, `ngá»§()`. Nhá»¯ng hÃ nh Ä‘á»™ng `sá»§a()`, `Äƒn()`, `ngá»§()` nÃ y chÃ­nh lÃ  cÃ¡c **phÆ°Æ¡ng thá»©c** (methods) Ä‘áº¥y!

*   **PhÆ°Æ¡ng thá»©c lÃ  gÃ¬?**
    *   NÃ³ giá»‘ng nhÆ° má»™t "hÆ°á»›ng dáº«n hÃ nh Ä‘á»™ng" hoáº·c "cÃ´ng thá»©c" náº±m bÃªn trong Ä‘á»‘i tÆ°á»£ng.
    *   NÃ³ cho Ä‘á»‘i tÆ°á»£ng biáº¿t *cÃ¡ch* thá»±c hiá»‡n má»™t viá»‡c cá»¥ thá»ƒ.
    *   Khi báº¡n muá»‘n Ä‘á»‘i tÆ°á»£ng lÃ m gÃ¬ Ä‘Ã³, báº¡n chá»‰ cáº§n "gá»i" phÆ°Æ¡ng thá»©c cá»§a nÃ³.

TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y: Báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng `TV` (cÃ¡i tivi). Äá»ƒ báº­t tivi, báº¡n khÃ´ng thá»ƒ chá»‰ nghÄ© "báº­t tivi". Báº¡n pháº£i "nháº¥n nÃºt báº­t" trÃªn Ä‘iá»u khiá»ƒn, Ä‘Ãºng khÃ´ng?

CÃ¡i "nháº¥n nÃºt báº­t" Ä‘Ã³ chÃ­nh lÃ  má»™t **phÆ°Æ¡ng thá»©c**! NÃ³ lÃ  hÃ nh Ä‘á»™ng mÃ  Ä‘á»‘i tÆ°á»£ng `TV` cÃ³ thá»ƒ thá»±c hiá»‡n.

Má»—i phÆ°Æ¡ng thá»©c sáº½ cÃ³ má»™t cÃ¡i tÃªn (vÃ­ dá»¥: `sá»§a`, `Äƒn`, `ngá»§`) vÃ  má»™t cáº·p dáº¥u ngoáº·c Ä‘Æ¡n `()` á»Ÿ sau (vÃ­ dá»¥: `sá»§a()`). Cáº·p ngoáº·c nÃ y Ä‘á»ƒ bÃ¡o hiá»‡u Ä‘Ã¢y lÃ  má»™t hÃ nh Ä‘á»™ng, má»™t phÆ°Æ¡ng thá»©c. ÄÃ´i khi bÃªn trong ngoáº·c sáº½ cÃ³ thÃªm thÃ´ng tin ná»¯a, nhÆ°ng Ä‘Ã³ lÃ  chuyá»‡n cá»§a nhá»¯ng bÃ i sau nhÃ©!

TÃ³m láº¡i: PhÆ°Æ¡ng thá»©c chÃ­nh lÃ  "nhá»¯ng gÃ¬ Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ lÃ m".
    2. **Serializable:**

NÃ y, báº¡n Ä‘Ã£ bao giá» nghÄ© Ä‘áº¿n viá»‡c lÆ°u trá»¯ má»™t Ä‘á»‘i tÆ°á»£ng Java Ä‘ang cháº¡y vÃ o má»™t tá»‡p tin, hay gá»­i nÃ³ qua máº¡ng chÆ°a? `Serializable` chÃ­nh lÃ  thá»© báº¡n cáº§n Ä‘Ã³!

*   NÃ³ lÃ  má»™t *giao diá»‡n* (interface) Ä‘áº·c biá»‡t trong Java.
*   Báº¡n khÃ´ng cáº§n pháº£i viáº¿t báº¥t ká»³ Ä‘oáº¡n mÃ£ nÃ o bÃªn trong nÃ³, nÃ³ chá»‰ lÃ  má»™t "dáº¥u hiá»‡u" (marker interface) cho Java biáº¿t ráº±ng: "NÃ y, cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c 'Ä‘Ã³ng gÃ³i' láº¡i thÃ nh má»™t chuá»—i byte Ä‘á»ƒ lÆ°u trá»¯ hoáº·c gá»­i Ä‘i Ä‘áº¥y!"
*   Báº¡n cÃ³ thá»ƒ tÃ¬m tháº¥y nÃ³ á»Ÿ Ä‘Ã¢u? NÃ³ cÃ³ sáºµn trong gÃ³i `java.io`. `java.io` Ã€, `package` (gÃ³i) nÃ¨.
TÆ°á»Ÿng tÆ°á»£ng nhÃ©, khi báº¡n muá»‘n 'ghi' má»™t Ä‘á»‘i tÆ°á»£ng (object) cá»§a mÃ¬nh ra ngoÃ i â€“ kiá»ƒu nhÆ° lÃ  Ä‘áº©y nÃ³ vÃ o má»™t `output stream` (luá»“ng Ä‘áº§u ra) áº¥y â€“ báº±ng cÃ¡ch dÃ¹ng... `ObjectOutputStream.writeObject()` mÃ  má»™t phÆ°Æ¡ng thá»©c láº¡i *khÃ´ng* hiá»‡n thá»±c (implement) cÃ¡i interface Ä‘Ã¡nh dáº¥u (marker interface) Ä‘áº·c biá»‡t nÃ y Ä‘Ã¢u nhÃ©,
thÃ¬ "ráº§m má»™t cÃ¡i", JVM sáº½ "ná»•i giáº­n" vÃ  *nÃ©m* ngay cho báº¡n má»™t cÃ¡i ngoáº¡i lá»‡ (exception) cÃ³ tÃªn lÃ  `NotSerializableException`.
    3. **Remote:**
NÃ y báº¡n Æ¡i! Khi nghe tá»« **Remote** (tá»« xa), báº¡n nghÄ© ngay Ä‘áº¿n cÃ¡i gÃ¬ nÃ o?
Má»™t chiáº¿c Ä‘iá»u khiá»ƒn TV Æ°? Hay lÃ  lÃ m viá»‡c tá»« xa? Chuáº©n khÃ´ng cáº§n chá»‰nh!
Trong láº­p trÃ¬nh, khi chÃºng ta nÃ³i vá» má»™t thá»© gÃ¬ Ä‘Ã³ **Remote**, Ã½ lÃ  nÃ³ khÃ´ng á»Ÿ ngay Ä‘Ã¢y, ngay trÆ°á»›c máº·t báº¡n Ä‘Ã¢u. NÃ³ náº±m á»Ÿ má»™t nÆ¡i nÃ o Ä‘Ã³ khÃ¡c, vÃ  báº¡n cÃ³ thá»ƒ tÆ°Æ¡ng tÃ¡c vá»›i nÃ³ tá»« xa.
VÃ  nÃ³ cÃ³ sáºµn á»Ÿ `java.rmi` Ã€, vá» `package` nÃ¨.
Khi báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng 'á»Ÿ xa' (remote object) trÃªn má»™t mÃ¡y tÃ­nh khÃ¡c vÃ  muá»‘n truy cáº­p nÃ³, thÃ¬ nhá»› ká»¹ Ä‘iá»u nÃ y nhÃ©:
Lá»›p cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ Báº®T BUá»˜C pháº£i cÃ i Ä‘áº·t (implement) cÃ¡i 'marker interface' nÃ y. ÄÃ¢y lÃ  Ä‘iá»u kiá»‡n DUY NHáº¤T Ä‘á»ƒ nÃ³ hoáº¡t Ä‘á»™ng!
Náº¿u khÃ´ng cÃ³ cÃ¡i 'tem' (marker interface) Ä‘Ã³, lÃ  'BÃ™M!', chÆ°Æ¡ng trÃ¬nh sáº½ nÃ©m ra má»™t exception (ngoáº¡i lá»‡) cÃ³ tÃªn lÃ ... `RemoteException`.

    Ã€ mÃ  nÃ¨, báº¡n cÃ²n nhá»› cÃ¡i interface Ä‘Ã¡nh dáº¥u tÃªn lÃ  `Cloneable` khÃ´ng? NÃ³ trÃ´ng Ä‘Æ¡n giáº£n láº¯m, chá»‰ tháº¿ nÃ y thÃ´i nÃ¨:

    ```java
    public interface Cloneable {
       // nothing here
    }
    ```

    VÃ  Ä‘Ã¢y lÃ  class `Student` cá»§a chÃºng ta. Class nÃ y sáº½ 'thá»±c thi' (implement) má»™t `interface` Ä‘áº·c biá»‡t tÃªn lÃ  `Cloneable`.

Báº¡n biáº¿t táº¡i sao khÃ´ng? Äá»ƒ nÃ³ cÃ³ thá»ƒ táº¡o ra má»™t Báº¢N SAO y há»‡t cá»§a chÃ­nh Ä‘á»‘i tÆ°á»£ng `Student` Ä‘Ã³ má»™t cÃ¡ch dá»… dÃ ng!

    ```java
    import java.lang.*;

    class Student implements cloneable {

        String name = null;
        int age = 0;

        Student(String name, int age) {
            this.name = name;
            this.age = age;
        }

        @Override
        protected Object clone() throws CloneNotSupportedException {
            return super.clone();
        }

        public static void main(String[] args) {

            Student s1 = new Student("Sudheer", 30);
            //Create clone of s1 object
            try {
                Student s2 = s1.clone();
            } catch (Exception e) {
                System.out.println(s2.toString());
            }
        }
    }

    ```

    NhÆ°ng khoan Ä‘Ã£! NgoÃ i ra, chÃºng ta cÃ²n cÃ³ nhá»¯ng cÃ¡ch khÃ¡c, nhá»¯ng "phÆ°Æ¡ng Ã¡n thay tháº¿" cho cÃ¡c "marker interface" ná»¯a cÆ¡ Ä‘áº¥y!

    1. **CÃ¡c LÃ¡ Cá» Ná»™i Bá»™ (Internal flags):** NÃ y, báº¡n cÃ²n nhá»› máº¥y cÃ¡i `marker interface` khÃ´ng? Máº¥y cÃ¡i giao diá»‡n "rá»—ng" chá»‰ Ä‘á»ƒ Ä‘Ã¡nh dáº¥u má»™t class nÃ o Ä‘Ã³ áº¥y mÃ . ThÃ¬ nÃ y, Ä‘Ã´i khi báº¡n cÃ³ thá»ƒ dÃ¹ng **cÃ¡c lÃ¡ cá» ná»™i bá»™** Ä‘á»ƒ thay tháº¿ chÃºng Ä‘áº¥y! ChÃºng giÃºp báº¡n "báº­t tÃ­n hiá»‡u" ráº±ng má»™t Ä‘á»‘i tÆ°á»£ng hoáº·c class cÃ³ thá»ƒ thá»±c hiá»‡n má»™t thao tÃ¡c cá»¥ thá»ƒ nÃ o Ä‘Ã³.
    2. **Annotations:**
Ok, báº¡n sáºµn sÃ ng chÆ°a?
HÃ£y nghÄ© vá» Annotations nhÆ° nhá»¯ng cÃ¡i "nhÃ£n" nhá» xÃ­u, siÃªu cool.
Báº¡n dÃ¹ng chÃºng Ä‘á»ƒ dÃ¡n lÃªn `class`, `interface` hoáº·c `method` cá»§a mÃ¬nh.
Má»—i cÃ¡i nhÃ£n nÃ y mang theo má»™t Ã­t "thÃ´ng tin thÃªm" (hay cÃ²n gá»i lÃ  metadata).
Váº­y dÃ¡n Ä‘á»ƒ lÃ m gÃ¬?
Ã€, lÃ  Ä‘á»ƒ "mÃ¡ch" cho Java Virtual Machine (JVM) biáº¿t nhá»¯ng thÃ´ng tin bá»• sung quan trá»ng vá» cÃ¡i mÃ  báº¡n vá»«a dÃ¡n nhÃ£n Ä‘Ã³.
ÄÆ¡n giáº£n váº­y thÃ´i!

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

15. ### Collection trong Java lÃ  gÃ¬?

Báº¡n cÃ²n nhá»› nhá»¯ng lÃºc mÃ¬nh muá»‘n lÆ°u trá»¯ nhiá»u thá»© khÃ´ng? VÃ­ dá»¥, má»™t danh sÃ¡ch tÃªn há»c sinh, hoáº·c táº¥t cáº£ cÃ¡c sá»‘ Ä‘iá»‡n thoáº¡i cá»§a báº¡n bÃ¨?

TrÆ°á»›c Ä‘Ã¢y, chÃºng ta cÃ³ thá»ƒ dÃ¹ng máº£ng (arrays), Ä‘Ãºng khÃ´ng? Máº£ng ráº¥t tuyá»‡t vá»i! NhÆ°ng Ä‘Ã´i khi, báº¡n khÃ´ng biáº¿t chÃ­nh xÃ¡c mÃ¬nh sáº½ cÃ³ bao nhiÃªu mÃ³n Ä‘á»“. Hoáº·c báº¡n muá»‘n thÃªm má»™t mÃ³n Ä‘á»“ vÃ o giá»¯a danh sÃ¡ch, hay xÃ³a má»™t mÃ³n Ä‘i mÃ  khÃ´ng pháº£i lÃ m quÃ¡ nhiá»u viá»‡c.

ÄÃ³ chÃ­nh lÃ  lÃºc cÃ¡c **Collections** (táº­p há»£p) xuáº¥t hiá»‡n Ä‘á»ƒ giáº£i cá»©u chÃºng ta! HÃ£y nghÄ© vá» chÃºng nhÆ° nhá»¯ng "thÃ¹ng chá»©a" thÃ´ng minh, giÃºp báº¡n quáº£n lÃ½ cÃ¡c nhÃ³m Ä‘á»‘i tÆ°á»£ng má»™t cÃ¡ch dá»… dÃ ng vÃ  linh hoáº¡t hÆ¡n nhiá»u so vá»›i máº£ng truyá»n thá»‘ng.

    Báº¡n cÃ³ má»™t "Ä‘á»‘ng" Ä‘á»‘i tÆ°á»£ng (objects) Java cáº§n quáº£n lÃ½? Kiá»ƒu nhÆ°, báº¡n muá»‘n nhÃ³m chÃºng láº¡i vá»›i nhau khÃ´ng?
ChÃ , Java cÃ³ má»™t thá»© gá»i lÃ  **Collections** (Bá»™ sÆ°u táº­p) Ä‘á»ƒ giÃºp báº¡n lÃ m Ä‘iá»u Ä‘Ã³!

HÃ£y nghÄ© Collections nhÆ° má»™t **khung lÃ m viá»‡c (framework) thá»‘ng nháº¥t** váº­y. NÃ³ cung cáº¥p cho báº¡n má»™t **kiáº¿n trÃºc** riÃªng Ä‘á»ƒ báº¡n cÃ³ thá»ƒ dá»… dÃ ng **lÆ°u trá»¯** vÃ  **thao tÃ¡c** vá»›i cáº£ má»™t nhÃ³m cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Ã³.

    Ã€, chÃ­nh lÃ ... `java.util.*` CÃ¡i `package` nÃ y Ã¡, nÃ³ "chá»©a" (hay lÃ  "giá»¯") nhá»¯ng `class` vÃ  `interface` sau Ä‘Ã¢y nÃ¨.
Táº¥t cáº£ lÃ  Ä‘á»ƒ dÃ¹ng cho `Collections framework` Ä‘Ã³ báº¡n!

    ![Screenshot](images/CollectionsHierarchy.png)

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

16. ### NÃ y, ArrayList vÃ  Vector... chÃºng khÃ¡c nhau chá»— nÃ o váº­y ta?

    NÃ y báº¡n, báº¡n cÃ³ biáº¿t khÃ´ng, cáº£ Vector vÃ  ArrayList Ä‘á»u cÃ³ má»™t "bÃ­ máº­t" bÃªn trong! ÄÃ³ lÃ  chÃºng dÃ¹ng má»™t cÃ¡i máº£ng (array) Ä‘áº·c biá»‡t. CÃ¡i máº£ng nÃ y hay láº¯m, nÃ³ cÃ³ thá»ƒ tá»± Ä‘á»™ng co giÃ£n kÃ­ch thÆ°á»›c Ä‘Æ°á»£c Ä‘á»ƒ chá»©a dá»¯ liá»‡u cá»§a báº¡n!

VÃ  báº¡n biáº¿t khÃ´ng, cáº£ hai anh báº¡n nÃ y cÃ²n chung má»™t Ä‘iá»ƒm ná»¯a: chÃºng Ä‘á»u "tuÃ¢n thá»§" theo List interface.

Tuy nhiÃªn, dÃ¹ cÃ³ nhiá»u Ä‘iá»ƒm chung, Vector vÃ  ArrayList váº«n cÃ³ vÃ i Ä‘iá»ƒm khÃ¡c biá»‡t quan trá»ng. ChÃºng ta cÃ¹ng xem nhá»¯ng Ä‘iá»ƒm khÃ¡c biá»‡t Ä‘Ã³ ngay dÆ°á»›i Ä‘Ã¢y nhÃ©:

    | ArrayList                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
| --- | --- |
| ChÃ o báº¡n! CÃ¹ng tÃ¬m hiá»ƒu vá» `ArrayList` nhÃ©. HÃ£y hÃ¬nh dung nÃ³ nhÆ° má»™t danh sÃ¡ch siÃªu linh hoáº¡t, cÃ³ thá»ƒ chá»©a ráº¥t nhiá»u thá»© báº¡n muá»‘n. | Giá» thÃ¬, hÃ£y lÃ m quen vá»›i `Vector` nhÃ©. NÃ³ cÅ©ng lÃ  má»™t danh sÃ¡ch, nhÆ°ng 'giÃ ' hÆ¡n má»™t chÃºt vÃ  cÃ³ vÃ i Ä‘iá»ƒm khÃ¡c biá»‡t quan trá»ng Ä‘Ã³. |
| Äáº§u tiÃªn, `ArrayList` KHÃ”NG Ä‘Æ°á»£c 'Ä‘á»“ng bá»™ hÃ³a' (synchronized). Nghe láº¡ Ä‘Ãºng khÃ´ng? NghÄ©a lÃ , nÃ³ khÃ´ng Ä‘Æ°á»£c thiáº¿t káº¿ sáºµn Ä‘á»ƒ xá»­ lÃ½ nhiá»u luá»“ng (thread) cá»‘ gáº¯ng thay Ä‘á»•i nÃ³ *cÃ¹ng má»™t lÃºc* mÃ  khÃ´ng cáº§n thÃªm sá»± trá»£ giÃºp Ä‘áº·c biá»‡t nÃ o. | Äiá»ƒm khÃ¡c biá»‡t Lá»šN nháº¥t? `Vector` ÄÆ¯á»¢C 'Ä‘á»“ng bá»™ hÃ³a' (synchronized)! Äiá»u nÃ y cÃ³ nghÄ©a lÃ  nÃ³ cÃ³ sáºµn cÃ¡c cÆ¡ cháº¿ tÃ­ch há»£p Ä‘á»ƒ xá»­ lÃ½ khi nhiá»u luá»“ng cá»‘ gáº¯ng truy cáº­p hoáº·c thay Ä‘á»•i nÃ³ cÃ¹ng lÃºc. |
| VÃ¬ tháº¿, náº¿u báº¡n cÃ³ nhiá»u luá»“ng, báº£n thÃ¢n `ArrayList` sáº½ KHÃ”NG 'an toÃ n cho luá»“ng' (thread-safe). Báº¡n sáº½ cáº§n tá»± thÃªm cÃ¡c khÃ³a (lock) náº¿u muá»‘n cÃ¡c luá»“ng lÃ m viá»‡c hÃ²a thuáº­n vá»›i nhau. | VÃ¬ cÃ³ sáºµn tÃ­nh nÄƒng Ä‘á»“ng bá»™ hÃ³a nÃ y, `Vector` ÄÆ¯á»¢C coi lÃ  'an toÃ n cho luá»“ng' (thread-safe) ngay tá»« khi ra Ä‘á»i. Báº¡n khÃ´ng cáº§n pháº£i thÃªm cÃ¡c khÃ³a bá»• sung cho viá»‡c sá»­ dá»¥ng Ä‘a luá»“ng cÆ¡ báº£n. |
| ChÃ­nh vÃ¬ khÃ´ng báº­n tÃ¢m Ä‘áº¿n viá»‡c Ä‘á»“ng bá»™ hÃ³a phá»©c táº¡p Ä‘Ã³, `ArrayList` thÆ°á»ng SIÃŠU NHANH! NÃ³ khÃ´ng pháº£i chá»‹u gÃ¡nh náº·ng kiá»ƒm tra xem cÃ³ luá»“ng nÃ o khÃ¡c Ä‘ang nghá»‹ch ngá»£m khÃ´ng. | NhÆ°ng khoan Ä‘Ã£, cÃ³ má»™t Ä‘iá»u cáº§n lÆ°u Ã½! Táº¥t cáº£ cÃ´ng viá»‡c Ä‘á»“ng bá»™ hÃ³a Ä‘Ã³ tá»‘n thá»i gian. VÃ¬ váº­y, `Vector` thÆ°á»ng CHáº¬M HÆ N `ArrayList` vÃ¬ nÃ³ pháº£i gÃ¡nh thÃªm nhiá»u cÃ´ng viá»‡c phá»¥. |
| Khi `ArrayList` cá»§a báº¡n Ä‘áº§y, nÃ³ cáº§n thÃªm chá»— trá»‘ng, Ä‘Ãºng khÃ´ng? ThÆ°á»ng thÃ¬ nÃ³ sáº½ má»Ÿ rá»™ng thÃªm khoáº£ng 50% kÃ­ch thÆ°á»›c hiá»‡n táº¡i cá»§a nÃ³. Giá»‘ng nhÆ° thÃªm má»™t ná»­a dung lÆ°á»£ng ná»¯a váº­y. | Khi má»™t `Vector` cáº§n thÃªm khÃ´ng gian, nÃ³ thÆ°á»ng tÄƒng gáº¥p Ä‘Ã´i kÃ­ch thÆ°á»›c hiá»‡n táº¡i cá»§a mÃ¬nh! Kiá»ƒu nhÆ°, 'ThÃ´i Ä‘Æ°á»£c rá»“i, tÃ´i Ä‘áº§y rá»“i, cá»© nhÃ¢n Ä‘Ã´i kÃ­ch thÆ°á»›c lÃªn cho tiá»‡n!' |
| ÄÃ¢y lÃ  má»™t táº­p há»£p (collection) hiá»‡n Ä‘áº¡i hÆ¡n, Ä‘Æ°á»£c giá»›i thiá»‡u tá»« Java 1.2. Má»i ngÆ°á»i thÆ°á»ng thÃ­ch dÃ¹ng `ArrayList` hÆ¡n `Vector` trong háº§u háº¿t cÃ¡c trÆ°á»ng há»£p chá»‰ cÃ³ má»™t luá»“ng (hoáº·c nhiá»u luá»“ng nhÆ°ng Ä‘Æ°á»£c báº¡n tá»± Ä‘á»“ng bá»™ hÃ³a). | Class nÃ y cÃ³ thá»ƒ coi lÃ  'Ã´ng ná»™i' rá»“i, nÃ³ xuáº¥t hiá»‡n tá»« Java 1.0. Giá» Ä‘Ã¢y, nÃ³ Ä‘Æ°á»£c coi lÃ  má»™t class 'cá»• Ä‘iá»ƒn' (legacy). Háº§u háº¿t cÃ¡c Ä‘oáº¡n mÃ£ má»›i Ä‘á»u Æ°u tiÃªn `ArrayList` trá»« khi báº¡n *thá»±c sá»±* cáº§n Ä‘áº¿n tÃ­nh nÄƒng Ä‘á»“ng bá»™ hÃ³a tÃ­ch há»£p cá»§a `Vector`. |
| CÃ¡c bá»™ láº·p (iterator) cá»§a nÃ³ lÃ  'fail-fast'. NghÄ©a lÃ , náº¿u má»™t luá»“ng Ä‘ang duyá»‡t qua danh sÃ¡ch mÃ  má»™t luá»“ng khÃ¡c láº¡i thay Ä‘á»•i danh sÃ¡ch Ä‘Ã³, BÃ™M! Báº¡n sáº½ nháº­n ngay má»™t `ConcurrentModificationException`. NÃ³ giá»‘ng nhÆ° má»™t biá»ƒn bÃ¡o cáº£nh bÃ¡o: 'ÃŠ, cÃ³ gÃ¬ Ä‘Ã³ Ä‘Ã£ thay Ä‘á»•i mÃ  khÃ´ng bÃ¡o trÆ°á»›c kÃ¬a!' | CÃ¡c bá»™ láº·p (iterator) cá»§a nÃ³ KHÃ”NG pháº£i lÃºc nÃ o cÅ©ng 'fail-fast'. Má»™t sá»‘ phÆ°Æ¡ng thá»©c láº·p cÅ© hÆ¡n cá»§a nÃ³ cÃ³ thá»ƒ khÃ´ng nÃ©m ra `ConcurrentModificationException` ngay cáº£ khi danh sÃ¡ch bá»‹ sá»­a Ä‘á»•i trong quÃ¡ trÃ¬nh láº·p, Ä‘iá»u nÃ y Ä‘Ã´i khi cÃ³ thá»ƒ dáº«n Ä‘áº¿n hÃ nh vi khÃ´ng mong muá»‘n. |
    | --------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------- |
    | NÃ y, báº¡n cÃ³ biáº¿t khÃ´ng? Cáº¥u trÃºc dá»¯ liá»‡u nÃ y lÃ  má»™t pháº§n cá»§a 'Collection framework' Ä‘áº¥y! NÃ³ Ä‘Ã£ Ä‘Æ°á»£c giá»›i thiá»‡u tá»« táº­n phiÃªn báº£n JDK 1.2 cÆ¡. | NhÆ°ng mÃ  nÃ y, Ä‘Ã¢y láº¡i lÃ  má»™t 'class cÅ©' (legacy class) Ä‘Ã³ nha. |
    | ArrayList | Vector |
|---|---|
| NÃ y, khi báº¡n dÃ¹ng `ArrayList` vÃ  cá»© thÃªm thÃªm... thÃªm mÃ£i cÃ¡c pháº§n tá»­ vÃ o. | Giá» thÃ¬ Ä‘áº¿n lÆ°á»£t `Vector` nhÃ©! CÅ©ng váº­y, báº¡n cá»© nhÃ©t thÃªm pháº§n tá»­ vÃ o. |
| Äáº¿n má»™t lÃºc nÃ o Ä‘Ã³, **á»i giá»i!** NÃ³ Ä‘áº§y máº¥t rá»“i! Háº¿t chá»— Ä‘á»ƒ chá»©a thÃªm ná»¯a! | Äáº¿n khi `Vector` cÅ©ng Ä‘áº§y áº¯p, khÃ´ng cÃ²n chá»— trá»‘ng! |
| Äá»«ng lo! `ArrayList` ráº¥t thÃ´ng minh. NÃ³ sáº½ tá»± Ä‘á»™ng ná»›i rá»™ng khÃ´ng gian ra cho báº¡n. | NhÆ°ng `Vector` láº¡i cÃ³ cÃ¡ch "ná»›i rá»™ng" khÃ¡c Ä‘áº¥y! |
| Cá»¥ thá»ƒ lÃ , khi báº¡n cá»‘ gáº¯ng nhÃ©t thÃªm má»™t pháº§n tá»­ mÃ  `ArrayList` Ä‘Ã£ Ä‘áº§y, nÃ³ sáº½ tÄƒng kÃ­ch thÆ°á»›c cá»§a mÃ¬nh lÃªn **50%** so vá»›i kÃ­ch thÆ°á»›c hiá»‡n táº¡i. | Khi `Vector` bá»‹ Ä‘áº§y vÃ  báº¡n cáº§n thÃªm chá»—, nÃ³ sáº½ tÄƒng kÃ­ch thÆ°á»›c lÃªn **100%** so vá»›i kÃ­ch thÆ°á»›c hiá»‡n táº¡i. (Tá»©c lÃ  nÃ³ sáº½ **nhÃ¢n Ä‘Ã´i** kÃ­ch thÆ°á»›c cá»§a mÃ¬nh lÃªn luÃ´n!) |
    | Khi nÃ³ KHÃ”NG Ä‘Æ°á»£c Ä‘á»“ng bá»™ hÃ³a (synchronized) máº·c Ä‘á»‹nh... | Khi nÃ³ ÄÆ¯á»¢C Ä‘á»“ng bá»™ hÃ³a (synchronized) máº·c Ä‘á»‹nh... |
|---|---|
| Máº·c Ä‘á»‹nh, nÃ³ CHÆ¯A Ä‘Æ°á»£c "khÃ³a" láº¡i Ä‘Ã¢u. | Máº·c Ä‘á»‹nh, nÃ³ ÄÃƒ Ä‘Æ°á»£c "khÃ³a" sáºµn rá»“i Ä‘áº¥y. |
| Äiá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ  nhiá»u "cÃ´ng nhÃ¢n" (thread) cÃ³ thá»ƒ cÃ¹ng lÃºc "nháº£y vÃ o" vÃ  lÃ m viá»‡c vá»›i nÃ³. | Tá»©c lÃ , chá»‰ cÃ³ DUY NHáº¤T Má»˜T "cÃ´ng nhÃ¢n" Ä‘Æ°á»£c phÃ©p "Ä‘á»¥ng vÃ o" nÃ³ táº¡i má»™t thá»i Ä‘iá»ƒm thÃ´i. |
    | NÃ³ cháº¡y NHANH láº¯m Ä‘Ã³! VÃ¬ nÃ³ KHÃ”NG Ä‘Æ°á»£c Ä‘á»“ng bá»™ hÃ³a. NghÄ©a lÃ , nÃ³ cháº³ng cáº§n chá» Ä‘á»£i ai cáº£! | CÃ¡i nÃ y thÃ¬ HÆ I CHáº¬M má»™t chÃºt nha. Táº¡i vÃ¬ nÃ³ CÃ“ Ä‘á»“ng bá»™ hÃ³a Ä‘Ã³. NÃªn nÃ³ pháº£i xáº¿p hÃ ng, chá» Ä‘á»£i nhau Ä‘Ã³! |
    | ArrayList | Vector |
|---|---|
| Khi báº¡n muá»‘n "Ä‘i dáº¡o" qua tá»«ng pháº§n tá»­ (hay tá»«ng mÃ³n Ä‘á»“) trong má»™t `ArrayList`, báº¡n sáº½ dÃ¹ng anh báº¡n `Iterator` interface. `ArrayList` chá»‰ dÃ¹ng má»—i `Iterator` thÃ´i nhÃ©! | CÃ²n `Vector` thÃ¬ "hÃ o phÃ³ng" hÆ¡n má»™t chÃºt! NÃ³ cho phÃ©p báº¡n dÃ¹ng cáº£ `Iterator` interface (giá»‘ng `ArrayList`) VÃ€ thÃªm cáº£ `Enumeration` interface ná»¯a Ä‘á»ƒ Ä‘i qua cÃ¡c pháº§n tá»­ cá»§a nÃ³. CÃ³ tá»›i hai lá»±a chá»n láº­n! |

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

17. ### finalize method lÃ  gÃ¬? LÃ m sao Ä‘á»ƒ "ghi Ä‘Ã¨" nÃ³?

Báº¡n Ä‘Ã£ bao giá» tá»± há»i, khi Java quyáº¿t Ä‘á»‹nh "xÃ³a sá»•" má»™t Ä‘á»‘i tÆ°á»£ng khá»i bá»™ nhá»›, Ä‘iá»u gÃ¬ sáº½ xáº£y ra ngay trÆ°á»›c Ä‘Ã³ chÆ°a? ChÃ , cÃ³ má»™t "anh hÃ¹ng tháº§m láº·ng" tÃªn lÃ  **Bá»™ thu gom rÃ¡c** (Garbage Collector - GC) chuyÃªn lÃ m cÃ´ng viá»‡c dá»n dáº¹p nÃ y.

VÃ  Ä‘Ã¢y lÃ  Ä‘iá»u thÃº vá»‹: Ä‘Ã´i khi, ngay trÆ°á»›c khi anh chÃ ng GC nÃ y "tiÃªu há»§y" hoÃ n toÃ n má»™t Ä‘á»‘i tÆ°á»£ng, anh áº¥y *cÃ³ thá»ƒ* sáº½ gá»i má»™t phÆ°Æ¡ng thá»©c Ä‘áº·c biá»‡t trÃªn Ä‘á»‘i tÆ°á»£ng Ä‘Ã³. ÄÃ³ chÃ­nh lÃ  **`finalize()`**!

HÃ£y hÃ¬nh dung `finalize()` nhÆ° lÃ  **cÆ¡ há»™i cuá»‘i cÃ¹ng** Ä‘á»ƒ má»™t Ä‘á»‘i tÆ°á»£ng nÃ³i "táº¡m biá»‡t" vÃ  dá»n dáº¹p nhá»¯ng thá»© riÃªng tÆ° cá»§a mÃ¬nh.

**Váº­y, `finalize()` dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?**

Chá»§ yáº¿u, nÃ³ Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ **giáº£i phÃ³ng cÃ¡c tÃ i nguyÃªn khÃ´ng pháº£i cá»§a Java** mÃ  Ä‘á»‘i tÆ°á»£ng Ä‘ang náº¯m giá»¯. VÃ­ dá»¥:
*   Báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng Ä‘ang má»Ÿ má»™t tá»‡p tin trÃªn á»• cá»©ng.
*   Hoáº·c nÃ³ Ä‘ang giá»¯ má»™t káº¿t ná»‘i máº¡ng vá»›i má»™t mÃ¡y chá»§ khÃ¡c.
*   Hoáº·c nÃ³ Ä‘ang quáº£n lÃ½ má»™t tÃ i nguyÃªn nÃ o Ä‘Ã³ cá»§a há»‡ Ä‘iá»u hÃ nh.

Trong phÆ°Æ¡ng thá»©c `finalize()`, báº¡n cÃ³ thá»ƒ viáº¿t mÃ£ Ä‘á»ƒ Ä‘Ã³ng tá»‡p tin Ä‘Ã³ láº¡i, ngáº¯t káº¿t ná»‘i máº¡ng, hoáº·c giáº£i phÃ³ng tÃ i nguyÃªn há»‡ Ä‘iá»u hÃ nh. Äiá»u nÃ y giÃºp trÃ¡nh lÃ£ng phÃ­ tÃ i nguyÃªn!

**NhÆ°ng khoan Ä‘Ã£! CÃ³ vÃ i Ä‘iá»u quan trá»ng báº¡n cáº§n biáº¿t vá» `finalize()`:**

1.  **KhÃ´ng cháº¯c cháº¯n:** Java KHÃ”NG Há»¨A lÃ  sáº½ luÃ´n gá»i `finalize()` Ä‘Ã¢u nhÃ©! Náº¿u chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n káº¿t thÃºc trÆ°á»›c khi GC ká»‹p cháº¡y, hoáº·c náº¿u GC khÃ´ng tháº¥y cáº§n pháº£i dá»n dáº¹p Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ ngay láº­p tá»©c, `finalize()` cÃ³ thá»ƒ khÃ´ng bao giá» Ä‘Æ°á»£c gá»i.
2.  **Thá»i Ä‘iá»ƒm khÃ´ng Ä‘oÃ¡n trÆ°á»›c Ä‘Æ°á»£c:** Báº¡n khÃ´ng thá»ƒ biáº¿t CHÃNH XÃC khi nÃ o `finalize()` sáº½ Ä‘Æ°á»£c gá»i. NÃ³ cÃ³ thá»ƒ Ä‘Æ°á»£c gá»i ngay sau khi Ä‘á»‘i tÆ°á»£ng khÃ´ng cÃ²n Ä‘Æ°á»£c sá»­ dá»¥ng, hoáº·c ráº¥t lÃ¢u sau Ä‘Ã³, hoáº·c khÃ´ng bao giá»!
3.  **ThÆ°á»ng khÃ´ng khuyáº¿n khÃ­ch:** Háº§u háº¿t cÃ¡c láº­p trÃ¬nh viÃªn Java hiá»‡n Ä‘áº¡i Ä‘á»u KHUYÃŠN KHÃ”NG NÃŠN dÃ¹ng `finalize()`. NÃ³ ráº¥t khÃ³ sá»­ dá»¥ng Ä‘Ãºng cÃ¡ch vÃ  cÃ³ thá»ƒ gÃ¢y ra cÃ¡c váº¥n Ä‘á» vá» hiá»‡u suáº¥t hoáº·c lá»—i khÃ´ng mong muá»‘n. CÃ³ nhá»¯ng cÃ¡ch tá»‘t hÆ¡n, an toÃ n hÆ¡n Ä‘á»ƒ quáº£n lÃ½ tÃ i nguyÃªn, vÃ­ dá»¥ nhÆ° dÃ¹ng `try-with-resources` hoáº·c cÃ¡c thÆ° viá»‡n chuyÃªn dá»¥ng.

---

### LÃ m sao Ä‘á»ƒ "ghi Ä‘Ã¨" (override) finalize method?

Máº·c dÃ¹ khÃ´ng khuyáº¿n khÃ­ch, nhÆ°ng náº¿u báº¡n váº«n cáº§n "ghi Ä‘Ã¨" phÆ°Æ¡ng thá»©c `finalize()`, thÃ¬ Ä‘Ã¢y lÃ  cÃ¡ch báº¡n lÃ m:

Báº¡n sáº½ viáº¿t láº¡i phÆ°Æ¡ng thá»©c nÃ y trong lá»›p cá»§a mÃ¬nh, giá»‘ng nhÆ° cÃ¡ch báº¡n "ghi Ä‘Ã¨" báº¥t ká»³ phÆ°Æ¡ng thá»©c nÃ o khÃ¡c tá»« lá»›p cha (vÃ­ dá»¥, tá»« lá»›p `Object` mÃ  má»i lá»›p Ä‘á»u káº¿ thá»«a).

```java
class ChiecHopBiAn {
    private String tenTaiNguyenDocDao;

    public ChiecHopBiAn(String ten) {
        this.tenTaiNguyenDocDao = ten;
        System.out.println("ChiecHopBiAn " + ten + " Ä‘Ã£ Ä‘Æ°á»£c táº¡o!");
        // Giáº£ sá»­ á»Ÿ Ä‘Ã¢y báº¡n má»Ÿ má»™t tÃ i nguyÃªn nÃ o Ä‘Ã³
    }

    // ÄÃ¢y lÃ  cÃ¡ch báº¡n "ghi Ä‘Ã¨" phÆ°Æ¡ng thá»©c finalize()
    @Override // Tá»‘t nháº¥t lÃ  thÃªm cÃ¡i nÃ y Ä‘á»ƒ Java nháº¯c báº¡n náº¿u cÃ³ lá»—i chÃ­nh táº£
    protected void finalize() throws Throwable {
        System.out.println("ChiecHopBiAn " + tenTaiNguyenDocDao + " Ä‘ang nÃ³i lá»i táº¡m biá»‡t vÃ  dá»n dáº¹p!");

        // ÄÃ¢y lÃ  nÆ¡i báº¡n Ä‘áº·t mÃ£ dá»n dáº¹p cá»§a mÃ¬nh
        // VÃ­ dá»¥: Ä‘Ã³ng file, ngáº¯t káº¿t ná»‘i máº¡ng, giáº£i phÃ³ng bá»™ nhá»› Ä‘áº·c biá»‡t...
        System.out.println("ÄÃ£ Ä‘Ã³ng tÃ i nguyÃªn cho " + tenTaiNguyenDocDao);

        // Ráº¤T QUAN TRá»ŒNG: LuÃ´n gá»i phÆ°Æ¡ng thá»©c finalize cá»§a lá»›p cha!
        // Äiá»u nÃ y Ä‘áº£m báº£o ráº±ng cÃ¡c lá»›p cha cÅ©ng cÃ³ cÆ¡ há»™i dá»n dáº¹p tÃ i nguyÃªn cá»§a chÃºng.
        super.finalize();
    }
}

public class ChuongTrinhChinh {
    public static void main(String[] args) {
        // Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng
        ChiecHopBiAn hop1 = new ChiecHopBiAn("HopSoMot");
        ChiecHopBiAn hop2 = new ChiecHopBiAn("HopSoHai");

        // GÃ¡n null Ä‘á»ƒ Ä‘á»‘i tÆ°á»£ng khÃ´ng cÃ²n Ä‘Æ°á»£c tham chiáº¿u
        // (Äiá»u nÃ y giÃºp GC biáº¿t cÃ³ thá»ƒ dá»n dáº¹p chÃºng)
        hop1 = null;
        hop2 = null;

        // Gá»£i Ã½ cho Bá»™ thu gom rÃ¡c cháº¡y.
        // NHÆ¯NG NHá»š LÃ€: Java khÃ´ng Ä‘áº£m báº£o nÃ³ sáº½ cháº¡y ngay láº­p tá»©c,
        // hoáº·c tháº­m chÃ­ lÃ  cháº¡y luÃ´n!
        System.gc();

        System.out.println("ChÆ°Æ¡ng trÃ¬nh chÃ­nh káº¿t thÃºc. HÃ£y chá» xem finalize cÃ³ cháº¡y khÃ´ng...");

        // Má»™t chÃºt delay Ä‘á»ƒ cho GC cÃ³ thá»i gian (náº¿u nÃ³ muá»‘n)
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
```

**Nhá»¯ng Ä‘iá»ƒm cáº§n lÆ°u Ã½ khi "ghi Ä‘Ã¨" `finalize()`:**

*   **`protected`**: PhÆ°Æ¡ng thá»©c nÃ y pháº£i cÃ³ quyá»n truy cáº­p lÃ  `protected`.
*   **`void`**: NÃ³ khÃ´ng tráº£ vá» báº¥t ká»³ giÃ¡ trá»‹ nÃ o (kiá»ƒu tráº£ vá» lÃ  `void`).
*   **`throws Throwable`**: NÃ³ cÃ³ thá»ƒ "nÃ©m" ra má»™t `Throwable`. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  náº¿u cÃ³ lá»—i xáº£y ra trong quÃ¡ trÃ¬nh dá»n dáº¹p, nÃ³ cÃ³ thá»ƒ thÃ´ng bÃ¡o lá»—i Ä‘Ã³.
*   **`super.finalize()`**: LuÃ´n luÃ´n gá»i `super.finalize()` á»Ÿ cuá»‘i phÆ°Æ¡ng thá»©c `finalize()` cá»§a báº¡n. Äiá»u nÃ y ráº¥t quan trá»ng Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng cÃ¡c lá»›p cha cá»§a báº¡n cÅ©ng cÃ³ cÆ¡ há»™i thá»±c hiá»‡n viá»‡c dá»n dáº¹p cá»§a riÃªng chÃºng. Náº¿u khÃ´ng, báº¡n cÃ³ thá»ƒ vÃ´ tÃ¬nh táº¡o ra cÃ¡c lá»—i rÃ² rá»‰ tÃ i nguyÃªn!

TÃ³m láº¡i, `finalize()` lÃ  má»™t phÆ°Æ¡ng thá»©c thÃº vá»‹ nhÆ°ng Ä‘áº§y ráº¯c rá»‘i. Trong háº§u háº¿t cÃ¡c trÆ°á»ng há»£p, báº¡n nÃªn trÃ¡nh xa nÃ³ vÃ  tÃ¬m cÃ¡c cÃ¡ch dá»n dáº¹p tÃ i nguyÃªn khÃ¡c an toÃ n vÃ  Ä‘Ã¡ng tin cáº­y hÆ¡n nhÃ©!

    Ã€, chÃ­nh lÃ ... `finalize()` NÃ y báº¡n, cÃ³ nhá»› `Object` class khÃ´ng?

Trong Ä‘Ã³ cÃ³ má»™t phÆ°Æ¡ng thá»©c Ä‘áº·c biá»‡t tÃªn lÃ  `finalize()` Ä‘áº¥y.

Váº­y nÃ³ lÃ m gÃ¬ nhá»‰?
ÄÆ¡n giáº£n lÃ , nÃ³ giÃºp 'dá»n dá»n' má»i thá»© *trÆ°á»›c khi* má»™t Ä‘á»‘i tÆ°á»£ng bá»‹ 'tiÃªu há»§y' hoÃ n toÃ n.

Cá»© hÃ¬nh dung tháº¿ nÃ y: trÆ°á»›c khi báº¡n vá»©t má»™t mÃ³n Ä‘á»“ cÅ© Ä‘i, báº¡n muá»‘n cháº¯c cháº¯n lÃ  Ä‘Ã£ thÃ¡o háº¿t pin hay rÃºt dÃ¢y Ä‘iá»‡n ra cho an toÃ n, Ä‘Ãºng khÃ´ng? PhÆ°Æ¡ng thá»©c `finalize()` cÅ©ng lÃ m cÃ´ng viá»‡c tÆ°Æ¡ng tá»± cho cÃ¡c Ä‘á»‘i tÆ°á»£ng trong Java.

Ai lÃ  ngÆ°á»i gá»i `finalize()` nÃ y?
KhÃ´ng pháº£i báº¡n Ä‘Ã¢u! LÃ  anh chÃ ng 'Garbage Collector' (Bá»™ thu gom rÃ¡c) cá»§a Java Ä‘Ã³.
Anh áº¥y sáº½ gá»i phÆ°Æ¡ng thá»©c nÃ y Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng dá»n dáº¹p.

Dá»n dáº¹p cÃ¡i gÃ¬ cÆ¡?
Ã€, vÃ­ dá»¥ nhÆ° Ä‘Ã³ng cÃ¡c tÃ i nguyÃªn mÃ  Ä‘á»‘i tÆ°á»£ng Ä‘ang 'giá»¯' láº¡i.
Cháº³ng háº¡n, náº¿u Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n Ä‘ang cÃ³ má»™t káº¿t ná»‘i tá»›i cÆ¡ sá»Ÿ dá»¯ liá»‡u (database connection) hoáº·c má»™t káº¿t ná»‘i máº¡ng (network connection) Ä‘ang má»Ÿ.
ThÃ¬ `finalize()` sáº½ giÃºp Ä‘Ã³ng nhá»¯ng káº¿t ná»‘i Ä‘Ã³ láº¡i cho gá»n gÃ ng trÆ°á»›c khi Ä‘á»‘i tÆ°á»£ng 'biáº¿n máº¥t' háº³n.

ToÃ n bá»™ quÃ¡ trÃ¬nh 'dá»n dáº¹p' nÃ y cÃ³ tÃªn gá»i lÃ  **finalization** (quÃ¡ trÃ¬nh káº¿t thÃºc).
VÃ  nÃ³ cá»±c ká»³ há»¯u Ã­ch! Táº¡i sao Æ°?
VÃ¬ nÃ³ giÃºp JVM (Java Virtual Machine) tá»‘i Æ°u hÃ³a viá»‡c sá»­ dá»¥ng bá»™ nhá»› bÃªn trong.
Giá»¯ cho má»i thá»© ngÄƒn náº¯p vÃ  hiá»‡u quáº£ hÆ¡n nhiá»u Ä‘áº¥y!

    ÄÆ°á»£c rá»“i, Ä‘Ã¢y lÃ  má»™t phÆ°Æ¡ng thá»©c `protected` nhÃ©. NÃ³ thuá»™c vá» lá»›p `Object` â€” cÃ¡i lá»›p "gá»‘c" cá»§a má»i thá»© Ä‘Ã³. CÃº phÃ¡p cá»§a nÃ³ thÃ¬ trÃ´ng nhÆ° tháº¿ nÃ y Ä‘Ã¢y:

    ```java
    protected void finalize() throws Throwable{}
    ```

    Báº¡n cÃ²n nhá»› khÃ´ng? Lá»›p `Object` chÃ­nh lÃ  "Ã´ng tá»•" cá»§a Táº¤T Cáº¢ cÃ¡c lá»›p trong Java Ä‘áº¥y!
Tháº¿ nÃªn, phÆ°Æ¡ng thá»©c `finalize()` cÃ³ sáºµn trong Má»ŒI lá»›p Java mÃ  báº¡n tá»«ng biáº¿t.
VÃ  Ä‘Ã¢y chÃ­nh lÃ  lÃ½ do táº¡i sao anh chÃ ng Garbage Collector (GC) cá»§a chÃºng ta cÃ³ thá»ƒ "ghÃ© thÄƒm" vÃ  gá»i... `finalize()` TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©: má»—i khi báº¡n táº¡o ra má»™t "Ä‘á»‘i tÆ°á»£ng" (object) trong Java, dÃ¹ nÃ³ lÃ  loáº¡i gÃ¬ Ä‘i ná»¯a â€“ má»™t cÃ¡i xe hÆ¡i, má»™t con chÃ³, hay má»™t nÃºt báº¥m trÃªn mÃ n hÃ¬nh â€“ thÃ¬ nÃ³ Ä‘á»u cÃ³ thá»ƒ lÃ m Ä‘Æ°á»£c má»™t sá»‘ viá»‡c nháº¥t Ä‘á»‹nh. Nhá»¯ng viá»‡c mÃ  Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ lÃ m Ä‘Ã³, chÃºng ta gá»i lÃ  "phÆ°Æ¡ng thá»©c" (method).

Váº­y nÃªn, khi chÃºng ta nÃ³i "má»™t phÆ°Æ¡ng thá»©c trÃªn báº¥t ká»³ Ä‘á»‘i tÆ°á»£ng Java nÃ o", Ã½ lÃ  cÃ³ nhá»¯ng hÃ nh Ä‘á»™ng chung mÃ  *má»i* Ä‘á»‘i tÆ°á»£ng Java Ä‘á»u biáº¿t cÃ¡ch thá»±c hiá»‡n. Báº¥t ká»ƒ Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ lÃ  gÃ¬, báº¡n Ä‘á»u cÃ³ thá»ƒ gá»i phÆ°Æ¡ng thá»©c nÃ y lÃªn nÃ³!

    Trong lá»›p `Object` (Ä‘Ã³ lÃ  lá»›p 'gá»‘c' cá»§a má»i thá»© trong Java), phÆ°Æ¡ng thá»©c nÃ y *trá»‘ng trÆ¡n* áº¥y mÃ . NÃ³ cháº£ lÃ m gÃ¬ cáº£!

NhÆ°ng náº¿u lá»›p cá»§a báº¡n cáº§n lÃ m má»™t vÃ i cÃ´ng viá»‡c 'dá»n dáº¹p' trÆ°á»›c khi 'ra Ä‘i' (kiá»ƒu nhÆ° giáº£i phÃ³ng tÃ i nguyÃªn hay Ä‘Ã³ng file cháº³ng háº¡n), thÃ¬ báº¡n sáº½ *cáº§n pháº£i* ghi Ä‘Ã¨ (override) phÆ°Æ¡ng thá»©c nÃ y.

Äá»ƒ xem nÃ³ hoáº¡t Ä‘á»™ng tháº¿ nÃ o, vÃ­ dá»¥ bÃªn dÆ°á»›i sáº½ chá»‰ cho báº¡n cÃ¡ch ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c `finalize` vÃ  *gá»i nÃ³ má»™t cÃ¡ch 'tháº³ng thá»«ng'* (explicitly) luÃ´n nha.

    ```java
    import java.lang.*;

    public class finalizeDemo {

        protected void finalize() throws Throwable {
                try {

                    System.out.println("Inside finalize() method of finalizeDemo class");
                }
                catch (Throwable e) {

                    throw e;
                }
                finally {

                    System.out.println("Calling finalize method of the Object(super) class");

                    super.finalize();
                }
        }

        public static void main(String[] args) throws Throwable {
            finalizeDemo fd = new finalizeDemo();
            fd.finalize();
        }
    }
    ```

    CÃ¡i nÃ y Ä‘Ã¢y, chÃ­nh lÃ  *cÃ¢u lá»‡nh*! `super.finalize()` Ä‘Æ°á»£c gá»i vÃ o *bÃªn trong* khá»‘i `finally`. Báº¡n biáº¿t Ä‘á»ƒ lÃ m gÃ¬ khÃ´ng? Ã€, lÃ  Ä‘á»ƒ Äáº¢M Báº¢O ráº±ng Ä‘oáº¡n mÃ£ Ä‘Ã³ Sáº¼ CHáº Y CHáº®C CHáº®N, dÃ¹ cÃ³ chuyá»‡n gÃ¬ xáº£y ra Ä‘i ná»¯a. Ká»ƒ cáº£ khi cÃ³ lá»—i (exception) nháº£y ra, nÃ³ váº«n cá»© cháº¡y, khÃ´ng bá» sÃ³t má»™t bÆ°á»›c nÃ o!

    **LÆ°u Ã½:** NÃ y, Ä‘á»ƒ Ã½ chÃºt nha! CÃ¡i anh chÃ ng 'thu gom rÃ¡c' (garbage collector) áº¥y, khi áº£nh lÃ m nhiá»‡m vá»¥, áº£nh sáº½ gá»i... `finalize()` Báº¡n chá»‰ cÃ³ thá»ƒ gá»i phÆ°Æ¡ng thá»©c nÃ y *má»™t láº§n duy nháº¥t* trÃªn *má»—i* Ä‘á»‘i tÆ°á»£ng thÃ´i nhÃ©.

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

18. ### `Comparable` vÃ  `Comparator`: Hai GÆ°Æ¡ng Máº·t ThÃ¢n Quen trong Tháº¿ Giá»›i Sáº¯p Xáº¿p. NhÆ°ng Rá»‘t Cuá»™c, ChÃºng KhÃ¡c Nhau Chá»— NÃ o?

    NÃ y báº¡n Æ¡i! Java cÃ³ hai 'cÃ´ng cá»¥' siÃªu hay ho Ä‘á»ƒ giÃºp chÃºng ta sáº¯p xáº¿p máº¥y cÃ¡i 'Ä‘á»‘ng' Ä‘á»‘i tÆ°á»£ng cá»§a mÃ¬nh cho gá»n gÃ ng, ngÄƒn náº¯p. ÄÃ³ chÃ­nh lÃ  hai 'giao diá»‡n' (interfaces) cÃ³ tÃªn lÃ  `Comparable` vÃ  `Comparator` Ä‘áº¥y.

NhÆ°ng mÃ , khoan Ä‘Ã£! DÃ¹ cáº£ hai Ä‘á»u 'chung tay' giÃºp sáº¯p xáº¿p, chÃºng láº¡i cÃ³ nhá»¯ng 'nhiá»‡m vá»¥' hÆ¡i khÃ¡c nhau má»™t chÃºt nhÃ©. VÃ  báº¡n sáº½ dÃ¹ng chÃºng trong nhá»¯ng 'tÃ¬nh huá»‘ng' khÃ´ng giá»‘ng nhau tÃ­ nÃ o Ä‘Ã¢u. 

    **Comparable:**

Ok, báº¡n Ä‘Ã£ sáºµn sÃ ng Ä‘á»ƒ lÃ m cho cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a mÃ¬nh trá»Ÿ nÃªn "cÃ³ thá»ƒ sáº¯p xáº¿p" chÆ°a? Tuyá»‡t vá»i!

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t danh sÃ¡ch cÃ¡c sá»‘ nguyÃªn. Báº¡n muá»‘n sáº¯p xáº¿p chÃºng tá»« bÃ© Ä‘áº¿n lá»›n. Dá»… á»£t, pháº£i khÃ´ng? Java Ä‘Ã£ biáº¿t cÃ¡ch lÃ m Ä‘iá»u Ä‘Ã³ rá»“i.

NhÆ°ng náº¿u báº¡n cÃ³ má»™t danh sÃ¡ch cÃ¡c Ä‘á»‘i tÆ°á»£ng `Dog` (chÃ³) thÃ¬ sao? Má»—i con chÃ³ cÃ³ tÃªn, tuá»•i, cÃ¢n náº·ng... Java lÃ m sao mÃ  biáº¿t báº¡n muá»‘n sáº¯p xáº¿p chÃºng theo tiÃªu chÃ­ nÃ o? Theo tÃªn Ã ? Hay theo tuá»•i? Hay theo cÃ¢n náº·ng?

ÄÃ¢y chÃ­nh lÃ  lÃºc **`Comparable`** xuáº¥t hiá»‡n Ä‘á»ƒ giáº£i cá»©u!

`Comparable` lÃ  má»™t *interface* (giao diá»‡n) Ä‘áº·c biá»‡t. Khi báº¡n nÃ³i má»™t lá»›p "implement" (triá»ƒn khai) `Comparable`, báº¡n Ä‘ang nÃ³i vá»›i Java ráº±ng: "NÃ y, Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p nÃ y biáº¿t cÃ¡ch tá»± so sÃ¡nh chÃ­nh nÃ³ vá»›i má»™t Ä‘á»‘i tÆ°á»£ng khÃ¡c cÃ¹ng loáº¡i Ä‘Ã³!"

NÃ³ chá»‰ cÃ³ má»™t phÆ°Æ¡ng thá»©c duy nháº¥t mÃ  báº¡n *buá»™c pháº£i* triá»ƒn khai:

```java
public int compareTo(T otherObject);
```

*   **`T`** á»Ÿ Ä‘Ã¢y lÃ  kiá»ƒu dá»¯ liá»‡u cá»§a chÃ­nh Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n. VÃ­ dá»¥, náº¿u báº¡n Ä‘ang táº¡o lá»›p `Dog`, thÃ¬ nÃ³ sáº½ lÃ  `compareTo(Dog otherDog)`.

PhÆ°Æ¡ng thá»©c `compareTo()` nÃ y sáº½ tráº£ vá» má»™t sá»‘ nguyÃªn, vÃ  Ã½ nghÄ©a cá»§a sá»‘ Ä‘Ã³ ráº¥t quan trá»ng:

*   Náº¿u `this` Ä‘á»‘i tÆ°á»£ng "báº±ng" vá»›i `otherObject`, nÃ³ sáº½ tráº£ vá» **`0`**.
*   Náº¿u `this` Ä‘á»‘i tÆ°á»£ng "nhá» hÆ¡n" `otherObject`, nÃ³ sáº½ tráº£ vá» má»™t sá»‘ **Ã¢m** (vÃ­ dá»¥: `-1`).
*   Náº¿u `this` Ä‘á»‘i tÆ°á»£ng "lá»›n hÆ¡n" `otherObject`, nÃ³ sáº½ tráº£ vá» má»™t sá»‘ **dÆ°Æ¡ng** (vÃ­ dá»¥: `1`).

Báº¡n sáº½ tá»± viáº¿t logic bÃªn trong `compareTo()` Ä‘á»ƒ quyáº¿t Ä‘á»‹nh tháº¿ nÃ o lÃ  "nhá» hÆ¡n", "báº±ng", hay "lá»›n hÆ¡n" dá»±a trÃªn cÃ¡c thuá»™c tÃ­nh cá»§a Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n.

**Táº¡i sao láº¡i cáº§n nÃ³?**

Khi cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n triá»ƒn khai `Comparable`, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c sáº¯p xáº¿p "cÃ³ sáºµn" cá»§a Java má»™t cÃ¡ch dá»… dÃ ng, nhÆ°:

*   `Collections.sort(yourListOfObjects);`
*   `Arrays.sort(yourArrayOfObjects);`

ChÃºng sáº½ tá»± Ä‘á»™ng biáº¿t cÃ¡ch sáº¯p xáº¿p cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n theo "thá»© tá»± tá»± nhiÃªn" mÃ  báº¡n Ä‘Ã£ Ä‘á»‹nh nghÄ©a trong phÆ°Æ¡ng thá»©c `compareTo()`! Tháº­t tiá»‡n lá»£i pháº£i khÃ´ng nÃ o?
    Báº¡n muá»‘n so sÃ¡nh hai Ä‘á»‘i tÆ°á»£ng cÃ¹ng loáº¡i vá»›i nhau Æ°? Giá»›i thiá»‡u `Comparable`!

`Comparable` lÃ  má»™t 'báº£n há»£p Ä‘á»“ng' (interface) siÃªu tiá»‡n lá»£i. NÃ³ cho phÃ©p má»™t Ä‘á»‘i tÆ°á»£ng biáº¿t cÃ¡ch 'Ä‘á» sá»©c' vá»›i má»™t Ä‘á»‘i tÆ°á»£ng *khÃ¡c cÃ¹ng loáº¡i* vá»›i nÃ³.

Váº­y lÃ m sao Ä‘á»ƒ lá»›p cá»§a báº¡n cÃ³ thá»ƒ dÃ¹ng Ä‘Æ°á»£c `Comparable`? ÄÆ¡n giáº£n thÃ´i! Náº¿u lá»›p cá»§a báº¡n muá»‘n cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a nÃ³ cÃ³ thá»ƒ tá»± so sÃ¡nh Ä‘Æ°á»£c vá»›i nhau, thÃ¬ lá»›p Ä‘Ã³ *pháº£i* thá»±c thi (implement) `Comparable`. `java.lang.Comparable` Báº¡n Ä‘Ã£ bao giá» nghÄ© vá» má»™t 'báº£n há»£p Ä‘á»“ng' trong láº­p trÃ¬nh chÆ°a?

ÄÃ´i khi, chÃºng ta chá»‰ muá»‘n nÃ³i ráº±ng: "NÃ y, báº¥t cá»© Ä‘á»‘i tÆ°á»£ng nÃ o muá»‘n lÃ  X, thÃ¬ nÃ³ pháº£i biáº¿t lÃ m nhá»¯ng viá»‡c Y, Z, A nhÃ©!"

NhÆ°ng chÃºng ta khÃ´ng muá»‘n quan tÃ¢m *cÃ¡ch* nÃ³ lÃ m Y, Z, A. Chá»‰ cáº§n biáº¿t nÃ³ *sáº½ lÃ m* Ä‘Æ°á»£c thÃ´i.

ÄÃ³ chÃ­nh lÃ  lÃºc **interface** (hay cÃ²n gá»i lÃ  **giao diá»‡n**) xuáº¥t hiá»‡n!

Má»™t interface giá»‘ng nhÆ° má»™t báº£n káº¿ hoáº¡ch, má»™t danh sÃ¡ch cÃ¡c 'viá»‡c pháº£i lÃ m' mÃ  khÃ´ng cÃ³ báº¥t ká»³ hÆ°á»›ng dáº«n cá»¥ thá»ƒ nÃ o vá» cÃ¡ch thá»±c hiá»‡n chÃºng.

Báº¥t ká»³ lá»›p (class) nÃ o muá»‘n 'kÃ½ há»£p Ä‘á»“ng' vá»›i interface nÃ y, nÃ³ pháº£i cam káº¿t thá»±c hiá»‡n Táº¤T Cáº¢ cÃ¡c viá»‡c trong danh sÃ¡ch Ä‘Ã³.

Khi Ä‘Ã³, chÃºng ta biáº¿t cháº¯c cháº¯n ráº±ng lá»›p Ä‘Ã³ *cÃ³ thá»ƒ* lÃ m Ä‘Æ°á»£c nhá»¯ng Ä‘iá»u mÃ  interface yÃªu cáº§u, mÃ  khÃ´ng cáº§n biáº¿t chi tiáº¿t bÃªn trong nÃ³ hoáº¡t Ä‘á»™ng ra sao.
    NÃ³ giÃºp báº¡n sáº¯p xáº¿p má»i thá»© theo **chá»‰ má»™t cÃ¡ch duy nháº¥t** thÃ´i.

Äiá»u nÃ y cÃ³ nghÄ©a lÃ , báº¡n chá»‰ cÃ³ thá»ƒ sáº¯p xáº¿p cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a mÃ¬nh dá»±a vÃ o **DUY NHáº¤T má»™t thÃ nh pháº§n dá»¯ liá»‡u** (data member) thÃ´i.

Láº¥y vÃ­ dá»¥ nÃ¨: báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng `Employee` (NhÃ¢n viÃªn). Báº¡n cÃ³ thá»ƒ sáº¯p xáº¿p danh sÃ¡ch cÃ¡c `Employee` nÃ y chá»‰ dá»±a vÃ o **má»™t** thuá»™c tÃ­nh thÃ´i. VÃ­ dá»¥ nhÆ° sáº¯p xáº¿p theo `id` (mÃ£ sá»‘), `name` (tÃªn), `age` (tuá»•i), vÃ¢n vÃ¢n.

    NÃ y báº¡n Æ¡i, tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©:
Náº¿u má»™t lá»›p (class) cá»§a báº¡n 'kÃ½ há»£p Ä‘á»“ng' (implement) vá»›i má»™t giao diá»‡n (interface) tÃªn lÃ  `Comparable`, thÃ¬ cÃ³ nghÄ©a lÃ ... **nÃ³ biáº¿t cÃ¡ch tá»± sáº¯p xáº¿p cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a chÃ­nh nÃ³ rá»“i Ä‘áº¥y!**

Tuyá»‡t vá»i Ä‘Ãºng khÃ´ng? Táº¡i sao Æ°?
VÃ¬ cÃ¡i lá»›p Ä‘Ã³ Ä‘Ã£ tá»± tay 'viáº¿t ra' (implement) má»™t phÆ°Æ¡ng thá»©c Ä‘áº·c biá»‡t tÃªn lÃ  `compareTo` rá»“i. ChÃ­nh phÆ°Æ¡ng thá»©c nÃ y sáº½ chá»‰ cho Java biáº¿t cÃ¡ch so sÃ¡nh cÃ¡c Ä‘á»‘i tÆ°á»£ng vá»›i nhau.

Kiá»ƒu sáº¯p xáº¿p 'cÃ³ sáºµn' nÃ y Ä‘Æ°á»£c gá»i lÃ  **sáº¯p xáº¿p máº·c Ä‘á»‹nh** (default sorting) hay **sáº¯p xáº¿p tá»± nhiÃªn** (natural sorting). Nghe cá»© nhÆ° lÃ  Ä‘á»‘i tÆ°á»£ng sinh ra Ä‘Ã£ biáº¿t sáº¯p xáº¿p áº¥y nhá»‰!

Äá»ƒ 'dáº¡y' cho lá»›p cá»§a báº¡n cÃ¡ch so sÃ¡nh cÃ¡c Ä‘á»‘i tÆ°á»£ng, báº¡n sáº½ cáº§n 'ghi Ä‘Ã¨' (override) phÆ°Æ¡ng thá»©c `compareTo` vá»›i cÃº phÃ¡p cÆ¡ báº£n nhÆ° sau:

```java
public int compareTo(T otherObject) {
    // Logic so sÃ¡nh cá»§a báº¡n sáº½ á»Ÿ Ä‘Ã¢y!
    // Tráº£ vá» sá»‘ Ã¢m náº¿u Ä‘á»‘i tÆ°á»£ng hiá»‡n táº¡i 'nhá» hÆ¡n' otherObject
    // Tráº£ vá» 0 náº¿u hai Ä‘á»‘i tÆ°á»£ng 'báº±ng nhau'
    // Tráº£ vá» sá»‘ dÆ°Æ¡ng náº¿u Ä‘á»‘i tÆ°á»£ng hiá»‡n táº¡i 'lá»›n hÆ¡n' otherObject
}
```

    ```java
    class T implements Comparable<T> {
        @Override
        public int compareTo(T t) {
            // comparison logic goes here
        }
    }
    ```

    ÄÆ°á»£c rá»“i, láº¥y vÃ­ dá»¥ nÃ¨. Giáº£ sá»­ báº¡n cÃ³ má»™t nhÃ³m cÃ¡c Ä‘á»‘i tÆ°á»£ng 'NhÃ¢n viÃªn' (Employee) nhÃ©. VÃ  báº¡n muá»‘n sáº¯p xáº¿p nhÃ³m nÃ y, nhÆ°ng mÃ  sáº¯p xáº¿p theo tÃªn cá»§a tá»«ng nhÃ¢n viÃªn cÆ¡. LÃ m sao Ä‘Ã¢y? ChÃºng ta sáº½ sá»­ dá»¥ng giao diá»‡n `Comparable` Ä‘á»ƒ thá»±c hiá»‡n viá»‡c Ä‘Ã³, trÃ´ng nÃ³ sáº½ nhÆ° tháº¿ nÃ y:

    ```java
    import java.util.*;

    class Employee implements Comparable<Employee> {
        private final String id;
        private final String name;
        private final int age;
        
        public Employee(String id, String name, int age) {
            this.id = id;
            this.name = name;
            this.age = age;
        }
        
        @Override
        public int compareTo(final Employee employee) {
            return this.name.compareTo(employee.name);
        }
        
        public String getId() { return this.id; }
        
        public String getName() { return this.name; }
        
        public int getAge() { return this.age; }
        
        @Override
        public String toString() {
            return String.format("ID: %s | Name: %s | Age: %d", id, name, age);
        }
    }

    public class Main {
        public static void main(String[] args) {
            List<Employee> employees = new ArrayList<>();

            employees.add(new Employee("3", "John", 32));
            employees.add(new Employee("1", "James", 27));
            employees.add(new Employee("2", "Jackson", 22));
            
            Collections.sort(employees);

            employees.forEach(employee -> 
                                System.out.println(employee.toString()));
        }
    }
    ```

    **Comparator:**

ChÃ o báº¡n, láº­p trÃ¬nh viÃªn Java tÆ°Æ¡ng lai! Báº¡n cÃ³ bao giá» muá»‘n sáº¯p xáº¿p má»™t danh sÃ¡ch cÃ¡c thá»© chÆ°a? Kiá»ƒu nhÆ°, má»™t danh sÃ¡ch cÃ¡c Ä‘á»‘i tÆ°á»£ng `Dog` theo tÃªn cá»§a chÃºng? Hay theo tuá»•i cá»§a chÃºng?

Báº¡n cÃ²n nhá»› `Comparable` chá»©? NÃ³ giá»‘ng nhÆ° viá»‡c báº¡n nÃ³i vá»›i má»™t Ä‘á»‘i tÆ°á»£ng: "NÃ y, cáº­u biáº¿t cÃ¡ch tá»± sáº¯p xáº¿p *chÃ­nh mÃ¬nh* so vá»›i má»™t Ä‘á»‘i tÆ°á»£ng khÃ¡c cÃ¹ng loáº¡i vá»›i cáº­u Ä‘áº¥y!" Äiá»u nÃ y ráº¥t tuyá»‡t cho má»™t thá»© tá»± "tá»± nhiÃªn" mÃ  Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ cÃ³.

NhÆ°ng mÃ ... lá»¡ nhÆ°:
*   Báº¡n muá»‘n sáº¯p xáº¿p cÃ¡c Ä‘á»‘i tÆ°á»£ng `Dog` theo tuá»•i *láº§n nÃ y*, nhÆ°ng láº¡i muá»‘n sáº¯p xáº¿p theo tÃªn *láº§n sau* thÃ¬ sao?
*   Hoáº·c báº¡n cÃ³ má»™t danh sÃ¡ch `String`, vÃ  báº¡n muá»‘n sáº¯p xáº¿p chÃºng theo thá»© tá»± báº£ng chá»¯ cÃ¡i *ngÆ°á»£c* láº¡i? `String` thÃ¬ Ä‘Ã£ biáº¿t cÃ¡ch tá»± sáº¯p xáº¿p thÃ´ng thÆ°á»ng rá»“i mÃ !
*   VÃ  lá»¡ nhÆ° báº¡n cÃ³ má»™t lá»›p, vÃ­ dá»¥ `Cat`, nhÆ°ng báº¡n *khÃ´ng pháº£i* lÃ  ngÆ°á»i viáº¿t ra nÃ³, nÃªn báº¡n khÃ´ng thá»ƒ vÃ o code cá»§a nÃ³ mÃ  sá»­a thÃ nh `implements Comparable`? Váº­y lÃ m sao báº¡n sáº¯p xáº¿p cÃ¡c Ä‘á»‘i tÆ°á»£ng `Cat` Ä‘Ã¢y?

Aha! ÄÃ³ chÃ­nh lÃ  lÃºc `Comparator` xuáº¥t hiá»‡n Ä‘á»ƒ giáº£i cá»©u!

HÃ£y nghÄ© `Comparator` nhÆ° má»™t *chuyÃªn gia sáº¯p xáº¿p Ä‘á»™c láº­p*. Thay vÃ¬ má»™t Ä‘á»‘i tÆ°á»£ng tá»± biáº¿t cÃ¡ch sáº¯p xáº¿p *chÃ­nh nÃ³*, báº¡n táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng `Comparator` mÃ  nÃ³ biáº¿t cÃ¡ch so sÃ¡nh *hai Ä‘á»‘i tÆ°á»£ng khÃ¡c* cho má»¥c Ä‘Ã­ch sáº¯p xáº¿p.

NÃ³ giá»‘ng nhÆ° báº¡n nÃ³i: "NÃ y phÆ°Æ¡ng thá»©c `sort`, Ä‘Ã¢y lÃ  Ä‘á»‘i tÆ°á»£ng `Comparator` Ä‘áº·c biá»‡t cá»§a tÃ´i. HÃ£y dÃ¹ng cÃ¡c quy táº¯c *cá»§a nÃ³* Ä‘á»ƒ tÃ¬m ra `Dog` nÃ o Ä‘á»©ng trÆ°á»›c `Dog` nÃ o nhÃ©!"

Vá»›i `Comparator`, báº¡n cÃ³ thá»ƒ sáº¯p xáº¿p siÃªu linh hoáº¡t! Báº¡n cÃ³ thá»ƒ cÃ³ nhiá»u `Comparator` khÃ¡c nhau cho cÃ¹ng má»™t lá»›p (má»™t Ä‘á»ƒ sáº¯p xáº¿p theo tÃªn, má»™t theo tuá»•i, má»™t theo cÃ¢n náº·ng), vÃ  báº¡n tháº­m chÃ­ cÃ²n cÃ³ thá»ƒ sáº¯p xáº¿p cÃ¡c lá»›p mÃ  báº¡n khÃ´ng tá»± táº¡o ra ná»¯a. Tuyá»‡t vá»i Ä‘Ãºng khÃ´ng nÃ o?

    Comparator lÃ  gÃ¬ nhá»‰? Nghe tÃªn cÃ³ váº» hÆ¡i 'khÃ³ nháº±n', nhÆ°ng Ä‘á»«ng lo!

Hiá»ƒu Ä‘Æ¡n giáº£n, nÃ³ lÃ  má»™t cÃ¡i 'cÃ´ng cá»¥' Ä‘áº·c biá»‡t, má»™t 'giao diá»‡n chá»©c nÄƒng' (functional interface) mÃ  chÃºng ta dÃ¹ng Ä‘á»ƒ Sáº®P Xáº¾P cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a mÃ¬nh.

TÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t bá»™ sÆ°u táº­p cÃ¡c Ä‘á»‘i tÆ°á»£ng (vÃ­ dá»¥: má»™t danh sÃ¡ch há»c sinh, má»™t Ä‘á»‘ng sÃ¡ch,...). Báº¡n muá»‘n xáº¿p chÃºng gá»n gÃ ng theo má»™t tráº­t tá»± nÃ o Ä‘Ã³.

VÃ  Ä‘Ã¢y má»›i lÃ  Ä‘iá»ƒm thÃº vá»‹ nÃ¨! Comparator cho phÃ©p báº¡n sáº¯p xáº¿p theo **NHIá»€U TRÃŒNH Tá»° Sáº®P Xáº¾P KHÃC NHAU** (multiple sorting sequence)! KhÃ´ng chá»‰ má»™t kiá»ƒu sáº¯p xáº¿p Ä‘Ã¢u nhÃ©, mÃ  lÃ  Ráº¤T NHIá»€U kiá»ƒu!

NÃ³ giÃºp báº¡n sáº¯p xáº¿p cÃ¡c Ä‘á»‘i tÆ°á»£ng dá»±a trÃªn **nhiá»u 'thÃ´ng tin' (data members) khÃ¡c nhau** cá»§a chÃºng.

VÃ­ dá»¥, báº¡n cÃ³ thá»ƒ báº£o nÃ³:
*   "Sáº¯p xáº¿p há»c sinh theo TÃŠN trÆ°á»›c."
*   "Náº¿u hai há»c sinh trÃ¹ng tÃªn, thÃ¬ sáº¯p xáº¿p theo ÄIá»‚M Sá»."
*   "Náº¿u Ä‘iá»ƒm sá»‘ cÅ©ng giá»‘ng nhau, thÃ¬ sáº¯p xáº¿p theo CHIá»€U CAO!"

Tháº¥y chÆ°a? Báº¡n cÃ³ thá»ƒ tÃ¹y Ã½ Ä‘á»‹nh nghÄ©a nhiá»u trÃ¬nh tá»± sáº¯p xáº¿p khÃ¡c nhau chá»‰ vá»›i má»™t Comparator!

CÃ¡i 'cÃ´ng cá»¥' Comparator nÃ y khÃ´ng pháº£i báº¡n tá»± táº¡o ra Ä‘Ã¢u nhÃ©. NÃ³ Ä‘Ã£ cÃ³ sáºµn rá»“i, lÃ  má»™t pháº§n cá»§a `java.util` NÃ y, láº¥y vÃ­ dá»¥ vá» má»™t Ä‘á»‘i tÆ°á»£ng `Employee` (NhÃ¢n viÃªn) nhÃ©!
Báº¡n cÃ³ biáº¿t khÃ´ng, Ä‘á»‘i tÆ°á»£ng nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c sáº¯p xáº¿p dá»±a trÃªn NHIá»€U thuá»™c tÃ­nh khÃ¡c nhau Ä‘áº¥y.
VÃ­ dá»¥ nhÆ° ID cá»§a nhÃ¢n viÃªn, tÃªn cá»§a nhÃ¢n viÃªn, tuá»•i cá»§a nhÃ¢n viÃªn... vÃ  nhiá»u thá»© khÃ¡c ná»¯a!

    Báº¡n muá»‘n sáº¯p xáº¿p cÃ¡c Ä‘á»‘i tÆ°á»£ng theo má»™t thá»© tá»± riÃªng cá»§a mÃ¬nh Æ°? Tuyá»‡t vá»i! `Comparator` sinh ra lÃ  Ä‘á»ƒ lÃ m Ä‘iá»u Ä‘Ã³ Ä‘áº¥y. NÃ³ cá»±c ká»³ há»¯u Ã­ch khi báº£n thÃ¢n cÃ¡i 'lá»›p' (class) cá»§a cÃ¡c Ä‘á»‘i tÆ°á»£ng báº¡n muá»‘n sáº¯p xáº¿p láº¡i khÃ´ng há» 'biáº¿t' cÃ¡ch tá»± sáº¯p xáº¿p mÃ¬nh Ä‘Ã¢u nhÃ©. `Comparator` sáº½ giÃºp báº¡n táº¡o ra má»™t 'quy táº¯c sáº¯p xáº¿p' theo Ã½ báº¡n!

Váº­y lÃ m sao Ä‘á»ƒ 'táº¡o ra' má»™t `Comparator` Ä‘Ã¢y? ÄÆ¡n giáº£n thÃ´i, báº¡n cÃ³ thá»ƒ dÃ¹ng má»™t 'biá»ƒu thá»©c lambda' (lambda expression) cá»±c ká»³ tiá»‡n lá»£i!
Biá»ƒu thá»©c lambda nÃ y sáº½ 'nháº­n vÃ o' hai Ä‘á»‘i tÆ°á»£ng (cÃ¹ng kiá»ƒu nhÃ©!) mÃ  báº¡n muá»‘n so sÃ¡nh. Sau Ä‘Ã³, nÃ³ sáº½ 'tráº£ vá»' má»™t sá»‘ nguyÃªn Ä‘áº·c biá»‡t Ä‘á»ƒ nÃ³i cho mÃ¡y tÃ­nh biáº¿t Ä‘á»‘i tÆ°á»£ng nÃ o nÃªn Ä‘á»©ng trÆ°á»›c, Ä‘á»‘i tÆ°á»£ng nÃ o nÃªn Ä‘á»©ng sau:
*   `1` (hoáº·c má»™t sá»‘ dÆ°Æ¡ng): NghÄ©a lÃ  Ä‘á»‘i tÆ°á»£ng Ä‘áº§u tiÃªn 'lá»›n hÆ¡n' Ä‘á»‘i tÆ°á»£ng thá»© hai.
*   `0`: NghÄ©a lÃ  hai Ä‘á»‘i tÆ°á»£ng 'báº±ng nhau'.
*   `-1` (hoáº·c má»™t sá»‘ Ã¢m): NghÄ©a lÃ  Ä‘á»‘i tÆ°á»£ng Ä‘áº§u tiÃªn 'nhá» hÆ¡n' Ä‘á»‘i tÆ°á»£ng thá»© hai.
CÃº phÃ¡p cá»§a nÃ³ trÃ´ng sáº½ nhÆ° tháº¿ nÃ y:

    ```java
     Comparator<T> comparator = (T t1, T t2) -> { 
        //comparison logic 
     }
    ```

    Báº¡n cÃ³ thá»ƒ táº¡o ra nhiá»u lá»›p riÃªng biá»‡t (mÃ  cÃ¡c lá»›p nÃ y sáº½ `implement` giao diá»‡n `Comparator`) Ä‘á»ƒ so sÃ¡nh cÃ¡c Ä‘á»‘i tÆ°á»£ng dá»±a trÃªn cÃ¡c thuá»™c tÃ­nh khÃ¡c nhau.

Giao diá»‡n `Comparator` cung cáº¥p má»™t phÆ°Æ¡ng thá»©c lÃ  `compare()`. Báº¡n cÃ³ thá»ƒ "viáº¿t láº¡i" (override) phÆ°Æ¡ng thá»©c nÃ y Ä‘á»ƒ tÃ¹y chá»‰nh logic so sÃ¡nh theo Ã½ muá»‘n.

VÃ­ dá»¥, báº¡n cÃ³ thá»ƒ muá»‘n sáº¯p xáº¿p má»™t nhÃ³m nhÃ¢n viÃªn dá»±a trÃªn thuá»™c tÃ­nh `id` hoáº·c `age` cá»§a há», ngay cáº£ khi lá»›p `Employee` Ä‘Ã£ tá»± "biáº¿t cÃ¡ch" so sÃ¡nh chÃ­nh nÃ³ báº±ng cÃ¡ch override phÆ°Æ¡ng thá»©c `compareTo` rá»“i.

    ```java
    public static void sortById(List<Employee> employees) {
        Comparator<Employee> idComparator = (Employee e1, Employee e2) -> {
            return e1.getId().compareTo(e2.getId());
        };
        
        employees.sort(idComparator);
    }
    
    public static void sortByAge(List<Employee> employees) {
        Comparator<Employee> ageComparator = (Employee e1, Employee e2) -> {
            return e1.getAge() - e2.getAge();
        };
        
        employees.sort(ageComparator);
    }
    ```

    Ã€, trong vÃ­ dá»¥ phÃ­a trÃªn áº¥y,

chÃºng ta Ä‘Ã£ táº¡o ra hai 'ngÆ°á»i trá»£ lÃ½' Ä‘áº·c biá»‡t: `idComparator` vÃ  `ageComparator`.

Má»¥c Ä‘Ã­ch cá»§a há» lÃ  gÃ¬? ChÃ­nh lÃ  Ä‘á»ƒ giÃºp chÃºng ta sáº¯p xáº¿p má»i thá»© theo cÃ¡ch riÃªng cá»§a mÃ¬nh, chá»© khÃ´ng pháº£i theo kiá»ƒu máº·c Ä‘á»‹nh nhÃ m chÃ¡n Ä‘Ã¢u nha. Hay cÃ²n gá»i lÃ  'sáº¯p xáº¿p tÃ¹y chá»‰nh' Ä‘Ã³!

Váº­y lÃ m sao Ä‘á»ƒ 'máº¥y ngÆ°á»i trá»£ lÃ½' nÃ y phÃ¡t huy tÃ¡c dá»¥ng?

Báº¡n cáº§n 'Ä‘Æ°a' há» vÃ o (giá»‘ng nhÆ° 'truyá»n' há» vÃ o lÃ m 'tham sá»‘' áº¥y) cho phÆ°Æ¡ng thá»©c `sort()`. LÃºc Ä‘Ã³, phÆ°Æ¡ng thá»©c `sort()` sáº½ biáº¿t pháº£i sáº¯p xáº¿p nhÆ° tháº¿ nÃ o cho Ä‘Ãºng Ã½ báº¡n!
    
    NÃ y báº¡n Æ¡i, cÃ³ má»™t tip nhá» cá»±c hay ho Ä‘Ã¢y!

Khi báº¡n cáº§n táº¡o má»™t `Comparator` áº¥y, cÃ¡ch Ä‘Æ°á»£c *Æ°a chuá»™ng* nháº¥t hiá»‡n nay lÃ  dÃ¹ng *biá»ƒu thá»©c lambda* (lambda expression) Ä‘Ã³.

Báº¡n biáº¿t vÃ¬ sao khÃ´ng?

ÄÆ¡n giáº£n lÃ  vÃ¬ `Comparator` chÃ­nh lÃ  má»™t "functional interface" Ä‘áº¥y. Nghe cÃ³ váº» phá»©c táº¡p, nhÆ°ng Ã½ nÃ³ lÃ : `Comparator` *chá»‰ cÃ³ DUY NHáº¤T má»™t phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng thÃ´i*.

VÃ  khi má»™t interface chá»‰ cÃ³ Ä‘Ãºng má»™t "nhiá»‡m vá»¥" nhÆ° váº­y, thÃ¬ lambda lÃ  lá»±a chá»n hoÃ n háº£o Ä‘á»ƒ viáº¿t code gá»n gÃ ng vÃ  dá»… Ä‘á»c hÆ¡n ráº¥t nhiá»u!


    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

19. ### Lá»›p bÃªn trong lÃ  gÃ¬ váº­y?

   Báº¡n hÃ¬nh dung tháº¿ nÃ y nhÃ©: má»™t 'inner class' (lá»›p bÃªn trong) Ä‘Æ¡n giáº£n lÃ  má»™t lá»›p mÃ  báº¡n táº¡o ra ngay BÃŠN TRONG má»™t lá»›p khÃ¡c. Cá»© nhÆ° cÃ³ má»™t cÄƒn phÃ²ng nhá» xinh náº±m gá»n trong má»™t ngÃ´i nhÃ  lá»›n váº­y Ä‘Ã³!

Váº­y táº¡i sao chÃºng ta láº¡i cáº§n máº¥y cÃ¡i 'inner class' nÃ y nhá»‰? Ã€, cÃ³ máº¥y lÃ½ do siÃªu hay ho luÃ´n:

*   Äáº§u tiÃªn, nÃ³ giÃºp báº¡n nhÃ³m cÃ¡c lá»›p láº¡i vá»›i nhau má»™t cÃ¡ch há»£p lÃ½. Äáº·c biá»‡t lÃ  nhá»¯ng lá»›p báº¡n chá»‰ dÃ¹ng á»Ÿ má»™t chá»— duy nháº¥t thÃ´i. Code sáº½ gá»n gÃ ng vÃ  dá»… nhÃ¬n hÆ¡n ráº¥t nhiá»u.
*   Thá»© hai, nÃ³ tÄƒng cÆ°á»ng tÃ­nh Ä‘Ã³ng gÃ³i (encapsulation). NghÄ©a lÃ , báº¡n cÃ³ thá»ƒ báº£o vá»‡ dá»¯ liá»‡u vÃ  phÆ°Æ¡ng thá»©c bÃªn trong tá»‘t hÆ¡n, kiá»ƒm soÃ¡t cháº·t cháº½ hÆ¡n ai Ä‘Æ°á»£c phÃ©p 'Ä‘á»¥ng' vÃ o chÃºng.
*   VÃ  cuá»‘i cÃ¹ng, nÃ³ lÃ m cho code cá»§a báº¡n dá»… Ä‘á»c, dá»… hiá»ƒu vÃ  dá»… báº£o trÃ¬ hÆ¡n vá» lÃ¢u dÃ i. Ai nhÃ¬n vÃ o cÅ©ng sáº½ tháº¥y 'Ã€, cÃ¡i nÃ y thuá»™c vá» cÃ¡i kia!'

VÃ  nÃ y, Java cÃ²n 'chiá»u lÃ²ng' chÃºng ta háº¿t cá»¡, nÃ³ cho phÃ©p báº¡n dÃ¹ng táº­n Bá»N loáº¡i 'inner class' khÃ¡c nhau cÆ¡!

   1. **Member Inner Class (Lá»›p bÃªn trong dáº¡ng thÃ nh viÃªn)** (Hay cÃ²n gá»i lÃ  Lá»›p lá»“ng nhau khÃ´ng `static`)

NÃ y, báº¡n Ä‘Ã£ bao giá» nghÄ© Ä‘áº¿n viá»‡c táº¡o má»™t `class` ngay BÃŠN TRONG má»™t `class` khÃ¡c chÆ°a? VÃ¢ng, Ä‘Ã³ chÃ­nh lÃ  **Member Inner Class** Ä‘áº¥y!

NÃ³ lÃ  má»™t `class` Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a *ngay bÃªn trong* má»™t `class` khÃ¡c, vÃ  KHÃ”NG há» cÃ³ tá»« khÃ³a `static` Ä‘á»©ng trÆ°á»›c nÃ³.

Váº­y `class` nhá» bÃ© bÃªn trong nÃ y cÃ³ quyá»n háº¡n gÃ¬? Ã”i, nÃ³ *quyá»n lá»±c* láº¯m Ä‘Ã³! NÃ³ cÃ³ thá»ƒ truy cáº­p Táº¤T Cáº¢ cÃ¡c thÃ nh viÃªn cá»§a `class` bÃªn ngoÃ i (cÃ¡i `class` chá»©a nÃ³ áº¥y), ká»ƒ cáº£ nhá»¯ng thÃ nh viÃªn Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  `private`! Tháº­t tuyá»‡t vá»i pháº£i khÃ´ng nÃ o? Giá»‘ng nhÆ° má»™t thÃ nh viÃªn trong nhÃ  cÃ³ thá»ƒ vÃ o má»i phÃ²ng, ká»ƒ cáº£ phÃ²ng riÃªng tÆ° nháº¥t váº­y.

   ```java
   class Outer {
       private int data = 30;
       
       class Inner {
           void display() {
               System.out.println("Data: " + data);
           }
       }
       
       public static void main(String[] args) {
           Outer outer = new Outer();
           Outer.Inner inner = outer.new Inner();
           inner.display();
       }
   }
   ```

   2. **Lá»›p Lá»“ng TÄ©nh (Static Nested Class):**

Báº¡n Ä‘Ã£ quen vá»›i viá»‡c táº¡o cÃ¡c lá»›p (class) rá»“i Ä‘Ãºng khÃ´ng?
Giá» hÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t "lá»›p lá»›n" (outer class).
VÃ  *ngay bÃªn trong* lá»›p lá»›n Ä‘Ã³, báº¡n láº¡i Ä‘á»‹nh nghÄ©a thÃªm má»™t "lá»›p nhá»" khÃ¡c. Kiá»ƒu nhÆ° má»™t cÄƒn phÃ²ng nhá» náº±m gá»n trong má»™t cÄƒn nhÃ  lá»›n váº­y.
NhÆ°ng cÃ³ má»™t Ä‘iá»ƒm Ä‘áº·c biá»‡t: lá»›p nhá» nÃ y Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  `static`.
ÄÃ³ chÃ­nh lÃ  má»™t **Lá»›p Lá»“ng TÄ©nh**! (Lá»“ng vÃ¬ nÃ³ náº±m bÃªn trong, TÄ©nh vÃ¬ nÃ³ cÃ³ tá»« khÃ³a `static`).

Váº­y lá»›p lá»“ng tÄ©nh nÃ y cÃ³ thá»ƒ lÃ m gÃ¬?
NÃ³ cÃ³ má»™t quy táº¯c quan trá»ng:
*   NÃ³ **chá»‰ cÃ³ thá»ƒ truy cáº­p** (nhÃ¬n tháº¥y vÃ  sá»­ dá»¥ng) cÃ¡c thÃ nh viÃªn (biáº¿n hoáº·c phÆ°Æ¡ng thá»©c) cá»§a lá»›p bÃªn ngoÃ i mÃ  cÅ©ng Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u lÃ  `static`.
*   NÃ³ khÃ´ng thá»ƒ "cháº¡m" vÃ o cÃ¡c thÃ nh viÃªn *khÃ´ng pháº£i* `static` cá»§a lá»›p bÃªn ngoÃ i Ä‘Ã¢u nhÃ©. Táº¡i sao Æ°? VÃ¬ nÃ³ khÃ´ng Ä‘Æ°á»£c "gáº¯n káº¿t" vá»›i má»™t Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ nÃ o cá»§a lá»›p bÃªn ngoÃ i cáº£. NÃ³ chá»‰ quan tÃ¢m Ä‘áº¿n nhá»¯ng "thá»© chung" cá»§a *lá»›p* bÃªn ngoÃ i thÃ´i!

   ```java
   class Outer {
       static int data = 30;
       
       static class StaticNested {
           void display() {
               System.out.println("Data: " + data);
           }
       }
       
       public static void main(String[] args) {
           Outer.StaticNested nested = new Outer.StaticNested();
           nested.display();
       }
   }
   ```

   3. **Lá»›p Ná»™i Bá»™ Cá»¥c Bá»™ (Local Inner Class):**

TÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang viáº¿t má»™t phÆ°Æ¡ng thá»©c, lÃ m viá»‡c gÃ¬ Ä‘Ã³ tháº­t thÃº vá»‹. VÃ  bá»—ng dÆ°ng, báº¡n náº£y ra Ã½ Ä‘á»‹nh muá»‘n táº¡o má»™t `class` Má»šI TOANH NGAY BÃŠN TRONG phÆ°Æ¡ng thá»©c Ä‘Ã³?

Nghe cÃ³ váº» láº¡ Ä‘Ãºng khÃ´ng? NhÆ°ng CÃ“ THá»‚ Äáº¤Y!

ÄÃ³ chÃ­nh lÃ  lÃºc chÃºng ta gáº·p gá»¡ **Lá»›p Ná»™i Bá»™ Cá»¥c Bá»™ (Local Inner Class)**.

NÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n nháº¥t:
*   NÃ³ lÃ  má»™t `class` mÃ  báº¡n Ä‘á»‹nh nghÄ©a (táº¡o ra) **bÃªn trong má»™t phÆ°Æ¡ng thá»©c**.
*   Kiá»ƒu nhÆ°, nÃ³ chá»‰ "sá»‘ng" vÃ  "tá»“n táº¡i" trong cÃ¡i phÆ°Æ¡ng thá»©c Ä‘Ã³ thÃ´i.

Ã€ mÃ  khoan, cÃ³ má»™t quy táº¯c nhá» báº¡n cáº§n nhá»› vá» anh báº¡n nÃ y:
*   Khi `Local Inner Class` cá»§a báº¡n á»Ÿ trong phÆ°Æ¡ng thá»©c, nÃ³ cÃ³ thá»ƒ "nhÃ¬n tháº¥y" vÃ  sá»­ dá»¥ng cÃ¡c biáº¿n cá»¥c bá»™ (local variables) cá»§a phÆ°Æ¡ng thá»©c Ä‘Ã³.
*   NHÆ¯NG! CÃ¡c biáº¿n cá»¥c bá»™ Ä‘Ã³ pháº£i lÃ  **`final`** (tá»©c lÃ  giÃ¡ trá»‹ cá»§a chÃºng khÃ´ng bao giá» thay Ä‘á»•i sau khi Ä‘Æ°á»£c gÃ¡n).
*   Hoáº·c lÃ  **"effectively final"** (nghÄ©a lÃ  dÃ¹ báº¡n khÃ´ng viáº¿t tá»« khÃ³a `final` rÃµ rÃ ng, nhÆ°ng thá»±c táº¿ giÃ¡ trá»‹ cá»§a chÃºng cÅ©ng khÃ´ng thay Ä‘á»•i sau khi Ä‘Æ°á»£c gÃ¡n láº§n Ä‘áº§u).
*   HÃ£y hÃ¬nh dung, chÃºng lÃ  nhá»¯ng biáº¿n "kiÃªn Ä‘á»‹nh", khÃ´ng bao giá» "thay lÃ²ng Ä‘á»•i dáº¡" áº¥y!

   ```java
   class Outer {
       void display() {
           final int num = 23;
           
           class LocalInner {
               void print() {
                   System.out.println("Number: " + num);
               }
           }
           
           LocalInner inner = new LocalInner();
           inner.print();
       }
   }
   ```

   4. **Lá»›p ná»™i bá»™ áº©n danh (Anonymous Inner Class):**
TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©: ÄÃ¢y lÃ  má»™t loáº¡i lá»›p *cá»±c ká»³ Ä‘áº·c biá»‡t*!
NÃ³ lÃ  má»™t lá»›p... **khÃ´ng cÃ³ tÃªn**! Nghe hÆ¡i "hÃ³c bÃºa" Ä‘Ãºng khÃ´ng?
Váº­y thÃ¬, chÃºng ta dÃ¹ng nÃ³ Ä‘á»ƒ lÃ m gÃ¬ nhá»‰?
ThÆ°á»ng thÃ¬, báº¡n sáº½ dÃ¹ng lá»›p nÃ y khi báº¡n muá»‘n táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng (object) *ngay láº­p tá»©c*, chá»‰ dÃ¹ng má»™t láº§n thÃ´i, vÃ  Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ cáº§n cÃ³ má»™t vÃ i "Ä‘iá»ƒm nháº¥n" riÃªng.
VÃ­ dá»¥, Ä‘á»‘i tÆ°á»£ng nÃ y muá»‘n thay Ä‘á»•i cÃ¡ch má»™t phÆ°Æ¡ng thá»©c (method) hoáº¡t Ä‘á»™ng (hay cÃ²n gá»i lÃ  "ghi Ä‘Ã¨" - override má»™t phÆ°Æ¡ng thá»©c nÃ o Ä‘Ã³). NÃ³ giá»‘ng nhÆ° báº¡n Ä‘ang táº¡o ra má»™t phiÃªn báº£n "Ä‘á»™c nháº¥t vÃ´ nhá»‹" cho má»™t Ä‘á»‘i tÆ°á»£ng váº­y Ä‘Ã³!

   ```java
   abstract class Animal {
       abstract void sound();
   }
   
   class Test {
       public static void main(String[] args) {
           Animal dog = new Animal() {
               void sound() {
                   System.out.println("Bark");
               }
           };
           dog.sound();
       }
   }
   ```

   **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

20. ### Sá»± khÃ¡c biá»‡t giá»¯a final, finally vÃ  finalize() trong Java lÃ  gÃ¬?

Okay, sáºµn sÃ ng chÆ°a? HÃ£y cÃ¹ng "má»• xáº»" ba cÃ¡i tÃªn nghe cÃ³ váº» giá»‘ng nhau nÃ y trong Java nhÃ©! Äá»«ng lo, chÃºng ta sáº½ Ä‘i tá»«ng bÆ°á»›c má»™t Ä‘á»ƒ hiá»ƒu rÃµ chÃºng.

### `final`

TÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t thá»© gÃ¬ Ä‘Ã³ mÃ  báº¡n muá»‘n nÃ³ *khÃ´ng bao giá» thay Ä‘á»•i*. ÄÃ³ chÃ­nh lÃ  lÃºc `final` xuáº¥t hiá»‡n!

`final` lÃ  má»™t *tá»« khÃ³a* (keyword) trong Java. NÃ³ giá»‘ng nhÆ° má»™t con dáº¥u "ÄÃ£ chá»‘t!" váº­y Ä‘Ã³. Báº¡n cÃ³ thá»ƒ dÃ¹ng `final` vá»›i:

*   **Biáº¿n (Variables)**:
    Náº¿u báº¡n khai bÃ¡o má»™t biáº¿n lÃ  `final`, thÃ¬ giÃ¡ trá»‹ cá»§a biáº¿n Ä‘Ã³ sáº½ Ä‘Æ°á»£c *chá»‘t láº¡i* ngay sau khi báº¡n gÃ¡n giÃ¡ trá»‹ cho nÃ³. Sau Ä‘Ã³, báº¡n khÃ´ng thá»ƒ thay Ä‘á»•i giÃ¡ trá»‹ cá»§a nÃ³ Ä‘Æ°á»£c ná»¯a. NÃ³ trá»Ÿ thÃ nh má»™t "háº±ng sá»‘" (constant) rá»“i!

    ```java
    final int SO_NGAY_TRONG_TUAN = 7;
    // SO_NGAY_TRONG_TUAN = 8; // Lá»—i! KhÃ´ng Ä‘Æ°á»£c Ä‘Ã¢u nhÃ©, Ä‘Ã£ lÃ  final rá»“i!
    ```

*   **PhÆ°Æ¡ng thá»©c (Methods)**:
    Náº¿u báº¡n Ä‘Ã¡nh dáº¥u má»™t phÆ°Æ¡ng thá»©c lÃ  `final`, thÃ¬ cÃ¡c lá»›p con (subclass) cá»§a lá»›p Ä‘Ã³ *khÃ´ng thá»ƒ ghi Ä‘Ã¨* (override) phÆ°Æ¡ng thá»©c nÃ y Ä‘Æ°á»£c ná»¯a. NÃ³ giá»‘ng nhÆ° má»™t quy táº¯c "báº¥t di báº¥t dá»‹ch" váº­y.

    ```java
    class Me {
        final void nauAnNgon() {
            System.out.println("MÃ³n Äƒn cá»§a máº¹ luÃ´n ngon nháº¥t!");
        }
    }

    class Con extends Me {
        // void nauAnNgon() { // Lá»—i! KhÃ´ng thá»ƒ ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c final!
        //    System.out.println("MÃ³n con náº¥u cÅ©ng ngon!");
        // }
    }
    ```

*   **Lá»›p (Classes)**:
    Náº¿u báº¡n khai bÃ¡o má»™t lá»›p lÃ  `final`, thÃ¬ lá»›p Ä‘Ã³ *khÃ´ng thá»ƒ cÃ³ lá»›p con* nÃ o ná»¯a. KhÃ´ng ai cÃ³ thá»ƒ "káº¿ thá»«a" (inherit) tá»« lá»›p nÃ y Ä‘Æ°á»£c. NÃ³ giá»‘ng nhÆ° má»™t lá»›p "Ä‘á»™c nháº¥t vÃ´ nhá»‹" váº­y Ä‘Ã³.

    ```java
    final class HinhTron {
        // ...
    }

    // class HinhElip extends HinhTron { // Lá»—i! KhÃ´ng thá»ƒ káº¿ thá»«a tá»« lá»›p final!
    //    // ...
    // }
    ```

TÃ³m láº¡i, `final` cÃ³ nghÄ©a lÃ  "má»™t khi Ä‘Ã£ quyáº¿t Ä‘á»‹nh, thÃ¬ khÃ´ng thay Ä‘á»•i ná»¯a!".

### `finally`

HÃ£y hÃ¬nh dung báº¡n Ä‘ang lÃ m viá»‡c gÃ¬ Ä‘Ã³, vÃ  dÃ¹ cÃ³ chuyá»‡n gÃ¬ xáº£y ra (dÃ¹ má»i thá»© suÃ´n sáº» hay gáº·p lá»—i), báº¡n *luÃ´n luÃ´n* muá»‘n thá»±c hiá»‡n má»™t hÃ nh Ä‘á»™ng dá»n dáº¹p nÃ o Ä‘Ã³. ÄÃ³ chÃ­nh lÃ  viá»‡c cá»§a `finally`!

`finally` cÅ©ng lÃ  má»™t *tá»« khÃ³a* trong Java. NÃ³ luÃ´n Ä‘i kÃ¨m vá»›i khá»‘i `try-catch` (chÃºng ta dÃ¹ng `try-catch` Ä‘á»ƒ xá»­ lÃ½ lá»—i, hay cÃ²n gá»i lÃ  ngoáº¡i lá»‡ - exception).

Pháº§n code trong khá»‘i `finally` sáº½ *luÃ´n Ä‘Æ°á»£c thá»±c thi*, báº¥t ká»ƒ trong khá»‘i `try` cÃ³ xáº£y ra lá»—i hay khÃ´ng, hay lá»—i Ä‘Ã³ cÃ³ Ä‘Æ°á»£c khá»‘i `catch` xá»­ lÃ½ hay khÃ´ng.

NÃ³ cá»±c ká»³ há»¯u Ã­ch Ä‘á»ƒ:
*   ÄÃ³ng cÃ¡c tÃ i nguyÃªn (resource) mÃ  báº¡n Ä‘Ã£ má»Ÿ ra, nhÆ° file, káº¿t ná»‘i máº¡ng, káº¿t ná»‘i cÆ¡ sá»Ÿ dá»¯ liá»‡u.
*   Äáº£m báº£o má»i thá»© Ä‘Æ°á»£c "dá»n dáº¹p" gá»n gÃ ng trÆ°á»›c khi chÆ°Æ¡ng trÃ¬nh tiáº¿p tá»¥c.

ÄÃ¢y lÃ  cÃ¡ch nÃ³ hoáº¡t Ä‘á»™ng:

```java
try {
    // Thá»­ lÃ m má»™t viá»‡c gÃ¬ Ä‘Ã³, cÃ³ thá»ƒ xáº£y ra lá»—i á»Ÿ Ä‘Ã¢y
    System.out.println("Äang cá»‘ gáº¯ng lÃ m viá»‡c...");
    // int ketQua = 10 / 0; // Náº¿u dÃ²ng nÃ y cháº¡y, sáº½ cÃ³ lá»—i!
    System.out.println("Viá»‡c Ä‘Ã£ xong!");
} catch (ArithmeticException e) {
    // Náº¿u cÃ³ lá»—i chia cho 0, thÃ¬ code trong nÃ y sáº½ cháº¡y
    System.out.println("Oops! Bá»‹ lá»—i chia cho 0 rá»“i!");
} finally {
    // DÃ¹ cÃ³ lá»—i hay khÃ´ng, code trong nÃ y LUÃ”N LUÃ”N cháº¡y!
    System.out.println("DÃ¹ tháº¿ nÃ o thÃ¬ tÃ´i cÅ©ng sáº½ cháº¡y Ä‘á»ƒ dá»n dáº¹p!");
}
```

DÃ¹ báº¡n cÃ³ gáº·p lá»—i hay khÃ´ng, báº¡n sáº½ luÃ´n tháº¥y dÃ²ng "DÃ¹ tháº¿ nÃ o thÃ¬ tÃ´i cÅ©ng sáº½ cháº¡y Ä‘á»ƒ dá»n dáº¹p!" xuáº¥t hiá»‡n. Tháº­t lÃ  Ä‘Ã¡ng tin cáº­y pháº£i khÃ´ng?

### `finalize()`

BÃ¢y giá» Ä‘áº¿n `finalize()`. ÄÃ¢y khÃ´ng pháº£i lÃ  má»™t tá»« khÃ³a, mÃ  lÃ  má»™t *phÆ°Æ¡ng thá»©c* (method) Ä‘áº·c biá»‡t.

PhÆ°Æ¡ng thá»©c `finalize()` thuá»™c vá» lá»›p `Object` (mÃ  táº¥t cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng trong Java Ä‘á»u káº¿ thá»«a tá»« lá»›p nÃ y).

Váº­y nÃ³ lÃ m gÃ¬?
*   Khi bá»™ thu gom rÃ¡c (Garbage Collector - GC) cá»§a Java quyáº¿t Ä‘á»‹nh ráº±ng má»™t Ä‘á»‘i tÆ°á»£ng khÃ´ng cÃ²n Ä‘Æ°á»£c sá»­ dá»¥ng ná»¯a vÃ  sáº¯p bá»‹ "xÃ³a sá»•" khá»i bá»™ nhá»›...
*   ...thÃ¬ *ngay trÆ°á»›c khi* Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ bá»‹ xÃ³a, GC sáº½ gá»i phÆ°Æ¡ng thá»©c `finalize()` cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ (náº¿u báº¡n cÃ³ ghi Ä‘Ã¨ nÃ³).

Báº¡n cÃ³ thá»ƒ ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c nÃ y Ä‘á»ƒ thá»±c hiá»‡n má»™t sá»‘ cÃ´ng viá»‡c dá»n dáº¹p cuá»‘i cÃ¹ng cho Ä‘á»‘i tÆ°á»£ng, vÃ­ dá»¥ nhÆ° giáº£i phÃ³ng cÃ¡c tÃ i nguyÃªn "khÃ´ng pháº£i Java" (nhÆ° bá»™ nhá»› cáº¥p phÃ¡t tá»« há»‡ Ä‘iá»u hÃ nh, file má»Ÿ, káº¿t ná»‘i máº¡ng) mÃ  Garbage Collector khÃ´ng tá»± Ä‘á»™ng quáº£n lÃ½ Ä‘Æ°á»£c.

Tuy nhiÃªn, cÃ³ má»™t Ä‘iá»u cá»±c ká»³ quan trá»ng cáº§n nhá»›:
*   **`finalize()` khÃ´ng Ä‘Ã¡ng tin cáº­y!** Báº¡n khÃ´ng thá»ƒ biáº¿t *khi nÃ o* nÃ³ sáº½ Ä‘Æ°á»£c gá»i (hay tháº­m chÃ­ lÃ  *cÃ³ Ä‘Æ°á»£c gá»i hay khÃ´ng*). GC cháº¡y theo Ã½ cá»§a nÃ³, khÃ´ng pháº£i theo Ã½ báº¡n.
*   **NÃ³ Ä‘Ã£ bá»‹ Ä‘Ã¡nh dáº¥u lÃ  "deprecated" (khÃ´ng nÃªn dÃ¹ng ná»¯a) tá»« Java 9.**
*   Trong Java hiá»‡n Ä‘áº¡i, chÃºng ta cÃ³ nhá»¯ng cÃ¡ch tá»‘t hÆ¡n, Ä‘Ã¡ng tin cáº­y hÆ¡n Ä‘á»ƒ dá»n dáº¹p tÃ i nguyÃªn, nhÆ° sá»­ dá»¥ng khá»‘i `try-with-resources` hoáº·c cÃ¡c API `Cleaner`.

NÃ³i chung, Ä‘á»‘i vá»›i ngÆ°á»i má»›i báº¯t Ä‘áº§u, tá»‘t nháº¥t lÃ  *trÃ¡nh xa* `finalize()` vÃ  Ä‘á»«ng báº­n tÃ¢m vá» nÃ³ quÃ¡ nhiá»u. HÃ£y táº­p trung vÃ o `final` vÃ  `finally` nhÃ©!

   NÃ o, cÃ¹ng xem qua vÃ i cÃ¡i tÃªn báº¡n sáº½ gáº·p ráº¥t thÆ°á»ng xuyÃªn nhÃ©! `final`, `finally`, vÃ  `finalize()` Trong Java áº¥y háº£? Má»™t sá»‘ thá»© trÃ´ng cÃ³ váº» giá»‘ng nhau ghÃª. NhÃ¬n qua thÃ¬ y chang, nhÆ°ng mÃ  khoan Ä‘Ã£! Thá»±c ra, chÃºng Ä‘Æ°á»£c táº¡o ra Ä‘á»ƒ lÃ m nhá»¯ng nhiá»‡m vá»¥ hoÃ n toÃ n khÃ¡c nhau Ä‘áº¥y. Äá»«ng nháº§m láº«n nhÃ©!

   1. `**final**` â†’ NÃ y báº¡n, `final` lÃ  má»™t *tá»« khÃ³a Ä‘iá»u chá»‰nh* (modifier) Ä‘áº·c biá»‡t Ä‘Ã³! Báº¡n biáº¿t khÃ´ng, chÃºng ta cÃ³ thá»ƒ dÃ¹ng nÃ³ cho cÃ¡c biáº¿n (variables), cÃ¡c phÆ°Æ¡ng thá»©c (methods), vÃ  cáº£ cÃ¡c lá»›p (classes) ná»¯a Ä‘áº¥y.  
      - Chá»¯ A `final` NÃ y, hÃ£y nhá»› Ä‘iá»u nÃ y nhÃ©!

Khi má»™t biáº¿n Ä‘Ã£ Ä‘Æ°á»£c *khá»Ÿi táº¡o* (nghÄ©a lÃ , báº¡n Ä‘Ã£ gÃ¡n giÃ¡ trá»‹ Ä‘áº§u tiÃªn cho nÃ³ rá»“i áº¥y), thÃ¬...
...báº¡n sáº½ KHÃ”NG THá»‚ gÃ¡n láº¡i cho nÃ³ má»™t giÃ¡ trá»‹ Má»šI ná»¯a Ä‘Ã¢u.
NÃ³ sáº½ giá»¯ nguyÃªn giÃ¡ trá»‹ Ä‘Ã³ mÃ£i mÃ£i!  
      - A - Má»™t chá»¯ cÃ¡i nhá» bÃ©, nhÆ°ng báº¡n sáº½ gáº·p nÃ³ ráº¥t nhiá»u Ä‘áº¥y! `final` Báº¡n cÃ³ má»™t phÆ°Æ¡ng thá»©c (method) trong lá»›p cha (superclass) cá»§a mÃ¬nh, Ä‘Ãºng khÃ´ng?

Ã€, cÃ³ má»™t Ä‘iá»u thÃº vá»‹ nÃ y:
Náº¿u phÆ°Æ¡ng thá»©c Ä‘Ã³ Ä‘Æ°á»£c 'Ä‘Ã¡nh dáº¥u' Ä‘áº·c biá»‡t, thÃ¬ cÃ¡c lá»›p con (subclasses) cá»§a báº¡n...
...sáº½ KHÃ”NG THá»‚ nÃ o thay Ä‘á»•i hay 'ghi Ä‘Ã¨' (override) lÃªn cÃ¡ch nÃ³ hoáº¡t Ä‘á»™ng Ä‘Æ°á»£c.

NÃ³ cá»© 'Ä‘Ã³ng bÄƒng' y nguyÃªn nhÆ° váº­y tá»« lá»›p cha, vÃ  lá»›p con pháº£i cháº¥p nháº­n Ä‘iá»u Ä‘Ã³ thÃ´i!  
      - ChÃ o báº¡n! Sáºµn sÃ ng chÆ°a?

ChÃºng ta sáº½ báº¯t Ä‘áº§u vá»›i má»™t thá»© cá»±c ká»³ cÆ¡ báº£n. HÃ£y gá»i nÃ³ lÃ ...

**A** `final` NÃ y, khoan Ä‘Ã£! Báº¡n biáº¿t khÃ´ng, cÃ³ nhá»¯ng lÃºc chÃºng ta muá»‘n nÃ³i ráº±ng: "Lá»›p nÃ y siÃªu Ä‘áº·c biá»‡t, khÃ´ng ai Ä‘Æ°á»£c phÃ©p káº¿ thá»«a tá»« nÃ³ Ä‘Ã¢u nhÃ©!"

ÄÃºng váº­y! Khi má»™t `class` *khÃ´ng thá»ƒ Ä‘Æ°á»£c má»Ÿ rá»™ng* (hay cÃ²n gá»i lÃ  *khÃ´ng thá»ƒ Ä‘Æ°á»£c káº¿ thá»«a*), Ä‘iá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ  khÃ´ng má»™t `class` nÃ o khÃ¡c cÃ³ thá»ƒ lÃ m "con" cá»§a nÃ³. NÃ³ giá»‘ng nhÆ° viá»‡c báº¡n Ä‘áº·t má»™t táº¥m biá»ƒn "Cáº¥m vÃ o!" trÃªn cÃ¢y pháº£ há»‡ cá»§a lá»›p váº­y. NÃ³ lÃ  Ä‘iá»ƒm dá»«ng cuá»‘i cÃ¹ng rá»“i Ä‘Ã³!  

   2. **finally**
â†’ Ã€, `finally` lÃ  má»™t **khá»‘i lá»‡nh** Ä‘Ã³ báº¡n! NÃ³ xuáº¥t hiá»‡n khi chÃºng ta Ä‘ang **xá»­ lÃ½ ngoáº¡i lá»‡** (máº¥y lá»—i báº¥t ngá» áº¥y mÃ ).
â†’ Nhiá»‡m vá»¥ cá»§a nÃ³ lÃ  Ä‘áº£m báº£o nhá»¯ng Ä‘oáº¡n mÃ£ SIÃŠU QUAN TRá»ŒNG sáº½ Ä‘Æ°á»£c thá»±c thi. LUÃ”N LUÃ”N!
â†’ Kiá»ƒu nhÆ°: Ä‘Ã³ng file, giáº£i phÃ³ng káº¿t ná»‘i, hay dá»n dáº¹p tÃ i nguyÃªn. DÃ¹ cÃ³ lá»—i hay khÃ´ng, máº¥y lá»‡nh nÃ y VáºªN PHáº¢I CHáº Y!  
      - Ã€, chÃ­nh lÃ ... `finally` CÃ¡i khá»‘i lá»‡nh nÃ y Ã¡? NÃ³ sáº½ cháº¡y **Báº¤T Ká»‚** Ä‘iá»u gÃ¬ xáº£y ra luÃ´n Ä‘Ã³! DÃ¹ cÃ³ lá»—i (exception) áº­p Ä‘áº¿n hay khÃ´ng, nÃ³ VáºªN cá»© thá»±c thi thÃ´i.  

   3. **finalize()** â†’ NÃ³ lÃ  má»™t **method** Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a sáºµn trong `Object` Má»™t lá»›p mÃ  **Bá»™ thu gom rÃ¡c** (Garbage Collector) sáº½ 'gá»i' tá»›i. NÃ³ lÃ m Ä‘iá»u nÃ y *ngay trÆ°á»›c khi* há»§y má»™t Ä‘á»‘i tÆ°á»£ng.  
      - Váº­y lÃ , ngÃ y nay, báº¡n sáº½ tháº¥y ngÆ°á»i ta... hiáº¿m khi dÃ¹ng Ä‘áº¿n nÃ³ ná»¯a.
Táº¡i sao Æ°?
ÄÆ¡n giáº£n lÃ  vÃ¬ cÆ¡ cháº¿ thu gom rÃ¡c (garbage collection) hoáº¡t Ä‘á»™ng ráº¥t "tÃ¹y há»©ng" thÃ´i! Báº¡n cháº³ng thá»ƒ nÃ o biáº¿t Ä‘Æ°á»£c *chÃ­nh xÃ¡c khi nÃ o* nÃ³ sáº½ cháº¡y Ä‘á»ƒ dá»n dáº¹p Ä‘Ã¢u. Thá»i Ä‘iá»ƒm Ä‘Ã³ hoÃ n toÃ n khÃ´ng thá»ƒ Ä‘oÃ¡n trÆ°á»›c Ä‘Æ°á»£c!

   **CÃ¹ng xem má»™t vÃ­ dá»¥ nhÃ©:**

   ```java
   public class FinalExample {
       final int VALUE = 100;

       public final void display() {
           System.out.println("Final method");
       }

       public static void main(String[] args) {
           try {
               System.out.println("Inside try block");
           } finally {
               System.out.println("Inside finally block");
           }
       }

       @Override
       protected void finalize() throws Throwable {
           System.out.println("Finalize method called");
       }
   }
   ```

   **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

21. ### Sá»± khÃ¡c biá»‡t giá»¯a '==' vÃ  phÆ°Æ¡ng thá»©c equals()?

ChÃ o báº¡n! Báº¡n Ä‘Ã£ bao giá» tá»± há»i: "ÃŠ, trong Java, so sÃ¡nh hai thá»© cÃ³ giá»‘ng nhau khÃ´ng thÃ¬ dÃ¹ng `==` hay `equals()` nhá»‰?" Nghe cÃ³ váº» hÆ¡i giá»‘ng nhau, nhÆ°ng thá»±c ra chÃºng lÃ  hai "cÃ´ng cá»¥" khÃ¡c biá»‡t vá»›i nhá»¯ng nhiá»‡m vá»¥ riÃªng Ä‘áº¥y!

HÃ£y cÃ¹ng "má»• xáº»" tá»«ng cÃ¡i má»™t Ä‘á»ƒ xem chÃºng lÃ m gÃ¬ nhÃ©!

### Anh chÃ ng '==' (ToÃ¡n tá»­ so sÃ¡nh)

HÃ£y nghÄ© vá» `==` nhÆ° má»™t "thÃ¡m tá»­" chuyÃªn Ä‘i kiá»ƒm tra danh tÃ­nh hoáº·c giÃ¡ trá»‹ thÃ´.

1.  **Khi dÃ¹ng vá»›i cÃ¡c kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y (primitive types)**:
    *   CÃ¡c kiá»ƒu nhÆ° `int`, `boolean`, `char`, `double`...
    *   Khi báº¡n dÃ¹ng `==` vá»›i chÃºng, nÃ³ sáº½ há»i: "NÃ y, *giÃ¡ trá»‹* cá»§a hai cÃ¡i nÃ y cÃ³ giá»‘ng há»‡t nhau khÃ´ng?"
    *   NÃ³ chá»‰ quan tÃ¢m Ä‘áº¿n con sá»‘, chá»¯ cÃ¡i, hay `true`/`false` mÃ  thÃ´i.

    ```java
    int diemMonToan = 90;
    int diemMonLy = 90;
    int diemMonVan = 85;

    System.out.println(diemMonToan == diemMonLy); // Káº¿t quáº£ lÃ  true, vÃ¬ 90 VÃ€ 90 lÃ  giá»‘ng nhau
    System.out.println(diemMonToan == diemMonVan); // Káº¿t quáº£ lÃ  false, vÃ¬ 90 VÃ€ 85 lÃ  khÃ¡c nhau
    ```

2.  **Khi dÃ¹ng vá»›i cÃ¡c Ä‘á»‘i tÆ°á»£ng (objects)**:
    *   CÃ¡c Ä‘á»‘i tÆ°á»£ng nhÆ° `String`, `Integer`, hoáº·c cÃ¡c Ä‘á»‘i tÆ°á»£ng báº¡n tá»± táº¡o (`SinhVien`, `DienThoai`...).
    *   LÃºc nÃ y, `==` khÃ´ng cÃ²n quan tÃ¢m Ä‘áº¿n "ná»™i dung" hay "giÃ¡ trá»‹ bÃªn trong" cá»§a Ä‘á»‘i tÆ°á»£ng ná»¯a. NÃ³ sáº½ há»i: "Hai cÃ¡i nÃ y cÃ³ pháº£i LÃ€ CÃ™NG Má»˜T Ä‘á»‘i tÆ°á»£ng náº±m á»Ÿ CÃ™NG Má»˜T vá»‹ trÃ­ trong bá»™ nhá»› mÃ¡y tÃ­nh khÃ´ng?"
    *   NÃ³ so sÃ¡nh *Ä‘á»‹a chá»‰ bá»™ nhá»›* (hay cÃ²n gá»i lÃ  tham chiáº¿u) cá»§a hai Ä‘á»‘i tÆ°á»£ng. Náº¿u chÃºng trá» Ä‘áº¿n cÃ¹ng má»™t vá»‹ trÃ­, tá»©c lÃ  chÃºng lÃ  má»™t, thÃ¬ `==` má»›i tráº£ vá» `true`.

    HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ hai chiáº¿c Ä‘iá»u khiá»ƒn TV.
    *   Náº¿u `==` tráº£ vá» `true`, tá»©c lÃ  báº¡n Ä‘ang cáº§m *cÃ¹ng má»™t* chiáº¿c Ä‘iá»u khiá»ƒn (chá»‰ lÃ  báº¡n gá»i nÃ³ báº±ng hai cÃ¡i tÃªn khÃ¡c nhau thÃ´i).
    *   Náº¿u `==` tráº£ vá» `false`, tá»©c lÃ  báº¡n Ä‘ang cáº§m *hai chiáº¿c Ä‘iá»u khiá»ƒn khÃ¡c nhau*, dÃ¹ chÃºng cÃ³ thá»ƒ nhÃ¬n y há»‡t nhau vÃ  lÃ m cÃ¹ng má»™t viá»‡c.

    ```java
    String ten1 = new String("Alice");
    String ten2 = new String("Alice");
    String ten3 = ten1; // ten3 giá» trá» Ä‘áº¿n CÃ™NG Äá»I TÆ¯á»¢NG vá»›i ten1

    System.out.println(ten1 == ten2); // Káº¿t quáº£ lÃ  false! Táº¡i sao?
                                    // VÃ¬ ten1 vÃ  ten2 lÃ  hai Ä‘á»‘i tÆ°á»£ng String KHÃC NHAU
                                    // Ä‘Æ°á»£c táº¡o ra á»Ÿ hai vá»‹ trÃ­ khÃ¡c nhau trong bá»™ nhá»›,
                                    // dÃ¹ ná»™i dung ("Alice") bÃªn trong giá»‘ng nhau.

    System.out.println(ten1 == ten3); // Káº¿t quáº£ lÃ  true! Táº¡i sao?
                                    // VÃ¬ ten1 vÃ  ten3 cÃ¹ng trá» Ä‘áº¿n Má»˜T Ä‘á»‘i tÆ°á»£ng duy nháº¥t trong bá»™ nhá»›.
    ```

### CÃ´ nÃ ng equals() (PhÆ°Æ¡ng thá»©c so sÃ¡nh ná»™i dung)

`equals()` thÃ¬ láº¡i lÃ  má»™t "thÃ¡m tá»­" khÃ¡c, chuyÃªn Ä‘i kiá»ƒm tra ná»™i dung bÃªn trong!

*   `equals()` lÃ  má»™t **phÆ°Æ¡ng thá»©c** (method), khÃ´ng pháº£i toÃ¡n tá»­. NÃ³ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a sáºµn trong lá»›p `Object` (lá»›p "tá»• tiÃªn" cá»§a má»i Ä‘á»‘i tÆ°á»£ng trong Java).
*   Má»¥c Ä‘Ã­ch chÃ­nh cá»§a nÃ³ lÃ  Ä‘á»ƒ há»i: "NÃ y, *ná»™i dung* bÃªn trong cá»§a hai Ä‘á»‘i tÆ°á»£ng nÃ y cÃ³ giá»‘ng nhau khÃ´ng?"

1.  **Máº·c Ä‘á»‹nh cá»§a equals()**:
    *   Náº¿u báº¡n khÃ´ng "ghi Ä‘Ã¨" (override) phÆ°Æ¡ng thá»©c `equals()` trong lá»›p mÃ  báº¡n tá»± táº¡o, thÃ¬ máº·c Ä‘á»‹nh, nÃ³ sáº½ lÃ m y há»‡t nhÆ° `==`! Tá»©c lÃ  nÃ³ cÅ©ng so sÃ¡nh Ä‘á»‹a chá»‰ bá»™ nhá»›.

2.  **Khi chÃºng ta ghi Ä‘Ã¨ equals()**:
    *   ÄÃ¢y má»›i lÃ  lÃºc `equals()` "tá»a sÃ¡ng"! Vá»›i cÃ¡c Ä‘á»‘i tÆ°á»£ng, chÃºng ta thÆ°á»ng muá»‘n Ä‘á»‹nh nghÄ©a "báº±ng nhau" cÃ³ nghÄ©a lÃ  gÃ¬.
    *   VÃ­ dá»¥, hai Ä‘á»‘i tÆ°á»£ng `SinhVien` cÃ³ thá»ƒ Ä‘Æ°á»£c coi lÃ  báº±ng nhau náº¿u chÃºng cÃ³ cÃ¹ng `maSinhVien` vÃ  cÃ¹ng `hoTen`, chá»© khÃ´ng pháº£i lÃ  chÃºng cÃ³ pháº£i lÃ  cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng trong bá»™ nhá»› hay khÃ´ng.
    *   Lá»›p `String` lÃ  má»™t vÃ­ dá»¥ Ä‘iá»ƒn hÃ¬nh Ä‘Ã£ Ä‘Æ°á»£c Java ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c `equals()` Ä‘á»ƒ so sÃ¡nh ná»™i dung cá»§a chuá»—i.

    ```java
    String ten1 = new String("Alice");
    String ten2 = new String("Alice");
    String ten3 = ten1;

    System.out.println(ten1.equals(ten2)); // Káº¿t quáº£ lÃ  true! Táº¡i sao?
                                          // VÃ¬ phÆ°Æ¡ng thá»©c equals() cá»§a String Ä‘Ã£ Ä‘Æ°á»£c ghi Ä‘Ã¨
                                          // Ä‘á»ƒ so sÃ¡nh Ná»˜I DUNG cá»§a chuá»—i, vÃ  "Alice" == "Alice".

    System.out.println(ten1.equals(ten3)); // Káº¿t quáº£ lÃ  true! Hiá»ƒn nhiÃªn rá»“i, vÃ¬ ná»™i dung váº«n lÃ  "Alice".
    ```

### TÃ³m láº¡i sá»± khÃ¡c biá»‡t lá»›n nháº¥t:

*   **`==`**: Há»i "ÄÃ¢y cÃ³ pháº£i lÃ  CÃ™NG Má»˜T THá»¨ khÃ´ng?" (cÃ¹ng Ä‘á»‹a chá»‰ bá»™ nhá»› cho Ä‘á»‘i tÆ°á»£ng, cÃ¹ng giÃ¡ trá»‹ cho kiá»ƒu nguyÃªn thá»§y).
*   **`equals()`**: Há»i "Ná»™i dung bÃªn trong cá»§a hai cÃ¡i nÃ y cÃ³ GIá»NG NHAU khÃ´ng?" (chá»‰ Ã¡p dá»¥ng cho Ä‘á»‘i tÆ°á»£ng, vÃ  chá»‰ khi nÃ³ Ä‘Æ°á»£c ghi Ä‘Ã¨ má»™t cÃ¡ch há»£p lÃ½ Ä‘á»ƒ so sÃ¡nh ná»™i dung).

Váº­y nÃªn, khi báº¡n muá»‘n so sÃ¡nh giÃ¡ trá»‹ hoáº·c ná»™i dung cá»§a hai Ä‘á»‘i tÆ°á»£ng, hÃ£y nhá»› dÃ¹ng `equals()` (vÃ  Ä‘áº£m báº£o ráº±ng nÃ³ Ä‘Ã£ Ä‘Æ°á»£c ghi Ä‘Ã¨ Ä‘Ãºng cÃ¡ch cho lá»›p cá»§a báº¡n nhÃ©!). CÃ²n khi báº¡n muá»‘n kiá»ƒm tra xem hai biáº¿n Ä‘á»‘i tÆ°á»£ng cÃ³ trá» Ä‘áº¿n cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng duy nháº¥t trong bá»™ nhá»› hay khÃ´ng, thÃ¬ má»›i dÃ¹ng `==`.

Hiá»ƒu rÃµ Ä‘iá»u nÃ y sáº½ giÃºp báº¡n trÃ¡nh Ä‘Æ°á»£c ráº¥t nhiá»u "tai náº¡n" báº¥t ngá» trong láº­p trÃ¬nh Java Ä‘áº¥y! ChÃºc báº¡n há»c tá»‘t!
    
    NÃ y báº¡n Æ¡i! Khi chÃºng ta muá»‘n so sÃ¡nh cÃ¡c Ä‘á»‘i tÆ°á»£ng (objects) trong Java, chÃºng ta cÃ³ hai anh báº¡n cá»±c ká»³ há»¯u Ã­ch: `==` vÃ  `.equals()`.

Cáº£ hai Ä‘á»u giÃºp chÃºng ta "Ä‘á»‘i chiáº¿u" cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Ã³.
NhÆ°ng mÃ  khoan Ä‘Ã£! CÃ¡ch mÃ  má»—i anh báº¡n nÃ y lÃ m viá»‡c thÃ¬ láº¡i KHÃC NHAU má»™t trá»i má»™t vá»±c Ä‘Ã³ nha!

    1. **== (So sÃ¡nh tham chiáº¿u):** ToÃ¡n tá»­ `==` nÃ y *khÃ´ng* quan tÃ¢m Ä‘áº¿n viá»‡c hai Ä‘á»‘i tÆ°á»£ng *trÃ´ng giá»‘ng nhau* nhÆ° tháº¿ nÃ o Ä‘Ã¢u nhÃ©. NÃ³ chá»‰ kiá»ƒm tra xem hai biáº¿n tham chiáº¿u báº¡n Ä‘ang so sÃ¡nh cÃ³ Ä‘ang trá» Ä‘áº¿n **CÃ™NG Má»˜T Ä‘á»‘i tÆ°á»£ng DUY NHáº¤T** trong bá»™ nhá»› hay khÃ´ng thÃ´i. `==` Khi báº¡n dÃ¹ng toÃ¡n tá»­ `==` vá»›i hai Ä‘á»‘i tÆ°á»£ng, nÃ³ lÃ m gÃ¬ nhá»‰?
NÃ³ khÃ´ng thÃ¨m Ä‘á»ƒ Ã½ Ä‘áº¿n *ná»™i dung* bÃªn trong Ä‘á»‘i tÆ°á»£ng Ä‘Ã¢u.
MÃ  nÃ³ sáº½ so sÃ¡nh *Ä‘á»‹a chá»‰ bá»™ nhá»›* cá»§a chÃºng Ä‘Ã³.
Hay mÃ¬nh cÃ²n gá»i lÃ  so sÃ¡nh *tham chiáº¿u* (references) cá»§a hai Ä‘á»‘i tÆ°á»£ng.
NÃ³ chá»‰ muá»‘n biáº¿t: "Hai Ä‘á»‘i tÆ°á»£ng nÃ y cÃ³ Ä‘ang trá» Ä‘áº¿n *cÃ¹ng má»™t vá»‹ trÃ­* trong bá»™ nhá»› khÃ´ng?"
VÃ  nÃ³ tráº£ vá»... `true` Náº¿u cáº£ hai tham chiáº¿u (hai cÃ¡i tÃªn gá»i!) Ä‘ang cÃ¹ng trá» *Ä‘Ãºng vÃ o* má»™t Ä‘á»‘i tÆ°á»£ng duy nháº¥t trong bá»™ nhá»›.

    2. **.equals() (So sÃ¡nh Ná»˜I DUNG):** ÄÃ¢y lÃ  phÆ°Æ¡ng thá»©c siÃªu Ä‘áº·c biá»‡t giÃºp báº¡n kiá»ƒm tra xem Ná»˜I DUNG bÃªn trong hai Ä‘á»‘i tÆ°á»£ng cÃ³ GIá»NG Há»†T nhau khÃ´ng. `.equals()` CÃ¡i `method` nÃ y giÃºp báº¡n so sÃ¡nh *ná»™i dung tháº­t sá»±* hoáº·c *giÃ¡ trá»‹ bÃªn trong* cá»§a hai Ä‘á»‘i tÆ°á»£ng. NhÆ°ng mÃ , theo máº·c Ä‘á»‹nh (tá»©c lÃ  náº¿u báº¡n khÃ´ng lÃ m gÃ¬ khÃ¡c), thÃ¬ nÃ³ láº¡i hoáº¡t Ä‘á»™ng *y há»‡t* nhÆ°... `==`, nhÆ°ng báº¡n hoÃ n toÃ n cÃ³ thá»ƒ "ghi Ä‘Ã¨" (override) nÃ³!
Khi báº¡n ghi Ä‘Ã¨, báº¡n sáº½ tá»± tay Ä‘á»‹nh nghÄ©a *logic* so sÃ¡nh riÃªng cá»§a mÃ¬nh.
Báº¡n muá»‘n chÃºng nÃ³ so sÃ¡nh theo *cÃ¡ch Ä‘áº·c biá»‡t* mÃ  báº¡n muá»‘n, Ä‘Ãºng khÃ´ng?

    ```java
    public class ComparisonExample {
        public static void main(String[] args) {
            String s1 = new String("Hello");
            String s2 = new String("Hello");
            String s3 = s1;
            
            // == compares references
            System.out.println(s1 == s2);      // false (different objects)
            System.out.println(s1 == s3);      // true (same reference)
            
            // equals() compares content
            System.out.println(s1.equals(s2)); // true (same content)
            System.out.println(s1.equals(s3)); // true (same content)
        }
    }
    ```

    | ToÃ¡n tá»­ `==`: "Báº¡n cÃ³ pháº£i LÃ€ CHÃNH NÃ“ khÃ´ng?" | PhÆ°Æ¡ng thá»©c `equals()`: "Báº¡n cÃ³ GIá»NG NÃ“ khÃ´ng?" |
    |-------------|-----------------|
    | So sÃ¡nh Äá»ŠA CHá»ˆ cá»§a Ä‘á»‘i tÆ°á»£ng | So sÃ¡nh Ná»˜I DUNG bÃªn trong Ä‘á»‘i tÆ°á»£ng |
    | KHÃ”NG thá»ƒ ghi Ä‘Ã¨ | CÃ“ thá»ƒ ghi Ä‘Ã¨ |
    | NÃ³ lÃ m viá»‡c Ä‘Æ°á»£c vá»›i cáº£ cÃ¡c kiá»ƒu nguyÃªn thá»§y (máº¥y thá»© bÃ© tÃ­ áº¥y!) VÃ€ cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng (máº¥y thá»© to Ä‘Ã¹ng hÆ¡n). | Ã€, cÃ¡i nÃ y thÃ¬ 'khÃ³ tÃ­nh' hÆ¡n má»™t táº¹o. NÃ³ CHá»ˆ lÃ m viá»‡c vá»›i cÃ¡c Ä‘á»‘i tÆ°á»£ng thÃ´i! |
    | Tráº£ vá» `true` náº¿u chÃºng lÃ  *cÃ¹ng má»™t* Ä‘á»‘i tÆ°á»£ng trong bá»™ nhá»› | Tráº£ vá» `true` náº¿u ná»™i dung cá»§a chÃºng *giá»‘ng há»‡t* nhau |

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

22. ### Náº¡p chá»“ng phÆ°Æ¡ng thá»©c (Method Overloading) vÃ  Ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c (Method Overriding) lÃ  gÃ¬ váº­y?

    NÃ o, hÃ£y cÃ¹ng khÃ¡m phÃ¡ hai khÃ¡i niá»‡m siÃªu quan trá»ng trong Java nhÃ©: Ä‘Ã³ lÃ  *Náº¡p chá»“ng phÆ°Æ¡ng thá»©c* (Method Overloading) vÃ  *Ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c* (Method Overriding). ChÃºng chÃ­nh lÃ  nhá»¯ng 'cÃ´ng cá»¥' Ä‘áº¯c lá»±c giÃºp code cá»§a báº¡n linh hoáº¡t hÆ¡n ráº¥t nhiá»u, vÃ  lÃ  'chÃ¬a khÃ³a' Ä‘á»ƒ hiá»‡n thá»±c hÃ³a *tÃ­nh Ä‘a hÃ¬nh* (polymorphism) Ä‘áº¥y!

    **Náº¡p chá»“ng phÆ°Æ¡ng thá»©c (Äa hÃ¬nh lÃºc biÃªn dá»‹ch):**
    "Method overloading" lÃ  gÃ¬ Æ°?
NÃ³ xáº£y ra khi báº¡n cÃ³ nhiá»u hÃ m (methods) trong CÃ™NG Má»˜T Lá»šP (class) mÃ  chÃºng:
*   CÃ³ CÃ™NG TÃŠN vá»›i nhau.
*   NHÆ¯NG láº¡i cÃ³ CÃC THAM Sá» (parameters) KHÃC NHAU.

"Tham sá»‘ khÃ¡c nhau" nghÄ©a lÃ  sao? NÃ³ cÃ³ thá»ƒ lÃ :
*   Sá»‘ lÆ°á»£ng tham sá»‘ khÃ¡c nhau.
*   Kiá»ƒu dá»¯ liá»‡u cá»§a tham sá»‘ khÃ¡c nhau.
*   Hoáº·c thá»© tá»± cá»§a cÃ¡c tham sá»‘ khÃ¡c nhau (náº¿u kiá»ƒu dá»¯ liá»‡u giá»‘ng nhau).

Tháº¿ cÃ²n kiá»ƒu tráº£ vá» (return type) thÃ¬ sao?
Ã€, kiá»ƒu tráº£ vá» cÃ³ thá»ƒ GIá»NG NHAU hoáº·c KHÃC NHAU. NÃ³ khÃ´ng quan trá»ng Ä‘á»ƒ Java phÃ¢n biá»‡t cÃ¡c hÃ m bá»‹ "overload" Ä‘Ã¢u nhÃ©!

    ```java
    class Calculator {
        // Method with two int parameters
        int add(int a, int b) {
            return a + b;
        }
        
        // Overloaded method with three int parameters
        int add(int a, int b, int c) {
            return a + b + c;
        }
        
        // Overloaded method with double parameters
        double add(double a, double b) {
            return a + b;
        }
    }
    ```

    **Ghi Ä‘Ã¨ PhÆ°Æ¡ng thá»©c (Äa hÃ¬nh táº¡i thá»i Ä‘iá»ƒm cháº¡y):**
    Ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c (Method Overriding) lÃ  gÃ¬ váº­y? Dá»… hiá»ƒu láº¯m nÃ¨!

Báº¡n cá»© tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©:
*   Lá»›p cha cá»§a báº¡n cÃ³ má»™t cÃ¡i phÆ°Æ¡ng thá»©c (má»™t hÃ nh Ä‘á»™ng nÃ o Ä‘Ã³) Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a sáºµn rá»“i.
*   Tháº¿ nhÆ°ng, lá»›p con láº¡i khÃ´ng muá»‘n lÃ m theo y chang cÃ¡ch cá»§a lá»›p cha ná»¯a.
*   Lá»›p con muá»‘n 'tá»± mÃ¬nh' cung cáº¥p má»™t cÃ¡ch lÃ m *riÃªng biá»‡t* cho cÃ¡i phÆ°Æ¡ng thá»©c Ä‘Ã³.

Khi lá»›p con 'tá»± mÃ¬nh' Ä‘á»‹nh nghÄ©a láº¡i (hay cung cáº¥p má»™t phiÃªn báº£n riÃªng) cá»§a má»™t phÆ°Æ¡ng thá»©c mÃ  lá»›p cha Ä‘Ã£ cÃ³ sáºµn, Ä‘Ã³ chÃ­nh lÃ  lÃºc **ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c** xáº£y ra Ä‘áº¥y!

NhÆ°ng mÃ  khoan, cÃ³ má»™t vÃ i quy táº¯c nhá» xÃ­u nhÃ©! Äá»ƒ Ä‘Æ°á»£c coi lÃ  'ghi Ä‘Ã¨', phÆ°Æ¡ng thá»©c á»Ÿ lá»›p con pháº£i cÃ³:
*   **CÃ¹ng tÃªn** vá»›i phÆ°Æ¡ng thá»©c á»Ÿ lá»›p cha.
*   **CÃ¹ng kiá»ƒu dá»¯ liá»‡u tráº£ vá»** (return type).
*   VÃ  **cÃ¹ng cÃ¡c tham sá»‘** (parameters) ná»¯a.

    ```java
    class Animal {
        void sound() {
            System.out.println("Animal makes a sound");
        }
    }
    
    class Dog extends Animal {
        @Override
        void sound() {
            System.out.println("Dog barks");
        }
    }
    
    class Cat extends Animal {
        @Override
        void sound() {
            System.out.println("Cat meows");
        }
    }
    ```

    | Method Overloading (Náº¡p chá»“ng phÆ°Æ¡ng thá»©c) | Method Overriding (Ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c) |
|---|---|
| **TÃªn phÆ°Æ¡ng thá»©c thÃ¬ sao?** <br> Giá»‘ng nhau y chang! Cá»© gá»i lÃ  `in()`, `tinhTong()`, hay `veHinh()`... | **TÃªn phÆ°Æ¡ng thá»©c thÃ¬ sao?** <br> Pháº£i GIá»NG Há»†T phÆ°Æ¡ng thá»©c cá»§a Lá»šP CHA (superclass) báº¡n nhÃ©. |
| **CÃ²n tham sá»‘ thÃ¬ sao nhá»‰?** <br> Ã€, cÃ¡i nÃ y má»›i khÃ¡c nÃ¨! ChÃºng pháº£i KHÃC NHAU Ä‘áº¥y nhÃ©. KhÃ¡c vá» Sá» LÆ¯á»¢NG, KIá»‚U Dá»® LIá»†U, hoáº·c THá»¨ Tá»° cá»§a cÃ¡c tham sá»‘. | **CÃ²n tham sá»‘ thÃ¬ sao nhá»‰?** <br> CÅ©ng pháº£i GIá»NG Há»†T phÆ°Æ¡ng thá»©c cá»§a lá»›p cha luÃ´n. KhÃ´ng Ä‘Æ°á»£c khÃ¡c má»™t tÃ­ nÃ o Ä‘Ã¢u! |
| **Chuyá»‡n nÃ y xáº£y ra á»Ÿ Ä‘Ã¢u?** <br> Chá»‰ trong CÃ™NG Má»˜T Lá»šP (class) thÃ´i báº¡n Æ¡i. | **Chuyá»‡n nÃ y xáº£y ra á»Ÿ Ä‘Ã¢u?** <br> Giá»¯a Lá»šP CHA vÃ  Lá»šP CON (subclass). Lá»›p con sáº½ "viáº¿t láº¡i" (hay cÃ²n gá»i lÃ  "ghi Ä‘Ã¨") má»™t phÆ°Æ¡ng thá»©c mÃ  nÃ³ Ä‘Ã£ thá»«a hÆ°á»Ÿng tá»« lá»›p cha. |
| **Má»¥c Ä‘Ã­ch cá»§a nÃ³ lÃ  gÃ¬?** <br> GiÃºp báº¡n lÃ m CÃ™NG Má»˜T VIá»†C (vÃ­ dá»¥: "in" ra mÃ n hÃ¬nh), nhÆ°ng vá»›i cÃ¡c "Ä‘áº§u vÃ o" (input) KHÃC NHAU. <br> VÃ­ dá»¥: <br> `in(sá»‘ nguyÃªn)` hoáº·c `in(chuá»—i kÃ½ tá»±)`. <br> Java Ä‘á»§ thÃ´ng minh Ä‘á»ƒ biáº¿t báº¡n muá»‘n cÃ¡i nÃ o dá»±a vÃ o thá»© báº¡n Ä‘Æ°a cho nÃ³. | **Má»¥c Ä‘Ã­ch cá»§a nÃ³ lÃ  gÃ¬?** <br> Lá»›p con muá»‘n cÃ³ CÃCH LÃ€M RIÃŠNG Cá»¦A NÃ“ cho má»™t hÃ nh Ä‘á»™ng mÃ  lá»›p cha Ä‘Ã£ Ä‘á»‹nh nghÄ©a. <br> VÃ­ dá»¥: <br> Lá»›p `Äá»™ngVáº­t` cÃ³ thá»ƒ cÃ³ phÆ°Æ¡ng thá»©c `tiengKeu()` (tiáº¿ng kÃªu chung chung). <br> NhÆ°ng lá»›p `ChÃ³` (lÃ  con cá»§a `Äá»™ngVáº­t`) thÃ¬ muá»‘n `tiengKeu()` cá»§a nÃ³ pháº£i lÃ  "GÃ¢u gÃ¢u!" cÆ¡! NÃ³ khÃ´ng muá»‘n kÃªu tiáº¿ng chung chung ná»¯a. |
| **Khi nÃ o Java "biáº¿t" pháº£i gá»i cÃ¡i nÃ o?** <br> Ngay lÃºc biÃªn dá»‹ch (compile time) chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n. Java nhÃ¬n vÃ o cÃ¡c tham sá»‘ báº¡n truyá»n vÃ o lÃ  nÃ³ tá»± Ä‘á»™ng chá»n Ä‘Ãºng phÆ°Æ¡ng thá»©c rá»“i. | **Khi nÃ o Java "biáº¿t" pháº£i gá»i cÃ¡i nÃ o?** <br> LÃºc chÆ°Æ¡ng trÃ¬nh Ä‘ang CHáº Y (runtime). Java sáº½ nhÃ¬n xem Ä‘á»‘i tÆ°á»£ng thá»±c sá»± cá»§a báº¡n lÃ  loáº¡i gÃ¬ (lÃ  `Äá»™ngVáº­t` hay lÃ  `ChÃ³`?) Ä‘á»ƒ gá»i Ä‘Ãºng phÆ°Æ¡ng thá»©c cá»§a lá»›p Ä‘Ã³. |
| | **Má»™t máº¹o nhá» nÃ¨:** <br> Báº¡n sáº½ thÆ°á»ng tháº¥y tá»« khÃ³a `@Override` ngay trÃªn phÆ°Æ¡ng thá»©c nÃ y. NÃ³ giá»‘ng nhÆ° má»™t "lá»i nháº¯c" cho báº¡n vÃ  cho Java biáº¿t ráº±ng: "ÃŠ, cÃ¡i phÆ°Æ¡ng thá»©c nÃ y Ä‘ang ghi Ä‘Ã¨ lÃªn phÆ°Æ¡ng thá»©c cá»§a lá»›p cha Ä‘Ã³!" Ráº¥t há»¯u Ã­ch Ä‘á»ƒ trÃ¡nh lá»—i. |
    |--------------------|-------------------|
    | TÃªn phÆ°Æ¡ng thá»©c thÃ¬ **giá»‘ng há»‡t nhau**, nhÆ°ng danh sÃ¡ch cÃ¡c tham sá»‘ (tá»©c lÃ  nhá»¯ng 'mÃ³n Ä‘á»“' báº¡n truyá»n vÃ o áº¥y) thÃ¬ láº¡i **khÃ¡c biá»‡t**. | TÃªn phÆ°Æ¡ng thá»©c cÅ©ng **giá»‘ng há»‡t**, vÃ  danh sÃ¡ch cÃ¡c tham sá»‘ (nhá»¯ng thá»© báº¡n truyá»n vÃ o) cÅ©ng **y chang nhau ná»‘t!** Náº¿u báº¡n lÃ m Ä‘iá»u nÃ y trong cÃ¹ng má»™t lá»›p, thÃ¬ Ã´i thÃ´i! Java sáº½ 'bá»‘i rá»‘i' láº¯m Ä‘áº¥y, nÃ³ khÃ´ng biáº¿t pháº£i gá»i phÆ°Æ¡ng thá»©c nÃ o Ä‘Ã¢u vÃ  sáº½ bÃ¡o lá»—i ngay tá»©c thÃ¬! |
    | Khi á»Ÿ trong CÃ™NG Má»˜T Lá»šP | Khi cÃ³ Lá»šP CHA vÃ  Lá»šP CON |
    | Äa hÃ¬nh lÃºc biÃªn dá»‹ch (Compile-time polymorphism) | Äa hÃ¬nh lÃºc cháº¡y (Runtime polymorphism) |
|---|---|
| **NÃ y báº¡n!** ÄÃ¢y lÃ  lÃºc trÃ¬nh biÃªn dá»‹ch (compiler) cá»§a Java tá»± mÃ¬nh "suy nghÄ©" vÃ  quyáº¿t Ä‘á»‹nh má»i thá»©. Má»i thá»© Ä‘Æ°á»£c chá»‘t háº¡ **NGAY LÃšC BIÃŠN Dá»ŠCH** luÃ´n! | **NÃ y báº¡n!** KhÃ¡c háº³n nhÃ©! á» Ä‘Ã¢y, trÃ¬nh biÃªn dá»‹ch khÃ´ng biáº¿t Ä‘Æ°á»£c Ä‘Ã¢u. Quyáº¿t Ä‘á»‹nh sáº½ Ä‘Æ°á»£c Ä‘Æ°a ra **khi chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y** (runtime) Ä‘Ã³! |
| **NÃ³ lÃ  gÃ¬ váº­y?** ChÃºng ta thÆ°á»ng gá»i nÃ³ lÃ  **Ä‘a hÃ¬nh tÄ©nh** (Static Polymorphism). | **NÃ³ lÃ  gÃ¬ váº­y?** ÄÃ¢y chÃ­nh lÃ  **Ä‘a hÃ¬nh Ä‘á»™ng** (Dynamic Polymorphism) mÃ  báº¡n hay nghe. |
| **LÃ m sao Ä‘á»ƒ nháº­n ra nÃ³?** ThÆ°á»ng thÃ¬ báº¡n sáº½ tháº¥y nÃ³ qua **náº¡p chá»“ng phÆ°Æ¡ng thá»©c** (`Method Overloading`). <br> Tá»©c lÃ , báº¡n cÃ³ nhiá»u phÆ°Æ¡ng thá»©c cÃ¹ng tÃªn, nhÆ°ng chÃºng nháº­n vÃ o cÃ¡c kiá»ƒu tham sá»‘ khÃ¡c nhau hoáº·c sá»‘ lÆ°á»£ng tham sá»‘ khÃ¡c nhau. | **LÃ m sao Ä‘á»ƒ nháº­n ra nÃ³?** Báº¡n sáº½ tháº¥y nÃ³ rÃµ nháº¥t qua **ghi Ä‘Ã¨ phÆ°Æ¡ng thá»©c** (`Method Overriding`) khi báº¡n dÃ¹ng káº¿ thá»«a (inheritance). <br> Má»™t lá»›p con sáº½ "tÃ¹y chá»‰nh" láº¡i cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a má»™t phÆ°Æ¡ng thá»©c Ä‘Ã£ cÃ³ á»Ÿ lá»›p cha. |
| **TrÃ¬nh biÃªn dá»‹ch lÃ m gÃ¬?** Khi báº¡n gá»i má»™t phÆ°Æ¡ng thá»©c, trÃ¬nh biÃªn dá»‹ch nhÃ¬n vÃ o **kiá»ƒu dá»¯ liá»‡u vÃ  sá»‘ lÆ°á»£ng tham sá»‘** báº¡n truyá»n vÃ o. NÃ³ Ä‘á»§ thÃ´ng minh Ä‘á»ƒ biáº¿t chÃ­nh xÃ¡c phÆ°Æ¡ng thá»©c nÃ o cáº§n Ä‘Æ°á»£c gá»i! | **JVM lÃ m gÃ¬?** Khi báº¡n gá»i má»™t phÆ°Æ¡ng thá»©c Ä‘Ã£ bá»‹ ghi Ä‘Ã¨, trÃ¬nh biÃªn dá»‹ch bÃ³ tay! ChÃ­nh Java Virtual Machine (JVM) sáº½ Ä‘á»£i Ä‘áº¿n lÃºc chÆ°Æ¡ng trÃ¬nh cháº¡y, rá»“i nhÃ¬n vÃ o **kiá»ƒu Ä‘á»‘i tÆ°á»£ng THá»°C Táº¾** mÃ  báº¡n Ä‘ang dÃ¹ng Ä‘á»ƒ quyáº¿t Ä‘á»‹nh gá»i phÆ°Æ¡ng thá»©c nÃ o. |
| **VÃ­ dá»¥ dá»… hiá»ƒu nÃ¨:** <br> ```java class Calculator { int add(int a, int b) { return a + b; } double add(double a, double b) { return a + b; } } // Khi báº¡n gá»i: Calculator.add(5, 10); // Compiler biáº¿t ngay pháº£i gá»i add(int, int)! // Khi báº¡n gá»i: Calculator.add(5.0, 10.0); // Compiler biáº¿t ngay pháº£i gá»i add(double, double)! ``` <br> **ÄÆ¡n giáº£n lÃ :** TrÃ¬nh biÃªn dá»‹ch **biáº¿t trÆ°á»›c** nÃªn lÃ m gÃ¬! | **VÃ­ dá»¥ dá»… hiá»ƒu nÃ¨:** <br> ```java class Animal { void makeSound() { System.out.println("Animal makes a sound"); } } class Dog extends Animal { @Override void makeSound() { System.out.println("Woof!"); } } // Animal myPet = new Dog(); // myPet.makeSound(); // JVM sáº½ Ä‘á»£i Ä‘áº¿n lÃºc cháº¡y, tháº¥y myPet thá»±c ra lÃ  Dog, // tháº¿ lÃ  nÃ³ gá»i Dog.makeSound()! ``` <br> **ÄÆ¡n giáº£n lÃ :** JVM **chá» Ä‘áº¿n lÃºc cháº¡y** má»›i quyáº¿t Ä‘á»‹nh nÃªn lÃ m gÃ¬! |
    | Kiá»ƒu tráº£ vá»? NÃ³ *cÃ³ thá»ƒ lÃ  má»™t kiá»ƒu khÃ¡c* nha! | Kiá»ƒu tráº£ vá»? NÃ³ *pháº£i giá»‘ng há»‡t* hoáº·c lÃ  *má»™t kiá»ƒu con* cá»§a kiá»ƒu ban Ä‘áº§u thÃ´i! |
    | Quyá»n truy cáº­p cÃ³ thá»ƒ lÃ  báº¥t ká»³ loáº¡i nÃ o | KhÃ´ng Ä‘Æ°á»£c giáº£m quyá»n truy cáº­p |
|---|---|
| Báº¡n Ä‘ang ghi Ä‘Ã¨ má»™t phÆ°Æ¡ng thá»©c, Ä‘Ãºng khÃ´ng nÃ o? Tuyá»‡t vá»i! Váº­y thÃ¬, quyá»n truy cáº­p (access modifier) cá»§a phÆ°Æ¡ng thá»©c má»›i mÃ  báº¡n vá»«a táº¡o cÃ³ thá»ƒ lÃ  gÃ¬ Ä‘Ã¢y? Báº¡n cÃ³ thá»ƒ chá»n quyá»n truy cáº­p lÃ  `public`, `protected`, hoáº·c `default` (package-private) cho nÃ³. | NhÆ°ng mÃ , cÃ³ má»™t quy táº¯c Cá»°C Ká»² quan trá»ng báº¡n pháº£i nhá»› nhÃ©! Báº¡n KHÃ”NG BAO GIá»œ Ä‘Æ°á»£c lÃ m cho quyá»n truy cáº­p cá»§a phÆ°Æ¡ng thá»©c ghi Ä‘Ã¨ *háº¹p hÆ¡n* so vá»›i phÆ°Æ¡ng thá»©c gá»‘c. NÃ³i cÃ¡ch khÃ¡c, báº¡n chá»‰ cÃ³ thá»ƒ giá»¯ nguyÃªn quyá»n truy cáº­p, hoáº·c lÃ m cho nÃ³ *rá»™ng hÆ¡n* thÃ´i! VÃ­ dá»¥: Náº¿u phÆ°Æ¡ng thá»©c gá»‘c lÃ  `protected`, thÃ¬ phÆ°Æ¡ng thá»©c má»›i cá»§a báº¡n chá»‰ cÃ³ thá»ƒ lÃ  `protected` hoáº·c `public`. |

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

23. ### HashMap vÃ  Hashtable khÃ¡c nhau chá»— nÃ o nhá»‰?

Ã€ hÃ¡! ÄÃ¢y lÃ  má»™t cÃ¢u há»i kinh Ä‘iá»ƒn Ä‘áº¥y, cá»© nhÆ° báº¡n Ä‘ang cá»‘ gáº¯ng tÃ¬m hiá»ƒu xem siÃªu anh hÃ¹ng nÃ o máº¡nh hÆ¡n váº­y. Cáº£ `HashMap` vÃ  `Hashtable` Ä‘á»u lÃ  nhá»¯ng "thÃ¹ng chá»©a" tuyá»‡t vá»i Ä‘á»ƒ lÆ°u trá»¯ cÃ¡c cáº·p *khÃ³a-giÃ¡ trá»‹* (key-value), nhÆ°ng chÃºng láº¡i cÃ³ nhá»¯ng tÃ­nh cÃ¡ch ráº¥t khÃ¡c nhau. CÃ¹ng xem nhÃ©!

**1. Chuyá»‡n vá» "Äá»“ng bá»™" (Synchronization): Ai lÃ  ngÆ°á»i thÃ­ch xáº¿p hÃ ng?**

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t nhÃ  vá»‡ sinh cÃ´ng cá»™ng.

*   **`Hashtable`:** Cáº­u nÃ y giá»‘ng nhÆ° nhÃ  vá»‡ sinh cÃ³ ngÆ°á»i gÃ¡c cá»­a. Má»—i láº§n chá»‰ cho Má»˜T ngÆ°á»i vÃ o dÃ¹ng. Ai muá»‘n vÃ o pháº£i chá» ngÆ°á»i trÆ°á»›c ra Ä‘Ã£.
    *   Äiá»u nÃ y cÃ³ nghÄ©a lÃ  `Hashtable` Ä‘Æ°á»£c **Ä‘á»“ng bá»™ (synchronized)**. Khi nhiá»u "luá»“ng" (thread â€“ táº¡m hiá»ƒu lÃ  nhiá»u chÆ°Æ¡ng trÃ¬nh nhá» Ä‘ang cháº¡y cÃ¹ng lÃºc) muá»‘n truy cáº­p `Hashtable`, chÃºng sáº½ pháº£i xáº¿p hÃ ng vÃ  chá» Ä‘áº¿n lÆ°á»£t.
    *   An toÃ n tuyá»‡t Ä‘á»‘i trong mÃ´i trÆ°á»ng Ä‘a luá»“ng (multi-threaded environment) â€“ khÃ´ng bao giá» cÃ³ chuyá»‡n hai luá»“ng Ä‘á»¥ng nhau gÃ¢y há»ng dá»¯ liá»‡u. NhÆ°ng Ä‘á»•i láº¡i, nÃ³ sáº½... cháº­m hÆ¡n!

*   **`HashMap`:** CÃ²n cáº­u nÃ y thÃ¬ giá»‘ng nhÆ° má»™t bÃ£i Ä‘áº¥t trá»‘ng, ai muá»‘n Ä‘i vá»‡ sinh thÃ¬ cá»© tá»± nhiÃªn tÃ¬m chá»— mÃ  "giáº£i quyáº¿t".
    *   `HashMap` **khÃ´ng Ä‘Æ°á»£c Ä‘á»“ng bá»™ (not synchronized)**. Náº¿u nhiá»u luá»“ng cá»‘ gáº¯ng truy cáº­p vÃ  sá»­a Ä‘á»•i `HashMap` cÃ¹ng lÃºc, cÃ³ thá»ƒ sáº½ xáº£y ra há»—n loáº¡n (dá»¯ liá»‡u bá»‹ sai, chÆ°Æ¡ng trÃ¬nh lá»—i).
    *   Tuy nhiÃªn, vÃ¬ khÃ´ng pháº£i chá» Ä‘á»£i hay quáº£n lÃ½ xáº¿p hÃ ng, `HashMap` láº¡i **nhanh hÆ¡n nhiá»u** trong mÃ´i trÆ°á»ng Ä‘Æ¡n luá»“ng (single-threaded) hoáº·c khi báº¡n tá»± quáº£n lÃ½ viá»‡c Ä‘á»“ng bá»™ bÃªn ngoÃ i.

**2. Chuyá»‡n cÃ¡i "Null" khÃ³ tÃ­nh: Ai cháº¥p nháº­n "trá»‘ng khÃ´ng"?**

*   **`HashMap`:** Cáº­u nÃ y khÃ¡ dá»… tÃ­nh vá»›i `null` (giÃ¡ trá»‹ rá»—ng, khÃ´ng cÃ³ gÃ¬).
    *   Báº¡n cÃ³ thá»ƒ dÃ¹ng **Má»˜T khÃ³a `null`** (vÃ­ dá»¥: `map.put(null, "GiÃ¡ trá»‹ null")`).
    *   VÃ  báº¡n cÃ³ thá»ƒ dÃ¹ng **NHIá»€U giÃ¡ trá»‹ `null`** (vÃ­ dá»¥: `map.put("key1", null)`, `map.put("key2", null)`).

*   **`Hashtable`:** CÃ²n cáº­u nÃ y thÃ¬ cá»±c ká»³ khÃ³ tÃ­nh vá»›i `null`.
    *   **KHÃ”NG BAO GIá»œ** cháº¥p nháº­n khÃ³a `null`. Náº¿u báº¡n thá»­, nÃ³ sáº½ nÃ©m ra lá»—i `NullPointerException` ngay láº­p tá»©c!
    *   **KHÃ”NG BAO GIá»œ** cháº¥p nháº­n giÃ¡ trá»‹ `null`. TÆ°Æ¡ng tá»±, nÃ³ cÅ©ng sáº½ nÃ©m ra `NullPointerException`!
    *   `Hashtable` muá»‘n má»i thá»© pháº£i rÃµ rÃ ng, khÃ´ng cÃ³ chá»— cho sá»± "trá»‘ng khÃ´ng" Ä‘Ã¢u!

**3. Tá»‘c Ä‘á»™ cháº¡y Ä‘ua: Ai vá» Ä‘Ã­ch trÆ°á»›c?**

*   **`HashMap`:** ThÆ°á»ng thÃ¬ `HashMap` sáº½ **nhanh hÆ¡n** `Hashtable`. Táº¡i sao Æ°? VÃ¬ nÃ³ khÃ´ng pháº£i tá»‘n thá»i gian vÃ  tÃ i nguyÃªn Ä‘á»ƒ lo láº¯ng vá» viá»‡c Ä‘á»“ng bá»™ hÃ³a (khÃ´ng cáº§n ngÆ°á»i gÃ¡c cá»­a, khÃ´ng cáº§n xáº¿p hÃ ng). NÃ³ cá»© tháº¿ mÃ  cháº¡y thÃ´i!

*   **`Hashtable`:** Cháº­m hÆ¡n má»™t chÃºt. CÃ¡i giÃ¡ cá»§a sá»± an toÃ n vÃ  tráº­t tá»± trong mÃ´i trÆ°á»ng Ä‘a luá»“ng lÃ  tá»‘c Ä‘á»™ pháº£i giáº£m Ä‘i.

**4. Ai lÃ  "ngÆ°á»i cÅ©", ai lÃ  "ngÆ°á»i má»›i"?**

*   **`Hashtable`:** Cáº­u nÃ y lÃ  má»™t trong nhá»¯ng lá»›p "tiá»n sá»­" cá»§a Java, xuáº¥t hiá»‡n tá»« phiÃªn báº£n Java 1.0. NÃ³ thuá»™c vá» má»™t bá»™ khung cÅ© hÆ¡n.

*   **`HashMap`:** Cáº­u nÃ y lÃ  "thanh niÃªn" cá»§a thá»i Ä‘áº¡i má»›i hÆ¡n, Ä‘Æ°á»£c giá»›i thiá»‡u trong Java 1.2 vÃ  lÃ  má»™t pháº§n cá»§a Collections Framework hiá»‡n Ä‘áº¡i. ÄÃ¢y lÃ  bá»™ khung chuáº©n Ä‘Æ°á»£c khuyáº¿n khÃ­ch sá»­ dá»¥ng trong háº§u háº¿t cÃ¡c trÆ°á»ng há»£p.

**5. CÃ¡ch "Ä‘i dáº¡o" qua cÃ¡c pháº§n tá»­ (Iteration):**

*   **`Hashtable`:** NgÃ y xÆ°a, `Hashtable` chá»§ yáº¿u dÃ¹ng `Enumeration` Ä‘á»ƒ duyá»‡t qua cÃ¡c pháº§n tá»­. Giá» thÃ¬ nÃ³ cÅ©ng há»— trá»£ `Iterator` rá»“i.

*   **`HashMap`:** LuÃ´n luÃ´n dÃ¹ng `Iterator` Ä‘á»ƒ duyá»‡t, vÃ¬ nÃ³ lÃ  má»™t pháº§n cá»§a Collections Framework hiá»‡n Ä‘áº¡i.

**TÃ³m láº¡i:**

*   **DÃ¹ng `HashMap` khi:** Báº¡n cáº§n tá»‘c Ä‘á»™, vÃ  báº¡n khÃ´ng cáº§n pháº£i lo láº¯ng vá» viá»‡c nhiá»u luá»“ng truy cáº­p cÃ¹ng lÃºc (hoáº·c báº¡n sáº½ tá»± quáº£n lÃ½ viá»‡c Ä‘Ã³). Báº¡n cÅ©ng muá»‘n linh hoáº¡t vá»›i cÃ¡c giÃ¡ trá»‹ `null`.
*   **DÃ¹ng `Hashtable` khi:** Báº¡n lÃ m viá»‡c vá»›i mÃ£ nguá»“n cÅ© vÃ  cáº§n giá»¯ tÆ°Æ¡ng thÃ­ch, hoáº·c báº¡n thá»±c sá»± cáº§n má»™t Map Ä‘Æ°á»£c Ä‘á»“ng bá»™ sáºµn cÃ³ (nhÆ°ng thÆ°á»ng thÃ¬ cÃ³ cÃ¡c lá»±a chá»n hiá»‡n Ä‘áº¡i hÆ¡n vÃ  hiá»‡u quáº£ hÆ¡n cho viá»‡c nÃ y, nhÆ° `ConcurrentHashMap`).

Trong háº§u háº¿t cÃ¡c trÆ°á»ng há»£p má»›i, báº¡n sáº½ muá»‘n dÃ¹ng `HashMap` Ä‘áº¥y! NÃ³ nhanh hÆ¡n vÃ  linh hoáº¡t hÆ¡n nhiá»u.

    NÃ y báº¡n! Trong Java, khi chÃºng ta cáº§n lÆ°u trá»¯ dá»¯ liá»‡u theo kiá»ƒu "cáº·p Ä‘Ã´i hoÃ n háº£o" â€“ tá»©c lÃ  má»—i "chÃ¬a khÃ³a" (key) sáº½ Ä‘i kÃ¨m vá»›i má»™t "giÃ¡ trá»‹" (value) tÆ°Æ¡ng á»©ng â€“ thÃ¬ cÃ³ hai cÃ´ng cá»¥ ráº¥t phá»• biáº¿n mÃ  báº¡n sáº½ gáº·p: Ä‘Ã³ lÃ  `HashMap` vÃ  `Hashtable`.

Nghe cÃ³ váº» giá»‘ng nhau, Ä‘Ãºng khÃ´ng? Cáº£ hai Ä‘á»u giÃºp chÃºng ta "nhÃ©t" cÃ¡c cáº·p `key-value` vÃ o. NhÆ°ng khoan Ä‘Ã£! DÃ¹ cÃ¹ng lÃ m cÃ´ng viá»‡c nÃ y, hai anh báº¡n nÃ y láº¡i cÃ³ nhá»¯ng Ä‘iá»ƒm khÃ¡c biá»‡t *cá»±c ká»³ quan trá»ng* mÃ  báº¡n cáº§n pháº£i biáº¿t Ä‘áº¥y:

    NÃ y báº¡n, báº¡n Ä‘Ã£ bao giá» tháº¯c máº¯c giá»¯a `HashMap` vÃ  `Hashtable` cÃ³ gÃ¬ khÃ¡c nhau chÆ°a? TrÃ´ng chÃºng cÃ³ váº» giá»‘ng nhau, nhÆ°ng bÃªn trong thÃ¬ 'tÃ­nh cÃ¡ch' láº¡i khÃ¡c xa Ä‘Ã³! CÃ¹ng xem báº£ng nÃ y Ä‘á»ƒ "soi" ká»¹ hÆ¡n nhÃ©:

| TÃ­nh cÃ¡ch | HashMap (Anh chÃ ng hiá»‡n Ä‘áº¡i) | Hashtable (Ã”ng cá»¥ an toÃ n) |
|---|---|---|
| **Äá»“ng bá»™ (Thread-safe)** | `HashMap` *khÃ´ng* tá»± Ä‘á»™ng "khÃ³a cá»­a" khi cÃ³ nhiá»u luá»“ng (thread) muá»‘n dÃ¹ng chung. NÃ³ siÃªu nhanh náº¿u chá»‰ má»™t luá»“ng dÃ¹ng, nhÆ°ng náº¿u nhiá»u luá»“ng "nháº£y" vÃ o mÃ  khÃ´ng cÃ³ ai quáº£n lÃ½, thÃ¬... á»i giá»i Æ¡i! Dá»¯ liá»‡u cÃ³ thá»ƒ bá»‹ loáº¡n xá»‹ ngáº­u Ä‘áº¥y! | `Hashtable` thÃ¬ ngÆ°á»£c láº¡i, nÃ³ lÃ  má»™t "Ã´ng cá»¥" ráº¥t cáº©n tháº­n. NÃ³ tá»± Ä‘á»™ng "khÃ³a cá»­a" má»—i khi cÃ³ má»™t luá»“ng muá»‘n vÃ o dÃ¹ng. Äiá»u nÃ y giÃºp nÃ³ an toÃ n tuyá»‡t Ä‘á»‘i khi nhiá»u luá»“ng cháº¡y cÃ¹ng lÃºc, nhÆ°ng bÃ¹ láº¡i thÃ¬... cháº­m hÆ¡n má»™t chÃºt xÃ­u! |
| **GiÃ¡ trá»‹ `null` (Rá»—ng tuáº¿ch?)** | `HashMap` ráº¥t "thoÃ¡ng tÃ­nh"! Báº¡n cÃ³ thá»ƒ dÃ¹ng má»™t `null` lÃ m khÃ³a (key) vÃ  thoáº£i mÃ¡i dÃ¹ng nhiá»u `null` lÃ m giÃ¡ trá»‹ (value). NÃ³ khÃ´ng phÃ n nÃ n gÃ¬ Ä‘Ã¢u. | `Hashtable` thÃ¬ "khÃ³ tÃ­nh" hÆ¡n nhiá»u! NÃ³ *tuyá»‡t Ä‘á»‘i khÃ´ng* cháº¥p nháº­n báº¥t ká»³ `null` nÃ o, dÃ¹ lÃ  khÃ³a hay giÃ¡ trá»‹. Cá»© thá»­ Ä‘Æ°a `null` vÃ o lÃ  nÃ³ sáº½ "ná»•i giáº­n" vÃ  bÃ¡o lá»—i ngay! |
| **Hiá»‡u suáº¥t (Ai nhanh hÆ¡n?)** | VÃ¬ khÃ´ng pháº£i lo chuyá»‡n "khÃ³a cá»­a" Ä‘á»“ng bá»™, `HashMap` thÆ°á»ng nhanh hÆ¡n ráº¥t nhiá»u khi báº¡n chá»‰ cáº§n dÃ¹ng nÃ³ trong má»™t luá»“ng duy nháº¥t hoáº·c báº¡n tá»± quáº£n lÃ½ viá»‡c Ä‘á»“ng bá»™ bÃªn ngoÃ i. | VÃ¬ cá»© pháº£i "khÃ³a cá»­a" vÃ  "má»Ÿ cá»­a" liÃªn tá»¥c Ä‘á»ƒ Ä‘áº£m báº£o an toÃ n cho nhiá»u luá»“ng, `Hashtable` cháº­m hÆ¡n `HashMap` má»™t chÃºt. Äá»•i láº¡i lÃ  sá»± an toÃ n tuyá»‡t Ä‘á»‘i! |
| **Tá»« thá»i nÃ o (Cá»• hay kim?)** | `HashMap` lÃ  "ngÆ°á»i tráº»" hÆ¡n, ra Ä‘á»i sau nÃ y (tá»« Java 1.2). NÃ³ lÃ  lá»±a chá»n hiá»‡n Ä‘áº¡i vÃ  phá»• biáº¿n hÆ¡n cho cÃ¡c á»©ng dá»¥ng má»›i. | `Hashtable` lÃ  "Ã´ng cá»¥" tá»« thá»i "xa láº¯c xa lÆ¡" (ra Ä‘á»i tá»« Java 1.0). NÃ³ lÃ  má»™t pháº§n cá»§a Java Collections Framework Ä‘á»i Ä‘áº§u. |
    |---------|-----------|
    | KHÃ”NG Ä‘á»“ng bá»™ hÃ³a (náº¿u nhiá»u luá»“ng dÃ¹ng chung, coi chá»«ng 'rá»‘i tung'!) | ÄÃ£ Ä‘á»“ng bá»™ hÃ³a (nhiá»u luá»“ng dÃ¹ng chung? Váº«n AN TOÃ€N!) |
    | Báº¡n cÃ³ thá»ƒ dÃ¹ng `null` lÃ m khÃ³a. NhÆ°ng chá»‰ Ä‘Æ°á»£c má»™t láº§n `null` thÃ´i nhÃ©! CÃ²n giÃ¡ trá»‹ `null` thÃ¬ sao? Báº¡n muá»‘n dÃ¹ng bao nhiÃªu cÅ©ng Ä‘Æ°á»£c! | Ã”i khÃ´ng! á» Ä‘Ã¢y, báº¡n tuyá»‡t Ä‘á»‘i KHÃ”NG Ä‘Æ°á»£c dÃ¹ng `null` lÃ m khÃ³a. VÃ  cÅ©ng KHÃ”NG Ä‘Æ°á»£c dÃ¹ng `null` lÃ m giÃ¡ trá»‹ luÃ´n Ä‘Ã¢u nhÃ©! |
    | NÃ³ Ä‘Æ°á»£c giá»›i thiá»‡u tá»« Java 1.2 Ä‘Ã³! | LÃ  má»™t lá»›p 'cá»•' tá»« thá»i Java 1.0 rá»“i nha! |
    | Nhanh hÆ¡n "vÃ¨o vÃ¨o"! | Cháº­m hÆ¡n má»™t tÃ­ xÃ­u... |
|---|---|
| Táº¡i sao Æ°? VÃ¬ nÃ³ **cháº³ng cáº§n "Ä‘á»“ng bá»™ hÃ³a"** gÃ¬ sáº¥t. Cá»© tháº¿ mÃ  "phÃ³ng" thÃ´i! | Táº¡i sao láº¡i cháº­m? VÃ¬ nÃ³ pháº£i **tá»‘n thÃªm "cÃ´ng sá»©c" Ä‘á»ƒ lo vá»¥ "Ä‘á»“ng bá»™ hÃ³a"** Ä‘Ã³! |
    | Iterator lÃ  "fail-fast" | Enumerator thÃ¬ *khÃ´ng* pháº£i lÃ  "fail-fast" |
|---|---|
| HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang dÃ¹ng Iterator Ä‘á»ƒ "Ä‘i qua" má»™t bá»™ sÆ°u táº­p (kiá»ƒu nhÆ° má»™t danh sÃ¡ch cÃ¡c mÃ³n Ä‘á»“). | CÃ²n Enumerator thÃ¬ sao? NÃ³ hÆ¡i "khÃ¡c biá»‡t" má»™t chÃºt. |
| Náº¿u cÃ³ ai Ä‘Ã³ (hoáº·c chÃ­nh chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n) thay Ä‘á»•i cáº¥u trÃºc cá»§a bá»™ sÆ°u táº­p Ä‘Ã³ *trong khi* Iterator Ä‘ang lÃ m viá»‡c (vÃ­ dá»¥: thÃªm má»™t mÃ³n Ä‘á»“ má»›i, hoáº·c xÃ³a má»™t mÃ³n Ä‘á»“ Ä‘i), thÃ¬... | Khi báº¡n dÃ¹ng Enumerator Ä‘á»ƒ duyá»‡t qua má»™t bá»™ sÆ°u táº­p, náº¿u bá»™ sÆ°u táº­p Ä‘Ã³ bá»‹ thay Ä‘á»•i cáº¥u trÃºc (thÃªm/bá»›t pháº§n tá»­) *trong lÃºc* Enumerator Ä‘ang cháº¡y... |
| ...Iterator sáº½ *ngay láº­p tá»©c* la lÃ ng lÃªn! NÃ³ sáº½ nÃ©m ra má»™t lá»—i Ä‘áº·c biá»‡t tÃªn lÃ  `ConcurrentModificationException`. | ...thÃ¬ Enumerator sáº½ *khÃ´ng há»* bÃ¡o Ä‘á»™ng hay nÃ©m ra báº¥t ká»³ lá»—i nÃ o Ä‘á»ƒ cáº£nh bÃ¡o báº¡n cáº£. |
| NÃ³ lÃ m váº­y Ä‘á»ƒ báº¡n biáº¿t *ngay láº­p tá»©c* cÃ³ gÃ¬ Ä‘Ã³ khÃ´ng á»•n. NÃ³ "tháº¥t báº¡i nhanh" Ä‘á»ƒ báº¡n cÃ³ thá»ƒ sá»­a lá»—i nhanh, thay vÃ¬ cá»© cháº¡y tiáº¿p rá»“i sau nÃ y má»i thá»© má»›i Ä‘á»• bá»ƒ. | NÃ³ cá»© tiáº¿p tá»¥c cÃ´ng viá»‡c cá»§a mÃ¬nh, máº·c ká»‡ nhá»¯ng thay Ä‘á»•i Ä‘Ã³. |
| Má»¥c Ä‘Ã­ch lÃ  Ä‘á»ƒ ngÄƒn cháº·n nhá»¯ng hÃ nh vi khÃ´ng mong muá»‘n vÃ  lá»—i khÃ³ tÃ¬m. | Äiá»u nÃ y cÃ³ thá»ƒ dáº«n Ä‘áº¿n viá»‡c báº¡n nháº­n Ä‘Æ°á»£c káº¿t quáº£ khÃ´ng chÃ­nh xÃ¡c hoáº·c nhá»¯ng hÃ nh vi khÃ³ lÆ°á»ng mÃ  khÃ´ng cÃ³ cáº£nh bÃ¡o sá»›m. NÃ³ *khÃ´ng* pháº£i lÃ  "fail-fast". |
    | NÃ³ káº¿ thá»«a tá»« lá»›p `AbstractMap` | NÃ³ káº¿ thá»«a tá»« lá»›p `Dictionary` |
    | Tuyá»‡t vá»i khi báº¡n chá»‰ cÃ³ Má»˜T luá»“ng cÃ´ng viá»‡c (á»©ng dá»¥ng Ä‘Æ¡n luá»“ng). | DÃ¹ng Ä‘Æ°á»£c ngay cáº£ khi báº¡n cÃ³ NHIá»€U luá»“ng cÃ´ng viá»‡c (á»©ng dá»¥ng Ä‘a luá»“ng). |

    ```java
    import java.util.*;

    public class MapComparison {
        public static void main(String[] args) {
            // HashMap example
            HashMap<String, Integer> hashMap = new HashMap<>();
            hashMap.put("One", 1);
            hashMap.put(null, 0);        // Allows null key
            hashMap.put("Two", null);    // Allows null value
            
            // Hashtable example
            Hashtable<String, Integer> hashtable = new Hashtable<>();
            hashtable.put("One", 1);
            // hashtable.put(null, 0);   // Throws NullPointerException
            // hashtable.put("Two", null); // Throws NullPointerException
        }
    }
    ```

    NÃ y, cÃ³ má»™t Ä‘iá»u quan trá»ng báº¡n cáº§n nhá»› khi lÃ m viá»‡c vá»›i cÃ¡c luá»“ng (thread) nhÃ©!
Khi báº¡n cáº§n lÃ m nhá»¯ng thao tÃ¡c an toÃ n vá»›i luá»“ng (thread-safe operations) â€“ tá»©c lÃ  khi nhiá»u luá»“ng cÃ³ thá»ƒ 'cháº¡y Ä‘ua' vÃ  'Ä‘á»¥ng cháº¡m' vÃ o cÃ¹ng má»™t chá»— mÃ  khÃ´ng gÃ¢y ra lá»—i â€“ thÃ¬ báº¡n *nÃªn Æ°u tiÃªn* dÃ¹ng... `ConcurrentHashMap` Tháº¿ lÃ  xong! `Hashtable` Bá»Ÿi vÃ¬ nÃ³ giÃºp má»i thá»© cháº¡y *nhanh hÆ¡n háº³n* Ä‘áº¥y! BÃ­ quyáº¿t lÃ  gÃ¬ Æ°? NÃ³ dÃ¹ng má»™t 'chiÃªu' Ä‘áº·c biá»‡t gá»i lÃ  *khÃ³a cáº¥p phÃ¢n Ä‘oáº¡n* (segment-level locking). Tá»©c lÃ , thay vÃ¬ khÃ³a cáº£ má»™t 'khu vá»±c' lá»›n, nÃ³ chá»‰ khÃ³a tá»«ng 'máº£nh' nhá» Ä‘ang Ä‘Æ°á»£c dÃ¹ng thÃ´i. Nhá» váº­y mÃ  hiá»‡u suáº¥t tÄƒng vá»t!

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

24. ### ArrayList vÃ  LinkedList: KhÃ¡c nhau á»Ÿ Ä‘iá»ƒm nÃ o nhá»‰?

    Cáº£ `ArrayList` vÃ  `LinkedList` Ä‘á»u lÃ  nhá»¯ng "thÃ nh viÃªn" cá»§a gia Ä‘Ã¬nh `List` interface.

NhÆ°ng mÃ  nÃ y, bÃªn trong thÃ¬ má»—i anh láº¡i cÃ³ má»™t cÃ¡ch lÃ m viá»‡c riÃªng biá»‡t láº¯m nhÃ©!

VÃ  chÃ­nh vÃ¬ tháº¿, khi báº¡n dÃ¹ng, hiá»‡u suáº¥t (tá»©c lÃ  tá»‘c Ä‘á»™ xá»­ lÃ½) cá»§a há» cÅ©ng sáº½ khÃ¡c nhau Ä‘áº¥y.

    | Danh sÃ¡ch Máº£ng | Danh sÃ¡ch LiÃªn káº¿t |
    |-----------|------------|
    | DÃ¹ng máº£ng Ä‘á»™ng bÃªn trong | DÃ¹ng danh sÃ¡ch liÃªn káº¿t Ä‘Ã´i bÃªn trong |
|---|---|
| Báº¡n biáº¿t khÃ´ng, bÃªn trong ruá»™t cá»§a nÃ³ lÃ  má»™t cÃ¡i **máº£ng Ä‘á»™ng** Ä‘áº¥y! NghÄ©a lÃ , cÃ¡i máº£ng nÃ y cÃ³ thá»ƒ tá»± Ä‘á»™ng lá»›n lÃªn hay thu nhá» láº¡i tÃ¹y theo sá»‘ lÆ°á»£ng dá»¯ liá»‡u báº¡n nhÃ©t vÃ o. Ráº¥t tiá»‡n lá»£i, pháº£i khÃ´ng? | Ã€, cÃ²n bÃªn trong 'anh báº¡n' nÃ y thÃ¬ láº¡i lÃ  má»™t **danh sÃ¡ch liÃªn káº¿t Ä‘Ã´i** cÆ¡. TÆ°á»Ÿng tÆ°á»£ng má»—i pháº§n tá»­ giá»‘ng nhÆ° má»™t 'máº¯t xÃ­ch' váº­y, vÃ  nÃ³ biáº¿t cáº£ 'máº¯t xÃ­ch' Ä‘áº±ng trÆ°á»›c láº«n Ä‘áº±ng sau nÃ³ lÃ  ai. |
    | Tá»‘t hÆ¡n khi báº¡n muá»‘n *cáº¥t* vÃ  *láº¥y* dá»¯ liá»‡u tháº­t nhanh (kiá»ƒu nhÆ°, tÃ¬m Ä‘Ãºng Ä‘á»‹a chá»‰ cÃ¡i "ráº¹t" - `O(1)` cho `get`) | Tá»‘t hÆ¡n khi báº¡n muá»‘n *thao tÃ¡c* (thÃªm/bá»›t) dá»¯ liá»‡u, nháº¥t lÃ  á»Ÿ hai Ä‘áº§u danh sÃ¡ch (kiá»ƒu nhÆ°, xáº¿p hÃ ng vÃ o/ra á»Ÿ hai Ä‘áº§u thÃ¬ siÃªu nhanh - `O(1)` cho `add/remove` á»Ÿ hai Ä‘áº§u) |
    | Thao tÃ¡c cháº­m hÆ¡n má»™t chÃºt | Thao tÃ¡c nhanh hÆ¡n nhiá»u! |
|---|---|
| Táº¡i sao Æ°? VÃ¬ báº¡n pháº£i 'xÃª dá»‹ch' cÃ¡c pháº§n tá»­ khÃ¡c Ä‘i chá»— khÃ¡c. | LÃ½ do Æ°? Báº¡n cháº³ng cáº§n 'dá»‹ch chuyá»ƒn' báº¥t ká»³ thá»© gÃ¬ cáº£. |
    | Chá»‰ thá»±c thi (implement) má»—i giao diá»‡n `List` | Thá»±c thi cáº£ hai giao diá»‡n `List` VÃ€ `Deque` luÃ´n |
    | Báº¡n muá»‘n tiáº¿t kiá»‡m bá»™ nhá»› Æ°? CÃ¡i nÃ y chÃ­nh lÃ  lá»±a chá»n sá»‘ má»™t! NÃ³ khÃ´ng cáº§n pháº£i lÆ°u thÃªm máº¥y thá»© linh tinh khÃ¡c Ä‘Ã¢u. | Ã”i khÃ´ng, cÃ¡i nÃ y láº¡i tá»‘n bá»™ nhá»› hÆ¡n má»™t chÃºt rá»“i! Táº¡i sao Æ°? VÃ¬ má»—i pháº§n tá»­ khÃ´ng chá»‰ chá»©a dá»¯ liá»‡u cá»§a nÃ³ Ä‘Ã¢u nhÃ©, nÃ³ cÃ²n pháº£i "Ã´m" thÃªm cáº£ "biá»ƒn chá»‰ Ä‘Æ°á»ng" dáº«n Ä‘áº¿n pháº§n tá»­ Ä‘á»©ng trÆ°á»›c (prev) vÃ  pháº§n tá»­ Ä‘á»©ng sau (next) ná»¯a cÆ¡! |
    | Tuyá»‡t vá»i khi báº¡n muá»‘n "nháº£y" Ä‘áº¿n báº¥t ká»³ pháº§n tá»­ nÃ o! | Tuyá»‡t vá»i khi báº¡n muá»‘n Ä‘i láº§n lÆ°á»£t tá»«ng pháº§n tá»­ má»™t! |

    ```java
    import java.util.*;

    public class ListComparison {
        public static void main(String[] args) {
            // ArrayList - better for random access
            ArrayList<String> arrayList = new ArrayList<>();
            arrayList.add("A");
            arrayList.add("B");
            arrayList.get(0);  // O(1) - fast random access
            
            // LinkedList - better for frequent insertions/deletions
            LinkedList<String> linkedList = new LinkedList<>();
            linkedList.add("A");
            linkedList.addFirst("B");  // O(1) - fast insertion at beginning
            linkedList.removeLast();   // O(1) - fast removal at end
        }
    }
    ```

    Váº­y khi nÃ o thÃ¬ chÃºng ta dÃ¹ng nÃ³ nhá»‰?
    - NÃ y, báº¡n nÃªn dÃ¹ng **ArrayList** khi nÃ o Æ°?
ÄÆ¡n giáº£n thÃ´i: Khi báº¡n cáº§n `truy cáº­p` cÃ¡c pháº§n tá»­ *thÆ°á»ng xuyÃªn* báº±ng `chá»‰ má»¥c (index)` cá»§a chÃºng nhÃ©!
    - Váº­y khi nÃ o thÃ¬ báº¡n nÃªn dÃ¹ng **LinkedList** nhá»‰?

ÄÆ¡n giáº£n thÃ´i!

Náº¿u báº¡n cáº§n thÃªm (insert) hoáº·c xÃ³a (delete) cÃ¡c pháº§n tá»­ Ráº¤T thÆ°á»ng xuyÃªn.

Äáº·c biá»‡t lÃ  khi báº¡n cá»© thÃªm vÃ o hay xÃ³a Ä‘i á»Ÿ ngay Äáº¦U hoáº·c GIá»®A danh sÃ¡ch áº¥y.

Khi Ä‘Ã³, **LinkedList** chÃ­nh lÃ  'ngÆ°á»i hÃ¹ng' cá»§a báº¡n!

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

25. ### API Pháº£n chiáº¿u Java lÃ  gÃ¬ váº­y?

    Báº¡n Ä‘Ã£ bao giá» tá»± há»i, liá»‡u chÆ°Æ¡ng trÃ¬nh Java cá»§a mÃ¬nh cÃ³ thá»ƒ tá»± 'nhÃ¬n vÃ o bÃªn trong' chÃ­nh nÃ³ khÃ´ng? Kiá»ƒu nhÆ°, nÃ³ tá»± xem xÃ©t xem mÃ¬nh Ä‘Æ°á»£c táº¡o ra tá»« nhá»¯ng gÃ¬, rá»“i tháº­m chÃ­ cÃ²n thay Ä‘á»•i vÃ i thá»© *ngay trong khi nÃ³ Ä‘ang cháº¡y* áº¥y!

VÃ¢ng, Ä‘Ã³ chÃ­nh lÃ  lÃºc **Java Reflection API** xuáº¥t hiá»‡n! Nghe tÃªn cÃ³ váº» "hÃ n lÃ¢m" má»™t chÃºt, nhÆ°ng thá»±c ra nÃ³ lÃ  má»™t "siÃªu nÄƒng lá»±c" cá»±c ká»³ máº¡nh máº½.

Reflection API cho phÃ©p chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n:
*   **Kiá»ƒm tra (examine):** NhÃ¬n vÃ o bÃªn trong cÃ¡c thÃ nh pháº§n cáº¥u táº¡o nÃªn chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n. Tá»©c lÃ , nÃ³ cÃ³ thá»ƒ biáº¿t Ä‘Æ°á»£c chÆ°Æ¡ng trÃ¬nh cÃ³ nhá»¯ng `class` (lá»›p) nÃ o, nhá»¯ng `interface` (giao diá»‡n) nÃ o, chÃºng cÃ³ nhá»¯ng `method` (phÆ°Æ¡ng thá»©c) nÃ o Ä‘á»ƒ thá»±c hiá»‡n hÃ nh Ä‘á»™ng, vÃ  nhá»¯ng `field` (trÆ°á»ng) nÃ o Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u.
*   **Thay Ä‘á»•i (modify):** KhÃ´ng chá»‰ nhÃ¬n, mÃ  cÃ²n cÃ³ thá»ƒ thay Ä‘á»•i cÃ¡ch nhá»¯ng thÃ nh pháº§n Ä‘Ã³ hoáº¡t Ä‘á»™ng *ngay trong lÃºc chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y*. Tháº­t kinh ngáº¡c pháº£i khÃ´ng?

TÃ³m láº¡i, Java Reflection API lÃ  má»™t tÃ­nh nÄƒng cá»±c "cháº¥t" giÃºp chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cÃ³ kháº£ nÄƒng "tá»± soi gÆ°Æ¡ng" vÃ  "tá»± thay Ä‘á»•i" chÃ­nh mÃ¬nh *ngay trong khi nÃ³ Ä‘ang hoáº¡t Ä‘á»™ng*.

NÃ³ lÃ  má»™t pháº§n cá»§a `java.lang.reflect` GÃ³i lÃ  gÃ¬ nhá»‰?

Báº¡n cÃ³ ráº¥t nhiá»u lá»›p (class) Ä‘Ãºng khÃ´ng? LÃ m sao Ä‘á»ƒ giá»¯ chÃºng ngÄƒn náº¯p, khÃ´ng bá»‹ lá»™n xá»™n Ä‘Ã¢y?

Ã€, Ä‘Ãºng rá»“i! Báº¡n dÃ¹ng **gÃ³i** (package) Ä‘Ã³.

NÃ³ giá»‘ng nhÆ° má»™t cÃ¡i thÆ° má»¥c (folder) Ä‘á»ƒ báº¡n nhÃ³m cÃ¡c class cÃ³ liÃªn quan láº¡i vá»›i nhau. GiÃºp má»i thá»© gá»n gÃ ng hÆ¡n nhiá»u!

    **Nhá»¯ng Kháº£ NÄƒng 'Äá»‰nh Cao' Cá»§a Reflection MÃ  Báº¡n Sáº½ ThÃ­ch MÃª:**
    1. CÃ¹ng 'ngÃ³ nghiÃªng' nhá»¯ng gÃ¬ má»™t class cÃ³ *khi chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y*!
    2. Táº¡o Äá»‘i TÆ°á»£ng 'Khi Äang Cháº¡y' (Linh Hoáº¡t Tháº­t!)
    3. Báº¡n Ä‘Ã£ quÃ¡ quen vá»›i viá»‡c gá»i cÃ¡c phÆ°Æ¡ng thá»©c rá»“i Ä‘Ãºng khÃ´ng? Kiá»ƒu nhÆ° `myObject.doSomething();` áº¥y.

NhÆ°ng mÃ , cÃ³ bao giá» báº¡n nghÄ© Ä‘áº¿n chuyá»‡n nÃ y chÆ°a: Lá»¡ nhÆ° báº¡n KHÃ”NG BIáº¾T chÃ­nh xÃ¡c tÃªn cá»§a phÆ°Æ¡ng thá»©c mÃ  báº¡n muá»‘n gá»i CHO Äáº¾N KHI chÆ°Æ¡ng trÃ¬nh thá»±c sá»± cháº¡y thÃ¬ sao?

Nghe cÃ³ váº» hÆ¡i "hack nÃ£o" nhá»‰? NhÆ°ng Ä‘Ã´i khi chÃºng ta cáº§n lÃ m váº­y Ä‘áº¥y!

LÃºc nÃ y, chÃºng ta sáº½ cáº§n má»™t "siÃªu nÄƒng lá»±c" Ä‘áº·c biá»‡t: **Gá»i cÃ¡c phÆ°Æ¡ng thá»©c khi chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y** (hay cÃ²n gá»i lÃ  "Invoke methods at runtime").

NÃ³i Ä‘Æ¡n giáº£n lÃ , thay vÃ¬ báº¡n gÃµ tháº³ng tÃªn phÆ°Æ¡ng thá»©c vÃ o code, báº¡n sáº½ "nhá»" chÆ°Æ¡ng trÃ¬nh tá»± tÃ¬m vÃ  gá»i phÆ°Æ¡ng thá»©c Ä‘Ã³ Dá»°A TRÃŠN THÃ”NG TIN cÃ³ Ä‘Æ°á»£c LÃšC CHÆ¯Æ NG TRÃŒNH ÄANG CHáº Y.

TÆ°á»Ÿng tÆ°á»£ng nhÆ° báº¡n cÃ³ má»™t ngÆ°á»i trá»£ lÃ½, báº¡n chá»‰ cáº§n nÃ³i "TÃ¬m vÃ  gá»i cho tÃ´i cÃ¡i hÃ m nÃ o Ä‘Ã³ cÃ³ tÃªn X Ä‘i", vÃ  anh áº¥y sáº½ lÃ m viá»‡c Ä‘Ã³ khi chÆ°Æ¡ng trÃ¬nh Ä‘ang "sá»‘ng" váº­y. Cá»±c ká»³ linh hoáº¡t luÃ´n!
    4. Tiáº¿p cáº­n vÃ  thay Ä‘á»•i cÃ¡c trÆ°á»ng `private`
    5. NhÃ²m ngÃ³ Constructors, Methods, vÃ  Fields!

    ```java
    import java.lang.reflect.*;

    class Person {
        private String name;
        public int age;
        
        public Person() {}
        
        public Person(String name, int age) {
            this.name = name;
            this.age = age;
        }
        
        private void privateMethod() {
            System.out.println("Private method called");
        }
        
        public void display() {
            System.out.println("Name: " + name + ", Age: " + age);
        }
    }

    public class ReflectionDemo {
        public static void main(String[] args) throws Exception {
            // Get Class object
            Class<?> clazz = Person.class;
            
            // Get class name
            System.out.println("Class: " + clazz.getName());
            
            // Get all declared methods
            Method[] methods = clazz.getDeclaredMethods();
            for (Method method : methods) {
                System.out.println("Method: " + method.getName());
            }
            
            // Create instance dynamically
            Constructor<?> constructor = clazz.getConstructor(String.class, int.class);
            Person person = (Person) constructor.newInstance("John", 25);
            
            // Access private field
            Field nameField = clazz.getDeclaredField("name");
            nameField.setAccessible(true);
            nameField.set(person, "Jane");
            
            // Invoke method
            Method displayMethod = clazz.getMethod("display");
            displayMethod.invoke(person);
        }
    }
    ```

    Váº­y thÃ¬, Reflection Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬ nhá»‰? NÃ³ cÃ³ thá»±c sá»± há»¯u Ã­ch khÃ´ng?
Ã€, nÃ³ *cá»±c ká»³* quan trá»ng Ä‘áº¥y! Äáº·c biá»‡t lÃ  vá»›i cÃ¡c framework lá»›n mÃ  báº¡n sáº½ gáº·p ráº¥t nhiá»u trong thá»±c táº¿.

VÃ­ dá»¥ Ä‘iá»ƒn hÃ¬nh lÃ  cÃ¡c "Ã´ng lá»›n" nÃ y:
*   **Spring:** DÃ¹ng Reflection *ráº¥t nhiá»u* Ä‘á»ƒ thá»±c hiá»‡n cÃ¡i mÃ  ngÆ°á»i ta gá»i lÃ  *dependency injection*. Tá»©c lÃ , Spring tá»± Ä‘á»™ng "tÃ¬m" vÃ  "tiÃªm" cÃ¡c Ä‘á»‘i tÆ°á»£ng cáº§n thiáº¿t vÃ o Ä‘Ãºng chá»— cho báº¡n, giÃºp báº¡n khÃ´ng pháº£i lo láº¯ng nhiá»u vá» viá»‡c táº¡o vÃ  káº¿t ná»‘i chÃºng.
*   **Hibernate:** ÄÃ¢y lÃ  framework giÃºp báº¡n lÃ m viá»‡c vá»›i cÆ¡ sá»Ÿ dá»¯ liá»‡u. Hibernate sá»­ dá»¥ng Reflection Ä‘á»ƒ "Ã¡nh xáº¡" (mapping) cÃ¡c Ä‘á»‘i tÆ°á»£ng Java cá»§a báº¡n thÃ nh cÃ¡c báº£ng vÃ  dá»¯ liá»‡u trong database. NÃ³ giÃºp báº¡n dá»… dÃ ng lÆ°u vÃ  láº¥y dá»¯ liá»‡u mÃ  khÃ´ng cáº§n viáº¿t quÃ¡ nhiá»u code SQL thá»§ cÃ´ng.
*   **JUnit:** ÄÃ¢y lÃ  cÃ´ng cá»¥ Ä‘á»ƒ báº¡n viáº¿t vÃ  cháº¡y cÃ¡c bÃ i kiá»ƒm thá»­ (test). JUnit dÃ¹ng Reflection Ä‘á»ƒ "phÃ¡t hiá»‡n" vÃ  "thá»±c thi" cÃ¡c phÆ°Æ¡ng thá»©c kiá»ƒm thá»­ cá»§a báº¡n má»™t cÃ¡ch thÃ´ng minh, tá»± Ä‘á»™ng.

Tháº¥y chÆ°a? Reflection khÃ´ng pháº£i lÃ  thá»© gÃ¬ Ä‘Ã³ xa vá»i, mÃ  nÃ³ chÃ­nh lÃ  "trÃ¡i tim" giÃºp ráº¥t nhiá»u cÃ´ng cá»¥ máº¡nh máº½ hoáº¡t Ä‘á»™ng trÆ¡n tru Ä‘Ã³!

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

26. ### Váº­y thÃ¬, JVM cáº¥p phÃ¡t bá»™ nhá»› thÃ nh nhá»¯ng 'kiá»ƒu' hay 'khu vá»±c' nÃ o khÃ¡c nhau nhá»‰?

    Khi JVM cháº¡y chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n, nÃ³ cáº§n khÃ´ng gian Ä‘á»ƒ lÃ m viá»‡c. Äá»ƒ má»i thá»© tháº­t ngÄƒn náº¯p vÃ  cháº¡y tháº­t hiá»‡u quáº£, JVM sáº½ chia bá»™ nhá»› ra thÃ nh nhiá»u khu vá»±c khÃ¡c nhau.

Nhá»¯ng khu vá»±c bá»™ nhá»› chÃ­nh nÃ y bao gá»“m:

    1. **NÃ o, cÃ¹ng khÃ¡m phÃ¡ VÃ¹ng Method (Metaspace) nhÃ©!**
       - NÆ¡i nÃ y giá»¯ nhá»¯ng dá»¯ liá»‡u *chung* cá»§a *cáº£ má»™t lá»›p*, nhÆ° lÃ  *cáº¥u trÃºc* cá»§a lá»›p Ä‘Ã³, hay lÃ  táº¥t cáº£ *thÃ´ng tin* vá» cÃ¡c *phÆ°Æ¡ng thá»©c* (máº¥y cÃ¡i hÃ nh Ä‘á»™ng mÃ  lá»›p cÃ³ thá»ƒ lÃ m áº¥y). Ã€, nÃ³ cÃ²n cÃ³ má»™t cÃ¡i "há»“ bÆ¡i" Ä‘áº·c biá»‡t chá»©a cÃ¡c *háº±ng sá»‘* (máº¥y giÃ¡ trá»‹ khÃ´ng Ä‘á»•i) mÃ  lá»›p cáº§n dÃ¹ng trong lÃºc chÆ°Æ¡ng trÃ¬nh Ä‘ang *cháº¡y* ná»¯a Ä‘Ã³.
       - **Má»i luá»“ng Ä‘á»u dÃ¹ng chung Ä‘Æ°á»£c**
       - NÃ y báº¡n! Báº¡n cÃ³ biáº¿t khÃ´ng? CÃ¡i nÃ y Ä‘Æ°á»£c táº¡o ra *ngay khi* JVM (mÃ¡y áº£o Java cá»§a chÃºng ta Ä‘Ã³) báº¯t Ä‘áº§u khá»Ÿi Ä‘á»™ng Ä‘áº¥y! ÄÃºng lÃºc nÃ³ 'tá»‰nh giáº¥c' Ä‘á»ƒ cháº¡y code cá»§a báº¡n.

    2. **Ã€ hÃ¡! VÃ¹ng Heap:**
       - NÆ¡i nÃ y giá»¯ táº¥t cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n. VÃ  nÃ³ cÅ©ng giá»¯ luÃ´n cáº£ nhá»¯ng biáº¿n thá»ƒ hiá»‡n (tá»©c lÃ  dá»¯ liá»‡u riÃªng cá»§a tá»«ng Ä‘á»‘i tÆ°á»£ng) ná»¯a!
       - **DÃ¹ng chung cho táº¥t cáº£ cÃ¡c luá»“ng**

*   NghÄ©a lÃ , Ä‘Ã¢y lÃ  nhá»¯ng thá»© mÃ  **má»i luá»“ng** (thread) trong chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n Ä‘á»u cÃ³ thá»ƒ **truy cáº­p vÃ  sá»­ dá»¥ng** Ä‘Ã³!
*   HÃ£y tÆ°á»Ÿng tÆ°á»£ng nÃ³ nhÆ° má»™t mÃ³n Ä‘á»“ chÆ¡i chung mÃ  táº¥t cáº£ cÃ¡c luá»“ng Ä‘á»u cÃ³ thá»ƒ chÆ¡i cÃ¹ng lÃºc váº­y.
       - Báº¡n biáº¿t khÃ´ng? Khi báº¡n táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng trong chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh, chÃºng sáº½ chiáº¿m má»™t Ã­t bá»™ nhá»› mÃ¡y tÃ­nh.

NhÆ°ng lá»¡ báº¡n khÃ´ng cáº§n dÃ¹ng Ä‘áº¿n chÃºng ná»¯a thÃ¬ sao? Ai sáº½ dá»n dáº¹p chá»— Ä‘Ã³ Ä‘Ã¢y?

Äá»«ng lo! CÃ³ má»™t 'anh chÃ ng' Ä‘áº·c biá»‡t tÃªn lÃ  **Garbage Collector** (Bá»™ thu gom rÃ¡c) sáº½ lo liá»‡u háº¿t!

Anh áº¥y sáº½ tá»± Ä‘á»™ng Ä‘i tÃ¬m nhá»¯ng Ä‘á»‘i tÆ°á»£ng mÃ  chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n khÃ´ng cÃ²n sá»­ dá»¥ng Ä‘áº¿n ná»¯a.

Rá»“i 'dá»n dáº¹p' chÃºng Ä‘i, giáº£i phÃ³ng bá»™ nhá»› Ä‘á»ƒ báº¡n cÃ³ thá»ƒ dÃ¹ng cho nhá»¯ng viá»‡c khÃ¡c.

Táº¥t cáº£ Ä‘á»u Ä‘Æ°á»£c **Garbage Collector** quáº£n lÃ½ vÃ  xá»­ lÃ½ tá»± Ä‘á»™ng. Báº¡n khÃ´ng cáº§n pháº£i báº­n tÃ¢m gÃ¬ cáº£!
       - NÃ³ Ä‘Æ°á»£c chia thÃ nh hai "tháº¿ há»‡" chÃ­nh, báº¡n biáº¿t khÃ´ng?

*   **Tháº¿ há»‡ Tráº»** (Young Generation): ÄÃ¢y lÃ  nÆ¡i cÃ¡c Ä‘á»‘i tÆ°á»£ng má»›i toanh vá»«a Ä‘Æ°á»£c táº¡o ra sáº½ "háº¡ cÃ¡nh" Ä‘áº§u tiÃªn.
    *   Trong Tháº¿ há»‡ Tráº» nÃ y, nÃ³ cÃ²n Ä‘Æ°á»£c chia nhá» ra thÃ nh cÃ¡c khu vá»±c riÃªng biá»‡t ná»¯a Ä‘Ã³:
        *   **Eden**: Giá»‘ng nhÆ° "vÆ°á»n Ä‘á»‹a Ä‘Ã ng" ban Ä‘áº§u váº­y, Ä‘Ã¢y lÃ  nÆ¡i háº§u háº¿t cÃ¡c Ä‘á»‘i tÆ°á»£ng má»›i sáº½ Ä‘Æ°á»£c táº¡o ra.
        *   **CÃ¡c khÃ´ng gian Survivor** (Survivor spaces): Khi cÃ¡c Ä‘á»‘i tÆ°á»£ng trong Eden sá»‘ng sÃ³t qua má»™t Ä‘á»£t dá»n rÃ¡c, chÃºng cÃ³ thá»ƒ Ä‘Æ°á»£c chuyá»ƒn Ä‘áº¿n Ä‘Ã¢y.
*   **Tháº¿ há»‡ GiÃ ** (Old Generation): ÄÃ¢y lÃ  "ngÃ´i nhÃ " cá»§a nhá»¯ng Ä‘á»‘i tÆ°á»£ng Ä‘Ã£ "sá»‘ng lÃ¢u nÄƒm", Ä‘Ã£ chá»©ng kiáº¿n nhiá»u Ä‘á»£t dá»n rÃ¡c mÃ  váº«n cÃ²n tá»“n táº¡i.

    3. **VÃ¹ng Stack: CÃ¹ng khÃ¡m phÃ¡ nÃ o!**
       - Má»—i 'thread' (tá»©c lÃ  má»—i luá»“ng xá»­ lÃ½ áº¥y) Ä‘á»u cÃ³ má»™t 'stack' (ngÄƒn xáº¿p) *riÃªng* cá»§a nÃ³!

HÃ£y nghÄ© 'stack' nÃ y nhÆ° má»™t cuá»‘n sá»• tay cÃ¡ nhÃ¢n cá»§a má»—i thread váº­y. NÃ³ dÃ¹ng Ä‘á»ƒ lÆ°u giá»¯ cÃ¡c thÃ´ng tin *cá»§a riÃªng thread Ä‘Ã³*, vÃ­ dá»¥ nhÆ° cÃ¡c biáº¿n cá»¥c bá»™ (local variables) hay nhá»¯ng hÃ m (phÆ°Æ¡ng thá»©c) mÃ  nÃ³ Ä‘ang gá»i. Nhá» váº­y, má»—i thread cÃ³ khÃ´ng gian lÃ m viá»‡c Ä‘á»™c láº­p, khÃ´ng bá»‹ láº«n lá»™n vá»›i thread khÃ¡c!
       - NÆ¡i nÃ y cáº¥t giá»¯:
- **CÃ¡c biáº¿n cá»¥c bá»™:** Tá»©c lÃ  nhá»¯ng biáº¿n báº¡n táº¡o ra *bÃªn trong* má»™t phÆ°Æ¡ng thá»©c cá»¥ thá»ƒ Ä‘Ã³.
- **CÃ¡c lá»i gá»i phÆ°Æ¡ng thá»©c:** Khi má»™t phÆ°Æ¡ng thá»©c 'gá»i' hay 'nhá»' má»™t phÆ°Æ¡ng thá»©c khÃ¡c lÃ m viá»‡c gÃ¬, thÃ´ng tin Ä‘Ã³ sáº½ Ä‘Æ°á»£c ghi nhá»› á»Ÿ Ä‘Ã¢y.
- **CÃ¡c káº¿t quáº£ táº¡m thá»i:** Náº¿u cÃ³ má»™t phÃ©p tÃ­nh phá»©c táº¡p, nhá»¯ng káº¿t quáº£ giá»¯a chá»«ng sáº½ Ä‘Æ°á»£c giá»¯ láº¡i á»Ÿ Ä‘Ã¢y cho Ä‘áº¿n khi chÃºng Ä‘Æ°á»£c dÃ¹ng Ä‘áº¿n.
       - NÃ³ chá»©a cÃ¡c "khung ngÄƒn xáº¿p" (stack frames).
Má»—i khung ngÄƒn xáº¿p nÃ y lÃ  nÆ¡i lÆ°u trá»¯ má»i thá»© cáº§n thiáº¿t cho *má»—i láº§n* báº¡n gá»i má»™t phÆ°Æ¡ng thá»©c.
       - NÃ y báº¡n! Khi báº¡n viáº¿t code, chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cáº§n má»™t chá»— Ä‘á»ƒ lÆ°u trá»¯ má»i thá»©, Ä‘Ãºng khÃ´ng? ChÃºng ta gá»i chá»— Ä‘Ã³ lÃ  "bá»™ nhá»›" Ä‘áº¥y.

VÃ  Ä‘Ã¢y lÃ  tin tá»‘t lÃ nh: vá»›i Java, báº¡n khÃ´ng cáº§n pháº£i báº­n tÃ¢m vá» viá»‡c "dá»n dáº¹p" hay "sáº¯p xáº¿p" bá»™ nhá»› Ä‘Ã¢u.

*   **Cáº¥p phÃ¡t bá»™ nhá»› tá»± Ä‘á»™ng:**
    Khi chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cáº§n khÃ´ng gian Ä‘á»ƒ cáº¥t giá»¯ dá»¯ liá»‡u (kiá»ƒu nhÆ° báº¡n cáº§n má»™t cÃ¡i há»™p Ä‘á»ƒ Ä‘á»±ng Ä‘á»“ chÆ¡i má»›i mua), Java sáº½ *tá»± Ä‘á»™ng* "cáº¥p phÃ¡t" (hay "dÃ nh chá»—") cho nÃ³. Tháº­t tiá»‡n lá»£i pháº£i khÃ´ng?

*   **Thu há»“i bá»™ nhá»› tá»± Ä‘á»™ng:**
    VÃ  rá»“i, khi chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n khÃ´ng cáº§n dá»¯ liá»‡u Ä‘Ã³ ná»¯a, hoáº·c khi nÃ³ Ä‘Ã£ hoÃ n thÃ nh cÃ´ng viá»‡c vá»›i dá»¯ liá»‡u Ä‘Ã³... Java cÅ©ng sáº½ *tá»± Ä‘á»™ng* "thu há»“i" (hay "giáº£i phÃ³ng") khÃ´ng gian bá»™ nhá»› Ä‘Ã³.

Báº¡n khÃ´ng cáº§n pháº£i viáº¿t thÃªm dÃ²ng code nÃ o Ä‘á»ƒ lÃ m viá»‡c nÃ y cáº£. Java lo háº¿t rá»“i! Cá»© thoáº£i mÃ¡i táº­p trung vÃ o viá»‡c táº¡o ra nhá»¯ng tÃ­nh nÄƒng tuyá»‡t vá»i thÃ´i nhÃ©!

    4. **Thanh ghi PC (Bá»™ Ä‘áº¿m chÆ°Æ¡ng trÃ¬nh): Lá»‡nh tiáº¿p theo á»Ÿ Ä‘Ã¢u?**
       - Má»—i *thread* (hay cÃ²n gá»i lÃ  luá»“ng) cÃ³ má»™t cÃ¡i **thanh ghi PC** *cá»§a riÃªng nÃ³* Ä‘áº¥y!

NghÄ©a lÃ , má»—i thread tá»± giá»¯ má»™t "mÅ©i tÃªn" chá»‰ Ä‘Æ°á»ng cÃ¡ nhÃ¢n, Ä‘á»ƒ biáº¿t chÃ­nh xÃ¡c lá»‡nh nÃ o nÃ³ sáº½ cháº¡y TIáº¾P THEO. KhÃ´ng bao giá» nháº§m láº«n vá»›i cÃ¡c thread khÃ¡c Ä‘Ã¢u nhÃ©!
       - NÃ³ lÃ m gÃ¬ Æ°? ÄÆ¡n giáº£n thÃ´i!
NÃ³ *ghi nhá»›* cÃ¡i 'Ä‘á»‹a chá»‰' (giá»‘ng nhÆ° sá»‘ nhÃ  váº­y) cá»§a cÃ¡i lá»‡nh mÃ  JVM cá»§a chÃºng ta *Ä‘ang thá»±c hiá»‡n* ngay lÃºc nÃ y.
Kiá»ƒu nhÆ°, 'Ã€, mÃ¬nh Ä‘ang lÃ m viá»‡c á»Ÿ Ä‘Ã¢y nÃ y!' váº­y Ä‘Ã³.
       - Cá»© má»—i khi báº¡n thá»±c thi má»™t lá»‡nh, báº¡n sáº½ tháº¥y káº¿t quáº£ Ä‘Æ°á»£c cáº­p nháº­t ngay láº­p tá»©c.

    5. **NgÄƒn xáº¿p phÆ°Æ¡ng thá»©c Native:**
NÃ y! Báº¡n cÃ²n nhá»› ngÄƒn xáº¿p chÃºng ta dÃ¹ng Ä‘á»ƒ gá»i cÃ¡c phÆ°Æ¡ng thá»©c Java khÃ´ng? Váº­y thÃ¬, Ä‘Ã¢y lÃ  má»™t ngÄƒn xáº¿p tÆ°Æ¡ng tá»±, nhÆ°ng nÃ³ dÃ nh riÃªng cho nhá»¯ng phÆ°Æ¡ng thá»©c "ngoáº¡i Ä‘áº¡o" â€” nhá»¯ng phÆ°Æ¡ng thá»©c khÃ´ng Ä‘Æ°á»£c viáº¿t báº±ng Java!
       - Chá»©a thÃ´ng tin vá» cÃ¡c phÆ°Æ¡ng thá»©c 'native'.
       - Má»—i `thread` (luá»“ng) cÃ³ má»™t cÃ¡i gÃ¬ Ä‘Ã³ *ráº¥t riÃªng* cá»§a nÃ³.

ÄÃ³ chÃ­nh lÃ  má»™t "native method stack" (ngÄƒn xáº¿p phÆ°Æ¡ng thá»©c native).

CÃ¡i ngÄƒn xáº¿p nÃ y lÃ  "nháº­t kÃ½" riÃªng cá»§a tá»«ng `thread`, dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ cÃ¡c cuá»™c gá»i Ä‘áº¿n nhá»¯ng phÆ°Æ¡ng thá»©c "native" (tá»©c lÃ  nhá»¯ng Ä‘oáº¡n mÃ£ khÃ´ng pháº£i Java).
       - Báº¡n biáº¿t khÃ´ng? CÃ¡i nÃ y dÃ¹ng cho cÃ¡c 'phÆ°Æ¡ng thá»©c' (methods) mÃ  chÃºng khÃ´ng Ä‘Æ°á»£c viáº¿t báº±ng Java Ä‘Ã¢u nhÃ©!
Thay vÃ o Ä‘Ã³, chÃºng Ä‘Æ°á»£c viáº¿t báº±ng cÃ¡c ngÃ´n ngá»¯ 'khÃ¡c há»‡', vÃ­ dá»¥ nhÆ° C hay C++ cháº³ng háº¡n.

    ```
    JVM Memory Structure:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              Method Area (Metaspace)         â”‚
    â”‚  (Class data, Method data, Constant pool)   â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                  Heap Area                   â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚ Young Generationâ”‚   Old Generation    â”‚  â”‚
    â”‚  â”‚ (Eden,Survivor) â”‚                     â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  Stack â”‚  Stack  â”‚  Stack  â”‚ ... (per thread)â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  PC Regâ”‚  PC Reg â”‚  PC Reg â”‚ ... (per thread)â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  Nativeâ”‚ Native  â”‚ Native  â”‚ ... (per thread)â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    ```

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

27. ### Sá»± khÃ¡c biá»‡t giá»¯a `throw` vÃ  `throws` lÃ  gÃ¬?

NÃ y báº¡n! Báº¡n Ä‘ang bÄƒn khoÄƒn vá» hai tá»« khÃ³a nghe cÃ³ váº» giá»‘ng nhau nhÆ°ng láº¡i lÃ m nhá»¯ng viá»‡c khÃ¡c nhau nÃ y Æ°? Äá»«ng lo láº¯ng! ChÃºng ta sáº½ cÃ¹ng nhau "má»• xáº»" chÃºng nhÃ©.

TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y... báº¡n Ä‘ang viáº¿t má»™t chÆ°Æ¡ng trÃ¬nh. ÄÃ´i khi, má»i thá»© khÃ´ng diá»…n ra theo káº¿ hoáº¡ch, Ä‘Ãºng khÃ´ng? ÄÃ³ lÃ  lÃºc "ngoáº¡i lá»‡" (exceptions) xuáº¥t hiá»‡n. ChÃºng lÃ  cÃ¡ch Java cho báº¡n biáº¿t "CÃ³ gÃ¬ Ä‘Ã³ khÃ´ng á»•n rá»“i!".

BÃ¢y giá», hÃ£y xem `throw` vÃ  `throws` giÃºp chÃºng ta xá»­ lÃ½ nhá»¯ng tÃ¬nh huá»‘ng "khÃ´ng á»•n" nÃ y nhÆ° tháº¿ nÃ o nhÃ©.

### `throw` (vá»›i chá»¯ 'w' á»Ÿ cuá»‘i)

HÃ£y nghÄ© vá» `throw` nhÆ° hÃ nh Ä‘á»™ng *nÃ©m* má»™t quáº£ bÃ³ng. Báº¡n thá»±c sá»± *nÃ©m* nÃ³ Ä‘i!

*   **NÃ³ lÃ  gÃ¬?** `throw` dÃ¹ng Ä‘á»ƒ *táº¡o ra vÃ  nÃ©m Ä‘i* má»™t Ä‘á»‘i tÆ°á»£ng ngoáº¡i lá»‡ (exception object) ngay láº­p tá»©c. Giá»‘ng nhÆ° báº¡n vá»«a phÃ¡t hiá»‡n ra Ä‘iá»u gÃ¬ Ä‘Ã³ sai sai vÃ  "nÃ©m" má»™t thÃ´ng bÃ¡o lá»—i ra váº­y.
*   **NÃ³ lÃ m gÃ¬?** Khi báº¡n dÃ¹ng `throw`, chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n sáº½ dá»«ng viá»‡c thá»±c thi bÃ¬nh thÆ°á»ng vÃ  báº¯t Ä‘áº§u tÃ¬m kiáº¿m má»™t khá»‘i `catch` phÃ¹ há»£p Ä‘á»ƒ xá»­ lÃ½ ngoáº¡i lá»‡ mÃ  báº¡n vá»«a "nÃ©m".
*   **NÃ³ á»Ÿ Ä‘Ã¢u?** LuÃ´n luÃ´n náº±m *bÃªn trong pháº§n thÃ¢n cá»§a má»™t phÆ°Æ¡ng thá»©c* (method body).
*   **Khi nÃ o dÃ¹ng?** Khi báº¡n muá»‘n chá»§ Ä‘á»™ng bÃ¡o hiá»‡u ráº±ng *Ä‘Ã£ cÃ³ má»™t lá»—i xáº£y ra ngay bÃ¢y giá»* táº¡i Ä‘iá»ƒm Ä‘Ã³ trong mÃ£ cá»§a báº¡n.

**VÃ­ dá»¥ "nÃ©m" má»™t ngoáº¡i lá»‡:**

```java
public class MyClass {
    public void kiemTraTuoi(int tuoi) {
        if (tuoi < 0) {
            // á»i! Tuá»•i khÃ´ng thá»ƒ lÃ  sá»‘ Ã¢m! HÃ£y "nÃ©m" má»™t lá»—i!
            throw new IllegalArgumentException("Tuá»•i khÃ´ng thá»ƒ nhá» hÆ¡n 0.");
        }
        System.out.println("Tuá»•i há»£p lá»‡: " + tuoi);
    }

    public static void main(String[] args) {
        MyClass obj = new MyClass();
        try {
            obj.kiemTraTuoi(-5); // Gá»i phÆ°Æ¡ng thá»©c vá»›i tuá»•i khÃ´ng há»£p lá»‡
        } catch (IllegalArgumentException e) {
            System.out.println("Báº¯t Ä‘Æ°á»£c lá»—i: " + e.getMessage());
        }
    }
}
```

Trong vÃ­ dá»¥ trÃªn, khi `tuoi` lÃ  `-5`, chÃºng ta *táº¡o ra* má»™t `IllegalArgumentException` má»›i vÃ  *nÃ©m* nÃ³ Ä‘i báº±ng `throw`.

---

### `throws` (vá»›i chá»¯ 's' á»Ÿ cuá»‘i)

CÃ²n `throws` thÃ¬ sao? HÃ£y nghÄ© vá» nÃ³ nhÆ° má»™t *lá»i cáº£nh bÃ¡o* trÃªn má»™t gÃ³i hÃ ng. GÃ³i hÃ ng khÃ´ng tá»± nÃ©m ra, nhÆ°ng nÃ³ *cÃ³ thá»ƒ* chá»©a thá»© gÃ¬ Ä‘Ã³ dá»… vá»¡, vÃ  báº¡n cáº§n pháº£i cáº©n tháº­n!

*   **NÃ³ lÃ  gÃ¬?** `throws` khÃ´ng tá»± táº¡o hay nÃ©m báº¥t ká»³ ngoáº¡i lá»‡ nÃ o. Thay vÃ o Ä‘Ã³, nÃ³ lÃ  má»™t *pháº§n cá»§a chá»¯ kÃ½ phÆ°Æ¡ng thá»©c* (method signature) Ä‘á»ƒ *khai bÃ¡o* ráº±ng phÆ°Æ¡ng thá»©c nÃ y *cÃ³ kháº£ nÄƒng nÃ©m ra* má»™t hoáº·c nhiá»u loáº¡i ngoáº¡i lá»‡ nÃ o Ä‘Ã³.
*   **NÃ³ lÃ m gÃ¬?** NÃ³ giá»‘ng nhÆ° má»™t táº¥m biá»ƒn bÃ¡o cho báº¥t ká»³ ai gá»i phÆ°Æ¡ng thá»©c nÃ y biáº¿t ráº±ng: "NÃ y, tÃ´i cÃ³ thá»ƒ gÃ¢y ra lá»—i `X` hoáº·c lá»—i `Y` Ä‘áº¥y. Báº¡n pháº£i chuáº©n bá»‹ Ä‘á»ƒ xá»­ lÃ½ chÃºng hoáº·c Ã­t nháº¥t lÃ  nÃ³i cho ngÆ°á»i khÃ¡c biáº¿t!".
*   **NÃ³ á»Ÿ Ä‘Ã¢u?** LuÃ´n luÃ´n náº±m *á»Ÿ cuá»‘i chá»¯ kÃ½ phÆ°Æ¡ng thá»©c*, sau tÃªn phÆ°Æ¡ng thá»©c vÃ  danh sÃ¡ch tham sá»‘.
*   **Khi nÃ o dÃ¹ng?** Khi báº¡n viáº¿t má»™t phÆ°Æ¡ng thá»©c mÃ  phÆ°Æ¡ng thá»©c Ä‘Ã³ *cÃ³ thá»ƒ* gáº·p pháº£i má»™t "checked exception" (loáº¡i ngoáº¡i lá»‡ mÃ  Java báº¯t báº¡n pháº£i xá»­ lÃ½) nhÆ°ng báº¡n khÃ´ng muá»‘n xá»­ lÃ½ nÃ³ ngay táº¡i Ä‘Ã³. Báº¡n muá»‘n "Ä‘áº©y" trÃ¡ch nhiá»‡m xá»­ lÃ½ lÃªn cho phÆ°Æ¡ng thá»©c gá»i nÃ³.

**VÃ­ dá»¥ "khai bÃ¡o" ngoáº¡i lá»‡:**

```java
import java.io.FileReader;
import java.io.IOException;

public class DocFile {
    // PhÆ°Æ¡ng thá»©c nÃ y CÃ“ THá»‚ nÃ©m ra IOException náº¿u file khÃ´ng tÃ¬m tháº¥y hoáº·c lá»—i Ä‘á»c.
    // ChÃºng ta KHÃ”NG xá»­ lÃ½ nÃ³ á»Ÿ Ä‘Ã¢y, mÃ  dÃ¹ng 'throws' Ä‘á»ƒ BÃO CHO NGÆ¯á»œI Gá»ŒI biáº¿t.
    public void docDuLieuTuFile(String tenFile) throws IOException {
        FileReader reader = new FileReader(tenFile); // DÃ²ng nÃ y cÃ³ thá»ƒ nÃ©m IOException
        // ... Ä‘á»c dá»¯ liá»‡u tá»« file ...
        reader.close();
        System.out.println("Äá»c file thÃ nh cÃ´ng (hoáº·c Ã­t nháº¥t lÃ  khÃ´ng cÃ³ lá»—i tá»©c thÃ¬).");
    }

    public static void main(String[] args) {
        DocFile obj = new DocFile();
        try {
            obj.docDuLieuTuFile("tap_tin_cua_toi.txt"); // Gá»i phÆ°Æ¡ng thá»©c cÃ³ 'throws'
        } catch (IOException e) {
            System.out.println("á»i! CÃ³ lá»—i khi Ä‘á»c file: " + e.getMessage());
        }
    }
}
```

Trong vÃ­ dá»¥ trÃªn, `docDuLieuTuFile` khÃ´ng tá»± "nÃ©m" `IOException` báº±ng `throw`. Thay vÃ o Ä‘Ã³, nÃ³ dÃ¹ng `throws IOException` Ä‘á»ƒ nÃ³i ráº±ng "Náº¿u cÃ³ lá»—i khi Ä‘á»c file (nhÆ° `FileReader` khÃ´ng tÃ¬m tháº¥y file), thÃ¬ tÃ´i sáº½ Ä‘á»ƒ lá»—i Ä‘Ã³ thoÃ¡t ra ngoÃ i, vÃ  báº¡n, ngÆ°á»i gá»i tÃ´i, pháº£i báº¯t nÃ³!".

---

### TÃ³m láº¡i sá»± khÃ¡c biá»‡t "nÃ³ng há»•i" Ä‘Ã¢y!

| Äáº·c Ä‘iá»ƒm           | `throw`                                       | `throws`                                          |
| :----------------- | :-------------------------------------------- | :------------------------------------------------ |
| **Má»¥c Ä‘Ã­ch**       | DÃ¹ng Ä‘á»ƒ *thá»±c sá»± nÃ©m* má»™t Ä‘á»‘i tÆ°á»£ng ngoáº¡i lá»‡. | DÃ¹ng Ä‘á»ƒ *khai bÃ¡o* ráº±ng má»™t phÆ°Æ¡ng thá»©c *cÃ³ thá»ƒ* nÃ©m ngoáº¡i lá»‡. |
| **Vá»‹ trÃ­**         | BÃªn trong *pháº§n thÃ¢n phÆ°Æ¡ng thá»©c*.            | LÃ  má»™t pháº§n cá»§a *chá»¯ kÃ½ phÆ°Æ¡ng thá»©c*.             |
| **CÃ¡i gÃ¬ theo sau?**| Theo sau lÃ  *má»™t Ä‘á»‘i tÆ°á»£ng ngoáº¡i lá»‡* (vÃ­ dá»¥: `new MyException()`). | Theo sau lÃ  *kiá»ƒu cá»§a ngoáº¡i lá»‡* (vÃ­ dá»¥: `IOException`, `SQLException`). |
| **Sá»‘ lÆ°á»£ng**       | Chá»‰ cÃ³ thá»ƒ nÃ©m *má»™t* Ä‘á»‘i tÆ°á»£ng ngoáº¡i lá»‡ má»—i láº§n. | CÃ³ thá»ƒ khai bÃ¡o *nhiá»u* kiá»ƒu ngoáº¡i lá»‡, cÃ¡ch nhau bá»Ÿi dáº¥u pháº©y. |
| **HÃ nh Ä‘á»™ng**      | Thá»±c hiá»‡n hÃ nh Ä‘á»™ng "nÃ©m" lá»—i.                | Chá»‰ lÃ  má»™t lá»i "cáº£nh bÃ¡o" vá» kháº£ nÄƒng cÃ³ lá»—i.      |

Hy vá»ng Ä‘iá»u nÃ y giÃºp báº¡n nhÃ¬n rÃµ hÆ¡n vá» hai anh em `throw` vÃ  `throws` nÃ y nhÃ©! Giá» thÃ¬ báº¡n Ä‘Ã£ lÃ  má»™t chuyÃªn gia vá» ngoáº¡i lá»‡ rá»“i Ä‘áº¥y!

    Báº¡n cÃ³ hai thá»© trÆ°á»›c máº·t, Ä‘Ãºng khÃ´ng?
Khi báº¡n muá»‘n chá»‰ *cáº£ hai* thá»© Ä‘Ã³ â€” khÃ´ng pháº£i chá»‰ má»™t, mÃ  lÃ  cáº£ hai cÃ¹ng lÃºc â€” thÃ¬ trong tiáº¿ng Viá»‡t, chÃºng ta dÃ¹ng cá»¥m tá»« `Cáº£ hai`.
NÃ³ giÃºp báº¡n gá»™p chung hai thá»© láº¡i vÃ  nÃ³i vá» chÃºng cÃ¹ng má»™t lÃºc Ä‘áº¥y! `throw` ChÃ o báº¡n! Sáºµn sÃ ng cho má»™t tá»« cá»±c ká»³ tiá»‡n lá»£i chÆ°a?

Khi báº¡n muá»‘n nÃ³i cÃ³ `thá»© nÃ y` **vÃ ** `thá»© kia`...

Kiá»ƒu nhÆ° "má»™t cá»‘c cÃ  phÃª" **vÃ ** "má»™t chiáº¿c bÃ¡nh quy" Ã½.

Trong tiáº¿ng Viá»‡t, chÃºng ta cÃ³ má»™t tá»« nhá» bÃ© nhÆ°ng quyá»n nÄƒng Ä‘á»ƒ lÃ m viá»‡c Ä‘Ã³:

```
vÃ 
```

Dá»… nhÆ° Äƒn káº¹o, Ä‘Ãºng khÃ´ng nÃ o? Giá» báº¡n Ä‘Ã£ biáº¿t cÃ¡ch ná»‘i má»i thá»© láº¡i vá»›i nhau rá»“i! `throws` ChÃºng ta dÃ¹ng chÃºng Ä‘á»ƒ xá»­ lÃ½ lá»—i ngoáº¡i lá»‡ (exception handling) Ä‘áº¥y. Nghe thÃ¬ cÃ³ váº» Ä‘á»u lÃ  Ä‘á»ƒ Ä‘á»‘i phÃ³ vá»›i máº¥y cÃ¡i lá»—i báº¥t ngá», Ä‘Ãºng khÃ´ng? NhÆ°ng mÃ , má»—i cÃ¡i láº¡i cÃ³ má»™t *nhiá»‡m vá»¥ riÃªng biá»‡t* cÆ¡. ChÃºng khÃ´ng lÃ m cÃ¹ng má»™t viá»‡c Ä‘Ã¢u!

    **NÃ©m (throw):**

Báº¡n Ä‘Ã£ sáºµn sÃ ng Ä‘á»ƒ *nÃ©m* má»™t cÃ¡i gÃ¬ Ä‘Ã³ chÆ°a? KhÃ´ng pháº£i má»™t quáº£ bÃ³ng Ä‘Ã¢u nhÃ©, mÃ  lÃ  má»™t *ngoáº¡i lá»‡* (exception)!

HÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y: Báº¡n Ä‘ang viáº¿t code, vÃ  bá»—ng dÆ°ng cÃ³ má»™t Ä‘iá»u kiá»‡n mÃ  code cá»§a báº¡n *khÃ´ng thá»ƒ xá»­ lÃ½* Ä‘Æ°á»£c. NÃ³ giá»‘ng nhÆ° báº¡n Ä‘ang Ä‘i trÃªn Ä‘Æ°á»ng, vÃ  Ä‘á»™t nhiÃªn cÃ³ má»™t cÃ¡i há»‘ to Ä‘Ã¹ng cháº¯n ngang váº­y. Báº¡n khÃ´ng thá»ƒ tiáº¿p tá»¥c Ä‘i tháº³ng Ä‘Æ°á»£c ná»¯a!

ÄÃ³ lÃ  lÃºc báº¡n cáº§n `throw` má»™t ngoáº¡i lá»‡.

Khi báº¡n `throw` má»™t ngoáº¡i lá»‡, báº¡n Ä‘ang nÃ³i vá»›i chÆ°Æ¡ng trÃ¬nh: "NÃ y! CÃ³ váº¥n Ä‘á» rá»“i Ä‘Ã¢y! Tá»› khÃ´ng thá»ƒ tiáº¿p tá»¥c cÃ´ng viá»‡c nÃ y Ä‘Æ°á»£c ná»¯a. CÃ³ ai Ä‘Ã³ giÃºp tá»› xá»­ lÃ½ cÃ¡i *lá»—i* nÃ y khÃ´ng?"

NÃ³ hoáº¡t Ä‘á»™ng tháº¿ nÃ y:

*   Báº¡n táº¡o ra má»™t *Ä‘á»‘i tÆ°á»£ng ngoáº¡i lá»‡* (exception object) má»›i. ÄÃ¢y lÃ  má»™t Ä‘á»‘i tÆ°á»£ng Ä‘áº·c biá»‡t chá»©a thÃ´ng tin vá» Ä‘iá»u gÃ¬ Ä‘Ã£ sai.
*   Báº¡n dÃ¹ng tá»« khÃ³a `throw` Ä‘á»ƒ "nÃ©m" Ä‘á»‘i tÆ°á»£ng ngoáº¡i lá»‡ Ä‘Ã³ Ä‘i.

ÄÃ¢y lÃ  cÃ¡ch báº¡n lÃ m:

```java
// Giáº£ sá»­ báº¡n cÃ³ má»™t sá»‘ lÆ°á»£ng item khÃ´ng há»£p lá»‡
int soLuongItem = -5;

if (soLuongItem < 0) {
    // á»’ khÃ´ng! Sá»‘ lÆ°á»£ng khÃ´ng thá»ƒ Ã¢m Ä‘Æ°á»£c.
    // HÃ£y nÃ©m má»™t ngoáº¡i lá»‡ Ä‘á»ƒ bÃ¡o hiá»‡u cÃ³ lá»—i.
    throw new IllegalArgumentException("Sá»‘ lÆ°á»£ng item khÃ´ng Ä‘Æ°á»£c Ã¢m!");
}
// Náº¿u khÃ´ng cÃ³ lá»—i, code sáº½ tiáº¿p tá»¥c á»Ÿ Ä‘Ã¢y
// ...
```

Khi báº¡n `throw` má»™t ngoáº¡i lá»‡:

1.  PhÆ°Æ¡ng thá»©c hiá»‡n táº¡i cá»§a báº¡n sáº½ *dá»«ng láº¡i ngay láº­p tá»©c*. NÃ³ khÃ´ng cháº¡y báº¥t ká»³ dÃ²ng code nÃ o sau lá»‡nh `throw` ná»¯a.
2.  Ngoáº¡i lá»‡ Ä‘Ã³ sáº½ Ä‘Æ°á»£c "nÃ©m" lÃªn trÃªn, Ä‘áº¿n phÆ°Æ¡ng thá»©c Ä‘Ã£ gá»i phÆ°Æ¡ng thá»©c cá»§a báº¡n. Cá»© tháº¿, nÃ³ sáº½ Ä‘i lÃªn "chuá»—i gá»i" (call stack) cho Ä‘áº¿n khi cÃ³ ai Ä‘Ã³ *báº¯t láº¥y* (catch) nÃ³ vÃ  xá»­ lÃ½.

Váº­y, `throw` lÃ  cÃ¡ch báº¡n *táº¡o ra vÃ  gá»­i Ä‘i* má»™t tÃ­n hiá»‡u lá»—i khi code cá»§a báº¡n gáº·p pháº£i tÃ¬nh huá»‘ng báº¥t ngá» mÃ  nÃ³ khÃ´ng biáº¿t cÃ¡ch tá»± giáº£i quyáº¿t! NÃ³ lÃ  má»™t cÃ´ng cá»¥ quan trá»ng Ä‘á»ƒ bÃ¡o cÃ¡o sá»± cá»‘ trong chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n.
    - Khi báº¡n muá»‘n *tá»± tay* 'quÄƒng' (nÃ©m) má»™t ngoáº¡i lá»‡ (lá»—i) ra ngoÃ i.
Kiá»ƒu nhÆ°, báº¡n *chá»§ Ä‘á»™ng* báº£o chÆ°Æ¡ng trÃ¬nh: "NÃ y, cÃ³ váº¥n Ä‘á» rá»“i Ä‘áº¥y! Dá»«ng láº¡i vÃ  xá»­ lÃ½ Ä‘i!"
    - NÃ³ Ä‘Æ°á»£c dÃ¹ng á»Ÿ Ä‘Ã¢u váº­y?
Ã€, báº¡n sáº½ tháº¥y nÃ³ náº±m gá»n gháº½ *bÃªn trong* pháº§n thÃ¢n cá»§a má»™t phÆ°Æ¡ng thá»©c Ä‘Ã³.
Nhá»› khÃ´ng? Pháº§n thÃ¢n phÆ°Æ¡ng thá»©c chÃ­nh lÃ  Ä‘oáº¡n code náº±m giá»¯a cáº·p dáº¥u ngoáº·c nhá»n `{}`.
    - NÃ y báº¡n! CÃ³ má»™t Ä‘iá»u quan trá»ng báº¡n cáº§n nhá»› vá» cÃ¡c ngoáº¡i lá»‡ (exceptions) nÃ y nhÃ©.

Khi code cá»§a báº¡n gáº·p sá»± cá»‘ vÃ  quyáº¿t Ä‘á»‹nh 'nÃ©m' ra má»™t ngoáº¡i lá»‡...

NÃ³ chá»‰ cÃ³ thá»ƒ 'nÃ©m' DUY NHáº¤T Má»˜T ngoáº¡i lá»‡ táº¡i má»™t thá»i Ä‘iá»ƒm mÃ  thÃ´i.

Báº¡n khÃ´ng thá»ƒ 'nÃ©m' ra hai, ba hay nhiá»u loáº¡i lá»—i khÃ¡c nhau cÃ¹ng má»™t lÃºc Ä‘Ã¢u nhÃ©. Má»—i láº§n cÃ³ sá»± cá»‘, chá»‰ cÃ³ má»™t 'cá»¥c lá»—i' Ä‘Æ°á»£c gá»­i Ä‘i thÃ´i.
    - ÄÆ°á»£c rá»“i, lÃ½ thuyáº¿t tháº¿ Ä‘á»§ rá»“i. Giá» thÃ¬ thá»±c hÃ nh thÃ´i nÃ o! ÄÃ¢y lÃ  má»™t vÃ­ dá»¥ cá»¥ thá»ƒ vá» ngoáº¡i lá»‡.

    **throws:**

NÃ y báº¡n! Báº¡n Ä‘Ã£ tá»«ng tháº¥y tá»« khÃ³a `throws` trong code Java chÆ°a?
CÃ³ thá»ƒ báº¡n sáº½ tháº¥y nÃ³ xuáº¥t hiá»‡n ngay cáº¡nh tÃªn phÆ°Æ¡ng thá»©c, Ä‘Ãºng khÃ´ng?
Äá»«ng lo láº¯ng, nÃ³ khÃ´ng Ä‘Ã¡ng sá»£ Ä‘Ã¢u!

Thá»±c ra, `throws` chá»‰ lÃ  má»™t cÃ¡ch Ä‘á»ƒ phÆ°Æ¡ng thá»©c nÃ³i vá»›i báº¡n ráº±ng: "NÃ y, tá»› cÃ³ thá»ƒ gÃ¢y ra má»™t lá»—i nÃ o Ä‘Ã³ Ä‘áº¥y. Báº¡n nÃªn chuáº©n bá»‹ tinh tháº§n Ä‘i nhÃ©!"

NÃ³ giá»‘ng nhÆ° má»™t biá»ƒn cáº£nh bÃ¡o váº­y.
NÃ³ cho biáº¿t phÆ°Æ¡ng thá»©c nÃ y *cÃ³ thá»ƒ* nÃ©m ra (hay "quÄƒng" ra) má»™t loáº¡i ngoáº¡i lá»‡ (exception) cá»¥ thá»ƒ nÃ o Ä‘Ã³.

Váº­y nÃªn, náº¿u báº¡n gá»i phÆ°Æ¡ng thá»©c nÃ y, báº¡n cÃ³ hai lá»±a chá»n chÃ­nh Ä‘á»ƒ xá»­ lÃ½ "cáº£nh bÃ¡o" nÃ y:
*   Báº¡n cÃ³ thá»ƒ *báº¯t láº¥y* ngoáº¡i lá»‡ Ä‘Ã³ (dÃ¹ng `try-catch`).
*   Hoáº·c báº¡n cÃ³ thá»ƒ *nÃ©m tráº£ láº¡i* nÃ³ (tá»©c lÃ , phÆ°Æ¡ng thá»©c cá»§a báº¡n cÅ©ng thÃªm `throws` Ä‘á»ƒ "chuyá»ƒn" trÃ¡ch nhiá»‡m xá»­ lÃ½ cho phÆ°Æ¡ng thá»©c gá»i nÃ³).

ÄÆ¡n giáº£n váº­y thÃ´i! NÃ³ chá»‰ lÃ  cÃ¡ch Ä‘á»ƒ Java Ä‘áº£m báº£o ráº±ng báº¡n luÃ´n biáº¿t vÃ  chuáº©n bá»‹ sáºµn sÃ ng cho nhá»¯ng ráº¯c rá»‘i tiá»m áº©n mÃ  má»™t phÆ°Æ¡ng thá»©c cÃ³ thá»ƒ gÃ¢y ra.
    - DÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?
NÃ³ giÃºp báº¡n 'khai bÃ¡o' (tá»©c lÃ  'nÃ³i rÃµ ra' cho má»i ngÆ°á»i biáº¿t) nhá»¯ng 'ngoáº¡i lá»‡' (nhá»¯ng váº¥n Ä‘á» khÃ´ng mong muá»‘n) mÃ  má»™t phÆ°Æ¡ng thá»©c cá»§a báº¡n CÃ“ THá»‚ 'nÃ©m ra' Ä‘Ã³.
Kiá»ƒu nhÆ°, báº¡n Ä‘ang 'cáº£nh bÃ¡o' trÆ°á»›c cho ngÆ°á»i khÃ¡c biáº¿t Ä‘á»ƒ há» chuáº©n bá»‹ tinh tháº§n váº­y!
    - NÃ y báº¡n, báº¡n cÃ²n nhá»› 'chá»¯ kÃ½ phÆ°Æ¡ng thá»©c' (method signature) chá»©? NÃ³ giá»‘ng nhÆ° cÃ¡i 'ID' cá»§a phÆ°Æ¡ng thá»©c váº­y Ä‘Ã³.

NÃ³ cho Java biáº¿t:
*   TÃªn phÆ°Æ¡ng thá»©c lÃ  gÃ¬?
*   NÃ³ cáº§n nhá»¯ng thÃ´ng tin gÃ¬ Ä‘á»ƒ cháº¡y? (gá»i lÃ  tham sá»‘ Ä‘Ã³!)
*   VÃ  nÃ³ sáº½ tráº£ vá» cÃ¡i gÃ¬ sau khi lÃ m xong viá»‡c? (kiá»ƒu dá»¯ liá»‡u tráº£ vá»)

VÃ  cÃ¡i mÃ  chÃºng ta Ä‘ang há»c (vÃ­ dá»¥ nhÆ° kiá»ƒu dá»¯ liá»‡u tráº£ vá», hay cÃ¡c tham sá»‘) *Ä‘Æ°á»£c dÃ¹ng ngay trong pháº§n chá»¯ kÃ½ phÆ°Æ¡ng thá»©c* nÃ y Ä‘Ã³! NÃ³ lÃ  má»™t pháº§n khÃ´ng thá»ƒ thiáº¿u luÃ´n.
    - Báº¡n hoÃ n toÃ n cÃ³ thá»ƒ khai bÃ¡o **nhiá»u** loáº¡i ngoáº¡i lá»‡ cho má»™t phÆ°Æ¡ng thá»©c!

ÄÃºng váº­y, náº¿u phÆ°Æ¡ng thá»©c cá»§a báº¡n cÃ³ thá»ƒ gÃ¢y ra nhiá»u "ráº¯c rá»‘i" khÃ¡c nhau, báº¡n chá»‰ viá»‡c liá»‡t kÃª chÃºng ra.

Báº¡n dÃ¹ng tá»« khÃ³a `throws` (nhá»› lÃ  cÃ³ `s` nhÃ©!) vÃ  sau Ä‘Ã³ lÃ  danh sÃ¡ch cÃ¡c ngoáº¡i lá»‡, cÃ¡ch nhau bá»Ÿi dáº¥u pháº©y.

```java
public void lamGiDo() throws NgoaiLeLoaiA, NgoaiLeLoaiB, NgoaiLeKhac {
    // ... code cÃ³ thá»ƒ nÃ©m NgoaiLeLoaiA, NgoaiLeLoaiB hoáº·c NgoaiLeKhac
}
```
    - Tiáº¿p theo, báº¡n sáº½ thÃªm vÃ o tÃªn cá»§a cÃ¡c lá»›p ngoáº¡i lá»‡ (tá»©c lÃ  cÃ¡c loáº¡i lá»—i mÃ  báº¡n muá»‘n 'báº¯t').

    ```java
    import java.io.*;

    public class ThrowVsThrows {
        
        // Using throws - declares that method may throw an exception
        public void readFile(String filename) throws FileNotFoundException, IOException {
            FileReader file = new FileReader(filename);
            BufferedReader reader = new BufferedReader(file);
            String line = reader.readLine();
            reader.close();
        }
        
        // Using throw - explicitly throws an exception
        public void validateAge(int age) {
            if (age < 0) {
                throw new IllegalArgumentException("Age cannot be negative");
            }
            if (age < 18) {
                throw new ArithmeticException("Not eligible to vote");
            }
            System.out.println("Eligible to vote");
        }
        
        // Combining throw and throws
        public void processData(String data) throws CustomException {
            if (data == null) {
                throw new CustomException("Data cannot be null");
            }
            // Process data
        }
    }

    class CustomException extends Exception {
        public CustomException(String message) {
            super(message);
        }
    }
    ```

    | `throw` | `throws` |
|---|---|
| **Báº¡n dÃ¹ng nÃ³ khi nÃ o?** | **Báº¡n dÃ¹ng nÃ³ khi nÃ o?** |
| Khi báº¡n muá»‘n *tá»± tay táº¡o ra vÃ  nÃ©m* má»™t lá»—i ngay láº­p tá»©c, ngay táº¡i chá»— code Ä‘ang cháº¡y. Giá»‘ng nhÆ° báº¡n tá»± tay táº¡o ra má»™t "quáº£ bom lá»—i" vÃ  kÃ­ch hoáº¡t nÃ³ váº­y! | Khi báº¡n muá»‘n *khai bÃ¡o* (cáº£nh bÃ¡o trÆ°á»›c) ráº±ng má»™t phÆ°Æ¡ng thá»©c (hÃ m) *cÃ³ thá»ƒ* nÃ©m ra má»™t loáº¡i lá»—i nÃ o Ä‘Ã³ trong quÃ¡ trÃ¬nh nÃ³ cháº¡y. Giá»‘ng nhÆ° má»™t biá»ƒn bÃ¡o "Cáº©n tháº­n, cÃ³ thá»ƒ cÃ³ lá»—i á»Ÿ Ä‘Ã¢y!" váº­y Ä‘Ã³. |
| **NÃ³ hoáº¡t Ä‘á»™ng vá»›i cÃ¡i gÃ¬?** | **NÃ³ hoáº¡t Ä‘á»™ng vá»›i cÃ¡i gÃ¬?** |
| Má»™t *Ä‘á»‘i tÆ°á»£ng* lá»—i cá»¥ thá»ƒ (mÃ  báº¡n Ä‘Ã£ `new` ra, vÃ­ dá»¥: `new IOException("File há»ng rá»“i!")`). | Má»™t hoáº·c nhiá»u *lá»›p* lá»—i (vÃ­ dá»¥: `IOException`, `FileNotFoundException`). NÃ³ chá»‰ lÃ  tÃªn loáº¡i lá»—i thÃ´i, khÃ´ng pháº£i má»™t lá»—i cá»¥ thá»ƒ nÃ o cáº£. |
| **Sau `throw` lÃ  gÃ¬?** | **Sau `throws` lÃ  gÃ¬?** |
| LÃ  má»™t *thá»±c thá»ƒ (instance)* cá»§a lá»—i báº¡n muá»‘n nÃ©m. Báº¡n pháº£i táº¡o ra Ä‘á»‘i tÆ°á»£ng lá»—i Ä‘Ã³ trÆ°á»›c khi nÃ©m nÃ³ Ä‘i. | LÃ  *tÃªn cá»§a má»™t hoáº·c nhiá»u lá»›p lá»—i*, cÃ¡ch nhau bá»Ÿi dáº¥u pháº©y. |
| **NÃ³ náº±m á»Ÿ Ä‘Ã¢u?** | **NÃ³ náº±m á»Ÿ Ä‘Ã¢u?** |
| *BÃªn trong* pháº§n thÃ¢n cá»§a phÆ°Æ¡ng thá»©c (hÃ m), nÆ¡i báº¡n muá»‘n "gÃ¢y ra" lá»—i. | *á» pháº§n khai bÃ¡o chá»¯ kÃ½* cá»§a phÆ°Æ¡ng thá»©c (hÃ m), ngay sau dáº¥u ngoáº·c Ä‘Æ¡n `()` luÃ´n. |
| **VÃ­ dá»¥ nhÃ¬n tháº¿ nÃ o?** | **VÃ­ dá»¥ nhÃ¬n tháº¿ nÃ o?** |
| ```java<br/>if (duLieuKhongHopLe) {<br/>    throw new IllegalArgumentException("Dá»¯ liá»‡u Ä‘áº§u vÃ o khÃ´ng há»£p lá»‡!");<br/>}<br/>``` | ```java<br/>public void docDuLieuTuFile() throws IOException, FileNotFoundException {<br/>    // ... code á»Ÿ Ä‘Ã¢y cÃ³ thá»ƒ nÃ©m ra IOException hoáº·c FileNotFoundException ...<br/>}<br/>``` |
    |-------|--------|
    | DÃ¹ng Ä‘á»ƒ "nÃ©m" (throw) má»™t ngoáº¡i lá»‡ | DÃ¹ng Ä‘á»ƒ "khai bÃ¡o" (declare) má»™t ngoáº¡i lá»‡ |
|---|---|
| **Khi nÃ o báº¡n dÃ¹ng `throw`?** | **Khi nÃ o báº¡n dÃ¹ng `declare` (vá»›i tá»« khÃ³a `throws`)?** |
| Báº¡n dÃ¹ng nÃ³ khi code cá»§a báº¡n Ä‘ang cháº¡y ngon lÃ nh, nhÆ°ng BÃ™M! CÃ³ gÃ¬ Ä‘Ã³ sai bÃ©t nhÃ¨ rá»“i! Báº¡n *phÃ¡t hiá»‡n* ra má»™t váº¥n Ä‘á» mÃ  báº¡n khÃ´ng thá»ƒ giáº£i quyáº¿t tiáº¿p Ä‘Æ°á»£c. | Báº¡n dÃ¹ng nÃ³ khi báº¡n Ä‘ang viáº¿t má»™t phÆ°Æ¡ng thá»©c (method), vÃ  báº¡n nghÄ©: "Hmm, cÃ¡i phÆ°Æ¡ng thá»©c nÃ y *cÃ³ thá»ƒ* gÃ¢y ra má»™t lá»—i nÃ o Ä‘Ã³, nhÆ°ng tÃ´i khÃ´ng muá»‘n tá»± mÃ¬nh xá»­ lÃ½ nÃ³ ngay bÃ¢y giá»." |
| Báº¡n muá»‘n nÃ³i: "NÃ y, cÃ³ má»™t váº¥n Ä‘á» *ngay táº¡i Ä‘Ã¢y*! Dá»«ng láº¡i vÃ  xá»­ lÃ½ Ä‘i!" | Thay vÃ o Ä‘Ã³, báº¡n muá»‘n "cáº£nh bÃ¡o" cho báº¥t ká»³ ai dÃ¹ng phÆ°Æ¡ng thá»©c cá»§a báº¡n ráº±ng: "NÃ y, dÃ¹ng tÃ´i thÃ¬ cáº©n tháº­n nhÃ©! TÃ´i *cÃ³ thá»ƒ* nÃ©m ra má»™t ngoáº¡i lá»‡ loáº¡i nÃ y Ä‘áº¥y!" |
| NÃ³ giá»‘ng nhÆ° báº¡n Ä‘ang hÃ©t "CÃ“ Lá»–I Rá»’I!" vÃ  *quÄƒng* tháº³ng cÃ¡i váº¥n Ä‘á» Ä‘Ã³ ra ngoÃ i Ä‘á»ƒ ai Ä‘Ã³ báº¯t láº¥y vÃ  xá»­ lÃ½. | NÃ³ giá»‘ng nhÆ° báº¡n Ä‘áº·t má»™t táº¥m biá»ƒn "Cáº©n tháº­n: CÃ³ thá»ƒ trÆ¡n trÆ°á»£t" trÆ°á»›c cá»­a má»™t cÄƒn phÃ²ng. Báº¡n khÃ´ng tá»± mÃ¬nh lÃ m ai Ä‘Ã³ trÆ°á»£t ngÃ£, báº¡n chá»‰ *thÃ´ng bÃ¡o* vá» kháº£ nÄƒng Ä‘Ã³ thÃ´i. |
| Khi báº¡n dÃ¹ng `throw`, chÆ°Æ¡ng trÃ¬nh sáº½ ngá»«ng cháº¡y theo cÃ¡ch thÃ´ng thÆ°á»ng vÃ  Ä‘i tÃ¬m má»™t khá»‘i `catch` phÃ¹ há»£p Ä‘á»ƒ "báº¯t" vÃ  xá»­ lÃ½ ngoáº¡i lá»‡ Ä‘Ã³. | Khi báº¡n dÃ¹ng `declare` (tá»©c lÃ  thÃªm `throws` vÃ o chá»¯ kÃ½ phÆ°Æ¡ng thá»©c), chÆ°Æ¡ng trÃ¬nh khÃ´ng dá»«ng ngay láº­p tá»©c. NÃ³ chá»‰ lÃ  má»™t lá»i cáº£nh bÃ¡o trong chá»¯ kÃ½ phÆ°Æ¡ng thá»©c Ä‘á»ƒ ngÆ°á»i gá»i phÆ°Æ¡ng thá»©c biáº¿t mÃ  chuáº©n bá»‹ `try-catch` cho phÃ¹ há»£p. |
    | BÃªn trong "ruá»™t" cá»§a phÆ°Æ¡ng thá»©c | Ngay táº¡i dÃ²ng khai bÃ¡o phÆ°Æ¡ng thá»©c |
    | KhÃ´ng thá»ƒ nÃ©m nhiá»u ngoáº¡i lá»‡ cÃ¹ng lÃºc | CÃ³ thá»ƒ khai bÃ¡o nhiá»u ngoáº¡i lá»‡ |
|---|---|
| Khi báº¡n dÃ¹ng `throw` Ä‘á»ƒ 'nÃ©m' má»™t ngoáº¡i lá»‡, báº¡n chá»‰ cÃ³ thá»ƒ nÃ©m Má»˜T ngoáº¡i lá»‡ mÃ  thÃ´i. NÃ³ giá»‘ng nhÆ° báº¡n chá»‰ cÃ³ thá»ƒ gÃ¢y ra Má»˜T váº¥n Ä‘á» cá»¥ thá»ƒ ngay táº¡i thá»i Ä‘iá»ƒm Ä‘Ã³ váº­y. | NhÆ°ng khi báº¡n dÃ¹ng `throws` (cÃ³ 's' á»Ÿ cuá»‘i nhÃ©!) trÃªn khai bÃ¡o phÆ°Æ¡ng thá»©c, báº¡n Ä‘ang nÃ³i vá»›i tháº¿ giá»›i ráº±ng phÆ°Æ¡ng thá»©c nÃ y CÃ“ THá»‚ nÃ©m ra nhiá»u loáº¡i ngoáº¡i lá»‡ khÃ¡c nhau. Báº¡n cÃ³ thá»ƒ liá»‡t kÃª bao nhiÃªu loáº¡i tÃ¹y thÃ­ch! |
    | DÃ¹ng vá»›i má»™t **Ä‘á»‘i tÆ°á»£ng** (instance) | DÃ¹ng vá»›i **tÃªn cá»§a Lá»›p** |
    | Checked exceptions must be caught | Propagates exception to caller |
|---|---|
| Ngoáº¡i lá»‡ "báº¯t buá»™c kiá»ƒm tra" (Checked exceptions)? NÃ y, báº¡n *pháº£i* xá»­ lÃ½ chÃºng Ä‘Ã³! TrÃ¬nh biÃªn dá»‹ch sáº½ báº¯t báº¡n Ä‘áº·t chÃºng vÃ o `try/catch`. KhÃ´ng lÃ m lÃ  lá»—i ngay! | Náº¿u báº¡n khÃ´ng "báº¯t" ngoáº¡i lá»‡ á»Ÿ Ä‘Ã¢y? Äá»«ng lo, nÃ³ khÃ´ng biáº¿n máº¥t Ä‘Ã¢u! Ngoáº¡i lá»‡ sáº½ "truyá»n" (propagate) lÃªn cho phÆ°Æ¡ng thá»©c Ä‘Ã£ gá»i nÃ³. Cá»© tháº¿, nÃ³ "nháº£y" lÃªn trÃªn chuá»—i cÃ¡c lá»i gá»i, nhÆ° quáº£ bÃ³ng nÃ³ng, cho Ä‘áº¿n khi cÃ³ ai Ä‘Ã³ chá»‹u trÃ¡ch nhiá»‡m "báº¯t" nÃ³! |

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

28. ### Lá»›p Singleton lÃ  gÃ¬ vÃ  lÃ m tháº¿ nÃ o Ä‘á»ƒ táº¡o ra nÃ³?

NÃ y báº¡n! Báº¡n Ä‘Ã£ bao giá» nghe nÃ³i vá» má»™t thá»© gÃ¬ Ä‘Ã³ mÃ  *chá»‰ cÃ³ má»™t* thÃ´i chÆ°a? Giá»‘ng nhÆ°, chá»‰ cÃ³ má»™t Tá»•ng thá»‘ng á»Ÿ má»™t thá»i Ä‘iá»ƒm, hay chá»‰ cÃ³ má»™t Máº·t Trá»i trong há»‡ máº·t trá»i cá»§a chÃºng ta váº­y.

Trong tháº¿ giá»›i láº­p trÃ¬nh Java, Ä‘Ã´i khi chÃºng ta cÅ©ng cáº§n má»™t "thá»©" mÃ  *chá»‰ cÃ³ duy nháº¥t má»™t báº£n sao* tá»“n táº¡i trong toÃ n bá»™ á»©ng dá»¥ng cá»§a mÃ¬nh. ChÃºng ta gá»i nhá»¯ng "thá»©" Ä‘Ã³ lÃ  **lá»›p Singleton** (Singleton Class).

Váº­y, **lá»›p Singleton lÃ  gÃ¬?**
NÃ³ lÃ  má»™t lá»›p mÃ  Ä‘áº£m báº£o **chá»‰ cÃ³ má»™t vÃ  chá»‰ má»™t Ä‘á»‘i tÆ°á»£ng (instance) duy nháº¥t** cá»§a nÃ³ Ä‘Æ°á»£c táº¡o ra trong suá»‘t vÃ²ng Ä‘á»i cá»§a á»©ng dá»¥ng. VÃ  nÃ³ cÅ©ng cung cáº¥p má»™t cÃ¡ch Ä‘á»ƒ báº¡n cÃ³ thá»ƒ *truy cáº­p* vÃ o Ä‘á»‘i tÆ°á»£ng duy nháº¥t Ä‘Ã³ tá»« báº¥t cá»© Ä‘Ã¢u.

**Khi nÃ o thÃ¬ báº¡n cáº§n má»™t Singleton?**
HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³:
*   Má»™t "ngÆ°á»i ghi nháº­t kÃ½" (logger) cho á»©ng dá»¥ng cá»§a báº¡n. Báº¡n chá»‰ muá»‘n má»™t ngÆ°á»i ghi duy nháº¥t chá»‹u trÃ¡ch nhiá»‡m ghi táº¥t cáº£ cÃ¡c thÃ´ng bÃ¡o, Ä‘Ãºng khÃ´ng?
*   Má»™t "quáº£n lÃ½ cáº¥u hÃ¬nh" (configuration manager). Báº¡n chá»‰ muá»‘n cÃ³ má»™t bá»™ cáº¥u hÃ¬nh chung cho toÃ n bá»™ á»©ng dá»¥ng thÃ´i.
*   Má»™t "káº¿t ná»‘i cÆ¡ sá»Ÿ dá»¯ liá»‡u" (database connection pool). Báº¡n muá»‘n quáº£n lÃ½ cÃ¡c káº¿t ná»‘i nÃ y má»™t cÃ¡ch táº­p trung.

Trong nhá»¯ng trÆ°á»ng há»£p nÃ y, Singleton chÃ­nh lÃ  ngÆ°á»i báº¡n tá»‘t nháº¥t cá»§a báº¡n!

---

**Váº­y, lÃ m tháº¿ nÃ o Ä‘á»ƒ táº¡o ra má»™t lá»›p Singleton?**

Äá»ƒ táº¡o ra má»™t Singleton, chÃºng ta cáº§n lÃ m ba viá»‡c chÃ­nh, giá»‘ng nhÆ° má»™t cÃ´ng thá»©c váº­y:

Äáº§u tiÃªn, báº¡n cáº§n **"cáº¥m cá»­a" constructor** cá»§a lá»›p Ä‘Ã³. Biáº¿n nÃ³ thÃ nh `private` Ä‘á»ƒ khÃ´ng ai cÃ³ thá»ƒ tá»± Ã½ táº¡o ra Ä‘á»‘i tÆ°á»£ng má»›i báº±ng cÃ¡ch gá»i `new` trá»±c tiáº¿p tá»« bÃªn ngoÃ i.

Tiáº¿p theo, báº¡n cáº§n má»™t **biáº¿n static riÃªng tÆ°** Ä‘á»ƒ giá»¯ Ä‘á»‘i tÆ°á»£ng Singleton *duy nháº¥t* Ä‘Ã³. Biáº¿n nÃ y sáº½ lÃ  "ngÆ°á»i gÃ¡c cá»•ng" bÃ­ máº­t cá»§a báº¡n.

Cuá»‘i cÃ¹ng, báº¡n cáº§n má»Ÿ má»™t **phÆ°Æ¡ng thá»©c static cÃ´ng khai** Ä‘á»ƒ má»i ngÆ°á»i cÃ³ thá»ƒ *láº¥y* Ä‘Æ°á»£c Ä‘á»‘i tÆ°á»£ng duy nháº¥t Ä‘Ã³. ÄÃ¢y chÃ­nh lÃ  "cÃ¡nh cá»­a" Ä‘á»ƒ truy cáº­p vÃ o Singleton.

Nghe cÃ³ váº» "hacky" má»™t chÃºt, nhÆ°ng thá»±c ra nÃ³ khÃ¡ Ä‘Æ¡n giáº£n. HÃ£y xem mÃ£ nÃ y nhÃ©:

```java
public class MySingleton {

    // BÆ°á»›c 1: Táº¡o má»™t biáº¿n static riÃªng tÆ° Ä‘á»ƒ giá»¯ Ä‘á»‘i tÆ°á»£ng duy nháº¥t.
    // ChÃºng ta khá»Ÿi táº¡o nÃ³ ngay láº­p tá»©c (early initialization)
    // Ä‘á»ƒ Ä‘áº£m báº£o nÃ³ luÃ´n sáºµn sÃ ng khi cáº§n.
    private static MySingleton uniqueInstance = new MySingleton();

    // BÆ°á»›c 2: "Cáº¥m cá»­a" constructor!
    // Biáº¿n nÃ³ thÃ nh private Ä‘á»ƒ khÃ´ng ai cÃ³ thá»ƒ gá»i 'new MySingleton()' tá»« bÃªn ngoÃ i.
    private MySingleton() {
        // ÄÃ¢y lÃ  nÆ¡i báº¡n cÃ³ thá»ƒ lÃ m nhá»¯ng viá»‡c khá»Ÿi táº¡o cáº§n thiáº¿t
        // cho Ä‘á»‘i tÆ°á»£ng Singleton cá»§a mÃ¬nh, vÃ­ dá»¥ nhÆ° táº£i cáº¥u hÃ¬nh.
        System.out.println("NÃ y! Má»™t Ä‘á»‘i tÆ°á»£ng MySingleton vá»«a Ä‘Æ°á»£c táº¡o ra!");
    }

    // BÆ°á»›c 3: Má»Ÿ má»™t "cÃ¡nh cá»­a" cÃ´ng khai Ä‘á»ƒ láº¥y Ä‘á»‘i tÆ°á»£ng duy nháº¥t.
    // PhÆ°Æ¡ng thá»©c nÃ y lÃ  static, nÃªn báº¡n cÃ³ thá»ƒ gá»i nÃ³ trá»±c tiáº¿p qua tÃªn lá»›p.
    public static MySingleton getInstance() {
        return uniqueInstance; // Tráº£ vá» Ä‘á»‘i tÆ°á»£ng duy nháº¥t cá»§a chÃºng ta.
    }

    // ÄÃ¢y lÃ  má»™t phÆ°Æ¡ng thá»©c vÃ­ dá»¥ Ä‘á»ƒ chá»©ng minh ráº±ng
    // báº¡n Ä‘ang lÃ m viá»‡c vá»›i cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng.
    public void showMessage() {
        System.out.println("Xin chÃ o tá»« Ä‘á»‘i tÆ°á»£ng Singleton!");
    }
}
```

**LÃ m tháº¿ nÃ o Ä‘á»ƒ sá»­ dá»¥ng nÃ³?**

Ráº¥t Ä‘Æ¡n giáº£n! Báº¡n khÃ´ng gá»i `new MySingleton()` ná»¯a. Thay vÃ o Ä‘Ã³, báº¡n sáº½ lÃ m tháº¿ nÃ y:

```java
public class SingletonDemo {
    public static void main(String[] args) {
        // Láº¥y Ä‘á»‘i tÆ°á»£ng Singleton.
        // Báº¡n sáº½ LUÃ”N LUÃ”N nháº­n Ä‘Æ°á»£c cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng!
        MySingleton singleton1 = MySingleton.getInstance();
        singleton1.showMessage(); // NÃ³ sáº½ in ra "Xin chÃ o tá»« Ä‘á»‘i tÆ°á»£ng Singleton!"

        // Thá»­ láº¥y láº¡i láº§n ná»¯a...
        MySingleton singleton2 = MySingleton.getInstance();
        singleton2.showMessage(); // NÃ³ váº«n in ra "Xin chÃ o tá»« Ä‘á»‘i tÆ°á»£ng Singleton!"

        // Kiá»ƒm tra xem chÃºng cÃ³ thá»±c sá»± lÃ  Má»˜T Ä‘á»‘i tÆ°á»£ng khÃ´ng?
        if (singleton1 == singleton2) {
            System.out.println("Tuyá»‡t vá»i! singleton1 vÃ  singleton2 thá»±c sá»± lÃ  Má»˜T Ä‘á»‘i tÆ°á»£ng!");
        }
    }
}
```

Khi báº¡n cháº¡y chÆ°Æ¡ng trÃ¬nh `SingletonDemo` nÃ y, báº¡n sáº½ tháº¥y dÃ²ng chá»¯ "NÃ y! Má»™t Ä‘á»‘i tÆ°á»£ng MySingleton vá»«a Ä‘Æ°á»£c táº¡o ra!" chá»‰ xuáº¥t hiá»‡n **má»™t láº§n duy nháº¥t** thÃ´i, ngay cáº£ khi báº¡n gá»i `getInstance()` nhiá»u láº§n. Äiá»u Ä‘Ã³ chá»©ng tá» chÃºng ta Ä‘Ã£ thÃ nh cÃ´ng trong viá»‡c táº¡o ra má»™t Singleton!

ÄÃ³ lÃ  táº¥t cáº£ nhá»¯ng gÃ¬ báº¡n cáº§n biáº¿t Ä‘á»ƒ báº¯t Ä‘áº§u vá»›i Singleton rá»“i Ä‘áº¥y! Giá» thÃ¬ báº¡n Ä‘Ã£ cÃ³ thÃªm má»™t cÃ´ng cá»¥ máº¡nh máº½ trong há»™p Ä‘á»“ nghá» láº­p trÃ¬nh cá»§a mÃ¬nh rá»“i.

    Báº¡n Ä‘Ã£ nghe nÃ³i vá» Singleton chÆ°a? ÄÃ¢y lÃ  má»™t trong nhá»¯ng "cÃ´ng thá»©c" thiáº¿t káº¿ (design pattern) cá»±c ká»³ thÃº vá»‹ vÃ  há»¯u Ã­ch Ä‘áº¥y!

Ã tÆ°á»Ÿng chÃ­nh cá»§a Singleton lÃ  gÃ¬?
*   NÃ³ Ä‘áº£m báº£o ráº±ng trong *toÃ n bá»™* á»©ng dá»¥ng cá»§a báº¡n, chá»‰ cÃ³ DUY NHáº¤T má»™t "báº£n sao" (instance) cá»§a má»™t lá»›p Ä‘Æ°á»£c táº¡o ra mÃ  thÃ´i.
*   Báº¡n cá»© hÃ¬nh dung nhÆ° tháº¿ nÃ y: giá»‘ng nhÆ° báº¡n cÃ³ má»™t "Tá»•ng thá»‘ng" váº­y. DÃ¹ cÃ³ bao nhiÃªu ngÆ°á»i muá»‘n gáº·p Ä‘i chÄƒng ná»¯a, thÃ¬ cÅ©ng chá»‰ cÃ³ Má»˜T vá»‹ Tá»•ng thá»‘ng duy nháº¥t Ä‘ang táº¡i vá»‹ thÃ´i.
*   DÃ¹ báº¡n cÃ³ cá»‘ gáº¯ng "táº¡o má»›i" báº£n sao Ä‘Ã³ bao nhiÃªu láº§n Ä‘i ná»¯a, thÃ¬ Singleton cÅ©ng chá»‰ "á»«m, Ä‘Ã¢y lÃ  cÃ¡i tÃ´i Ä‘Ã£ cÃ³ rá»“i nÃ y!" vÃ  Ä‘Æ°a cho báº¡n Ä‘Ãºng cÃ¡i báº£n sao Ä‘áº§u tiÃªn, duy nháº¥t Ä‘Ã³. KhÃ´ng cÃ³ báº£n sao thá»© hai Ä‘Ã¢u nhÃ©!

VÃ  Ä‘iá»u tuyá»‡t vá»i hÆ¡n ná»¯a lÃ :
*   NÃ³ cung cáº¥p cho báº¡n má»™t "cÃ¡nh cá»­a" Ä‘áº·c biá»‡t, má»™t Ä‘iá»ƒm truy cáº­p chung (global point of access), Ä‘á»ƒ báº¡n cÃ³ thá»ƒ "gá»i tÃªn" vÃ  láº¥y Ä‘Æ°á»£c cÃ¡i báº£n sao DUY NHáº¤T Ä‘Ã³ tá»« Báº¤T Cá»¨ ÄÃ‚U trong chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh. Ráº¥t tiá»‡n lá»£i pháº£i khÃ´ng nÃ o?

    **CÃ¹ng xem nhá»¯ng Ä‘áº·c Ä‘iá»ƒm chÃ­nh cá»§a nÃ³ nhÃ©!**
    - Báº¡n muá»‘n ngÄƒn khÃ´ng cho báº¥t ká»³ ai 'tá»± Ã½' táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p nÃ y?
Báº¡n muá»‘n kiá»ƒm soÃ¡t cháº·t cháº½ viá»‡c 'sinh ra' cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Ã³.

Tháº¿ thÃ¬, báº¡n hÃ£y dÃ¹ng má»™t **constructor `private`**!

Má»™t constructor chÃ­nh lÃ  'ngÆ°á»i' táº¡o ra Ä‘á»‘i tÆ°á»£ng khi báº¡n gÃµ `new MyClass()`.
NhÆ°ng khi báº¡n khai bÃ¡o nÃ³ lÃ  `private`...
...thÃ¬ báº¥t ká»³ code nÃ o *bÃªn ngoÃ i* lá»›p nÃ y sáº½ KHÃ”NG thá»ƒ gá»i nÃ³ Ä‘Æ°á»£c ná»¯a.

NÃ³ giá»‘ng nhÆ° báº¡n 'khÃ³a cá»­a' láº¡i, khÃ´ng cho phÃ©p táº¡o Ä‘á»‘i tÆ°á»£ng trá»±c tiáº¿p tá»« bÃªn ngoÃ i.
Báº¡n Ä‘ang nÃ³i: 'Viá»‡c táº¡o Ä‘á»‘i tÆ°á»£ng nÃ y pháº£i theo cÃ¡ch cá»§a TÃ”I!'"
    - **PhÆ°Æ¡ng thá»©c tÄ©nh** Ä‘á»ƒ láº¥y vá» **thá»ƒ hiá»‡n (instance) duy nháº¥t**
    - Má»™t **biáº¿n `static`** sáº½ cÃ³ nhiá»‡m vá»¥ 'Ã´m' láº¥y cÃ¡i **thá»ƒ hiá»‡n DUY NHáº¤T** Ä‘Ã³.

    **Singleton: CÃ¡c cÃ¡ch 'náº·n' ra má»™t 'em' nÃ³!**

    1. **Khá»Ÿi táº¡o "Sá»‘t Sáº¯ng" (Eager Initialization):**

Báº¡n cÃ³ biáº¿t "sá»‘t sáº¯ng" nghÄ©a lÃ  gÃ¬ khÃ´ng? LÃ  lÃ m cÃ¡i gÃ¬ Ä‘Ã³ *ngay láº­p tá»©c*, tháº­m chÃ­ khi báº¡n cÃ²n chÆ°a thá»±c sá»± cáº§n Ä‘áº¿n nÃ³.

Giá»‘ng nhÆ° báº¡n pha sáºµn cÃ  phÃª tá»« tá»‘i hÃ´m trÆ°á»›c, phÃ²ng khi sÃ¡ng mai báº¡n muá»‘n uá»‘ng ngay áº¥y mÃ !

Trong láº­p trÃ¬nh, "khá»Ÿi táº¡o sá»‘t sáº¯ng" (Eager Initialization) cÃ³ nghÄ©a lÃ  chÃºng ta sáº½ táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng (object) *ngay khi lá»›p (class) cá»§a nÃ³ Ä‘Æ°á»£c táº£i vÃ o bá»™ nhá»›*, chá»© khÃ´ng pháº£i Ä‘á»£i Ä‘áº¿n lÃºc nÃ o Ä‘Ã³ báº¡n cáº§n nÃ³ má»›i táº¡o.

NÃ³ thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng trong máº«u thiáº¿t káº¿ Singleton (chá»‰ cÃ³ Má»˜T Ä‘á»‘i tÆ°á»£ng duy nháº¥t cá»§a má»™t lá»›p).

HÃ£y xem vÃ­ dá»¥ vá» má»™t chiáº¿c mÃ¡y pha cÃ  phÃª nhÃ©:

```java
public class CoffeeMachine {
    // ÄÃ¢y lÃ  cÃ¡i mÃ¡y pha cÃ  phÃª DUY NHáº¤T cá»§a chÃºng ta.
    // ChÃºng ta "sá»‘t sáº¯ng" táº¡o ra nÃ³ NGAY Láº¬P Tá»¨C
    // khi class CoffeeMachine Ä‘Æ°á»£c táº£i vÃ o bá»™ nhá»›.
    private static CoffeeMachine uniqueInstance = new CoffeeMachine();

    // Constructor (hÃ m táº¡o) private Ä‘á»ƒ khÃ´ng ai khÃ¡c cÃ³ thá»ƒ táº¡o mÃ¡y má»›i.
    private CoffeeMachine() {
        // Báº¡n cÃ³ thá»ƒ thÃªm má»™t sá»‘ thá»© khá»Ÿi táº¡o á»Ÿ Ä‘Ã¢y
        System.out.println("Táº¡o ra má»™t mÃ¡y pha cÃ  phÃª má»›i (sá»‘t sáº¯ng!).");
    }

    // PhÆ°Æ¡ng thá»©c cÃ´ng khai Ä‘á»ƒ láº¥y vá» cÃ¡i mÃ¡y pha cÃ  phÃª DUY NHáº¤T.
    public static CoffeeMachine getInstance() {
        System.out.println("Tráº£ vá» mÃ¡y pha cÃ  phÃª DUY NHáº¤T.");
        return uniqueInstance;
    }

    public void makeCoffee() {
        System.out.println("Pha cÃ  phÃª ngon tuyá»‡t!");
    }
}
```

**Æ¯u Ä‘iá»ƒm cá»§a Khá»Ÿi táº¡o Sá»‘t Sáº¯ng:**

*   **SiÃªu Ä‘Æ¡n giáº£n!** Báº¡n chá»‰ cáº§n viáº¿t má»™t dÃ²ng code thÃ´i lÃ  xong.
*   **LuÃ´n sáºµn sÃ ng!** Khi báº¡n gá»i `getInstance()`, Ä‘á»‘i tÆ°á»£ng Ä‘Ã£ Ä‘Æ°á»£c táº¡o rá»“i, khÃ´ng cáº§n chá» Ä‘á»£i gÃ¬ cáº£. NÃ³ luÃ´n á»Ÿ Ä‘Ã³, chá» báº¡n.
*   **KhÃ´ng lo láº¯ng vá» "Ä‘a luá»“ng" (multi-threading)!** Nhiá»u chÆ°Æ¡ng trÃ¬nh cháº¡y cÃ¹ng lÃºc vÃ  yÃªu cáº§u Ä‘á»‘i tÆ°á»£ng nÃ y Æ°? KhÃ´ng sao cáº£! VÃ¬ Ä‘á»‘i tÆ°á»£ng Ä‘Ã£ Ä‘Æ°á»£c táº¡o tá»« trÆ°á»›c rá»“i, nÃªn khÃ´ng cÃ³ chuyá»‡n hai luá»“ng cá»‘ gáº¯ng táº¡o ra Ä‘á»‘i tÆ°á»£ng cÃ¹ng má»™t lÃºc gÃ¢y lá»—i. Ráº¥t an toÃ n!

**NhÆ°á»£c Ä‘iá»ƒm cá»§a Khá»Ÿi táº¡o Sá»‘t Sáº¯ng:**

*   **LÃ£ng phÃ­ tÃ i nguyÃªn!** Äiá»u gÃ¬ sáº½ xáº£y ra náº¿u báº¡n *khÃ´ng bao giá»* thá»±c sá»± dÃ¹ng Ä‘áº¿n cÃ¡i mÃ¡y pha cÃ  phÃª nÃ y? NÃ³ váº«n Ä‘Æ°á»£c táº¡o ra ngay tá»« Ä‘áº§u, tá»‘n bá»™ nhá»› vÃ  má»™t chÃºt thá»i gian khá»Ÿi Ä‘á»™ng, dÃ¹ báº¡n cháº³ng bao giá» Ä‘á»¥ng Ä‘áº¿n nÃ³.
*   Náº¿u Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n lÃ  má»™t thá»© gÃ¬ Ä‘Ã³ "náº·ng Ä‘Ã´" (tá»©c lÃ  tá»‘n nhiá»u bá»™ nhá»› hoáº·c máº¥t nhiá»u thá»i gian Ä‘á»ƒ táº¡o), thÃ¬ viá»‡c táº¡o nÃ³ "sá»‘t sáº¯ng" cÃ³ thá»ƒ lÃ m cháº­m quÃ¡ trÃ¬nh khá»Ÿi Ä‘á»™ng chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n.
    ```java
    public class EagerSingleton {
        private static final EagerSingleton instance = new EagerSingleton();
        
        private EagerSingleton() {}
        
        public static EagerSingleton getInstance() {
            return instance;
        }
    }
    ```

    2. **Khá»Ÿi táº¡o LÆ°á»i biáº¿ng (Lazy Initialization):**

NÃ y báº¡n! Báº¡n Ä‘Ã£ bao giá» nghe nÃ³i vá» viá»‡c "lÆ°á»i biáº¿ng" trong láº­p trÃ¬nh chÆ°a? KhÃ´ng, khÃ´ng pháº£i cÃ¡i kiá»ƒu lÆ°á»i biáº¿ng mÃ  chÃºng ta hay trÃ¡nh Ä‘Ã¢u nhÃ©! ÄÃ¢y lÃ  má»™t kiá»ƒu lÆ°á»i biáº¿ng *siÃªu thÃ´ng minh* Ä‘Ã³, vÃ  chÃºng ta gá»i nÃ³ lÃ  **Khá»Ÿi táº¡o LÆ°á»i biáº¿ng (Lazy Initialization)**.

Váº­y nÃ³ lÃ  gÃ¬? ÄÆ¡n giáº£n thÃ´i: **Báº¡n chá»‰ táº¡o ra má»™t thá»© gÃ¬ Ä‘Ã³ (nhÆ° má»™t Ä‘á»‘i tÆ°á»£ng cháº³ng háº¡n) khi vÃ  chá»‰ khi báº¡n *thá»±c sá»±* cáº§n dÃ¹ng Ä‘áº¿n nÃ³ láº§n Ä‘áº§u tiÃªn.**

Giá»‘ng nhÆ° viá»‡c báº¡n khÃ´ng chuáº©n bá»‹ bá»¯a tá»‘i cho Ä‘áº¿n khi báº¡n *thá»±c sá»±* Ä‘Ã³i áº¥y! Cá»±c ká»³ hiá»‡u quáº£, pháº£i khÃ´ng nÃ o?
    ```java
    public class LazySingleton {
        private static LazySingleton instance;
        
        private LazySingleton() {}
        
        public static LazySingleton getInstance() {
            if (instance == null) {
                instance = new LazySingleton();
            }
            return instance;
        }
    }
    ```

    3. **Singleton cá»§a báº¡n cÃ³ an toÃ n khi nhiá»u luá»“ng cÃ¹ng cháº¡y khÃ´ng? HÃ£y xem Double-Checked Locking giÃºp báº¡n tháº¿ nÃ o!**
    ```java
    public class ThreadSafeSingleton {
        private static volatile ThreadSafeSingleton instance;
        
        private ThreadSafeSingleton() {}
        
        public static ThreadSafeSingleton getInstance() {
            if (instance == null) {
                synchronized (ThreadSafeSingleton.class) {
                    if (instance == null) {
                        instance = new ThreadSafeSingleton();
                    }
                }
            }
            return instance;
        }
    }
    ```

    4. **Bill Pugh Singleton (Tuyá»‡t chiÃªu "xá»‹n xÃ²" nháº¥t!):**

NÃ y báº¡n, báº¡n Ä‘Ã£ sáºµn sÃ ng khÃ¡m phÃ¡ má»™t cÃ¡ch siÃªu "ngáº§u" Ä‘á»ƒ táº¡o ra Singleton chÆ°a? ÄÃ¢y chÃ­nh lÃ  "bÃ­ kÃ­p" mÃ  cÃ¡c láº­p trÃ¬nh viÃªn chuyÃªn nghiá»‡p ráº¥t hay dÃ¹ng Ä‘áº¥y! NÃ³ giÃºp chÃºng ta táº¡o Singleton má»™t cÃ¡ch an toÃ n vÃ  thÃ´ng minh, trÃ¡nh Ä‘Æ°á»£c nhiá»u ráº¯c rá»‘i mÃ  cÃ¡c cÃ¡ch khÃ¡c thÆ°á»ng gáº·p pháº£i.
    ```java
    public class BillPughSingleton {
        private BillPughSingleton() {}
        
        private static class SingletonHelper {
            private static final BillPughSingleton INSTANCE = new BillPughSingleton();
        }
        
        public static BillPughSingleton getInstance() {
            return SingletonHelper.INSTANCE;
        }
    }
    ```

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

29. ### Tháº¿ thÃ¬, nhá»¯ng "siÃªu nÄƒng lá»±c" cá»§a Stream API trong Java 8 lÃ  gÃ¬?

    Java 8 Stream API lÃ  gÃ¬ Æ°? NÃ³ lÃ  má»™t 'cÃ´ng cá»¥' cá»±c ká»³ xá»‹n sÃ² giÃºp báº¡n xá»­ lÃ½ cÃ¡c 'táº­p há»£p Ä‘á»‘i tÆ°á»£ng' (kiá»ƒu nhÆ° danh sÃ¡ch cÃ¡c mÃ³n Ä‘á»“, má»™t Ä‘á»‘ng dá»¯ liá»‡u áº¥y) theo má»™t *cÃ¡ch hoÃ n toÃ n má»›i* â€“ Ä‘Ã³ chÃ­nh lÃ  'cÃ¡ch tiáº¿p cáº­n kiá»ƒu hÃ m' (functional approach).

VÃ  Ä‘iá»ƒm cá»™ng lá»›n lÃ  gÃ¬? CÃ¡c Stream nÃ y cÃ³ thá»ƒ thá»±c hiá»‡n cÃ¡c 'thao tÃ¡c' trÃªn dá»¯ liá»‡u cá»§a báº¡n theo hai kiá»ƒu: 'tuáº§n tá»±' (tá»©c lÃ  lÃ m tá»«ng bÆ°á»›c má»™t) hoáº·c 'song song' (tá»©c lÃ  lÃ m nhiá»u viá»‡c cÃ¹ng lÃºc Ä‘á»ƒ xá»­ lÃ½ nhanh hÆ¡n!).

    **CÃ¡c tÃ­nh nÄƒng chÃ­nh:**
    1. **ÄÃ¡nh giÃ¡ lÆ°á»i biáº¿ng (Lazy Evaluation):**
NÃ y, báº¡n biáº¿t khÃ´ng? CÃ¡c phÃ©p toÃ¡n trung gian (intermediate operations) sáº½ **khÃ´ng cháº¡y ngay láº­p tá»©c** Ä‘Ã¢u nhÃ©! ChÃºng cá»© "Ä‘á»©ng im" Ä‘Ã³. Má»i thá»© chá»‰ thá»±c sá»± báº¯t Ä‘áº§u lÃ m viá»‡c khi nÃ o? Khi má»™t phÃ©p toÃ¡n káº¿t thÃºc (terminal operation) Ä‘Æ°á»£c *gá»i* lÃªn!
    2. ChÃ o báº¡n! Báº¡n Ä‘Ã£ bao giá» nghÄ© lÃ m tháº¿ nÃ o Ä‘á»ƒ cÃ¡c bÆ°á»›c cÃ´ng viá»‡c cÃ³ thá»ƒ ná»‘i tiáº¿p nhau, hoáº¡t Ä‘á»™ng tháº­t mÆ°á»£t mÃ  chÆ°a?

HÃ£y hÃ¬nh dung tháº¿ nÃ y nhÃ©: báº¡n Ä‘ang láº¯p rÃ¡p má»™t mÃ³n Ä‘á»“ chÆ¡i.

*   Äáº§u tiÃªn, báº¡n láº¥y **pháº§n A**.
*   Sau Ä‘Ã³, báº¡n gáº¯n **pháº§n B** *vÃ o pháº§n A*.
*   Tiáº¿p theo, báº¡n gáº¯n **pháº§n C** *vÃ o pháº§n B* (mÃ  pháº§n B nÃ y Ä‘Ã£ gáº¯n vÃ o A rá»“i Ä‘áº¥y).

Báº¡n tháº¥y khÃ´ng? Má»—i bÆ°á»›c má»›i Ä‘á»u láº¥y káº¿t quáº£ cá»§a bÆ°á»›c trÆ°á»›c Ä‘Ã³ Ä‘á»ƒ tiáº¿p tá»¥c cÃ´ng viá»‡c. Cá»© tháº¿ ná»‘i tiáº¿p nhau!

ÄÃ³ chÃ­nh lÃ  Ã½ tÆ°á»Ÿng cá»§a **Pipelining**!

NÃ³ cÃ³ nghÄ©a lÃ  báº¡n cÃ³ thá»ƒ xÃ¢u chuá»—i cÃ¡c "thao tÃ¡c" (hay cÃ¡c hÃ nh Ä‘á»™ng, cÃ¡c bÆ°á»›c) láº¡i vá»›i nhau. Káº¿t quáº£ Ä‘áº§u ra cá»§a má»™t thao tÃ¡c sáº½ trá»Ÿ thÃ nh Ä‘áº§u vÃ o cho thao tÃ¡c tiáº¿p theo. Giá»‘ng nhÆ° má»™t chuá»—i dÃ¢y chuyá»n váº­y Ä‘Ã³!
    3. **VÃ²ng Láº·p Ná»™i Bá»™:** NÃ y báº¡n, Ä‘Ã¢y lÃ  má»™t Ä‘iá»ƒm cá»±c hay cá»§a Stream Ä‘áº¥y! Báº¡n cÃ²n nhá»› máº¥y cÃ¡i vÃ²ng láº·p `for` hay `while` mÃ  báº¡n thÆ°á»ng dÃ¹ng Ä‘á»ƒ Ä‘i qua tá»«ng pháº§n tá»­ trong má»™t danh sÃ¡ch khÃ´ng? Vá»›i Stream, báº¡n khÃ´ng cáº§n pháº£i tá»± mÃ¬nh viáº¿t nhá»¯ng vÃ²ng láº·p Ä‘Ã³ ná»¯a Ä‘Ã¢u! Stream sáº½ tá»± Ä‘á»™ng "lo liá»‡u" viá»‡c láº·p qua tá»«ng pháº§n tá»­ *cho báº¡n*, tá»« A Ä‘áº¿n Z, ngay bÃªn trong nÃ³. Báº¡n chá»‰ viá»‡c báº£o Stream lÃ m gÃ¬, cÃ²n nÃ³ sáº½ tá»± biáº¿t cÃ¡ch "Ä‘i thÄƒm" tá»«ng pháº§n tá»­. Tuyá»‡t vá»i chÆ°a?
    4. **Xá»­ lÃ½ song song:**
Báº¡n cÃ³ muá»‘n mÃ¡y tÃ­nh cá»§a mÃ¬nh lÃ m nhiá»u viá»‡c cÃ¹ng má»™t lÃºc, tháº­t nhanh chÃ³ng khÃ´ng?
ÄÃ³ chÃ­nh lÃ  "xá»­ lÃ½ song song" Ä‘Ã³! NÃ³ giá»‘ng nhÆ° viá»‡c báº¡n cÃ³ má»™t Ä‘á»™i quÃ¢n nhá», má»—i ngÆ°á»i lÃ m má»™t pháº§n viá»‡c riÃªng, vÃ  táº¥t cáº£ cÃ¹ng lÃ m *Ä‘á»“ng thá»i*!
VÃ  Ä‘oÃ¡n xem? Viá»‡c cháº¡y cÃ¡c tÃ¡c vá»¥ song song giá» Ä‘Ã¢y láº¡i *cá»±c ká»³ dá»… dÃ ng* vá»›i... `parallelStream()`

    **CÃ¡c Thao TÃ¡c Phá»• Biáº¿n Vá»›i Stream:**

    ```java
    import java.util.*;
    import java.util.stream.*;

    public class StreamDemo {
        public static void main(String[] args) {
            List<Integer> numbers = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
            
            // filter - filters elements based on condition
            List<Integer> evenNumbers = numbers.stream()
                .filter(n -> n % 2 == 0)
                .collect(Collectors.toList());
            // Result: [2, 4, 6, 8, 10]
            
            // map - transforms elements
            List<Integer> squares = numbers.stream()
                .map(n -> n * n)
                .collect(Collectors.toList());
            // Result: [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]
            
            // reduce - combines elements
            int sum = numbers.stream()
                .reduce(0, (a, b) -> a + b);
            // Result: 55
            
            // sorted - sorts elements
            List<Integer> sorted = numbers.stream()
                .sorted(Comparator.reverseOrder())
                .collect(Collectors.toList());
            
            // distinct - removes duplicates
            List<Integer> unique = Arrays.asList(1, 1, 2, 2, 3).stream()
                .distinct()
                .collect(Collectors.toList());
            // Result: [1, 2, 3]
            
            // limit and skip
            List<Integer> limited = numbers.stream()
                .skip(2)
                .limit(5)
                .collect(Collectors.toList());
            // Result: [3, 4, 5, 6, 7]
            
            // anyMatch, allMatch, noneMatch
            boolean hasEven = numbers.stream().anyMatch(n -> n % 2 == 0);
            boolean allPositive = numbers.stream().allMatch(n -> n > 0);
            
            // findFirst, findAny
            Optional<Integer> first = numbers.stream().findFirst();
            
            // count
            long count = numbers.stream().filter(n -> n > 5).count();
            
            // forEach
            numbers.stream().forEach(System.out::println);
        }
    }
    ```

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

30. ### Sá»± khÃ¡c biá»‡t giá»¯a fail-fast vÃ  fail-safe iterators lÃ  gÃ¬?

Ã€ ha! HÃ£y cÃ¹ng tÃ¬m hiá»ƒu vá» hai kiá»ƒu "ngÆ°á»i hÆ°á»›ng dáº«n" Ä‘áº·c biá»‡t khi báº¡n muá»‘n Ä‘i qua má»™t danh sÃ¡ch cÃ¡c mÃ³n Ä‘á»“ (trong láº­p trÃ¬nh, chÃºng ta gá»i Ä‘Ã³ lÃ  má»™t "collection" hoáº·c "táº­p há»£p"). NgÆ°á»i hÆ°á»›ng dáº«n nÃ y chÃ­nh lÃ  "iterator" Ä‘áº¥y!

TÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t danh sÃ¡ch dÃ i cÃ¡c mÃ³n Ä‘á»“ chÆ¡i yÃªu thÃ­ch. Má»™t "iterator" giá»‘ng nhÆ° má»™t ngÆ°á»i báº¡n giÃºp báº¡n Ä‘i qua danh sÃ¡ch Ä‘Ã³, xem xÃ©t tá»«ng mÃ³n má»™t.

Váº­y, "fail-fast" vÃ  "fail-safe" cÃ³ nghÄ©a lÃ  gÃ¬? ÄÆ¡n giáº£n thÃ´i, Ä‘Ã³ lÃ  cÃ¡ch hai kiá»ƒu ngÆ°á»i báº¡n nÃ y pháº£n á»©ng khi ai Ä‘Ã³ cá»‘ gáº¯ng *thay Ä‘á»•i danh sÃ¡ch Ä‘á»“ chÆ¡i cá»§a báº¡n ngay giá»¯a lÃºc há» Ä‘ang xem xÃ©t*!

#### Fail-Fast Iterators (Kiá»ƒu "há»ng nhanh" áº¥y mÃ !)

*   **TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y:** Báº¡n cÃ³ má»™t ngÆ°á»i báº¡n Ä‘ang Ä‘á»c to danh sÃ¡ch Ä‘á»“ chÆ¡i cá»§a báº¡n. Äá»™t nhiÃªn, báº¡n láº¡i thÃªm má»™t mÃ³n Ä‘á»“ chÆ¡i má»›i vÃ o giá»¯a danh sÃ¡ch, hoáº·c xÃ³a máº¥t má»™t mÃ³n nÃ o Ä‘Ã³.
*   **Pháº£n á»©ng cá»§a "fail-fast":** NgÆ°á»i báº¡n Ä‘Ã³ sáº½ *ngay láº­p tá»©c* dá»«ng láº¡i, nhÄƒn máº·t vÃ  nÃ³i: "ÃŠ! Äang Ä‘á»c dá»Ÿ mÃ ! Sao láº¡i thay Ä‘á»•i tháº¿ nÃ y? Tá»› khÃ´ng lÃ m viá»‡c Ä‘Æ°á»£c ná»¯a Ä‘Ã¢u!" ÄoÃ ng má»™t cÃ¡i, há» bÃ¡o lá»—i luÃ´n!
*   **NÃ³i cÃ¡ch khÃ¡c:** Má»™t iterator kiá»ƒu "fail-fast" sáº½ *bÃ¡o lá»—i ngay láº­p tá»©c* (thÆ°á»ng lÃ  má»™t lá»—i tÃªn lÃ  `ConcurrentModificationException`) náº¿u nÃ³ phÃ¡t hiá»‡n ra ráº±ng danh sÃ¡ch mÃ  nÃ³ Ä‘ang duyá»‡t bá»‹ thay Ä‘á»•i bá»Ÿi má»™t ai Ä‘Ã³ khÃ¡c (hoáº·c má»™t pháº§n khÃ¡c cá»§a chÆ°Æ¡ng trÃ¬nh) *trong lÃºc nÃ³ Ä‘ang duyá»‡t*.
*   **Má»¥c Ä‘Ã­ch:** NÃ³ muá»‘n "há»ng nhanh" Ä‘á»ƒ báº¡n biáº¿t ngay cÃ³ váº¥n Ä‘á». NÃ³ khÃ´ng muá»‘n tiáº¿p tá»¥c lÃ m viá»‡c vá»›i má»™t danh sÃ¡ch Ä‘Ã£ bá»‹ thay Ä‘á»•i mÃ  khÃ´ng Ä‘Æ°á»£c bÃ¡o trÆ°á»›c, vÃ¬ lÃ m tháº¿ cÃ³ thá»ƒ dáº«n Ä‘áº¿n nhá»¯ng lá»—i khÃ³ hiá»ƒu hÆ¡n sau nÃ y. NÃ³ muá»‘n báº¡n sá»­a lá»—i *ngay láº­p tá»©c*.
*   **VÃ­ dá»¥:** Háº§u háº¿t cÃ¡c iterator máº·c Ä‘á»‹nh cá»§a Java Collections nhÆ° `ArrayList`, `HashSet` Ä‘á»u lÃ  kiá»ƒu nÃ y.

#### Fail-Safe Iterators (Kiá»ƒu "an toÃ n" lÃ  trÃªn háº¿t!)

*   **TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y:** Láº§n nÃ y, báº¡n láº¡i cÃ³ má»™t ngÆ°á»i báº¡n khÃ¡c cÅ©ng Ä‘ang Ä‘á»c danh sÃ¡ch Ä‘á»“ chÆ¡i cá»§a báº¡n. NhÆ°ng trÆ°á»›c khi báº¯t Ä‘áº§u Ä‘á»c, ngÆ°á»i báº¡n nÃ y Ä‘Ã£ *tá»± lÃ m má»™t báº£n sao* cá»§a danh sÃ¡ch Ä‘Ã³ rá»“i! Ráº¥t thÃ´ng minh pháº£i khÃ´ng?
*   **Pháº£n á»©ng cá»§a "fail-safe":** Báº¡n láº¡i thÃªm hay bá»›t mÃ³n Ä‘á»“ chÆ¡i khá»i danh sÃ¡ch gá»‘c Æ°? NgÆ°á»i báº¡n Ä‘Ã³ cháº³ng thÃ¨m báº­n tÃ¢m! Há» váº«n cá»© tiáº¿p tá»¥c Ä‘á»c báº£n sao cá»§a mÃ¬nh má»™t cÃ¡ch vui váº».
*   **NÃ³i cÃ¡ch khÃ¡c:** Má»™t iterator kiá»ƒu "fail-safe" sáº½ *khÃ´ng bÃ¡o lá»—i* ngay cáº£ khi danh sÃ¡ch gá»‘c bá»‹ thay Ä‘á»•i trong lÃºc nÃ³ Ä‘ang duyá»‡t. Táº¡i sao Æ°? VÃ¬ nÃ³ khÃ´ng lÃ m viá»‡c trá»±c tiáº¿p trÃªn danh sÃ¡ch gá»‘c. NÃ³ thÆ°á»ng lÃ m viá»‡c trÃªn má»™t *báº£n sao* cá»§a danh sÃ¡ch Ä‘Ã³.
*   **Má»¥c Ä‘Ã­ch:** NÃ³ muá»‘n Ä‘áº£m báº£o ráº±ng viá»‡c duyá»‡t luÃ´n diá»…n ra suÃ´n sáº», khÃ´ng bá»‹ giÃ¡n Ä‘oáº¡n. Tuy nhiÃªn, cÃ³ má»™t Ä‘iá»ƒm cáº§n lÆ°u Ã½: vÃ¬ nÃ³ lÃ m viá»‡c trÃªn báº£n sao, nÃªn nhá»¯ng thay Ä‘á»•i má»›i nháº¥t trÃªn danh sÃ¡ch gá»‘c cÃ³ thá»ƒ *khÃ´ng Ä‘Æ°á»£c pháº£n Ã¡nh* trong quÃ¡ trÃ¬nh duyá»‡t cá»§a nÃ³. Báº¡n sáº½ tháº¥y danh sÃ¡ch táº¡i thá»i Ä‘iá»ƒm nÃ³ Ä‘Æ°á»£c sao chÃ©p.
*   **VÃ­ dá»¥:** CÃ¡c iterator trong gÃ³i `java.util.concurrent` (nhÆ° `CopyOnWriteArrayList`, `ConcurrentHashMap`) thÆ°á»ng lÃ  kiá»ƒu nÃ y. ChÃºng Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ lÃ m viá»‡c tá»‘t trong mÃ´i trÆ°á»ng Ä‘a luá»“ng, nÆ¡i nhiá»u thá»© cÃ³ thá»ƒ thay Ä‘á»•i cÃ¹ng lÃºc mÃ  khÃ´ng lÃ m há»ng chÆ°Æ¡ng trÃ¬nh.

**TÃ³m láº¡i nhÃ©:**

*   **Fail-fast:** "KhÃ´ng! Dá»«ng láº¡i ngay! CÃ³ ngÆ°á»i Ä‘ang thay Ä‘á»•i danh sÃ¡ch!" (BÃ¡o lá»—i ngay láº­p tá»©c Ä‘á»ƒ báº¡n biáº¿t cÃ³ gÃ¬ Ä‘Ã³ sai sai).
*   **Fail-safe:** "Cá»© thoáº£i mÃ¡i Ä‘i! TÃ´i cÃ³ báº£n sao cá»§a riÃªng mÃ¬nh rá»“i!" (KhÃ´ng bÃ¡o lá»—i, nhÆ°ng cÃ³ thá»ƒ khÃ´ng tháº¥y nhá»¯ng thay Ä‘á»•i má»›i nháº¥t cá»§a báº¡n Ä‘Ã¢u).

    NÃ y báº¡n, khi dÃ¹ng Iterator trong Java, báº¡n sáº½ tháº¥y chÃºng cÃ³ hai 'kiá»ƒu tÃ­nh cÃ¡ch' khÃ¡c nhau Ä‘Ã³! ChÃºng ta gá»i lÃ  'fail-fast' hoáº·c 'fail-safe'. MÃ  cÃ¡i gÃ¬ quyáº¿t Ä‘á»‹nh chÃºng thuá»™c kiá»ƒu nÃ o Æ°? ChÃ­nh lÃ  cÃ¡ch chÃºng pháº£n á»©ng khi bá»™ sÆ°u táº­p mÃ  chÃºng Ä‘ang duyá»‡t bá»‹ thay Ä‘á»•i (kiá»ƒu nhÆ° báº¡n thÃªm hay xÃ³a pháº§n tá»­) *ngay trong lÃºc* chÃºng Ä‘ang lÃ m cÃ´ng viá»‡c láº·p Ä‘Ã³!

    **Iterator Fail-Fast (Kiá»ƒu "Tháº¥y Lá»—i LÃ  BÃ¡o Ngay"):**
    - NÃ y báº¡n! Báº¡n Ä‘Ã£ sáºµn sÃ ng chÆ°a? Giá» chÃºng ta sáº½ nÃ³i vá» má»™t Ä‘iá»u cá»±c ká»³ quan trá»ng khi cÃ¡c phÆ°Æ¡ng thá»©c (methods) cá»§a chÃºng ta gáº·p pháº£i "ráº¯c rá»‘i" mÃ  chÃºng khÃ´ng thá»ƒ tá»± giáº£i quyáº¿t.

Báº¡n cá»© hÃ¬nh dung tháº¿ nÃ y: giáº£ sá»­ báº¡n cÃ³ má»™t phÆ°Æ¡ng thá»©c tÃªn lÃ  `docFile()` (Ä‘á»c file). PhÆ°Æ¡ng thá»©c nÃ y cá»‘ gáº¯ng má»Ÿ má»™t tá»‡p tin nÃ o Ä‘Ã³. NhÆ°ng lá»¡ Ä‘Ã¢u cÃ¡i tá»‡p tin Ä‘Ã³... khÃ´ng tá»“n táº¡i thÃ¬ sao? Hoáº·c nÃ³ cÃ³ tá»“n táº¡i nhÆ°ng láº¡i cÃ³ váº¥n Ä‘á» gÃ¬ Ä‘Ã³ khi Ä‘á»c?

PhÆ°Æ¡ng thá»©c `docFile()` khÃ´ng thá»ƒ "tá»± nhiÃªn" táº¡o ra cÃ¡i file bá»‹ thiáº¿u, Ä‘Ãºng khÃ´ng? NÃ³ cÅ©ng khÃ´ng biáº¿t cÃ¡ch sá»­a lá»—i khi Ä‘á»c. NÃ³ cáº§n pháº£i bÃ¡o cho "ngÆ°á»i gá»i" nÃ³ (tá»©c lÃ  Ä‘oáº¡n code Ä‘Ã£ gá»i `docFile()`) biáº¿t ráº±ng: "NÃ y, tÃ´i Ä‘ang gáº·p ráº¯c rá»‘i Ä‘Ã¢y! TÃ´i khÃ´ng thá»ƒ tá»± xá»­ lÃ½ Ä‘Æ°á»£c. Báº¡n lo liá»‡u Ä‘i!"

VÃ  Ä‘Ã³ chÃ­nh lÃ  lÃºc tá»« khÃ³a `throws` xuáº¥t hiá»‡n, giá»‘ng nhÆ° má»™t "táº¥m biá»ƒn bÃ¡o nguy hiá»ƒm" váº­y Ä‘Ã³!

Khi báº¡n viáº¿t má»™t phÆ°Æ¡ng thá»©c mÃ  nÃ³ *cÃ³ thá»ƒ* nÃ©m ra má»™t ngoáº¡i lá»‡ (Ä‘áº·c biá»‡t lÃ  cÃ¡c loáº¡i ngoáº¡i lá»‡ "Ä‘Ã£ Ä‘Æ°á»£c kiá»ƒm tra" â€“ checked exceptions, nhá»¯ng loáº¡i mÃ  Java báº¯t báº¡n pháº£i Ä‘á»ƒ Ã½), báº¡n cáº§n pháº£i khai bÃ¡o Ä‘iá»u Ä‘Ã³ báº±ng tá»« khÃ³a `throws` ngay trong pháº§n chá»¯ kÃ½ (signature) cá»§a phÆ°Æ¡ng thá»©c.

NÃ³ sáº½ trÃ´ng giá»‘ng tháº¿ nÃ y:

```java
public void docFile() throws FileNotFoundException, IOException {
    // Äoáº¡n code Ä‘á»c file cá»§a báº¡n á»Ÿ Ä‘Ã¢y
    // Náº¿u khÃ´ng tÃ¬m tháº¥y file, nÃ³ sáº½ "nÃ©m" ra FileNotFoundException
    // Náº¿u cÃ³ lá»—i khi Ä‘á»c, nÃ³ sáº½ "nÃ©m" ra IOException
}
```

Báº¡n tháº¥y khÃ´ng? PhÆ°Æ¡ng thá»©c `docFile()` Ä‘ang "cÃ´ng khai" nÃ³i ráº±ng: "NÃ y, náº¿u báº¡n gá»i tÃ´i, hÃ£y cáº©n tháº­n nhÃ©! TÃ´i *cÃ³ thá»ƒ* nÃ©m ra `FileNotFoundException` (náº¿u khÃ´ng tÃ¬m tháº¥y file) hoáº·c `IOException` (náº¿u cÃ³ lá»—i nháº­p/xuáº¥t) Ä‘Ã³!"

Váº­y thÃ¬, khi má»™t Ä‘oáº¡n code khÃ¡c gá»i Ä‘áº¿n `docFile()`, trÃ¬nh biÃªn dá»‹ch (compiler) cá»§a Java sáº½ nhÃ¬n tháº¥y táº¥m biá»ƒn `throws` nÃ y vÃ  nháº¯c nhá»Ÿ báº¡n: "ÃŠ, phÆ°Æ¡ng thá»©c nÃ y cÃ³ thá»ƒ gÃ¢y ra lá»—i Ä‘áº¥y! Báº¡n pháº£i lÃ m gÃ¬ Ä‘Ã³ vá»›i nÃ³ Ä‘i! Hoáº·c lÃ  báº¡n pháº£i `try-catch` Ä‘á»ƒ 'báº¯t' vÃ  xá»­ lÃ½ lá»—i Ä‘Ã³, hoáº·c lÃ  báº¡n cÅ©ng pháº£i `throws` nÃ³ lÃªn trÃªn ná»¯a (Ä‘á»ƒ ngÆ°á»i gá»i báº¡n xá»­ lÃ½)!"

**TÃ³m láº¡i:**
`throws` khÃ´ng pháº£i lÃ  tá»« Ä‘á»ƒ "nÃ©m" má»™t ngoáº¡i lá»‡ ngay láº­p tá»©c. MÃ  nÃ³ lÃ  cÃ¡ch má»™t phÆ°Æ¡ng thá»©c **khai bÃ¡o** vá»›i tháº¿ giá»›i ráº±ng nÃ³ *cÃ³ kháº£ nÄƒng* nÃ©m ra má»™t sá»‘ loáº¡i ngoáº¡i lá»‡ nháº¥t Ä‘á»‹nh. NÃ³ giá»‘ng nhÆ° viá»‡c báº¡n nÃ³i: "TÃ´i cÃ³ thá»ƒ gáº·p pháº£i váº¥n Ä‘á» nÃ y, váº­y nÃªn báº¡n, ngÆ°á»i gá»i tÃ´i, hÃ£y chuáº©n bá»‹ tinh tháº§n mÃ  xá»­ lÃ½ Ä‘i nhÃ©!" `ConcurrentModificationException` Náº¿u cÃ¡i 'táº­p há»£p' (collection) cá»§a báº¡n bá»‹ 'thay Ä‘á»•i' (kiá»ƒu nhÆ° thÃªm vÃ o hay xÃ³a bá»›t Ä‘i) ngay trong lÃºc báº¡n Ä‘ang 'duyá»‡t' qua tá»«ng pháº§n tá»­ cá»§a nÃ³...
    - LÃ m viá»‡c ngay trÃªn **collection gá»‘c**!
    - ### `ArrayList` Iterators

NÃ y, báº¡n cÃ²n nhá»› `ArrayList` chá»©? NÃ³ giá»‘ng nhÆ° má»™t cÃ¡i vali siÃªu co giÃ£n Ä‘á»ƒ Ä‘á»±ng Ä‘á»“ áº¥y. Báº¡n cÃ³ thá»ƒ thÃªm vÃ o bao nhiÃªu mÃ³n tÃ¹y thÃ­ch, vÃ  chÃºng sáº½ Ä‘Æ°á»£c giá»¯ theo thá»© tá»± báº¡n cho vÃ o.

Giá» thÃ¬ sao náº¿u báº¡n muá»‘n lÃ´i tá»«ng mÃ³n Ä‘á»“ ra xem vÃ  *cÃ³ thá»ƒ* vá»©t bá»›t Ä‘i vÃ i mÃ³n mÃ  khÃ´ng lÃ m há»ng cáº£ cÃ¡i vali nhá»‰? Báº¡n cáº§n má»™t 'ngÆ°á»i hÆ°á»›ng dáº«n' Ä‘áº·c biá»‡t Ä‘á»ƒ giÃºp báº¡n duyá»‡t qua `ArrayList` má»™t cÃ¡ch an toÃ n. NgÆ°á»i Ä‘Ã³ chÃ­nh lÃ  `Iterator`!

**1. Láº¥y `Iterator` tá»« `ArrayList`**

Äáº§u tiÃªn, báº¡n cáº§n yÃªu cáº§u `ArrayList` cá»§a mÃ¬nh Ä‘Æ°a cho báº¡n má»™t `Iterator`.

```java
import java.util.ArrayList;
import java.util.Iterator; // Äá»«ng quÃªn import Iterator nhÃ©!

public class ArrayListIteratorDemo {
    public static void main(String[] args) {
        ArrayList<String> danhSachMonAn = new ArrayList<>();
        danhSachMonAn.add("Phá»Ÿ");
        danhSachMonAn.add("BÃºn cháº£");
        danhSachMonAn.add("Nem rÃ¡n");
        danhSachMonAn.add("CÆ¡m táº¥m");

        // ÄÃ¢y rá»“i, ngÆ°á»i hÆ°á»›ng dáº«n cá»§a báº¡n!
        // NÃ³ biáº¿t cÃ¡ch Ä‘i qua tá»«ng mÃ³n trong danh sÃ¡ch.
        Iterator<String> it = danhSachMonAn.iterator(); 
    }
}
```

**2. Duyá»‡t qua `ArrayList` vá»›i `hasNext()` vÃ  `next()`**

NgÆ°á»i hÆ°á»›ng dáº«n (`Iterator`) nÃ y cÃ³ hai cÃ¢u há»i quan trá»ng Ä‘á»ƒ báº¡n dÃ¹ng:

*   `hasNext()`: "CÃ²n mÃ³n nÃ o ná»¯a khÃ´ng?" (NÃ³ tráº£ vá» `true` náº¿u cÃ²n, `false` náº¿u háº¿t rá»“i.)
*   `next()`: "ÄÆ°a tÃ´i mÃ³n tiáº¿p theo!" (NÃ³ sáº½ tráº£ vá» mÃ³n Ä‘Ã³ cho báº¡n.)

Báº¡n sáº½ dÃ¹ng chÃºng trong má»™t vÃ²ng láº·p `while` Ä‘á»ƒ Ä‘i qua táº¥t cáº£ cÃ¡c mÃ³n.

```java
import java.util.ArrayList;
import java.util.Iterator;

public class ArrayListIteratorDemo {
    public static void main(String[] args) {
        ArrayList<String> danhSachMonAn = new ArrayList<>();
        danhSachMonAn.add("Phá»Ÿ");
        danhSachMonAn.add("BÃºn cháº£");
        danhSachMonAn.add("Nem rÃ¡n");
        danhSachMonAn.add("CÆ¡m táº¥m");

        Iterator<String> it = danhSachMonAn.iterator(); 

        System.out.println("CÃ¡c mÃ³n Äƒn trong danh sÃ¡ch cá»§a báº¡n:");
        while (it.hasNext()) { // Chá»«ng nÃ o cÃ²n mÃ³n Äƒn...
            String monAn = it.next(); // ...thÃ¬ láº¥y ra mÃ³n tiáº¿p theo
            System.out.println("- " + monAn);
        }
        // Sau vÃ²ng láº·p nÃ y, iterator Ä‘Ã£ Ä‘i háº¿t danh sÃ¡ch rá»“i.
    }
}
```

**3. XÃ³a má»™t mÃ³n Ä‘á»“ an toÃ n vá»›i `remove()`**

Äiá»u tuyá»‡t vá»i lÃ , náº¿u báº¡n muá»‘n vá»©t bá» mÃ³n vá»«a xem xong (tá»©c lÃ  mÃ³n mÃ  `next()` vá»«a tráº£ vá»), báº¡n cÃ³ thá»ƒ báº£o ngÆ°á»i hÆ°á»›ng dáº«n lÃ m Ä‘iá»u Ä‘Ã³ an toÃ n báº±ng cÃ¡ch gá»i `it.remove()`.

```java
import java.util.ArrayList;
import java.util.Iterator;

public class ArrayListIteratorDemo {
    public static void main(String[] args) {
        ArrayList<String> danhSachMonAn = new ArrayList<>();
        danhSachMonAn.add("Phá»Ÿ");
        danhSachMonAn.add("BÃºn cháº£");
        danhSachMonAn.add("Nem rÃ¡n");
        danhSachMonAn.add("CÆ¡m táº¥m");

        System.out.println("Danh sÃ¡ch gá»‘c: " + danhSachMonAn);

        Iterator<String> it = danhSachMonAn.iterator(); 
        
        while (it.hasNext()) {
            String monAn = it.next(); // Láº¥y mÃ³n tiáº¿p theo ra xem
            System.out.println("Äang xem mÃ³n: " + monAn);

            if (monAn.equals("Nem rÃ¡n")) {
                it.remove(); // A ha! KhÃ´ng thÃ­ch Nem rÃ¡n ná»¯a, vá»©t Ä‘i!
                System.out.println("  -> ÄÃ£ xÃ³a 'Nem rÃ¡n'!");
            }
        }
        System.out.println("Danh sÃ¡ch sau khi xÃ³a Nem rÃ¡n: " + danhSachMonAn);
    }
}
```
**Táº¡i sao khÃ´ng dÃ¹ng `for-each` Ä‘á»ƒ xÃ³a?**
Náº¿u báº¡n cá»‘ gáº¯ng xÃ³a má»™t pháº§n tá»­ khá»i `ArrayList` trong khi Ä‘ang dÃ¹ng vÃ²ng láº·p `for-each` (kiá»ƒu `for (String item : myList)`), Java sáº½ ná»•i giáº­n vÃ  nÃ©m ra lá»—i `ConcurrentModificationException`. `Iterator` Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘áº·c biá»‡t Ä‘á»ƒ xá»­ lÃ½ viá»‡c xÃ³a pháº§n tá»­ má»™t cÃ¡ch an toÃ n trong khi duyá»‡t qua táº­p há»£p Ä‘Ã³.

---

### `HashMap` Iterators

`HashMap` thÃ¬ sao? NÃ³ giá»‘ng nhÆ° má»™t cuá»‘n sá»• ghi chÃº, má»—i trang cÃ³ má»™t 'tá»« khÃ³a' (key) vÃ  má»™t 'ghi chÃº' (value) tÆ°Æ¡ng á»©ng. LÃ m sao Ä‘á»ƒ láº­t tá»«ng trang vÃ  xem cáº£ tá»« khÃ³a láº«n ghi chÃº Ä‘Ã¢y?

`HashMap` khÃ´ng cÃ³ `iterator()` trá»±c tiáº¿p nhÆ° `ArrayList` vÃ¬ nÃ³ lÆ°u trá»¯ dá»¯ liá»‡u theo cáº·p `key-value`. Äá»ƒ duyá»‡t qua nÃ³, báº¡n cáº§n láº¥y ra má»™t táº­p há»£p cÃ¡c `key`, `value`, hoáº·c cÃ¡c cáº·p `key-value` (gá»i lÃ  `Entry`) trÆ°á»›c Ä‘Ã£.

**1. Duyá»‡t qua cÃ¡c cáº·p `key-value` (`Entry`)**

ÄÃ¢y lÃ  cÃ¡ch phá»• biáº¿n nháº¥t vÃ  máº¡nh máº½ nháº¥t khi báº¡n muá»‘n cáº£ `key` vÃ  `value`.
Báº¡n sáº½ láº¥y ra má»™t `Set` cá»§a cÃ¡c `Map.Entry` (tá»©c lÃ  cÃ¡c cáº·p `key-value`), rá»“i tá»« Ä‘Ã³ má»›i láº¥y `Iterator`.

```java
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map; // Cáº§n import Map Ä‘á»ƒ dÃ¹ng Map.Entry

public class HashMapIteratorDemo {
    public static void main(String[] args) {
        HashMap<String, String> tuDien = new HashMap<>();
        tuDien.put("Hello", "Xin chÃ o");
        tuDien.put("World", "Tháº¿ giá»›i");
        tuDien.put("Java", "Má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh");

        System.out.println("Tá»« Ä‘iá»ƒn gá»‘c: " + tuDien);

        // BÆ°á»›c 1: Láº¥y ra má»™t táº­p há»£p cÃ¡c 'cáº·p' (Entry) key-value tá»« HashMap
        // Má»—i Entry lÃ  má»™t Map.Entry<String, String>
        Iterator<Map.Entry<String, String>> it = tuDien.entrySet().iterator(); 

        System.out.println("\nÄang duyá»‡t tá»« Ä‘iá»ƒn:");
        while (it.hasNext()) {
            Map.Entry<String, String> capTu = it.next(); // Láº¥y ra má»™t cáº·p key-value
            System.out.println("Tá»«: " + capTu.getKey() + ", NghÄ©a: " + capTu.getValue());

            // Báº¡n cÅ©ng cÃ³ thá»ƒ xÃ³a má»™t cáº·p key-value á»Ÿ Ä‘Ã¢y!
            if (capTu.getKey().equals("Java")) {
                it.remove(); // XÃ³a cáº·p "Java" - "Má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh"
                System.out.println("  -> ÄÃ£ xÃ³a tá»« 'Java'!");
            }
        }
        System.out.println("Tá»« Ä‘iá»ƒn sau khi xÃ³a 'Java': " + tuDien);
    }
}
```

**2. Duyá»‡t qua chá»‰ cÃ¡c `key`**

Náº¿u báº¡n chá»‰ quan tÃ¢m Ä‘áº¿n cÃ¡c tá»« khÃ³a (keys) thÃ´i, báº¡n cÃ³ thá»ƒ láº¥y `Set` cá»§a cÃ¡c `key` tá»« `keySet()` vÃ  táº¡o `Iterator` tá»« Ä‘Ã³. Khi báº¡n dÃ¹ng `remove()` trÃªn `Iterator` nÃ y, nÃ³ sáº½ xÃ³a cáº£ cáº·p `key-value` tÆ°Æ¡ng á»©ng khá»i `HashMap`.

```java
import java.util.HashMap;
import java.util.Iterator;

public class HashMapKeyIteratorDemo {
    public static void main(String[] args) {
        HashMap<Integer, String> danhSachHocSinh = new HashMap<>();
        danhSachHocSinh.put(101, "Nguyá»…n VÄƒn A");
        danhSachHocSinh.put(102, "Tráº§n Thá»‹ B");
        danhSachHocSinh.put(103, "LÃª VÄƒn C");

        System.out.println("Danh sÃ¡ch há»c sinh gá»‘c: " + danhSachHocSinh);

        // Láº¥y Iterator cho táº­p há»£p cÃ¡c mÃ£ sá»‘ há»c sinh (keys)
        Iterator<Integer> keyIt = danhSachHocSinh.keySet().iterator();

        System.out.println("\nÄang duyá»‡t qua cÃ¡c mÃ£ sá»‘ há»c sinh:");
        while (keyIt.hasNext()) {
            Integer maSo = keyIt.next();
            System.out.println("MÃ£ sá»‘: " + maSo);

            if (maSo == 102) {
                keyIt.remove(); // XÃ³a há»c sinh cÃ³ mÃ£ sá»‘ 102 (cáº£ key vÃ  value)
                System.out.println("  -> ÄÃ£ xÃ³a há»c sinh cÃ³ mÃ£ sá»‘ 102!");
            }
        }
        System.out.println("Danh sÃ¡ch sau khi xÃ³a há»c sinh 102: " + danhSachHocSinh);
    }
}
```

**3. Duyá»‡t qua chá»‰ cÃ¡c `value`**

TÆ°Æ¡ng tá»±, báº¡n cÃ³ thá»ƒ láº¥y `Collection` cá»§a cÃ¡c `value` tá»« `values()` vÃ  táº¡o `Iterator`. Khi báº¡n dÃ¹ng `remove()` trÃªn `Iterator` nÃ y, nÃ³ cÅ©ng sáº½ xÃ³a cáº£ cáº·p `key-value` tÆ°Æ¡ng á»©ng khá»i `HashMap`.

```java
import java.util.HashMap;
import java.util.Iterator;

public class HashMapValueIteratorDemo {
    public static void main(String[] args) {
        HashMap<String, Double> giaMonHang = new HashMap<>();
        giaMonHang.put("Ão phÃ´ng", 150.000);
        giaMonHang.put("Quáº§n jean", 300.000);
        giaMonHang.put("GiÃ y thá»ƒ thao", 500.000);

        System.out.println("GiÃ¡ cÃ¡c mÃ³n hÃ ng gá»‘c: " + giaMonHang);

        // Láº¥y Iterator cho táº­p há»£p cÃ¡c giÃ¡ trá»‹ (values)
        Iterator<Double> valueIt = giaMonHang.values().iterator();

        System.out.println("\nÄang duyá»‡t qua cÃ¡c má»©c giÃ¡:");
        while (valueIt.hasNext()) {
            Double gia = valueIt.next();
            System.out.println("GiÃ¡: " + gia + " VNÄ");

            if (gia > 200.000) {
                valueIt.remove(); // XÃ³a mÃ³n hÃ ng cÃ³ giÃ¡ trá»‹ lá»›n hÆ¡n 200.000
                System.out.println("  -> ÄÃ£ xÃ³a má»™t mÃ³n hÃ ng cÃ³ giÃ¡ > 200.000 VNÄ!");
            }
        }
        System.out.println("GiÃ¡ cÃ¡c mÃ³n hÃ ng sau khi lá»c: " + giaMonHang);
    }
}
```

---

### `HashSet` Iterators

`HashSet` thÃ¬ sao? NÃ³ giá»‘ng nhÆ° má»™t cÃ¡i giá» Ä‘á»±ng Ä‘á»“ chÆ¡i, nhÆ°ng má»—i mÃ³n Ä‘á»“ chÆ¡i chá»‰ Ä‘Æ°á»£c cÃ³ má»™t láº§n thÃ´i (khÃ´ng trÃ¹ng láº·p!). VÃ  thá»© tá»± cá»§a cÃ¡c mÃ³n Ä‘á»“ chÆ¡i trong giá» cÅ©ng khÃ´ng quan trá»ng.

CÃ¡ch láº¥y `Iterator` cho `HashSet` cÅ©ng ráº¥t Ä‘Æ¡n giáº£n, y há»‡t nhÆ° `ArrayList` váº­y, vÃ¬ `HashSet` cÅ©ng lÃ  má»™t loáº¡i `Collection` chá»©a cÃ¡c pháº§n tá»­ Ä‘Æ¡n láº».

**1. Láº¥y `Iterator` tá»« `HashSet`**

```java
import java.util.HashSet;
import java.util.Iterator; // Äá»«ng quÃªn import Iterator

public class HashSetIteratorDemo {
    public static void main(String[] args) {
        HashSet<String> monDoChoi = new HashSet<>();
        monDoChoi.add("Xe Ã´ tÃ´");
        monDoChoi.add("BÃºp bÃª");
        monDoChoi.add("Gáº¥u bÃ´ng");
        monDoChoi.add("Xe Ã´ tÃ´"); // CÃ¡i nÃ y sáº½ khÃ´ng Ä‘Æ°á»£c thÃªm vÃ o vÃ¬ Ä‘Ã£ cÃ³ rá»“i!

        System.out.println("Giá» Ä‘á»“ chÆ¡i gá»‘c: " + monDoChoi);

        // Láº¥y ngÆ°á»i hÆ°á»›ng dáº«n Ä‘á»ƒ duyá»‡t qua cÃ¡c mÃ³n Ä‘á»“ chÆ¡i!
        Iterator<String> it = monDoChoi.iterator(); 
    }
}
```

**2. Duyá»‡t qua `HashSet` vá»›i `hasNext()` vÃ  `next()`**

CÅ©ng giá»‘ng nhÆ° `ArrayList`, báº¡n dÃ¹ng `hasNext()` vÃ  `next()` trong vÃ²ng láº·p `while`.

```java
import java.util.HashSet;
import java.util.Iterator;

public class HashSetIteratorDemo {
    public static void main(String[] args) {
        HashSet<String> monDoChoi = new HashSet<>();
        monDoChoi.add("Xe Ã´ tÃ´");
        monDoChoi.add("BÃºp bÃª");
        monDoChoi.add("Gáº¥u bÃ´ng");

        Iterator<String> it = monDoChoi.iterator(); 

        System.out.println("Trong giá» cÃ³ nhá»¯ng mÃ³n Ä‘á»“ chÆ¡i sau:");
        while (it.hasNext()) {
            String doChoi = it.next();
            System.out.println("- " + doChoi);
        }
    }
}
```

**3. XÃ³a má»™t mÃ³n Ä‘á»“ an toÃ n vá»›i `remove()`**

Báº¡n cÅ©ng cÃ³ thá»ƒ dÃ¹ng `remove()` Ä‘á»ƒ xÃ³a mÃ³n Ä‘á»“ chÆ¡i vá»«a Ä‘Æ°á»£c `next()` tráº£ vá».

```java
import java.util.HashSet;
import java.util.Iterator;

public class HashSetIteratorDemo {
    public static void main(String[] args) {
        HashSet<String> monDoChoi = new HashSet<>();
        monDoChoi.add("Xe Ã´ tÃ´");
        monDoChoi.add("BÃºp bÃª");
        monDoChoi.add("Gáº¥u bÃ´ng");
        monDoChoi.add("Robot");

        System.out.println("Giá» Ä‘á»“ chÆ¡i gá»‘c: " + monDoChoi);

        Iterator<String> it = monDoChoi.iterator(); 
        
        while (it.hasNext()) {
            String doChoi = it.next();
            System.out.println("Äang xem mÃ³n: " + doChoi);

            if (doChoi.equals("BÃºp bÃª")) {
                it.remove(); // Vá»©t bÃºp bÃª ra khá»i giá»!
                System.out.println("  -> ÄÃ£ vá»©t 'BÃºp bÃª'!");
            }
        }
        System.out.println("Giá» Ä‘á»“ chÆ¡i sau khi vá»©t bÃºp bÃª: " + monDoChoi);
    }
}
```
    - Váº­y, mÃ¬nh dÃ¹ng nÃ³ Ä‘á»ƒ lÃ m gÃ¬? `modCount` Äá»ƒ *tÃ¬m ra* nhá»¯ng thay Ä‘á»•i.

    ```java
    import java.util.*;

    public class FailFastExample {
        public static void main(String[] args) {
            List<String> list = new ArrayList<>();
            list.add("A");
            list.add("B");
            list.add("C");
            
            Iterator<String> iterator = list.iterator();
            while (iterator.hasNext()) {
                String element = iterator.next();
                if (element.equals("B")) {
                    list.remove(element); // Throws ConcurrentModificationException
                }
            }
        }
    }
    ```

    **Bá»™ láº·p "chá»‘ng lá»—i" (Fail-Safe Iterator):**
    - NÃ y báº¡n Æ¡i, hÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©!

1.  **Báº¡n Ä‘ang duyá»‡t qua má»™t danh sÃ¡ch (hay cÃ²n gá»i lÃ  'táº­p há»£p' - collection).**
    *   Kiá»ƒu nhÆ° báº¡n Ä‘ang Ä‘i qua tá»«ng mÃ³n Ä‘á»“ trong giá» hÃ ng váº­y. Báº¡n xem mÃ³n nÃ y, rá»“i Ä‘áº¿n mÃ³n kia.
    *   Trong láº­p trÃ¬nh, mÃ¬nh gá»i hÃ nh Ä‘á»™ng nÃ y lÃ  'láº·p' (iteration) Ä‘Ã³. Báº¡n Ä‘ang 'láº·p' qua tá»«ng pháº§n tá»­ cá»§a táº­p há»£p.

2.  **BÃ¢y giá», chuyá»‡n gÃ¬ xáº£y ra náº¿u...**
    *   ...Ä‘Ãºng lÃºc báº¡n Ä‘ang 'láº·p' (Ä‘ang xem tá»«ng mÃ³n Ä‘á»“)...
    *   ...mÃ  ai Ä‘Ã³ láº¡i 'thay Ä‘á»•i' cÃ¡i danh sÃ¡ch Ä‘Ã³?
    *   Tá»©c lÃ , há» thÃªm má»™t mÃ³n Ä‘á»“ má»›i vÃ o, hoáº·c xÃ³a bá»›t má»™t mÃ³n Ä‘á»“ Ä‘i.

3.  **ThÃ´ng thÆ°á»ng, trong Java, Ä‘iá»u nÃ y cÃ³ thá»ƒ gÃ¢y ráº¯c rá»‘i Ä‘áº¥y!**
    *   Vá»›i nhiá»u loáº¡i táº­p há»£p quen thuá»™c, náº¿u báº¡n lÃ m tháº¿, chÆ°Æ¡ng trÃ¬nh sáº½ 'kÃªu lÃªn' má»™t tiáº¿ng 'OÃ¡i!'
    *   NÃ³ sáº½ 'nÃ©m ra má»™t ngoáº¡i lá»‡' (throw an exception) â€“ kiá»ƒu nhÆ° bÃ¡o lá»—i, khÃ´ng cho báº¡n lÃ m tháº¿ Ä‘Ã¢u. NÃ³ muá»‘n má»i thá»© tháº­t rÃµ rÃ ng khi báº¡n Ä‘ang duyá»‡t.

4.  **NHÆ¯NG! Vá»›i loáº¡i táº­p há»£p mÃ  chÃºng ta Ä‘ang nÃ³i tá»›i Ä‘Ã¢y thÃ¬ khÃ¡c nha!**
    *   Náº¿u báº¡n Ä‘ang 'láº·p' qua nÃ³...
    *   ...mÃ  báº¡n láº¡i 'thay Ä‘á»•i' nÃ³ (thÃªm hay xÃ³a pháº§n tá»­)...
    *   ...thÃ¬ CÃš Sá»C! ChÆ°Æ¡ng trÃ¬nh sáº½ **KHÃ”NG Há»€ NÃ‰M RA Má»˜T NGOáº I Lá»† NÃ€O Cáº¢!**
    *   NÃ³ cá»© tháº¿ tiáº¿p tá»¥c cÃ´ng viá»‡c cá»§a mÃ¬nh, khÃ´ng má»™t lá»i than phiá»n.
    *   Kiá»ƒu nhÆ° nÃ³ 'máº·c ká»‡' báº¡n thay Ä‘á»•i váº­y Ä‘Ã³. Äiá»u nÃ y Ä‘Ã´i khi ráº¥t tiá»‡n lá»£i, nhÆ°ng báº¡n cÅ©ng cáº§n hiá»ƒu rÃµ Ä‘á»ƒ trÃ¡nh nhá»¯ng báº¥t ngá» khÃ´ng mong muá»‘n nhÃ©!
    - NÃ y, tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t bá»™ sÆ°u táº­p dá»¯ liá»‡u (collection) Ä‘Ãºng khÃ´ng?

Khi báº¡n dÃ¹ng cÃ¡i nÃ y, nÃ³ sáº½ khÃ´ng "Ä‘á»¥ng" vÃ o báº£n gá»‘c cá»§a bá»™ sÆ°u táº­p Ä‘Ã³ Ä‘Ã¢u.

Thay vÃ o Ä‘Ã³, nÃ³ sáº½ táº¡o ra má»™t "báº£n sao y há»‡t" (hay cÃ²n gá»i lÃ  clone/copy) cá»§a bá»™ sÆ°u táº­p Ä‘Ã³ trÆ°á»›c.

VÃ  má»i thá»© sáº½ Ä‘Æ°á»£c thá»±c hiá»‡n trÃªn chÃ­nh cÃ¡i báº£n sao nÃ y.

YÃªn tÃ¢m nhÃ©, báº£n gá»‘c cá»§a báº¡n váº«n cÃ²n nguyÃªn váº¹n, khÃ´ng há» bá»‹ thay Ä‘á»•i chÃºt nÃ o!
    - VÃ­ dá»¥ nhÃ©: báº¡n sáº½ gáº·p chÃºng á»Ÿ Ä‘Ã¢u Ä‘Ã³ nhÆ° `CopyOnWriteArrayList` hoáº·c cÃ¡c iterator cá»§a `ConcurrentHashMap`.
    - Coi chá»«ng! Báº¡n sáº½ pháº£i tá»‘n *thÃªm bá»™ nhá»›* Ä‘áº¥y.
Táº¡i sao Æ°?
ÄÆ¡n giáº£n lÃ  vÃ¬ nÃ³ cá»© pháº£i *sao chÃ©p* dá»¯ liá»‡u!

    ```java
    import java.util.concurrent.*;
    import java.util.*;

    public class FailSafeExample {
        public static void main(String[] args) {
            CopyOnWriteArrayList<String> list = new CopyOnWriteArrayList<>();
            list.add("A");
            list.add("B");
            list.add("C");
            
            Iterator<String> iterator = list.iterator();
            while (iterator.hasNext()) {
                String element = iterator.next();
                if (element.equals("B")) {
                    list.remove(element); // No exception thrown
                }
            }
            System.out.println(list); // [A, C]
        }
    }
    ```

    | Fail-Fast | Fail-Safe |
|---|---|
| NÃ y báº¡n, hÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©: báº¡n Ä‘ang lÃ m má»™t mÃ³n Äƒn, vÃ  báº¡n lá»¡ tay cho nháº§m muá»‘i vÃ o thay vÃ¬ Ä‘Æ°á»ng. Náº¿u báº¡n dÃ¹ng phÆ°Æ¡ng phÃ¡p **Fail-Fast**, thÃ¬ ngay khi báº¡n náº¿m thá»­ má»™t chÃºt vÃ  tháº¥y *Ã´i khÃ´ng, máº·n chÃ¡t!*, báº¡n sáº½ dá»«ng láº¡i **ngay láº­p tá»©c** vÃ  khÃ´ng cho thÃªm báº¥t cá»© thá»© gÃ¬ vÃ o ná»¯a. <br><br> Má»¥c tiÃªu lÃ  gÃ¬? PhÃ¡t hiá»‡n lá»—i **cÃ ng sá»›m cÃ ng tá»‘t** vÃ  dá»«ng má»i thá»© láº¡i. NÃ³ giá»‘ng nhÆ° má»™t cáº§u dao Ä‘iá»‡n tá»± Ä‘á»™ng ngáº¯t ngay láº­p tá»©c khi cÃ³ sá»± cá»‘ cháº­p Ä‘iá»‡n. <br><br> Táº¡i sao láº¡i lÃ m váº­y? Äá»ƒ trÃ¡nh má»i thá»© trá»Ÿ nÃªn tá»“i tá»‡ hÆ¡n. Lá»—i Ä‘Æ°á»£c tÃ¬m tháº¥y nhanh hÆ¡n, dá»… sá»­a hÆ¡n vÃ¬ nÃ³ khÃ´ng "lÃ¢y lan" ra cÃ¡c pháº§n khÃ¡c cá»§a chÆ°Æ¡ng trÃ¬nh. Ráº¥t tá»‘t cho viá»‡c tÃ¬m vÃ  sá»­a lá»—i Ä‘Ã³! | Giá» thÃ¬ hÃ£y nghÄ© vá» má»™t tÃ¬nh huá»‘ng khÃ¡c vá»›i mÃ³n Äƒn Ä‘Ã³. Giáº£ sá»­ báº¡n Ä‘ang lÃ m bÃ¡nh vÃ  lÃ² nÆ°á»›ng bá»—ng dÆ°ng bá»‹ há»ng má»™t pháº§n, nÃ³ khÃ´ng nÃ³ng Ä‘á»u ná»¯a. <br><br> Náº¿u Ã¡p dá»¥ng **Fail-Safe**, thÃ¬ thay vÃ¬ dá»«ng láº¡i hoÃ n toÃ n, báº¡n sáº½ tÃ¬m cÃ¡ch **tiáº¿p tá»¥c** nÆ°á»›ng, cÃ³ thá»ƒ lÃ  báº¡n sáº½ pháº£i xoay bÃ¡nh thÆ°á»ng xuyÃªn hÆ¡n, hoáº·c nÆ°á»›ng lÃ¢u hÆ¡n má»™t chÃºt, Ä‘á»ƒ cá»‘ gáº¯ng hoÃ n thÃ nh cÃ¡i bÃ¡nh. <br><br> Má»¥c tiÃªu lÃ  gÃ¬? DÃ¹ cÃ³ lá»—i xáº£y ra, há»‡ thá»‘ng váº«n **cá»‘ gáº¯ng tiáº¿p tá»¥c hoáº¡t Ä‘á»™ng**, dÃ¹ cÃ³ thá»ƒ khÃ´ng hoÃ n háº£o 100% hay hiá»‡u quáº£ nhÆ° bÃ¬nh thÆ°á»ng. NÃ³ giá»‘ng nhÆ° má»™t chiáº¿c mÃ¡y bay váº«n cÃ³ thá»ƒ háº¡ cÃ¡nh an toÃ n dÃ¹ má»™t Ä‘á»™ng cÆ¡ bá»‹ há»ng. <br><br> Táº¡i sao? Äá»ƒ Ä‘áº£m báº£o ráº±ng dá»‹ch vá»¥ khÃ´ng bá»‹ giÃ¡n Ä‘oáº¡n hoÃ n toÃ n. ThÃ  hoáº¡t Ä‘á»™ng cháº­m hoáº·c kÃ©m hiá»‡u quáº£ má»™t chÃºt cÃ²n hÆ¡n lÃ  dá»«ng háº³n, Ä‘Ãºng khÃ´ng? |
    |-----------|-----------|
    | Báº¡n sáº½ gáº·p lá»—i `ConcurrentModificationException`! | KhÃ´ng cÃ³ lá»—i nÃ o Ä‘Æ°á»£c nÃ©m ra cáº£! |
    | NÃ³ cÃ³ "Ä‘á»¥ng cháº¡m" gÃ¬ Ä‘áº¿n bá»™ sÆ°u táº­p Gá»C khÃ´ng? | Hay nÃ³ chá»‰ lÃ m viá»‡c vá»›i Báº¢N SAO thÃ´i? |
    | **Ãt tá»‘n bá»™ nhá»› phá»¥** hÆ¡n nÃ¨! | **Tá»‘n bá»™ nhá»› phá»¥ nhiá»u hÆ¡n** má»™t chÃºt! |
    | ArrayList, HashMap, HashSet (Khi báº¡n lÃ m viá»‡c má»™t mÃ¬nh...) | CopyOnWriteArrayList, ConcurrentHashMap (Khi cáº£ há»™i cÃ¹ng lÃ m viá»‡c!) |

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

31. ### Tiáº¿n trÃ¬nh (Process) vÃ  Luá»“ng (Thread) khÃ¡c nhau chá»— nÃ o nhá»‰? CÃ¹ng tÃ¬m hiá»ƒu nhÃ©!

Báº¡n cÃ³ bao giá» má»Ÿ nhiá»u á»©ng dá»¥ng trÃªn mÃ¡y tÃ­nh chÆ°a? VÃ­ dá»¥ nhÆ° trÃ¬nh duyá»‡t web, Word, má»™t game nÃ o Ä‘Ã³? Äá»ƒ hiá»ƒu sá»± khÃ¡c biá»‡t nÃ y, hÃ£y cÃ¹ng hÃ¬nh dung má»™t chÃºt nhÃ©!

### Tiáº¿n trÃ¬nh (Process) lÃ  gÃ¬?

*   Má»—i khi báº¡n cháº¡y má»™t á»©ng dá»¥ng (nhÆ° Chrome, Word, hay má»™t trÃ² chÆ¡i), há»‡ Ä‘iá»u hÃ nh sáº½ táº¡o ra má»™t cÃ¡i gÃ¬ Ä‘Ã³ gá»i lÃ  **Tiáº¿n trÃ¬nh (Process)**.
*   HÃ£y tÆ°á»Ÿng tÆ°á»£ng má»—i Process nhÆ° má»™t **ngÃ´i nhÃ  riÃªng biá»‡t, Ä‘á»™c láº­p** trÃªn mÃ¡y tÃ­nh cá»§a báº¡n.
*   Má»—i ngÃ´i nhÃ  nÃ y cÃ³ **Ä‘á»“ Ä‘áº¡c riÃªng** cá»§a nÃ³: bá»™ nhá»› riÃªng, cÃ¡c file riÃªng, tÃ i nguyÃªn riÃªng (nhÆ° á»• Ä‘Ä©a, card máº¡ng, v.v.). KhÃ´ng ai chia sáº» Ä‘á»“ Ä‘áº¡c vá»›i ai cáº£!
*   VÃ­ dá»¥: TrÃ¬nh duyá»‡t Chrome cá»§a báº¡n lÃ  má»™t Process. Game báº¡n Ä‘ang chÆ¡i lÃ  má»™t Process khÃ¡c. ChÃºng hoáº¡t Ä‘á»™ng hoÃ n toÃ n riÃªng biá»‡t.
*   Táº¡o ra má»™t Process má»›i hÆ¡i "náº·ng ná»" má»™t chÃºt, vÃ¬ há»‡ thá»‘ng pháº£i chuáº©n bá»‹ cáº£ má»™t "ngÃ´i nhÃ " má»›i toanh vá»›i Ä‘áº§y Ä‘á»§ Ä‘á»“ Ä‘áº¡c cho nÃ³.

### Luá»“ng (Thread) lÃ  gÃ¬?

*   BÃ¢y giá», hÃ£y nghÄ© xem, trong má»™t ngÃ´i nhÃ  (má»™t Process) cÃ³ thá»ƒ cÃ³ **nhiá»u ngÆ°á»i cÃ¹ng lÃ m viá»‡c** khÃ´ng?
*   ÄÃºng váº­y! Má»—i "ngÆ°á»i lÃ m viá»‡c" Ä‘Ã³ chÃ­nh lÃ  má»™t **Luá»“ng (Thread)**.
*   CÃ¡c Luá»“ng nÃ y **sá»‘ng chung trong Má»˜T ngÃ´i nhÃ  (Má»˜T Process)**.
*   VÃ  vÃ¬ sá»‘ng chung nhÃ , chÃºng **chia sáº» Táº¤T Cáº¢ Ä‘á»“ Ä‘áº¡c** cá»§a ngÃ´i nhÃ  Ä‘Ã³ (chia sáº» bá»™ nhá»›, cÃ¡c file, tÃ i nguyÃªn cá»§a Process máº¹).
*   VÃ­ dá»¥: Trong Process cá»§a Word, má»™t Luá»“ng cÃ³ thá»ƒ lo viá»‡c kiá»ƒm tra chÃ­nh táº£, má»™t Luá»“ng khÃ¡c lo tá»± Ä‘á»™ng lÆ°u bÃ i, vÃ  má»™t Luá»“ng khÃ¡c ná»¯a xá»­ lÃ½ nhá»¯ng gÃ¬ báº¡n Ä‘ang gÃµ. Táº¥t cáº£ chÃºng Ä‘á»u lÃ m viá»‡c trong "ngÃ´i nhÃ " Word Ä‘Ã³.
*   Táº¡o ra má»™t Luá»“ng má»›i thÃ¬ "nháº¹ nhÃ ng" hÆ¡n nhiá»u. Giá»‘ng nhÆ° báº¡n chá»‰ cáº§n má»i thÃªm má»™t ngÆ°á»i vÃ o lÃ m viá»‡c trong ngÃ´i nhÃ  Ä‘Ã£ cÃ³ sáºµn thÃ´i, khÃ´ng cáº§n xÃ¢y nhÃ  má»›i!

### Váº­y, sá»± khÃ¡c biá»‡t Lá»šN nháº¥t lÃ  gÃ¬?

*   **Tiáº¿n trÃ¬nh (Process):**
    *   LÃ  má»™t **chÆ°Æ¡ng trÃ¬nh Ä‘á»™c láº­p** Ä‘ang cháº¡y.
    *   Giá»‘ng nhÆ° má»™t **ngÃ´i nhÃ  riÃªng biá»‡t** vá»›i Ä‘á»“ Ä‘áº¡c cá»§a riÃªng nÃ³.
    *   **KhÃ´ng chia sáº»** tÃ i nguyÃªn (bá»™ nhá»›, file) vá»›i cÃ¡c Process khÃ¡c.
    *   "Náº·ng" vÃ  tá»‘n tÃ i nguyÃªn hÆ¡n khi táº¡o ra.
    *   Náº¿u má»™t Process "cháº¿t" (á»©ng dá»¥ng bá»‹ treo), cÃ¡c Process khÃ¡c (á»©ng dá»¥ng khÃ¡c) thÆ°á»ng váº«n hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng.
*   **Luá»“ng (Thread):**
    *   LÃ  má»™t **pháº§n cÃ´ng viá»‡c** nhá» hÆ¡n bÃªn trong má»™t Process.
    *   Giá»‘ng nhÆ° má»™t **ngÆ°á»i lÃ m viá»‡c** trong ngÃ´i nhÃ  Ä‘Ã³.
    *   **CHIA Sáºº** tÃ i nguyÃªn (bá»™ nhá»›, file) cá»§a Process mÃ  nÃ³ thuá»™c vá».
    *   "Nháº¹" vÃ  nhanh hÆ¡n khi táº¡o ra.
    *   Náº¿u má»™t Luá»“ng "cháº¿t" (gáº·p lá»—i nghiÃªm trá»ng), **toÃ n bá»™ Process** mÃ  nÃ³ Ä‘ang cháº¡y cÃ³ thá»ƒ gáº·p sá»± cá»‘ hoáº·c bá»‹ treo!

    HÃ£y hÃ¬nh dung tháº¿ nÃ y nhÃ©: má»™t 'process' (tiáº¿n trÃ¬nh) vÃ  má»™t 'thread' (luá»“ng) â€“ cáº£ hai Ä‘á»u lÃ  nhá»¯ng 'Ä‘Æ¡n vá»‹' mÃ  mÃ¡y tÃ­nh dÃ¹ng Ä‘á»ƒ cháº¡y cÃ¡c lá»‡nh cá»§a báº¡n. NhÆ°ng mÃ  khoan Ä‘Ã£! DÃ¹ cÃ¹ng lÃ m nhiá»‡m vá»¥ Ä‘Ã³, chÃºng láº¡i khÃ¡c nhau *ráº¥t nhiá»u* vá» Ä‘áº·c Ä‘iá»ƒm vÃ  cÃ¡ch chÃºng Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘Ã³.

    **CÃ¡c bÆ°á»›c:**
    - Má»™t chÆ°Æ¡ng trÃ¬nh tá»± thá»±c thi, cháº¡y *Ä‘á»™c láº­p* hoÃ n toÃ n, vá»›i háº³n má»™t *khÃ´ng gian bá»™ nhá»› riÃªng* dÃ nh cho nÃ³.
    - Má»—i chÆ°Æ¡ng trÃ¬nh báº¡n viáº¿t ra Ä‘á»u cÃ³ Ã­t nháº¥t má»™t 'ngÆ°á»i lÃ m viá»‡c' Ä‘ang cháº¡y bÃªn trong. ChÃºng ta gá»i nhá»¯ng 'ngÆ°á»i lÃ m viá»‡c' nÃ y lÃ  **thread** (luá»“ng).

Ã€ mÃ  nÃ y, cÃ¡i thread Ä‘áº§u tiÃªn vÃ  quan trá»ng nháº¥t, cÃ¡i anh chÃ ng khá»Ÿi Ä‘á»™ng má»i thá»© áº¥y, chÃ­nh lÃ  **main thread** (luá»“ng chÃ­nh) Ä‘Ã³ nha!
    - NÃ³ sá»Ÿ há»¯u *táº¥t táº§n táº­t* má»i thá»© *riÃªng biá»‡t* cho mÃ¬nh!
Kiá»ƒu nhÆ° cÃ³:
*   **KhÃ´ng gian Ä‘á»‹a chá»‰ (address space)** riÃªng â€“ nhÆ° má»™t "Ä‘á»‹a chá»‰ nhÃ " Ä‘á»™c láº­p váº­y.
*   **VÃ¹ng nhá»› heap (heap)** riÃªng â€“ má»™t cÃ¡i kho lá»›n Ä‘á»ƒ cáº¥t Ä‘á»“ linh tinh.
*   **VÃ¹ng nhá»› stack (stack)** riÃªng â€“ má»™t chá»“ng giáº¥y tá» Ä‘á»ƒ lÃ m viá»‡c nhanh gá»n.
*   VÃ  cáº£ nhá»¯ng **tÃ i nguyÃªn há»‡ thá»‘ng** (system resources) khÃ¡c cÅ©ng lÃ  cá»§a riÃªng nÃ³ ná»¯a!
    - TÆ°á»Ÿng tÆ°á»£ng nhÃ©, má»—i "tiáº¿n trÃ¬nh" (process) trÃªn mÃ¡y tÃ­nh cá»§a báº¡n giá»‘ng nhÆ° má»™t cÄƒn phÃ²ng riÃªng biá»‡t váº­y. ChÃºng Ä‘Æ°á»£c **cÃ¡ch ly hoÃ n toÃ n** khá»i nhau! Äiá»u nÃ y cÃ³ nghÄ©a lÃ  gÃ¬? Ã€, Ä‘Æ¡n giáº£n lÃ  má»—i tiáº¿n trÃ¬nh cÃ³ "khÃ´ng gian" riÃªng, dá»¯ liá»‡u riÃªng, vÃ  chÃºng khÃ´ng thá»ƒ tá»± Ã½ "nhÃ²m ngÃ³" hay "Ä‘á»¥ng cháº¡m" vÃ o viá»‡c cá»§a nhau Ä‘Ã¢u. Má»—i tiáº¿n trÃ¬nh hoáº¡t Ä‘á»™ng *Ä‘á»™c láº­p* trong tháº¿ giá»›i cá»§a riÃªng nÃ³!
    - Báº¡n cÃ³ nhiá»u chÆ°Æ¡ng trÃ¬nh cháº¡y trÃªn mÃ¡y tÃ­nh, Ä‘Ãºng khÃ´ng?
Má»—i chÆ°Æ¡ng trÃ¬nh lÃ  má»™t "tiáº¿n trÃ¬nh" riÃªng biá»‡t.
ÄÃ´i khi, cÃ¡c tiáº¿n trÃ¬nh nÃ y cáº§n pháº£i "nÃ³i chuyá»‡n" vá»›i nhau, trao Ä‘á»•i dá»¯ liá»‡u.
Viá»‡c nÃ y gá»i lÃ  *Giao tiáº¿p giá»¯a cÃ¡c tiáº¿n trÃ¬nh* (hay *IPC*).
NhÆ°ng cÃ³ má»™t Ä‘iá»u quan trá»ng cáº§n nhá»›: viá»‡c giao tiáº¿p giá»¯a cÃ¡c tiáº¿n trÃ¬nh nÃ y...
...thá»±c sá»± ráº¥t *tá»‘n kÃ©m*!
NÃ³ Ä‘Ã²i há»i mÃ¡y tÃ­nh pháº£i bá» ra nhiá»u tÃ i nguyÃªn, nhÆ° thá»i gian xá»­ lÃ½ vÃ  bá»™ nhá»›.
Giá»‘ng nhÆ° báº¡n pháº£i gá»­i má»™t bá»©c thÆ° qua bÆ°u Ä‘iá»‡n thay vÃ¬ chá»‰ Ä‘Æ°a táº­n tay váº­y â€“ tá»‘n cÃ´ng vÃ  tá»‘n thá»i gian hÆ¡n nhiá»u!

    **Luá»“ng:**
    - NÃ³ lÃ  gÃ¬ Æ°? HÃ£y nghÄ© vá» nÃ³ nhÆ° má»™t *Ä‘Æ¡n vá»‹ thá»±c thi* (unit of execution) nhá» xÃ­u, siÃªu *nháº¹* (lightweight) vÃ  hiá»‡u quáº£. VÃ  nÃ³ luÃ´n náº±m gá»n gÃ ng *bÃªn trong* (within) má»™t *tiáº¿n trÃ¬nh* (process) Ä‘Ã³.
    - Ok, hÃ£y hÃ¬nh dung tháº¿ nÃ y nhÃ©: Má»—i 'thread' (luá»“ng) giá»‘ng nhÆ° má»™t cÃ´ng nhÃ¢n nhá» Ä‘ang lÃ m viá»‡c. Táº¥t cáº£ cÃ¡c cÃ´ng nhÃ¢n nÃ y Ä‘á»u á»Ÿ chung trong Má»˜T 'process' (tiáº¿n trÃ¬nh) - cá»© coi nhÆ° má»™t nhÃ  mÃ¡y lá»›n váº­y. VÃ  Ä‘iá»u Ä‘áº·c biá»‡t lÃ  gÃ¬? Há» CÃ™NG DÃ™NG chung má»™t KHÃ”NG GIAN Bá»˜ NHá»š vá»›i nhau! Tá»©c lÃ , bá»™ nhá»› Ä‘Ã³ khÃ´ng pháº£i cá»§a riÃªng ai cáº£, mÃ  lÃ  cá»§a CHUNG táº¥t cáº£ cÃ¡c thread trong cÃ¹ng cÃ¡i process Ä‘Ã³. Náº¿u má»™t thread thay Ä‘á»•i dá»¯ liá»‡u á»Ÿ Ä‘Ã³, cÃ¡c thread khÃ¡c cÅ©ng sáº½ tháº¥y ngay láº­p tá»©c!
    - Má»—i `thread` (luá»“ng) Ä‘Æ°á»£c cáº¥p cho má»™t "khÃ´ng gian lÃ m viá»‡c" riÃªng, chÃºng ta gá»i Ä‘Ã³ lÃ  **stack**.

*   HÃ£y tÆ°á»Ÿng tÆ°á»£ng `stack` nhÆ° cÃ¡i bÃ n lÃ m viá»‡c cÃ¡ nhÃ¢n cá»§a má»—i `thread`.
*   TrÃªn cÃ¡i bÃ n nÃ y, `thread` sáº½ Ä‘á»ƒ nhá»¯ng "ghi chÃº" riÃªng cá»§a nÃ³ â€“ vÃ­ dá»¥ nhÆ° cÃ¡c biáº¿n cá»¥c bá»™ (local variables) hay nhá»¯ng bÆ°á»›c mÃ  `thread` Ä‘ang thá»±c hiá»‡n trong má»™t hÃ m.
*   KhÃ´ng `thread` nÃ o khÃ¡c cÃ³ thá»ƒ nhÃ¬n hay "chá»c gháº¹o" vÃ o `stack` cá»§a báº¡n Ä‘Ã¢u! NÃ³ lÃ  cá»§a riÃªng báº¡n!

NHÆ¯NG! Táº¥t cáº£ cÃ¡c `thread` trong cÃ¹ng má»™t chÆ°Æ¡ng trÃ¬nh láº¡i cÃ¹ng sá»­ dá»¥ng chung má»™t "kho chá»©a Ä‘á»“ lá»›n" â€“ Ä‘Ã³ chÃ­nh lÃ  **heap**.

*   HÃ£y nghÄ© `heap` nhÆ° má»™t cÃ¡i tá»§ tÃ i liá»‡u chung hoáº·c má»™t báº£ng tráº¯ng lá»›n giá»¯a phÃ²ng.
*   Táº¥t cáº£ cÃ¡c `thread` Ä‘á»u cÃ³ thá»ƒ nhÃ¬n tháº¥y vÃ  láº¥y/Ä‘áº·t nhá»¯ng "Ä‘á»“ váº­t" (Ä‘á»‘i tÆ°á»£ng - objects) Ä‘Æ°á»£c lÆ°u trá»¯ trÃªn `heap` nÃ y.
*   Äiá»u nÃ y cÃ³ nghÄ©a lÃ , náº¿u má»™t `thread` thay Ä‘á»•i má»™t "Ä‘á»“ váº­t" trÃªn `heap`, cÃ¡c `thread` khÃ¡c cÅ©ng sáº½ tháº¥y sá»± thay Ä‘á»•i Ä‘Ã³. Cáº©n tháº­n káº»o "dáº«m chÃ¢n lÃªn nhau" Ä‘áº¥y nhÃ©!
    - Báº¡n hÃ¬nh dung tháº¿ nÃ y nha:

Má»™t chÆ°Æ¡ng trÃ¬nh (app) Ä‘ang cháº¡y cá»§a báº¡n, Ä‘Ã³ lÃ  má»™t 'process' (tiáº¿n trÃ¬nh) lá»›n.
Trong cÃ¡i 'process' Ä‘Ã³, cÃ³ nhiá»u 'luá»“ng' (threads) nhá» Ä‘ang cÃ¹ng nhau lÃ m viá»‡c.
Giá»‘ng nhÆ° nhá»¯ng ngÆ°á»i báº¡n cÃ¹ng phÃ²ng trong má»™t cÄƒn nhÃ  váº­y Ä‘Ã³!

VÃ¬ chÃºng sá»‘ng chung trong má»™t 'cÄƒn nhÃ ' (process) mÃ ,
nÃªn cÃ¡c 'luá»“ng' nÃ y cÃ³ thá»ƒ 'nÃ³i chuyá»‡n' (trao Ä‘á»•i thÃ´ng tin) trá»±c tiáº¿p vá»›i nhau luÃ´n!
KhÃ´ng cáº§n pháº£i qua báº¥t ká»³ ai trung gian nÃ o cáº£. Cá»© tháº¿ mÃ  giao tiáº¿p thÃ´i!
    - NÃ y, cÃ³ má»™t Ä‘iá»u hay ho báº¡n cáº§n biáº¿t vá» cÃ¡c 'luá»“ng' (threads) nÃ y nhÃ©!

Khi CPU cá»§a báº¡n cáº§n chuyá»ƒn Ä‘á»•i tá»« má»™t luá»“ng cÃ´ng viá»‡c nÃ y sang má»™t luá»“ng cÃ´ng viá»‡c khÃ¡c...
CÃ¡i viá»‡c 'chuyá»ƒn Ä‘á»•i ngá»¯ cáº£nh' (context switching) nÃ y diá»…n ra *nhanh chÃ³ng máº·t* luÃ´n Ä‘Ã³!

NÃ³ nhanh hÆ¡n ráº¥t nhiá»u so vá»›i viá»‡c chuyá»ƒn Ä‘á»•i giá»¯a cÃ¡c 'tiáº¿n trÃ¬nh' (processes) Ä‘áº¥y.
TÆ°á»Ÿng tÆ°á»£ng CPU chá»‰ cáº§n thay Ä‘á»•i vÃ i thá»© nhá» trÃªn bÃ n lÃ m viá»‡c cá»§a mÃ¬nh, chá»© khÃ´ng pháº£i dá»n dáº¹p sáº¡ch sáº½ cáº£ bÃ n vÃ  bÃ y biá»‡n láº¡i tá»« Ä‘áº§u Ä‘Ã¢u.
Tháº¿ nÃªn, viá»‡c nháº£y tá»« luá»“ng nÃ y sang luá»“ng khÃ¡c má»›i *siÃªu tá»‘c* Ä‘áº¿n váº­y!

    ```java
    public class ProcessVsThread {
        public static void main(String[] args) {
            // Creating a new process
            try {
                ProcessBuilder pb = new ProcessBuilder("notepad.exe");
                Process process = pb.start(); // Creates a new process
            } catch (Exception e) {
                e.printStackTrace();
            }
            
            // Creating a new thread
            Thread thread = new Thread(() -> {
                System.out.println("Thread running: " + Thread.currentThread().getName());
            });
            thread.start(); // Creates a new thread within the same process
        }
    }
    ```

    | Tiáº¿n trÃ¬nh (á»¨ng dá»¥ng Ä‘á»™c láº­p) | Luá»“ng (Nhiá»‡m vá»¥ bÃªn trong) |
    |---------|--------|
    | Náº·ng kÃ½ | Nháº¹ tÃªnh |
    | Chá»— nhá»› cá»§a riÃªng mÃ¬nh nÃ³ | Chá»— nhá»› dÃ¹ng chung vá»›i ngÆ°á»i khÃ¡c |
    | Chuyá»ƒn Ä‘á»•i ngá»¯ cáº£nh (context switching) cháº­m hÆ¡n | Chuyá»ƒn Ä‘á»•i ngá»¯ cáº£nh (context switching) nhanh hÆ¡n |
    | Isolated from other processes | Can communicate with other threads |
|---|---|
| Má»—i tiáº¿n trÃ¬nh giá»‘ng nhÆ° má»™t "á»‘c Ä‘áº£o" riÃªng biá»‡t váº­y Ä‘Ã³. NÃ³ hoÃ n toÃ n tÃ¡ch rá»i vÃ  khÃ´ng "nhÃ²m ngÃ³" vÃ o cÃ¡c tiáº¿n trÃ¬nh khÃ¡c Ä‘Ã¢u nhÃ©! | NhÆ°ng cÃ¡c thread (luá»“ng) bÃªn TRONG CÃ™NG Má»˜T tiáº¿n trÃ¬nh thÃ¬ láº¡i lÃ  "báº¡n thÃ¢n"! ChÃºng cÃ³ thá»ƒ "tÃ¡m chuyá»‡n" vÃ  "chia sáº»" má»i thá»© vá»›i nhau dá»… dÃ ng láº¯m. |
    | **Ngá»‘n nhiá»u tÃ i nguyÃªn hÆ¡n** | **Ngá»‘n Ã­t tÃ i nguyÃªn hÆ¡n** |
    | Process crash doesn't affect others | Thread crash can affect entire process |
|---|---|
| **Báº¡n cÃ³ nhiá»u á»©ng dá»¥ng Ä‘ang cháº¡y Ä‘Ãºng khÃ´ng?**<br>HÃ£y nghÄ© má»—i á»©ng dá»¥ng lÃ  má»™t *Tiáº¿n trÃ¬nh* (Process) riÃªng biá»‡t.<br>Náº¿u má»™t Tiáº¿n trÃ¬nh "sáº­p" (crash) Ä‘á»™t ngá»™t...<br>...thÃ¬ cÃ¡c Tiáº¿n trÃ¬nh khÃ¡c váº«n cá»© cháº¡y ngon lÃ nh! ChÃºng *khÃ´ng bá»‹ áº£nh hÆ°á»Ÿng* Ä‘Ã¢u nhÃ©. | **NhÆ°ng chá» Ä‘Ã£, hÃ£y nhÃ¬n sÃ¢u vÃ o bÃªn trong má»™t Tiáº¿n trÃ¬nh!**<br>Trong Ä‘Ã³ cÃ³ thá»ƒ cÃ³ ráº¥t nhiá»u *Luá»“ng* (Thread) Ä‘ang lÃ m viá»‡c.<br>Náº¿u *má»™t Luá»“ng* trong sá»‘ Ä‘Ã³ bá»‹ "sáº­p" (crash)...<br>...thÃ¬ Ã´i khÃ´ng, nÃ³ cÃ³ thá»ƒ kÃ©o theo *cáº£ Tiáº¿n trÃ¬nh Ä‘Ã³* "sáº­p" theo luÃ´n!<br>Tháº­t tá»‡! Má»™t Luá»“ng bá»‹ lá»—i cÃ³ thá»ƒ áº£nh hÆ°á»Ÿng *Ä‘áº¿n toÃ n bá»™ Tiáº¿n trÃ¬nh* cá»§a nÃ³. |

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

32. ### Váº­y thÃ¬, chÃºng ta cÃ³ thá»ƒ táº¡o má»™t "thread" trong Java báº±ng nhá»¯ng cÃ¡ch nÃ o nhá»‰?

    Báº¡n muá»‘n táº¡o má»™t thread trong Java Æ°? Tuyá»‡t vá»i! Java cho chÃºng ta *vÃ i cÃ¡ch* Ä‘á»ƒ thá»±c hiá»‡n Ä‘iá»u nÃ y Ä‘áº¥y:

    1. Káº¿ thá»«a lá»›p Thread:
    ```java
    class MyThread extends Thread {
        @Override
        public void run() {
            System.out.println("Thread running: " + Thread.currentThread().getName());
        }
    }

    // Usage
    MyThread thread = new MyThread();
    thread.start();
    ```

    **2. CÃ¡ch thá»© hai: Thá»±c thi `Runnable` interface!**
    ```java
    class MyRunnable implements Runnable {
        @Override
        public void run() {
            System.out.println("Runnable running: " + Thread.currentThread().getName());
        }
    }

    // Usage
    Thread thread = new Thread(new MyRunnable());
    thread.start();
    ```

    **3. VÃ  Ä‘Ã¢y lÃ  Biá»ƒu thá»©c Lambda (tá»« Java 8 trá»Ÿ lÃªn):**
    ```java
    Thread thread = new Thread(() -> {
        System.out.println("Lambda thread running");
    });
    thread.start();
    ```

    **4. Triá»ƒn khai giao diá»‡n Callable (Ã€, cÃ¡i nÃ y thÃ¬ CÃ“ TRáº¢ Vá»€ Káº¾T QUáº¢ Ä‘Ã³ nha!):**
    ```java
    import java.util.concurrent.*;

    class MyCallable implements Callable<Integer> {
        @Override
        public Integer call() throws Exception {
            return 42;
        }
    }

    // Usage
    ExecutorService executor = Executors.newSingleThreadExecutor();
    Future<Integer> future = executor.submit(new MyCallable());
    Integer result = future.get(); // Gets the result
    executor.shutdown();
    ```

    **5. CÃ¹ng dÃ¹ng ExecutorService nhÃ©!**
    ```java
    ExecutorService executor = Executors.newFixedThreadPool(5);
    
    executor.execute(() -> {
        System.out.println("Task executed by: " + Thread.currentThread().getName());
    });
    
    executor.submit(() -> {
        return "Task completed";
    });
    
    executor.shutdown();
    ```

    | PhÆ°Æ¡ng thá»©c | CÃ³ tráº£ vá» giÃ¡ trá»‹ khÃ´ng? | CÃ³ thá»ƒ káº¿ thá»«a lá»›p khÃ¡c khÃ´ng? | CÃ³ xá»­ lÃ½ ngoáº¡i lá»‡ Ä‘Æ°á»£c khÃ´ng? |
|---|---|---|---|
    |--------|--------------|------------------------|-------------------|
    | Lá»›p Thread | KhÃ´ng há»! | CÅ©ng khÃ´ng luÃ´n! | Chá»‰ Unchecked Exception |
    | Vá»›i `Runnable` thÃ¬ sao nhá»‰? | KhÃ´ng Ä‘Æ°á»£c phÃ©p khai bÃ¡o nÃ©m lá»—i 'cÃ³ kiá»ƒm tra' Ä‘Ã¢u nhÃ©! | NÃ©m lá»—i 'khÃ´ng kiá»ƒm tra' thÃ¬ cá»© vÃ´ tÆ°! | Chá»‰ riÃªng lá»—i 'khÃ´ng kiá»ƒm tra' thÃ´i Ä‘Ã³! |
    | Callable | CÃ³! | CÃ³! | Cáº£ lá»—i cáº§n kiá»ƒm tra (Checked) vÃ  lá»—i khÃ´ng cáº§n kiá»ƒm tra (Unchecked) |

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

33. ### Äá»“ng bá»™ hÃ³a trong Java: NÃ³ lÃ  cÃ¡i gÃ¬ tháº¿?

    TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©: cÃ³ má»™t 'tÃ i nguyÃªn' (má»™t mÃ³n Ä‘á»“, má»™t vÃ¹ng dá»¯ liá»‡u) mÃ  nhiá»u 'thread' (luá»“ng) cÃ¹ng muá»‘n dÃ¹ng chung.

Váº­y 'Äá»“ng bá»™ hÃ³a' (Synchronization) lÃ  gÃ¬?
Ã€, nÃ³ lÃ  má»™t 'cÆ¡ cháº¿' Ä‘áº·c biá»‡t.
NÃ³ Ä‘áº£m báº£o ráº±ng táº¡i Má»˜T thá»i Ä‘iá»ƒm, chá»‰ DUY NHáº¤T má»™t thread Ä‘Æ°á»£c 'cháº¡m' vÃ o cÃ¡i tÃ i nguyÃªn chung Ä‘Ã³ thÃ´i.
Kiá»ƒu nhÆ° cÃ³ má»™t cÃ¡nh cá»­a, vÃ  chá»‰ má»™t ngÆ°á»i Ä‘Æ°á»£c bÆ°á»›c qua má»—i láº§n váº­y!

Táº¡i sao pháº£i lÃ m tháº¿?
Náº¿u khÃ´ng cÃ³ nÃ³, cÃ¡c thread sáº½ 'Ä‘ua nhau' Ä‘á»ƒ giÃ nh quyá»n truy cáº­p. ChÃºng ta gá»i Ä‘Ã³ lÃ  'tÃ¬nh tráº¡ng tranh cháº¥p' (race conditions).
VÃ  má»i thá»© cÃ³ thá»ƒ trá»Ÿ nÃªn lá»™n xá»™n, dá»¯ liá»‡u cÃ³ thá»ƒ bá»‹ há»ng!
Tháº¿ nÃªn, Ä‘á»“ng bá»™ hÃ³a giÃºp ngÄƒn cháº·n nhá»¯ng cuá»™c 'Ä‘ua' nÃ y.
NÃ³ Ä‘áº£m báº£o ráº±ng má»i thá»© luÃ´n 'an toÃ n cho thread' (thread safety). Tá»©c lÃ , cÃ¡c thread cÃ³ thá»ƒ lÃ m viá»‡c mÃ  khÃ´ng sá»£ lÃ m há»ng láº«n nhau!

    Ã”i chÃ o báº¡n! Báº¡n Ä‘Ã£ sáºµn sÃ ng chÆ°a nÃ o?
Trong tháº¿ giá»›i láº­p trÃ¬nh Ä‘a luá»“ng (multithreading) Ä‘áº§y sÃ´i Ä‘á»™ng, Ä‘Ã´i khi chÃºng ta cáº§n má»™t chÃºt "tráº­t tá»±" Ä‘á»ƒ má»i thá»© khÃ´ng bá»‹... rá»‘i tung lÃªn.
ÄÃ³ lÃ  lÃºc **Ä‘á»“ng bá»™ hÃ³a (synchronization)** xuáº¥t hiá»‡n! NÃ³ giÃºp cÃ¡c luá»“ng (threads) lÃ m viá»‡c cÃ¹ng nhau má»™t cÃ¡ch hÃ²a thuáº­n, Ä‘áº·c biá»‡t khi chÃºng cÃ¹ng muá»‘n "Ä‘á»¥ng cháº¡m" vÃ o má»™t tÃ i nguyÃªn chung.
NhÆ°ng nÃ y, báº¡n biáº¿t khÃ´ng? KhÃ´ng pháº£i lÃºc nÃ o chÃºng ta cÅ©ng dÃ¹ng *má»™t* cÃ¡ch duy nháº¥t Ä‘á»ƒ "giá»¯ tráº­t tá»±" Ä‘Ã¢u nhÃ©. TÃ¹y vÃ o tÃ¬nh huá»‘ng, chÃºng ta cÃ³ thá»ƒ cÃ³ nhá»¯ng "chiÃªu" khÃ¡c nhau!
Váº­y thÃ¬, hÃ£y cÃ¹ng "má»Ÿ há»™p" vÃ  xem chÃºng ta cÃ³ **CÃ¡c Kiá»ƒu Äá»“ng Bá»™ HÃ³a** nÃ o nhÃ©!

    **1. Gáº·p gá»¡ PhÆ°Æ¡ng thá»©c `synchronized`!**
    ```java
    class Counter {
        private int count = 0;
        
        public synchronized void increment() {
            count++;
        }
        
        public synchronized int getCount() {
            return count;
        }
    }
    ```

    **2. Khu vá»±c 'Äá»“ng bá»™ hÃ³a' (Synchronized Block): Khi báº¡n chá»‰ muá»‘n báº£o vá»‡ Má»˜T GÃ“C nhá» thÃ´i!**
    ```java
    class Counter {
        private int count = 0;
        private final Object lock = new Object();
        
        public void increment() {
            synchronized (lock) {
                count++;
            }
        }
    }
    ```

    **3. Äá»“ng bá»™ hÃ³a tÄ©nh: Khi `static` cÅ©ng cáº§n Ä‘Æ°á»£c 'khÃ³a' láº¡i!**
    ```java
    class StaticCounter {
        private static int count = 0;
        
        public static synchronized void increment() {
            count++;
        }
    }
    ```

    **VÃ­ dá»¥ cho tháº¥y Táº I SAO chÃºng ta cáº§n Äá»“ng bá»™ hÃ³a (Synchronization):**

NÃ y báº¡n, báº¡n Ä‘Ã£ sáºµn sÃ ng chÆ°a? HÃ£y thá»­ tÆ°á»Ÿng tÆ°á»£ng xem Ä‘iá»u gÃ¬ sáº½ xáº£y ra khi nhiá»u ngÆ°á»i (hay trong láº­p trÃ¬nh lÃ  nhiá»u 'luá»“ng' - threads) cÃ¹ng lÃºc cá»‘ gáº¯ng lÃ m viá»‡c trÃªn Má»˜T thá»© duy nháº¥t. Má»i thá»© cÃ³ thá»ƒ trá»Ÿ nÃªn lá»™n xá»™n láº¯m Ä‘áº¥y!

VÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y sáº½ cho báº¡n tháº¥y chÃ­nh xÃ¡c táº¡i sao chÃºng ta cáº§n má»™t cÆ¡ cháº¿ Ä‘á»ƒ giá»¯ cho má»i thá»© *tráº­t tá»±* vÃ  *Ä‘Ãºng Ä‘áº¯n* â€“ Ä‘Ã³ chÃ­nh lÃ  "Ä‘á»“ng bá»™ hÃ³a" (synchronization)!
    ```java
    class BankAccount {
        private int balance = 1000;
        
        // Without synchronization - race condition possible
        public void withdraw(int amount) {
            if (balance >= amount) {
                System.out.println(Thread.currentThread().getName() + " is withdrawing");
                balance -= amount;
                System.out.println("Balance after withdrawal: " + balance);
            }
        }
        
        // With synchronization - thread safe
        public synchronized void safeWithdraw(int amount) {
            if (balance >= amount) {
                System.out.println(Thread.currentThread().getName() + " is withdrawing");
                balance -= amount;
                System.out.println("Balance after withdrawal: " + balance);
            }
        }
    }
    ```

    **Nhá»¯ng Äiá»ƒm ChÃ­nh Cáº§n Nhá»›:**
    - Báº¡n biáº¿t khÃ´ng? Má»—i Ä‘á»‘i tÆ°á»£ng trong Java Ä‘á»u cÃ³ má»™t **cÃ¡i khÃ³a** riÃªng cá»§a nÃ³! ChÃºng ta gá»i Ä‘Ã³ lÃ  **khÃ³a ná»™i táº¡i** (intrinsic lock). ÄÃ´i khi, báº¡n cÅ©ng sáº½ nghe ngÆ°á»i ta gá»i nÃ³ lÃ  **monitor** Ä‘áº¥y.
    - Váº­y lÃ , táº¡i má»™t thá»i Ä‘iá»ƒm, chá»‰ cÃ³ Má»˜T luá»“ng (thread) duy nháº¥t má»›i Ä‘Æ°á»£c 'cáº§m' cÃ¡i khÃ³a (lock) nÃ y thÃ´i nhÃ©.
    - Äá»“ng bá»™ hÃ³a cÃ³ thá»ƒ lÃ m phÃ¡t sinh thÃªm "chi phÃ­" (kiá»ƒu nhÆ° tá»‘n thÃªm cÃ´ng sá»©c vÃ  thá»i gian áº¥y), khiáº¿n chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cháº¡y cháº­m hÆ¡n má»™t chÃºt Ä‘áº¥y!
    - NÃ y báº¡n, khi nÃ o cáº§n giá»¯ an toÃ n cho dá»¯ liá»‡u khá»i cÃ¡c luá»“ng (thread) khÃ¡c nhau? ChÃºng ta cÃ³ hai cÃ¡ch chÃ­nh Ä‘á»ƒ lÃ m Ä‘iá»u Ä‘Ã³ vá»›i tá»« khÃ³a `synchronized`: dÃ¹ng cáº£ `phÆ°Æ¡ng thá»©c synchronized` hoáº·c chá»‰ dÃ¹ng `khá»‘i synchronized`.

Khi báº¡n khai bÃ¡o má»™t phÆ°Æ¡ng thá»©c lÃ  `synchronized` (kiá»ƒu nhÆ° `public synchronized void doSomething() { ... }`), thÃ¬ cáº£ phÆ°Æ¡ng thá»©c Ä‘Ã³ sáº½ bá»‹ khÃ³a. NghÄ©a lÃ , náº¿u má»™t luá»“ng Ä‘ang cháº¡y phÆ°Æ¡ng thá»©c nÃ y, thÃ¬ khÃ´ng luá»“ng nÃ o khÃ¡c cÃ³ thá»ƒ vÃ o Ä‘Æ°á»£c *báº¥t ká»³ pháº§n nÃ o* cá»§a phÆ°Æ¡ng thá»©c Ä‘Ã³ cho Ä‘áº¿n khi luá»“ng Ä‘áº§u tiÃªn hoÃ n thÃ nh.

NhÆ°ng nÃ y, Ä‘Ã´i khi báº¡n cÃ³ tháº¥y lÃ  chá»‰ má»™t *pháº§n nhá»* cá»§a phÆ°Æ¡ng thá»©c má»›i thá»±c sá»± cáº§n báº£o vá»‡ khÃ´ng? VÃ­ dá»¥, báº¡n chá»‰ thay Ä‘á»•i má»™t biáº¿n chung trong vÃ i dÃ²ng code, cÃ²n cÃ¡c dÃ²ng khÃ¡c thÃ¬ khÃ´ng liÃªn quan gÃ¬ Ä‘áº¿n dá»¯ liá»‡u chung cáº£.

Náº¿u báº¡n khÃ³a cáº£ phÆ°Æ¡ng thá»©c, thÃ¬ cÃ¡c luá»“ng khÃ¡c sáº½ pháº£i Ä‘á»£i *cáº£ phÆ°Æ¡ng thá»©c* hoÃ n thÃ nh, ká»ƒ cáº£ nhá»¯ng pháº§n khÃ´ng cáº§n báº£o vá»‡. Äiá»u nÃ y cÃ³ thá»ƒ lÃ m cháº­m chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n Ä‘i Ä‘Ã¡ng ká»ƒ Ä‘áº¥y!

ÄÃ¢y lÃ  lÃºc `khá»‘i synchronized` (synchronized block) trá»Ÿ thÃ nh siÃªu anh hÃ¹ng! Thay vÃ¬ khÃ³a cáº£ phÆ°Æ¡ng thá»©c, báº¡n cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh rÃµ rÃ ng *chá»‰ má»™t Ä‘oáº¡n mÃ£ cá»¥ thá»ƒ* cáº§n Ä‘Æ°á»£c báº£o vá»‡. Báº¡n sáº½ Ä‘áº·t nÃ³ vÃ o trong má»™t `khá»‘i synchronized` nhÆ° tháº¿ nÃ y:

```java
public void doSomething() {
    // Pháº§n code nÃ y khÃ´ng liÃªn quan Ä‘áº¿n dá»¯ liá»‡u chung, cÃ³ thá»ƒ cháº¡y tá»± do.
    System.out.println("Pháº§n nÃ y an toÃ n, khÃ´ng cáº§n khÃ³a.");

    // Ã”i, Ä‘Ã¢y lÃ  pháº§n nháº¡y cáº£m, cáº§n báº£o vá»‡!
    synchronized (this) { // Hoáº·c má»™t Ä‘á»‘i tÆ°á»£ng khÃ³a khÃ¡c
        // Chá»‰ Ä‘oáº¡n code trong khá»‘i nÃ y má»›i bá»‹ khÃ³a.
        // CÃ¡c luá»“ng khÃ¡c pháº£i chá» náº¿u cÃ³ luá»“ng Ä‘ang cháº¡y á»Ÿ Ä‘Ã¢y.
        System.out.println("Chá»‰ Ä‘oáº¡n code nÃ y má»›i bá»‹ khÃ³a Ä‘á»ƒ báº£o vá»‡ dá»¯ liá»‡u chung.");
        // ... Thay Ä‘á»•i biáº¿n chung á»Ÿ Ä‘Ã¢y ...
    }

    // Pháº§n code nÃ y cÅ©ng khÃ´ng liÃªn quan, cÃ³ thá»ƒ cháº¡y tá»± do tiáº¿p.
    System.out.println("Pháº§n nÃ y cÅ©ng an toÃ n, tiáº¿p tá»¥c cháº¡y bÃ¬nh thÆ°á»ng.");
}
```

Tháº¥y khÃ´ng? Báº±ng cÃ¡ch nÃ y, báº¡n chá»‰ khÃ³a *chÃ­nh xÃ¡c* pháº§n code cáº§n thiáº¿t. CÃ¡c luá»“ng khÃ¡c váº«n cÃ³ thá»ƒ cháº¡y cÃ¡c pháº§n khÃ´ng bá»‹ khÃ³a cá»§a phÆ°Æ¡ng thá»©c mÃ  khÃ´ng pháº£i chá» Ä‘á»£i. Äiá»u nÃ y giÃºp chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cháº¡y hiá»‡u quáº£ hÆ¡n ráº¥t nhiá»u, vÃ¬ báº¡n cÃ³ thá»ƒ kiá»ƒm soÃ¡t *ráº¥t chi tiáº¿t* (fine-grained control) pháº§n nÃ o cáº§n Ä‘Æ°á»£c báº£o vá»‡.

Váº­y nÃªn, hÃ£y Æ°u tiÃªn dÃ¹ng `khá»‘i synchronized` khi báº¡n muá»‘n kiá»ƒm soÃ¡t tá»«ng chÃºt má»™t nhÃ©!

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

34. ### Deadlock lÃ  gÃ¬ váº­y ta? LÃ m sao Ä‘á»ƒ mÃ¬nh khÃ´ng 'máº¯c káº¹t' vÃ o nÃ³?

    Váº­y **deadlock** lÃ  gÃ¬? ÄÆ¡n giáº£n thÃ´i, Ä‘Ã³ lÃ  má»™t 'tÃ¬nh huá»‘ng' mÃ  á»Ÿ Ä‘Ã³ cÃ³ **hai hay nhiá»u luá»“ng (thread)** bá»‹ **káº¹t cá»©ng (blocked) mÃ£i mÃ£i**, vÃ¬ má»—i luá»“ng láº¡i Ä‘ang **chá» luá»“ng kia nháº£ (tháº£) má»™t cÃ¡i 'khÃ³a' (lock)**.

    **Báº¿ táº¯c (Deadlock): Chuyá»‡n gÃ¬ Ä‘ang xáº£y ra váº­y? Xem vÃ­ dá»¥ nÃ y!**
    ```java
    public class DeadlockExample {
        private static final Object lock1 = new Object();
        private static final Object lock2 = new Object();
        
        public static void main(String[] args) {
            Thread thread1 = new Thread(() -> {
                synchronized (lock1) {
                    System.out.println("Thread 1: Holding lock1");
                    try { Thread.sleep(100); } catch (InterruptedException e) {}
                    
                    synchronized (lock2) {
                        System.out.println("Thread 1: Holding lock1 and lock2");
                    }
                }
            });
            
            Thread thread2 = new Thread(() -> {
                synchronized (lock2) {
                    System.out.println("Thread 2: Holding lock2");
                    try { Thread.sleep(100); } catch (InterruptedException e) {}
                    
                    synchronized (lock1) {
                        System.out.println("Thread 2: Holding lock2 and lock1");
                    }
                }
            });
            
            thread1.start();
            thread2.start();
        }
    }
    ```

    **LÃ m sao Ä‘á»ƒ chÃºng ta *trÃ¡nh* Ä‘Æ°á»£c Deadlock Ä‘Ã¢y nhá»‰?**

    **1. Thá»© Tá»± KhÃ³a: LuÃ´n LuÃ´n "Xáº¿p HÃ ng" Cho CÃ¡c KhÃ³a NhÃ©!**

Báº¡n biáº¿t khÃ´ng, khi cÃ³ nhiá»u luá»“ng (thread) trong chÆ°Æ¡ng trÃ¬nh cá»§a chÃºng ta cÃ¹ng muá»‘n dÃ¹ng chung cÃ¡c "khÃ³a" (lock) Ä‘á»ƒ báº£o vá»‡ dá»¯ liá»‡u, thÃ¬ Ä‘Ã´i khi chÃºng cÃ³ thá»ƒ gáº·p ráº¯c rá»‘i lá»›n mang tÃªn "deadlock" (máº¯c káº¹t).

HÃ£y hÃ¬nh dung tháº¿ nÃ y: CÃ³ hai luá»“ng, má»—i luá»“ng Ä‘á»u cáº§n cáº£ khÃ³a A vÃ  khÃ³a B.

*   Má»™t luá»“ng quyáº¿t Ä‘á»‹nh: "MÃ¬nh sáº½ láº¥y A trÆ°á»›c, rá»“i sau Ä‘Ã³ má»›i láº¥y B".
*   Trong khi Ä‘Ã³, luá»“ng kia láº¡i nghÄ©: "MÃ¬nh sáº½ láº¥y B trÆ°á»›c, rá»“i sau Ä‘Ã³ má»›i láº¥y A".

Tháº¿ lÃ  káº¹t cá»©ng! Luá»“ng thá»© nháº¥t Ä‘ang giá»¯ A vÃ  chá» B. Luá»“ng thá»© hai Ä‘ang giá»¯ B vÃ  chá» A. Cháº³ng ai nháº£ ra cho ai, vÃ  cáº£ hai cá»© tháº¿ chá» nhau mÃ£i mÃ£i!

Äá»ƒ trÃ¡nh cÃ¡i cáº£nh "Ä‘á»©ng hÃ¬nh" Ä‘Ã¡ng sá»£ nÃ y, cÃ³ má»™t quy táº¯c vÃ ng mÃ  báº¡n pháº£i thuá»™c náº±m lÃ²ng:

**LuÃ´n luÃ´n láº¥y cÃ¡c khÃ³a theo Má»˜T THá»¨ Tá»° NHáº¤T Äá»ŠNH.**

Äiá»u nÃ y cÃ³ nghÄ©a lÃ , náº¿u báº¡n cÃ³ `khÃ³a_1` vÃ  `khÃ³a_2`, thÃ¬ hÃ£y quy Æ°á»›c chung má»™t "lá»™ trÃ¬nh": *táº¥t cáº£ cÃ¡c luá»“ng Ä‘á»u pháº£i láº¥y `khÃ³a_1` trÆ°á»›c, rá»“i sau Ä‘Ã³ má»›i láº¥y `khÃ³a_2`*. Äá»«ng bao giá» lÃ m ngÆ°á»£c láº¡i nhÃ©!

Cá»© tuÃ¢n thá»§ Ä‘Ãºng "lá» lá»‘i" nÃ y, báº¡n sáº½ giÃºp chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh cháº¡y trÆ¡n tru, khÃ´ng lo bá»‹ deadlock lÃ m phiá»n ná»¯a Ä‘Ã¢u!
    ```java
    // Fixed version - both threads acquire locks in same order
    Thread thread1 = new Thread(() -> {
        synchronized (lock1) {
            synchronized (lock2) {
                // work
            }
        }
    });

    Thread thread2 = new Thread(() -> {
        synchronized (lock1) {  // Same order as thread1
            synchronized (lock2) {
                // work
            }
        }
    });
    ```

    **2. Sá»­ dá»¥ng `tryLock` cÃ³ thá»i gian chá»:**
    ```java
    import java.util.concurrent.locks.*;

    ReentrantLock lock1 = new ReentrantLock();
    ReentrantLock lock2 = new ReentrantLock();

    public void safeMethod() {
        boolean gotLock1 = false;
        boolean gotLock2 = false;
        try {
            gotLock1 = lock1.tryLock(1, TimeUnit.SECONDS);
            gotLock2 = lock2.tryLock(1, TimeUnit.SECONDS);
            if (gotLock1 && gotLock2) {
                // Do work
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        } finally {
            if (gotLock1) lock1.unlock();
            if (gotLock2) lock2.unlock();
        }
    }
    ```

    3. TrÃ¡nh khÃ³a lá»“ng nhau nhÃ©!
    **4. HÃ£y dÃ¹ng 'timeout' cho khÃ³a â€“ Äá»«ng Ä‘á»ƒ bá»‹ chá» mÃ£i!**
    **5. Äá»«ng "Ã´m" khÃ³a quÃ¡ lÃ¢u nhÃ©!**

Báº¡n hÃ¬nh dung tháº¿ nÃ y: Khi má»™t luá»“ng (thread) cá»§a báº¡n "náº¯m" Ä‘Æ°á»£c má»™t cÃ¡i **khÃ³a** (lock), nÃ³ giá»‘ng nhÆ° luá»“ng Ä‘Ã³ Ä‘ang Ä‘á»™c chiáº¿m má»™t tÃ i nguyÃªn nÃ o Ä‘Ã³.

Trong lÃºc luá»“ng Ä‘Ã³ Ä‘ang "Ã´m" cÃ¡i khÃ³a, thÃ¬ **khÃ´ng cÃ³ luá»“ng nÃ o khÃ¡c** cÃ³ thá»ƒ cháº¡m vÃ o tÃ i nguyÃªn Ä‘Æ°á»£c báº£o vá»‡ bá»Ÿi cÃ¡i khÃ³a Ä‘Ã³ cáº£. ChÃºng sáº½ pháº£i **Ä‘á»©ng chá»**!

Váº­y náº¿u luá»“ng cá»§a báº¡n mÃ  **giá»¯ cÃ¡i khÃ³a Ä‘Ã³ quÃ¡ lÃ¢u** thÃ¬ sao?
*   CÃ¡c luá»“ng khÃ¡c sáº½ pháº£i **chá» Ä‘á»£i ráº¥t lÃ¢u**.
*   ChÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cÃ³ thá»ƒ sáº½ **cháº­m cháº¡p** vÃ¬ cÃ¡c luá»“ng cá»© pháº£i xáº¿p hÃ ng.
*   NÃ³ lÃ m giáº£m kháº£ nÄƒng "song song" cá»§a chÆ°Æ¡ng trÃ¬nh, tá»©c lÃ  Ã­t viá»‡c Ä‘Æ°á»£c lÃ m cÃ¹ng lÃºc hÆ¡n.

**Má»¥c tiÃªu cá»§a chÃºng ta lÃ  gÃ¬?**
HÃ£y cá»‘ gáº¯ng **giáº£i phÃ³ng cÃ¡i khÃ³a Ä‘Ã³ cÃ ng nhanh cÃ ng tá»‘t** ngay khi luá»“ng cá»§a báº¡n khÃ´ng cáº§n nÃ³ ná»¯a.
*   Chá»‰ giá»¯ khÃ³a trong **thá»i gian ngáº¯n nháº¥t cÃ³ thá»ƒ**.
*   LÃ m nhá»¯ng viá»‡c cáº§n khÃ³a má»™t cÃ¡ch **nhanh gá»n láº¹**.
*   Sau Ä‘Ã³, **tháº£ khÃ³a ra ngay** Ä‘á»ƒ cÃ¡c luá»“ng khÃ¡c cÃ³ thá»ƒ vÃ o lÃ m viá»‡c cá»§a chÃºng.

Äiá»u nÃ y giÃºp chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cháº¡y **mÆ°á»£t mÃ  hÆ¡n** vÃ  **hiá»‡u quáº£ hÆ¡n** ráº¥t nhiá»u Ä‘Ã³!

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

35. ### Tá»« khÃ³a volatile trong Java lÃ  gÃ¬ váº­y nhá»‰?

    Ã€, chÃ­nh lÃ ... `volatile` Trong Java, khi báº¡n dÃ¹ng tá»« khÃ³a `volatile`, báº¡n Ä‘ang nÃ³i vá»›i chÆ°Æ¡ng trÃ¬nh ráº±ng: "NÃ y, giÃ¡ trá»‹ cá»§a biáº¿n nÃ y cÃ³ thá»ƒ bá»‹ thay Ä‘á»•i bá»Ÿi NHIá»€U luá»“ng (threads) khÃ¡c nhau cÃ¹ng má»™t lÃºc Ä‘áº¥y!"

NÃ³ lÃ m gÃ¬ Æ°? `volatile` Ä‘áº£m báº£o ráº±ng khi má»™t luá»“ng thay Ä‘á»•i giÃ¡ trá»‹, cÃ¡c luá»“ng khÃ¡c *ngay láº­p tá»©c* nhÃ¬n tháº¥y sá»± thay Ä‘á»•i Ä‘Ã³ (gá»i lÃ  "tÃ­nh hiá»ƒn thá»‹"). Äá»“ng thá»i, nÃ³ cÅ©ng ngÄƒn cháº·n viá»‡c CPU hoáº·c bá»™ nhá»› cache "giáº¥u" giÃ¡ trá»‹ cÅ© cá»§a biáº¿n Ä‘i, buá»™c pháº£i luÃ´n Ä‘á»c giÃ¡ trá»‹ má»›i nháº¥t tá»« bá»™ nhá»› chÃ­nh.

    **CÃ¹ng Ä‘iá»ƒm qua nhá»¯ng tÃ­nh nÄƒng chÃ­nh nhÃ©:**
    1. **TÃ­nh Hiá»ƒn Thá»‹ (Visibility):**

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ nhiá»u ngÆ°á»i Ä‘ang cÃ¹ng nhÃ¬n vÃ o má»™t báº£ng tráº¯ng chung.
Náº¿u má»™t ngÆ°á»i viáº¿t hay xÃ³a Ä‘i báº¥t cá»© Ä‘iá»u gÃ¬ trÃªn báº£ng...
... thÃ¬ ngay láº­p tá»©c, táº¥t cáº£ nhá»¯ng ngÆ°á»i khÃ¡c sáº½ tháº¥y Ä‘Æ°á»£c sá»± thay Ä‘á»•i Ä‘Ã³, Ä‘Ãºng khÃ´ng?

Trong tháº¿ giá»›i cá»§a cÃ¡c luá»“ng (thread) cÅ©ng váº­y!
**TÃ­nh Hiá»ƒn Thá»‹** nghÄ©a lÃ :
Khi má»™t luá»“ng thá»±c hiá»‡n báº¥t ká»³ thay Ä‘á»•i nÃ o (vÃ­ dá»¥, nÃ³ cáº­p nháº­t giÃ¡ trá»‹ cá»§a má»™t biáº¿n), thÃ¬ nhá»¯ng thay Ä‘á»•i Ä‘Ã³ sáº½ **ngay láº­p tá»©c** Ä‘Æ°á»£c cÃ¡c luá»“ng khÃ¡c nhÃ¬n tháº¥y.
KhÃ´ng cÃ³ chuyá»‡n luá»“ng nÃ y thay Ä‘á»•i xong mÃ  luá»“ng kia váº«n nhÃ¬n tháº¥y giÃ¡ trá»‹ cÅ© Ä‘Ã¢u nhÃ©! Má»i thá»© Ä‘á»u Ä‘Æ°á»£c "cáº­p nháº­t" cho táº¥t cáº£ má»i ngÆ°á»i.
    2. **NguyÃªn tá»­ tÃ­nh:**
Khi báº¡n Ä‘á»c hoáº·c ghi dá»¯ liá»‡u vÃ o cÃ¡c biáº¿n `volatile`...
thÃ¬ toÃ n bá»™ thao tÃ¡c Ä‘Ã³ sáº½ diá»…n ra 'má»™t lÃ¨o', khÃ´ng thá»ƒ bá»‹ chia nhá» ra Ä‘Ã¢u!
(Ã€, nhá»› nhÃ©, Ä‘iá»u nÃ y Ã¡p dá»¥ng cho cÃ¡c kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y thÃ´i!)
    3. **KhÃ´ng dÃ¹ng Cache Ä‘Ã¢u nhÃ©!**

Khi báº¡n muá»‘n Ä‘á»c giÃ¡ trá»‹ cá»§a biáº¿n nÃ y, nÃ³ sáº½ *luÃ´n luÃ´n* cháº¡y tháº³ng ra *bá»™ nhá»› chÃ­nh* (RAM) Ä‘á»ƒ láº¥y. NÃ³ sáº½ *khÃ´ng bao giá»* nhÃ¬n vÃ o *bá»™ nhá»› Ä‘á»‡m cá»§a CPU* (cache) Ä‘Ã¢u.

    ```java
    public class VolatileExample {
        private volatile boolean running = true;
        
        public void stop() {
            running = false;
        }
        
        public void run() {
            while (running) {
                // Do work
            }
            System.out.println("Stopped");
        }
        
        public static void main(String[] args) throws InterruptedException {
            VolatileExample example = new VolatileExample();
            
            Thread worker = new Thread(() -> example.run());
            worker.start();
            
            Thread.sleep(1000);
            example.stop(); // This change will be visible to the worker thread
        }
    }
    ```

    **Váº­y, náº¿u KHÃ”NG DÃ™NG volatile thÃ¬ sao nhá»‰?**
    ```java
    // Without volatile, the worker thread might never see the change
    // because it may read from its local cache
    private boolean running = true; // Thread may cache this value
    ```

    **`volatile` vÃ  `synchronized`: ChÃºng khÃ¡c nhau á»Ÿ Ä‘Ã¢u nhá»‰?**
    | `volatile` | `synchronized` |
|---|---|
| **NÃ³ lÃ m gÃ¬?**<br>TÆ°á»Ÿng tÆ°á»£ng má»—i luá»“ng (thread) cÃ³ má»™t báº£n sao "nhÃ¡p" cá»§a biáº¿n. `volatile` nÃ³i: "Bá» cÃ¡i báº£n nhÃ¡p Ä‘Ã³ Ä‘i! LuÃ´n luÃ´n Ä‘á»c giÃ¡ trá»‹ *chÃ­nh thá»©c* tá»« cÃ¡i báº£ng thÃ´ng bÃ¡o chung (bá»™ nhá»› chÃ­nh) vÃ  náº¿u cÃ³ thay Ä‘á»•i gÃ¬, pháº£i ghi ngay lÃªn báº£ng thÃ´ng bÃ¡o Ä‘Ã³!"<br>TÃ³m láº¡i, nÃ³ Ä‘áº£m báº£o tÃ­nh *hiá»ƒn thá»‹* (visibility) cho cÃ¡c thay Ä‘á»•i cá»§a biáº¿n giá»¯a cÃ¡c luá»“ng. | **NÃ³ lÃ m gÃ¬?**<br>NÃ³ giá»‘ng nhÆ° má»™t "ngÆ°á»i gÃ¡c cá»•ng" cho má»™t cÄƒn phÃ²ng Ä‘áº·c biá»‡t váº­y! Chá»‰ *má»™t* luá»“ng duy nháº¥t Ä‘Æ°á»£c phÃ©p vÃ o cÄƒn phÃ²ng (khá»‘i lá»‡nh hoáº·c phÆ°Æ¡ng thá»©c `synchronized`) táº¡i má»™t thá»i Ä‘iá»ƒm. ÄÃ¢y chÃ­nh lÃ  tÃ­nh *loáº¡i trá»« láº«n nhau* (mutual exclusion)!<br>Ã€, khi má»™t luá»“ng rá»i phÃ²ng, nÃ³ sáº½ "cáº­p nháº­t báº£ng thÃ´ng bÃ¡o chung" vÃ  khi luá»“ng khÃ¡c vÃ o, nÃ³ sáº½ "Ä‘á»c báº£ng thÃ´ng bÃ¡o chung" Ä‘á»ƒ cÃ³ thÃ´ng tin má»›i nháº¥t. Váº­y lÃ  nÃ³ cÅ©ng Ä‘áº£m báº£o tÃ­nh *hiá»ƒn thá»‹* ná»¯a! |
| **Khi nÃ o dÃ¹ng?**<br>Khi báº¡n chá»‰ cáº§n cháº¯c cháº¯n ráº±ng giÃ¡ trá»‹ má»›i nháº¥t cá»§a *má»™t biáº¿n Ä‘Æ¡n láº»* luÃ´n Ä‘Æ°á»£c táº¥t cáº£ cÃ¡c luá»“ng khÃ¡c nhÃ¬n tháº¥y má»™t cÃ¡ch chÃ­nh xÃ¡c. VÃ­ dá»¥, má»™t biáº¿n cá» hiá»‡u (flag) kiá»ƒu `boolean` Ä‘á»ƒ dá»«ng má»™t luá»“ng. | **Khi nÃ o dÃ¹ng?**<br>Khi báº¡n cáº§n báº£o vá»‡ má»™t *khá»‘i mÃ£* hoáº·c *phÆ°Æ¡ng thá»©c* mÃ  khÃ´ng muá»‘n nhiá»u luá»“ng cháº¡y cÃ¹ng lÃºc, Ä‘á»ƒ trÃ¡nh cÃ¡c váº¥n Ä‘á» vá» dá»¯ liá»‡u (race conditions). VÃ­ dá»¥, khi báº¡n Ä‘ang cáº­p nháº­t má»™t cáº¥u trÃºc dá»¯ liá»‡u phá»©c táº¡p hoáº·c nhiá»u biáº¿n cÃ¹ng lÃºc. |
| **Hoáº¡t Ä‘á»™ng tháº¿ nÃ o (Ä‘Æ¡n giáº£n thÃ´i nha)?**<br>NÃ³ "mÃ¡ch" cho MÃ¡y áº£o Java (JVM) biáº¿t ráº±ng: "Vá»›i biáº¿n nÃ y, hÃ£y luÃ´n Ä‘á»c giÃ¡ trá»‹ cá»§a nÃ³ trá»±c tiáº¿p tá»« bá»™ nhá»› chÃ­nh (main memory) vÃ  ghi má»i thay Ä‘á»•i ngÆ°á»£c láº¡i bá»™ nhá»› chÃ­nh ngay láº­p tá»©c nhÃ©!" KhÃ´ng cÃ³ chuyá»‡n lÆ°u trá»¯ cá»¥c bá»™ riÃªng cho tá»«ng luá»“ng Ä‘á»‘i vá»›i biáº¿n nÃ y Ä‘Ã¢u! | **Hoáº¡t Ä‘á»™ng tháº¿ nÃ o (Ä‘Æ¡n giáº£n thÃ´i nha)?**<br>NÃ³ sá»­ dá»¥ng má»™t "khÃ³a" (lock) gáº¯n liá»n vá»›i má»™t Ä‘á»‘i tÆ°á»£ng. TrÆ°á»›c khi vÃ o khá»‘i `synchronized`, má»™t luá»“ng sáº½ cá»‘ gáº¯ng "giÃ nh" láº¥y cÃ¡i khÃ³a Ä‘Ã³. Náº¿u khÃ³a Ä‘ang ráº£nh, luá»“ng sáº½ láº¥y Ä‘Æ°á»£c nÃ³ vÃ  bÆ°á»›c vÃ o. CÃ¡c luá»“ng khÃ¡c sáº½ pháº£i *chá» Ä‘á»£i* cho Ä‘áº¿n khi cÃ¡i khÃ³a Ä‘Æ°á»£c nháº£ ra. Khi má»™t luá»“ng rá»i Ä‘i, nÃ³ sáº½ nháº£ khÃ³a vÃ  Ä‘áº£m báº£o má»i thay Ä‘á»•i cá»§a nÃ³ Ä‘Æ°á»£c ghi vÃ o bá»™ nhá»› chÃ­nh. |
| **Vá» tÃ­nh nguyÃªn tá»­ (atomicity)?**<br>NÃ³ *khÃ´ng* Ä‘áº£m báº£o ráº±ng cÃ¡c thao tÃ¡c gá»“m nhiá»u bÆ°á»›c (nhÆ° `i++`, mÃ  thá»±c ra lÃ  Ä‘á»c `i`, tÄƒng `i` lÃªn 1, rá»“i ghi `i` láº¡i) lÃ  *nguyÃªn tá»­* (atomic). Tá»©c lÃ , giá»¯a lÃºc Ä‘á»c vÃ  ghi, má»™t luá»“ng khÃ¡c váº«n cÃ³ thá»ƒ chen vÃ o lÃ m há»ng káº¿t quáº£. | *CÃ³* Ä‘áº£m báº£o tÃ­nh nguyÃªn tá»­ cho *toÃ n bá»™ khá»‘i lá»‡nh* hoáº·c phÆ°Æ¡ng thá»©c Ä‘Æ°á»£c báº£o vá»‡. Tá»©c lÃ , má»™t khi má»™t luá»“ng Ä‘Ã£ vÃ o khá»‘i `synchronized`, nÃ³ sáº½ hoÃ n thÃ nh táº¥t cáº£ cÃ¡c bÆ°á»›c bÃªn trong mÃ  khÃ´ng bá»‹ luá»“ng khÃ¡c chen ngang. |
| **Hiá»‡u nÄƒng:**<br>"Nháº¹ nhÃ ng" hÆ¡n nhiá»u so vá»›i `synchronized`. NÃ³ Ã­t gÃ¢y ra sá»± cháº­m trá»… hÆ¡n. | "Náº·ng Ä‘Ã´" hÆ¡n. Viá»‡c giÃ nh vÃ  nháº£ khÃ³a cÃ³ thá»ƒ tá»‘n tÃ i nguyÃªn vÃ  gÃ¢y ra sá»± cháº­m trá»… hÆ¡n. |
| **Pháº¡m vi tÃ¡c Ä‘á»™ng:**<br>Chá»‰ tÃ¡c Ä‘á»™ng Ä‘áº¿n *má»™t biáº¿n cá»¥ thá»ƒ* mÃ  nÃ³ Ä‘Æ°á»£c khai bÃ¡o lÃ  `volatile`. | TÃ¡c Ä‘á»™ng Ä‘áº¿n *má»™t khá»‘i mÃ£ hoáº·c phÆ°Æ¡ng thá»©c* vÃ  táº¥t cáº£ cÃ¡c biáº¿n bÃªn trong khá»‘i Ä‘Ã³. |
    |----------|--------------|
    | Chá»‰ Ä‘áº£m báº£o tÃ­nh hiá»ƒn thá»‹ | Äáº£m báº£o tÃ­nh hiá»ƒn thá»‹ VÃ€ tÃ­nh nguyÃªn tá»­ |
|---|---|
| TÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t cuá»‘n sá»• tay chung nhÃ©! | CÅ©ng lÃ  cuá»‘n sá»• tay chung Ä‘Ã³! |
| Má»™t ngÆ°á»i báº¡n ghi chÃº gÃ¬ Ä‘Ã³ vÃ o sá»•. | Äáº§u tiÃªn, nÃ³ váº«n Ä‘áº£m báº£o tÃ­nh hiá»ƒn thá»‹: ai Ä‘Ã³ ghi gÃ¬, ngÆ°á»i khÃ¡c *cháº¯c cháº¯n sáº½ tháº¥y*. (Y há»‡t cÃ¡i bÃªn trÃ¡i, Ä‘Ãºng khÃ´ng?) |
| TÃ­nh hiá»ƒn thá»‹ nghÄ©a lÃ : nhá»¯ng ngÆ°á»i khÃ¡c *cháº¯c cháº¯n sáº½ nhÃ¬n tháº¥y* Ä‘Æ°á»£c ghi chÃº má»›i cá»§a báº¡n. | NhÆ°ng cÃ³ thÃªm má»™t "siÃªu nÄƒng lá»±c" ná»¯a lÃ  **tÃ­nh nguyÃªn tá»­** (atomicity)! |
| Tháº¿ thÃ´i. NÃ³ chá»‰ Ä‘áº£m báº£o má»i ngÆ°á»i nhÃ¬n tháº¥y nhá»¯ng thay Ä‘á»•i. | TÃ­nh nguyÃªn tá»­ nghÄ©a lÃ : Náº¿u báº¡n nÃ³i "tÃ´i sáº½ viáº¿t Cáº¢ Má»˜T CÃ‚U dÃ i nÃ y!", thÃ¬ khÃ´ng ai cÃ³ thá»ƒ chen ngang, viáº¿t ná»­a chá»¯ hay lÃ m gÃ¬ Ä‘Ã³ *trong khi* báº¡n Ä‘ang viáº¿t Ä‘Ã¢u nhÃ©. |
| NÃ³ khÃ´ng lo láº¯ng vá» viá»‡c náº¿u hai ngÆ°á»i cÃ¹ng lÃºc muá»‘n ghi vÃ o má»™t chá»— thÃ¬ sao, hay náº¿u má»™t hÃ nh Ä‘á»™ng cáº§n nhiá»u bÆ°á»›c thÃ¬ sao. | Cáº£ cÃ¢u Ä‘Ã³ pháº£i Ä‘Æ°á»£c viáº¿t xong XUÃ”I, trá»n váº¹n, khÃ´ng bá»‹ giÃ¡n Ä‘oáº¡n. |
| Chá»‰ lÃ  "Ã , tháº¥y rá»“i nhÃ©!". | Chá»‰ khi nÃ o báº¡n viáº¿t xong *hoÃ n toÃ n* rá»“i, thÃ¬ ngÆ°á»i khÃ¡c má»›i cÃ³ thá»ƒ báº¯t Ä‘áº§u lÃ m viá»‡c cá»§a há». NÃ³ giá»‘ng nhÆ° cÃ³ má»™t "cÃ¡i khÃ³a nhá»" báº£o vá»‡ cho *tá»«ng hÃ nh Ä‘á»™ng* riÃªng láº», Ä‘áº£m báº£o hÃ nh Ä‘á»™ng Ä‘Ã³ diá»…n ra trá»n váº¹n, khÃ´ng bá»‹ ai phÃ¡ Ä‘Ã¡m giá»¯a chá»«ng. |
    | KhÃ´ng lÃ m báº¡n pháº£i chá»! | LÃ m báº¡n pháº£i chá»! |
    | KhÃ´ng dÃ¹ng Ä‘Æ°á»£c cho cÃ¡c thao tÃ¡c phá»©c há»£p (kiá»ƒu lÃ m nhiá»u viá»‡c má»™t lÃºc) | CÃ³ thá»ƒ báº£o vá»‡ cÃ¡c thao tÃ¡c phá»©c há»£p (giÃºp chÃºng khÃ´ng bá»‹ 'Ä‘á»¥ng' nhau) |
    | Ãt viá»‡c pháº£i lÃ m thÃªm | Nhiá»u viá»‡c pháº£i lÃ m thÃªm |

    **NÃ y, cÃ³ má»™t ÄIá»€U QUAN TRá»ŒNG báº¡n cáº§n nhá»› nhÃ©!**
CÃ¡i `volatile` Ä‘Ã³, nÃ³ KHÃ”NG PHÃ™ Há»¢P chÃºt nÃ o Ä‘Ã¢u
cho máº¥y cÃ¡i "thao tÃ¡c phá»©c há»£p" (mÃ  nÃ³ cÃ³ nhiá»u bÆ°á»›c áº¥y).
Kiá»ƒu nhÆ°... `count++`. HÃ£y dÃ¹ng nÃ³ nhÃ©. `AtomicInteger` ChÃ o báº¡n! ChÃºng ta cÃ¹ng tÃ¬m hiá»ƒu tá»« `or` nhÃ©.

Trong tiáº¿ng Viá»‡t, `or` cÃ³ nghÄ©a lÃ  **hoáº·c**.

NghÄ© Ä‘Æ¡n giáº£n tháº¿ nÃ y nÃ¨:

Khi báº¡n nÃ³i "Báº¡n cÃ³ thá»ƒ Äƒn bÃ¡nh quy **hoáº·c** Äƒn má»™t quáº£ tÃ¡o."

Äiá»u nÃ y cÃ³ nghÄ©a lÃ  báº¡n cÃ³ hai lá»±a chá»n, vÃ  báº¡n chá»‰ cáº§n chá»n *má»™t trong hai* lÃ  Ä‘Æ°á»£c.

Trong láº­p trÃ¬nh, `hoáº·c` (hay `or`) cÅ©ng hoáº¡t Ä‘á»™ng tÆ°Æ¡ng tá»± váº­y Ä‘Ã³!

VÃ­ dá»¥, báº¡n muá»‘n Ä‘i chÆ¡i náº¿u trá»i **khÃ´ng mÆ°a** `hoáº·c` **lÃ  cuá»‘i tuáº§n**.

*   Náº¿u trá»i khÃ´ng mÆ°a (dÃ¹ khÃ´ng pháº£i cuá»‘i tuáº§n), báº¡n váº«n Ä‘i chÆ¡i!
*   Náº¿u lÃ  cuá»‘i tuáº§n (dÃ¹ trá»i cÃ³ mÆ°a), báº¡n váº«n Ä‘i chÆ¡i!
*   Náº¿u trá»i vá»«a khÃ´ng mÆ°a *láº¡i vá»«a* lÃ  cuá»‘i tuáº§n, thÃ¬ quÃ¡ tuyá»‡t vá»i rá»“i, báº¡n cháº¯c cháº¯n Ä‘i chÆ¡i!

Váº­y tÃ³m láº¡i, `hoáº·c` cÃ³ nghÄ©a lÃ : **chá»‰ cáº§n *Ã­t nháº¥t má»™t* Ä‘iá»u kiá»‡n Ä‘Ãºng thÃ¬ toÃ n bá»™ cÃ¢u lá»‡nh sáº½ Ä‘Ãºng.**

Dá»… hiá»ƒu pháº£i khÃ´ng nÃ o? `synchronized` **Ã€, chÃ­nh lÃ  dÃ nh cho nhá»¯ng trÆ°á»ng há»£p nhÆ° tháº¿ Ä‘Ã³!**

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

36. ### Æ  kÃ¬a, cÃ¡i tá»« khÃ³a 'transient' trong Java nÃ³ lÃ m gÃ¬ tháº¿ nhá»‰?

    Ã€, chÃ­nh lÃ ... `transient` Báº¡n biáº¿t khÃ´ng, trong Java, Ä‘Ã´i khi chÃºng ta cáº§n biáº¿n má»™t Ä‘á»‘i tÆ°á»£ng (object) thÃ nh má»™t chuá»—i byte (byte stream) Ä‘á»ƒ lÆ°u trá»¯ hoáº·c gá»­i Ä‘i. QuÃ¡ trÃ¬nh nÃ y gá»i lÃ  **serialization** (tuáº§n tá»± hÃ³a).

NhÆ°ng sáº½ cÃ³ lÃºc báº¡n muá»‘n má»™t trÆ°á»ng (field) cá»¥ thá»ƒ trong Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ *khÃ´ng* Ä‘Æ°á»£c biáº¿n thÃ nh byte vÃ  *khÃ´ng* Ä‘Æ°á»£c Ä‘Æ°a vÃ o chuá»—i byte cuá»‘i cÃ¹ng. CÃ³ thá»ƒ Ä‘Ã³ lÃ  dá»¯ liá»‡u nháº¡y cáº£m hoáº·c khÃ´ng cáº§n thiáº¿t.

ÄÃ³ chÃ­nh lÃ  lÃºc tá»« khÃ³a `transient` xuáº¥t hiá»‡n!

Báº¡n dÃ¹ng `transient` Ä‘á»ƒ "Ä‘Ã¡nh dáº¥u" má»™t trÆ°á»ng. Khi Java thá»±c hiá»‡n serialization, nÃ³ sáº½ nhÃ¬n tháº¥y `transient` vÃ  biáº¿t ngay: "Ã€, trÆ°á»ng nÃ y khÃ´ng Ä‘Æ°á»£c phÃ©p tham gia vÃ o quÃ¡ trÃ¬nh Ä‘Ã³ng gÃ³i!"

NÃ³i cÃ¡ch khÃ¡c, tá»« khÃ³a `transient` Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ chá»‰ ra ráº±ng má»™t trÆ°á»ng *khÃ´ng nÃªn* Ä‘Æ°á»£c tuáº§n tá»± hÃ³a (serialized) khi Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i thÃ nh má»™t chuá»—i byte.

    **CÃ¡c TÃ¬nh Huá»‘ng Sá»­ Dá»¥ng:**
    - Dá»¯ liá»‡u nháº¡y cáº£m (sensitive data) - máº¥y cÃ¡i thÃ´ng tin *siÃªu bÃ­ máº­t* áº¥y, vÃ­ dá»¥ nhÆ° **máº­t kháº©u (passwords)** cá»§a báº¡n.
    - NÃ y báº¡n, Ä‘Ã£ bao giá» báº¡n nghe nÃ³i vá» 'trÆ°á»ng Ä‘Æ°á»£c tÃ­nh toÃ¡n' (calculated fields) hay 'trÆ°á»ng dáº«n xuáº¥t' (derived fields) chÆ°a? Nghe cÃ³ váº» hÆ¡i "cao siÃªu" nhá»‰? Äá»«ng lo!

HÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©: báº¡n cÃ³ thÃ´ng tin vá» má»™t ngÆ°á»i, vÃ­ dá»¥ nhÆ° `firstName` (tÃªn) vÃ  `lastName` (há») cá»§a há».

Báº¡n cÃ³ thá»ƒ táº¡o thÃªm má»™t chá»— Ä‘á»ƒ lÆ°u `fullName` (há» vÃ  tÃªn Ä‘áº§y Ä‘á»§) ná»¯a. NhÆ°ng cÃ³ má»™t váº¥n Ä‘á»: náº¿u tÃªn cá»§a ngÆ°á»i Ä‘Ã³ thay Ä‘á»•i thÃ¬ sao? Báº¡n sáº½ pháº£i cáº­p nháº­t `firstName`, `lastName`, VÃ€ cáº£ `fullName` ná»¯a! OÃ¡i, ráº¯c rá»‘i quÃ¡ Ä‘i máº¥t.

Thay vÃ o Ä‘Ã³, táº¡i sao chÃºng ta khÃ´ng *tÃ­nh toÃ¡n* `fullName` má»—i khi chÃºng ta cáº§n nÃ³ nhá»‰?
ChÃºng ta cÃ³ thá»ƒ nÃ³i: "NÃ y `fullName`, cá»© láº¥y `firstName` rá»“i ghÃ©p vá»›i `lastName` lÃ  xong!"

Váº­y nÃªn, má»™t **trÆ°á»ng Ä‘Æ°á»£c tÃ­nh toÃ¡n** (hay **trÆ°á»ng dáº«n xuáº¥t**) giá»‘ng nhÆ° má»™t anh báº¡n trá»£ lÃ½ thÃ´ng minh váº­y.
NÃ³ khÃ´ng tá»± lÆ°u trá»¯ giÃ¡ trá»‹ cá»§a mÃ¬nh Ä‘Ã¢u. KhÃ´ng há»!
MÃ  thay vÃ o Ä‘Ã³, nÃ³ sáº½ *tá»± tÃ¬m ra* giÃ¡ trá»‹ cá»§a mÃ¬nh báº±ng cÃ¡ch nhÃ¬n vÃ o cÃ¡c thÃ´ng tin khÃ¡c Ä‘Ã£ cÃ³ sáºµn rá»“i.

HÃ£y nghÄ© theo cÃ¡ch nÃ y nhÃ©:
*   Báº¡n cÃ³ `price` (giÃ¡) vÃ  `quantity` (sá»‘ lÆ°á»£ng).
*   Báº¡n khÃ´ng cáº§n pháº£i lÆ°u trá»¯ `totalPrice` (tá»•ng giÃ¡).
*   Thay vÃ o Ä‘Ã³, `totalPrice` Ä‘Æ¡n giáº£n chá»‰ lÃ  `price * quantity`, Ä‘Ãºng khÃ´ng nÃ o?
*   Má»—i khi báº¡n há»i `totalPrice`, nÃ³ sáº½ thá»±c hiá»‡n phÃ©p nhÃ¢n ngay láº­p tá»©c, táº¡i thá»i Ä‘iá»ƒm Ä‘Ã³.

Tuyá»‡t vá»i Ä‘Ãºng khÃ´ng? NÃ³ giÃºp dá»¯ liá»‡u cá»§a báº¡n luÃ´n gá»n gÃ ng, ngÄƒn náº¯p vÃ  luÃ´n Ä‘Æ°á»£c cáº­p nháº­t!
    - ChÃ o báº¡n cá»§a nhá»¯ng Ä‘á»‘i tÆ°á»£ng! Báº¡n cÃ²n nhá»› cÃ¡ch chÃºng ta cÃ³ thá»ƒ lÆ°u toÃ n bá»™ Ä‘á»‘i tÆ°á»£ng vÃ o má»™t file hay gá»­i chÃºng qua máº¡ng khÃ´ng? ÄÃ³ chÃ­nh lÃ  'tuáº§n tá»± hÃ³a' (serialization) Ä‘Ã³. NÃ³ giá»‘ng nhÆ° viá»‡c báº¡n Ä‘Ã³ng gÃ³i Ä‘á»‘i tÆ°á»£ng cá»§a mÃ¬nh vÃ o má»™t cÃ¡i há»™p gá»n gÃ ng váº­y.

NhÆ°ng khoan Ä‘Ã£! Äiá»u gÃ¬ sáº½ xáº£y ra náº¿u Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n cÃ³ má»™t vÃ i *thá»©* bÃªn trong mÃ  báº¡n *khÃ´ng muá»‘n* Ä‘Ã³ng gÃ³i? Hoáº·c cÃ³ thá»ƒ Ä‘Ã³ lÃ  nhá»¯ng thá»© *khÃ´ng thá»ƒ* Ä‘Ã³ng gÃ³i Ä‘Æ°á»£c?

ÄÃ³ chÃ­nh lÃ  lÃºc chÃºng ta gáº·p gá»¡ **cÃ¡c trÆ°á»ng khÃ´ng thá»ƒ tuáº§n tá»± hÃ³a** (non-serializable fields)!

HÃ£y tÆ°á»Ÿng tÆ°á»£ng Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n cÃ³ má»™t máº­t kháº©u siÃªu bÃ­ máº­t mÃ  *khÃ´ng bao giá»* Ä‘Æ°á»£c lÆ°u láº¡i. Hoáº·c cÃ³ thá»ƒ nÃ³ Ä‘ang giá»¯ má»™t káº¿t ná»‘i trá»±c tiáº¿p Ä‘áº¿n cÆ¡ sá»Ÿ dá»¯ liá»‡u â€“ báº¡n khÃ´ng thá»ƒ 'lÆ°u' má»™t káº¿t ná»‘i Ä‘ang hoáº¡t Ä‘á»™ng vÃ  mong nÃ³ sáº½ tá»± Ä‘á»™ng hoáº¡t Ä‘á»™ng trá»Ÿ láº¡i sau nÃ y Ä‘Æ°á»£c!

ÄÃ¢y lÃ  nhá»¯ng trÆ°á»ng mÃ :
*   Chá»©a dá»¯ liá»‡u mÃ  báº¡n *khÃ´ng muá»‘n* lÆ°u trá»¯ (nhÆ° cÃ¡c phÃ©p tÃ­nh táº¡m thá»i hoáº·c thÃ´ng tin nháº¡y cáº£m).
*   Tham chiáº¿u Ä‘áº¿n cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c mÃ  báº£n thÃ¢n chÃºng *khÃ´ng pháº£i* lÃ  `Serializable`. (á»i chÃ ! Náº¿u má»™t pháº§n cá»§a Ä‘á»‘i tÆ°á»£ng báº¡n khÃ´ng thá»ƒ Ä‘Ã³ng gÃ³i, thÃ¬ toÃ n bá»™ quÃ¡ trÃ¬nh cÃ³ thá»ƒ bá»‹ káº¹t Ä‘Ã³!)

Váº­y, báº¡n sáº½ lÃ m gÃ¬ vá»›i nhá»¯ng trÆ°á»ng 'khÃ³ tÃ­nh' nÃ y? Báº¡n sáº½ Ä‘Ã¡nh dáº¥u chÃºng lÃ  `transient`. NÃ³ giá»‘ng nhÆ° viá»‡c báº¡n dÃ¡n má»™t nhÃ£n lá»›n 'KHÃ”NG ÄÆ¯á»¢C ÄÃ“NG GÃ“I' lÃªn chÃºng váº­y. Khi báº¡n tuáº§n tá»± hÃ³a Ä‘á»‘i tÆ°á»£ng cá»§a mÃ¬nh, cÃ¡c trÆ°á»ng `transient` sáº½ bá»‹ bá» qua. ChÃºng sáº½ khÃ´ng Ä‘Æ°á»£c lÆ°u, vÃ  khi báº¡n táº£i Ä‘á»‘i tÆ°á»£ng trá»Ÿ láº¡i, chÃºng sáº½ chá»‰ Ä‘Æ°á»£c gÃ¡n giÃ¡ trá»‹ máº·c Ä‘á»‹nh (nhÆ° `null` cho Ä‘á»‘i tÆ°á»£ng hoáº·c `0` cho sá»‘).

Dá»… á»£t, pháº£i khÃ´ng nÃ o?
    - ### Dá»¯ liá»‡u cá»¥c bá»™ cá»§a Thread: Kho bÃ¡u bÃ­ máº­t cá»§a riÃªng báº¡n!

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang á»Ÿ má»™t bá»¯a tiá»‡c code lá»›n, vÃ  má»i ngÆ°á»i Ä‘á»u Ä‘ang lÃ m viá»‡c trÃªn cÃ¹ng má»™t báº£ng tráº¯ng khá»•ng lá»“. Há»—n loáº¡n! NgÆ°á»i nÃ y viáº¿t má»™t cÃ¡i gÃ¬ Ä‘Ã³, ngÆ°á»i kia xÃ³a nÃ³. Tháº­t lÃ  má»™t má»› bÃ²ng bong!

BÃ¢y giá», hÃ£y tÆ°á»Ÿng tÆ°á»£ng má»i ngÆ°á»i Ä‘á»u cÃ³ *cuá»‘n sá»• tay cÃ¡ nhÃ¢n cá»§a riÃªng mÃ¬nh*. Báº¡n cÃ³ thá»ƒ viáº¿t báº¥t cá»© thá»© gÃ¬ báº¡n muá»‘n vÃ o sá»• tay cá»§a mÃ¬nh, vÃ  khÃ´ng ai khÃ¡c cÃ³ thá»ƒ nhÃ¬n tháº¥y hoáº·c cháº¡m vÃ o nÃ³. Ã€, tháº­t yÃªn bÃ¬nh!

ÄÃ³ chÃ­nh lÃ  cÃ¢u chuyá»‡n vá» "Dá»¯ liá»‡u cá»¥c bá»™ cá»§a Thread" (Thread-local data) Ä‘áº¥y!

Khi báº¡n cÃ³ nhiá»u thread Ä‘ang cháº¡y (hÃ£y nghÄ© chÃºng nhÆ° nhá»¯ng ngÆ°á»i báº¡n láº­p trÃ¬nh cá»§a báº¡n), chÃºng thÆ°á»ng cáº§n truy cáº­p má»™t sá»‘ dá»¯ liá»‡u. ThÃ´ng thÆ°á»ng, náº¿u táº¥t cáº£ chÃºng Ä‘á»u truy cáº­p *cÃ¹ng má»™t* biáº¿n, má»i thá»© cÃ³ thá»ƒ trá»Ÿ nÃªn ráº¯c rá»‘i. ChÃºng cÃ³ thá»ƒ ghi Ä‘Ã¨ lÃªn nhá»¯ng thay Ä‘á»•i cá»§a nhau, dáº«n Ä‘áº¿n nhá»¯ng lá»—i siÃªu khÃ³ tÃ¬m.

NhÆ°ng Ä‘iá»u gÃ¬ sáº½ xáº£y ra náº¿u má»—i thread cáº§n *báº£n sao riÃªng cá»§a nÃ³* cá»§a má»™t biáº¿n? Má»™t biáº¿n mÃ  *chá»‰ thread Ä‘Ã³* má»›i cÃ³ thá»ƒ nhÃ¬n tháº¥y vÃ  sá»­a Ä‘á»•i? ÄÃ³ lÃ  lÃºc dá»¯ liá»‡u cá»¥c bá»™ cá»§a thread tá»a sÃ¡ng!

Java cung cáº¥p cho báº¡n má»™t cÃ´ng cá»¥ Ä‘áº·c biá»‡t cho viá»‡c nÃ y: lá»›p `ThreadLocal`.

**`ThreadLocal` hoáº¡t Ä‘á»™ng ká»³ diá»‡u nhÆ° tháº¿ nÃ o?**

NÃ³ khÃ¡ Ä‘Æ¡n giáº£n:

1.  **Báº¡n táº¡o má»™t Ä‘á»‘i tÆ°á»£ng `ThreadLocal`.** HÃ£y nghÄ© nÃ³ nhÆ° viá»‡c thiáº¿t láº­p má»™t há»‡ thá»‘ng "tá»§ khÃ³a riÃªng" Ä‘áº·c biá»‡t.
2.  **Má»—i thread, khi muá»‘n lÆ°u trá»¯ thá»© gÃ¬ Ä‘Ã³, sáº½ gá»i `set()` trÃªn Ä‘á»‘i tÆ°á»£ng `ThreadLocal` Ä‘Ã³.** Giá»‘ng nhÆ° viá»‡c báº¡n Ä‘áº·t Ä‘á»“ cá»§a mÃ¬nh vÃ o *tá»§ khÃ³a cá»§a riÃªng báº¡n* váº­y.
3.  **Sau Ä‘Ã³, khi má»™t thread muá»‘n láº¥y láº¡i Ä‘á»“ cá»§a mÃ¬nh, nÃ³ sáº½ gá»i `get()` trÃªn *cÃ¹ng* Ä‘á»‘i tÆ°á»£ng `ThreadLocal` Ä‘Ã³.** VÃ  Ä‘oÃ¡n xem? NÃ³ sáº½ nháº­n Ä‘Æ°á»£c *chÃ­nh xÃ¡c thá»© mÃ  nÃ³ Ä‘Ã£ Ä‘áº·t vÃ o*, chá»© khÃ´ng pháº£i thá»© mÃ  má»™t thread khÃ¡c Ä‘Ã£ Ä‘áº·t vÃ o!

**Ã tÆ°á»Ÿng lá»›n:** Má»—i thread nháº­n Ä‘Æ°á»£c *báº£n sao Ä‘á»™c nháº¥t cá»§a riÃªng nÃ³* cá»§a giÃ¡ trá»‹ liÃªn quan Ä‘áº¿n thá»ƒ hiá»‡n `ThreadLocal` Ä‘Ã³. NÃ³ giá»‘ng nhÆ° phÃ©p thuáº­t, nhÆ°ng thá»±c ra chá»‰ lÃ  má»™t thiáº¿t káº¿ tá»‘t mÃ  thÃ´i!

**Táº¡i sao Ä‘iá»u nÃ y láº¡i hay ho?**

*   **KhÃ´ng chia sáº», khÃ´ng váº¥n Ä‘á»!** Báº¡n trÃ¡nh Ä‘Æ°á»£c nhá»¯ng cÆ¡n Ä‘au Ä‘áº§u khi nhiá»u thread cá»‘ gáº¯ng sá»­a Ä‘á»•i cÃ¹ng má»™t dá»¯ liá»‡u.
*   **Má»—i thread cÃ³ ngá»¯ cáº£nh riÃªng.** NÃ³ hoÃ n háº£o cho nhá»¯ng thá»© nhÆ° ID ngÆ°á»i dÃ¹ng, ID giao dá»‹ch, hoáº·c cÃ¡c cáº¥u hÃ¬nh cá»¥ thá»ƒ mÃ  Ä‘Ã¡ng láº½ pháº£i lÃ  duy nháº¥t cho Ä‘Æ°á»ng dáº«n thá»±c thi cá»§a má»™t thread.

**HÃ£y xem má»™t Ã­t code nhÃ©!**

```java
import java.util.concurrent.ThreadLocalRandom;

public class ThreadLocalExample {

    // ÄÃ¢y lÃ  "sá»• tay cÃ¡ nhÃ¢n" ThreadLocal Ä‘áº·c biá»‡t cá»§a chÃºng ta dÃ nh cho sá»‘ nguyÃªn
    private static final ThreadLocal<Integer> threadId = new ThreadLocal<Integer>() {
        @Override
        protected Integer initialValue() {
            // Má»—i thread sáº½ nháº­n má»™t ID ngáº«u nhiÃªn duy nháº¥t khi nÃ³ yÃªu cáº§u láº§n Ä‘áº§u tiÃªn
            return ThreadLocalRandom.current().nextInt(1000);
        }
    };

    public static void main(String[] args) throws InterruptedException {

        Runnable task = () -> {
            System.out.println(Thread.currentThread().getName() + " Ä‘ang báº¯t Ä‘áº§u...");

            // Láº¥y ID duy nháº¥t cá»§a *thread nÃ y*
            Integer myId = threadId.get();
            System.out.println(Thread.currentThread().getName() + " nÃ³i: ID cá»§a tÃ´i lÃ  " + myId);

            // Báº¡n cÅ©ng cÃ³ thá»ƒ thay Ä‘á»•i ID cá»§a riÃªng mÃ¬nh!
            threadId.set(myId + 1000);
            System.out.println(Thread.currentThread().getName() + " nÃ³i: ID Má»šI cá»§a tÃ´i lÃ  " + threadId.get());

            System.out.println(Thread.currentThread().getName() + " Ä‘ang káº¿t thÃºc.");
        };

        Thread thread1 = new Thread(task, "Thread-Alpha");
        Thread thread2 = new Thread(task, "Thread-Beta");
        Thread thread3 = new Thread(task, "Thread-Gamma");

        thread1.start();
        thread2.start();
        thread3.start();

        thread1.join();
        thread2.join();
        thread3.join();

        System.out.println("Táº¥t cáº£ cÃ¡c thread Ä‘Ã£ xong!");
    }
}
```

Khi báº¡n cháº¡y Ä‘oáº¡n code nÃ y, báº¡n sáº½ tháº¥y "Thread-Alpha" nháº­n ID cá»§a riÃªng nÃ³, "Thread-Beta" nháº­n má»™t ID *khÃ¡c*, vÃ  "Thread-Gamma" láº¡i nháº­n má»™t ID khÃ¡c ná»¯a. Ngay cáº£ khi chÃºng *thay Ä‘á»•i* ID cá»§a mÃ¬nh, chÃºng cÅ©ng chá»‰ thay Ä‘á»•i *báº£n sao cá»§a riÃªng chÃºng*. Tháº­t tuyá»‡t vá»i!

    ```java
    import java.io.*;

    class User implements Serializable {
        private static final long serialVersionUID = 1L;
        
        private String username;
        private transient String password;  // Will not be serialized
        private transient int loginCount;   // Will not be serialized
        
        public User(String username, String password) {
            this.username = username;
            this.password = password;
            this.loginCount = 0;
        }
        
        @Override
        public String toString() {
            return "User{username='" + username + "', password='" + password + 
                   "', loginCount=" + loginCount + "}";
        }
    }

    public class TransientDemo {
        public static void main(String[] args) {
            User user = new User("john", "secret123");
            user.loginCount = 5;
            System.out.println("Before serialization: " + user);
            
            // Serialize
            try (ObjectOutputStream oos = new ObjectOutputStream(
                    new FileOutputStream("user.ser"))) {
                oos.writeObject(user);
            } catch (IOException e) {
                e.printStackTrace();
            }
            
            // Deserialize
            try (ObjectInputStream ois = new ObjectInputStream(
                    new FileInputStream("user.ser"))) {
                User deserializedUser = (User) ois.readObject();
                System.out.println("After deserialization: " + deserializedUser);
                // Output: User{username='john', password='null', loginCount=0}
            } catch (IOException | ClassNotFoundException e) {
                e.printStackTrace();
            }
        }
    }
    ```

    **NÃ o, cÃ¹ng Ä‘iá»ƒm qua nhá»¯ng Ã½ chÃ­nh quan trá»ng nhÃ©:**
    - Nhá»› máº¥y cÃ¡i trÆ°á»ng `transient` khÃ´ng? MÃ¬nh Ä‘Ã£ báº£o Java lÃ : "NÃ y, Ä‘á»«ng lÆ°u cÃ¡i nÃ y nhÃ©!"

Tháº¿ thÃ¬, Ä‘oÃ¡n xem chuyá»‡n gÃ¬ xáº£y ra khi báº¡n cá»‘ gáº¯ng "há»“i sinh" láº¡i Ä‘á»‘i tÆ°á»£ng tá»« dá»¯ liá»‡u Ä‘Ã£ lÆ°u (chÃ­nh lÃ  quÃ¡ trÃ¬nh giáº£i mÃ£ hÃ³a - deserialization) háº£?

VÃ¬ Java khÃ´ng lÆ°u giÃ¡ trá»‹ *tháº­t* cá»§a trÆ°á»ng `transient`, nÃªn sau khi giáº£i mÃ£ hÃ³a xong, nÃ³ sáº½ tá»± Ä‘á»™ng gÃ¡n cho trÆ°á»ng Ä‘Ã³ má»™t giÃ¡ trá»‹ máº·c Ä‘á»‹nh, giÃ¡ trá»‹ "tráº¯ng tinh" thÃ´i.

*   Náº¿u trÆ°á»ng `transient` cá»§a báº¡n lÃ  má»™t **Ä‘á»‘i tÆ°á»£ng** (kiá»ƒu nhÆ° `String` hay má»™t lá»›p khÃ¡c), nÃ³ sáº½ trá»Ÿ thÃ nh `null`.
*   Náº¿u nÃ³ lÃ  má»™t **sá»‘** (kiá»ƒu `int`, `double`...), nÃ³ sáº½ nháº­n giÃ¡ trá»‹ `0`.
*   VÃ  náº¿u nÃ³ lÃ  má»™t **boolean**, nÃ³ sáº½ thÃ nh `false`.
    - NÃ y báº¡n, hÃ´m nay chÃºng ta sáº½ cÃ¹ng khÃ¡m phÃ¡ má»™t bÃ­ máº­t nho nhá» vá» cÃ¡c trÆ°á»ng `static` vÃ  cÃ¡ch Java "Ä‘Ã³ng gÃ³i" Ä‘á»‘i tÆ°á»£ng nhÃ©!

Báº¡n cÃ²n nhá»› cÃ¡c trÆ°á»ng (field) `static` lÃ  gÃ¬ khÃ´ng? ChÃºng giá»‘ng nhÆ° má»™t cÃ¡i báº£ng thÃ´ng bÃ¡o chung cá»§a cáº£ lá»›p váº­y. Má»i há»c sinh (tá»©c lÃ  má»i Ä‘á»‘i tÆ°á»£ng) trong lá»›p Ä‘á»u nhÃ¬n tháº¥y vÃ  dÃ¹ng chung cÃ¡i báº£ng Ä‘Ã³. NÃ³ khÃ´ng pháº£i lÃ  Ä‘á»“ dÃ¹ng cÃ¡ nhÃ¢n cá»§a báº¥t ká»³ há»c sinh nÃ o cáº£, Ä‘Ãºng khÃ´ng?

Khi báº¡n "Ä‘Ã³ng gÃ³i" má»™t Ä‘á»‘i tÆ°á»£ng (hay cÃ²n gá»i lÃ  *serialization*), báº¡n Ä‘ang muá»‘n lÆ°u trá»¯ *tráº¡ng thÃ¡i riÃªng* cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Ã³. TÆ°á»Ÿng tÆ°á»£ng nhÆ° báº¡n Ä‘ang xáº¿p Ä‘á»“ cÃ¡ nhÃ¢n cá»§a mÃ¬nh vÃ o má»™t cÃ¡i há»™p Ä‘á»ƒ chuyá»ƒn nhÃ  váº­y. Báº¡n sáº½ chá»‰ gÃ³i nhá»¯ng thá»© *thuá»™c vá» riÃªng báº¡n* thÃ´i.

Váº­y thÃ¬, cÃ¡i báº£ng thÃ´ng bÃ¡o chung cá»§a cáº£ lá»›p (trÆ°á»ng `static`) cÃ³ Ä‘Æ°á»£c gÃ³i vÃ o há»™p Ä‘á»“ cá»§a *riÃªng báº¡n* khÃ´ng?

DÄ© nhiÃªn lÃ  khÃ´ng rá»“i! NÃ³ thuá»™c vá» *cáº£ lá»›p*, khÃ´ng pháº£i cá»§a má»™t Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ nÃ o.

ChÃ­nh xÃ¡c! CÃ¡c trÆ°á»ng `static` **KHÃ”NG BAO GIá»œ** Ä‘Æ°á»£c "Ä‘Ã³ng gÃ³i" hay "lÆ°u trá»¯" (serialize) cÃ¹ng vá»›i má»™t Ä‘á»‘i tÆ°á»£ng. ChÃºng luÃ´n á»Ÿ bÃªn ngoÃ i, thuá»™c vá» lá»›p, chá»© khÃ´ng pháº£i lÃ  má»™t pháº§n riÃªng cá»§a tá»«ng Ä‘á»‘i tÆ°á»£ng.

Tháº¿ cÃ²n tá»« khÃ³a `transient` thÃ¬ sao nhá»‰?

Báº¡n cÃ²n nhá»› `transient` lÃ m gÃ¬ khÃ´ng? NÃ³ giá»‘ng nhÆ° báº¡n dÃ¡n má»™t cÃ¡i nhÃ£n "Äá»ªNG GÃ“I CÃI NÃ€Y VÃ€O Há»˜P NHÃ‰!" lÃªn má»™t mÃ³n Ä‘á»“ *riÃªng cá»§a báº¡n* váº­y. NÃ³ báº£o Java Ä‘á»«ng lÆ°u trá»¯ biáº¿n thÃ nh viÃªn *Ä‘Ã³* khi "Ä‘Ã³ng gÃ³i" Ä‘á»‘i tÆ°á»£ng.

NhÆ°ng mÃ  nÃ y, náº¿u cÃ¡i báº£ng thÃ´ng bÃ¡o chung cá»§a cáº£ lá»›p (trÆ°á»ng `static`) vá»‘n dÄ© Ä‘Ã£ **KHÃ”NG BAO GIá»œ** Ä‘Æ°á»£c gÃ³i vÃ o há»™p cá»§a *báº¥t ká»³ ai* rá»“i, thÃ¬ viá»‡c báº¡n dÃ¡n nhÃ£n `transient` lÃªn nÃ³ cÃ³ Ã½ nghÄ©a gÃ¬ khÃ´ng?

ÄÃºng rá»“i! Cháº³ng cÃ³ Ã½ nghÄ©a gÃ¬ cáº£! DÃ¹ báº¡n cÃ³ dÃ¹ng tá»« khÃ³a `transient` cho má»™t trÆ°á»ng `static` Ä‘i chÄƒng ná»¯a, thÃ¬ nÃ³ cÅ©ng **cháº³ng thay Ä‘á»•i Ä‘Æ°á»£c sá»± tháº­t** lÃ : cÃ¡c trÆ°á»ng `static` **KHÃ”NG BAO GIá»œ** Ä‘Æ°á»£c lÆ°u trá»¯ (serialize) cÃ¹ng vá»›i má»™t Ä‘á»‘i tÆ°á»£ng.

NÃ³ giá»‘ng nhÆ° báº¡n báº£o "Äá»«ng gÃ³i con voi nÃ y vÃ o há»™p" trong khi báº¡n vá»‘n dÄ© cháº³ng cÃ³ con voi nÃ o Ä‘á»ƒ gÃ³i cáº£!

---

**TÃ³m láº¡i:**

*   CÃ¡c trÆ°á»ng `static` thuá»™c vá» **lá»›p**, khÃ´ng thuá»™c vá» **Ä‘á»‘i tÆ°á»£ng**.
*   Khi báº¡n "Ä‘Ã³ng gÃ³i" má»™t Ä‘á»‘i tÆ°á»£ng (serialize), Java chá»‰ quan tÃ¢m Ä‘áº¿n nhá»¯ng gÃ¬ thuá»™c vá» **riÃªng Ä‘á»‘i tÆ°á»£ng Ä‘Ã³**.
*   VÃ¬ tháº¿, cÃ¡c trÆ°á»ng `static` **KHÃ”NG BAO GIá»œ** Ä‘Æ°á»£c "Ä‘Ã³ng gÃ³i" cÃ¹ng vá»›i Ä‘á»‘i tÆ°á»£ng.
*   Tá»« khÃ³a `transient` chá»‰ cÃ³ tÃ¡c dá»¥ng vá»›i cÃ¡c trÆ°á»ng **thÃ nh viÃªn** (instance variables) Ä‘á»ƒ báº£o Java Ä‘á»«ng lÆ°u chÃºng.
*   Náº¿u báº¡n thá»­ dÃ¹ng `transient` cho má»™t trÆ°á»ng `static`, nÃ³ sáº½ **CHáº²NG CÃ“ TÃC Dá»¤NG GÃŒ** cáº£, vÃ¬ trÆ°á»ng `static` vá»‘n dÄ© Ä‘Ã£ khÃ´ng Ä‘Æ°á»£c lÆ°u rá»“i!
    - MÃ  nÃ y, báº¡n hoÃ n toÃ n cÃ³ thá»ƒ káº¿t há»£p nÃ³ vá»›i viá»‡c tá»± viáº¿t cÃ¡c phÆ°Æ¡ng thá»©c `readObject()` vÃ  `writeObject()` *tÃ¹y chá»‰nh* cá»§a riÃªng báº¡n, Ä‘áº·c biá»‡t lÃ  khi gáº·p pháº£i nhá»¯ng *tÃ¬nh huá»‘ng phá»©c táº¡p* hÆ¡n nhÃ©!

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

37. ### Serialization vÃ  Deserialization lÃ  gÃ¬?

    Báº¡n Ä‘Ã£ sáºµn sÃ ng khÃ¡m phÃ¡ **Serialization** vÃ  **Deserialization** chÆ°a? CÃ¹ng báº¯t Ä‘áº§u nhÃ©!

**Serialization** lÃ  quÃ¡ trÃ¬nh biáº¿n 'tráº¡ng thÃ¡i' (táº¥t cáº£ dá»¯ liá»‡u bÃªn trong) cá»§a má»™t Ä‘á»‘i tÆ°á»£ng (object) thÃ nh má»™t 'dÃ²ng byte' (byte stream). TÆ°á»Ÿng tÆ°á»£ng nhÆ° báº¡n Ä‘ang 'Ä‘Ã³ng gÃ³i' nÃ³ láº¡i váº­y!

**Deserialization** chÃ­nh lÃ  quÃ¡ trÃ¬nh ngÆ°á»£c láº¡i! NÃ³ 'má»Ÿ gÃ³i' dÃ²ng byte kia ra, vÃ  biáº¿n nÃ³ trá»Ÿ láº¡i thÃ nh má»™t Ä‘á»‘i tÆ°á»£ng y há»‡t nhÆ° ban Ä‘áº§u.

    **Táº¡i sao láº¡i cáº§n Tuáº§n tá»± hÃ³a nhá»‰?**
    - Äá»ƒ Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n 'ghi nhá»›' má»i thá»© ngay cáº£ khi chÆ°Æ¡ng trÃ¬nh Ä‘Ã£ táº¯t, chÃºng ta sáº½ **cáº¥t giá»¯ 'tráº¡ng thÃ¡i' hiá»‡n táº¡i cá»§a nÃ³ vÃ o má»™t táº­p tin (file) hoáº·c má»™t cÆ¡ sá»Ÿ dá»¯ liá»‡u (database)**.
    - Gá»­i Ä‘á»‘i tÆ°á»£ng Ä‘i 'phiÃªu lÆ°u' qua máº¡ng!
    - **Sao chÃ©p sÃ¢u (Deep copy) Ä‘á»‘i tÆ°á»£ng**

Báº¡n cÃ²n nhá»› khÃ´ng, lÃºc chÃºng ta nÃ³i vá» viá»‡c táº¡o báº£n sao?
Náº¿u báº¡n chá»‰ gÃ¡n `obj2 = obj1;`, thÃ¬ báº¡n chá»‰ cÃ³ hai cÃ¡i tÃªn cÃ¹ng trá» vÃ o Má»˜T Ä‘á»‘i tÆ°á»£ng thÃ´i. ÄÃ¢u pháº£i báº£n sao Ä‘á»™c láº­p Ä‘Ã¢u nhá»‰?
Ká»ƒ cáº£ khi dÃ¹ng `clone()`, nÃ³ táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng má»›i, Ä‘Ãºng lÃ  báº£n sao rá»“i.
NHÆ¯NG! Náº¿u Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n cÃ³ chá»©a cÃ¡c Ä‘á»‘i tÆ°á»£ng KHÃC bÃªn trong nÃ³ (kiá»ƒu nhÆ° má»™t `ÄÆ¡n hÃ ng` cÃ³ `KhÃ¡ch hÃ ng` vÃ  `Danh sÃ¡ch Sáº£n pháº©m`), thÃ¬ `clone()` máº·c Ä‘á»‹nh chá»‰ lÃ m má»™t "sao chÃ©p há»i há»£t" thÃ´i.
NÃ³ sao chÃ©p `ÄÆ¡n hÃ ng` áº¥y, nhÆ°ng cÃ¡c Ä‘á»‘i tÆ°á»£ng con nhÆ° `KhÃ¡ch hÃ ng` hay `Danh sÃ¡ch Sáº£n pháº©m` bÃªn trong báº£n sao `ÄÆ¡n hÃ ng` Ä‘Ã³ Láº I VáºªN LÃ€ CHÃNH NHá»®NG THá»¨ mÃ  `ÄÆ¡n hÃ ng` gá»‘c Ä‘ang trá» tá»›i!
Äiá»u nÃ y cÃ³ nghÄ©a lÃ , náº¿u báº¡n thay Ä‘á»•i `KhÃ¡ch hÃ ng` trong báº£n sao, thÃ¬ `KhÃ¡ch hÃ ng` cá»§a `ÄÆ¡n hÃ ng` gá»‘c cÅ©ng bá»‹ thay Ä‘á»•i theo! Ráº¯c rá»‘i to!

Váº­y, lÃ m sao Ä‘á»ƒ cÃ³ má»™t báº£n sao Äá»˜C Láº¬P HOÃ€N TOÃ€N? Má»™t báº£n sao mÃ  báº¡n cÃ³ thá»ƒ "tÃ¡y mÃ¡y" má»i thá»© bÃªn trong mÃ  cháº³ng sá»£ áº£nh hÆ°á»Ÿng Ä‘áº¿n báº£n gá»‘c?
ChÃ o má»«ng Ä‘áº¿n vá»›i **Sao chÃ©p sÃ¢u**!

**Sao chÃ©p sÃ¢u** cÃ³ nghÄ©a lÃ  gÃ¬?
ÄÆ¡n giáº£n thÃ´i:
1.  NÃ³ khÃ´ng chá»‰ táº¡o má»™t báº£n sao cá»§a Ä‘á»‘i tÆ°á»£ng chÃ­nh.
2.  NÃ³ cÃ²n "láº·n sÃ¢u" vÃ o bÃªn trong Ä‘á»‘i tÆ°á»£ng Ä‘Ã³.
3.  Náº¿u Ä‘á»‘i tÆ°á»£ng chÃ­nh cÃ³ chá»©a cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c, nÃ³ sáº½ Táº O Báº¢N SAO Má»šI cho Táº¤T Cáº¢ nhá»¯ng Ä‘á»‘i tÆ°á»£ng con Ä‘Ã³ ná»¯a!
4.  VÃ  cá»© tháº¿ tiáº¿p tá»¥c, Ä‘á»‡ quy xuá»‘ng tá»«ng cáº¥p, cho Ä‘áº¿n khi khÃ´ng cÃ²n Ä‘á»‘i tÆ°á»£ng nÃ o Ä‘á»ƒ sao chÃ©p ná»¯a thÃ¬ thÃ´i.

Káº¿t quáº£? Báº¡n cÃ³ má»™t "bá»™" Ä‘á»‘i tÆ°á»£ng hoÃ n toÃ n má»›i, khÃ´ng dÃ­nh dÃ¡ng gÃ¬ Ä‘áº¿n "bá»™" Ä‘á»‘i tÆ°á»£ng gá»‘c cáº£. Thay Ä‘á»•i báº£n sao? Báº£n gá»‘c váº«n cá»© lÃ  báº£n gá»‘c!
Giá»‘ng nhÆ° báº¡n sao chÃ©p má»™t album áº£nh: `Sao chÃ©p há»i há»£t` lÃ  chá»‰ sao chÃ©p cÃ¡i bÃ¬a. `Sao chÃ©p sÃ¢u` lÃ  sao chÃ©p cáº£ bÃ¬a VÃ€ Táº¤T Cáº¢ cÃ¡c bá»©c áº£nh bÃªn trong, táº¡o thÃ nh má»™t album áº£nh má»›i toanh, Ä‘á»™c láº­p hoÃ n toÃ n!
    - NÃ y báº¡n! Báº¡n Ä‘Ã£ bao giá» tá»± há»i lÃ m sao Ä‘á»ƒ chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh cháº¡y nhanh hÆ¡n, mÆ°á»£t mÃ  hÆ¡n chÆ°a?

ÄÃ´i khi, mÃ¡y tÃ­nh cá»§a báº¡n cáº§n láº¥y má»™t 'Ä‘á»‘i tÆ°á»£ng' (má»™t máº£nh dá»¯ liá»‡u, má»™t thÃ´ng tin nÃ o Ä‘Ã³) tá»« má»™t nÆ¡i khÃ¡ xa. Má»—i láº§n cáº§n, nÃ³ láº¡i pháº£i Ä‘i láº¥y láº¡i, máº¥t thá»i gian láº¯m!

Váº­y thÃ¬, **lÆ°u trá»¯ Ä‘á»‘i tÆ°á»£ng vÃ o bá»™ nhá»› Ä‘á»‡m (Cache objects)** chÃ­nh lÃ  giáº£i phÃ¡p!

Ã tÆ°á»Ÿng lÃ  tháº¿ nÃ y: Khi báº¡n Ä‘Ã£ dÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng rá»“i, vÃ  báº¡n nghÄ© "Ã€, mÃ¬nh sáº½ cáº§n dÃ¹ng láº¡i cÃ¡i nÃ y sá»›m thÃ´i", thÃ¬ thay vÃ¬ vá»©t nÃ³ Ä‘i, báº¡n sáº½ **cáº¥t** nÃ³ vÃ o má»™t chá»— Ä‘áº·c biá»‡t, siÃªu tá»‘c Ä‘á»™. Chá»— Ä‘Ã³ gá»i lÃ  **bá»™ nhá»› Ä‘á»‡m (cache)**.

Giá»‘ng nhÆ° báº¡n Ä‘á»ƒ mÃ³n Ä‘á»“ mÃ¬nh hay dÃ¹ng nháº¥t ngay trÃªn bÃ n, thay vÃ¬ pháº£i Ä‘i tÃ¬m trong tá»§ má»—i láº§n cáº§n áº¥y.

Láº§n tá»›i khi chÆ°Æ¡ng trÃ¬nh cáº§n Ä‘á»‘i tÆ°á»£ng Ä‘Ã³, thay vÃ¬ pháº£i Ä‘i xa Ä‘á»ƒ láº¥y láº¡i, nÃ³ chá»‰ viá»‡c "nhÃ³n" má»™t cÃ¡i tá»« bá»™ nhá»› Ä‘á»‡m ngay gáº§n Ä‘Ã³. Nhanh hÆ¡n gáº¥p bá»™i!

Tháº¿ lÃ , má»i thá»© sáº½ cháº¡y vÃ¨o vÃ¨o, khÃ´ng cÃ²n cháº­m rÃ¬ rÃ¬ ná»¯a!

    ```java
    import java.io.*;

    class Employee implements Serializable {
        private static final long serialVersionUID = 1L;
        
        private String name;
        private int id;
        private transient double salary; // Not serialized
        
        public Employee(String name, int id, double salary) {
            this.name = name;
            this.id = id;
            this.salary = salary;
        }
        
        @Override
        public String toString() {
            return "Employee{name='" + name + "', id=" + id + ", salary=" + salary + "}";
        }
    }

    public class SerializationDemo {
        public static void main(String[] args) {
            Employee emp = new Employee("John", 101, 50000);
            
            // Serialization
            try (ObjectOutputStream oos = new ObjectOutputStream(
                    new FileOutputStream("employee.ser"))) {
                oos.writeObject(emp);
                System.out.println("Object serialized successfully");
            } catch (IOException e) {
                e.printStackTrace();
            }
            
            // Deserialization
            try (ObjectInputStream ois = new ObjectInputStream(
                    new FileInputStream("employee.ser"))) {
                Employee deserializedEmp = (Employee) ois.readObject();
                System.out.println("Deserialized: " + deserializedEmp);
            } catch (IOException | ClassNotFoundException e) {
                e.printStackTrace();
            }
        }
    }
    ```

    **Tuáº§n tá»± hÃ³a TÃ¹y chá»‰nh: Báº¡n muá»‘n tá»± mÃ¬nh quyáº¿t Ä‘á»‹nh cÃ¡ch lÆ°u Ä‘á»‘i tÆ°á»£ng?**
    ```java
    class CustomSerializable implements Serializable {
        private String data;
        private transient String sensitiveData;
        
        private void writeObject(ObjectOutputStream oos) throws IOException {
            oos.defaultWriteObject();
            // Encrypt and write sensitive data
            oos.writeObject(encrypt(sensitiveData));
        }
        
        private void readObject(ObjectInputStream ois) 
                throws IOException, ClassNotFoundException {
            ois.defaultReadObject();
            // Decrypt sensitive data
            sensitiveData = decrypt((String) ois.readObject());
        }
        
        private String encrypt(String data) { return data; } // Placeholder
        private String decrypt(String data) { return data; } // Placeholder
    }
    ```

    **Quan trá»ng nÃ¨!:** LuÃ´n luÃ´n khai bÃ¡o nha! `serialVersionUID` Khi báº¡n 'há»“i sinh' má»™t Ä‘á»‘i tÆ°á»£ng tá»« dá»¯ liá»‡u Ä‘Ã£ lÆ°u, báº¡n muá»‘n nÃ³ hoáº¡t Ä‘á»™ng trÆ¡n tru chá»©?
Äá»ƒ trÃ¡nh má»i ráº¯c rá»‘i vÃ  Ä‘áº£m báº£o ráº±ng Ä‘á»‘i tÆ°á»£ng cÅ© váº«n 'há»£p cáº¡' vá»›i phiÃªn báº£n hiá»‡n táº¡i, chÃºng ta cáº§n giá»¯ cho chÃºng tÆ°Æ¡ng thÃ­ch vá»›i nhau Ä‘áº¥y.

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

38. ### Váº­y, 'Giao diá»‡n hÃ m' trong Java lÃ  gÃ¬?

    TÆ°á»Ÿng tÆ°á»£ng nhÃ©, cÃ³ má»™t loáº¡i `interface` Ä‘áº·c biá»‡t.

NÃ³ Ä‘áº·c biá»‡t á»Ÿ chá»— lÃ  nÃ³ chá»‰ cÃ³ ÄÃšNG Má»˜T phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng (abstract method) thÃ´i.
ÄÃ³ chÃ­nh lÃ  **Functional Interface** Ä‘Ã³!

Váº­y cÃ¡i `interface` Ä‘áº·c biá»‡t nÃ y Ä‘á»ƒ lÃ m gÃ¬?
Ã€ ha! ChÃ­nh nÃ³ lÃ  Ná»€N Táº¢NG vá»¯ng cháº¯c cho thá»© gá»i lÃ  'lambda expressions' mÃ  chÃºng ta sáº½ dÃ¹ng ráº¥t nhiá»u tá»« Java 8 trá»Ÿ Ä‘i Ä‘Ã³!

    **CÃ¡c Ä‘áº·c Ä‘iá»ƒm ná»•i báº­t:**
    - NÃ³ chá»‰ cÃ³ **ÄÃšNG Má»˜T** phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng thÃ´i nha.
    - NÃ y, báº¡n biáº¿t gÃ¬ khÃ´ng? CÃ¡c `interface` cá»§a chÃºng ta giá» Ä‘Ã£ "xá»‹n" hÆ¡n nhiá»u rá»“i Ä‘áº¥y!

TrÆ°á»›c Ä‘Ã¢y, `interface` chá»§ yáº¿u lÃ  nÆ¡i chá»©a cÃ¡c phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng (abstract methods) thÃ´i. NhÆ°ng giá» thÃ¬ khÃ¡c rá»“i!

*   Báº¡n cÃ³ thá»ƒ cÃ³ **nhiá»u hÆ¡n má»™t** phÆ°Æ¡ng thá»©c `default` trong má»™t `interface`. ÄÃºng váº­y, ráº¥t nhiá»u!
*   VÃ  tÆ°Æ¡ng tá»±, báº¡n cÅ©ng cÃ³ thá»ƒ thÃªm **nhiá»u hÆ¡n má»™t** phÆ°Æ¡ng thá»©c `static` vÃ o Ä‘Ã³ ná»¯a.

Tháº¿ lÃ , cÃ¡c `interface` cá»§a báº¡n giá» Ä‘Ã¢y cÃ³ thá»ƒ cá»±c ká»³ linh hoáº¡t, cung cáº¥p Ä‘á»§ loáº¡i hÃ nh vi máº·c Ä‘á»‹nh vÃ  cÃ¡c tiá»‡n Ã­ch há»¯u Ã­ch luÃ´n!
    - Báº¡n cÃ³ thá»ƒ gáº¯n chÃº thÃ­ch vÃ o báº±ng... `@FunctionalInterface`
    - Báº¡n biáº¿t khÃ´ng, khi báº¡n dÃ¹ng má»™t biá»ƒu thá»©c lambda, nÃ³ cáº§n pháº£i 'khá»›p' vá»›i má»™t kiá»ƒu nÃ o Ä‘Ã³. Nhá»¯ng thá»© nÃ y chÃ­nh lÃ  cÃ¡c kiá»ƒu mÃ  biá»ƒu thá»©c lambda cá»§a báº¡n sáº½ 'nháº¯m tá»›i' (hay cÃ²n gá»i lÃ  kiá»ƒu Ä‘Ã­ch) Ä‘Ã³!

    ```java
    @FunctionalInterface
    interface Calculator {
        int calculate(int a, int b);
        
        // Default method - allowed
        default void print(String msg) {
            System.out.println(msg);
        }
        
        // Static method - allowed
        static void info() {
            System.out.println("Calculator interface");
        }
    }

    public class FunctionalInterfaceDemo {
        public static void main(String[] args) {
            // Using lambda expression
            Calculator add = (a, b) -> a + b;
            Calculator multiply = (a, b) -> a * b;
            
            System.out.println("Sum: " + add.calculate(5, 3));      // 8
            System.out.println("Product: " + multiply.calculate(5, 3)); // 15
        }
    }
    ```

    **Nhá»¯ng Functional Interface Java Ä‘Ã£ chuáº©n bá»‹ sáºµn cho báº¡n (trong gÃ³i `java.util.function`):**

    ```java
    import java.util.function.*;

    public class BuiltInFunctionalInterfaces {
        public static void main(String[] args) {
            // Predicate - takes input, returns boolean
            Predicate<Integer> isEven = n -> n % 2 == 0;
            System.out.println(isEven.test(4)); // true
            
            // Function - takes input, returns output
            Function<String, Integer> length = s -> s.length();
            System.out.println(length.apply("Hello")); // 5
            
            // Consumer - takes input, returns nothing
            Consumer<String> printer = s -> System.out.println(s);
            printer.accept("Hello"); // prints Hello
            
            // Supplier - takes nothing, returns output
            Supplier<Double> random = () -> Math.random();
            System.out.println(random.get()); // random number
            
            // BiFunction - takes two inputs, returns output
            BiFunction<Integer, Integer, Integer> add = (a, b) -> a + b;
            System.out.println(add.apply(5, 3)); // 8
            
            // UnaryOperator - takes input, returns same type
            UnaryOperator<Integer> square = n -> n * n;
            System.out.println(square.apply(5)); // 25
            
            // BinaryOperator - takes two inputs of same type, returns same type
            BinaryOperator<Integer> max = (a, b) -> a > b ? a : b;
            System.out.println(max.apply(5, 3)); // 5
        }
    }
    ```

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

39. ### Biá»ƒu thá»©c Lambda trong Java lÃ  gÃ¬ váº­y ta?

    Lambda expressions lÃ  gÃ¬ Æ°? TÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t Ä‘oáº¡n mÃ£ nhá» lÃ m viá»‡c gÃ¬ Ä‘Ã³. BÃ¬nh thÆ°á»ng, báº¡n sáº½ Ä‘áº·t tÃªn cho nÃ³. NhÆ°ng Ä‘Ã´i khi, báº¡n khÃ´ng cáº§n má»™t cÃ¡i tÃªn! ÄÃ³ chÃ­nh lÃ  'hÃ m áº©n danh' (anonymous function) Ä‘Ã³.

ChÃºng giÃºp báº¡n viáº¿t code ngáº¯n gá»n, sÃºc tÃ­ch hÆ¡n ráº¥t nhiá»u khi báº¡n cáº§n 'triá»ƒn khai' (implement) cÃ¡c 'functional interface'. NghÄ©a lÃ , náº¿u báº¡n cÃ³ má»™t giao diá»‡n mÃ  chá»‰ cÃ³ DUY NHáº¤T má»™t phÆ°Æ¡ng thá»©c cáº§n báº¡n Ä‘iá»n vÃ o, thÃ¬ Lambda cá»±c ká»³ tiá»‡n lá»£i!

Java 8 Ä‘Ã£ mang Lambda Ä‘áº¿n vá»›i chÃºng ta. VÃ  nhá» cÃ³ chÃºng, báº¡n cÃ³ thá»ƒ láº­p trÃ¬nh theo phong cÃ¡ch 'láº­p trÃ¬nh hÃ m' (functional programming) trong Java â€“ má»™t cÃ¡ch nghÄ© má»›i máº», máº¡nh máº½ vá» viá»‡c viáº¿t code!

    **CÃº phÃ¡p:**
    ```
    (parameters) -> expression
    (parameters) -> { statements; }
    ```

    **Äá»ƒ dá»… hiá»ƒu hÆ¡n, chÃºng ta hÃ£y xem vÃ i vÃ­ dá»¥ nhÃ©:**

    ```java
    import java.util.*;
    import java.util.function.*;

    public class LambdaExamples {
        public static void main(String[] args) {
            // No parameters
            Runnable runnable = () -> System.out.println("Hello Lambda!");
            runnable.run();
            
            // One parameter (parentheses optional)
            Consumer<String> consumer = s -> System.out.println(s);
            consumer.accept("Hello");
            
            // Multiple parameters
            BiFunction<Integer, Integer, Integer> add = (a, b) -> a + b;
            System.out.println(add.apply(5, 3));
            
            // With type declarations
            BiFunction<Integer, Integer, Integer> multiply = 
                (Integer a, Integer b) -> a * b;
            
            // Multiple statements (braces required)
            BiFunction<Integer, Integer, Integer> calculate = (a, b) -> {
                int sum = a + b;
                int product = a * b;
                return sum + product;
            };
            
            // With Collections
            List<String> names = Arrays.asList("John", "Jane", "Bob", "Alice");
            
            // forEach with lambda
            names.forEach(name -> System.out.println(name));
            
            // Method reference (shorthand for lambda)
            names.forEach(System.out::println);
            
            // Sorting with lambda
            names.sort((s1, s2) -> s1.compareTo(s2));
            
            // Using Comparator method reference
            names.sort(String::compareTo);
            
            // Filtering with streams
            List<String> filtered = names.stream()
                .filter(name -> name.startsWith("J"))
                .collect(Collectors.toList());
            
            // Mapping with streams
            List<Integer> lengths = names.stream()
                .map(name -> name.length())
                .collect(Collectors.toList());
        }
    }
    ```

    **Tham chiáº¿u phÆ°Æ¡ng thá»©c:** Má»™t "phÃ­m táº¯t" siÃªu tá»‘c cho biá»ƒu thá»©c lambda cá»§a báº¡n!
    ```java
    // Static method reference
    Function<String, Integer> parseInt = Integer::parseInt;

    // Instance method reference
    String str = "Hello";
    Supplier<Integer> length = str::length;

    // Constructor reference
    Supplier<ArrayList<String>> listSupplier = ArrayList::new;
    ```

    Váº­y thÃ¬, nhá»¯ng *lá»£i Ã­ch* mÃ  chÃºng ta sáº½ cÃ³ Ä‘Æ°á»£c lÃ  gÃ¬?
    - Code ngáº¯n gá»n vÃ  dá»… Ä‘á»c

Báº¡n Æ¡i, khi viáº¿t code, chÃºng ta Ä‘Ã¢u chá»‰ "nÃ³i chuyá»‡n" vá»›i má»—i cÃ¡i mÃ¡y tÃ­nh Ä‘Ã¢u nhá»‰? Ráº¥t nhiá»u lÃºc, *ngÆ°á»i khÃ¡c* (hoáº·c chÃ­nh *báº¡n* sau nÃ y!) sáº½ Ä‘á»c code cá»§a báº¡n Ä‘áº¥y.

Váº­y nÃªn, hÃ£y lÃ m cho code cá»§a chÃºng ta tháº­t **ngáº¯n gá»n** (khÃ´ng dÃ i dÃ²ng, rÆ°á»m rÃ  nhÃ©!) vÃ  **dá»… Ä‘á»c** (nhÃ¬n vÃ o lÃ  hiá»ƒu ngay nÃ³ Ä‘ang lÃ m gÃ¬). Code rÃµ rÃ ng sáº½ giÃºp má»i ngÆ°á»i (vÃ  cáº£ báº¡n ná»¯a!) hiá»ƒu nhanh hÆ¡n vÃ  lÃ m viá»‡c hiá»‡u quáº£ hÆ¡n nhiá»u Ä‘Ã³!
    - NÃ³ cho phÃ©p báº¡n láº­p trÃ¬nh theo phong cÃ¡ch hÃ m.
    - Báº¡n muá»‘n mÃ¡y tÃ­nh cá»§a mÃ¬nh lÃ m nhiá»u viá»‡c CÃ™NG LÃšC Ä‘á»ƒ cháº¡y nhanh hÆ¡n Ã ? Tuyá»‡t vá»i! Giá» Ä‘Ã¢y, viá»‡c há»— trá»£ cho kiá»ƒu "xá»­ lÃ½ song song" Ä‘Ã³ Ä‘Ã£ Ä‘Æ°á»£c cáº£i thiá»‡n Ráº¤T NHIá»€U!
    - **Giáº£m thiá»ƒu boilerplate code**

Báº¡n cÃ³ biáº¿t nhá»¯ng Ä‘oáº¡n mÃ£ mÃ  báº¡n cá»© pháº£i viáº¿t Ä‘i viáº¿t láº¡i, dÃ¹ chÃºng cháº³ng lÃ m gÃ¬ Ä‘áº·c biá»‡t láº¯m, chá»‰ lÃ  'thá»§ tá»¥c' Ä‘á»ƒ má»i thá»© hoáº¡t Ä‘á»™ng khÃ´ng? Kiá»ƒu nhÆ° pháº£i Ä‘iá»n tÃªn vÃ  Ä‘á»‹a chá»‰ vÃ o ráº¥t nhiá»u máº«u Ä‘Æ¡n chá»‰ Ä‘á»ƒ gá»­i má»™t bá»©c thÆ° váº­y Ä‘Ã³.

ChÃºng ta gá»i nhá»¯ng Ä‘oáº¡n mÃ£ "thá»§ tá»¥c" rÆ°á»m rÃ , láº·p Ä‘i láº·p láº¡i Ä‘Ã³ lÃ  **boilerplate code**.

VÃ  Ä‘Ã¢y lÃ  tin vui: Vá»›i tÃ­nh nÄƒng nÃ y, báº¡n sáº½ pháº£i viáº¿t **Ã­t boilerplate code hÆ¡n**! Äiá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ  code cá»§a báº¡n sáº½ ngáº¯n gá»n hÆ¡n, sáº¡ch sáº½ hÆ¡n vÃ  báº¡n cÃ³ thá»ƒ táº­p trung vÃ o nhá»¯ng pháº§n tháº­t sá»± thÃº vá»‹ vÃ  quan trá»ng cá»§a chÆ°Æ¡ng trÃ¬nh. Tuyá»‡t vá»i pháº£i khÃ´ng?

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

40. ### Optional class trong Java 8 lÃ  gÃ¬? CÃ¹ng khÃ¡m phÃ¡ xem anh báº¡n nÃ y cÃ³ gÃ¬ hay ho nhÃ©!

    Ã€, chÃ­nh lÃ ... `Optional` HÃ£y nghÄ© vá» má»™t `class` (lá»›p) nhÆ° má»™t cÃ¡i há»™p Ä‘áº·c biá»‡t nhÃ©! NÃ³ lÃ  má»™t Ä‘á»‘i tÆ°á»£ng 'chá»©a' (container object) mÃ  cÃ³ thá»ƒ cÃ³ hoáº·c khÃ´ng cÃ³ má»™t giÃ¡ trá»‹ 'khÃ´ng null' (tá»©c lÃ  má»™t giÃ¡ trá»‹ thá»±c sá»±, khÃ´ng pháº£i `null`) bÃªn trong. Táº¡i sao láº¡i cáº§n nÃ³ nhá»‰? Ã€, nÃ³ giÃºp chÃºng ta trÃ¡nh Ä‘Æ°á»£c `NullPointerException` VÃ  nÃ³ giÃºp viá»‡c xá»­ lÃ½ cÃ¡c giÃ¡ trá»‹ `null` (nhá»¯ng thá»© 'trá»‘ng rá»—ng' Ä‘Ã³) trá»Ÿ nÃªn *rÃµ rÃ ng hÆ¡n ráº¥t nhiá»u*.

    **Táº¡o Optional:**
    ```java
    import java.util.Optional;

    public class OptionalDemo {
        public static void main(String[] args) {
            // Creating Optional
            Optional<String> empty = Optional.empty();
            Optional<String> name = Optional.of("John");
            Optional<String> nullable = Optional.ofNullable(null);
            
            // Checking if value present
            System.out.println(name.isPresent());     // true
            System.out.println(empty.isPresent());    // false
            System.out.println(empty.isEmpty());      // true (Java 11+)
            
            // Getting value
            String value = name.get();  // Returns "John"
            // String error = empty.get(); // Throws NoSuchElementException
            
            // Safe access with orElse
            String defaultName = empty.orElse("Unknown");  // "Unknown"
            
            // orElseGet - lazy evaluation
            String lazyDefault = empty.orElseGet(() -> computeDefault());
            
            // orElseThrow
            String required = name.orElseThrow(() -> 
                new IllegalArgumentException("Name is required"));
            
            // ifPresent - execute if value exists
            name.ifPresent(n -> System.out.println("Name: " + n));
            
            // ifPresentOrElse (Java 9+)
            name.ifPresentOrElse(
                n -> System.out.println("Found: " + n),
                () -> System.out.println("Not found")
            );
        }
        
        static String computeDefault() {
            return "Computed Default";
        }
    }
    ```

    **DÃ¹ng `Optional` cÃ¹ng vá»›i `Stream` (Thá»­ xem cÃ³ gÃ¬ "hay ho" nhÃ©!):**
    ```java
    public class OptionalStreams {
        public static void main(String[] args) {
            Optional<String> name = Optional.of("  John  ");
            
            // map - transform value
            Optional<Integer> length = name.map(String::length);
            
            // Chaining operations
            String result = name
                .map(String::trim)
                .map(String::toUpperCase)
                .orElse("UNKNOWN");
            System.out.println(result);  // "JOHN"
            
            // filter - conditional
            Optional<String> filtered = name
                .filter(n -> n.trim().length() > 3);
            
            // flatMap - for nested Optionals
            Optional<Optional<String>> nested = Optional.of(Optional.of("Hello"));
            Optional<String> flat = nested.flatMap(o -> o);
        }
    }
    ```

    **Nhá»¯ng Máº¹o Hay Ho Nháº¥t:**
    ```java
    class UserService {
        // Return Optional for methods that may not find a result
        public Optional<User> findById(int id) {
            User user = database.find(id);
            return Optional.ofNullable(user);
        }
        
        // Don't use Optional for fields or parameters
        // Bad: private Optional<String> name;
        // Good: private String name; // can be null
        
        // Don't use Optional.get() without checking
        // Bad: optional.get()
        // Good: optional.orElse(default) or optional.ifPresent(...)
    }
    ```

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

41. ### NÃ y báº¡n, báº¡n cÃ³ bao giá» nháº§m láº«n giá»¯a Collection vÃ  Collections chÆ°a? Äá»«ng lo láº¯ng, chÃºng ta cÃ¹ng "gá»¡ rá»‘i" vá»¥ nÃ y nhÃ©!

    `Collection` ChÃ o báº¡n! Sáºµn sÃ ng cho má»™t tá»« cá»±c ká»³ tiá»‡n lá»£i chÆ°a?

Khi báº¡n muá»‘n nÃ³i cÃ³ `thá»© nÃ y` **vÃ ** `thá»© kia`...

Kiá»ƒu nhÆ° "má»™t cá»‘c cÃ  phÃª" **vÃ ** "má»™t chiáº¿c bÃ¡nh quy" Ã½.

Trong tiáº¿ng Viá»‡t, chÃºng ta cÃ³ má»™t tá»« nhá» bÃ© nhÆ°ng quyá»n nÄƒng Ä‘á»ƒ lÃ m viá»‡c Ä‘Ã³:

```
vÃ 
```

Dá»… nhÆ° Äƒn káº¹o, Ä‘Ãºng khÃ´ng nÃ o? Giá» báº¡n Ä‘Ã£ biáº¿t cÃ¡ch ná»‘i má»i thá»© láº¡i vá»›i nhau rá»“i! `Collections` Trong Java, chÃºng lÃ  hai khÃ¡i niá»‡m *hoÃ n toÃ n khÃ¡c nhau* Ä‘Ã³! MÃ  báº¡n biáº¿t khÃ´ng, nhiá»u khi chÃºng mÃ¬nh dá»… bá»‹ nháº§m láº«n chÃºng vá»›i nhau láº¯m Ä‘áº¥y.

    **Bá»™ sÆ°u táº­p (Giao diá»‡n):**
    - NÃ³ chÃ­nh lÃ  má»™t *interface* 'gá»‘c' (kiá»ƒu nhÆ° Ã´ng tá»•, hay lÃ  Ä‘iá»ƒm khá»Ÿi Ä‘áº§u áº¥y!) trong Java Collections Framework.
    - Báº¡n sáº½ tÃ¬m tháº¥y nÃ³ á»Ÿ... `java.util` NÃ y báº¡n láº­p trÃ¬nh viÃªn! Báº¡n cÃ³ bao giá» pháº£i dá»n dáº¹p phÃ²ng mÃ¬nh khÃ´ng? Hay ngÄƒn náº¯p bÃ n lÃ m viá»‡c cá»§a báº¡n? ChÃ , code Java cá»§a báº¡n cÅ©ng cáº§n Ä‘Æ°á»£c "dá»n dáº¹p" Ä‘áº¥y! Äáº·c biá»‡t lÃ  khi báº¡n báº¯t Ä‘áº§u cÃ³ *hÃ ng táº¥n* file `.java`.

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang xÃ¢y dá»±ng má»™t á»©ng dá»¥ng siÃªu to khá»•ng lá»“. Báº¡n cÃ³ cÃ¡c lá»›p cho Ä‘á»™ng váº­t, cÃ¡c lá»›p cho xe cá»™, cÃ¡c lá»›p cho giao diá»‡n ngÆ°á»i dÃ¹ng... Náº¿u táº¥t cáº£ cÃ¡c file Ä‘Ã³ cá»© náº±m chung má»™t Ä‘á»‘ng, thÃ¬ viá»‡c tÃ¬m kiáº¿m báº¥t cá»© thá»© gÃ¬ sáº½ lÃ  má»™t *cÆ¡n Ã¡c má»™ng*!

VÃ  chuyá»‡n gÃ¬ sáº½ xáº£y ra náº¿u báº¡n cÃ³ hai lá»›p `Dog` khÃ¡c nhau, má»™t cÃ¡i cho cá»­a hÃ ng thÃº cÆ°ng vÃ  má»™t cÃ¡i cho trÃ² chÆ¡i? á»i giá»i Æ¡i, xung Ä‘á»™t tÃªn rá»“i!

ÄÃ³ lÃ  lÃºc `package` xuáº¥t hiá»‡n nhÆ° má»™t siÃªu anh hÃ¹ng!

HÃ£y nghÄ© `package` giá»‘ng nhÆ° má»™t *thÆ° má»¥c* (folder) Ä‘áº·c biá»‡t dÃ nh cho cÃ¡c lá»›p Java cá»§a báº¡n. NÃ³ lÃ  má»™t cÃ¡ch tuyá»‡t vá»i Ä‘á»ƒ nhÃ³m cÃ¡c lá»›p cÃ³ liÃªn quan láº¡i vá»›i nhau.

NÃ³ giÃºp cÃ¡c lá»›p cá»§a báº¡n cÃ³ má»™t "tÃªn Ä‘áº§y Ä‘á»§" (full name) *duy nháº¥t*. VÃ¬ váº­y, thay vÃ¬ chá»‰ lÃ  `Dog`, báº¡n cÃ³ thá»ƒ cÃ³ `com.congtycuaem.dongvat.Dog` vÃ  `com.congtycuaem.trochoi.nhanvat.Dog`. Háº¿t bá»‘i rá»‘i rá»“i nhÃ©!

NÃ³ cÅ©ng giÃºp kiá»ƒm soÃ¡t quyá»n truy cáº­p â€“ quyáº¿t Ä‘á»‹nh xem ai cÃ³ thá»ƒ nhÃ¬n vÃ  sá»­ dá»¥ng code cá»§a báº¡n. NhÆ°ng pháº§n Ä‘Ã³ chÃºng ta sáº½ tÃ¬m hiá»ƒu sau nha.

Hiá»‡n táº¡i, báº¡n chá»‰ cáº§n nhá»›: `package` = *tá»• chá»©c code cá»§a báº¡n* vÃ o nhá»¯ng chiáº¿c há»™p nhá» gá»n gÃ ng.

Khi báº¡n tháº¥y dÃ²ng `package com.vidu.ungdungcuatoi;` á»Ÿ *ngay Ä‘áº§u tiÃªn* file `.java` cá»§a mÃ¬nh, nÃ³ giá»‘ng nhÆ° Ä‘ang nÃ³i ráº±ng: "NÃ y, lá»›p nÃ y thuá»™c vá» cÃ¡i há»™p `com.vidu.ungdungcuatoi` Ä‘áº¥y!"

Dá»… hiá»ƒu Ä‘Ãºng khÃ´ng nÃ o?
    - NÃ³ lÃ m gÃ¬? ÄÆ¡n giáº£n thÃ´i!
NÃ³ **Ä‘áº¡i diá»‡n cho má»™t nhÃ³m cÃ¡c Ä‘á»‘i tÆ°á»£ng** Ä‘áº¥y.
Tá»©c lÃ , nÃ³ gom nhiá»u Ä‘á»‘i tÆ°á»£ng láº¡i thÃ nh má»™t 'táº­p há»£p' hoáº·c 'bá»™ sÆ°u táº­p'.
VÃ  má»—i Ä‘á»‘i tÆ°á»£ng riÃªng láº» trong cÃ¡i nhÃ³m Ä‘Ã³, chÃºng ta gá»i nÃ³ lÃ  **pháº§n tá»­** (element).
    - ÄÆ°á»£c 'má»Ÿ rá»™ng' ra bá»Ÿi cÃ¡c interface `List`, `Set`, vÃ  `Queue` nÃ¨!

    **Collections (Lá»›p tiá»‡n Ã­ch):**

NÃ y báº¡n, Ä‘á»«ng Ä‘á»ƒ bá»‹ lá»«a nhÃ©! CÃ³ má»™t cÃ¡i tÃªn lÃ  `Collection` (viáº¿t hoa chá»¯ C, khÃ´ng cÃ³ 's' á»Ÿ cuá»‘i) â€“ Ä‘Ã³ lÃ  má»™t *interface* (giao diá»‡n) mÃ  máº¥y Ä‘á»©a nhÆ° `List`, `Set` hay `Queue` tuÃ¢n theo. CÃ²n á»Ÿ Ä‘Ã¢y, chÃºng ta Ä‘ang nÃ³i vá» `Collections` (cÃ³ 's' á»Ÿ cuá»‘i) â€“ Ä‘Ã¢y láº¡i lÃ  má»™t *lá»›p* (class) hoÃ n toÃ n khÃ¡c biá»‡t Ä‘áº¥y!

Báº¡n cÃ³ thá»ƒ nghÄ© `Collections` nhÆ° má»™t há»™p cÃ´ng cá»¥ siÃªu phÃ m, chá»©a Ä‘áº§y nhá»¯ng phÆ°Æ¡ng thá»©c (method) tÄ©nh (static) cá»±c ká»³ há»¯u Ã­ch. NÃ³ Ä‘Æ°á»£c táº¡o ra Ä‘á»ƒ giÃºp báº¡n lÃ m Ä‘á»§ thá»© trÃ² vá»›i cÃ¡c Ä‘á»‘i tÆ°á»£ng `Collection` cá»§a mÃ¬nh. VÃ­ dá»¥, báº¡n muá»‘n sáº¯p xáº¿p (sort) chÃºng? Hay tÃ¬m kiáº¿m (search) má»™t cÃ¡ch nhanh chÃ³ng? Hoáº·c tháº­m chÃ­ lÃ  Ä‘áº£o ngÆ°á»£c thá»© tá»± (reverse)? `Collections` cÃ³ háº¿t!

VÃ¬ nÃ³ lÃ  má»™t *lá»›p tiá»‡n Ã­ch* (utility class), báº¡n khÃ´ng cáº§n pháº£i táº¡o má»™t Ä‘á»‘i tÆ°á»£ng `Collections` má»›i Ä‘Ã¢u. Cá»© gá»i tháº³ng cÃ¡c phÆ°Æ¡ng thá»©c cá»§a nÃ³ lÃ  xong! Tiá»‡n lá»£i pháº£i khÃ´ng nÃ o?
    - Báº¡n Ä‘Ã£ sáºµn sÃ ng chÆ°a? ÄÃ¢y lÃ  má»™t 'lá»›p' (class) Ä‘áº·c biá»‡t láº¯m Ä‘Ã³!
NÃ³ Ä‘Æ°á»£c gá»i lÃ  'lá»›p tiá»‡n Ã­ch' (utility class). Nghe tÃªn lÃ  tháº¥y nÃ³ 'tiá»‡n' rá»“i pháº£i khÃ´ng?
Lá»›p nÃ y cÃ³ nhá»¯ng 'phÆ°Æ¡ng thá»©c tÄ©nh' (static methods). Báº¡n cÃ³ thá»ƒ dÃ¹ng chÃºng ngay láº­p tá»©c mÃ  khÃ´ng cáº§n pháº£i táº¡o ra má»™t 'Ä‘á»‘i tÆ°á»£ng' (object) nÃ o cáº£. Cá»© gá»i tháº³ng tÃªn lá»›p lÃ  dÃ¹ng Ä‘Æ°á»£c luÃ´n!
Má»¥c Ä‘Ã­ch chÃ­nh cá»§a nÃ³? Äá»ƒ giÃºp báº¡n thá»±c hiá»‡n Ä‘á»§ thá»© 'thao tÃ¡c' (operations) vá»›i cÃ¡c 'collection' (táº­p há»£p dá»¯ liá»‡u) cá»§a mÃ¬nh Ä‘Ã³. Kiá»ƒu nhÆ° sáº¯p xáº¿p danh sÃ¡ch, tÃ¬m kiáº¿m, hay Ä‘áº£o ngÆ°á»£c cÃ¡c pháº§n tá»­ cháº³ng háº¡n.
    - Báº¡n Ä‘Ã£ bao giá» tá»± há»i 'CÃ¡i nÃ y á»Ÿ Ä‘Ã¢u?' chÆ°a?

Trong láº­p trÃ¬nh, chÃºng ta cÅ©ng cáº§n chá»‰ rÃµ vá»‹ trÃ­ cá»§a má»i thá»©. Äá»ƒ nÃ³i má»™t Ä‘á»‘i tÆ°á»£ng, má»™t tá»‡p (file) hay má»™t thÃ nh pháº§n nÃ o Ä‘Ã³ **náº±m á»Ÿ** má»™t vá»‹ trÃ­ cá»¥ thá»ƒ... `java.util` `package`

Báº¡n biáº¿t Ä‘áº¥y, khi báº¡n viáº¿t code Java, báº¡n sáº½ táº¡o ra ráº¥t nhiá»u file `.java`, Ä‘Ãºng khÃ´ng? Má»—i file thÆ°á»ng chá»©a má»™t `class`.

Tháº¿ nhÆ°ng, khi dá»± Ã¡n cá»§a báº¡n lá»›n dáº§n lÃªn, báº¡n sáº½ cÃ³ hÃ ng trÄƒm, tháº­m chÃ­ hÃ ng ngÃ n file class khÃ¡c nhau. TÆ°á»Ÿng tÆ°á»£ng xem:

*   **Táº¥t cáº£ cÃ¡c class Ä‘á»u náº±m chung má»™t chá»—?** Giá»‘ng nhÆ° báº¡n vá»©t táº¥t cáº£ cÃ¡c cuá»‘n sÃ¡ch cá»§a mÃ¬nh vÃ o má»™t Ä‘á»‘ng lá»™n xá»™n váº­y. Ráº¥t khÃ³ tÃ¬m!
*   **TÃªn class cÃ³ thá»ƒ bá»‹ trÃ¹ng?** Báº¡n cÃ³ thá»ƒ táº¡o ra má»™t `class` tÃªn lÃ  `Car`. NhÆ°ng náº¿u sau nÃ y báº¡n muá»‘n dÃ¹ng má»™t thÆ° viá»‡n khÃ¡c cÅ©ng cÃ³ `class` tÃªn `Car` thÃ¬ sao? Java sáº½ khÃ´ng biáº¿t báº¡n muá»‘n dÃ¹ng `Car` nÃ o!

ÄÃ³ lÃ  lÃºc **`package`** xuáº¥t hiá»‡n Ä‘á»ƒ giáº£i cá»©u!

HÃ£y nghÄ© `package` nhÆ° nhá»¯ng **thÆ° má»¥c (folder)** trÃªn mÃ¡y tÃ­nh cá»§a báº¡n, hoáº·c nhÆ° nhá»¯ng **ngÄƒn kÃ©o cÃ³ nhÃ£n mÃ¡c rÃµ rÃ ng** trong tá»§ váº­y.

**`package` giÃºp chÃºng ta:**

1.  **Sáº¯p xáº¿p code gá»n gÃ ng:** Giá»‘ng nhÆ° báº¡n cho cÃ¡c file áº£nh vÃ o thÆ° má»¥c "áº¢nh", file nháº¡c vÃ o thÆ° má»¥c "Nháº¡c". CÃ¡c class liÃªn quan Ä‘áº¿n nhau sáº½ Ä‘Æ°á»£c nhÃ³m vÃ o cÃ¹ng má»™t `package`.
    *   VÃ­ dá»¥: CÃ¡c class xá»­ lÃ½ vá» giao diá»‡n ngÆ°á»i dÃ¹ng (UI) cÃ³ thá»ƒ vÃ o `package com.mycompany.myapp.ui`.
    *   CÃ¡c class xá»­ lÃ½ vá» dá»¯ liá»‡u cÃ³ thá»ƒ vÃ o `package com.mycompany.myapp.data`.
2.  **TrÃ¡nh trÃ¹ng tÃªn class:** Má»—i `package` táº¡o ra má»™t "khÃ´ng gian tÃªn" riÃªng.
    *   Báº¡n cÃ³ thá»ƒ cÃ³ `class Car` trong `package com.mycompany.vehicles`.
    *   VÃ  báº¡n cÅ©ng cÃ³ thá»ƒ cÃ³ `class Car` trong `package com.anothercompany.toys`.
    *   Java sáº½ phÃ¢n biá»‡t chÃºng dá»±a vÃ o tÃªn `package` Ä‘áº§y Ä‘á»§ cá»§a chÃºng!

**CÃ¡ch báº¡n dÃ¹ng `package` cá»±c ká»³ Ä‘Æ¡n giáº£n:**

Ngay dÃ²ng Ä‘áº§u tiÃªn cá»§a file `.java` cá»§a báº¡n, báº¡n chá»‰ cáº§n khai bÃ¡o nÃ³ thuá»™c `package` nÃ o.

```java
package com.mycompany.myapp.models; // DÃ²ng nÃ y nÃ³i ráº±ng class nÃ y thuá»™c package 'com.mycompany.myapp.models'

public class User {
    // Code cá»§a class User á»Ÿ Ä‘Ã¢y
}
```

Tháº¿ lÃ  xong! Giá» thÃ¬ code cá»§a báº¡n Ä‘Ã£ cÃ³ "Ä‘á»‹a chá»‰" rÃµ rÃ ng rá»“i!
    - Ã€, cÃ¡i nÃ y áº¥y háº£? NÃ³ cÃ³ sáºµn máº¥y cÃ¡i 'phÆ°Æ¡ng thá»©c' (cá»© gá»i lÃ  'lá»‡nh' Ä‘i cho dá»… hiá»ƒu) Ä‘á»ƒ báº¡n cÃ³ thá»ƒ lÃ m Ä‘á»§ thá»© vá»›i dá»¯ liá»‡u cá»§a mÃ¬nh Ä‘Ã³!

Cháº³ng háº¡n nhÆ°:
*   Sáº¯p xáº¿p chÃºng láº¡i theo Ã½ báº¡n.
*   TÃ¬m kiáº¿m má»™t cÃ¡i gÃ¬ Ä‘Ã³ tháº­t nhanh.
*   XÃ¡o trá»™n lung tung (kiá»ƒu nhÆ° chia bÃ i áº¥y).
*   Äáº£o ngÆ°á»£c thá»© tá»± má»i thá»©.
*   VÃ  cÃ²n nhiá»u, nhiá»u, nhiá»u viá»‡c hay ho khÃ¡c ná»¯a!
    - Ã€ nÃ y, báº¡n khÃ´ng thá»ƒ "táº¡o ra" má»™t "Ä‘á»‘i tÆ°á»£ng" nÃ o tá»« cÃ¡i nÃ y Ä‘Ã¢u nhÃ©.
(VÃ¬ sao Æ°? Bá»Ÿi vÃ¬ táº¥t cáº£ cÃ¡c "phÆ°Æ¡ng thá»©c" â€“ tá»©c lÃ  cÃ¡c hÃ nh Ä‘á»™ng mÃ  nÃ³ cÃ³ â€“ Ä‘á»u lÃ  loáº¡i "static" cáº£!)

    ```java
    import java.util.*;

    public class CollectionVsCollections {
        public static void main(String[] args) {
            // Collection - interface used to create a collection
            Collection<String> collection = new ArrayList<>();
            collection.add("Apple");
            collection.add("Banana");
            collection.add("Cherry");
            
            // Collections - utility class with static methods
            List<String> list = new ArrayList<>(collection);
            
            // Sorting using Collections utility
            Collections.sort(list);
            System.out.println("Sorted: " + list);
            
            // Reverse the list
            Collections.reverse(list);
            System.out.println("Reversed: " + list);
            
            // Shuffle the list
            Collections.shuffle(list);
            System.out.println("Shuffled: " + list);
            
            // Find min and max
            System.out.println("Min: " + Collections.min(list));
            System.out.println("Max: " + Collections.max(list));
            
            // Create unmodifiable collection
            List<String> unmodifiable = Collections.unmodifiableList(list);
            
            // Create synchronized collection
            List<String> syncList = Collections.synchronizedList(new ArrayList<>());
        }
    }
    ```

    | Collection (chá»¯ C hoa!) | Collections (cÅ©ng C hoa, nhÆ°ng cÃ³ 's' nha!) |
|---|---|
| ÄÃ¢y lÃ  má»™t **giao diá»‡n** (interface) bá»± cháº£ng. | CÃ²n Ä‘Ã¢y láº¡i lÃ  má»™t **lá»›p tiá»‡n Ã­ch** (utility class). |
| NÃ³ giá»‘ng nhÆ° má»™t báº£n káº¿ hoáº¡ch tá»•ng quÃ¡t cho báº¥t ká»³ "táº­p há»£p" cÃ¡c Ä‘á»‘i tÆ°á»£ng nÃ o. | NÃ³ chá»©a toÃ n nhá»¯ng phÆ°Æ¡ng thá»©c tÄ©nh (static methods) giÃºp báº¡n lÃ m Ä‘á»§ thá»© vá»›i cÃ¡c Ä‘á»‘i tÆ°á»£ng `Collection` (cÃ¡i bÃªn trÃ¡i kÃ¬a). |
| NÃ³ Ä‘á»‹nh nghÄ©a nhá»¯ng viá»‡c cÆ¡ báº£n mÃ  báº¡n cÃ³ thá»ƒ lÃ m vá»›i má»™t nhÃ³m Ä‘á»“ váº­t, nhÆ° thÃªm, xÃ³a, hay kiá»ƒm tra xem cÃ³ gÃ¬ bÃªn trong khÃ´ng. | Kiá»ƒu nhÆ° sáº¯p xáº¿p, tÃ¬m kiáº¿m, Ä‘áº£o ngÆ°á»£c, hay biáº¿n má»™t `Collection` thÃ nh "khÃ´ng thá»ƒ thay Ä‘á»•i" (immutable) áº¥y. |
| HÃ£y nghÄ© vá» nÃ³ nhÆ° "má»™t cÃ¡i rá»• Ä‘á»±ng Ä‘á»“". | HÃ£y nghÄ© vá» nÃ³ nhÆ° "má»™t bá»™ cÃ´ng cá»¥ Ä‘á»ƒ xá»­ lÃ½ cÃ¡i rá»• Ä‘Ã³". |
    |------------|-------------|
    | Giao diá»‡n | Lá»›p tiá»‡n Ã­ch |
    | DÃ¹ng Ä‘á»ƒ "gom" má»™t Ä‘á»‘ng cÃ¡c Ä‘á»‘i tÆ°á»£ng (nhá»¯ng "thá»©" báº¡n Ä‘ang lÃ m viá»‡c vá»›i) láº¡i thÃ nh má»™t nhÃ³m. | NÃ³ giá»‘ng nhÆ° má»™t "há»™p cÃ´ng cá»¥" chá»©a Ä‘áº§y nhá»¯ng chá»©c nÄƒng (phÆ°Æ¡ng thá»©c tÄ©nh) siÃªu tiá»‡n lá»£i Ä‘á»ƒ báº¡n thá»±c hiá»‡n cÃ¡c thao tÃ¡c ngay láº­p tá»©c, khÃ´ng cáº§n pháº£i "táº¡o ra" gÃ¬ cáº£. |
    | CÃ³ thá»ƒ Ä‘Æ°á»£c **triá»ƒn khai** (nhÆ° má»™t báº£n thiáº¿t káº¿!) | KHÃ”NG THá»‚ **táº¡o Ä‘á»‘i tÆ°á»£ng** trá»±c tiáº¿p (chÆ°a pháº£i lÃ  "thá»©" hoÃ n chá»‰nh!) |
    | Root of Collection hierarchy | Helper class for Collection operations |
|---|---|
| ÄÃ¢y chÃ­nh lÃ  "Ã´ng tá»•" cá»§a cáº£ nhÃ  Collection Ä‘Ã³! Táº¥t cáº£ cÃ¡c Collection khÃ¡c Ä‘á»u báº¯t nguá»“n tá»« Ä‘Ã¢y. | CÃ²n Ä‘Ã¢y lÃ  má»™t "há»™p cÃ´ng cá»¥" siÃªu xá»‹n! NÃ³ chá»©a Ä‘áº§y cÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ báº¡n "chÆ¡i Ä‘Ã¹a" vá»›i Collection. |

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

42. ### Váº­y List vÃ  Set... chÃºng khÃ¡c nhau chá»— nÃ o nhá»‰?

    ChÃ o báº¡n! Báº¡n Ä‘Ã£ sáºµn sÃ ng gáº·p gá»¡ hai "ngÃ´i sao" trong Java Collections Framework chÆ°a? ÄÃ³ lÃ  Set vÃ  List. Cáº£ hai Ä‘á»u lÃ  nhá»¯ng "giao diá»‡n" (interface) cá»±c ká»³ quan trá»ng, giÃºp chÃºng ta quáº£n lÃ½ cÃ¡c bá»™ sÆ°u táº­p dá»¯ liá»‡u. NhÆ°ng mÃ , dÃ¹ cÃ¹ng thuá»™c má»™t "gia Ä‘Ã¬nh" Collections Framework, Set vÃ  List láº¡i cÃ³ nhá»¯ng tÃ­nh cÃ¡ch vÃ  "kháº£ nÄƒng Ä‘áº·c biá»‡t" ráº¥t khÃ¡c nhau Ä‘Ã³ nha:

    | List | Set |
|---|---|
| **List** (Danh sÃ¡ch): NÃ y báº¡n, hÃ£y nghÄ© vá» má»™t danh sÃ¡ch mua sáº¯m! Báº¡n cÃ³ thá»ƒ ghi "sá»¯a" hai láº§n vÃ  thá»© tá»± cÃ¡c mÃ³n cÅ©ng quan trá»ng láº¯m Ä‘Ã³! | **Set** (Táº­p há»£p): CÃ²n Ä‘Ã¢y lÃ  Set! HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang sÆ°u táº­p nhá»¯ng mÃ³n Ä‘á»“ Ä‘á»™c Ä‘Ã¡o, nhÆ° tem cháº³ng háº¡n. Má»—i mÃ³n pháº£i duy nháº¥t, vÃ  thá»© tá»± thÃ¬ khÃ´ng thÃ nh váº¥n Ä‘á» Ä‘Ã¢u nhÃ©! |
    |------|-----|
    | Chá»©a Ä‘Æ°á»£c cÃ¡c pháº§n tá»­ giá»‘ng nhau (trÃ¹ng láº·p) | Má»—i pháº§n tá»­ pháº£i lÃ  duy nháº¥t (khÃ´ng trÃ¹ng láº·p) |
    | LuÃ´n giá»¯ *y nguyÃªn* thá»© tá»± báº¡n Ä‘Ã£ thÃªm cÃ¡c pháº§n tá»­ vÃ o. | NÃ³ *cÃ³ thá»ƒ* giá»¯ thá»© tá»± báº¡n Ä‘Ã£ thÃªm vÃ o, nhÆ°ng cÅ©ng *cÃ³ thá»ƒ khÃ´ng*! TÃ¹y vÃ o 'bÃªn trong' nÃ³ Ä‘Æ°á»£c táº¡o ra nhÆ° tháº¿ nÃ o. |
    | TÆ°á»Ÿng tÆ°á»£ng má»—i pháº§n tá»­ cÃ³ má»™t "sá»‘ nhÃ " (chá»‰ má»¥c) riÃªng, báº¯t Ä‘áº§u tá»« 0. Báº¡n muá»‘n láº¥y cÃ¡i nÃ o? Cá»© gá»i "sá»‘ nhÃ " cá»§a nÃ³! | á» Ä‘Ã¢y thÃ¬ khÃ´ng cÃ³ "sá»‘ nhÃ " (chá»‰ má»¥c) cho tá»«ng pháº§n tá»­ Ä‘Ã¢u nhÃ©. Muá»‘n tÃ¬m má»™t pháº§n tá»­? Báº¡n pháº£i "Ä‘i bá»™" qua tá»«ng cÃ¡i má»™t tá»« Ä‘áº§u Ä‘áº¿n cuá»‘i. |
    | Báº¡n cÃ³ thá»ƒ thoáº£i mÃ¡i thÃªm vÃ o *bao nhiÃªu* giÃ¡ trá»‹ `null` cÅ©ng Ä‘Æ°á»£c. Cá»© vÃ´ tÆ° Ä‘i! | CÃ²n vá»›i máº¥y 'anh báº¡n' nhÆ° `HashSet` hay `LinkedHashSet` thÃ¬ sao? Ã€, há» hÆ¡i 'khÃ³ tÃ­nh' má»™t chÃºt. DÃ¹ báº¡n cÃ³ cá»‘ gáº¯ng thÃªm bao nhiÃªu láº§n Ä‘i ná»¯a, thÃ¬ há» cÅ©ng chá»‰ giá»¯ láº¡i *duy nháº¥t má»™t* giÃ¡ trá»‹ `null` thÃ´i nhÃ©! |
    | CÃ¡c 'phiÃªn báº£n' cá»¥ thá»ƒ mÃ  báº¡n sáº½ dÃ¹ng nÃ¨: ArrayList, LinkedList, Vector | CÃ¡c 'phiÃªn báº£n' cá»¥ thá»ƒ mÃ  báº¡n sáº½ dÃ¹ng nÃ¨: HashSet, LinkedHashSet, TreeSet |

    ```java
    import java.util.*;

    public class ListVsSet {
        public static void main(String[] args) {
            // List - allows duplicates, maintains order
            List<String> list = new ArrayList<>();
            list.add("Apple");
            list.add("Banana");
            list.add("Apple");  // Duplicate allowed
            list.add(null);
            list.add(null);     // Multiple nulls allowed
            System.out.println("List: " + list);  // [Apple, Banana, Apple, null, null]
            System.out.println("Element at index 1: " + list.get(1));  // Index access
            
            // Set - no duplicates
            Set<String> hashSet = new HashSet<>();
            hashSet.add("Apple");
            hashSet.add("Banana");
            hashSet.add("Apple");  // Duplicate ignored
            hashSet.add(null);     // Only one null allowed
            System.out.println("HashSet: " + hashSet);  // Order not guaranteed
            
            // LinkedHashSet - maintains insertion order
            Set<String> linkedHashSet = new LinkedHashSet<>();
            linkedHashSet.add("Cherry");
            linkedHashSet.add("Apple");
            linkedHashSet.add("Banana");
            System.out.println("LinkedHashSet: " + linkedHashSet);  // [Cherry, Apple, Banana]
            
            // TreeSet - sorted order, no nulls
            Set<String> treeSet = new TreeSet<>();
            treeSet.add("Cherry");
            treeSet.add("Apple");
            treeSet.add("Banana");
            System.out.println("TreeSet: " + treeSet);  // [Apple, Banana, Cherry]
        }
    }
    ```

    **Tháº¿ thÃ¬, khi nÃ o báº¡n *thá»±c sá»±* cáº§n dÃ¹ng nÃ³ Ä‘Ã¢y?**
    - Báº¡n Ä‘Ã£ sáºµn sÃ ng chÆ°a? CÃ³ nhá»¯ng lÃºc, báº¡n cáº§n má»™t danh sÃ¡ch mÃ  nÃ³ pháº£i nhá»› *chÃ­nh xÃ¡c* thá»© tá»± báº¡n Ä‘Ã£ thÃªm cÃ¡c thá»© vÃ o Ä‘Ã³. Giá»‘ng nhÆ° báº¡n ghi chÃº tá»«ng mÃ³n Ä‘á»“ vÃ o danh sÃ¡ch mua sáº¯m váº­y, mÃ³n nÃ o ghi trÆ°á»›c thÃ¬ nÃ³ pháº£i á»Ÿ trÆ°á»›c.

VÃ  nÃ y, Ä‘iá»u tuyá»‡t vá»i hÆ¡n lÃ  gÃ¬? Báº¡n cÃ³ thá»ƒ thÃªm cÃ¹ng má»™t mÃ³n Ä‘á»“ vÃ o danh sÃ¡ch Ä‘Ã³ nhiá»u láº§n mÃ  nÃ³ váº«n vui váº» cháº¥p nháº­n! Kiá»ƒu nhÆ° báº¡n lá»¡ ghi 'sá»¯a' hai láº§n áº¥y.

Váº­y nÃªn, khi nÃ o báº¡n cáº§n má»™t 'bá»™ sÆ°u táº­p' mÃ :
*   NÃ³ giá»¯ nguyÃªn *thá»© tá»± thÃªm vÃ o* (ai vÃ o trÆ°á»›c, tÃ´i nhá»› trÆ°á»›c!).
*   VÃ  nÃ³ cho phÃ©p cÃ³ cÃ¡c pháº§n tá»­ *trÃ¹ng láº·p* (thÃªm 'sá»¯a' hai láº§n Æ°? Chuyá»‡n nhá»!).

...thÃ¬ hÃ£y nhá»› ngay Ä‘áº¿n **List** nhÃ©! ÄÃ³ chÃ­nh lÃ  lá»±a chá»n hoÃ n háº£o cá»§a báº¡n!
    - Khi báº¡n cáº§n lÆ°u trá»¯ má»™t 'bá»™ sÆ°u táº­p' cÃ¡c pháº§n tá»­ mÃ  *chá»‰ muá»‘n* chÃºng lÃ  duy nháº¥t, khÃ´ng cÃ³ cÃ¡i nÃ o trÃ¹ng láº·p, thÃ¬ hÃ£y dÃ¹ng **Set** nhÃ©!

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

43. ### Váº­y thÃ¬, HashSet vÃ  TreeSet cÃ³ gÃ¬ khÃ¡c nhau nhá»‰?

    Cáº£ `HashSet` vÃ  `TreeSet` Ä‘á»u lÃ  nhá»¯ng "ngÆ°á»i báº¡n" ráº¥t giá»i giang, chÃºng Ä‘á»u biáº¿t cÃ¡ch "thá»±c thi" (implement) cÃ¡i giao diá»‡n `Set` siÃªu quan trá»ng. NghÄ©a lÃ , chÃºng Ä‘á»u tuÃ¢n thá»§ cÃ¡c quy táº¯c mÃ  `Set` Ä‘Ã£ Ä‘áº·t ra.

NHÆ¯NG MÃ€, khoan Ä‘Ã£! DÃ¹ cÃ¹ng lÃ  "há»c trÃ²" cá»§a `Set`, nhÆ°ng bÃªn trong, cÃ¡ch hai anh chÃ ng nÃ y lÃ m viá»‡c (cÆ¡ cháº¿ hoáº¡t Ä‘á»™ng ná»™i bá»™) láº¡i khÃ¡c nhau má»™t trá»i má»™t vá»±c Ä‘áº¥y nhÃ©! VÃ  táº¥t nhiÃªn, vÃ¬ tháº¿ mÃ  "tÃ­nh cÃ¡ch" (Ä‘áº·c Ä‘iá»ƒm) cá»§a má»—i anh cÅ©ng ráº¥t riÃªng, khÃ´ng ai giá»‘ng ai Ä‘Ã¢u:

    | Äáº·c Ä‘iá»ƒm | HashSet | TreeSet |
|---|---|---|
| **Báº¡n muá»‘n gÃ¬?** <br> (Má»¥c Ä‘Ã­ch chÃ­nh) | Báº¡n chá»‰ cáº§n má»™t "táº­p há»£p" cÃ¡c thá»©, khÃ´ng quan tÃ¢m thá»© tá»± Ä‘Ã¢u nhÃ©! Miá»…n lÃ  má»—i thá»© chá»‰ cÃ³ má»™t báº£n sao lÃ  Ä‘Æ°á»£c. | Báº¡n muá»‘n má»™t "táº­p há»£p" cÃ¡c thá»©, nhÆ°ng *cÃ³ thá»© tá»± Ä‘Ã ng hoÃ ng* cÆ¡! VÃ­ dá»¥, báº¡n muá»‘n chÃºng Ä‘Æ°á»£c sáº¯p xáº¿p tá»« bÃ© Ä‘áº¿n lá»›n, hay theo báº£ng chá»¯ cÃ¡i. |
| **Thá»© tá»± cá»§a cÃ¡c pháº§n tá»­?** | Ã”i, quÃªn thá»© tá»± Ä‘i! `HashSet` cháº³ng quan tÃ¢m Ä‘Ã¢u. NÃ³ lÆ°u cÃ¡c pháº§n tá»­ theo kiá»ƒu "ai Ä‘áº¿n trÆ°á»›c thÃ¬... ká»‡!" Báº¡n thÃªm vÃ o `A`, `B`, `C`, nhÆ°ng khi in ra, cÃ³ thá»ƒ lÃ  `C`, `A`, `B` Ä‘áº¥y. KhÃ´ng cÃ³ gÃ¬ Ä‘áº£m báº£o cáº£. | A-ha! `TreeSet` thÃ¬ khÃ¡c háº³n. NÃ³ luÃ´n giá»¯ cÃ¡c pháº§n tá»­ *Ä‘Ã£ Ä‘Æ°á»£c sáº¯p xáº¿p*. Báº¡n thÃªm `Cherry`, `Apple`, `Banana` vÃ o, nhÆ°ng khi in ra, báº¡n sáº½ tháº¥y `Apple`, `Banana`, `Cherry` ngay! Tuyá»‡t vá»i chÆ°a? |
| **NÃ³ hoáº¡t Ä‘á»™ng tháº¿ nÃ o?** <br> (BÃªn trong) | NÃ³ dÃ¹ng má»™t "báº£ng bÄƒm" (hash table) Ä‘Ã³ báº¡n. TÆ°á»Ÿng tÆ°á»£ng nhÆ° má»™t tá»§ há»“ sÆ¡ khá»•ng lá»“, má»—i ngÄƒn kÃ©o cÃ³ má»™t "mÃ£ bÄƒm" riÃªng. NÃ³ dÃ¹ng `hashCode()` Ä‘á»ƒ tÃ¬m ngÄƒn kÃ©o vÃ  `equals()` Ä‘á»ƒ kiá»ƒm tra xem cÃ³ trÃ¹ng láº·p khÃ´ng. | NÃ³ dÃ¹ng má»™t "cÃ¢y nhá»‹ phÃ¢n tÃ¬m kiáº¿m cÃ¢n báº±ng" (balanced binary search tree). Nghe phá»©c táº¡p nhá»‰? Äá»«ng lo! Cá»© hÃ¬nh dung nÃ³ nhÆ° má»™t cÃ¡i cÃ¢y gia pháº£, má»—i pháº§n tá»­ lÃ  má»™t nÃºt, vÃ  cÃ¡c nÃºt luÃ´n Ä‘Æ°á»£c sáº¯p xáº¿p theo má»™t quy táº¯c nháº¥t Ä‘á»‹nh. |
| **Tá»‘c Ä‘á»™ thÃªm/xÃ³a/kiá»ƒm tra?** <br> (Trung bÃ¬nh) | Nhanh nhÆ° chá»›p! ThÆ°á»ng lÃ  **O(1)**. Tá»©c lÃ  dÃ¹ báº¡n cÃ³ 10 pháº§n tá»­ hay 10.000 pháº§n tá»­, nÃ³ váº«n tÃ¬m tháº¥y gáº§n nhÆ° ngay láº­p tá»©c (trá»« má»™t sá»‘ trÆ°á»ng há»£p Ä‘áº·c biá»‡t). Tuyá»‡t vá»i cho tá»‘c Ä‘á»™! | CÅ©ng nhanh, nhÆ°ng khÃ´ng báº±ng `HashSet`. Tá»‘c Ä‘á»™ lÃ  **O(log n)**. NghÄ©a lÃ  náº¿u báº¡n cÃ³ nhiá»u pháº§n tá»­ hÆ¡n, nÃ³ sáº½ máº¥t *hÆ¡i* nhiá»u thá»i gian hÆ¡n má»™t chÃºt Ä‘á»ƒ tÃ¬m vá»‹ trÃ­ Ä‘Ãºng cho pháº§n tá»­ má»›i, hoáº·c Ä‘á»ƒ tÃ¬m kiáº¿m. |
| **Pháº§n tá»­ `null`?** | CÃ³ chá»©! `HashSet` cho phÃ©p báº¡n thÃªm **má»™t** pháº§n tá»­ `null` vÃ o Ä‘áº¥y. | á»’ khÃ´ng! `TreeSet` thÃ¬ **khÃ´ng thÃ­ch** `null` Ä‘Ã¢u. Náº¿u báº¡n cá»‘ thÃªm `null` vÃ o má»™t `TreeSet` mÃ  khÃ´ng cÃ³ `Comparator` Ä‘áº·c biá»‡t, nÃ³ sáº½ ná»•i giáº­n vÃ  nÃ©m ra lá»—i `NullPointerException` Ä‘áº¥y! Cáº©n tháº­n nha. |
| **Cáº§n gÃ¬ Ä‘á»ƒ hoáº¡t Ä‘á»™ng?** | Äá»ƒ `HashSet` biáº¿t cÃ¡c pháº§n tá»­ cÃ³ giá»‘ng nhau khÃ´ng, báº¡n cáº§n Ä‘áº£m báº£o lá»›p cá»§a báº¡n Ä‘Ã£ cÃ i Ä‘áº·t Ä‘Ãºng hai phÆ°Æ¡ng thá»©c: `hashCode()` vÃ  `equals()`. Náº¿u khÃ´ng, má»i thá»© cÃ³ thá»ƒ loáº¡n háº¿t lÃªn Ä‘Ã³! | Äá»ƒ `TreeSet` biáº¿t cÃ¡ch sáº¯p xáº¿p cÃ¡c pháº§n tá»­, cÃ¡c pháº§n tá»­ cá»§a báº¡n pháº£i "biáº¿t cÃ¡ch" so sÃ¡nh vá»›i nhau. CÃ³ hai cÃ¡ch: <br> 1. Lá»›p cá»§a báº¡n pháº£i cÃ i Ä‘áº·t giao diá»‡n `Comparable` (phÆ°Æ¡ng thá»©c `compareTo()`). <br> 2. Hoáº·c báº¡n pháº£i cung cáº¥p má»™t `Comparator` riÃªng khi táº¡o `TreeSet`. |
    |---------|---------|
    | NÃ¨, biáº¿t gÃ¬ khÃ´ng? BÃªn trong ruá»™t cá»§a nÃ³ Ã¡, nÃ³ dÃ¹ng má»™t cÃ¡i tÃªn lÃ  `HashMap` Ä‘á»ƒ lÃ m viá»‡c Ä‘Ã³! | CÃ²n anh báº¡n nÃ y thÃ¬ sao? Ã€, nÃ³ láº¡i chá»n dÃ¹ng `TreeMap` Ä‘á»ƒ sáº¯p xáº¿p má»i thá»© cÆ¡. MÃ  cÃ¡i `TreeMap` nÃ y, thá»±c ra nÃ³ Ä‘Æ°á»£c xÃ¢y dá»±ng dá»±a trÃªn má»™t cáº¥u trÃºc cÃ¢y Ä‘áº·c biá»‡t gá»i lÃ  'Red-Black Tree' Ä‘Ã³ nha! |
    | NÃ³ cháº³ng quan tÃ¢m Ä‘áº¿n thá»© tá»± Ä‘Ã¢u. CÃ¡c pháº§n tá»­ cá»© "nháº£y nhÃ³t" lung tung thÃ´i! | Ã€, cÃ¡i nÃ y thÃ¬ khÃ¡c! NÃ³ luÃ´n giá»¯ cho cÃ¡c pháº§n tá»­ Ä‘Æ°á»£c sáº¯p xáº¿p gá»n gÃ ng, theo má»™t tráº­t tá»± tá»± nhiÃªn (vÃ­ dá»¥: sá»‘ bÃ© Ä‘áº¿n lá»›n, chá»¯ cÃ¡i A Ä‘áº¿n Z). |
    | Cho phÃ©p báº¡n thÃªm Má»˜T giÃ¡ trá»‹ `null` (chá»‰ má»™t thÃ´i nhÃ©!). | Tuyá»‡t Ä‘á»‘i KHÃ”NG cho phÃ©p báº¥t ká»³ giÃ¡ trá»‹ `null` nÃ o Ä‘Ã¢u! |
    | `O(1)` cho thÃªm, xÃ³a, kiá»ƒm tra | `O(log n)` cho thÃªm, xÃ³a, kiá»ƒm tra |
|---|---|
| Báº¡n hÃ¬nh dung tháº¿ nÃ y nhÃ©: DÃ¹ báº¡n cÃ³ 1 mÃ³n Ä‘á»“ hay cáº£ triá»‡u mÃ³n Ä‘á»“, viá»‡c *thÃªm vÃ o*, *xÃ³a Ä‘i*, hay *kiá»ƒm tra xem mÃ³n Ä‘á»“ Ä‘Ã³ cÃ³ á»Ÿ Ä‘Ã³ khÃ´ng*... luÃ´n máº¥t *cÃ¹ng má»™t khoáº£ng thá»i gian* cá»‘ Ä‘á»‹nh. Tá»©c lÃ , nÃ³ siÃªu nhanh vÃ  khÃ´ng bao giá» bá»‹ áº£nh hÆ°á»Ÿng bá»Ÿi sá»‘ lÆ°á»£ng mÃ³n Ä‘á»“ báº¡n Ä‘ang cÃ³! | Vá»›i `O(log n)`, khi báº¡n cÃ³ má»™t danh sÃ¡ch mÃ³n Ä‘á»“. Viá»‡c *thÃªm*, *xÃ³a*, hay *tÃ¬m kiáº¿m* má»™t mÃ³n Ä‘á»“ sáº½ máº¥t thá»i gian *hÆ¡i lÃ¢u hÆ¡n má»™t chÃºt* khi danh sÃ¡ch lá»›n dáº§n lÃªn. NhÆ°ng Ä‘á»«ng lo, nÃ³ tÄƒng ráº¥t cháº­m! Giá»‘ng nhÆ° khi báº¡n tÃ¬m tá»« trong cuá»‘n tá»« Ä‘iá»ƒn dÃ y cá»™p váº­y: má»—i láº§n tÃ¬m, báº¡n láº¡i chia Ä‘Ã´i danh sÃ¡ch Ä‘á»ƒ thu háº¹p pháº¡m vi. DÃ¹ danh sÃ¡ch cÃ³ lá»›n tháº¿ nÃ o, báº¡n cÅ©ng tÃ¬m tháº¥y khÃ¡ nhanh! |
    | **Khi nÃ o thÃ¬ biáº¿t hai Ä‘á»‘i tÆ°á»£ng cÃ³ 'giá»‘ng nhau' khÃ´ng?** (Cáº§n `hashCode()` vÃ  `equals()` Ä‘Ã³!) | **Khi nÃ o thÃ¬ muá»‘n sáº¯p xáº¿p cÃ¡c Ä‘á»‘i tÆ°á»£ng theo thá»© tá»±?** (Cáº§n `compareTo()` hoáº·c `Comparator` nha!) |
    | Cháº¡y siÃªu nhanh khi báº¡n lÃ m nhá»¯ng viá»‡c cÆ¡ báº£n | Tuyá»‡t vá»i khi báº¡n muá»‘n dá»¯ liá»‡u luÃ´n "xáº¿p hÃ ng" gá»n gÃ ng |

    ```java
    import java.util.*;

    public class HashSetVsTreeSet {
        public static void main(String[] args) {
            // HashSet - no ordering, allows null
            Set<Integer> hashSet = new HashSet<>();
            hashSet.add(30);
            hashSet.add(10);
            hashSet.add(20);
            hashSet.add(null);  // Allowed
            hashSet.add(10);    // Duplicate ignored
            System.out.println("HashSet: " + hashSet);  // Order not guaranteed
            
            // TreeSet - sorted order, no null
            Set<Integer> treeSet = new TreeSet<>();
            treeSet.add(30);
            treeSet.add(10);
            treeSet.add(20);
            // treeSet.add(null);  // Throws NullPointerException
            System.out.println("TreeSet: " + treeSet);  // [10, 20, 30] - sorted
            
            // TreeSet with custom Comparator (descending order)
            Set<Integer> descendingSet = new TreeSet<>(Collections.reverseOrder());
            descendingSet.add(30);
            descendingSet.add(10);
            descendingSet.add(20);
            System.out.println("Descending TreeSet: " + descendingSet);  // [30, 20, 10]
            
            // TreeSet with custom objects
            Set<Person> personSet = new TreeSet<>(Comparator.comparing(Person::getName));
            personSet.add(new Person("John", 25));
            personSet.add(new Person("Alice", 30));
            personSet.add(new Person("Bob", 20));
            System.out.println("Person TreeSet: " + personSet);
        }
    }

    class Person {
        private String name;
        private int age;
        
        public Person(String name, int age) {
            this.name = name;
            this.age = age;
        }
        
        public String getName() { return name; }
        public int getAge() { return age; }
        
        @Override
        public String toString() {
            return name + "(" + age + ")";
        }
    }
    ```

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

44. ### "Váº¥n Ä‘á» kim cÆ°Æ¡ng" trong Java lÃ  gÃ¬ váº­y nhá»‰?

    ChÃ o báº¡n! HÃ´m nay chÃºng ta sáº½ cÃ¹ng khÃ¡m phÃ¡ má»™t ráº¯c rá»‘i nho nhá» mang tÃªn "váº¥n Ä‘á» kim cÆ°Æ¡ng" (diamond problem) nhÃ©.

NÃ³ xuáº¥t hiá»‡n khi nÃ o? Ã€, lÃ  lÃºc báº¡n sá»­ dá»¥ng "Ä‘a káº¿ thá»«a" (multiple inheritance) Ä‘Ã³.

Cá»¥ thá»ƒ lÃ  tháº¿ nÃ y:
*   Báº¡n cÃ³ má»™t lá»›p (class) con.
*   Lá»›p con nÃ y "thá»«a káº¿" tá»« HAI lá»›p cha khÃ¡c nhau.
*   VÃ  Ä‘iá»u Ä‘áº·c biá»‡t lÃ , cáº£ HAI lá»›p cha Ä‘Ã³ láº¡i cÃ¹ng "thá»«a káº¿" tá»« Má»˜T lá»›p "Ã´ng cá»‘" (lá»›p cha chung) duy nháº¥t!

Báº¡n tháº¥y khÃ´ng? LÃºc nÃ y, lá»›p con sáº½ bá»‹ "máº­p má»", khÃ´ng biáº¿t nÃªn láº¥y cÃ¡i gÃ¬ (phÆ°Æ¡ng thá»©c, thuá»™c tÃ­nh cháº³ng háº¡n) tá»« lá»›p cha nÃ o, vÃ¬ cáº£ hai lá»›p cha Ä‘á»u cÃ³ thá»ƒ Ä‘Ã£ káº¿ thá»«a cÃ¹ng má»™t thá»© tá»« Ã´ng cá»‘ chung rá»“i. ÄÃ³ chÃ­nh lÃ  sá»± khÃ³ xá»­ Ä‘áº¥y!

Táº¡i sao láº¡i gá»i lÃ  "kim cÆ°Æ¡ng" Æ°?
ÄÆ¡n giáº£n lÃ  vÃ¬ khi báº¡n váº½ cÃ¡i sÆ¡ Ä‘á»“ má»‘i quan há»‡ káº¿ thá»«a nÃ y ra, nÃ³ sáº½ cÃ³ hÃ¬nh dÃ¡ng GIá»NG Há»†T má»™t viÃªn kim cÆ°Æ¡ng váº­y Ä‘Ã³!

    **Váº¥n Ä‘á» cá»§a chÃºng ta:**
    ```
           A
          / \
         B   C
          \ /
           D
    ```
    NÃ y báº¡n, hÃ£y cÃ¹ng nghÄ© vá» má»™t tÃ¬nh huá»‘ng thÃº vá»‹ nhÃ©!

Báº¡n cÃ³ má»™t lá»›p tÃªn lÃ  `A`. Trong lá»›p `A` nÃ y, cÃ³ má»™t phÆ°Æ¡ng thá»©c (method) nÃ o Ä‘Ã³, vÃ­ dá»¥ nhÆ° `doSomething()`.

```java
class A {
    void doSomething() {
        System.out.println("A Ä‘ang lÃ m gÃ¬ Ä‘Ã³!");
    }
}
```

Giá», báº¡n cÃ³ hai lá»›p khÃ¡c, `B` vÃ  `C`. Cáº£ hai lá»›p nÃ y Ä‘á»u "káº¿ thá»«a" (inherits) tá»« lá»›p `A`. Tá»©c lÃ , chÃºng nháº­n Ä‘Æ°á»£c phÆ°Æ¡ng thá»©c `doSomething()` tá»« `A`.
NhÆ°ng cáº£ `B` vÃ  `C` Ä‘á»u quyáº¿t Ä‘á»‹nh "ghi Ä‘Ã¨" (override) phÆ°Æ¡ng thá»©c `doSomething()` Ä‘Ã³, Ä‘á»ƒ lÃ m má»™t viá»‡c riÃªng cá»§a mÃ¬nh.

```java
class B extends A {
    @Override
    void doSomething() {
        System.out.println("B Ä‘ang lÃ m viá»‡c cá»§a B!");
    }
}

class C extends A {
    @Override
    void doSomething() {
        System.out.println("C Ä‘ang lÃ m viá»‡c cá»§a C!");
    }
}
```

Má»i thá»© váº«n á»•n pháº£i khÃ´ng? Giá» Ä‘áº¿n pháº§n "hÃ³c bÃºa" Ä‘Ã¢y!

**Chuyá»‡n gÃ¬ sáº½ xáº£y ra náº¿u báº¡n cÃ³ má»™t lá»›p `D` vÃ  lá»›p `D` nÃ y muá»‘n káº¿ thá»«a tá»« Cáº¢ `B` vÃ  `C`?**

```java
// Giáº£ sá»­ cÃ³ thá»ƒ lÃ m tháº¿ nÃ y... nhÆ°ng trong Java thÃ¬ KHÃ”NG ÄÆ¯á»¢C Ä‘Ã¢u nhÃ©!
// class D extends B, C { 
//     // ...
// }
```

Náº¿u Ä‘iá»u Ä‘Ã³ *cÃ³ thá»ƒ xáº£y ra* (trong má»™t sá»‘ ngÃ´n ngá»¯ láº­p trÃ¬nh khÃ¡c), thÃ¬ khi báº¡n táº¡o má»™t Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p `D` vÃ  gá»i `d.doSomething()`, **thÃ¬ lá»›p `D` nÃªn sá»­ dá»¥ng phiÃªn báº£n `doSomething()` cá»§a `B` hay cá»§a `C` Ä‘Ã¢y?**

```java
// Náº¿u D káº¿ thá»«a cáº£ B vÃ  C...
// D d = new D();
// d.doSomething(); // Ai sáº½ tháº¯ng Ä‘Ã¢y? B hay C?
```

ÄÃ³ chÃ­nh lÃ  má»™t cÃ¢u há»i lá»›n! NÃ³ táº¡o ra sá»± "mÆ¡ há»“" (ambiguity) vÃ  há»‡ thá»‘ng khÃ´ng biáº¿t pháº£i chá»n cÃ¡i nÃ o. VÃ  Ä‘Ã³ cÅ©ng chÃ­nh lÃ  lÃ½ do táº¡i sao trong Java, má»™t lá»›p **khÃ´ng thá»ƒ káº¿ thá»«a trá»±c tiáº¿p tá»« nhiá»u lá»›p khÃ¡c** (hay cÃ²n gá»i lÃ  "Ä‘a káº¿ thá»«a lá»›p" - multiple inheritance of classes). Java thiáº¿t káº¿ nhÆ° váº­y Ä‘á»ƒ trÃ¡nh nhá»¯ng tÃ¬nh huá»‘ng khÃ³ xá»­, "Ä‘au Ä‘áº§u" nhÆ° tháº¿ nÃ y Ä‘áº¥y báº¡n!

    **Ã€, Ä‘Ã¢y lÃ  cÃ¡ch Java "xá»­ lÃ½" Ä‘Ã¢y!**
    NÃ y, Java cÃ³ má»™t quy táº¯c khÃ¡ rÃµ rÃ ng: báº¡n khÃ´ng thá»ƒ cho má»™t class "káº¿ thá»«a" tá»« nhiá»u hÆ¡n má»™t class khÃ¡c cÃ¹ng lÃºc. Viá»‡c nÃ y giÃºp trÃ¡nh "váº¥n Ä‘á» kim cÆ°Æ¡ng" (diamond problem), má»™t tÃ¬nh huá»‘ng cÃ³ thá»ƒ gÃ¢y ra nhiá»u nháº§m láº«n vÃ  xung Ä‘á»™t Ä‘áº¥y.

Tuy nhiÃªn, Ä‘á»£i chÃºt! Ká»ƒ tá»« Java 8 trá»Ÿ Ä‘i, cÃ¡c interface Ä‘Ã£ Ä‘Æ°á»£c trang bá»‹ thÃªm "default methods" (phÆ°Æ¡ng thá»©c máº·c Ä‘á»‹nh) rá»“i Ä‘áº¥y. VÃ  chÃ­nh vÃ¬ "sá»©c máº¡nh" má»›i nÃ y, má»™t ráº¯c rá»‘i "na nÃ¡" nhÆ° váº¥n Ä‘á» kim cÆ°Æ¡ng láº¡i cÃ³ thá»ƒ xuáº¥t hiá»‡n:

    ```java
    interface A {
        default void display() {
            System.out.println("Display from A");
        }
    }

    interface B extends A {
        @Override
        default void display() {
            System.out.println("Display from B");
        }
    }

    interface C extends A {
        @Override
        default void display() {
            System.out.println("Display from C");
        }
    }

    // Diamond problem with interfaces
    class D implements B, C {
        // Must override to resolve ambiguity
        @Override
        public void display() {
            // Can choose which interface method to call
            B.super.display();  // Calls B's display
            // or
            // C.super.display();  // Calls C's display
            // or provide own implementation
            System.out.println("Display from D");
        }
    }

    public class DiamondProblem {
        public static void main(String[] args) {
            D d = new D();
            d.display();
        }
    }
    ```

    **Java 'Giáº£i Quyáº¿t' Má»i Chuyá»‡n NhÆ° Tháº¿ NÃ o? (CÃ¡c Quy Táº¯c PhÃ¢n Giáº£i):**
    1. NÃ y báº¡n, hÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©:

Náº¿u má»™t lá»›p cá»§a báº¡n (vÃ­ dá»¥, `MyClass`)
*   káº¿ thá»«a má»™t phÆ°Æ¡ng thá»©c tá»« **lá»›p cha** cá»§a nÃ³ (`SuperClass`),
*   VÃ€ Ä‘á»“ng thá»i cÅ©ng 'nháº­n' má»™t phÆ°Æ¡ng thá»©c *cÃ³ cÃ¹ng tÃªn* tá»« **giao diá»‡n** mÃ  nÃ³ Ä‘ang triá»ƒn khai (`MyInterface`),

Váº­y thÃ¬, phÆ°Æ¡ng thá»©c tá»« **lá»›p cha** sáº½ Ä‘Æ°á»£c Æ°u tiÃªn sá»­ dá»¥ng! NÃ³ giá»‘ng nhÆ° 'lá»›p tháº¯ng giao diá»‡n' váº­y Ä‘Ã³. Quy táº¯c cá»§a lá»›p cha sáº½ Ä‘Æ°á»£c Ã¡p dá»¥ng trÆ°á»›c tiÃªn.
    2. **Loáº¡i con (Subtype) tháº¯ng cuá»™c:** Khi cÃ³ xung Ä‘á»™t method máº·c Ä‘á»‹nh (default method) giá»¯a cÃ¡c interface, Java sáº½ Æ°u tiÃªn chá»n method cá»§a **interface nÃ o cá»¥ thá»ƒ hÆ¡n** thay vÃ¬ cá»§a interface Ã­t cá»¥ thá»ƒ hÆ¡n.
    3. **Giáº£i quyáº¿t tÆ°á»ng minh:**

Náº¿u má»i thá»© váº«n cÃ²n "máº­p má»," vÃ  Java váº«n khÃ´ng biáº¿t pháº£i chá»n method nÃ o, thÃ¬...

Lá»›p cá»§a báº¡n pháº£i *tá»± tay* viáº¿t láº¡i (override) cÃ¡i method Ä‘Ã³.

VÃ  quan trá»ng lÃ , báº¡n pháº£i *chá»‰ rÃµ ra* lÃ  nÃ³ nÃªn dÃ¹ng method nÃ o! Báº¡n pháº£i nÃ³i cho Java biáº¿t *chÃ­nh xÃ¡c* Ä‘iá»u báº¡n muá»‘n.

    ```java
    class Parent {
        void show() {
            System.out.println("Parent show");
        }
    }

    interface MyInterface {
        default void show() {
            System.out.println("Interface show");
        }
    }

    // Class method wins over interface default method
    class Child extends Parent implements MyInterface {
        // No override needed - Parent's show() is used automatically
    }
    ```

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

45. ### Dependency Injection lÃ  gÃ¬?

    ChÃ o báº¡n! Báº¡n Ä‘Ã£ tá»«ng nghe vá» **Dependency Injection** (DI) chÆ°a?

HÃ£y coi nÃ³ nhÆ° má»™t **máº«u thiáº¿t káº¿** (design pattern) siÃªu hay ho váº­y. Máº«u thiáº¿t káº¿ lÃ  gÃ¬ Æ°? ÄÆ¡n giáº£n lÃ  má»™t "cÃ´ng thá»©c" Ä‘Ã£ Ä‘Æ°á»£c kiá»ƒm chá»©ng Ä‘á»ƒ giáº£i quyáº¿t nhá»¯ng váº¥n Ä‘á» hay gáº·p trong láº­p trÃ¬nh thÃ´i.

Váº­y DI lÃ m gÃ¬ nhá»‰?

NÃ³ giÃºp chÃºng ta thá»±c hiá»‡n má»™t thá»© gá»i lÃ  **Inversion of Control** (IoC) â€“ hay cÃ²n gá»i lÃ  Äáº£o ngÆ°á»£c Ä‘iá»u khiá»ƒn.

**Äáº£o ngÆ°á»£c Ä‘iá»u khiá»ƒn** Æ°? Nghe cÃ³ váº» "hack nÃ£o" Ä‘Ãºng khÃ´ng? Äá»«ng lo, nÃ³ chá»‰ cÃ³ nghÄ©a lÃ  chÃºng ta thay Ä‘á»•i xem ai lÃ  ngÆ°á»i chá»‹u trÃ¡ch nhiá»‡m thÃ´i!

BÃ¬nh thÆ°á»ng, má»™t lá»›p (class) sáº½ tá»± táº¡o ra táº¥t cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng (object) khÃ¡c mÃ  nÃ³ cáº§n *ngay bÃªn trong chÃ­nh nÃ³*.

NhÆ°ng vá»›i DI, chÃºng ta sáº½ nÃ³i: "NÃ y lá»›p, Ä‘á»«ng báº­n tÃ¢m tá»± táº¡o máº¥y thá»© Ä‘Ã³ ná»¯a!"

Thay vÃ o Ä‘Ã³, chÃºng ta sáº½ táº¡o ra nhá»¯ng "Ä‘á»‘i tÆ°á»£ng phá»¥ thuá»™c" (tá»©c lÃ  nhá»¯ng thá»© mÃ  lá»›p cá»§a báº¡n cáº§n Ä‘á»ƒ hoáº¡t Ä‘á»™ng) *á»Ÿ bÃªn ngoÃ i* lá»›p Ä‘Ã³.

Sau Ä‘Ã³, chÃºng ta chá»‰ viá»‡c **cung cáº¥p** nhá»¯ng Ä‘á»‘i tÆ°á»£ng Ä‘Ã£ "lÃ m sáºµn" nÃ y cho lá»›p cá»§a báº¡n.

VÃ  Ä‘oÃ¡n xem? CÃ³ nhiá»u cÃ¡ch khÃ¡c nhau Ä‘á»ƒ chÃºng ta cÃ³ thá»ƒ "trao tay" nhá»¯ng Ä‘á»‘i tÆ°á»£ng nÃ y cho lá»›p Ä‘Ã³ Ä‘áº¥y. Dá»… nhÆ° Äƒn káº¹o pháº£i khÃ´ng nÃ o!

    **Nhá»¯ng Lá»£i Ãch "Tuyá»‡t Vá»i" Cá»§a Dependency Injection:**
    1. NÃ y báº¡n, cÃ³ má»™t Ã½ tÆ°á»Ÿng hay ho trong láº­p trÃ¬nh mÃ  chÃºng ta cáº§n biáº¿t: **Sá»± gáº¯n káº¿t lá»ng láº»o giá»¯a cÃ¡c lá»›p** (Loose coupling between classes).

Nghe cÃ³ váº» phá»©c táº¡p? Äá»«ng lo, nÃ³ Ä‘Æ¡n giáº£n láº¯m!

NÃ³ cÃ³ nghÄ©a lÃ :
ChÃºng ta muá»‘n cÃ¡c "lá»›p" (classes) trong chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh lÃ m viá»‡c cÃ¹ng nhau, nhÆ°ng **khÃ´ng quÃ¡ phá»¥ thuá»™c vÃ o nhau** má»™t cÃ¡ch cháº·t cháº½.

TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y:
*   Náº¿u Lá»›p A pháº£i biáº¿t *táº¥t cáº£ má»i thá»©* vá» cÃ¡ch Lá»›p B hoáº¡t Ä‘á»™ng bÃªn trong, thÃ¬ khi Lá»›p B thay Ä‘á»•i má»™t chÃºt, Lá»›p A cÅ©ng sáº½ "khÃ³c thÃ©t" vÃ  pháº£i sá»­a theo. ÄÃ³ lÃ  **gáº¯n káº¿t cháº·t** (tight coupling). KhÃ´ng tá»‘t!
*   NhÆ°ng náº¿u Lá»›p A vÃ  Lá»›p B chá»‰ biáº¿t nhá»¯ng gÃ¬ *cáº§n thiáº¿t* Ä‘á»ƒ tÆ°Æ¡ng tÃ¡c vá»›i nhau, mÃ  khÃ´ng cáº§n báº­n tÃ¢m Ä‘áº¿n "ruá»™t gan" cá»§a Ä‘á»‘i phÆ°Æ¡ng â€“ Ä‘Ã³ chÃ­nh lÃ  **gáº¯n káº¿t lá»ng láº»o**!

**Táº¡i sao Ä‘iá»u nÃ y láº¡i quan trá»ng?**

*   **Dá»… thay Ä‘á»•i hÆ¡n:** Báº¡n cÃ³ thá»ƒ sá»­a Ä‘á»•i má»™t lá»›p mÃ  khÃ´ng lÃ m áº£nh hÆ°á»Ÿng Ä‘áº¿n cÃ¡c lá»›p khÃ¡c.
*   **Dá»… tÃ¡i sá»­ dá»¥ng hÆ¡n:** CÃ¡c lá»›p "Ä‘á»™c láº­p" hÆ¡n cÃ³ thá»ƒ Ä‘Æ°á»£c dÃ¹ng láº¡i á»Ÿ nhiá»u nÆ¡i khÃ¡c.
*   **Code cá»§a báº¡n linh hoáº¡t hÆ¡n:** Dá»… báº£o trÃ¬ vÃ  phÃ¡t triá»ƒn hÆ¡n ráº¥t nhiá»u!

Váº­y nÃªn, hÃ£y luÃ´n cá»‘ gáº¯ng giá»¯ cÃ¡c lá»›p cá»§a mÃ¬nh **gáº¯n káº¿t lá»ng láº»o** nhÃ©!
    2. Kiá»ƒm thá»­ Ä‘Æ¡n vá»‹? Giá» thÃ¬ *dá»… hÆ¡n háº³n* rá»“i Ä‘áº¥y! (Nhá» cÃ¡c "Ä‘á»‘i tÆ°á»£ng giáº£ láº­p" - hay cÃ²n gá»i lÃ  *mock dependencies*!)
    3. LÃ m cho viá»‡c tÃ¡i sá»­ dá»¥ng code trá»Ÿ nÃªn dá»… dÃ ng vÃ  hiá»‡u quáº£ hÆ¡n!
    4. Dá»… báº£o trÃ¬ hÆ¡n nhiá»u, láº¡i cÃ²n siÃªu linh hoáº¡t ná»¯a chá»©!

    **CÃ¡c kiá»ƒu TiÃªm phá»¥ thuá»™c (Dependency Injection):**

    1. **TiÃªm vÃ o HÃ m khá»Ÿi táº¡o:**

NÃ y báº¡n! Báº¡n Ä‘Ã£ bao giá» nghÄ©: "LÃ m tháº¿ nÃ o Ä‘á»ƒ má»™t Ä‘á»‘i tÆ°á»£ng cá»§a tÃ´i nháº­n Ä‘Æ°á»£c nhá»¯ng thá»© nÃ³ cáº§n Ä‘á»ƒ hoáº¡t Ä‘á»™ng, mÃ  khÃ´ng pháº£i tá»± Ä‘i 'sÄƒn lÃ¹ng' chÃºng?" ÄÃ³ chÃ­nh lÃ  lÃºc "TiÃªm vÃ o HÃ m khá»Ÿi táº¡o" xuáº¥t hiá»‡n Ä‘á»ƒ giáº£i cá»©u!

HÃ£y hÃ¬nh dung tháº¿ nÃ y nhÃ©: báº¡n Ä‘ang xÃ¢y dá»±ng má»™t chiáº¿c xe hÆ¡i (Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n). Äá»ƒ chiáº¿c xe cháº¡y Ä‘Æ°á»£c, nÃ³ cáº§n má»™t Ä‘á»™ng cÆ¡ (má»™t sá»± phá»¥ thuá»™c, hay *dependency*). Thay vÃ¬ Ä‘á»ƒ chiáº¿c xe tá»± tÃ¬m má»™t cÃ¡i Ä‘á»™ng cÆ¡ sau khi nÃ³ Ä‘Æ°á»£c táº¡o ra, thÃ¬ báº¡n, ngÆ°á»i thá»£ láº¯p rÃ¡p, sáº½ **Ä‘Æ°a** cho nÃ³ cÃ¡i Ä‘á»™ng cÆ¡ ngay khi báº¡n báº¯t Ä‘áº§u xÃ¢y dá»±ng chiáº¿c xe Ä‘Ã³.

Trong láº­p trÃ¬nh, "TiÃªm vÃ o HÃ m khá»Ÿi táº¡o" cÃ³ nghÄ©a lÃ :

*   Khi báº¡n táº¡o má»™t Ä‘á»‘i tÆ°á»£ng má»›i, báº¡n sáº½ **truyá»n vÃ o** táº¥t cáº£ nhá»¯ng thá»© mÃ  Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ cáº§n Ä‘á»ƒ hoáº¡t Ä‘á»™ng ngay trong hÃ m khá»Ÿi táº¡o (constructor) cá»§a nÃ³.
*   Äá»‘i tÆ°á»£ng Ä‘Ã³ khÃ´ng cáº§n pháº£i tá»± táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c, hay tá»± Ä‘i tÃ¬m chÃºng. NÃ³ chá»‰ cáº§n *nháº­n* chÃºng tá»« bÃªn ngoÃ i.

**VÃ­ dá»¥, hÃ£y nhÃ¬n vÃ o Ä‘oáº¡n mÃ£ nÃ y:**

```java
class DongCo {
    void khoiDong() {
        System.out.println("Äá»™ng cÆ¡ ná»• mÃ¡y!");
    }
}

class XeHoi {
    private DongCo dongCo; // XeHoi cáº§n má»™t DongCo

    // ÄÃ¢y lÃ  Constructor Injection!
    // Báº¡n truyá»n DongCo vÃ o ngay khi táº¡o XeHoi
    public XeHoi(DongCo dongCo) {
        this.dongCo = dongCo;
    }

    void lai() {
        dongCo.khoiDong();
        System.out.println("Xe hÆ¡i Ä‘ang cháº¡y...");
    }
}

// CÃ¡ch sá»­ dá»¥ng:
public class BaiHocVeTiemConstructor {
    public static void main(String[] args) {
        DongCo dongCoMoi = new DongCo(); // Táº¡o Ä‘á»™ng cÆ¡ trÆ°á»›c
        XeHoi xeCuaToi = new XeHoi(dongCoMoi); // "TiÃªm" Ä‘á»™ng cÆ¡ vÃ o khi táº¡o xe
        xeCuaToi.lai();
    }
}
```

Báº¡n tháº¥y Ä‘Ã³, `XeHoi` khÃ´ng tá»± táº¡o `DongCo`. NÃ³ chá»‰ Ä‘Æ¡n giáº£n lÃ  nháº­n má»™t `DongCo` tá»« bÃªn ngoÃ i qua hÃ m khá»Ÿi táº¡o.

**Táº¡i sao nÃ³ láº¡i hay ho Ä‘áº¿n váº­y?**

*   **RÃµ rÃ ng hÆ¡n:** Báº¡n nhÃ¬n vÃ o hÃ m khá»Ÿi táº¡o lÃ  biáº¿t ngay Ä‘á»‘i tÆ°á»£ng nÃ y cáº§n nhá»¯ng gÃ¬ Ä‘á»ƒ sá»‘ng sÃ³t.
*   **Dá»… kiá»ƒm tra hÆ¡n:** Khi báº¡n muá»‘n kiá»ƒm tra `XeHoi`, báº¡n cÃ³ thá»ƒ dá»… dÃ ng "tiÃªm" vÃ o má»™t `DongCo` giáº£ (má»™t `DongCo` dÃ¹ng Ä‘á»ƒ kiá»ƒm thá»­) mÃ  khÃ´ng cáº§n pháº£i lo láº¯ng vá» viá»‡c táº¡o ra má»™t `DongCo` tháº­t phá»©c táº¡p.
*   **Linh hoáº¡t hÆ¡n:** Báº¡n cÃ³ thá»ƒ thay Ä‘á»•i loáº¡i `DongCo` mÃ  khÃ´ng cáº§n thay Ä‘á»•i code bÃªn trong `XeHoi`.

ÄÃ³ chÃ­nh lÃ  "TiÃªm vÃ o HÃ m khá»Ÿi táº¡o" â€“ má»™t cÃ¡ch siÃªu ngáº§u Ä‘á»ƒ giá»¯ cho cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n Ä‘á»™c láº­p vÃ  dá»… quáº£n lÃ½ hÆ¡n!
    ```java
    // Dependency
    interface MessageService {
        void sendMessage(String message);
    }

    class EmailService implements MessageService {
        @Override
        public void sendMessage(String message) {
            System.out.println("Email sent: " + message);
        }
    }

    class SMSService implements MessageService {
        @Override
        public void sendMessage(String message) {
            System.out.println("SMS sent: " + message);
        }
    }

    // Constructor Injection
    class NotificationService {
        private final MessageService messageService;
        
        // Dependency injected through constructor
        public NotificationService(MessageService messageService) {
            this.messageService = messageService;
        }
        
        public void notify(String message) {
            messageService.sendMessage(message);
        }
    }
    ```

    2. **TiÃªm báº±ng Setter (Setter Injection):**
(ÄÃ¢y lÃ  má»™t cÃ¡ch khÃ¡c Ä‘á»ƒ "Ä‘Æ°a" nhá»¯ng thá»© Ä‘á»‘i tÆ°á»£ng cáº§n vÃ o báº±ng cÃ¡c phÆ°Æ¡ng thá»©c `set`!)
    ```java
    class NotificationService {
        private MessageService messageService;
        
        // Dependency injected through setter
        public void setMessageService(MessageService messageService) {
            this.messageService = messageService;
        }
        
        public void notify(String message) {
            messageService.sendMessage(message);
        }
    }
    ```

    3. **TiÃªm Giao diá»‡n:**
    ```java
    interface MessageServiceInjector {
        void injectMessageService(MessageService service);
    }

    class NotificationService implements MessageServiceInjector {
        private MessageService messageService;
        
        @Override
        public void injectMessageService(MessageService service) {
            this.messageService = service;
        }
        
        public void notify(String message) {
            messageService.sendMessage(message);
        }
    }
    ```

    **NÃ o, cÃ¹ng xem cÃ¡ch dÃ¹ng nhÃ©!**
    ```java
    public class DIExample {
        public static void main(String[] args) {
            // Create dependencies
            MessageService emailService = new EmailService();
            MessageService smsService = new SMSService();
            
            // Inject dependencies
            NotificationService notifier1 = new NotificationService(emailService);
            notifier1.notify("Hello via Email!");
            
            NotificationService notifier2 = new NotificationService(smsService);
            notifier2.notify("Hello via SMS!");
        }
    }
    ```

    **Ã€ nÃ y, cÃ³ má»™t Ä‘iá»u nhá» xÃ­u mÃ  báº¡n nÃªn biáº¿t nhÃ©!**
Máº¥y cÃ¡i framework "khá»§ng" (tá»©c lÃ  nhá»¯ng bá»™ cÃ´ng cá»¥ lá»›n) nhÆ° Spring áº¥y, chÃºng nÃ³ *siÃªu thÃ´ng minh*! ChÃºng cÃ³ thá»ƒ tá»± Ä‘á»™ng "tiÃªm phá»¥ thuá»™c" (dependency injection) vÃ o cho báº¡n luÃ´n Ä‘Ã³, báº¡n khÃ´ng cáº§n pháº£i tá»± tay lÃ m Ä‘Ã¢u. ChÃºng lÃ m Ä‘Æ°á»£c Ä‘iá»u nÃ y báº±ng cÃ¡ch sá»­ dá»¥ng cÃ¡c annotation (nhá»¯ng cÃ¡i kÃ½ hiá»‡u Ä‘áº·c biá»‡t mÃ  báº¡n Ä‘áº·t trong code áº¥y) kiá»ƒu nhÆ°... `@Autowired`, `@Inject`.

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

46. ### Shallow Copy vÃ  Deep Copy: ChÃºng khÃ¡c nhau chá»— nÃ o váº­y ta?

    NÃ y, khi báº¡n cáº§n 'nhÃ¢n báº£n' má»™t Ä‘á»‘i tÆ°á»£ng nÃ o Ä‘Ã³ trong Java, tá»©c lÃ  táº¡o ra má»™t báº£n sao cá»§a nÃ³, thÃ¬ cÃ³ hai kiá»ƒu sao chÃ©p chÃ­nh mÃ  báº¡n sáº½ gáº·p.

ÄÃ³ lÃ : **sao chÃ©p nÃ´ng** (shallow copy) vÃ  **sao chÃ©p sÃ¢u** (deep copy).

    **Báº£n sao nÃ´ng:**

NÃ y, cÃ³ khi nÃ o báº¡n muá»‘n 'nhÃ¢n Ä‘Ã´i' má»™t Ä‘á»‘i tÆ°á»£ng khÃ´ng? Kiá»ƒu nhÆ°, "TÃ´i muá»‘n cÃ³ má»™t cÃ¡i báº£n sao y há»‡t cÃ¡i nÃ y!" NhÆ°ng mÃ , trong tháº¿ giá»›i láº­p trÃ¬nh, viá»‡c sao chÃ©p khÃ´ng pháº£i lÃºc nÃ o cÅ©ng Ä‘Æ¡n giáº£n nhÆ° báº¥m Ctrl+C, Ctrl+V Ä‘Ã¢u nhÃ©.

Khi báº¡n sao chÃ©p má»™t Ä‘á»‘i tÆ°á»£ng, cÃ³ hai kiá»ƒu chÃ­nh: **báº£n sao nÃ´ng** (Shallow Copy) vÃ  báº£n sao sÃ¢u (Deep Copy). HÃ´m nay, chÃºng ta sáº½ 'láº·n' vÃ o cÃ¡i anh chÃ ng **báº£n sao nÃ´ng** nÃ y trÆ°á»›c!

Nghe tÃªn 'nÃ´ng' cÃ³ váº» hÆ¡i... láº¡ lÃ¹ng Ä‘Ãºng khÃ´ng? Äá»«ng lo, nÃ³ dá»… hiá»ƒu láº¯m!

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t cuá»‘n sá»• tay. Trong cuá»‘n sá»• nÃ y, báº¡n ghi láº¡i 'Ä‘á»‹a chá»‰' cá»§a vÃ i ngÆ°á»i báº¡n thÃ¢n. Kiá»ƒu nhÆ°, "Báº¡n An á»Ÿ nhÃ  sá»‘ 123", "Báº¡n BÃ¬nh á»Ÿ nhÃ  sá»‘ 456".

BÃ¢y giá», náº¿u báº¡n táº¡o má»™t **báº£n sao nÃ´ng** cá»§a cuá»‘n sá»• tay nÃ y, báº¡n sáº½ cÃ³ má»™t cuá»‘n sá»• tay Má»šI tinh. NhÆ°ng mÃ , nhá»¯ng cÃ¡i 'Ä‘á»‹a chá»‰' Ä‘Æ°á»£c ghi trong cuá»‘n sá»• Má»šI Ä‘Ã³... váº«n chá»‰ Ä‘áº¿n ÄÃšNG nhá»¯ng ngÃ´i nhÃ  cá»§a An vÃ  BÃ¬nh nhÆ° trong cuá»‘n sá»• CÅ¨!

Tá»©c lÃ , cáº£ hai cuá»‘n sá»• (báº£n gá»‘c vÃ  báº£n sao) Ä‘á»u Ä‘ang TRá» VÃ€O CÃ™NG Má»˜T NGÃ”I NHÃ€ tháº­t sá»±. ChÃºng chá»‰ cÃ³ nhá»¯ng 'ghi chÃº' riÃªng, nhÆ°ng nhá»¯ng ghi chÃº Ä‘Ã³ láº¡i dáº«n Ä‘áº¿n *cÃ¹ng má»™t nÆ¡i*.

Váº­y thÃ¬, Ä‘iá»u gÃ¬ sáº½ xáº£y ra náº¿u báº¡n An chuyá»ƒn nhÃ  sang sá»‘ 789 (vÃ  báº¡n cáº­p nháº­t Ä‘á»‹a chá»‰ trong cuá»‘n sá»• gá»‘c)? ThÃ¬ khi báº¡n xem Ä‘á»‹a chá»‰ cá»§a An trong cuá»‘n sá»• sao chÃ©p, báº¡n cÅ©ng sáº½ tháº¥y ngay lÃ  An Ä‘Ã£ chuyá»ƒn Ä‘áº¿n nhÃ  sá»‘ 789 rá»“i!

Táº¡i sao Æ°? Bá»Ÿi vÃ¬ báº£n sao nÃ´ng chá»‰ sao chÃ©p 'cÃ¡i ghi chÃº' (hay cÃ²n gá»i lÃ  *tham chiáº¿u* - reference) Ä‘áº¿n cÃ¡c pháº§n bÃªn trong cá»§a Ä‘á»‘i tÆ°á»£ng. NÃ³ khÃ´ng Ä‘i sÃ¢u vÃ o Ä‘á»ƒ 'xÃ¢y láº¡i' nhá»¯ng ngÃ´i nhÃ  Ä‘Ã³ Ä‘Ã¢u!

NÃ³i cÃ¡ch khÃ¡c, báº£n sao nÃ´ng táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng má»›i, nhÆ°ng náº¿u Ä‘á»‘i tÆ°á»£ng gá»‘c cÃ³ chá»©a cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c (gá»i lÃ  Ä‘á»‘i tÆ°á»£ng con), thÃ¬ báº£n sao má»›i nÃ y sáº½ chá»‰ 'mÆ°á»£n' cÃ¡c Ä‘á»‘i tÆ°á»£ng con Ä‘Ã³ tá»« báº£n gá»‘c mÃ  thÃ´i. ChÃºng cÃ¹ng 'nhÃ¬n' vÃ o má»™t chá»—!

Tháº¿ nÃªn, náº¿u báº¡n thay Ä‘á»•i Ä‘á»‘i tÆ°á»£ng con thÃ´ng qua báº£n gá»‘c, báº£n sao cÅ©ng sáº½ tháº¥y sá»± thay Ä‘á»•i Ä‘Ã³. VÃ  ngÆ°á»£c láº¡i!
    - Báº¡n sáº½ táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng má»›i toanh! Tuyá»‡t vá»i!

NHÆ¯NG nÃ y, cÃ³ má»™t Ä‘iá»u quan trá»ng cáº§n nhá»› vá» cÃ¡c Ä‘á»‘i tÆ°á»£ng "con" náº±m bÃªn trong nÃ³ (chÃºng ta gá»i lÃ  Ä‘á»‘i tÆ°á»£ng lá»“ng nhau Ä‘Ã³):

Thay vÃ¬ táº¡o ra cÃ¡c báº£n sao má»›i cho nhá»¯ng Ä‘á»‘i tÆ°á»£ng con nÃ y, nÃ³ chá»‰ Ä‘Æ¡n giáº£n lÃ  *sao chÃ©p* cÃ¡i "Ä‘á»‹a chá»‰" (hay cÃ²n gá»i lÃ  tham chiáº¿u) Ä‘áº¿n chÃ­nh cÃ¡c Ä‘á»‘i tÆ°á»£ng con *gá»‘c* Ä‘Ã³ thÃ´i.

Váº­y nÃªn, Ä‘á»‘i tÆ°á»£ng má»›i vÃ  Ä‘á»‘i tÆ°á»£ng gá»‘c cá»§a báº¡n sáº½ cÃ¹ng "nhÃ¬n" vÃ o má»™t Ä‘á»‘i tÆ°á»£ng con *y há»‡t nhau* Ä‘Ã³!
    - Khi báº¡n thay Ä‘á»•i cÃ¡c Ä‘á»‘i tÆ°á»£ng con (nested objects) bÃªn trong, cáº£ hai báº£n sao Ä‘á»u bá»‹ áº£nh hÆ°á»Ÿng!

NÃ y, báº¡n Ä‘Ã£ sáºµn sÃ ng cho má»™t bÃ­ máº­t nhá» chÆ°a? Khi báº¡n táº¡o má»™t báº£n sao "nÃ´ng" (shallow copy) cá»§a má»™t Ä‘á»‘i tÆ°á»£ng... mÃ  Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ láº¡i cÃ³ nhá»¯ng "Ä‘á»‘i tÆ°á»£ng con" khÃ¡c náº±m bÃªn trong nÃ³ (kiá»ƒu nhÆ° má»™t chiáº¿c há»™p lá»›n chá»©a nhá»¯ng chiáº¿c há»™p nhá» hÆ¡n áº¥y mÃ )... thÃ¬ Ä‘Ã¢y lÃ  Ä‘iá»u sáº½ xáº£y ra:

1.  Báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng "má»›i toanh" á»Ÿ bÃªn ngoÃ i. Tuyá»‡t vá»i!
2.  NHÆ¯NG, nhá»¯ng "Ä‘á»‘i tÆ°á»£ng con" bÃªn trong cá»§a báº£n sao Ä‘Ã³... thá»±c ra láº¡i *váº«n Ä‘ang chá»‰ vÃ o chÃ­nh xÃ¡c nhá»¯ng Ä‘á»‘i tÆ°á»£ng con gá»‘c*! ChÃºng khÃ´ng Ä‘Æ°á»£c táº¡o má»›i hoÃ n toÃ n Ä‘Ã¢u.

Cá»© hÃ¬nh dung tháº¿ nÃ y nhÃ©: báº¡n cÃ³ má»™t chiáº¿c xe hÆ¡i (Ä‘á»‘i tÆ°á»£ng chÃ­nh) vÃ  bÃªn trong nÃ³ cÃ³ má»™t cÃ¡i Ä‘á»™ng cÆ¡ (Ä‘á»‘i tÆ°á»£ng con).
Náº¿u báº¡n táº¡o má»™t báº£n sao "nÃ´ng" cá»§a chiáº¿c xe Ä‘Ã³:
*   Báº¡n sáº½ cÃ³ má»™t thÃ¢n xe má»›i.
*   NHÆ¯NG, cÃ¡i thÃ¢n xe má»›i nÃ y váº«n sá»­ dá»¥ng *cÃ¡i Ä‘á»™ng cÆ¡ cÅ©* tá»« chiáº¿c xe ban Ä‘áº§u! NÃ³ khÃ´ng Ä‘Æ°á»£c láº¯p má»™t Ä‘á»™ng cÆ¡ má»›i Ä‘Ã¢u.

Tháº¿ nÃªn, náº¿u báº¡n "chá»c ngoÃ¡y" vÃ o cÃ¡i Ä‘á»™ng cÆ¡ Ä‘Ã³ (vÃ­ dá»¥, thay nhá»›t cho nÃ³) thÃ´ng qua chiáº¿c xe *ban Ä‘áº§u*, thÃ¬ Ä‘oÃ¡n xem?
Chiáº¿c xe *Ä‘Ã£ Ä‘Æ°á»£c sao chÃ©p* kia... cÅ©ng sáº½ tháº¥y Ä‘á»™ng cÆ¡ Ä‘Ã£ Ä‘Æ°á»£c thay nhá»›t!
Táº¡i sao Æ°? Bá»Ÿi vÃ¬ cáº£ hai chiáº¿c xe... Ä‘ang *dÃ¹ng chung má»™t cÃ¡i Ä‘á»™ng cÆ¡* mÃ !

ÄÆ¡n giáº£n lÃ  váº­y Ä‘Ã³! Khi báº¡n thay Ä‘á»•i má»™t Ä‘á»‘i tÆ°á»£ng con thÃ´ng qua *má»™t trong hai báº£n sao*, thÃ¬ báº£n sao cÃ²n láº¡i cÅ©ng sáº½ "nhÃ¬n tháº¥y" sá»± thay Ä‘á»•i Ä‘Ã³. Bá»Ÿi vÃ¬ cáº£ hai Ä‘á»u Ä‘ang "nhÃ¬n" vÃ o *cÃ¹ng má»™t chá»—* trong bá»™ nhá»› mÃ¡y tÃ­nh!
    - Váº­y, Máº¶C Äá»ŠNH thÃ¬ nÃ³ sáº½ hoáº¡t Ä‘á»™ng tháº¿ nÃ o? `clone()` Báº¡n muá»‘n mÃ¡y tÃ­nh cá»§a mÃ¬nh lÃ m má»™t cÃ´ng viá»‡c gÃ¬ Ä‘Ã³, Ä‘Ãºng khÃ´ng? Kiá»ƒu nhÆ° "in ra má»™t dÃ²ng chá»¯", hay "tÃ­nh tá»•ng hai sá»‘"?

Tuyá»‡t vá»i! Trong tháº¿ giá»›i láº­p trÃ¬nh Java, khi báº¡n muá»‘n mÃ¡y tÃ­nh thá»±c hiá»‡n má»™t *hÃ nh Ä‘á»™ng* cá»¥ thá»ƒ, chÃºng ta sáº½ táº¡o ra má»™t thá»© gá»i lÃ  **phÆ°Æ¡ng thá»©c** (method).

HÃ£y nghÄ© tháº¿ nÃ y nhÃ©:

*   **PhÆ°Æ¡ng thá»©c lÃ  gÃ¬?** NÃ³ giá»‘ng nhÆ° má»™t "cÃ´ng thá»©c náº¥u Äƒn" hoáº·c má»™t "nÃºt báº¥m" trÃªn Ä‘iá»u khiá»ƒn tá»« xa váº­y.
    *   Báº¡n cÃ³ má»™t cÃ´ng thá»©c Ä‘á»ƒ lÃ m mÃ³n phá»Ÿ. Má»—i láº§n muá»‘n Äƒn phá»Ÿ, báº¡n chá»‰ cáº§n láº¥y cÃ´ng thá»©c Ä‘Ã³ ra lÃ m theo.
    *   Báº¡n báº¥m nÃºt "TÄƒng Ã¢m lÆ°á»£ng" trÃªn Ä‘iá»u khiá»ƒn, tivi tá»± Ä‘á»™ng biáº¿t pháº£i lÃ m gÃ¬.
*   **Trong láº­p trÃ¬nh cÅ©ng váº­y!** Báº¡n táº¡o má»™t phÆ°Æ¡ng thá»©c Ä‘á»ƒ gÃ³i gá»n má»™t táº­p há»£p cÃ¡c lá»‡nh láº¡i vá»›i nhau, Ä‘áº·t cho nÃ³ má»™t cÃ¡i tÃªn. Sau nÃ y, báº¥t cá»© khi nÃ o báº¡n muá»‘n mÃ¡y tÃ­nh thá»±c hiá»‡n cÃ¡c lá»‡nh Ä‘Ã³, báº¡n chá»‰ cáº§n "gá»i tÃªn" phÆ°Æ¡ng thá»©c Ä‘Ã³ ra lÃ  xong!

**Táº¡i sao chÃºng ta láº¡i cáº§n phÆ°Æ¡ng thá»©c?**

*   **KhÃ´ng láº·p láº¡i code:** Thay vÃ¬ viáº¿t Ä‘i viáº¿t láº¡i cÃ¹ng má»™t Ä‘oáº¡n mÃ£ nhiá»u láº§n, báº¡n chá»‰ cáº§n viáº¿t nÃ³ má»™t láº§n duy nháº¥t trong má»™t phÆ°Æ¡ng thá»©c. Tiáº¿t kiá»‡m thá»i gian vÃ  cÃ´ng sá»©c!
*   **Code gá»n gÃ ng, dá»… Ä‘á»c:** ChÆ°Æ¡ng trÃ¬nh cá»§a báº¡n sáº½ trÃ´ng ngÄƒn náº¯p hÆ¡n ráº¥t nhiá»u. Má»—i phÆ°Æ¡ng thá»©c lÃ m má»™t viá»‡c cá»¥ thá»ƒ, giÃºp báº¡n vÃ  ngÆ°á»i khÃ¡c dá»… hiá»ƒu chÆ°Æ¡ng trÃ¬nh Ä‘ang lÃ m gÃ¬.
*   **Dá»… báº£o trÃ¬:** Náº¿u báº¡n cáº§n thay Ä‘á»•i cÃ¡ch má»™t cÃ´ng viá»‡c Ä‘Æ°á»£c thá»±c hiá»‡n, báº¡n chá»‰ cáº§n sá»­a trong phÆ°Æ¡ng thá»©c Ä‘Ã³, thay vÃ¬ pháº£i Ä‘i tÃ¬m vÃ  sá»­a á»Ÿ nhiá»u chá»— khÃ¡c nhau.

**TrÃ´ng nÃ³ nhÆ° tháº¿ nÃ o trong code?**

HÃ£y xem má»™t vÃ­ dá»¥ siÃªu Ä‘Æ¡n giáº£n nhÃ©!

```java
public class ChuongTrinhCuaToi { // ÄÃ¢y lÃ  lá»›p chá»©a chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n

    // ÄÃ¢y lÃ  má»™t PHÆ¯Æ NG THá»¨C! NÃ³ cÃ³ tÃªn lÃ  'chaoMung'
    public static void chaoMung() {
        System.out.println("ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i chÆ°Æ¡ng trÃ¬nh!");
        System.out.println("ChÃºc má»™t ngÃ y tá»‘t lÃ nh!");
    }

    // ÄÃ¢y lÃ  phÆ°Æ¡ng thá»©c 'main' quen thuá»™c, nÆ¡i chÆ°Æ¡ng trÃ¬nh báº¯t Ä‘áº§u cháº¡y
    public static void main(String[] args) {
        System.out.println("Báº¯t Ä‘áº§u chÆ°Æ¡ng trÃ¬nh...");

        // NÃ y mÃ¡y tÃ­nh, lÃ m Æ¡n "chÃ o má»«ng" Ä‘i!
        chaoMung(); // ChÃºng ta Ä‘ang "gá»i" phÆ°Æ¡ng thá»©c chaoMung() á»Ÿ Ä‘Ã¢y!

        System.out.println("ChÆ°Æ¡ng trÃ¬nh káº¿t thÃºc.");
    }
}
```

**Báº¡n tháº¥y khÃ´ng?**

*   ChÃºng ta Ä‘Ã£ táº¡o má»™t "cÃ´ng thá»©c" tÃªn lÃ  `chaoMung()`.
*   BÃªn trong `chaoMung()`, chÃºng ta cÃ³ hai lá»‡nh `System.out.println()`.
*   Trong phÆ°Æ¡ng thá»©c `main()`, thay vÃ¬ viáº¿t láº¡i hai dÃ²ng `System.out.println()`, chÃºng ta chá»‰ cáº§n viáº¿t `chaoMung();`
*   Khi chÆ°Æ¡ng trÃ¬nh cháº¡y Ä‘áº¿n `chaoMung();`, nÃ³ sáº½ "nháº£y" vÃ o phÆ°Æ¡ng thá»©c `chaoMung()` vÃ  thá»±c hiá»‡n táº¥t cáº£ cÃ¡c lá»‡nh bÃªn trong Ä‘Ã³.

ÄÆ¡n giáº£n pháº£i khÃ´ng nÃ o? PhÆ°Æ¡ng thá»©c chÃ­nh lÃ  cÃ¡ch Ä‘á»ƒ báº¡n biáº¿n chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh thÃ nh má»™t táº­p há»£p cÃ¡c "cÃ´ng viá»‡c" nhá», dá»… quáº£n lÃ½ vÃ  dá»… tÃ¡i sá»­ dá»¥ng!

    **Deep Copy:**

ChÃ o báº¡n cá»§a nhá»¯ng báº£n sao! Báº¡n muá»‘n táº¡o má»™t báº£n sao *tháº­t sá»±* tá»‘t, Ä‘Ãºng khÃ´ng? KhÃ´ng pháº£i chá»‰ má»™t báº£n sao nhanh, há»i há»£t thÃ´i Ã ?

ChÃ , Ä‘Ã³ chÃ­nh lÃ  Ã½ nghÄ©a cá»§a má»™t **deep copy** (báº£n sao sÃ¢u) Ä‘áº¥y!

HÃ£y hÃ¬nh dung tháº¿ nÃ y nhÃ©. Báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng (object). VÃ  bÃªn trong Ä‘á»‘i tÆ°á»£ng Ä‘Ã³, nÃ³ láº¡i chá»©a *nhá»¯ng Ä‘á»‘i tÆ°á»£ng khÃ¡c* ná»¯a (vÃ­ dá»¥, má»™t Ä‘á»‘i tÆ°á»£ng `Car` (Ã´ tÃ´) cÃ³ thá»ƒ chá»©a má»™t Ä‘á»‘i tÆ°á»£ng `Engine` (Ä‘á»™ng cÆ¡) vÃ  cÃ¡c Ä‘á»‘i tÆ°á»£ng `Tire` (lá»‘p xe) bÃªn trong nÃ³).

Khi báº¡n thá»±c hiá»‡n má»™t deep copy, báº¡n khÃ´ng chá»‰ sao chÃ©p Ä‘á»‘i tÆ°á»£ng chÃ­nh Ä‘Ã¢u. KhÃ´ng há»! Báº¡n cÃ²n "chui" vÃ o *bÃªn trong* nÃ³ vÃ  táº¡o ra nhá»¯ng báº£n sao hoÃ n toÃ n má»›i cá»§a *táº¥t cáº£* nhá»¯ng Ä‘á»‘i tÆ°á»£ng con bÃªn trong Ä‘Ã³ ná»¯a!

NÃ³ giá»‘ng nhÆ° viá»‡c báº¡n mua má»™t chiáº¿c xe Ã´ tÃ´ hoÃ n toÃ n má»›i, vÃ  chiáº¿c xe Ä‘Ã³ cÅ©ng Ä‘i kÃ¨m vá»›i má»™t Ä‘á»™ng cÆ¡ *má»›i toanh* vÃ  nhá»¯ng chiáº¿c lá»‘p *má»›i tinh* váº­y. Chá»© khÃ´ng pháº£i chá»‰ lÃ  má»™t cÃ¡i khung xe má»›i mÃ  váº«n dÃ¹ng Ä‘á»™ng cÆ¡ vÃ  lá»‘p xe cÅ© Ä‘Ã¢u nha.

Tháº¿ nÃªn, sau khi deep copy, báº¡n sáº½ cÃ³ hai Ä‘á»‘i tÆ°á»£ng hoÃ n toÃ n Ä‘á»™c láº­p vá»›i nhau. Thay Ä‘á»•i cÃ¡i gÃ¬ Ä‘Ã³ á»Ÿ Ä‘á»‘i tÆ°á»£ng nÃ y sáº½ khÃ´ng lÃ m áº£nh hÆ°á»Ÿng gÃ¬ Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng kia Ä‘Ã¢u. ChÃºng hoÃ n toÃ n tá»± do! Tuyá»‡t vá»i!
    - Táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng má»›i tinh. NÃ³ sáº½ sao chÃ©p *táº¥t cáº£* cÃ¡c Ä‘á»‘i tÆ°á»£ng náº±m sÃ¢u bÃªn trong (nhÆ° má»™t cÃ¡i há»™p lá»›n chá»©a cÃ¡c há»™p nhá», rá»“i cÃ¡c há»™p nhá» láº¡i chá»©a há»™p bÃ© hÆ¡n ná»¯a áº¥y), cá»© tháº¿ Ä‘i sÃ¢u vÃ o tá»«ng lá»›p má»™t cho Ä‘áº¿n khi má»i thá»© Ä‘á»u lÃ  báº£n sao má»›i toanh!
    - NÃ y, cÃ³ má»™t Ä‘iá»u cá»±c ká»³ quan trá»ng báº¡n cáº§n náº¯m rÃµ vá» cÃ¡c Ä‘á»‘i tÆ°á»£ng 'lá»“ng nhau' (nested objects) nhÃ©!

TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y: Báº¡n cÃ³ má»™t cÃ¡i há»™p lá»›n, vÃ  bÃªn trong nÃ³ láº¡i cÃ³ má»™t cÃ¡i há»™p nhá» hÆ¡n. CÃ¡i há»™p nhá» nÃ y chÃ­nh lÃ  'Ä‘á»‘i tÆ°á»£ng lá»“ng nhau' cá»§a cÃ¡i há»™p lá»›n.

Giá», náº¿u báº¡n táº¡o má»™t **báº£n sao (copy)** cá»§a cÃ¡i há»™p lá»›n ban Ä‘áº§u...

...thÃ¬ cÃ¡i há»™p nhá» BÃŠN TRONG báº£n sao má»›i nÃ y nÃ³ sáº½ lÃ  má»™t **báº£n sao hoÃ n toÃ n Äá»˜C Láº¬P** cá»§a cÃ¡i há»™p nhá» gá»‘c!

Váº­y nÃªn, náº¿u báº¡n 'vá»c váº¡ch' thay Ä‘á»•i cÃ¡i há»™p nhá» BÃŠN TRONG báº£n sao cá»§a mÃ¬nh (vÃ­ dá»¥, Ä‘á»•i mÃ u nÃ³ cháº³ng háº¡n)...

...thÃ¬ cÃ¡i há»™p nhá» Gá»C ban Ä‘áº§u cá»§a báº¡n váº«n **Y NGUYÃŠN** nhÆ° cÅ©! NÃ³ khÃ´ng há» háº¥n gÃ¬ cáº£.

TÃ³m láº¡i: **Nhá»¯ng thay Ä‘á»•i báº¡n lÃ m vá»›i cÃ¡c Ä‘á»‘i tÆ°á»£ng lá»“ng nhau trong má»™t báº£n sao sáº½ khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n cÃ¡c Ä‘á»‘i tÆ°á»£ng lá»“ng nhau gá»‘c.**
    - Pháº§n nÃ y báº¡n sáº½ pháº£i tá»± tay viáº¿t code Ä‘áº¥y nhÃ©.

    ```java
    import java.util.ArrayList;
    import java.util.List;

    class Address implements Cloneable {
        String city;
        
        public Address(String city) {
            this.city = city;
        }
        
        @Override
        protected Address clone() throws CloneNotSupportedException {
            return (Address) super.clone();
        }
        
        @Override
        public String toString() {
            return city;
        }
    }

    class Person implements Cloneable {
        String name;
        Address address;
        List<String> hobbies;
        
        public Person(String name, Address address, List<String> hobbies) {
            this.name = name;
            this.address = address;
            this.hobbies = hobbies;
        }
        
        // Shallow Copy
        public Person shallowCopy() throws CloneNotSupportedException {
            return (Person) super.clone();
        }
        
        // Deep Copy
        public Person deepCopy() throws CloneNotSupportedException {
            Person cloned = (Person) super.clone();
            cloned.address = this.address.clone();  // Clone nested object
            cloned.hobbies = new ArrayList<>(this.hobbies);  // Create new list
            return cloned;
        }
        
        @Override
        public String toString() {
            return "Person{name='" + name + "', address=" + address + ", hobbies=" + hobbies + "}";
        }
    }

    public class CopyExample {
        public static void main(String[] args) throws CloneNotSupportedException {
            List<String> hobbies = new ArrayList<>();
            hobbies.add("Reading");
            
            Person original = new Person("John", new Address("New York"), hobbies);
            
            // Shallow Copy
            Person shallowCopy = original.shallowCopy();
            
            // Deep Copy
            Person deepCopy = original.deepCopy();
            
            // Modify nested objects
            original.address.city = "Los Angeles";
            original.hobbies.add("Gaming");
            
            System.out.println("Original: " + original);
            System.out.println("Shallow Copy: " + shallowCopy);  // Address changed!
            System.out.println("Deep Copy: " + deepCopy);        // Address unchanged
        }
    }
    ```

    | Sao chÃ©p nÃ´ng (Shallow Copy) | Sao chÃ©p sÃ¢u (Deep Copy) |
|---|---|
| NÃ y báº¡n, khi báº¡n thá»±c hiá»‡n "sao chÃ©p nÃ´ng", báº¡n Ä‘ang táº¡o má»™t báº£n sao... nhÆ°ng nÃ³ hÆ¡i "há»i há»£t" má»™t chÃºt Ä‘Ã³! | CÃ²n vá»›i "sao chÃ©p sÃ¢u" thÃ¬ sao? CÃ¡i nÃ y "sÃ¢u" hÆ¡n nhiá»u Ä‘Ã³! |
| HÃ£y hÃ¬nh dung tháº¿ nÃ y: báº¡n cÃ³ má»™t danh sÃ¡ch cÃ¡c Ä‘á»“ váº­t. Khi báº¡n sao chÃ©p nÃ´ng, báº¡n chá»‰ Ä‘ang táº¡o *má»™t danh sÃ¡ch khÃ¡c* mÃ  thÃ´i. Cáº£ hai danh sÃ¡ch nÃ y Ä‘á»u chá»‰ Ä‘áº¿n *cÃ¹ng má»™t* nhá»¯ng Ä‘á»“ váº­t Ä‘Ã³ trong bá»™ nhá»›. | Thay vÃ¬ chá»‰ sao chÃ©p nhá»¯ng "tham chiáº¿u" (chá»‰ dáº«n) Ä‘áº¿n Ä‘á»“ váº­t, báº¡n Ä‘ang thá»±c sá»± táº¡o ra *nhá»¯ng báº£n sao hoÃ n toÃ n má»›i* cá»§a má»i thá»©. |
| Váº­y nÃªn, náº¿u báº¡n thay Ä‘á»•i má»™t Ä‘á»“ váº­t thÃ´ng qua danh sÃ¡ch nÃ y (vÃ­ dá»¥, thay Ä‘á»•i mÃ u sáº¯c cá»§a nÃ³), thÃ¬ danh sÃ¡ch kia cÅ©ng sáº½ "tháº¥y" sá»± thay Ä‘á»•i Ä‘Ã³. VÃ¬ cáº£ hai danh sÃ¡ch Ä‘ang chá»‰ vÃ o *cÃ¹ng má»™t* Ä‘á»“ váº­t mÃ ! | Káº¿t quáº£ lÃ , báº¡n cÃ³ má»™t danh sÃ¡ch má»›i, vÃ  nhá»¯ng Ä‘á»“ váº­t trong danh sÃ¡ch má»›i nÃ y lÃ  *nhá»¯ng báº£n sao Ä‘á»™c láº­p* cá»§a nhá»¯ng Ä‘á»“ váº­t trong danh sÃ¡ch cÅ©. |
| Náº¿u báº¡n thay Ä‘á»•i má»™t Ä‘á»“ váº­t trong danh sÃ¡ch nÃ y, thÃ¬ Ä‘á»“ váº­t tÆ°Æ¡ng á»©ng trong danh sÃ¡ch kia *sáº½ khÃ´ng bá»‹ áº£nh hÆ°á»Ÿng gÃ¬ cáº£*. Tuyá»‡t vá»i chÆ°a? | |
    |--------------|-----------|
    | Chá»‰ sao chÃ©p cÃ¡i 'Ä‘á»‹a chá»‰' cá»§a Ä‘á»‘i tÆ°á»£ng | Sao chÃ©p nguyÃªn cáº£ Ä‘á»‘i tÆ°á»£ng |
    | CÃ¡c Ä‘á»‘i tÆ°á»£ng con **chung má»™t** | CÃ¡c Ä‘á»‘i tÆ°á»£ng con **riÃªng biá»‡t** |
    | Nhanh hÆ¡n vÃ  Ã­t tá»‘n bá»™ nhá»› hÆ¡n | Cháº­m hÆ¡n vÃ  tá»‘n nhiá»u bá»™ nhá»› hÆ¡n |
    | Thay Ä‘á»•i áº£nh hÆ°á»Ÿng Ä‘áº¿n Cáº¢ HAI báº£n | Thay Ä‘á»•i chá»‰ xáº£y ra RIÃŠNG BIá»†T |
|---|---|
| Khi báº¡n chá»‰nh sá»­a má»™t báº£n, báº£n cÃ²n láº¡i cÅ©ng 'biáº¿n hÃ¬nh' theo ngay láº­p tá»©c! Giá»‘ng nhÆ° chÃºng Ä‘Æ°á»£c ná»‘i vá»›i nhau váº­y Ä‘Ã³. | Báº¡n tha há»“ thay Ä‘á»•i má»™t báº£n. Báº£n kia váº«n cá»© 'yÃªn vá»‹' nhÆ° cÅ©, khÃ´ng há» háº¥n gÃ¬. |
    | **`clone()` tá»± Ä‘á»™ng lÃ m viá»‡c (ngon lÃ nh!)** | **Khi báº¡n cáº§n "ra tay" viáº¿t code riÃªng cho `clone()`** |

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

47. ### Váº­y thÃ¬, Máº«u thiáº¿t káº¿ trong Java lÃ  gÃ¬ váº­y?

    Báº¡n Ä‘Ã£ bao giá» gáº·p pháº£i má»™t váº¥n Ä‘á» trong lÃºc thiáº¿t káº¿ pháº§n má»m, rá»“i láº¡i tháº¥y mÃ¬nh cá»© láº·p Ä‘i láº·p láº¡i cÃ¡ch giáº£i quyáº¿t tÆ°Æ¡ng tá»± chÆ°a? Kiá»ƒu nhÆ°, "MÃ¬nh biáº¿t mÃ¬nh Ä‘Ã£ lÃ m cÃ¡i nÃ y rá»“i, nhÆ°ng sao cá»© pháº£i nghÄ© láº¡i tá»« Ä‘áº§u tháº¿ nhá»‰?"

ÄÃ³ chÃ­nh lÃ  lÃºc cÃ¡c **Máº«u thiáº¿t káº¿ (Design patterns)** xuáº¥t hiá»‡n Ä‘á»ƒ "giáº£i cá»©u" báº¡n Ä‘Ã³!

HÃ£y nghÄ© vá» chÃºng nhÆ° má»™t "cuá»‘n sÃ¡ch cÃ´ng thá»©c" chá»©a Ä‘á»±ng nhá»¯ng giáº£i phÃ¡p Ä‘Ã£ Ä‘Æ°á»£c chá»©ng minh lÃ  hiá»‡u quáº£ cho cÃ¡c váº¥n Ä‘á» thÆ°á»ng gáº·p trong quÃ¡ trÃ¬nh lÃ m pháº§n má»m.

Váº­y thÃ¬, cá»¥ thá»ƒ chÃºng lÃ  gÃ¬?

*   **Nhá»¯ng giáº£i phÃ¡p cÃ³ thá»ƒ tÃ¡i sá»­ dá»¥ng:** Máº«u thiáº¿t káº¿ giá»‘ng nhÆ° nhá»¯ng cÃ¢u tráº£ lá»i "cÃ³ sáºµn", báº¡n chá»‰ viá»‡c láº¥y ra dÃ¹ng khi gáº·p má»™t váº¥n Ä‘á» quen thuá»™c. Báº¡n khÃ´ng cáº§n pháº£i "phÃ¡t minh láº¡i bÃ¡nh xe" má»—i láº§n Ä‘Ã¢u!
*   **Äáº¡i diá»‡n cho nhá»¯ng kinh nghiá»‡m tá»‘t nháº¥t:** ÄÃ¢y khÃ´ng pháº£i lÃ  báº¥t ká»³ giáº£i phÃ¡p nÃ o Ä‘Ã¢u nhÃ©. ChÃºng lÃ  nhá»¯ng cÃ¡ch lÃ m Ä‘Ã£ Ä‘Æ°á»£c ráº¥t nhiá»u láº­p trÃ¬nh viÃªn kinh nghiá»‡m Ä‘Ãºc káº¿t vÃ  chá»©ng minh lÃ  hiá»‡u quáº£ nháº¥t qua thá»i gian. NÃ³ giá»‘ng nhÆ° báº¡n Ä‘ang há»c há»i nhá»¯ng "máº¹o hay" tá»« nhá»¯ng ngÆ°á»i Ä‘i trÆ°á»›c váº­y.
*   **Cung cáº¥p cÃ¡c khuÃ´n máº«u Ä‘á»ƒ giáº£i quyáº¿t thá»­ thÃ¡ch:** ChÃºng cho báº¡n má»™t "báº£n Ä‘á»“" hay má»™t "cÃ´ng thá»©c" cá»¥ thá»ƒ Ä‘á»ƒ lÃ m theo. Khi báº¡n Ä‘á»‘i máº·t vá»›i má»™t "bÃ i toÃ¡n" thiáº¿t káº¿ khÃ³ nháº±n, báº¡n cÃ³ thá»ƒ tÃ¬m Ä‘áº¿n má»™t máº«u thiáº¿t káº¿ vÃ  nÃ³i, "Ã€ ha! ÄÃ¢y rá»“i, máº«u nÃ y sáº½ chá»‰ cho mÃ¬nh cÃ¡ch sáº¯p xáº¿p code Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y!"

TÃ³m láº¡i, Design Patterns giÃºp báº¡n viáº¿t code "xá»‹n" hÆ¡n, cÃ³ tá»• chá»©c hÆ¡n vÃ  dá»… hiá»ƒu hÆ¡n ráº¥t nhiá»u, báº±ng cÃ¡ch Ä‘Æ°a cho báº¡n nhá»¯ng giáº£i phÃ¡p Ä‘Ã£ Ä‘Æ°á»£c "kiá»ƒm chá»©ng qua thá»±c táº¿" cho cÃ¡c váº¥n Ä‘á» phá»• biáº¿n trong thiáº¿t káº¿ pháº§n má»m!

    **CÃ¡c loáº¡i Design Pattern: CÃ¹ng xem chÃºng Ä‘Æ°á»£c chia ra sao nhÃ©!**

    1. **Creational Patterns** - CÃ²n gá»i lÃ  cÃ¡c **Máº«u Khá»Ÿi Táº¡o**.
Báº¡n muá»‘n táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng má»›i, Ä‘Ãºng khÃ´ng? Kiá»ƒu nhÆ°... `new Car()` hay `new Dog()`?
Ã€ hÃ¡, cÃ¡c **Máº«u Khá»Ÿi Táº¡o** chÃ­nh lÃ  nhá»¯ng *ngÆ°á»i báº¡n* sáº½ giÃºp báº¡n lÃ m Ä‘iá»u Ä‘Ã³ má»™t cÃ¡ch siÃªu dá»… dÃ ng vÃ  thÃ´ng minh!
ChÃºng giáº£i quyáº¿t táº¥t cáº£ nhá»¯ng *cÆ¡ cháº¿* liÃªn quan Ä‘áº¿n viá»‡c 'sinh ra' cÃ¡c Ä‘á»‘i tÆ°á»£ng. Tá»©c lÃ , chÃºng sáº½ chá»‰ cho báº¡n nhá»¯ng cÃ¡ch hay ho nháº¥t Ä‘á»ƒ táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng mÃ  khÃ´ng pháº£i Ä‘au Ä‘áº§u suy nghÄ© nhiá»u Ä‘Ã¢u.
       - Singleton

NÃ y báº¡n! CÃ³ bao giá» báº¡n nghÄ© "MÃ¬nh chá»‰ muá»‘n CÃ“ Má»˜T THá»¨ nÃ y thÃ´i!" chÆ°a?

TÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang xÃ¢y dá»±ng má»™t trÃ² chÆ¡i. Báº¡n cÃ³ má»™t Lá»›p (Class) quáº£n lÃ½ Ã¢m thanh. Báº¡n cÃ³ muá»‘n cÃ³ hÃ ng tÃ¡ Ä‘á»‘i tÆ°á»£ng quáº£n lÃ½ Ã¢m thanh cháº¡y lung tung khÃ´ng? Hay báº¡n chá»‰ muá»‘n má»™t anh chÃ ng duy nháº¥t lo liá»‡u má»i thá»© vá» Ã¢m thanh? Cháº¯c cháº¯n lÃ  Má»˜T rá»“i, Ä‘Ãºng khÃ´ng?

ÄÃ³ chÃ­nh lÃ  lÃºc máº«u thiáº¿t káº¿ "**Singleton**" xuáº¥t hiá»‡n!

Singleton Ä‘áº£m báº£o ráº±ng má»™t lá»›p **CHá»ˆ CÃ“ Má»˜T** Ä‘á»‘i tÆ°á»£ng (instance) duy nháº¥t. VÃ  nÃ³ cÃ²n cung cáº¥p má»™t "cÃ¡nh cá»­a" toÃ n cáº§u Ä‘á»ƒ báº¡n cÃ³ thá»ƒ truy cáº­p Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng duy nháº¥t Ä‘Ã³ ná»¯a.

Váº­y lÃ m tháº¿ nÃ o Ä‘á»ƒ chÃºng ta Ã©p má»™t lá»›p chá»‰ cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng? CÃ³ vÃ i "mÃ¡nh" nhá» Ä‘Ã¢y:

1.  **MÃ¡nh 1: Cáº¥m cá»­a constructor!**
    Báº¡n pháº£i lÃ m cho `constructor` cá»§a lá»›p lÃ  `private`. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  **KHÃ”NG AI** cÃ³ thá»ƒ tá»± Ã½ `new` má»™t Ä‘á»‘i tÆ°á»£ng tá»« lá»›p nÃ y Ä‘Æ°á»£c ná»¯a! Nghe cÃ³ váº» "Ä‘á»™c tÃ i" nhá»‰? NhÆ°ng nÃ³ hiá»‡u quáº£ Ä‘áº¥y!
2.  **MÃ¡nh 2: Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng "bÃ­ máº­t" bÃªn trong!**
    BÃªn trong lá»›p, báº¡n sáº½ tá»± táº¡o ra vÃ  giá»¯ láº¥y Ä‘á»‘i tÆ°á»£ng duy nháº¥t Ä‘Ã³. NÃ³ sáº½ lÃ  má»™t biáº¿n `static private`. Biáº¿n `static` nghÄ©a lÃ  nÃ³ thuá»™c vá» lá»›p, khÃ´ng pháº£i Ä‘á»‘i tÆ°á»£ng. `private` nghÄ©a lÃ  chá»‰ lá»›p Ä‘Ã³ má»›i tháº¥y nÃ³.
3.  **MÃ¡nh 3: Má»Ÿ má»™t "cÃ¡nh cá»­a" cÃ´ng khai!**
    Báº¡n cáº§n má»™t phÆ°Æ¡ng thá»©c `static public` Ä‘á»ƒ **Má»ŒI NGÆ¯á»œI** cÃ³ thá»ƒ gá»i nÃ³ vÃ  láº¥y Ä‘Æ°á»£c Ä‘á»‘i tÆ°á»£ng duy nháº¥t kia. PhÆ°Æ¡ng thá»©c nÃ y sáº½ kiá»ƒm tra xem Ä‘á»‘i tÆ°á»£ng Ä‘Ã£ Ä‘Æ°á»£c táº¡o chÆ°a, náº¿u chÆ°a thÃ¬ táº¡o, náº¿u rá»“i thÃ¬ tráº£ vá» cÃ¡i Ä‘ang cÃ³.

HÃ£y xem nÃ³ trÃ´ng nhÆ° tháº¿ nÃ o trong code nhÃ©:

```java
public class SoundManager {
    // MÃ¡nh 2: ÄÃ¢y lÃ  Ä‘á»‘i tÆ°á»£ng "bÃ­ máº­t" duy nháº¥t cá»§a chÃºng ta!
    // NÃ³ lÃ  static Ä‘á»ƒ chá»‰ cÃ³ Má»˜T phiÃªn báº£n cho cáº£ lá»›p.
    // NÃ³ lÃ  private Ä‘á»ƒ khÃ´ng ai cÃ³ thá»ƒ tá»± Ã½ thay Ä‘á»•i nÃ³ tá»« bÃªn ngoÃ i.
    private static SoundManager uniqueInstance;

    // MÃ¡nh 1: Cáº¥m cá»­a! KhÃ´ng ai cÃ³ thá»ƒ tá»± Ã½ táº¡o SoundManager má»›i báº±ng 'new SoundManager()' Ä‘Ã¢u nhÃ©!
    private SoundManager() {
        // Khá»Ÿi táº¡o cÃ¡c thá»© cáº§n thiáº¿t cho SoundManager á»Ÿ Ä‘Ã¢y
        System.out.println("SoundManager vá»«a Ä‘Æ°á»£c táº¡o! Chá»‰ má»™t láº§n thÃ´i nhÃ©!");
    }

    // MÃ¡nh 3: ÄÃ¢y lÃ  CÃNH Cá»¬A DUY NHáº¤T Ä‘á»ƒ láº¥y SoundManager!
    // NÃ³ lÃ  static vÃ¬ báº¡n gá»i nÃ³ trÃªn Class, chá»© khÃ´ng pháº£i trÃªn object.
    public static SoundManager getInstance() {
        // Náº¿u chÆ°a cÃ³ Ä‘á»‘i tÆ°á»£ng nÃ o Ä‘Æ°á»£c táº¡o (láº§n Ä‘áº§u tiÃªn gá»i)...
        if (uniqueInstance == null) {
            // ...thÃ¬ chÃºng ta Táº O NÃ“!
            uniqueInstance = new SoundManager();
        }
        // Tráº£ vá» Ä‘á»‘i tÆ°á»£ng duy nháº¥t Ä‘ang cÃ³ (dÃ¹ lÃ  má»›i táº¡o hay Ä‘Ã£ cÃ³ sáºµn)
        return uniqueInstance;
    }

    // CÃ¡c phÆ°Æ¡ng thá»©c khÃ¡c cá»§a SoundManager á»Ÿ Ä‘Ã¢y
    public void playSound(String soundFile) {
        System.out.println("Äang phÃ¡t nháº¡c: " + soundFile);
    }

    public void stopAllSounds() {
        System.out.println("Dá»«ng táº¥t cáº£ nháº¡c.");
    }
}
```

VÃ  Ä‘Ã¢y lÃ  cÃ¡ch báº¡n sáº½ sá»­ dá»¥ng nÃ³:

```java
public class Game {
    public static void main(String[] args) {
        System.out.println("Báº¯t Ä‘áº§u trÃ² chÆ¡i...");

        // Láº¥y Ä‘á»‘i tÆ°á»£ng SoundManager duy nháº¥t
        // Báº¡n khÃ´ng dÃ¹ng 'new', mÃ  dÃ¹ng phÆ°Æ¡ng thá»©c 'getInstance()'
        SoundManager sound1 = SoundManager.getInstance();
        sound1.playSound("background_music.mp3");

        // Láº¥y Ä‘á»‘i tÆ°á»£ng SoundManager má»™t láº§n ná»¯a
        // NÃ³ Sáº¼ TRáº¢ Vá»€ CÃ™NG Má»˜T Äá»I TÆ¯á»¢NG ÄÃƒ CÃ“!
        SoundManager sound2 = SoundManager.getInstance();
        sound2.playSound("level_up.wav");

        // Kiá»ƒm tra xem chÃºng cÃ³ pháº£i lÃ  Má»˜T khÃ´ng?
        if (sound1 == sound2) {
            System.out.println("Tuyá»‡t vá»i! sound1 vÃ  sound2 thá»±c sá»± lÃ  Má»˜T Ä‘á»‘i tÆ°á»£ng duy nháº¥t!");
        } else {
            System.out.println("á»i! CÃ³ gÃ¬ Ä‘Ã³ khÃ´ng Ä‘Ãºng rá»“i. ChÃºng ta muá»‘n chÃºng lÃ  má»™t!");
        }

        sound1.stopAllSounds();
        System.out.println("Káº¿t thÃºc trÃ² chÆ¡i.");
    }
}
```

**Káº¿t quáº£ khi cháº¡y Ä‘oáº¡n code trÃªn sáº½ lÃ :**

```
Báº¯t Ä‘áº§u trÃ² chÆ¡i...
SoundManager vá»«a Ä‘Æ°á»£c táº¡o! Chá»‰ má»™t láº§n thÃ´i nhÃ©!
Äang phÃ¡t nháº¡c: background_music.mp3
Äang phÃ¡t nháº¡c: level_up.wav
Tuyá»‡t vá»i! sound1 vÃ  sound2 thá»±c sá»± lÃ  Má»˜T Ä‘á»‘i tÆ°á»£ng duy nháº¥t!
Dá»«ng táº¥t cáº£ nháº¡c.
Káº¿t thÃºc trÃ² chÆ¡i.
```

Báº¡n tháº¥y khÃ´ng? DÃ²ng "SoundManager vá»«a Ä‘Æ°á»£c táº¡o! Chá»‰ má»™t láº§n thÃ´i nhÃ©!" chá»‰ xuáº¥t hiá»‡n Má»˜T Láº¦N. Äiá»u Ä‘Ã³ chá»©ng tá» constructor chá»‰ Ä‘Æ°á»£c gá»i má»™t láº§n duy nháº¥t.

Váº­y lÃ  báº¡n Ä‘Ã£ biáº¿t cÃ¡ch táº¡o ra má»™t "Singleton" rá»“i Ä‘áº¥y! Nhá»› nhÃ©: `private constructor`, má»™t biáº¿n `static private` giá»¯ Ä‘á»‘i tÆ°á»£ng, vÃ  má»™t phÆ°Æ¡ng thá»©c `static public` Ä‘á»ƒ "cáº¥p phÃ¡t" nÃ³ khi cáº§n. Äáº£m báº£o chá»‰ cÃ³ **Má»˜T** vÃ  **CHá»ˆ Má»˜T**!
       - ChÃ o báº¡n! HÃ´m nay chÃºng ta sáº½ cÃ¹ng "má»• xáº»" má»™t trong nhá»¯ng "bÃ­ kÃ­p" táº¡o Ä‘á»‘i tÆ°á»£ng siÃªu hay ho trong láº­p trÃ¬nh, Ä‘Ã³ chÃ­nh lÃ  **PhÆ°Æ¡ng Thá»©c Khá»Ÿi Táº¡o** (hay cÃ²n gá»i lÃ  **Factory Method**). Nghe tÃªn cÃ³ váº» "hÃ n lÃ¢m" Ä‘Ãºng khÃ´ng? NhÆ°ng Ä‘á»«ng lo, chÃºng ta sáº½ lÃ m cho nÃ³ trá»Ÿ nÃªn thÃ¢n thiá»‡n nhÆ° má»™t cá»‘c cÃ  phÃª buá»•i sÃ¡ng váº­y!

---

### **PhÆ°Æ¡ng Thá»©c Khá»Ÿi Táº¡o (Factory Method)**

Báº¡n Ä‘Ã£ bao giá» gáº·p tÃ¬nh huá»‘ng nÃ y chÆ°a?

Báº¡n cáº§n táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng (vÃ­ dá»¥: má»™t chiáº¿c xe hÆ¡i, má»™t loáº¡i bÃ¡nh pizza, hay má»™t loáº¡i tÃ i liá»‡u), nhÆ°ng báº¡n *khÃ´ng cháº¯c cháº¯n* chÃ­nh xÃ¡c loáº¡i Ä‘á»‘i tÆ°á»£ng nÃ o báº¡n cáº§n cho Ä‘áº¿n khi chÆ°Æ¡ng trÃ¬nh cháº¡y?

Hoáº·c cÃ³ thá»ƒ báº¡n muá»‘n cÃ¡c lá»›p con cá»§a mÃ¬nh tá»± "quyáº¿t Ä‘á»‹nh" xem sáº½ táº¡o ra loáº¡i Ä‘á»‘i tÆ°á»£ng nÃ o?

Náº¿u cÃ¢u tráº£ lá»i lÃ  CÃ“, thÃ¬ Factory Method chÃ­nh lÃ  "ngÆ°á»i hÃ¹ng" mÃ  báº¡n Ä‘ang tÃ¬m kiáº¿m Ä‘áº¥y!

---

#### **Váº¥n Äá»: Táº¡i sao chÃºng ta khÃ´ng chá»‰ dÃ¹ng `new`?**

HÃ£y hÃ¬nh dung báº¡n Ä‘ang Ä‘iá»u hÃ nh má»™t chuá»—i cá»­a hÃ ng pizza. Tuyá»‡t vá»i!

Báº¡n cÃ³ thá»ƒ lÃ m nhiá»u loáº¡i pizza khÃ¡c nhau: `PizzaPhoMai`, `PizzaHaiSan`, `PizzaChay`, v.v.

Náº¿u báº¡n cá»© viáº¿t code kiá»ƒu `new PizzaPhoMai()`, `new PizzaHaiSan()` á»Ÿ kháº¯p má»i nÆ¡i trong code cá»§a mÃ¬nh (vÃ­ dá»¥, trong phÆ°Æ¡ng thá»©c `datPizza()` cá»§a cá»­a hÃ ng), thÃ¬ Ä‘iá»u gÃ¬ sáº½ xáº£y ra?

1.  **Gáº¯n káº¿t cháº·t cháº½ (Tight Coupling):** Lá»›p `CuaHangPizza` cá»§a báº¡n sáº½ "biáº¿t quÃ¡ nhiá»u" vá» cÃ¡c lá»›p `PizzaPhoMai` hay `PizzaHaiSan` cá»¥ thá»ƒ. NÃ³ bá»‹ "dÃ­nh cháº·t" vÃ o chÃºng.
2.  **KhÃ³ thay Ä‘á»•i:** Náº¿u báº¡n muá»‘n thay Ä‘á»•i cÃ¡ch lÃ m `PizzaPhoMai` (vÃ­ dá»¥, thÃªm má»™t nguyÃªn liá»‡u má»›i), báº¡n pháº£i Ä‘i tÃ¬m *táº¥t cáº£* chá»— nÃ o cÃ³ `new PizzaPhoMai()` vÃ  sá»­a. Má»‡t má»i láº¯m!
3.  **KhÃ³ má»Ÿ rá»™ng:** Náº¿u báº¡n muá»‘n thÃªm má»™t loáº¡i pizza má»›i (vÃ­ dá»¥: `PizzaThapCam`), báº¡n láº¡i pháº£i Ä‘i sá»­a ráº¥t nhiá»u chá»— code hiá»‡n cÃ³.

**TÃ³m láº¡i:** Viá»‡c gá»i `new` trá»±c tiáº¿p trong code cá»§a báº¡n khiáº¿n code trá»Ÿ nÃªn **cá»©ng nháº¯c**, khÃ³ thay Ä‘á»•i vÃ  khÃ³ má»Ÿ rá»™ng. ChÃºng ta muá»‘n má»™t cÃ¡ch "linh hoáº¡t" hÆ¡n!

---

#### **Giáº£i PhÃ¡p: Factory Method ra tay!**

Factory Method nÃ³i ráº±ng: "NÃ y báº¡n, thay vÃ¬ tá»± mÃ¬nh `new` má»™t Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ, hÃ£y Ä‘á»ƒ má»™t **phÆ°Æ¡ng thá»©c** lÃ m Ä‘iá»u Ä‘Ã³ cho báº¡n!"

VÃ  Ä‘Ã¢y lÃ  Ä‘iá»ƒm máº¥u chá»‘t: **phÆ°Æ¡ng thá»©c Ä‘Ã³ cÃ³ thá»ƒ Ä‘Æ°á»£c ghi Ä‘Ã¨ (override) bá»Ÿi cÃ¡c lá»›p con!**

NghÄ©a lÃ :

*   Lá»›p cha sáº½ Ä‘á»‹nh nghÄ©a má»™t "nhÃ  mÃ¡y" chung chung (factory method) Ä‘á»ƒ táº¡o ra cÃ¡c "sáº£n pháº©m".
*   NhÆ°ng cÃ¡c lá»›p con sáº½ lÃ  ngÆ°á»i "thá»±c sá»±" quyáº¿t Ä‘á»‹nh "sáº£n pháº©m" cá»¥ thá»ƒ nÃ o sáº½ Ä‘Æ°á»£c táº¡o ra tá»« "nhÃ  mÃ¡y" Ä‘Ã³.

**HÃ£y nghÄ© vá» nÃ³ nhÆ° tháº¿ nÃ y:** Báº¡n cÃ³ má»™t cÃ´ng thá»©c lÃ m bÃ¡nh pizza chung (lá»›p cha), nhÆ°ng má»—i cá»­a hÃ ng pizza (lá»›p con) cÃ³ thá»ƒ cÃ³ má»™t cÃ¡ch "Ä‘áº·c biá»‡t" Ä‘á»ƒ táº¡o ra loáº¡i Ä‘áº¿ bÃ¡nh hoáº·c phÃ´ mai riÃªng cá»§a há». CÃ´ng thá»©c chung váº«n lÃ  lÃ m bÃ¡nh pizza, nhÆ°ng "chi tiáº¿t" táº¡o ra bÃ¡nh láº¡i do tá»«ng cá»­a hÃ ng con quyáº¿t Ä‘á»‹nh.

---

#### **CÃ¡c "NhÃ¢n Váº­t" ChÃ­nh (The Cast of Characters)**

Äá»ƒ hiá»ƒu rÃµ hÆ¡n, chÃºng ta hÃ£y lÃ m quen vá»›i cÃ¡c "nhÃ¢n váº­t" tham gia vÃ o Factory Method nhÃ©:

1.  **Sáº£n pháº©m (Product)**
    *   ÄÃ¢y lÃ  **giao diá»‡n chung** (interface) hoáº·c **lá»›p trá»«u tÆ°á»£ng** (abstract class) cho táº¥t cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng mÃ  báº¡n muá»‘n táº¡o.
    *   NÃ³ Ä‘á»‹nh nghÄ©a cÃ¡c hÃ nh Ä‘á»™ng chung mÃ  má»i "sáº£n pháº©m" pháº£i cÃ³.
    *   **VÃ­ dá»¥:** Giao diá»‡n `Pizza` vá»›i cÃ¡c phÆ°Æ¡ng thá»©c nhÆ° `chuanBi()`, `nuong()`, `catLat()`, `dongHop()`.

2.  **Sáº£n pháº©m Cá»¥ thá»ƒ (Concrete Product)**
    *   ÄÃ¢y lÃ  cÃ¡c lá»›p cá»¥ thá»ƒ, **thá»±c thi** giao diá»‡n `Product` (hoáº·c káº¿ thá»«a tá»« lá»›p trá»«u tÆ°á»£ng `Product`).
    *   ChÃºng lÃ  nhá»¯ng Ä‘á»‘i tÆ°á»£ng "tháº­t" mÃ  báº¡n muá»‘n táº¡o ra.
    *   **VÃ­ dá»¥:** `PizzaPhoMai`, `PizzaHaiSan`, `PizzaChay`.

3.  **NgÆ°á»i Táº¡o (Creator)**
    *   ÄÃ¢y lÃ  **lá»›p cha** (superclass) hoáº·c **giao diá»‡n** (interface) khai bÃ¡o **phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o** (Factory Method).
    *   PhÆ°Æ¡ng thá»©c nÃ y sáº½ tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng thuá»™c kiá»ƒu `Product`.
    *   Äiá»u quan trá»ng lÃ : Lá»›p `Creator` nÃ y thÆ°á»ng cÃ³ cÃ¡c logic nghiá»‡p vá»¥ (business logic) cáº§n Ä‘áº¿n cÃ¡c Ä‘á»‘i tÆ°á»£ng `Product`, nhÆ°ng nÃ³ **khÃ´ng quan tÃ¢m** Ä‘áº¿n viá»‡c *chÃ­nh xÃ¡c* Ä‘Ã³ lÃ  `Concrete Product` nÃ o. NÃ³ chá»‰ cáº§n má»™t `Product` thÃ´i!
    *   **VÃ­ dá»¥:** Lá»›p trá»«u tÆ°á»£ng `CuaHangPizza` cÃ³ má»™t phÆ°Æ¡ng thá»©c `datPizza()` vÃ  bÃªn trong Ä‘Ã³ sáº½ gá»i Ä‘áº¿n phÆ°Æ¡ng thá»©c `taoPizza()`. PhÆ°Æ¡ng thá»©c `taoPizza()` chÃ­nh lÃ  Factory Method cá»§a chÃºng ta!

4.  **NgÆ°á»i Táº¡o Cá»¥ thá»ƒ (Concrete Creator)**
    *   ÄÃ¢y lÃ  cÃ¡c **lá»›p con** (subclasses) cá»§a `Creator`.
    *   ChÃºng **ghi Ä‘Ã¨** (override) phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o (`taoPizza()`) Ä‘á»ƒ tráº£ vá» má»™t `Concrete Product` cá»¥ thá»ƒ.
    *   Má»—i `Concrete Creator` cÃ³ thá»ƒ táº¡o ra cÃ¡c loáº¡i `Concrete Product` khÃ¡c nhau, hoáº·c táº¡o ra cÃ¹ng má»™t loáº¡i `Product` nhÆ°ng vá»›i cÃ¡c biáº¿n thá»ƒ khÃ¡c nhau.
    *   **VÃ­ dá»¥:** `CuaHangPizzaSaiGon` vÃ  `CuaHangPizzaHaNoi`. Má»—i cá»­a hÃ ng nÃ y sáº½ cÃ³ cÃ¡ch `taoPizza()` riÃªng, vÃ­ dá»¥ `CuaHangPizzaSaiGon` cÃ³ thá»ƒ táº¡o `PizzaHaiSanSaiGon` cÃ²n `CuaHangPizzaHaNoi` cÃ³ thá»ƒ táº¡o `PizzaHaiSanHaNoi` (náº¿u cÃ³ cÃ¡c lá»›p pizza Ä‘áº·c trÆ°ng vÃ¹ng miá»n).

---

#### **HÃ£y cÃ¹ng xem code hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o! (VÃ­ dá»¥ Pizza)**

```java
// 1. Sáº£n pháº©m (Product) - Giao diá»‡n chung cho má»i loáº¡i Pizza
interface Pizza {
    void chuanBi();
    void nuong();
    void catLat();
    void dongHop();
}

// 2. Sáº£n pháº©m Cá»¥ thá»ƒ (Concrete Product)
// ÄÃ¢y lÃ  cÃ¡c loáº¡i pizza tháº­t sá»± mÃ  chÃºng ta muá»‘n táº¡o ra
class PizzaPhoMai implements Pizza {
    public void chuanBi() {
        System.out.println("Chuáº©n bá»‹ Pizza PhÃ´ Mai vá»›i 3 loáº¡i phÃ´ mai Ä‘áº·c biá»‡t.");
    }
    public void nuong() {
        System.out.println("NÆ°á»›ng Pizza PhÃ´ Mai á»Ÿ 350 Ä‘á»™ C trong 20 phÃºt.");
    }
    public void catLat() {
        System.out.println("Cáº¯t Pizza PhÃ´ Mai thÃ nh 8 lÃ¡t Ä‘á»u.");
    }
    public void dongHop() {
        System.out.println("ÄÃ³ng há»™p Pizza PhÃ´ Mai, kÃ¨m sá»‘t cháº¥m.");
    }
}

class PizzaHaiSan implements Pizza {
    public void chuanBi() {
        System.out.println("Chuáº©n bá»‹ Pizza Háº£i Sáº£n vá»›i tÃ´m, má»±c tÆ°Æ¡i rÃ³i.");
    }
    public void nuong() {
        System.out.println("NÆ°á»›ng Pizza Háº£i Sáº£n á»Ÿ 375 Ä‘á»™ C trong 25 phÃºt.");
    }
    public void catLat() {
        System.out.println("Cáº¯t Pizza Háº£i Sáº£n thÃ nh 10 lÃ¡t.");
    }
    public void dongHop() {
        System.out.println("ÄÃ³ng há»™p Pizza Háº£i Sáº£n, kÃ¨m chanh tÆ°Æ¡i.");
    }
}

// Giáº£ sá»­ chÃºng ta cÃ³ cÃ¡c loáº¡i pizza Ä‘áº·c trÆ°ng cho tá»«ng vÃ¹ng
class PizzaPhoMaiHaNoi implements Pizza {
    public void chuanBi() { System.out.println("Chuáº©n bá»‹ Pizza PhÃ´ Mai kiá»ƒu HÃ  Ná»™i, thÃªm chÃºt háº¡t tiÃªu."); }
    public void nuong() { System.out.println("NÆ°á»›ng Pizza PhÃ´ Mai HÃ  Ná»™i trÃªn lÃ² gáº¡ch."); }
    public void catLat() { System.out.println("Cáº¯t Pizza PhÃ´ Mai HÃ  Ná»™i thÃ nh 6 lÃ¡t."); }
    public void dongHop() { System.out.println("ÄÃ³ng há»™p Pizza PhÃ´ Mai HÃ  Ná»™i, kÃ¨m tÆ°Æ¡ng á»›t."); }
}

class PizzaHaiSanHaNoi implements Pizza {
    public void chuanBi() { System.out.println("Chuáº©n bá»‹ Pizza Háº£i Sáº£n kiá»ƒu HÃ  Ná»™i, tÃ´m tÆ°Æ¡i há»“ TÃ¢y."); }
    public void nuong() { System.out.println("NÆ°á»›ng Pizza Háº£i Sáº£n HÃ  Ná»™i báº±ng than hoa."); }
    public void catLat() { System.out.println("Cáº¯t Pizza Háº£i Sáº£n HÃ  Ná»™i thÃ nh 8 lÃ¡t."); }
    public void dongHop() { System.out.println("ÄÃ³ng há»™p Pizza Háº£i Sáº£n HÃ  Ná»™i, kÃ¨m nÆ°á»›c cháº¥m Ä‘áº·c biá»‡t."); }
}

// 3. NgÆ°á»i Táº¡o (Creator) - Lá»›p cha Ä‘á»‹nh nghÄ©a Factory Method
// Lá»›p nÃ y khÃ´ng biáº¿t chÃ­nh xÃ¡c loáº¡i pizza nÃ o sáº½ Ä‘Æ°á»£c táº¡o,
// nhÆ°ng nÃ³ biáº¿t nÃ³ cáº§n má»™t Pizza Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c bÆ°á»›c chung.
abstract class CuaHangPizza {
    
    // ÄÃ¢y chÃ­nh lÃ  Factory Method!
    // NÃ³ Ä‘Æ°á»£c khai bÃ¡o lÃ  abstract, nghÄ©a lÃ  cÃ¡c lá»›p con PHáº¢I tá»± Ä‘á»‹nh nghÄ©a nÃ³.
    protected abstract Pizza taoPizza(String loai);

    // PhÆ°Æ¡ng thá»©c datPizza() chá»©a logic nghiá»‡p vá»¥ chung
    // NÃ³ sá»­ dá»¥ng Factory Method Ä‘á»ƒ "nhá»" lá»›p con táº¡o ra pizza phÃ¹ há»£p.
    public Pizza datPizza(String loai) {
        Pizza pizza = taoPizza(loai); // Gá»i Factory Method Ä‘á»ƒ táº¡o pizza!
        
        System.out.println("--- Äang cháº¿ biáº¿n pizza " + loai + " ---");
        pizza.chuanBi();
        pizza.nuong();
        pizza.catLat();
        pizza.dongHop();
        System.out.println("--- Cháº¿ biáº¿n xong! ---");
        
        return pizza;
    }
}

// 4. NgÆ°á»i Táº¡o Cá»¥ thá»ƒ (Concrete Creator)
// Má»—i cá»­a hÃ ng con sáº½ ghi Ä‘Ã¨ Factory Method Ä‘á»ƒ táº¡o ra cÃ¡c loáº¡i pizza riÃªng cá»§a mÃ¬nh.
class CuaHangPizzaSaiGon extends CuaHangPizza {
    @Override
    protected Pizza taoPizza(String loai) {
        if (loai.equals("phomai")) {
            return new PizzaPhoMai(); // Pizza PhÃ´ Mai chuáº©n SÃ i GÃ²n
        } else if (loai.equals("haisan")) {
            return new PizzaHaiSan(); // Pizza Háº£i Sáº£n chuáº©n SÃ i GÃ²n
        } 
        // ... cÃ³ thá»ƒ thÃªm cÃ¡c loáº¡i pizza Ä‘áº·c trÆ°ng SÃ i GÃ²n khÃ¡c
        return null; // TrÆ°á»ng há»£p khÃ´ng tÃ¬m tháº¥y loáº¡i pizza
    }
}

class CuaHangPizzaHaNoi extends CuaHangPizza {
    @Override
    protected Pizza taoPizza(String loai) {
        if (loai.equals("phomai")) {
            return new PizzaPhoMaiHaNoi(); // Pizza PhÃ´ Mai Ä‘áº·c trÆ°ng HÃ  Ná»™i
        } else if (loai.equals("haisan")) {
            return new PizzaHaiSanHaNoi(); // Pizza Háº£i Sáº£n Ä‘áº·c trÆ°ng HÃ  Ná»™i
        }
        // ... cÃ¡c loáº¡i pizza Ä‘áº·c trÆ°ng HÃ  Ná»™i khÃ¡c
        return null;
    }
}


// KhÃ¡ch HÃ ng (Client) - Sá»­ dá»¥ng cÃ¡c cá»­a hÃ ng pizza
public class KhachHang {
    public static void main(String[] args) {
        // KhÃ¡ch hÃ ng muá»‘n Ä‘áº·t pizza tá»« cá»­a hÃ ng SÃ i GÃ²n
        CuaHangPizza saiGonStore = new CuaHangPizzaSaiGon();
        System.out.println("KhÃ¡ch hÃ ng A Ä‘áº·t Pizza PhÃ´ Mai tá»« Cá»­a hÃ ng SÃ i GÃ²n:");
        Pizza pizzaA = saiGonStore.datPizza("phomai");
        System.out.println("ÄÃ£ nháº­n Ä‘Æ°á»£c: " + pizzaA.getClass().getSimpleName() + "\n");

        // KhÃ¡ch hÃ ng muá»‘n Ä‘áº·t pizza tá»« cá»­a hÃ ng HÃ  Ná»™i
        CuaHangPizza haNoiStore = new CuaHangPizzaHaNoi();
        System.out.println("KhÃ¡ch hÃ ng B Ä‘áº·t Pizza Háº£i Sáº£n tá»« Cá»­a hÃ ng HÃ  Ná»™i:");
        Pizza pizzaB = haNoiStore.datPizza("haisan");
        System.out.println("ÄÃ£ nháº­n Ä‘Æ°á»£c: " + pizzaB.getClass().getSimpleName() + "\n");

        System.out.println("KhÃ¡ch hÃ ng C Ä‘áº·t Pizza PhÃ´ Mai tá»« Cá»­a hÃ ng HÃ  Ná»™i:");
        Pizza pizzaC = haNoiStore.datPizza("phomai");
        System.out.println("ÄÃ£ nháº­n Ä‘Æ°á»£c: " + pizzaC.getClass().getSimpleName() + "\n");
    }
}
```

**Báº¡n tháº¥y khÃ´ng?**

*   PhÆ°Æ¡ng thá»©c `datPizza()` trong `CuaHangPizza` khÃ´ng há» biáº¿t `Pizza` Ä‘Æ°á»£c táº¡o ra báº±ng cÃ¡ch nÃ o hay nÃ³ lÃ  loáº¡i `Pizza` cá»¥ thá»ƒ nÃ o. NÃ³ chá»‰ gá»i `taoPizza()` vÃ  sau Ä‘Ã³ xá»­ lÃ½ `Pizza` nháº­n Ä‘Æ°á»£c má»™t cÃ¡ch chung chung.
*   ChÃ­nh cÃ¡c lá»›p con (`CuaHangPizzaSaiGon`, `CuaHangPizzaHaNoi`) má»›i lÃ  ngÆ°á»i "láº¥p Ä‘áº§y" chi tiáº¿t cho phÆ°Æ¡ng thá»©c `taoPizza()`, quyáº¿t Ä‘á»‹nh loáº¡i `Pizza` cá»¥ thá»ƒ sáº½ Ä‘Æ°á»£c táº¡o ra.

---

#### **ChÃºng ta Ä‘Ã£ Ä‘Æ°á»£c gÃ¬ tá»« Factory Method? (Lá»£i Ã­ch)**

Nhá» cÃ³ Factory Method, code cá»§a chÃºng ta trá»Ÿ nÃªn:

*   **TÃ¡ch biá»‡t (Decoupling):** Lá»›p `CuaHangPizza` khÃ´ng cáº§n biáº¿t *chÃ­nh xÃ¡c* `Pizza` nÃ o nÃ³ Ä‘ang táº¡o ra. NÃ³ chá»‰ cáº§n biáº¿t Ä‘Ã³ lÃ  má»™t `Pizza`! Äiá»u nÃ y giÃºp giáº£m sá»± phá»¥ thuá»™c giá»¯a cÃ¡c lá»›p.
*   **Linh hoáº¡t (Flexibility):** Báº¡n cÃ³ thá»ƒ dá»… dÃ ng thÃªm cÃ¡c loáº¡i `CuaHangPizza` má»›i (vÃ­ dá»¥: `CuaHangPizzaDaNang`) mÃ  khÃ´ng cáº§n thay Ä‘á»•i code cá»§a cÃ¡c cá»­a hÃ ng hiá»‡n cÃ³ hay code `datPizza()`. Má»—i cá»­a hÃ ng con cÃ³ thá»ƒ tá»± quyáº¿t Ä‘á»‹nh cÃ¡ch táº¡o pizza cá»§a riÃªng mÃ¬nh.
*   **Dá»… má»Ÿ rá»™ng (Extensibility):** Khi cÃ³ loáº¡i pizza má»›i, báº¡n chá»‰ cáº§n táº¡o lá»›p `Concrete Product` má»›i vÃ  cáº­p nháº­t phÆ°Æ¡ng thá»©c `taoPizza()` trong `Concrete Creator` tÆ°Æ¡ng á»©ng. CÃ¡c pháº§n code khÃ¡c khÃ´ng bá»‹ áº£nh hÆ°á»Ÿng.

---

#### **Khi nÃ o thÃ¬ nÃªn dÃ¹ng Factory Method?**

*   Khi báº¡n cÃ³ má»™t lá»›p khÃ´ng biáº¿t trÆ°á»›c loáº¡i Ä‘á»‘i tÆ°á»£ng nÃ o mÃ  nÃ³ cáº§n táº¡o.
*   Khi báº¡n muá»‘n cÃ¡c lá»›p con cá»§a mÃ¬nh quyáº¿t Ä‘á»‹nh loáº¡i Ä‘á»‘i tÆ°á»£ng cáº§n táº¡o.
*   Khi báº¡n muá»‘n cung cáº¥p má»™t giao diá»‡n chung Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng, nhÆ°ng Ä‘á»ƒ cÃ¡c lá»›p con thay Ä‘á»•i cÃ¡ch táº¡o Ä‘Ã³ mÃ  khÃ´ng lÃ m thay Ä‘á»•i code cá»§a lá»›p cha.

---

#### **TÃ³m láº¡i, thÃ´ng Ä‘iá»‡p chÃ­nh lÃ ...**

Factory Method lÃ  má»™t cÃ¡ch "thanh lá»‹ch" Ä‘á»ƒ **á»§y quyá»n viá»‡c táº¡o Ä‘á»‘i tÆ°á»£ng cho cÃ¡c lá»›p con**. NÃ³ giÃºp code cá»§a báº¡n **Ã­t gáº¯n káº¿t** (loosely coupled) hÆ¡n, **linh hoáº¡t** hÆ¡n vÃ  **dá»… quáº£n lÃ½** hÆ¡n ráº¥t nhiá»u.

Giá»‘ng nhÆ° báº¡n cÃ³ má»™t "nhÃ  mÃ¡y" chung, nhÆ°ng má»—i chi nhÃ¡nh "nhÃ  mÃ¡y" láº¡i cÃ³ thá»ƒ sáº£n xuáº¥t nhá»¯ng sáº£n pháº©m hÆ¡i khÃ¡c nhau, phÃ¹ há»£p vá»›i thá»‹ trÆ°á»ng cá»§a há» váº­y!

Hy vá»ng báº¡n Ä‘Ã£ tháº¥y Factory Method khÃ´ng há» Ä‘Ã¡ng sá»£ chÃºt nÃ o mÃ  cÃ²n ráº¥t há»¯u Ã­ch ná»¯a! Háº¹n gáº·p láº¡i trong bÃ i há»c tiáº¿p theo!
       - Abstract Factory

ChÃ o báº¡n! HÃ´m nay chÃºng ta sáº½ cÃ¹ng khÃ¡m phÃ¡ má»™t "nhÃ  mÃ¡y" Ä‘áº·c biá»‡t trong tháº¿ giá»›i láº­p trÃ¬nh: **Abstract Factory** (NhÃ  mÃ¡y Trá»«u tÆ°á»£ng). Nghe tÃªn cÃ³ váº» hÆ¡i "trá»«u tÆ°á»£ng" nhá»‰? Äá»«ng lo, chÃºng ta sáº½ lÃ m cho nÃ³ tháº­t rÃµ rÃ ng vÃ  dá»… hiá»ƒu!

### Váº¥n Ä‘á» lÃ  gÃ¬?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang xÃ¢y dá»±ng má»™t trÃ² chÆ¡i nháº­p vai (RPG) siÃªu hoÃ nh trÃ¡ng. Trong game cá»§a báº¡n, cÃ³ ráº¥t nhiá»u loáº¡i nhÃ¢n váº­t, vÅ© khÃ­ vÃ  giÃ¡p trá»¥ khÃ¡c nhau.

*   Báº¡n cÃ³ thá»ƒ cÃ³ cÃ¡c nhÃ¢n váº­t nhÆ° **Chiáº¿n binh** (Warrior), **PhÃ¡p sÆ°** (Mage), **Cung thá»§** (Archer).
*   VÅ© khÃ­ thÃ¬ cÃ³ **Kiáº¿m** (Sword), **Cung** (Bow), **Gáº­y phÃ©p** (Staff).
*   GiÃ¡p trá»¥ thÃ¬ cÃ³ **GiÃ¡p sáº¯t** (Plate Armor), **Ão choÃ ng** (Robe), **GiÃ¡p da** (Leather Armor).

NhÆ°ng khoan Ä‘Ã£! Game cá»§a báº¡n khÃ´ng chá»‰ cÃ³ má»™t "tháº¿ giá»›i" mÃ  cÃ³ thá»ƒ cÃ³ nhiá»u bá»‘i cáº£nh khÃ¡c nhau, vÃ­ dá»¥:
1.  **Tháº¿ giá»›i Fantasy** (Kiáº¿m, Rá»“ng, PhÃ¡p thuáº­t)
2.  **Tháº¿ giá»›i Sci-Fi** (SÃºng laser, Robot, TÃ u vÅ© trá»¥)

Khi báº¡n muá»‘n táº¡o má»™t nhÃ¢n váº­t, báº¡n khÃ´ng chá»‰ muá»‘n táº¡o má»™t "Chiáº¿n binh" mÃ  báº¡n muá»‘n táº¡o má»™t **Chiáº¿n binh Fantasy** Ä‘i cÃ¹ng vá»›i **Kiáº¿m Fantasy** vÃ  **GiÃ¡p sáº¯t Fantasy**. Hoáº·c báº¡n muá»‘n táº¡o má»™t **Chiáº¿n binh Sci-Fi** Ä‘i cÃ¹ng vá»›i **SÃºng laser Sci-Fi** vÃ  **GiÃ¡p nÄƒng lÆ°á»£ng Sci-Fi**.

Váº¥n Ä‘á» lÃ : LÃ m sao Ä‘á»ƒ báº¡n luÃ´n táº¡o ra má»™t *bá»™ sáº£n pháº©m* (má»™t gia Ä‘Ã¬nh sáº£n pháº©m) nháº¥t quÃ¡n cho tá»«ng tháº¿ giá»›i mÃ  khÃ´ng bá»‹ nháº§m láº«n? Tá»©c lÃ , báº¡n khÃ´ng muá»‘n má»™t Chiáº¿n binh Fantasy láº¡i cáº§m SÃºng laser Sci-Fi, Ä‘Ãºng khÃ´ng?

Náº¿u báº¡n cá»© `new` tá»«ng mÃ³n Ä‘á»“ má»™t, code cá»§a báº¡n sáº½ trÃ´ng nhÆ° tháº¿ nÃ y:

```java
// Táº¡o Ä‘á»“ cho tháº¿ giá»›i Fantasy
Weapon fantasySword = new FantasySword();
Armor fantasyPlate = new FantasyPlateArmor();
Character fantasyWarrior = new FantasyWarrior(fantasySword, fantasyPlate);

// Táº¡o Ä‘á»“ cho tháº¿ giá»›i Sci-Fi
Weapon sciFiBlaster = new new SciFiBlaster();
Armor sciFiPowerArmor = new SciFiPowerArmor();
Character sciFiTrooper = new SciFiTrooper(sciFiBlaster, sciFiPowerArmor);

// ... vÃ  ráº¥t nhiá»u chá»— khÃ¡c trong code cá»§a báº¡n sáº½ pháº£i lÃ m nhÆ° váº­y!
```

Äiá»u nÃ y cÃ³ váº» á»•n lÃºc Ä‘áº§u, nhÆ°ng náº¿u báº¡n cÃ³ hÃ ng tÃ¡ loáº¡i vÅ© khÃ­, giÃ¡p, nhÃ¢n váº­t vÃ  hÃ ng chá»¥c tháº¿ giá»›i khÃ¡c nhau? Code cá»§a báº¡n sáº½ trÃ n ngáº­p nhá»¯ng cÃ¢u lá»‡nh `new` vÃ  `if/else` Ä‘á»ƒ kiá»ƒm tra xem Ä‘ang á»Ÿ tháº¿ giá»›i nÃ o mÃ  táº¡o Ä‘á»“ cho Ä‘Ãºng. Ráº¥t dá»… nháº§m láº«n vÃ  khÃ³ quáº£n lÃ½!

### Giáº£i phÃ¡p: Abstract Factory (NhÃ  mÃ¡y Trá»«u tÆ°á»£ng)

Váº­y thÃ¬, náº¿u chÃºng ta cÃ³ má»™t "nhÃ  mÃ¡y máº¹" biáº¿t cÃ¡ch táº¡o ra *cáº£ má»™t gia Ä‘Ã¬nh sáº£n pháº©m* cho tá»«ng tháº¿ giá»›i thÃ¬ sao?

Ã tÆ°á»Ÿng lÃ :

*   ChÃºng ta sáº½ cÃ³ má»™t **giao diá»‡n** (interface) cho "nhÃ  mÃ¡y máº¹" nÃ y. Giao diá»‡n nÃ y sáº½ Ä‘á»‹nh nghÄ©a cÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ táº¡o ra *táº¥t cáº£ cÃ¡c loáº¡i sáº£n pháº©m* trong má»™t gia Ä‘Ã¬nh (vÃ­ dá»¥: `createWeapon()`, `createArmor()`, `createCharacter()`). ÄÃ¢y chÃ­nh lÃ  **Abstract Factory** cá»§a chÃºng ta!
*   Sau Ä‘Ã³, chÃºng ta sáº½ cÃ³ cÃ¡c **nhÃ  mÃ¡y cá»¥ thá»ƒ** (concrete factories) triá»ƒn khai giao diá»‡n nÃ y. Má»—i nhÃ  mÃ¡y cá»¥ thá»ƒ sáº½ chuyÃªn táº¡o ra *má»™t gia Ä‘Ã¬nh sáº£n pháº©m* cho má»™t tháº¿ giá»›i cá»¥ thá»ƒ.
    *   VÃ­ dá»¥: `FantasyGameFactory` sáº½ táº¡o ra cÃ¡c sáº£n pháº©m kiá»ƒu Fantasy.
    *   VÃ­ dá»¥: `SciFiGameFactory` sáº½ táº¡o ra cÃ¡c sáº£n pháº©m kiá»ƒu Sci-Fi.

Client (pháº§n code sá»­ dá»¥ng cÃ¡c sáº£n pháº©m nÃ y) sáº½ chá»‰ cáº§n biáº¿t Ä‘áº¿n giao diá»‡n Abstract Factory. NÃ³ sáº½ yÃªu cáº§u Abstract Factory táº¡o sáº£n pháº©m, mÃ  khÃ´ng cáº§n biáº¿t chÃ­nh xÃ¡c loáº¡i nhÃ  mÃ¡y cá»¥ thá»ƒ nÃ o Ä‘ang Ä‘Æ°á»£c sá»­ dá»¥ng.

Nghe cÃ³ váº» hÆ¡i phá»©c táº¡p? Äá»«ng lo, hÃ£y xem code vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y, báº¡n sáº½ tháº¥y nÃ³ Ä‘Æ¡n giáº£n hÆ¡n nhiá»u!

### Báº¯t tay vÃ o code!

ChÃºng ta sáº½ xÃ¢y dá»±ng tá»«ng pháº§n má»™t nhÃ©.

#### BÆ°á»›c 1: Äá»‹nh nghÄ©a cÃ¡c sáº£n pháº©m (Product Interfaces)

Äáº§u tiÃªn, chÃºng ta cáº§n Ä‘á»‹nh nghÄ©a cÃ¡c giao diá»‡n cho cÃ¡c loáº¡i sáº£n pháº©m mÃ  chÃºng ta muá»‘n táº¡o. ÄÃ¢y lÃ  báº£n thiáº¿t káº¿ chung cho cÃ¡c sáº£n pháº©m.

```java
// Giao diá»‡n cho VÅ© khÃ­
interface Weapon {
    void attack();
}

// Giao diá»‡n cho GiÃ¡p trá»¥
interface Armor {
    void defend();
}

// Giao diá»‡n cho NhÃ¢n váº­t
interface Character {
    void display();
}
```

#### BÆ°á»›c 2: Táº¡o cÃ¡c sáº£n pháº©m cá»¥ thá»ƒ (Concrete Products)

BÃ¢y giá», hÃ£y táº¡o ra cÃ¡c sáº£n pháº©m thá»±c táº¿ thuá»™c cÃ¡c tháº¿ giá»›i khÃ¡c nhau, triá»ƒn khai cÃ¡c giao diá»‡n trÃªn.

```java
// --- Sáº£n pháº©m Fantasy ---
class FantasySword implements Weapon {
    public void attack() {
        System.out.println("Vung kiáº¿m Fantasy chÃ©m!");
    }
}

class FantasyPlateArmor implements Armor {
    public void defend() {
        System.out.println("GiÃ¡p sáº¯t Fantasy báº£o vá»‡!");
    }
}

class FantasyWarrior implements Character {
    private Weapon weapon;
    private Armor armor;

    public FantasyWarrior(Weapon weapon, Armor armor) {
        this.weapon = weapon;
        this.armor = armor;
    }

    public void display() {
        System.out.print("Chiáº¿n binh Fantasy sáºµn sÃ ng! ");
        weapon.attack();
        armor.defend();
    }
}

// --- Sáº£n pháº©m Sci-Fi ---
class SciFiBlaster implements Weapon {
    public void attack() {
        System.out.println("Báº¯n sÃºng laser Sci-Fi!");
    }
}

class SciFiPowerArmor implements Armor {
    public void defend() {
        System.out.println("GiÃ¡p nÄƒng lÆ°á»£ng Sci-Fi chá»‘ng Ä‘á»¡!");
    }
}

class SciFiTrooper implements Character {
    private Weapon weapon;
    private Armor armor;

    public SciFiTrooper(Weapon weapon, Armor armor) {
        this.weapon = weapon;
        this.armor = armor;
    }

    public void display() {
        System.out.print("LÃ­nh Sci-Fi Ä‘Ã£ triá»ƒn khai! ");
        weapon.attack();
        armor.defend();
    }
}
```

#### BÆ°á»›c 3: Äá»‹nh nghÄ©a Abstract Factory (Giao diá»‡n NhÃ  mÃ¡y Trá»«u tÆ°á»£ng)

ÄÃ¢y lÃ  trÃ¡i tim cá»§a máº«u thiáº¿t káº¿ nÃ y! Má»™t giao diá»‡n Ä‘á»‹nh nghÄ©a cÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ táº¡o ra *má»™t bá»™* cÃ¡c sáº£n pháº©m liÃªn quan.

```java
// Giao diá»‡n Abstract Factory cho viá»‡c táº¡o cÃ¡c thÃ nh pháº§n game
interface GameFactory {
    Weapon createWeapon();
    Armor createArmor();
    Character createCharacter(Weapon weapon, Armor armor); // NhÃ¢n váº­t cáº§n vÅ© khÃ­ vÃ  giÃ¡p
}
```

#### BÆ°á»›c 4: Táº¡o cÃ¡c NhÃ  mÃ¡y Cá»¥ thá»ƒ (Concrete Factories)

BÃ¢y giá», chÃºng ta sáº½ táº¡o cÃ¡c nhÃ  mÃ¡y chuyÃªn biá»‡t, má»—i nhÃ  mÃ¡y biáº¿t cÃ¡ch táº¡o ra *gia Ä‘Ã¬nh sáº£n pháº©m* cá»§a riÃªng mÃ¬nh.

```java
// NhÃ  mÃ¡y cá»¥ thá»ƒ táº¡o ra cÃ¡c sáº£n pháº©m Fantasy
class FantasyGameFactory implements GameFactory {
    @Override
    public Weapon createWeapon() {
        return new FantasySword();
    }

    @Override
    public Armor createArmor() {
        return new FantasyPlateArmor();
    }

    @Override
    public Character createCharacter(Weapon weapon, Armor armor) {
        return new FantasyWarrior(weapon, armor);
    }
}

// NhÃ  mÃ¡y cá»¥ thá»ƒ táº¡o ra cÃ¡c sáº£n pháº©m Sci-Fi
class SciFiGameFactory implements GameFactory {
    @Override
    public Weapon createWeapon() {
        return new SciFiBlaster();
    }

    @Override
    public Armor createArmor() {
        return new SciFiPowerArmor();
    }

    @Override
    public Character createCharacter(Weapon weapon, Armor armor) {
        return new SciFiTrooper(weapon, armor);
    }
}
```

Báº¡n tháº¥y khÃ´ng? Má»—i nhÃ  mÃ¡y cá»¥ thá»ƒ (`FantasyGameFactory`, `SciFiGameFactory`) Ä‘á»u thá»±c hiá»‡n cÃ¹ng má»™t "há»£p Ä‘á»“ng" (`GameFactory`), nhÆ°ng cÃ¡ch chÃºng táº¡o ra sáº£n pháº©m thÃ¬ khÃ¡c nhau hoÃ n toÃ n!

#### BÆ°á»›c 5: Sá»­ dá»¥ng Abstract Factory trong Client Code

ÄÃ¢y lÃ  lÃºc chÃºng ta gáº·t hÃ¡i thÃ nh quáº£! Pháº§n code sá»­ dá»¥ng (Client) giá» Ä‘Ã¢y khÃ´ng cáº§n biáº¿t vá» cÃ¡c lá»›p sáº£n pháº©m cá»¥ thá»ƒ ná»¯a. NÃ³ chá»‰ cáº§n biáº¿t Ä‘áº¿n `GameFactory` vÃ  gá»i cÃ¡c phÆ°Æ¡ng thá»©c táº¡o sáº£n pháº©m tá»« Ä‘Ã³.

```java
public class GameClient {

    public static void main(String[] args) {
        System.out.println("--- Táº¡o Ä‘á»™i hÃ¬nh Fantasy ---");
        GameFactory fantasyFactory = new FantasyGameFactory(); // Chá»n nhÃ  mÃ¡y Fantasy

        Weapon fantasyWeapon = fantasyFactory.createWeapon();
        Armor fantasyArmor = fantasyFactory.createArmor();
        Character fantasyCharacter = fantasyFactory.createCharacter(fantasyWeapon, fantasyArmor);
        fantasyCharacter.display(); // Chiáº¿n binh Fantasy sáºµn sÃ ng! Vung kiáº¿m Fantasy chÃ©m! GiÃ¡p sáº¯t Fantasy báº£o vá»‡!

        System.out.println("\n--- Táº¡o Ä‘á»™i hÃ¬nh Sci-Fi ---");
        GameFactory sciFiFactory = new SciFiGameFactory(); // Chá»n nhÃ  mÃ¡y Sci-Fi

        Weapon sciFiWeapon = sciFiFactory.createWeapon();
        Armor sciFiArmor = sciFiFactory.createArmor();
        Character sciFiCharacter = sciFiFactory.createCharacter(sciFiWeapon, sciFiArmor);
        sciFiCharacter.display(); // LÃ­nh Sci-Fi Ä‘Ã£ triá»ƒn khai! Báº¯n sÃºng laser Sci-Fi! GiÃ¡p nÄƒng lÆ°á»£ng Sci-Fi chá»‘ng Ä‘á»¡!
    }
}
```

Báº¡n tháº¥y sá»± khÃ¡c biá»‡t chÆ°a? Trong `GameClient`, chÃºng ta chá»‰ cáº§n thay Ä‘á»•i dÃ²ng `new FantasyGameFactory()` thÃ nh `new SciFiGameFactory()` lÃ  toÃ n bá»™ "gia Ä‘Ã¬nh" sáº£n pháº©m Ä‘Æ°á»£c táº¡o ra Ä‘Ã£ thay Ä‘á»•i hoÃ n toÃ n, tá»« Fantasy sang Sci-Fi, mÃ  khÃ´ng cáº§n sá»­a Ä‘á»•i báº¥t ká»³ dÃ²ng code nÃ o khÃ¡c! Tuyá»‡t vá»i pháº£i khÃ´ng?

### Lá»£i Ã­ch "khá»§ng" cá»§a Abstract Factory

*   **GiÃºp code linh hoáº¡t hÆ¡n (Decoupling)**: Pháº§n code sá»­ dá»¥ng (client) khÃ´ng cáº§n biáº¿t Ä‘áº¿n tÃªn cÃ¡c lá»›p sáº£n pháº©m cá»¥ thá»ƒ (`FantasySword`, `SciFiBlaster`...). NÃ³ chá»‰ lÃ m viá»‡c vá»›i cÃ¡c giao diá»‡n (`Weapon`, `Armor`, `Character`). Äiá»u nÃ y giÃºp giáº£m sá»± phá»¥ thuá»™c giá»¯a cÃ¡c thÃ nh pháº§n.
*   **Dá»… dÃ ng thay Ä‘á»•i "gia Ä‘Ã¬nh" sáº£n pháº©m**: Báº¡n muá»‘n chuyá»ƒn tá»« Fantasy sang Sci-Fi? Chá»‰ cáº§n thay Ä‘á»•i má»™t dÃ²ng code Ä‘á»ƒ khá»Ÿi táº¡o má»™t nhÃ  mÃ¡y cá»¥ thá»ƒ khÃ¡c (`new FantasyGameFactory()` thÃ nh `new SciFiGameFactory()`). ToÃ n bá»™ há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng táº¡o ra cÃ¡c sáº£n pháº©m thuá»™c gia Ä‘Ã¬nh má»›i.
*   **Äáº£m báº£o tÃ­nh nháº¥t quÃ¡n cá»§a sáº£n pháº©m**: Má»™t nhÃ  mÃ¡y cá»¥ thá»ƒ luÃ´n táº¡o ra má»™t "gia Ä‘Ã¬nh" cÃ¡c sáº£n pháº©m tÆ°Æ¡ng thÃ­ch vá»›i nhau. Báº¡n sáº½ khÃ´ng bao giá» vÃ´ tÃ¬nh táº¡o ra má»™t Chiáº¿n binh Fantasy cáº§m SÃºng laser Sci-Fi.

### TÃ³m láº¡i

**Abstract Factory** lÃ  má»™t máº«u thiáº¿t káº¿ giÃºp báº¡n táº¡o ra *cÃ¡c gia Ä‘Ã¬nh sáº£n pháº©m liÃªn quan* mÃ  khÃ´ng cáº§n pháº£i chá»‰ Ä‘á»‹nh rÃµ cÃ¡c lá»›p cá»¥ thá»ƒ cá»§a chÃºng. NÃ³ giá»‘ng nhÆ° viá»‡c báº¡n cÃ³ má»™t "siÃªu nhÃ  mÃ¡y" biáº¿t cÃ¡ch sáº£n xuáº¥t toÃ n bá»™ má»™t bá»™ Ä‘á»“ chÆ¡i theo chá»§ Ä‘á» (vÃ­ dá»¥: bá»™ Ä‘á»“ chÆ¡i "SiÃªu anh hÃ¹ng" hoáº·c bá»™ Ä‘á»“ chÆ¡i "CÃ´ng chÃºa"), vÃ  báº¡n chá»‰ cáº§n chá»n chá»§ Ä‘á», cÃ²n viá»‡c sáº£n xuáº¥t cÃ¡c mÃ³n Ä‘á»“ chi tiáº¿t (nhÃ¢n váº­t, phá»¥ kiá»‡n...) thÃ¬ siÃªu nhÃ  mÃ¡y Ä‘Ã³ sáº½ lo táº¥t!

Khi nÃ o báº¡n cáº§n táº¡o ra má»™t bá»™ cÃ¡c Ä‘á»‘i tÆ°á»£ng liÃªn quan vÃ  muá»‘n cÃ³ kháº£ nÄƒng dá»… dÃ ng thay Ä‘á»•i toÃ n bá»™ bá»™ Ä‘Ã³, hÃ£y nghÄ© Ä‘áº¿n Abstract Factory nhÃ©!
       - NÃ y báº¡n! Báº¡n Ä‘Ã£ bao giá» pháº£i táº¡o má»™t Ä‘á»‘i tÆ°á»£ng phá»©c táº¡p vá»›i *ráº¥t nhiá»u* tÃ¹y chá»n chÆ°a? Kiá»ƒu nhÆ° má»™t chiáº¿c bÃ¡nh pizza vá»›i Ä‘á»§ loáº¡i topping, hay má»™t chiáº¿c mÃ¡y tÃ­nh tÃ¹y chá»‰nh vá»›i bao nhiÃªu linh kiá»‡n áº¥y?

ThÆ°á»ng thÃ¬, chÃºng ta hay dÃ¹ng constructor, Ä‘Ãºng khÃ´ng? NhÆ°ng náº¿u cÃ³ 5, 10, hay 20 tÃ¹y chá»n thÃ¬ sao? Báº¡n sáº½ cÃ³ má»™t constructor dÃ i ngoáº±ng, hoáº·c tá»‡ hÆ¡n lÃ  *ráº¥t nhiá»u* constructor khÃ¡c nhau. Ã”i trá»i Æ¡i! NhÃ¬n nÃ³ rá»‘i ráº¯m vÃ  khÃ³ dÃ¹ng láº¯m.

ÄÃ³ lÃ  lÃºc **Builder** xuáº¥t hiá»‡n Ä‘á»ƒ cá»©u nguy!

### Builder lÃ  gÃ¬ váº­y?

ÄÆ¡n giáº£n thÃ´i: Builder giÃºp báº¡n 'xÃ¢y dá»±ng' má»™t Ä‘á»‘i tÆ°á»£ng phá»©c táº¡p tá»«ng bÆ°á»›c má»™t. Thay vÃ¬ nhá»“i nhÃ©t má»i thá»© vÃ o má»™t constructor, báº¡n sáº½ cÃ³ má»™t anh chÃ ng 'thá»£ xÃ¢y' riÃªng. Anh áº¥y sáº½ nháº­n tá»«ng yÃªu cáº§u, láº¯p rÃ¡p tá»«ng pháº§n, vÃ  khi nÃ o báº¡n báº£o 'Xong rá»“i!', anh áº¥y sáº½ Ä‘Æ°a cho báº¡n sáº£n pháº©m hoÃ n chá»‰nh.

NÃ³ giá»‘ng nhÆ° báº¡n Ä‘áº·t lÃ m má»™t chiáº¿c xe hÆ¡i váº­y. Báº¡n khÃ´ng nÃ³i 'TÃ´i muá»‘n má»™t chiáº¿c xe mÃ u Ä‘á», cÃ³ gháº¿ da, Ä‘á»™ng cÆ¡ V6, cá»­a sá»• trá»i, blah blah blah' vÃ o má»™t cÃ¢u duy nháº¥t. MÃ  báº¡n sáº½ nÃ³i:
1.  'Cho tÃ´i chiáº¿c xe mÃ u Ä‘á».'
2.  'Gháº¿ da nhÃ©.'
3.  'Äá»™ng cÆ¡ V6.'
4.  'ThÃªm cá»­a sá»• trá»i ná»¯a.'
5.  'Xong rá»“i, giao xe cho tÃ´i!'

### Táº¡i sao láº¡i cáº§n Builder?

*   **Dá»… Ä‘á»c hÆ¡n:** Khi nhÃ¬n vÃ o code, báº¡n sáº½ biáº¿t ngay tá»«ng bÆ°á»›c Ä‘ang lÃ m gÃ¬.
*   **Linh hoáº¡t:** Báº¡n cÃ³ thá»ƒ táº¡o ra vÃ´ sá»‘ biáº¿n thá»ƒ cá»§a Ä‘á»‘i tÆ°á»£ng mÃ  khÃ´ng cáº§n thay Ä‘á»•i class chÃ­nh.
*   **TrÃ¡nh 'constructor chá»“ng cháº¥t':** KhÃ´ng cÃ²n nhá»¯ng constructor dÃ i dáº±ng dáº·c hay hÃ ng tÃ¡ constructor chá»‰ Ä‘á»ƒ xá»­ lÃ½ cÃ¡c trÆ°á»ng há»£p khÃ¡c nhau.
*   **XÃ¢y dá»±ng tá»«ng bÆ°á»›c:** Báº¡n cÃ³ thá»ƒ quyáº¿t Ä‘á»‹nh thá»© tá»± cÃ¡c bÆ°á»›c xÃ¢y dá»±ng, hoáº·c bá» qua má»™t sá»‘ bÆ°á»›c náº¿u khÃ´ng cáº§n.

### CÃ¹ng xem má»™t vÃ­ dá»¥ nhÃ©!

Giáº£ sá»­ báº¡n muá»‘n táº¡o má»™t Ä‘á»‘i tÆ°á»£ng `Computer` (mÃ¡y tÃ­nh) vá»›i CPU, RAM, á»• cá»©ng, card Ä‘á»“ há»a, v.v.

**CÃ¡ch 'cÅ©' (cÃ³ thá»ƒ hÆ¡i ráº¯c rá»‘i):**

```java
public class Computer {
    private String cpu;
    private String ram;
    private String storage;
    private String gpu; // CÃ³ thá»ƒ cÃ³ hoáº·c khÃ´ng
    private String os;  // CÃ³ thá»ƒ cÃ³ hoáº·c khÃ´ng

    // Constructor dÃ i ngoáº±ng hoáº·c nhiá»u constructor khÃ¡c nhau
    public Computer(String cpu, String ram, String storage, String gpu, String os) {
        this.cpu = cpu;
        this.ram = ram;
        this.storage = storage;
        this.gpu = gpu;
        this.os = os;
    }

    public Computer(String cpu, String ram, String storage) {
        this(cpu, ram, storage, null, null);
    }
    // ... vÃ  cÃ²n nhiá»u ná»¯a!
}
```

Tháº¥y khÃ´ng? Náº¿u cÃ³ thÃªm tÃ¹y chá»n, báº¡n sáº½ pháº£i viáº¿t thÃªm constructor. Ráº¥t má»‡t má»i!

**VÃ  Ä‘Ã¢y lÃ  cÃ¡ch cá»§a Builder!**

Äáº§u tiÃªn, chÃºng ta sáº½ cÃ³ class `Computer` cá»§a mÃ¬nh. NhÆ°ng láº§n nÃ y, constructor sáº½ Ä‘Æ¡n giáº£n hÆ¡n, hoáº·c tháº­m chÃ­ lÃ  `private` Ä‘á»ƒ chá»‰ Builder má»›i cÃ³ thá»ƒ gá»i.

```java
public class Computer {
    private String cpu;
    private String ram;
    private String storage;
    private String gpu;
    private String os;

    // Constructor private, chá»‰ Builder má»›i dÃ¹ng Ä‘Æ°á»£c
    private Computer(ComputerBuilder builder) {
        this.cpu = builder.cpu;
        this.ram = builder.ram;
        this.storage = builder.storage;
        this.gpu = builder.gpu;
        this.os = builder.os;
    }

    // Getter methods...
    public String getCpu() { return cpu; }
    public String getRam() { return ram; }
    public String getStorage() { return storage; }
    public String getGpu() { return gpu; }
    public String getOs() { return os; }

    // ÄÃ¢y lÃ  class Builder "lá»“ng" bÃªn trong!
    public static class ComputerBuilder {
        private String cpu;
        private String ram;
        private String storage;
        private String gpu;
        private String os;

        // CÃ¡c thuá»™c tÃ­nh báº¯t buá»™c cÃ³ thá»ƒ Ä‘Æ°á»£c truyá»n vÃ o ngay tá»« constructor cá»§a Builder
        public ComputerBuilder(String cpu, String ram, String storage) {
            this.cpu = cpu;
            this.ram = ram;
            this.storage = storage;
        }

        // CÃ¡c phÆ°Æ¡ng thá»©c "set" tá»«ng pháº§n.
        // Quan trá»ng: ChÃºng tráº£ vá» chÃ­nh Ä‘á»‘i tÆ°á»£ng Builder Ä‘á»ƒ báº¡n cÃ³ thá»ƒ "xÃ¢u chuá»—i" cÃ¡c lá»‡nh!
        public ComputerBuilder withGpu(String gpu) {
            this.gpu = gpu;
            return this; // Tráº£ vá» "this" Ä‘á»ƒ gá»i tiáº¿p .withOs() cháº³ng háº¡n
        }

        public ComputerBuilder withOs(String os) {
            this.os = os;
            return this;
        }

        // Cuá»‘i cÃ¹ng, phÆ°Æ¡ng thá»©c "build" Ä‘á»ƒ táº¡o ra Ä‘á»‘i tÆ°á»£ng Computer tháº­t sá»±
        public Computer build() {
            return new Computer(this); // Gá»i constructor private cá»§a Computer
        }
    }
}
```

### Sá»­ dá»¥ng nÃ³ nhÆ° tháº¿ nÃ o?

NhÃ¬n nÃ y, code sá»­ dá»¥ng trÃ´ng tháº­t dá»… Ä‘á»c vÃ  "ngáº§u" lÃ m sao!

```java
// Táº¡o má»™t mÃ¡y tÃ­nh gaming máº¡nh máº½!
Computer gamingPC = new Computer.ComputerBuilder("Intel i9", "32GB DDR4", "1TB NVMe SSD")
                                .withGpu("NVIDIA RTX 4080")
                                .withOs("Windows 11")
                                .build();

System.out.println("MÃ¡y tÃ­nh gaming cÃ³ CPU: " + gamingPC.getCpu());
System.out.println("GPU: " + gamingPC.getGpu());

// Táº¡o má»™t mÃ¡y tÃ­nh vÄƒn phÃ²ng Ä‘Æ¡n giáº£n
Computer officePC = new Computer.ComputerBuilder("Intel i5", "8GB DDR4", "256GB SSD")
                                .withOs("Ubuntu Linux") // KhÃ´ng cáº§n GPU
                                .build();

System.out.println("MÃ¡y tÃ­nh vÄƒn phÃ²ng cÃ³ CPU: " + officePC.getCpu());
System.out.println("OS: " + officePC.getOs());
// Tháº¥y khÃ´ng? KhÃ´ng cáº§n gá»i withGpu() vÃ¬ nÃ³ lÃ  tÃ¹y chá»n!
```

Tháº­t tuyá»‡t vá»i, Ä‘Ãºng khÃ´ng? Báº¡n cÃ³ thá»ƒ tÃ¹y chá»‰nh mÃ¡y tÃ­nh cá»§a mÃ¬nh mÃ  khÃ´ng cáº§n lo láº¯ng vá» thá»© tá»± cÃ¡c tham sá»‘ hay nhá»¯ng constructor dÃ i dÃ²ng.

### Khi nÃ o thÃ¬ nÃªn dÃ¹ng Builder?

*   Khi Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n cÃ³ *ráº¥t nhiá»u* thuá»™c tÃ­nh (thÆ°á»ng lÃ  4 trá»Ÿ lÃªn).
*   Khi cÃ³ nhiá»u thuá»™c tÃ­nh lÃ  tÃ¹y chá»n.
*   Khi viá»‡c táº¡o Ä‘á»‘i tÆ°á»£ng cáº§n nhiá»u bÆ°á»›c phá»©c táº¡p.
*   Khi báº¡n muá»‘n Ä‘á»‘i tÆ°á»£ng cuá»‘i cÃ¹ng lÃ  báº¥t biáº¿n (immutable) sau khi Ä‘Æ°á»£c táº¡o.

Váº­y lÃ  báº¡n Ä‘Ã£ hiá»ƒu vá» Builder rá»“i Ä‘Ã³! Giá» thÃ¬ Ä‘i 'xÃ¢y dá»±ng' nhá»¯ng Ä‘á»‘i tÆ°á»£ng phá»©c táº¡p cá»§a riÃªng báº¡n thÃ´i nÃ o!
       - NguyÃªn máº«u (Prototype)

Báº¡n Ä‘Ã£ bao giá» tá»± há»i lÃ m tháº¿ nÃ o Ä‘á»ƒ táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng má»›i mÃ  khÃ´ng cáº§n pháº£i "nhÃ o náº·n" chÃºng tá»« Ä‘áº§u má»—i láº§n chÆ°a?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang lÃ m bÃ¡nh quy nhÃ©! Báº¡n cÃ³ cáº§n pháº£i cháº¿ táº¡o má»™t khuÃ´n bÃ¡nh quy hoÃ n toÃ n má»›i cho má»—i chiáº¿c bÃ¡nh khÃ´ng? KhÃ´ng Ä‘á»i nÃ o! Báº¡n chá»‰ cáº§n dÃ¹ng *má»™t* khuÃ´n bÃ¡nh (Ä‘Ã³ chÃ­nh lÃ  "nguyÃªn máº«u" cá»§a báº¡n) Ä‘á»ƒ táº¡o ra tháº­t nhiá»u chiáº¿c bÃ¡nh quy giá»‘ng nhau. Tháº­t tiá»‡n lá»£i pháº£i khÃ´ng?

Hoáº·c nghÄ© Ä‘áº¿n viá»‡c nÃ y: báº¡n cÃ³ má»™t tÃ i liá»‡u ráº¥t quan trá»ng vÃ  cáº§n 10 báº£n sao. Báº¡n cÃ³ gÃµ láº¡i toÃ n bá»™ tÃ i liá»‡u Ä‘Ã³ 10 láº§n khÃ´ng? Tuyá»‡t Ä‘á»‘i khÃ´ng! Báº¡n chá»‰ cáº§n nháº¥n "Sao chÃ©p" vÃ  "DÃ¡n" (hoáº·c dÃ¹ng mÃ¡y photocopy!). TÃ i liá»‡u gá»‘c Ä‘Ã³ chÃ­nh lÃ  "nguyÃªn máº«u" cá»§a báº¡n.

Trong tháº¿ giá»›i code, Ä‘Ã´i khi viá»‡c táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng má»›i lÃ  má»™t "cÃ´ng viá»‡c lá»›n". NÃ³ cÃ³ thá»ƒ liÃªn quan Ä‘áº¿n ráº¥t nhiá»u bÆ°á»›c thiáº¿t láº­p phá»©c táº¡p, gá»i Ä‘áº¿n cÆ¡ sá»Ÿ dá»¯ liá»‡u, hoáº·c cÃ¡c phÃ©p tÃ­nh toÃ¡n ráº¯c rá»‘i. Náº¿u báº¡n cáº§n *má»™t Ä‘á»‘i tÆ°á»£ng khÃ¡c* y há»‡t nhÆ° váº­y, cháº³ng pháº£i sáº½ dá»… dÃ ng hÆ¡n náº¿u chá»‰... sao chÃ©p cÃ¡i Ä‘áº§u tiÃªn sao?

VÃ  Ä‘Ã³ chÃ­nh lÃ  lÃºc máº«u thiáº¿t káº¿ "NguyÃªn máº«u" (Prototype) xuáº¥t hiá»‡n Ä‘á»ƒ "giáº£i cá»©u"! Ã tÆ°á»Ÿng cá»‘t lÃµi lÃ  gÃ¬? Thay vÃ¬ táº¡o Ä‘á»‘i tÆ°á»£ng má»›i tá»« con sá»‘ 0, báº¡n chá»‰ cáº§n táº¡o má»™t báº£n sao (clone) cá»§a má»™t Ä‘á»‘i tÆ°á»£ng Ä‘Ã£ cÃ³ sáºµn.

NÃ³ hoáº¡t Ä‘á»™ng tháº¿ nÃ o nhá»‰?

1.  Báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng "máº«u" (gá»i lÃ  "nguyÃªn máº«u"). Äá»‘i tÆ°á»£ng nÃ y cÃ³ kháº£ nÄƒng tá»± sao chÃ©p chÃ­nh nÃ³.
2.  Khi báº¡n cáº§n má»™t Ä‘á»‘i tÆ°á»£ng má»›i, báº¡n chá»‰ cáº§n nÃ³i vá»›i "nguyÃªn máº«u": "NÃ y, lÃ m cho tÃ´i má»™t báº£n sao cá»§a báº¡n Ä‘i!"
3.  VÃ  *bÃ¹m*, "nguyÃªn máº«u" sáº½ tá»± nhÃ¢n báº£n vÃ  Ä‘Æ°a cho báº¡n má»™t Ä‘á»‘i tÆ°á»£ng má»›i, giá»‘ng há»‡t (hoáº·c gáº§n nhÆ° giá»‘ng há»‡t) báº£n gá»‘c.

Táº¡i sao "NguyÃªn máº«u" láº¡i tuyá»‡t vá»i Ä‘áº¿n váº­y?

*   NÃ³ giÃºp báº¡n trÃ¡nh xa nhá»¯ng Ä‘oáº¡n code phá»©c táº¡p Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng.
*   CÃ³ thá»ƒ nhanh hÆ¡n viá»‡c táº¡o Ä‘á»‘i tÆ°á»£ng tá»« Ä‘áº§u, Ä‘áº·c biá»‡t náº¿u quÃ¡ trÃ¬nh táº¡o Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ ráº¥t "náº·ng ná»".
*   Báº¡n khÃ´ng cáº§n pháº£i biáº¿t *chÃ­nh xÃ¡c* Ä‘á»‘i tÆ°á»£ng báº¡n Ä‘ang sao chÃ©p lÃ  loáº¡i gÃ¬, chá»‰ cáº§n biáº¿t nÃ³ cÃ³ thá»ƒ tá»± sao chÃ©p lÃ  Ä‘Æ°á»£c!

    2. **Máº«u Cáº¥u TrÃºc** (Structural Patterns)
Báº¡n cÃ³ muá»‘n biáº¿t cÃ¡ch 'ghÃ©p ná»‘i' cÃ¡c Ä‘á»‘i tÆ°á»£ng láº¡i vá»›i nhau Ä‘á»ƒ táº¡o thÃ nh má»™t thá»© gÃ¬ Ä‘Ã³ lá»›n hÆ¡n khÃ´ng?
VÃ¢ng, Ä‘Ã³ chÃ­nh lÃ  'chuyÃªn mÃ´n' cá»§a nhÃ³m máº«u nÃ y! ChÃºng giÃºp báº¡n tá»• chá»©c cÃ¡c Ä‘á»‘i tÆ°á»£ng sao cho chÃºng káº¿t há»£p láº¡i, táº¡o nÃªn má»™t 'cáº¥u trÃºc' máº¡nh máº½ vÃ  hiá»‡u quáº£ hÆ¡n.
       - NÃ y báº¡n! Báº¡n Ä‘Ã£ bao giá» gáº·p tÃ¬nh huá»‘ng 'oÃ¡i oÄƒm' nÃ y chÆ°a?

Báº¡n cÃ³ má»™t mÃ³n Ä‘á»“ cÃ´ng nghá»‡ *siÃªu xá»‹n*, nhÆ°ng nÃ³ láº¡i dÃ¹ng má»™t loáº¡i **Ä‘áº§u cáº¯m** (hay cá»•ng káº¿t ná»‘i) *ráº¥t riÃªng*.

VÃ  báº¡n muá»‘n káº¿t ná»‘i nÃ³ vÃ o má»™t á»• cáº¯m (hoáº·c má»™t thiáº¿t bá»‹ khÃ¡c) mÃ  cÃ¡i á»• cáº¯m Ä‘Ã³ láº¡i cÃ³ má»™t loáº¡i **lá»— cáº¯m** *hoÃ n toÃ n khÃ¡c biá»‡t*.

Ã”i khÃ´ng! ChÃºng khÃ´ng thá»ƒ nÃ o khá»›p vÃ o nhau Ä‘Æ°á»£c! Tháº¿ lÃ  báº¡n bá»‹ 'káº¹t' rá»“i!

LÃ m sao bÃ¢y giá»?!

Äá»«ng lo láº¯ng! ÄÃ¢y chÃ­nh lÃ  lÃºc **Adapter** (hay cÃ²n gá»i lÃ  'Bá»™ Ä‘iá»u há»£p') xuáº¥t hiá»‡n nhÆ° má»™t 'ngÆ°á»i hÃ¹ng' Ä‘á»ƒ giáº£i cá»©u tÃ¬nh hÃ¬nh!

HÃ£y hÃ¬nh dung Adapter giá»‘ng nhÆ° má»™t **'ngÆ°á»i phiÃªn dá»‹ch'** hoáº·c má»™t **'cáº§u ná»‘i tháº§n ká»³'** váº­y.

Nhiá»‡m vá»¥ chÃ­nh cá»§a nÃ³ lÃ  gÃ¬?
NÃ³ giÃºp hai thá»© vá»‘n dÄ© **khÃ´ng thá»ƒ lÃ m viá»‡c trá»±c tiáº¿p** vá»›i nhau (vÃ¬ chÃºng 'nÃ³i hai ngÃ´n ngá»¯ khÃ¡c nhau' hoáº·c cÃ³ 'hÃ¬nh dáº¡ng khÃ¡c nhau') giá» Ä‘Ã¢y láº¡i cÃ³ thá»ƒ **káº¿t ná»‘i vÃ  há»£p tÃ¡c** má»™t cÃ¡ch trÃ´i cháº£y.

Báº¡n cÃ³ nhá»› khi Ä‘i du lá»‹ch nÆ°á»›c ngoÃ i, báº¡n pháº£i dÃ¹ng má»™t cÃ¡i 'adapter' Ä‘á»ƒ cáº¯m sáº¡c Ä‘iá»‡n thoáº¡i hay laptop khÃ´ng?
PhÃ­ch cáº¯m cá»§a báº¡n khÃ¡c vá»›i á»• Ä‘iá»‡n á»Ÿ nÆ°á»›c Ä‘Ã³, Ä‘Ãºng khÃ´ng nÃ o?
CÃ¡i adapter Ä‘Ã³ sáº½ 'biáº¿n Ä‘á»•i' phÃ­ch cáº¯m cá»§a báº¡n, giÃºp nÃ³ 'vá»«a váº·n' vá»›i á»• Ä‘iá»‡n láº¡ kia.
VÃ  *tadaaa!* Äiá»‡n thoáº¡i cá»§a báº¡n láº¡i Ä‘Æ°á»£c sáº¡c Ä‘áº§y pin rá»“i!

Trong tháº¿ giá»›i láº­p trÃ¬nh cá»§a chÃºng ta cÅ©ng váº­y Ä‘Ã³!
ÄÃ´i khi, chÃºng ta cÃ³ hai pháº§n má»m, hoáº·c hai 'Ä‘á»‘i tÆ°á»£ng' (object) khÃ¡c nhau, mÃ  chÃºng láº¡i cÃ³ **cÃ¡ch giao tiáº¿p (interface)** khÃ´ng giá»‘ng nhau.
ChÃºng ta muá»‘n chÃºng cÃ³ thá»ƒ 'nÃ³i chuyá»‡n' vÃ  lÃ m viá»‡c cÃ¹ng nhau.
Tháº¿ lÃ  chÃºng ta sáº½ xÃ¢y dá»±ng má»™t **Adapter**.
CÃ¡i Adapter nÃ y sáº½ 'Ä‘á»©ng ra giá»¯a', 'Ä‘Ã³ng vai' nhÆ° má»™t trong hai bÃªn, vÃ  **'phiÃªn dá»‹ch'** cÃ¡c yÃªu cáº§u tá»« bÃªn nÃ y sang bÃªn kia.
NÃ³ giÃºp má»™t Ä‘á»‘i tÆ°á»£ng **'trÃ´ng giá»‘ng nhÆ°'** má»™t Ä‘á»‘i tÆ°á»£ng khÃ¡c mÃ  há»‡ thá»‘ng cá»§a báº¡n Ä‘ang mong Ä‘á»£i.
VÃ  tháº¿ lÃ , má»i thá»© láº¡i hoáº¡t Ä‘á»™ng 'ngon lÃ nh cÃ nh Ä‘Ã o'!
       - Báº¡n Ä‘Ã£ bao giá» gáº·p trÆ°á»ng há»£p mÃ  báº¡n muá»‘n thay Ä‘á»•i má»™t pháº§n cá»§a há»‡ thá»‘ng, nhÆ°ng láº¡i khÃ´ng muá»‘n nÃ³ lÃ m áº£nh hÆ°á»Ÿng Ä‘áº¿n má»™t pháº§n khÃ¡c chÆ°a?

Kiá»ƒu nhÆ° báº¡n cÃ³ má»™t cÃ¡i "Ã½ tÆ°á»Ÿng lá»›n" vá» cÃ¡ch má»i thá»© hoáº¡t Ä‘á»™ng (chÃºng ta gá»i lÃ  **abstraction**), nhÆ°ng láº¡i cÃ³ nhiá»u "cÃ¡ch thá»±c hiá»‡n" khÃ¡c nhau cho Ã½ tÆ°á»Ÿng Ä‘Ã³ (chÃºng ta gá»i lÃ  **implementation**).

VÃ  báº¡n muá»‘n chÃºng cÃ³ thá»ƒ tá»± do thay Ä‘á»•i, phÃ¡t triá»ƒn riÃªng ráº½ mÃ  khÃ´ng "dÃ­nh" vÃ o nhau.

Khi báº¡n muá»‘n "báº¯c má»™t cÃ¢y cáº§u" Ä‘á»ƒ káº¿t ná»‘i chÃºng, nhÆ°ng váº«n giá»¯ cho chÃºng Ä‘á»™c láº­p... thÃ¬ chÃºng ta cÃ³ má»™t "anh hÃ¹ng" thiáº¿t káº¿ tÃªn lÃ ...

**Máº«u Cáº§u Ná»‘i** (Bridge)!

Nghe tÃªn cÃ³ váº» "ngáº§u" Ä‘Ãºng khÃ´ng? NhÆ°ng Ã½ tÆ°á»Ÿng cá»§a nÃ³ thÃ¬ láº¡i siÃªu Ä‘Æ¡n giáº£n vÃ  há»¯u Ã­ch khi báº¡n cáº§n sá»± linh hoáº¡t Ä‘Ã³!
       - NÃ y báº¡n, hÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang lÃ m viá»‡c vá»›i cÃ¡c táº­p tin vÃ  thÆ° má»¥c trÃªn mÃ¡y tÃ­nh cá»§a mÃ¬nh nhÃ©!

*   Má»™t **táº­p tin** (file) lÃ  má»™t thá»© Ä‘Æ¡n láº», Ä‘Ãºng khÃ´ng? Kiá»ƒu nhÆ° má»™t bá»©c áº£nh hay má»™t tÃ i liá»‡u Word váº­y.
*   CÃ²n má»™t **thÆ° má»¥c** (folder) thÃ¬ sao? NÃ³ cÃ³ thá»ƒ chá»©a cÃ¡c táº­p tin VÃ€ cáº£ cÃ¡c thÆ° má»¥c con khÃ¡c ná»¯a!

Äiá»u thÃº vá»‹ lÃ , dÃ¹ báº¡n muá»‘n "xÃ³a" má»™t táº­p tin hay "xÃ³a" má»™t thÆ° má»¥c (cÃ¹ng táº¥t cáº£ nhá»¯ng gÃ¬ bÃªn trong nÃ³), báº¡n váº«n dÃ¹ng cÃ¹ng má»™t hÃ nh Ä‘á»™ng "xÃ³a". Báº¡n khÃ´ng cáº§n pháº£i suy nghÄ© "Ã€, Ä‘Ã¢y lÃ  táº­p tin, mÃ¬nh pháº£i xÃ³a tháº¿ nÃ y. CÃ²n Ä‘Ã¢y lÃ  thÆ° má»¥c, mÃ¬nh pháº£i xÃ³a tháº¿ khÃ¡c."

Váº­y thÃ¬, lÃ m tháº¿ nÃ o Ä‘á»ƒ chÃºng ta cÃ³ thá»ƒ xá»­ lÃ½ cáº£ "thá»© Ä‘Æ¡n láº»" (nhÆ° táº­p tin) vÃ  "nhÃ³m cÃ¡c thá»©" (nhÆ° thÆ° má»¥c) theo cÃ¹ng má»™t cÃ¡ch trong láº­p trÃ¬nh?

ÄÃ¢y chÃ­nh lÃ  lÃºc máº«u thiáº¿t káº¿ **Composite** xuáº¥t hiá»‡n Ä‘á»ƒ giáº£i cá»©u chÃºng ta Ä‘Ã³!

**Composite** giÃºp báº¡n xÃ¢y dá»±ng má»™t cáº¥u trÃºc "cÃ¢y" (tree) nÆ¡i báº¡n cÃ³ thá»ƒ coi má»™t Ä‘á»‘i tÆ°á»£ng Ä‘Æ¡n láº» vÃ  má»™t nhÃ³m cÃ¡c Ä‘á»‘i tÆ°á»£ng nhÆ° nhau. NÃ³ cho phÃ©p báº¡n "gom" cÃ¡c Ä‘á»‘i tÆ°á»£ng vÃ o thÃ nh má»™t cáº¥u trÃºc phÃ¢n cáº¥p, giá»‘ng nhÆ° cÃ¢y thÆ° má»¥c váº­y.

NÃ³ cÃ³ ba pháº§n chÃ­nh, giá»‘ng nhÆ° má»™t gia Ä‘Ã¬nh nhá» váº­y:

*   **Component (ThÃ nh pháº§n chung)**:
    *   ÄÃ¢y lÃ  "Ã´ng bÃ " cá»§a cáº£ gia Ä‘Ã¬nh.
    *   NÃ³ Ä‘á»‹nh nghÄ©a cÃ¡c hoáº¡t Ä‘á»™ng mÃ  cáº£ "con" (Ä‘á»‘i tÆ°á»£ng Ä‘Æ¡n láº») vÃ  "chÃ¡u" (nhÃ³m Ä‘á»‘i tÆ°á»£ng) Ä‘á»u pháº£i cÃ³.
    *   VÃ­ dá»¥: má»™t giao diá»‡n `Node` vá»›i phÆ°Æ¡ng thá»©c `display()` (hiá»ƒn thá»‹) hoáº·c `getSize()` (láº¥y kÃ­ch thÆ°á»›c).
    *   Má»i thá»© trong cáº¥u trÃºc cÃ¢y cá»§a báº¡n Ä‘á»u lÃ  má»™t `Component`.

*   **Leaf (LÃ¡)**:
    *   ÄÃ¢y lÃ  "Ä‘á»©a con" Ä‘Æ¡n láº», khÃ´ng cÃ³ con chÃ¡u gÃ¬ ná»¯a. NÃ³ lÃ  thÃ nh pháº§n táº­n cÃ¹ng cá»§a cÃ¢y.
    *   NÃ³ thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong `Component`.
    *   VÃ­ dá»¥: `File` (Táº­p tin) - nÃ³ khÃ´ng chá»©a gÃ¬ bÃªn trong ná»¯a, nÃ³ chá»‰ cÃ³ kÃ­ch thÆ°á»›c riÃªng cá»§a nÃ³ thÃ´i.

*   **Composite (Tá»•ng há»£p)**:
    *   ÄÃ¢y lÃ  "bá»‘ máº¹" hoáº·c "ngÆ°á»i quáº£n lÃ½".
    *   NÃ³ cÃ³ thá»ƒ chá»©a cÃ¡c `Component` khÃ¡c (cÃ³ thá»ƒ lÃ  `Leaf` hoáº·c cÃ¡c `Composite` khÃ¡c!).
    *   NÃ³ cÅ©ng thá»±c hiá»‡n cÃ¡c hoáº¡t Ä‘á»™ng tá»« `Component`, nhÆ°ng thÆ°á»ng lÃ  báº±ng cÃ¡ch "nhá»" cÃ¡c thÃ nh pháº§n con cá»§a nÃ³ lÃ m viá»‡c Ä‘Ã³.
    *   NÃ³ cÃ²n cÃ³ thÃªm cÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ thÃªm (`add()`) hoáº·c bá»›t (`remove()`) cÃ¡c thÃ nh pháº§n con ná»¯a.
    *   VÃ­ dá»¥: `Folder` (ThÆ° má»¥c) - nÃ³ cÃ³ thá»ƒ chá»©a nhiá»u `File` vÃ  `Folder` khÃ¡c. Khi báº¡n há»i `Folder` vá» `getSize()`, nÃ³ sáº½ Ä‘i há»i tá»«ng thÃ nh pháº§n con cá»§a nÃ³ vÃ  cá»™ng tá»•ng láº¡i.

**Ã tÆ°á»Ÿng chÃ­nh lÃ  gÃ¬?**

Khi báº¡n muá»‘n lÃ m gÃ¬ Ä‘Ã³ vá»›i má»™t **Composite**, nÃ³ sáº½ tá»± Ä‘á»™ng "lan truyá»n" yÃªu cáº§u Ä‘Ã³ xuá»‘ng táº¥t cáº£ cÃ¡c thÃ nh pháº§n con cá»§a nÃ³.

VÃ­ dá»¥, náº¿u báº¡n gá»i `getSize()` trÃªn má»™t thÆ° má»¥c (`Folder`), nÃ³ sáº½ há»i tá»«ng táº­p tin (`File`) vÃ  thÆ° má»¥c con (`Folder`) bÃªn trong nÃ³ `getSize()` vÃ  cá»™ng tá»•ng láº¡i Ä‘á»ƒ Ä‘Æ°a ra kÃ­ch thÆ°á»›c tá»•ng cá»§a cáº£ thÆ° má»¥c lá»›n.

**Táº¡i sao nÃ³ láº¡i tuyá»‡t vá»i?**

*   **Dá»… dÃ ng xá»­ lÃ½**: Báº¡n khÃ´ng cáº§n pháº£i viáº¿t code khÃ¡c nhau cho Ä‘á»‘i tÆ°á»£ng Ä‘Æ¡n láº» vÃ  nhÃ³m Ä‘á»‘i tÆ°á»£ng. Cá»© gá»i cÃ¹ng má»™t phÆ°Æ¡ng thá»©c trÃªn `Component` lÃ  Ä‘Æ°á»£c! Code cá»§a báº¡n sáº½ Ä‘Æ¡n giáº£n hÆ¡n ráº¥t nhiá»u.
*   **Má»Ÿ rá»™ng dá»… dÃ ng**: Muá»‘n thÃªm má»™t loáº¡i thÃ nh pháº§n má»›i? Cá»© táº¡o má»™t `Leaf` hoáº·c `Composite` má»›i, miá»…n lÃ  nÃ³ tuÃ¢n theo giao diá»‡n `Component`.
*   **Cáº¥u trÃºc rÃµ rÃ ng**: GiÃºp báº¡n tá»• chá»©c cÃ¡c Ä‘á»‘i tÆ°á»£ng thÃ nh má»™t há»‡ thá»‘ng phÃ¢n cáº¥p dá»… hiá»ƒu vÃ  dá»… quáº£n lÃ½.

Váº­y Ä‘Ã³, **Composite** giÃºp báº¡n xÃ¢y dá»±ng nhá»¯ng cáº¥u trÃºc "cÃ¢y" phá»©c táº¡p nhÆ°ng láº¡i cá»±c ká»³ dá»… quáº£n lÃ½ vÃ  sá»­ dá»¥ng!
       - **Máº«u Decorator**

Báº¡n cÃ³ bao giá» muá»‘n thÃªm cÃ¡c tÃ­nh nÄƒng nhá» xinh vÃ o má»™t Ä‘á»‘i tÆ°á»£ng Ä‘Ã£ cÃ³ mÃ  khÃ´ng muá»‘n lÃ m lá»™n xá»™n lá»›p gá»‘c cá»§a nÃ³ khÃ´ng? Hay báº¡n muá»‘n thÃªm tÃ­nh nÄƒng Ä‘Ã³ má»™t cÃ¡ch linh hoáº¡t, lÃºc chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y áº¥y?

Tháº¿ thÃ¬ lÃ m sao Ä‘Ã¢y?

*   **CÃ¡ch 1: Káº¿ thá»«a (subclassing) cho tá»«ng tÃ­nh nÄƒng?**
    *   Náº¿u báº¡n cÃ³ má»™t loáº¡i cÃ  phÃª, vÃ  muá»‘n thÃªm sá»¯a, Ä‘Æ°á»ng, kem tÆ°Æ¡i...
    *   Báº¡n sáº½ pháº£i táº¡o ra cÃ¡c lá»›p nhÆ° `CÃ PhÃªSá»¯a`, `CÃ PhÃªÄÆ°á»ng`, `CÃ PhÃªSá»¯aÄÆ°á»ng`, `CÃ PhÃªSá»¯aÄÆ°á»ngKemTÆ°Æ¡i`... Ã”i trá»i Æ¡i, sá»‘ lÆ°á»£ng lá»›p sáº½ "bÃ¹ng ná»•" máº¥t!

*   **CÃ¡ch 2: ThÃªm táº¥t cáº£ cÃ¡c phÆ°Æ¡ng thá»©c vÃ o lá»›p gá»‘c?**
    *   Lá»›p `CÃ PhÃª` sáº½ cÃ³ cÃ¡c phÆ°Æ¡ng thá»©c nhÆ° `thÃªmSá»¯a()`, `thÃªmÄÆ°á»ng()`, `thÃªmKemTÆ°Æ¡i()`...
    *   Lá»›p `CÃ PhÃª` sáº½ trá»Ÿ nÃªn phÃ¬nh to, vÃ  nÃ³ sáº½ pháº£i biáº¿t quÃ¡ nhiá»u thá»© khÃ´ng pháº£i lÃ  "trÃ¡ch nhiá»‡m chÃ­nh" cá»§a nÃ³.

Cáº£ hai cÃ¡ch nÃ y Ä‘á»u cÃ³ váº¥n Ä‘á»! ChÃºng ta cáº§n má»™t giáº£i phÃ¡p "thanh lá»‹ch" hÆ¡n nhiá»u.

**Ã€ hÃ¡! Máº«u Decorator ra Ä‘á»i Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y!**

Ã tÆ°á»Ÿng chÃ­nh lÃ : **Bá»c Ä‘á»‘i tÆ°á»£ng gá»‘c báº±ng má»™t Ä‘á»‘i tÆ°á»£ng khÃ¡c (gá»i lÃ  decorator) Ä‘á»ƒ thÃªm cÃ¡c tÃ­nh nÄƒng má»›i mÃ  khÃ´ng thay Ä‘á»•i cáº¥u trÃºc cá»§a lá»›p gá»‘c.**

HÃ£y hÃ¬nh dung tháº¿ nÃ y: Báº¡n cÃ³ má»™t tÃ¡ch cÃ  phÃª cÆ¡ báº£n. Khi báº¡n muá»‘n thÃªm sá»¯a, báº¡n khÃ´ng "thay Ä‘á»•i" cÃ  phÃª, mÃ  báº¡n "Ä‘á»• sá»¯a vÃ o" tÃ¡ch cÃ  phÃª Ä‘Ã³. Sá»¯a á»Ÿ Ä‘Ã¢y chÃ­nh lÃ  má»™t "bá»™ trang trÃ­" (decorator)!

Má»™t Ä‘iá»ƒm cá»±c ká»³ quan trá»ng cá»§a Decorator lÃ :

*   NÃ³ **lÃ  má»™t** loáº¡i cá»§a Ä‘á»‘i tÆ°á»£ng mÃ  nÃ³ trang trÃ­ (nÃ³ triá»ƒn khai cÃ¹ng má»™t giao diá»‡n).
*   NÃ³ **cÃ³ má»™t** tham chiáº¿u Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng mÃ  nÃ³ trang trÃ­.

Nghe cÃ³ váº» hÆ¡i "xoáº¯n nÃ£o" Ä‘Ãºng khÃ´ng? CÃ¹ng xem cÃ¡c thÃ nh pháº§n chÃ­nh nhÃ©!

**CÃ¡c thÃ nh pháº§n chÃ­nh cá»§a Máº«u Decorator:**

1.  **Component (ThÃ nh pháº§n):**
    *   ÄÃ¢y lÃ  má»™t giao diá»‡n (interface) hoáº·c lá»›p trá»«u tÆ°á»£ng (abstract class) mÃ  cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng cÆ¡ báº£n vÃ  cÃ¡c Ä‘á»‘i tÆ°á»£ng "trang trÃ­" Ä‘á»u pháº£i triá»ƒn khai.
    *   NÃ³ Ä‘á»‹nh nghÄ©a cÃ¡c hÃ nh vi mÃ  táº¥t cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng (dÃ¹ Ä‘Ã£ Ä‘Æ°á»£c trang trÃ­ hay chÆ°a) Ä‘á»u cÃ³.
    *   *VÃ­ dá»¥:* Giao diá»‡n `Äá»“Uá»‘ng` vá»›i cÃ¡c phÆ°Æ¡ng thá»©c `láº¥yMÃ´Táº£()` vÃ  `tÃ­nhGiÃ¡()`.

    ```java
    public interface Äá»“Uá»‘ng {
        String láº¥yMÃ´Táº£(); // MÃ´ táº£ vá» Ä‘á»“ uá»‘ng
        double tÃ­nhGiÃ¡(); // GiÃ¡ cá»§a Ä‘á»“ uá»‘ng
    }
    ```

2.  **Concrete Component (ThÃ nh pháº§n cá»¥ thá»ƒ):**
    *   ÄÃ¢y lÃ  cÃ¡c Ä‘á»‘i tÆ°á»£ng cÆ¡ báº£n, "nguyÃªn báº£n", khÃ´ng há» Ä‘Æ°á»£c trang trÃ­.
    *   ChÃºng triá»ƒn khai giao diá»‡n `Component`.
    *   *VÃ­ dá»¥:* `CÃ PhÃªÄen`, `Espresso` (cÃ¡c loáº¡i cÃ  phÃª cÆ¡ báº£n).

    ```java
    public class CÃ PhÃªÄen implements Äá»“Uá»‘ng {
        @Override
        public String láº¥yMÃ´Táº£() {
            return "CÃ  phÃª Ä‘en";
        }

        @Override
        public double tÃ­nhGiÃ¡() {
            return 25.0; // 25k VNÄ
        }
    }

    public class Espresso implements Äá»“Uá»‘ng {
        @Override
        public String láº¥yMÃ´Táº£() {
            return "Espresso";
        }

        @Override
        public double tÃ­nhGiÃ¡() {
            return 30.0; // 30k VNÄ
        }
    }
    ```

3.  **Decorator (Bá»™ trang trÃ­) - Lá»›p trá»«u tÆ°á»£ng:**
    *   ÄÃ¢y lÃ  lá»›p trá»«u tÆ°á»£ng cho táº¥t cáº£ cÃ¡c "bá»™ trang trÃ­" cá»¥ thá»ƒ.
    *   Äiá»u quan trá»ng lÃ  nÃ³ cÅ©ng triá»ƒn khai giao diá»‡n `Component` (giÃºp nÃ³ cÃ³ thá»ƒ Ä‘Æ°á»£c dÃ¹ng thay tháº¿ cho `Component` gá»‘c).
    *   NÃ³ *giá»¯ má»™t tham chiáº¿u* Ä‘áº¿n má»™t Ä‘á»‘i tÆ°á»£ng `Component` khÃ¡c. ÄÃ¢y lÃ  cÃ¡ch nÃ³ "bá»c" Ä‘á»‘i tÆ°á»£ng.
    *   *VÃ­ dá»¥:* Lá»›p trá»«u tÆ°á»£ng `Cháº¥tThÃªmDecorator`.

    ```java
    public abstract class Cháº¥tThÃªmDecorator implements Äá»“Uá»‘ng {
        protected Äá»“Uá»‘ng Ä‘á»“Uá»‘ngÄÆ°á»£cBá»c; // Tham chiáº¿u Ä‘áº¿n Ä‘á»“ uá»‘ng mÃ  nÃ³ Ä‘ang bá»c

        public Cháº¥tThÃªmDecorator(Äá»“Uá»‘ng Ä‘á»“Uá»‘ng) {
            this.Ä‘á»“Uá»‘ngÄÆ°á»£cBá»c = Ä‘á»“Uá»‘ng;
        }

        // CÃ¡c phÆ°Æ¡ng thá»©c nÃ y sáº½ Ä‘Æ°á»£c triá»ƒn khai bá»Ÿi cÃ¡c Concrete Decorator
        // hoáº·c gá»i phÆ°Æ¡ng thá»©c cá»§a Ä‘á»“Uá»‘ngÄÆ°á»£cBá»c
        @Override
        public abstract String láº¥yMÃ´Táº£();

        // PhÆ°Æ¡ng thá»©c tÃ­nh giÃ¡ thÆ°á»ng sáº½ gá»i Ä‘á»“Uá»‘ngÄÆ°á»£cBá»c.tÃ­nhGiÃ¡() vÃ  thÃªm giÃ¡ cá»§a chÃ­nh nÃ³
        @Override
        public abstract double tÃ­nhGiÃ¡();
    }
    ```

4.  **Concrete Decorator (Bá»™ trang trÃ­ cá»¥ thá»ƒ):**
    *   ÄÃ¢y lÃ  cÃ¡c lá»›p "bá»c" thá»±c sá»±, má»—i lá»›p thÃªm má»™t tÃ­nh nÄƒng cá»¥ thá»ƒ.
    *   ChÃºng káº¿ thá»«a tá»« lá»›p `Decorator` trá»«u tÆ°á»£ng.
    *   ChÃºng triá»ƒn khai cÃ¡c phÆ°Æ¡ng thá»©c cá»§a `Component` báº±ng cÃ¡ch gá»i phÆ°Æ¡ng thá»©c cá»§a Ä‘á»‘i tÆ°á»£ng `Component` mÃ  chÃºng Ä‘ang bá»c, vÃ  *thÃªm vÃ o* hÃ nh vi riÃªng cá»§a chÃºng.
    *   *VÃ­ dá»¥:* `Sá»¯a`, `Socola`, `KemTÆ°Æ¡i`.

    ```java
    public class Sá»¯a extends Cháº¥tThÃªmDecorator {
        public Sá»¯a(Äá»“Uá»‘ng Ä‘á»“Uá»‘ng) {
            super(Ä‘á»“Uá»‘ng);
        }

        @Override
        public String láº¥yMÃ´Táº£() {
            return Ä‘á»“Uá»‘ngÄÆ°á»£cBá»c.láº¥yMÃ´Táº£() + ", Sá»¯a";
        }

        @Override
        public double tÃ­nhGiÃ¡() {
            return Ä‘á»“Uá»‘ngÄÆ°á»£cBá»c.tÃ­nhGiÃ¡() + 5.0; // ThÃªm 5k cho sá»¯a
        }
    }

    public class Socola extends Cháº¥tThÃªmDecorator {
        public Socola(Äá»“Uá»‘ng Ä‘á»“Uá»‘ng) {
            super(Ä‘á»“Uá»‘ng);
        }

        @Override
        public String láº¥yMÃ´Táº£() {
            return Ä‘á»“Uá»‘ngÄÆ°á»£cBá»c.láº¥yMÃ´Táº£() + ", Socola";
        }

        @Override
        public double tÃ­nhGiÃ¡() {
            return Ä‘á»“Uá»‘ngÄÆ°á»£cBá»c.tÃ­nhGiÃ¡() + 7.0; // ThÃªm 7k cho socola
        }
    }

    public class KemTÆ°Æ¡i extends Cháº¥tThÃªmDecorator {
        public KemTÆ°Æ¡i(Äá»“Uá»‘ng Ä‘á»“Uá»‘ng) {
            super(Ä‘á»“Uá»‘ng);
        }

        @Override
        public String láº¥yMÃ´Táº£() {
            return Ä‘á»“Uá»‘ngÄÆ°á»£cBá»c.láº¥yMÃ´Táº£() + ", Kem tÆ°Æ¡i";
        }

        @Override
        public double tÃ­nhGiÃ¡() {
            return Ä‘á»“Uá»‘ngÄÆ°á»£cBá»c.tÃ­nhGiÃ¡() + 10.0; // ThÃªm 10k cho kem tÆ°Æ¡i
        }
    }
    ```

**NÃ³ hoáº¡t Ä‘á»™ng tháº¿ nÃ o trong thá»±c táº¿? CÃ¹ng xem vÃ­ dá»¥!**

Giá» thÃ¬ báº¡n cÃ³ thá»ƒ táº¡o ra cÃ¡c loáº¡i Ä‘á»“ uá»‘ng phá»©c táº¡p má»™t cÃ¡ch "chá»“ng cháº¥t" (stackable) mÃ  khÃ´ng cáº§n táº¡o ra hÃ ng tÃ¡ lá»›p con!

```java
public class QuÃ¡nCÃ PhÃª {
    public static void main(String[] args) {
        // Má»™t cá»‘c cÃ  phÃª Ä‘en nguyÃªn báº£n
        Äá»“Uá»‘ng cÃ PhÃª1 = new CÃ PhÃªÄen();
        System.out.println(cÃ PhÃª1.láº¥yMÃ´Táº£() + " cÃ³ giÃ¡ " + cÃ PhÃª1.tÃ­nhGiÃ¡() + " VNÄ");
        // Káº¿t quáº£: CÃ  phÃª Ä‘en cÃ³ giÃ¡ 25.0 VNÄ

        // Má»™t cá»‘c Espresso vá»›i Sá»¯a vÃ  Socola
        Äá»“Uá»‘ng cÃ PhÃª2 = new Espresso(); // Báº¯t Ä‘áº§u vá»›i Espresso
        cÃ PhÃª2 = new Sá»¯a(cÃ PhÃª2);     // Bá»c nÃ³ báº±ng Sá»¯a
        cÃ PhÃª2 = new Socola(cÃ PhÃª2);   // Bá»c tiáº¿p báº±ng Socola
        System.out.println(cÃ PhÃª2.láº¥yMÃ´Táº£() + " cÃ³ giÃ¡ " + cÃ PhÃª2.tÃ­nhGiÃ¡() + " VNÄ");
        // Káº¿t quáº£: Espresso, Sá»¯a, Socola cÃ³ giÃ¡ 42.0 VNÄ (30 + 5 + 7)

        // Má»™t cá»‘c CÃ  phÃª Ä‘en vá»›i Socola vÃ  Kem tÆ°Æ¡i
        Äá»“Uá»‘ng cÃ PhÃª3 = new CÃ PhÃªÄen(); // Báº¯t Ä‘áº§u vá»›i CÃ  phÃª Ä‘en
        cÃ PhÃª3 = new Socola(cÃ PhÃª3);    // Bá»c nÃ³ báº±ng Socola
        cÃ PhÃª3 = new KemTÆ°Æ¡i(cÃ PhÃª3);   // Bá»c tiáº¿p báº±ng Kem tÆ°Æ¡i
        System.out.println(cÃ PhÃª3.láº¥yMÃ´Táº£() + " cÃ³ giÃ¡ " + cÃ PhÃª3.tÃ­nhGiÃ¡() + " VNÄ");
        // Káº¿t quáº£: CÃ  phÃª Ä‘en, Socola, Kem tÆ°Æ¡i cÃ³ giÃ¡ 42.0 VNÄ (25 + 7 + 10)
    }
}
```

Má»—i khi báº¡n gá»i `láº¥yMÃ´Táº£()` hoáº·c `tÃ­nhGiÃ¡()` trÃªn Ä‘á»‘i tÆ°á»£ng `cÃ PhÃª2` (hoáº·c `cÃ PhÃª3`), nÃ³ sáº½ gá»i phÆ°Æ¡ng thá»©c cá»§a decorator bÃªn ngoÃ i cÃ¹ng. Decorator Ä‘Ã³ láº¡i gá»i phÆ°Æ¡ng thá»©c cá»§a Ä‘á»‘i tÆ°á»£ng mÃ  nÃ³ Ä‘ang bá»c, vÃ  cá»© tháº¿ cho Ä‘áº¿n khi Ä‘áº¿n Ä‘Æ°á»£c Ä‘á»‘i tÆ°á»£ng `Component` gá»‘c. Sau Ä‘Ã³, káº¿t quáº£ sáº½ Ä‘Æ°á»£c "tráº£ vá»" ngÆ°á»£c láº¡i, má»—i decorator thÃªm pháº§n cá»§a nÃ³ vÃ o.

**Táº¡i sao láº¡i dÃ¹ng Máº«u Decorator?**

*   **Linh hoáº¡t hÆ¡n nhiá»u:** Báº¡n cÃ³ thá»ƒ thÃªm cÃ¡c tÃ­nh nÄƒng má»›i vÃ o Ä‘á»‘i tÆ°á»£ng má»™t cÃ¡ch Ä‘á»™ng, lÃºc chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y.
*   **TrÃ¡nh "bÃ¹ng ná»• lá»›p con":** KhÃ´ng cáº§n táº¡o ra hÃ ng ngÃ n lá»›p con cho má»i sá»± káº¿t há»£p tÃ­nh nÄƒng.
*   **TuÃ¢n thá»§ NguyÃªn táº¯c TrÃ¡ch nhiá»‡m ÄÆ¡n láº» (Single Responsibility Principle):** Má»—i decorator chá»‰ lo má»™t nhiá»‡m vá»¥ duy nháº¥t (thÃªm sá»¯a, thÃªm socola...). Lá»›p cÆ¡ sá»Ÿ (cÃ  phÃª Ä‘en, espresso) chá»‰ lo nhiá»‡m vá»¥ cá»§a nÃ³.
*   **Dá»… báº£o trÃ¬ vÃ  má»Ÿ rá»™ng:** Dá»… dÃ ng thÃªm cÃ¡c decorator má»›i mÃ  khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n code hiá»‡n cÃ³.

**NghÄ© thÃªm má»™t chÃºt...**

*   Decorator cÃ³ thá»ƒ dáº«n Ä‘áº¿n viá»‡c táº¡o ra nhiá»u Ä‘á»‘i tÆ°á»£ng nhá».
*   Thá»© tá»± cá»§a cÃ¡c decorator cÃ³ quan trá»ng khÃ´ng? (VÃ­ dá»¥: "Sá»¯a rá»“i Socola" cÃ³ khÃ¡c "Socola rá»“i Sá»¯a" khÃ´ng?) Trong vÃ­ dá»¥ cÃ  phÃª nÃ y thÃ¬ khÃ´ng, nhÆ°ng trong cÃ¡c trÆ°á»ng há»£p khÃ¡c thÃ¬ cÃ³ thá»ƒ!

Máº«u Decorator lÃ  má»™t cÃ´ng cá»¥ cá»±c ká»³ máº¡nh máº½ Ä‘á»ƒ thÃªm chá»©c nÄƒng má»™t cÃ¡ch linh hoáº¡t mÃ  váº«n giá»¯ cho code cá»§a báº¡n gá»n gÃ ng vÃ  dá»… quáº£n lÃ½!
       - Báº¡n Ä‘Ã£ bao giá» cáº£m tháº¥y choÃ¡ng vÃ¡ng vÃ¬ cÃ³ quÃ¡ nhiá»u nÃºt báº¥m, quÃ¡ nhiá»u bÆ°á»›c pháº£i lÃ m Ä‘á»ƒ thá»±c hiá»‡n má»™t viá»‡c Ä‘Æ¡n giáº£n chÆ°a? Hay pháº£i lÃ m viá»‡c vá»›i má»™t há»‡ thá»‘ng cÃ³ quÃ¡ nhiá»u lá»›p (class) vÃ  phÆ°Æ¡ng thá»©c (method) phá»©c táº¡p?

TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©: Báº¡n muá»‘n xem phim á»Ÿ nhÃ . Báº¡n pháº£i báº­t TV lÃªn, sau Ä‘Ã³ báº­t há»‡ thá»‘ng Ã¢m thanh, rá»“i báº­t Ä‘áº§u Ä‘Ä©a Blu-ray, chá»n Ä‘Ãºng cá»•ng input trÃªn TV, chá»‰nh Ã¢m lÆ°á»£ng, vÃ  cuá»‘i cÃ¹ng lÃ  báº­t phim. Ã”i trá»i, bao nhiÃªu bÆ°á»›c!

Sáº½ tháº¿ nÃ o náº¿u cÃ³ Má»˜T cÃ¡i nÃºt duy nháº¥t lÃ m táº¥t cáº£ nhá»¯ng viá»‡c Ä‘Ã³ cho báº¡n? Báº¡n chá»‰ cáº§n báº¥m "Xem phim", vÃ  má»i thá»© tá»± Ä‘á»™ng Ä‘Æ°á»£c thiáº¿t láº­p?

ÄÃ³ chÃ­nh lÃ  lÃºc máº«u thiáº¿t káº¿ **Facade** (phÃ¡t Ã¢m lÃ  /fÉ™ËˆsÉ‘Ëd/) xuáº¥t hiá»‡n Ä‘á»ƒ "giáº£i cá»©u" báº¡n!

### Facade lÃ  gÃ¬?

*   **Facade** cung cáº¥p má»™t giao diá»‡n (interface) **Ä‘Æ¡n giáº£n**, **thá»‘ng nháº¥t** cho má»™t há»‡ thá»‘ng con (subsystem) phá»©c táº¡p.
*   NÃ³ giá»‘ng nhÆ° má»™t "ngÆ°á»i quáº£n gia" thÃ´ng minh, Ä‘á»©ng giá»¯a báº¡n vÃ  toÃ n bá»™ sá»± phá»©c táº¡p bÃªn trong. Báº¡n chá»‰ viá»‡c nÃ³i vá»›i ngÆ°á»i quáº£n gia báº¡n muá»‘n gÃ¬, vÃ  anh ta sáº½ lo liá»‡u má»i thá»©.

### NÃ³ hoáº¡t Ä‘á»™ng tháº¿ nÃ o?

HÃ£y quay láº¡i vÃ­ dá»¥ há»‡ thá»‘ng ráº¡p hÃ¡t táº¡i gia cá»§a chÃºng ta:

1.  **CÃ¡c thÃ nh pháº§n phá»©c táº¡p (Subsystem Classes):** Báº¡n cÃ³ cÃ¡c lá»›p nhÆ° `TV`, `SoundSystem` (há»‡ thá»‘ng Ã¢m thanh), `BluRayPlayer` (Ä‘áº§u Ä‘Ä©a Blu-ray). Má»—i lá»›p nÃ y cÃ³ ráº¥t nhiá»u phÆ°Æ¡ng thá»©c riÃªng Ä‘á»ƒ Ä‘iá»u khiá»ƒn.
2.  **Lá»›p Facade (Facade Class):** Báº¡n táº¡o ra má»™t lá»›p `HomeTheaterFacade`. Lá»›p nÃ y sáº½ chá»©a tham chiáº¿u Ä‘áº¿n táº¥t cáº£ cÃ¡c thÃ nh pháº§n phá»©c táº¡p kia.
3.  **Giao diá»‡n Ä‘Æ¡n giáº£n:** Lá»›p `HomeTheaterFacade` sáº½ cÃ³ cÃ¡c phÆ°Æ¡ng thá»©c Ä‘Æ¡n giáº£n nhÆ° `watchMovie()`, `endMovie()`.
4.  **áº¨n Ä‘i sá»± phá»©c táº¡p:** Khi báº¡n gá»i `homeTheater.watchMovie()`, lá»›p `HomeTheaterFacade` sáº½ tá»± Ä‘á»™ng gá»i cÃ¡c phÆ°Æ¡ng thá»©c phÃ¹ há»£p cá»§a `TV`, `SoundSystem`, `BluRayPlayer` theo Ä‘Ãºng thá»© tá»±. Báº¡n khÃ´ng cáº§n biáº¿t chi tiáº¿t!

```java
// CÃ¡c lá»›p con phá»©c táº¡p (Subsystem Classes)
class TV {
    void turnOn() { System.out.println("TV Ä‘ang báº­t."); }
    void setInput(String input) { System.out.println("TV chuyá»ƒn sang cá»•ng " + input); }
    void turnOff() { System.out.println("TV Ä‘ang táº¯t."); }
}

class SoundSystem {
    void turnOn() { System.out.println("Há»‡ thá»‘ng Ã¢m thanh Ä‘ang báº­t."); }
    void setVolume(int volume) { System.out.println("Ã‚m lÆ°á»£ng: " + volume); }
    void turnOff() { System.out.println("Há»‡ thá»‘ng Ã¢m thanh Ä‘ang táº¯t."); }
}

class BluRayPlayer {
    void turnOn() { System.out.println("Äáº§u Ä‘Ä©a Blu-ray Ä‘ang báº­t."); }
    void playMovie(String movie) { System.out.println("Äang phÃ¡t phim: " + movie); }
    void turnOff() { System.out.println("Äáº§u Ä‘Ä©a Blu-ray Ä‘ang táº¯t."); }
}

// Lá»›p Facade (HomeTheaterFacade)
class HomeTheaterFacade {
    private TV tv;
    private SoundSystem soundSystem;
    private BluRayPlayer bluRayPlayer;

    public HomeTheaterFacade(TV tv, SoundSystem soundSystem, BluRayPlayer bluRayPlayer) {
        this.tv = tv;
        this.soundSystem = soundSystem;
        this.bluRayPlayer = bluRayPlayer;
    }

    public void watchMovie(String movie) {
        System.out.println("\nChuáº©n bá»‹ xem phim...");
        tv.turnOn();
        tv.setInput("HDMI1");
        soundSystem.turnOn();
        soundSystem.setVolume(10);
        bluRayPlayer.turnOn();
        bluRayPlayer.playMovie(movie);
    }

    public void endMovie() {
        System.out.println("\nKáº¿t thÃºc phim...");
        bluRayPlayer.turnOff();
        soundSystem.turnOff();
        tv.turnOff();
    }
}

// MÃ£ Client (ngÆ°á»i dÃ¹ng há»‡ thá»‘ng)
public class Client {
    public static void main(String[] args) {
        TV tv = new TV();
        SoundSystem soundSystem = new SoundSystem();
        BluRayPlayer bluRayPlayer = new BluRayPlayer();

        // Táº¡o Facade
        HomeTheaterFacade homeTheater = new HomeTheaterFacade(tv, soundSystem, bluRayPlayer);

        // Chá»‰ cáº§n gá»i má»™t phÆ°Æ¡ng thá»©c Ä‘Æ¡n giáº£n tá»« Facade!
        homeTheater.watchMovie("Inception");
        homeTheater.endMovie();
    }
}
```

### Táº¡i sao chÃºng ta cáº§n Facade?

*   **ÄÆ¡n giáº£n hÃ³a:** NÃ³ lÃ m cho viá»‡c sá»­ dá»¥ng má»™t há»‡ thá»‘ng phá»©c táº¡p trá»Ÿ nÃªn dá»… dÃ ng hÆ¡n ráº¥t nhiá»u. Báº¡n khÃ´ng cáº§n pháº£i nhá»› táº¥t cáº£ cÃ¡c bÆ°á»›c hay cÃ¡c lá»›p khÃ¡c nhau.
*   **Giáº£m sá»± phá»¥ thuá»™c (Decoupling):** MÃ£ cá»§a báº¡n (Client) chá»‰ phá»¥ thuá»™c vÃ o lá»›p Facade, chá»© khÃ´ng pháº£i vÃ o hÃ ng tÃ¡ cÃ¡c lá»›p con phá»©c táº¡p bÃªn trong. Äiá»u nÃ y giÃºp mÃ£ cá»§a báº¡n dá»… báº£o trÃ¬ vÃ  thay Ä‘á»•i hÆ¡n.
*   **áº¨n Ä‘i sá»± phá»©c táº¡p:** NÃ³ giáº¥u Ä‘i cÃ¡c chi tiáº¿t triá»ƒn khai ráº¯c rá»‘i cá»§a há»‡ thá»‘ng con, giÃºp báº¡n táº­p trung vÃ o nhá»¯ng gÃ¬ báº¡n muá»‘n lÃ m, chá»© khÃ´ng pháº£i *lÃ m tháº¿ nÃ o* Ä‘á»ƒ lÃ m Ä‘iá»u Ä‘Ã³.

### Khi nÃ o nÃªn sá»­ dá»¥ng Facade?

*   Khi báº¡n cÃ³ má»™t há»‡ thá»‘ng lá»›n, phá»©c táº¡p vá»›i nhiá»u lá»›p vÃ  báº¡n muá»‘n cung cáº¥p má»™t giao diá»‡n Ä‘Æ¡n giáº£n hÆ¡n cho ngÆ°á»i dÃ¹ng (Client).
*   Khi báº¡n muá»‘n giáº£m sá»± phá»¥ thuá»™c giá»¯a Client vÃ  cÃ¡c thÃ nh pháº§n cá»§a há»‡ thá»‘ng con.
*   Khi báº¡n muá»‘n tá»• chá»©c cÃ¡c lá»›p trong má»™t há»‡ thá»‘ng con thÃ nh cÃ¡c lá»›p Facade riÃªng biá»‡t, má»—i Facade xá»­ lÃ½ má»™t khÃ­a cáº¡nh khÃ¡c nhau cá»§a há»‡ thá»‘ng.

Nhá»› nhÃ©, Facade khÃ´ng thÃªm chá»©c nÄƒng má»›i, nÃ³ chá»‰ Ä‘Æ¡n giáº£n lÃ  cung cáº¥p má»™t giao diá»‡n dá»… dÃ¹ng hÆ¡n cho cÃ¡c chá»©c nÄƒng Ä‘Ã£ cÃ³! NÃ³ giá»‘ng nhÆ° má»™t cÃ¡i Ä‘iá»u khiá»ƒn tá»« xa váº¡n nÄƒng váº­y!
       - HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang xÃ¢y dá»±ng má»™t trÃ² chÆ¡i siÃªu ngáº§u. Trong trÃ² chÆ¡i nÃ y cÃ³ má»™t khu rá»«ng rá»™ng lá»›n, vá»›i, nÃ³i lÃ , **hÃ ng ngÃ n cÃ¡i cÃ¢y**!

BÃ¢y giá», náº¿u báº¡n táº¡o má»™t Ä‘á»‘i tÆ°á»£ng `Tree` hoÃ n toÃ n má»›i cho *má»—i má»™t trong sá»‘* hÃ ng ngÃ n cÃ¡i cÃ¢y Ä‘Ã³, chuyá»‡n gÃ¬ sáº½ xáº£y ra?

```java
class Tree {
    // CÃ³ thá»ƒ lÃ  má»™t mÃ´ hÃ¬nh 3D phá»©c táº¡p, má»™t texture Ä‘á»™ phÃ¢n giáº£i cao,
    // cÃ¡c thuá»™c tÃ­nh chung cá»§a cÃ¢y nhÆ° loáº¡i lÃ¡, loáº¡i vá» cÃ¢y, v.v.
    // ... táº¥t cáº£ nhá»¯ng thá»© nÃ y chiáº¿m ráº¥t nhiá»u bá»™ nhá»›!
    private Model3D model;
    private Texture texture;
    private String leafType;
    private String barkType;

    // VÃ  cáº£ vá»‹ trÃ­ Ä‘á»™c Ä‘Ã¡o cá»§a nÃ³ trong tháº¿ giá»›i
    private int x, y, z;

    // ... vÃ  cÃ³ thá»ƒ lÃ  sá»©c khá»e, tuá»•i thá», v.v.
    private int health;
    private int age;

    // Constructor, methods, etc.
}
```

HÃ£y suy nghÄ© xem:
*   Nhiá»u cÃ¢y cÃ³ thá»ƒ lÃ  **cÃ¢y sá»“i**. ChÃºng trÃ´ng khÃ¡ giá»‘ng nhau! ChÃºng sá»­ dá»¥ng cÃ¹ng má»™t mÃ´ hÃ¬nh 3D, cÃ¹ng má»™t texture vá» cÃ¢y, cÃ¹ng má»™t loáº¡i lÃ¡.
*   Nhá»¯ng cÃ¢y khÃ¡c cÃ³ thá»ƒ lÃ  **cÃ¢y thÃ´ng**. Má»™t láº§n ná»¯a, táº¥t cáº£ cÃ¢y thÃ´ng Ä‘á»u chia sáº» váº» ngoÃ i cá»‘t lÃµi cá»§a chÃºng.

Náº¿u má»—i Ä‘á»‘i tÆ°á»£ng `Tree` lÆ°u trá»¯ *báº£n sao riÃªng* cá»§a mÃ´ hÃ¬nh 3D, texture, loáº¡i lÃ¡, v.v., cho *má»—i cÃ¡i cÃ¢y*, trÃ² chÆ¡i cá»§a báº¡n sáº½ ngá»‘n má»™t *táº¥n* bá»™ nhá»›! ğŸ˜±

**Váº­y, bÃ­ quyáº¿t lÃ  gÃ¬?**

Äiá»u gÃ¬ sáº½ xáº£y ra náº¿u chÃºng ta cÃ³ thá»ƒ tÃ¡ch "nhá»¯ng thá»© luÃ´n giá»‘ng nhau" khá»i "nhá»¯ng thá»© Ä‘á»™c Ä‘Ã¡o cá»§a má»—i cÃ¢y"?

ÄÃ³ lÃ  lÃºc **Flyweight** xuáº¥t hiá»‡n! NÃ³ giá»‘ng nhÆ° viá»‡c nÃ³i:

"NÃ y, thay vÃ¬ cung cáº¥p cho *má»—i* cÃ¢y má»™t bá»™ dá»¯ liá»‡u mÃ´ hÃ¬nh vÃ  texture Ä‘áº§y Ä‘á»§ riÃªng, chÃºng ta hÃ£y chá»‰ táº¡o *má»™t* Ä‘á»‘i tÆ°á»£ng `OakTreeVisuals` vÃ  *má»™t* Ä‘á»‘i tÆ°á»£ng `PineTreeVisuals`. Sau Ä‘Ã³, táº¥t cáº£ cÃ¡c cÃ¢y sá»“i trong trÃ² chÆ¡i cá»§a chÃºng ta cÃ³ thá»ƒ chá»‰ cáº§n *trá»* Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng `OakTreeVisuals` *Ä‘Æ°á»£c chia sáº» duy nháº¥t* Ä‘Ã³!"

ÄÃ¢y lÃ  cÃ¡ch Flyweight giÃºp chÃºng ta tiáº¿t kiá»‡m bá»™ nhá»›:

1.  **Tráº¡ng thÃ¡i Ná»™i táº¡i (Intrinsic State):** ÄÃ¢y lÃ  dá»¯ liá»‡u Ä‘Æ°á»£c **chia sáº»** giá»¯a nhiá»u Ä‘á»‘i tÆ°á»£ng. ÄÃ³ lÃ  "nhá»¯ng thá»© luÃ´n giá»‘ng nhau" cho má»™t loáº¡i Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ.
    *   *VÃ­ dá»¥ cho cÃ¢y cá»§a chÃºng ta:* MÃ´ hÃ¬nh 3D cá»§a má»™t cÃ¢y sá»“i, texture máº·c Ä‘á»‹nh cá»§a nÃ³, loáº¡i lÃ¡ vÃ  vá» cÃ¢y chung cá»§a nÃ³. Dá»¯ liá»‡u nÃ y *khÃ´ng phá»¥ thuá»™c* vÃ o vá»‹ trÃ­ cá»§a cÃ¢y hoáº·c Ä‘iá»u kiá»‡n cá»¥ thá»ƒ cá»§a nÃ³.
    *   ChÃºng ta táº¡o cÃ¡c "Ä‘á»‘i tÆ°á»£ng flyweight" nÃ y chá»‰ lÆ°u trá»¯ tráº¡ng thÃ¡i ná»™i táº¡i nÃ y.

2.  **Tráº¡ng thÃ¡i Ngoáº¡i táº¡i (Extrinsic State):** ÄÃ¢y lÃ  dá»¯ liá»‡u **Ä‘á»™c Ä‘Ã¡o** cho má»—i Ä‘á»‘i tÆ°á»£ng riÃªng láº». ÄÃ³ lÃ  "nhá»¯ng thá»© thay Ä‘á»•i" tá»« má»™t thá»ƒ hiá»‡n nÃ y sang thá»ƒ hiá»‡n khÃ¡c.
    *   *VÃ­ dá»¥ cho cÃ¢y cá»§a chÃºng ta:* Vá»‹ trÃ­ `x, y, z` cá»¥ thá»ƒ cá»§a *cÃ¢y sá»“i cá»¥ thá»ƒ nÃ y*, `sá»©c khá»e` hiá»‡n táº¡i cá»§a nÃ³, `tuá»•i` cá»§a nÃ³. Dá»¯ liá»‡u nÃ y *phá»¥ thuá»™c* vÃ o ngá»¯ cáº£nh hoáº·c vá»‹ trÃ­ cá»§a Ä‘á»‘i tÆ°á»£ng.
    *   Tráº¡ng thÃ¡i ngoáº¡i táº¡i nÃ y *khÃ´ng* Ä‘Æ°á»£c lÆ°u trá»¯ bÃªn trong cÃ¡c Ä‘á»‘i tÆ°á»£ng flyweight Ä‘Æ°á»£c chia sáº». Thay vÃ o Ä‘Ã³, nÃ³ Ä‘Æ°á»£c truyá»n dÆ°á»›i dáº¡ng Ä‘á»‘i sá»‘ cho cÃ¡c phÆ°Æ¡ng thá»©c cá»§a Ä‘á»‘i tÆ°á»£ng flyweight khi cáº§n (vÃ­ dá»¥: khi váº½ cÃ¢y).

**NÃ³ hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o trong thá»±c táº¿?**

Báº¡n thÆ°á»ng sáº½ cÃ³ má»™t "Flyweight Factory" hoáº·c má»™t trÃ¬nh quáº£n lÃ½ chá»‹u trÃ¡ch nhiá»‡m táº¡o vÃ  chia sáº» cÃ¡c Ä‘á»‘i tÆ°á»£ng ná»™i táº¡i nÃ y.

```java
// 1. Giao diá»‡n "Flyweight" (hoáº·c lá»›p trá»«u tÆ°á»£ng)
interface TreeType {
    void draw(int x, int y, int z); // tráº¡ng thÃ¡i ngoáº¡i táº¡i Ä‘Æ°á»£c truyá»n vÃ o Ä‘Ã¢y!
}

// 2. CÃ¡c Ä‘á»‘i tÆ°á»£ng Flyweight cá»¥ thá»ƒ (lÆ°u trá»¯ tráº¡ng thÃ¡i ná»™i táº¡i)
class OakTreeType implements TreeType {
    private Model3D model = loadOakModel(); // dá»¯ liá»‡u ná»™i táº¡i Ä‘Æ°á»£c chia sáº»
    private Texture texture = loadOakTexture();

    @Override
    public void draw(int x, int y, int z) {
        // Sá»­ dá»¥ng mÃ´ hÃ¬nh vÃ  texture Ä‘Æ°á»£c chia sáº»,
        // nhÆ°ng váº½ nÃ³ á»Ÿ vá»‹ trÃ­ x, y, z Ä‘á»™c Ä‘Ã¡o.
        model.renderAt(x, y, z);
        System.out.println("Drawing Oak tree at (" + x + ", " + y + ", " + z + ")");
    }
}

class PineTreeType implements TreeType {
    private Model3D model = loadPineModel(); // dá»¯ liá»‡u ná»™i táº¡i Ä‘Æ°á»£c chia sáº»
    private Texture texture = loadPineTexture();

    @Override
    public void draw(int x, int y, int z) {
        // ... logic váº½ tÆ°Æ¡ng tá»± cho cÃ¢y thÃ´ng
        System.out.println("Drawing Pine tree at (" + x + ", " + y + ", " + z + ")");
    }
}

// 3. Flyweight Factory (quáº£n lÃ½ vÃ  cung cáº¥p cÃ¡c Ä‘á»‘i tÆ°á»£ng flyweight Ä‘Æ°á»£c chia sáº»)
class TreeFactory {
    private static final Map<String, TreeType> treeTypes = new HashMap<>();

    public static TreeType getTreeType(String type) {
        TreeType treeType = treeTypes.get(type);
        if (treeType == null) {
            switch (type) {
                case "Oak":
                    treeType = new OakTreeType();
                    break;
                case "Pine":
                    treeType = new PineTreeType();
                    break;
                // ... cÃ¡c loáº¡i cÃ¢y khÃ¡c
                default:
                    throw new IllegalArgumentException("Unknown tree type: " + type);
            }
            treeTypes.put(type, treeType); // LÆ°u trá»¯ Ä‘á»ƒ chia sáº» trong tÆ°Æ¡ng lai!
        }
        return treeType;
    }
}

// 4. MÃ£ client (trÃ² chÆ¡i cá»§a báº¡n táº¡o cÃ¢y)
public class Forest {
    private List<Tree> trees = new ArrayList<>();

    // Äá»‘i tÆ°á»£ng "Tree" bÃ¢y giá» chá»‰ lÆ°u trá»¯ tráº¡ng thÃ¡i ngoáº¡i táº¡i cá»§a nÃ³
    // vÃ  má»™t tham chiáº¿u Ä‘áº¿n TreeType ná»™i táº¡i Ä‘Æ°á»£c chia sáº»
    static class Tree {
        private int x, y, z;
        private TreeType type; // Tham chiáº¿u Ä‘áº¿n má»™t Ä‘á»‘i tÆ°á»£ng flyweight Ä‘Æ°á»£c chia sáº»!

        public Tree(int x, int y, int z, String treeTypeName) {
            this.x = x;
            this.y = y;
            this.z = z;
            this.type = TreeFactory.getTreeType(treeTypeName); // Láº¥y thá»ƒ hiá»‡n Ä‘Æ°á»£c chia sáº»
        }

        public void draw() {
            type.draw(x, y, z); // Truyá»n tráº¡ng thÃ¡i ngoáº¡i táº¡i cho flyweight
        }
    }

    public void plantTrees(int numTrees) {
        for (int i = 0; i < numTrees; i++) {
            int x = (int) (Math.random() * 100);
            int y = (int) (Math.random() * 100);
            int z = (int) (Math.random() * 100);
            String treeTypeName = (i % 2 == 0) ? "Oak" : "Pine"; // LuÃ¢n phiÃªn cÃ¡c loáº¡i
            trees.add(new Tree(x, y, z, treeTypeName));
        }
    }

    public static void main(String[] args) {
        Forest forest = new Forest();
        forest.plantTrees(10000); // Trá»“ng 10.000 cÃ¢y!
        System.out.println("Total unique tree type objects created: " + TreeFactory.treeTypes.size());
        // Ngay cáº£ vá»›i 10.000 cÃ¢y, chÃºng ta chá»‰ cÃ³ 2 Ä‘á»‘i tÆ°á»£ng TreeType (Oak & Pine)!
        // Äiá»u nÃ y tiáº¿t kiá»‡m Ráº¤T NHIá»€U bá»™ nhá»› cho cÃ¡c mÃ´ hÃ¬nh vÃ  texture.
    }
}
```

Tháº¥y khÃ´ng? BÃ¢y giá», ngay cáº£ khi báº¡n cÃ³ **10.000 cÃ¢y sá»“i**, báº¡n chá»‰ cÃ³ *má»™t Ä‘á»‘i tÆ°á»£ng* `OakTreeType` duy nháº¥t lÆ°u trá»¯ dá»¯ liá»‡u mÃ´ hÃ¬nh vÃ  texture náº·ng. Táº¥t cáº£ 10.000 Ä‘á»‘i tÆ°á»£ng `Tree` chá»‰ giá»¯ má»™t tham chiáº¿u nhá» Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c chia sáº» Ä‘Ã³, cá»™ng vá»›i vá»‹ trÃ­ Ä‘á»™c Ä‘Ã¡o cá»§a chÃºng.

**Khi nÃ o báº¡n nÃªn nghÄ© Ä‘áº¿n viá»‡c sá»­ dá»¥ng Flyweight?**

*   Khi á»©ng dá»¥ng cá»§a báº¡n cáº§n táº¡o má»™t **sá»‘ lÆ°á»£ng lá»›n Ä‘á»‘i tÆ°á»£ng**.
*   Khi cÃ¡c Ä‘á»‘i tÆ°á»£ng nÃ y tiÃªu tá»‘n **nhiá»u bá»™ nhá»› má»™t cÃ¡ch riÃªng láº»**.
*   Khi háº§u háº¿t tráº¡ng thÃ¡i cá»§a má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ Ä‘Æ°á»£c táº¡o thÃ nh **ná»™i táº¡i** (Ä‘Æ°á»£c chia sáº») vÃ  chá»‰ má»™t chÃºt lÃ  **ngoáº¡i táº¡i** (Ä‘á»™c Ä‘Ã¡o vÃ  Ä‘Æ°á»£c truyá»n vÃ o).
*   Khi báº¡n cÃ³ thá»ƒ dá»… dÃ ng nhÃ³m cÃ¡c Ä‘á»‘i tÆ°á»£ng theo tráº¡ng thÃ¡i ná»™i táº¡i Ä‘Æ°á»£c chia sáº» cá»§a chÃºng.

Flyweight lÃ  táº¥t cáº£ vá» viá»‡c sá»­ dá»¥ng bá»™ nhá»› má»™t cÃ¡ch thÃ´ng minh, Ä‘áº·c biá»‡t khi xá»­ lÃ½ hÃ ng táº¥n thá»© trÃ´ng tÆ°Æ¡ng tá»± nhau! NÃ³ giá»‘ng nhÆ° má»™t thÆ° viá»‡n nÆ¡i nhiá»u ngÆ°á»i cÃ³ thá»ƒ Ä‘á»c cÃ¹ng má»™t cuá»‘n sÃ¡ch, thay vÃ¬ má»—i ngÆ°á»i mua má»™t báº£n sao riÃªng.
       - **Proxy**

NÃ y báº¡n! ÄÃ£ bao giá» báº¡n cáº§n má»™t "ngÆ°á»i Ä‘áº¡i diá»‡n" chÆ°a? Má»™t ai Ä‘Ã³ Ä‘á»©ng ra giÃºp báº¡n lÃ m viá»‡c gÃ¬ Ä‘Ã³, hoáº·c kiá»ƒm soÃ¡t xem ai Ä‘Æ°á»£c phÃ©p tiáº¿p cáº­n má»™t thá»© quan trá»ng?

Thá»­ tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©: báº¡n cÃ³ má»™t kho bÃ¡u cá»±c ká»³ quÃ½ giÃ¡ (kiá»ƒu nhÆ° má»™t Ä‘á»‘i tÆ°á»£ng phá»©c táº¡p, tá»‘n kÃ©m tÃ i nguyÃªn trong chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n). Báº¡n khÃ´ng muá»‘n má»i ngÆ°á»i cá»© tháº¿ "vá»“ láº¥y" kho bÃ¡u Ä‘Ã³ má»™t cÃ¡ch tÃ¹y tiá»‡n, Ä‘Ãºng khÃ´ng? CÃ³ thá»ƒ báº¡n muá»‘n kiá»ƒm tra xem há» cÃ³ Ä‘á»§ quyá»n háº¡n khÃ´ng, hoáº·c ghi láº¡i xem ai Ä‘Ã£ dÃ¹ng nÃ³, hoáº·c tháº­m chÃ­ lÃ  lÃ m cháº­m viá»‡c truy cáº­p Ä‘á»ƒ Ä‘á»¡ tá»‘n tÃ i nguyÃªn.

Váº­y thÃ¬, báº¡n sáº½ lÃ m gÃ¬? Báº¡n sáº½ Ä‘áº·t má»™t "ngÆ°á»i gÃ¡c cá»•ng" á»Ÿ phÃ­a trÆ°á»›c!

Trong láº­p trÃ¬nh, cÃ¡i "ngÆ°á»i gÃ¡c cá»•ng" Ä‘Ã³ chÃ­nh lÃ  má»™t **Proxy**!

Má»™t **Proxy** lÃ  má»™t Ä‘á»‘i tÆ°á»£ng *giáº£ vá»* lÃ  Ä‘á»‘i tÆ°á»£ng tháº­t (cÃ¡i kho bÃ¡u cá»§a báº¡n Ä‘áº¥y!). Khi báº¡n muá»‘n tÆ°Æ¡ng tÃ¡c vá»›i kho bÃ¡u, báº¡n sáº½ khÃ´ng nÃ³i chuyá»‡n trá»±c tiáº¿p vá»›i nÃ³ Ä‘Ã¢u. Thay vÃ o Ä‘Ã³, báº¡n sáº½ nÃ³i chuyá»‡n vá»›i **Proxy**.

VÃ  Ä‘Ã¢y lÃ  Ä‘iá»u tuyá»‡t vá»i mÃ  Proxy cÃ³ thá»ƒ lÃ m:

*   **Kiá»ƒm soÃ¡t quyá»n truy cáº­p:** NÃ³ cÃ³ thá»ƒ kiá»ƒm tra xem "báº¡n" (Ä‘á»‘i tÆ°á»£ng gá»i) cÃ³ Ä‘Æ°á»£c phÃ©p truy cáº­p vÃ o Ä‘á»‘i tÆ°á»£ng tháº­t hay khÃ´ng. Náº¿u khÃ´ng, nÃ³ sáº½ cháº·n láº¡i ngay!
*   **Ghi chÃ©p (Logging):** NÃ³ cÃ³ thá»ƒ ghi láº¡i má»i hÃ nh Ä‘á»™ng mÃ  báº¡n yÃªu cáº§u Ä‘á»‘i tÆ°á»£ng tháº­t thá»±c hiá»‡n. "Ã€, anh A vá»«a dÃ¹ng kho bÃ¡u lÃºc 10 giá» sÃ¡ng!"
*   **Táº£i cháº­m (Lazy Loading):** Äá»‘i tÆ°á»£ng tháº­t cá»§a báº¡n cÃ³ thá»ƒ ráº¥t "náº·ng ná»", tá»‘n nhiá»u tÃ i nguyÃªn Ä‘á»ƒ khá»Ÿi táº¡o. Proxy cÃ³ thá»ƒ trÃ¬ hoÃ£n viá»‡c táº¡o ra Ä‘á»‘i tÆ°á»£ng tháº­t cho Ä‘áº¿n *khi nÃ o báº¡n thá»±c sá»± cáº§n dÃ¹ng Ä‘áº¿n nÃ³*. Tuyá»‡t vá»i chÆ°a?
*   **ThÃªm hÃ nh vi má»›i:** NÃ³ cÃ³ thá»ƒ thÃªm cÃ¡c hÃ nh Ä‘á»™ng phá»¥ trá»£ trÆ°á»›c hoáº·c sau khi chuyá»ƒn yÃªu cáº§u Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng tháº­t, mÃ  khÃ´ng cáº§n pháº£i "Ä‘á»¥ng cháº¡m" gÃ¬ Ä‘áº¿n mÃ£ nguá»“n cá»§a Ä‘á»‘i tÆ°á»£ng tháº­t cáº£.

NÃ³i tÃ³m láº¡i, má»™t **Proxy** lÃ  má»™t "ngÆ°á»i Ä‘áº¡i diá»‡n" hoáº·c "ngÆ°á»i gÃ¡c cá»•ng" thÃ´ng minh. NÃ³ Ä‘á»©ng giá»¯a báº¡n vÃ  má»™t Ä‘á»‘i tÆ°á»£ng khÃ¡c, giÃºp báº¡n quáº£n lÃ½, báº£o vá»‡, hoáº·c "lÃ m Ä‘áº¹p" cÃ¡ch báº¡n tÆ°Æ¡ng tÃ¡c vá»›i Ä‘á»‘i tÆ°á»£ng Ä‘Ã³. NÃ³ lÃ m cho má»i thá»© cÃ³ tráº­t tá»± hÆ¡n vÃ  hiá»‡u quáº£ hÆ¡n ráº¥t nhiá»u!

    3. **CÃ¡c Máº«u HÃ nh Vi** - NhÃ³m máº«u nÃ y chuyÃªn giÃºp cÃ¡c Ä‘á»‘i tÆ°á»£ng "nÃ³i chuyá»‡n" vÃ  phá»‘i há»£p vá»›i nhau tháº­t Äƒn Ã½.
       - Chuá»—i TrÃ¡ch Nhiá»‡m

NÃ y báº¡n! HÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©...

Báº¡n cÃ³ má»™t "yÃªu cáº§u" (request) cáº§n Ä‘Æ°á»£c giáº£i quyáº¿t. NhÆ°ng báº¡n khÃ´ng cháº¯c ai má»›i lÃ  ngÆ°á»i *Ä‘Ãºng* Ä‘á»ƒ xá»­ lÃ½ nÃ³. ğŸ¤”

Sáº½ ra sao náº¿u báº¡n cÃ³ má»™t *chuá»—i* (má»™t hÃ ng dÃ i) cÃ¡c Ä‘á»‘i tÆ°á»£ng, vÃ  báº¡n chá»‰ cáº§n "nÃ©m" yÃªu cáº§u Ä‘Ã³ vÃ o Ä‘áº§u chuá»—i?

Má»—i Ä‘á»‘i tÆ°á»£ng trong chuá»—i sáº½ tá»± kiá»ƒm tra: "Ã€, mÃ¬nh cÃ³ xá»­ lÃ½ Ä‘Æ°á»£c yÃªu cáº§u nÃ y khÃ´ng nhá»‰?"

*   Náº¿u cÃ³, tuyá»‡t vá»i! Há» sáº½ giáº£i quyáº¿t vÃ  xong viá»‡c.
*   Náº¿u khÃ´ng, thÃ¬ sao? Há» sáº½ *chuyá»ƒn tiáº¿p* yÃªu cáº§u Ä‘Ã³ cho Ä‘á»‘i tÆ°á»£ng *tiáº¿p theo* trong chuá»—i.

Cá»© tháº¿, yÃªu cáº§u sáº½ "Ä‘i" dá»c theo chuá»—i cho Ä‘áº¿n khi cÃ³ ai Ä‘Ã³ *cÃ³ thá»ƒ* xá»­ lÃ½ nÃ³. Hoáº·c, náº¿u khÃ´ng ai xá»­ lÃ½ Ä‘Æ°á»£c, thÃ¬ yÃªu cáº§u sáº½ "rÆ¡i" ra khá»i chuá»—i.

Nghe cÃ³ váº» hay ho Ä‘Ãºng khÃ´ng? ÄÃ³ chÃ­nh lÃ  Ã½ tÆ°á»Ÿng chÃ­nh Ä‘áº±ng sau máº«u thiáº¿t káº¿ **Chuá»—i TrÃ¡ch Nhiá»‡m** (Chain of Responsibility) Ä‘áº¥y!

### Váº­y, nÃ³ hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?

HÃ£y nghÄ© vá» nÃ³ nhÆ° má»™t Ä‘Æ°á»ng dÃ¢y há»— trá»£ khÃ¡ch hÃ ng váº­y:

1.  **Báº¡n gá»i Ä‘iá»‡n:** "TÃ´i cÃ³ má»™t váº¥n Ä‘á» cáº§n giÃºp Ä‘á»¡!"
2.  **Bá»™ pháº­n Há»— trá»£ cáº¥p 1 nháº­n cuá»™c gá»i:** "ChÃ o báº¡n, tÃ´i cÃ³ thá»ƒ giÃºp gÃ¬ khÃ´ng?"
    *   Há» cá»‘ gáº¯ng giáº£i quyáº¿t váº¥n Ä‘á» cá»§a báº¡n.
    *   **Náº¿u giáº£i quyáº¿t Ä‘Æ°á»£c:** Xong!
    *   **Náº¿u khÃ´ng:** "Xin lá»—i, váº¥n Ä‘á» nÃ y hÆ¡i phá»©c táº¡p. TÃ´i sáº½ chuyá»ƒn báº¡n lÃªn cho bá»™ pháº­n Há»— trá»£ cáº¥p 2 nhÃ©."
3.  **Bá»™ pháº­n Há»— trá»£ cáº¥p 2 nháº­n cuá»™c gá»i:** "ChÃ o báº¡n, tÃ´i lÃ  cáº¥p 2 Ä‘Ã¢y. Váº¥n Ä‘á» cá»§a báº¡n lÃ  gÃ¬?"
    *   Há» láº¡i cá»‘ gáº¯ng giáº£i quyáº¿t.
    *   **Náº¿u giáº£i quyáº¿t Ä‘Æ°á»£c:** Xong!
    *   **Náº¿u khÃ´ng:** "á»’, cÃ¡i nÃ y cáº§n sáº¿p tÃ´i rá»“i. Äá»ƒ tÃ´i chuyá»ƒn báº¡n cho Quáº£n lÃ½ nhÃ©."
4.  **Quáº£n lÃ½ nháº­n cuá»™c gá»i:** "ChÃ o báº¡n, tÃ´i lÃ  Quáº£n lÃ½. Äá»ƒ tÃ´i xem sao."
    *   Quáº£n lÃ½ xá»­ lÃ½.
    *   **Náº¿u giáº£i quyáº¿t Ä‘Æ°á»£c:** Xong!
    *   **Náº¿u khÃ´ng:** (Hy vá»ng Ä‘iá»u nÃ y khÃ´ng xáº£y ra! ğŸ˜…)

Trong vÃ­ dá»¥ nÃ y:

*   **YÃªu cáº§u** lÃ  "váº¥n Ä‘á» cáº§n giÃºp Ä‘á»¡" cá»§a báº¡n.
*   **CÃ¡c Ä‘á»‘i tÆ°á»£ng trong chuá»—i** lÃ : Há»— trá»£ cáº¥p 1, Há»— trá»£ cáº¥p 2, Quáº£n lÃ½.
*   Má»—i ngÆ°á»i Ä‘á»u cÃ³ má»™t "trÃ¡ch nhiá»‡m" (kháº£ nÄƒng) nháº¥t Ä‘á»‹nh Ä‘á»ƒ xá»­ lÃ½ yÃªu cáº§u.

### Lá»£i Ã­ch "siÃªu to khá»•ng lá»“" lÃ  gÃ¬?

*   **Äá»¡ pháº£i Ä‘au Ä‘áº§u:** Báº¡n, ngÆ°á»i gá»­i yÃªu cáº§u, khÃ´ng cáº§n biáº¿t *chÃ­nh xÃ¡c* ai sáº½ xá»­ lÃ½ nÃ³. Báº¡n chá»‰ cáº§n "nÃ©m" nÃ³ vÃ o Ä‘áº§u chuá»—i thÃ´i! ğŸ‰
*   **Thoáº£i mÃ¡i thay Ä‘á»•i:** Báº¡n cÃ³ thá»ƒ dá»… dÃ ng thÃªm ngÆ°á»i má»›i vÃ o chuá»—i, bá»›t ngÆ°á»i Ä‘i, hoáº·c thay Ä‘á»•i thá»© tá»± cá»§a há» mÃ  khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n nhá»¯ng ngÆ°á»i khÃ¡c. Cá»±c ká»³ linh hoáº¡t!
*   **TÃ¡ch biá»‡t rÃµ rÃ ng:** Má»—i Ä‘á»‘i tÆ°á»£ng chá»‰ táº­p trung vÃ o viá»‡c xá»­ lÃ½ *pháº§n viá»‡c cá»§a mÃ¬nh* vÃ  biáº¿t cÃ¡ch chuyá»ƒn tiáº¿p khi cáº§n.

### CÃ¡c thÃ nh pháº§n chÃ­nh cá»§a Chuá»—i TrÃ¡ch Nhiá»‡m

Äá»ƒ xÃ¢y dá»±ng má»™t Chuá»—i TrÃ¡ch Nhiá»‡m, chÃºng ta cáº§n:

1.  **Má»™t "ngÆ°á»i xá»­ lÃ½" chung (Handler Interface/Abstract Class):**
    *   ÄÃ¢y lÃ  má»™t "báº£n thiáº¿t káº¿" chung cho táº¥t cáº£ nhá»¯ng ngÆ°á»i trong chuá»—i.
    *   NÃ³ Ä‘á»‹nh nghÄ©a:
        *   Má»™t phÆ°Æ¡ng thá»©c Ä‘á»ƒ *xá»­ lÃ½ yÃªu cáº§u*.
        *   Má»™t phÆ°Æ¡ng thá»©c Ä‘á»ƒ *thiáº¿t láº­p ngÆ°á»i xá»­ lÃ½ tiáº¿p theo* trong chuá»—i.

    ```java
    interface Handler {
        void setNextHandler(Handler nextHandler);
        void handleRequest(Request request);
    }
    ```

2.  **Nhá»¯ng "ngÆ°á»i xá»­ lÃ½ cá»¥ thá»ƒ" (Concrete Handlers):**
    *   ÄÃ¢y lÃ  nhá»¯ng Ä‘á»‘i tÆ°á»£ng "tháº­t sá»±" trong chuá»—i, nhÆ° Há»— trá»£ cáº¥p 1, cáº¥p 2, Quáº£n lÃ½.
    *   Má»—i ngÆ°á»i sáº½ triá»ƒn khai giao diá»‡n `Handler`.
    *   Há» sáº½ cÃ³ logic riÃªng Ä‘á»ƒ quyáº¿t Ä‘á»‹nh liá»‡u mÃ¬nh cÃ³ thá»ƒ xá»­ lÃ½ yÃªu cáº§u hay khÃ´ng.
    *   VÃ  quan trá»ng lÃ : náº¿u khÃ´ng xá»­ lÃ½ Ä‘Æ°á»£c, há» sáº½ gá»i `nextHandler.handleRequest(request)` Ä‘á»ƒ chuyá»ƒn tiáº¿p!

    ```java
    class ConcreteHandlerA implements Handler {
        private Handler nextHandler;

        @Override
        public void setNextHandler(Handler nextHandler) {
            this.nextHandler = nextHandler;
        }

        @Override
        public void handleRequest(Request request) {
            if (request.getType() == RequestType.TYPE_A) {
                System.out.println("Handler A xá»­ lÃ½ yÃªu cáº§u loáº¡i A: " + request.getDescription());
            } else if (nextHandler != null) {
                System.out.println("Handler A khÃ´ng xá»­ lÃ½ Ä‘Æ°á»£c. Chuyá»ƒn cho Handler tiáº¿p theo...");
                nextHandler.handleRequest(request); // Chuyá»ƒn tiáº¿p!
            } else {
                System.out.println("KhÃ´ng ai trong chuá»—i xá»­ lÃ½ Ä‘Æ°á»£c yÃªu cáº§u: " + request.getDescription());
            }
        }
    }

    // TÆ°Æ¡ng tá»± cho ConcreteHandlerB, ConcreteHandlerC...
    ```

3.  **YÃªu cáº§u (Request):**
    *   ÄÃ¢y lÃ  "thá»©" cáº§n Ä‘Æ°á»£c xá»­ lÃ½.
    *   NÃ³ cÃ³ thá»ƒ lÃ  má»™t class Ä‘Æ¡n giáº£n chá»©a thÃ´ng tin vá» yÃªu cáº§u.

    ```java
    enum RequestType {
        TYPE_A, TYPE_B, TYPE_C
    }

    class Request {
        private RequestType type;
        private String description;

        public Request(RequestType type, String description) {
            this.type = type;
            this.description = description;
        }

        public RequestType getType() { return type; }
        public String getDescription() { return description; }
    }
    ```

### CÃ¹ng xÃ¢y dá»±ng má»™t chuá»—i nÃ o!

```java
public class Client {
    public static void main(String[] args) {
        // 1. Táº¡o cÃ¡c Handler cá»¥ thá»ƒ
        Handler handlerA = new ConcreteHandlerA();
        Handler handlerB = new ConcreteHandlerB(); // Giáº£ sá»­ cÃ³ Handler B
        Handler handlerC = new ConcreteHandlerC(); // Giáº£ sá»­ cÃ³ Handler C

        // 2. Thiáº¿t láº­p chuá»—i: A -> B -> C
        handlerA.setNextHandler(handlerB);
        handlerB.setNextHandler(handlerC);
        // Handler C khÃ´ng cÃ³ ngÆ°á»i tiáº¿p theo, nÃªn nextHandler cá»§a nÃ³ lÃ  null

        // 3. Táº¡o vÃ  gá»­i cÃ¡c yÃªu cáº§u
        Request request1 = new Request(RequestType.TYPE_A, "Cáº§n xá»­ lÃ½ kháº©n cáº¥p!");
        Request request2 = new Request(RequestType.TYPE_B, "Váº¥n Ä‘á» tÃ i khoáº£n.");
        Request request3 = new Request(RequestType.TYPE_C, "YÃªu cáº§u nÃ¢ng cáº¥p.");
        Request request4 = new Request(RequestType.TYPE_UNKNOWN, "Loáº¡i yÃªu cáº§u láº¡ hoáº¯c!"); // Giáº£ sá»­ cÃ³ loáº¡i nÃ y

        System.out.println("--- Gá»­i yÃªu cáº§u 1 (Loáº¡i A) ---");
        handlerA.handleRequest(request1); // Handler A sáº½ xá»­ lÃ½

        System.out.println("\n--- Gá»­i yÃªu cáº§u 2 (Loáº¡i B) ---");
        handlerA.handleRequest(request2); // A khÃ´ng xá»­ lÃ½, chuyá»ƒn cho B. B sáº½ xá»­ lÃ½.

        System.out.println("\n--- Gá»­i yÃªu cáº§u 3 (Loáº¡i C) ---");
        handlerA.handleRequest(request3); // A khÃ´ng xá»­ lÃ½, chuyá»ƒn B. B khÃ´ng xá»­ lÃ½, chuyá»ƒn C. C sáº½ xá»­ lÃ½.

        System.out.println("\n--- Gá»­i yÃªu cáº§u 4 (Loáº¡i KHÃ”NG RÃ•) ---");
        handlerA.handleRequest(request4); // Äi háº¿t chuá»—i mÃ  khÃ´ng ai xá»­ lÃ½ Ä‘Æ°á»£c!
    }
}
```

Váº­y Ä‘Ã³! Chuá»—i TrÃ¡ch Nhiá»‡m giÃºp báº¡n xá»­ lÃ½ cÃ¡c yÃªu cáº§u má»™t cÃ¡ch gá»n gÃ ng, linh hoáº¡t vÃ  tÃ¡ch biá»‡t. Tháº­t lÃ  má»™t máº«u thiáº¿t káº¿ "Ä‘Ã¡ng yÃªu" pháº£i khÃ´ng nÃ o? ğŸ˜‰
       - Lá»‡nh
       - **Bá»™ láº·p** (Iterator)

NÃ y báº¡n! Báº¡n cÃ³ bao giá» tá»± há»i lÃ m sao Ä‘á»ƒ "Ä‘i dáº¡o" qua táº¥t cáº£ cÃ¡c mÃ³n Ä‘á»“ trong má»™t cÃ¡i tÃºi lá»›n (vÃ­ dá»¥ nhÆ° má»™t danh sÃ¡ch, má»™t táº­p há»£p cÃ¡c thá»©) mÃ  khÃ´ng cáº§n pháº£i biáº¿t cÃ¡i tÃºi Ä‘Ã³ Ä‘Æ°á»£c sáº¯p xáº¿p hay chá»©a Ä‘á»±ng bÃªn trong nhÆ° tháº¿ nÃ o khÃ´ng?

Ã€ ha! ÄÃ³ chÃ­nh lÃ  lÃºc anh báº¡n **Bá»™ láº·p** (hay cÃ²n gá»i lÃ  Iterator) cá»§a chÃºng ta xuáº¥t hiá»‡n!

Má»™t **Bá»™ láº·p** lÃ  má»™t "cÃ´ng cá»¥" Ä‘áº·c biá»‡t. NÃ³ giÃºp báº¡n Ä‘i tá»«ng bÆ°á»›c, tá»«ng bÆ°á»›c má»™t qua cÃ¡c pháº§n tá»­ trong má»™t bá»™ sÆ°u táº­p (nhÆ° `ArrayList`, `HashSet`, v.v.) mÃ  khÃ´ng cáº§n báº¡n pháº£i báº­n tÃ¢m Ä‘áº¿n cáº¥u trÃºc bÃªn trong cá»§a bá»™ sÆ°u táº­p Ä‘Ã³. Tuyá»‡t vá»i pháº£i khÃ´ng?

NÃ³ giá»‘ng nhÆ° báº¡n cÃ³ má»™t cÃ¡i Ä‘iá»u khiá»ƒn tá»« xa Ä‘á»ƒ Ä‘i qua tá»«ng kÃªnh TV váº­y. Báº¡n chá»‰ cáº§n nháº¥n nÃºt "káº¿ tiáº¿p" mÃ  khÃ´ng cáº§n biáº¿t TV hoáº¡t Ä‘á»™ng tháº¿ nÃ o bÃªn trong.

**Váº­y Bá»™ láº·p lÃ m gÃ¬?** NÃ³ cÃ³ hai viá»‡c chÃ­nh mÃ  báº¡n cáº§n biáº¿t Ä‘á»ƒ sá»­ dá»¥ng:

1.  `hasNext()`: "NÃ y, cÃ²n pháº§n tá»­ nÃ o Ä‘á»ƒ duyá»‡t ná»¯a khÃ´ng?" NÃ³ sáº½ tráº£ lá»i `true` (cÃ³) hoáº·c `false` (háº¿t rá»“i).
2.  `next()`: "ÄÆ°á»£c rá»“i, Ä‘Æ°a tÃ´i cÃ¡i pháº§n tá»­ tiáº¿p theo Ä‘i!" NÃ³ sáº½ tráº£ vá» cho báº¡n pháº§n tá»­ Ä‘Ã³ vÃ  tá»± Ä‘á»™ng di chuyá»ƒn Ä‘áº¿n vá»‹ trÃ­ káº¿ tiáº¿p.

ÄÆ¡n giáº£n váº­y thÃ´i! Vá»›i Bá»™ láº·p, báº¡n cÃ³ thá»ƒ dá»… dÃ ng xá»­ lÃ½ tá»«ng mÃ³n Ä‘á»“ má»™t trong bá»™ sÆ°u táº­p cá»§a mÃ¬nh má»™t cÃ¡ch gá»n gÃ ng vÃ  Ä‘á»™c láº­p vá»›i cÃ¡ch chÃºng Ä‘Æ°á»£c lÆ°u trá»¯.
       - Mediator

Báº¡n cÃ³ bao giá» tháº¥y má»™t Ä‘á»‘ng Ä‘á»‘i tÆ°á»£ng cá»© nÃ³i chuyá»‡n trá»±c tiáº¿p vá»›i nhau khÃ´ng? Kiá»ƒu nhÆ°, Ä‘á»‘i tÆ°á»£ng A nÃ³i vá»›i B, B nÃ³i vá»›i C, C láº¡i nÃ³i vá»›i A... Rá»“i D nháº£y vÃ o nÃ³i vá»›i táº¥t cáº£? Ã”i, tháº­t lÃ  há»—n loáº¡n!

Khi cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»© tá»± do trÃ² chuyá»‡n vá»›i nhau khÃ´ng theo má»™t tráº­t tá»± nÃ o, há»‡ thá»‘ng cá»§a báº¡n sáº½ trá»Ÿ nÃªn...

*   **Rá»‘i ráº¯m:** Ráº¥t nhiá»u Ä‘Æ°á»ng dÃ¢y káº¿t ná»‘i trá»±c tiáº¿p, nhÆ° má»™t má»› mÃ¬ spaghetti váº­y.
*   **KhÃ³ thay Ä‘á»•i:** Chá»‰ cáº§n thay Ä‘á»•i má»™t Ä‘á»‘i tÆ°á»£ng, báº¡n cÃ³ thá»ƒ pháº£i sá»­a hÃ ng loáº¡t Ä‘á»‘i tÆ°á»£ng khÃ¡c liÃªn quan.
*   **KhÃ³ hiá»ƒu:** Ai nÃ³i chuyá»‡n vá»›i ai? Táº¡i sao láº¡i nÃ³i chuyá»‡n? Ráº¥t khÃ³ Ä‘á»ƒ theo dÃµi luá»“ng hoáº¡t Ä‘á»™ng.

Váº­y thÃ¬, hÃ£y gáº·p gá»¡ "NgÆ°á»i hÃ²a giáº£i" â€“ hay cÃ²n gá»i lÃ  **Mediator**!

**Mediator lÃ m gÃ¬?**

TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y: thay vÃ¬ má»—i Ä‘á»‘i tÆ°á»£ng tá»± tÃ¬m cÃ¡ch nÃ³i chuyá»‡n vá»›i má»i ngÆ°á»i, chÃºng ta cÃ³ má»™t "trung tÃ¢m Ä‘iá»u phá»‘i" á»Ÿ giá»¯a.

1.  **Táº¥t cáº£ nÃ³i chuyá»‡n vá»›i Mediator:** Má»—i khi má»™t Ä‘á»‘i tÆ°á»£ng muá»‘n "nÃ³i" hay "lÃ m gÃ¬ Ä‘Ã³" liÃªn quan Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng khÃ¡c, nÃ³ sáº½ khÃ´ng nÃ³i trá»±c tiáº¿p ná»¯a. MÃ  nÃ³ sáº½ "nÃ³i" vá»›i anh Mediator nÃ y.
2.  **Mediator quyáº¿t Ä‘á»‹nh:** Anh Mediator sáº½ nháº­n thÃ´ng Ä‘iá»‡p, rá»“i quyáº¿t Ä‘á»‹nh xem ai cáº§n nghe vÃ  gá»­i thÃ´ng Ä‘iá»‡p Ä‘Ã³ Ä‘i. Anh áº¥y giá»‘ng nhÆ° má»™t ngÆ°á»i quáº£n lÃ½ giao thÃ´ng váº­y Ä‘Ã³!

**VÃ­ dá»¥ thá»±c táº¿ lÃ  gÃ¬?**

*   **ÄÃ i kiá»ƒm soÃ¡t khÃ´ng lÆ°u:** CÃ¡c mÃ¡y bay khÃ´ng nÃ³i chuyá»‡n trá»±c tiáº¿p vá»›i nhau. ChÃºng nÃ³i chuyá»‡n vá»›i Ä‘Ã i kiá»ƒm soÃ¡t, vÃ  Ä‘Ã i kiá»ƒm soÃ¡t Ä‘iá»u phá»‘i táº¥t cáº£.
*   **PhÃ²ng chat:** Báº¡n gá»­i tin nháº¯n vÃ o phÃ²ng chat, tin nháº¯n Ä‘Ã³ Ä‘i qua mÃ¡y chá»§ (Mediator), rá»“i mÃ¡y chá»§ gá»­i Ä‘áº¿n nhá»¯ng ngÆ°á»i khÃ¡c trong phÃ²ng.
*   **Má»™t cá»­a sá»• giao diá»‡n phá»©c táº¡p:** Khi báº¡n nháº¥n má»™t nÃºt, nÃºt Ä‘Ã³ khÃ´ng trá»±c tiáº¿p thay Ä‘á»•i cÃ¡c thÃ nh pháº§n khÃ¡c. NÃ³ "bÃ¡o cÃ¡o" cho má»™t Ä‘á»‘i tÆ°á»£ng Mediator, vÃ  Ä‘á»‘i tÆ°á»£ng nÃ y sáº½ Ä‘iá»u chá»‰nh cÃ¡c thÃ nh pháº§n khÃ¡c trÃªn giao diá»‡n.

**Táº¡i sao Mediator láº¡i hay ho Ä‘áº¿n váº­y?**

*   **Giáº£m sá»± phá»¥ thuá»™c (Decoupling):** CÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ´ng cáº§n biáº¿t vá» nhau ná»¯a. ChÃºng chá»‰ cáº§n biáº¿t vá» Mediator thÃ´i. Äiá»u nÃ y giá»‘ng nhÆ° viá»‡c báº¡n khÃ´ng cáº§n biáº¿t tÃªn táº¥t cáº£ cÃ¡c mÃ¡y bay khÃ¡c trÃªn báº§u trá»i, báº¡n chá»‰ cáº§n nghe theo Ä‘Ã i kiá»ƒm soÃ¡t lÃ  Ä‘Æ°á»£c!
*   **ÄÆ¡n giáº£n hÃ³a Ä‘á»‘i tÆ°á»£ng:** Má»—i Ä‘á»‘i tÆ°á»£ng trá»Ÿ nÃªn "ngÃ¢y thÆ¡" hÆ¡n. NÃ³ chá»‰ cáº§n lÃ m viá»‡c cá»§a mÃ¬nh vÃ  "bÃ¡o cÃ¡o" cho Mediator khi cáº§n. NÃ³ khÃ´ng pháº£i lo láº¯ng vá» viá»‡c ai khÃ¡c sáº½ bá»‹ áº£nh hÆ°á»Ÿng.
*   **Dá»… quáº£n lÃ½ vÃ  má»Ÿ rá»™ng:** Khi cÃ³ thay Ä‘á»•i vá» cÃ¡ch cÃ¡c Ä‘á»‘i tÆ°á»£ng tÆ°Æ¡ng tÃ¡c, báº¡n chá»‰ cáº§n sá»­a á»Ÿ Mediator, chá»© khÃ´ng pháº£i sá»­a hÃ ng Ä‘á»‘ng chá»— khÃ¡c nhau. Muá»‘n thÃªm má»™t Ä‘á»‘i tÆ°á»£ng má»›i? Cá»© káº¿t ná»‘i nÃ³ vá»›i Mediator lÃ  xong!

TÃ³m láº¡i, Mediator lÃ  "ngÆ°á»i hÃ²a giáº£i" giÃºp cÃ¡c Ä‘á»‘i tÆ°á»£ng "nÃ³i chuyá»‡n" vá»›i nhau má»™t cÃ¡ch cÃ³ tráº­t tá»±, giáº£m bá»›t sá»± lá»™n xá»™n vÃ  phá»¥ thuá»™c trá»±c tiáº¿p. NÃ³ biáº¿n má»™t má»› bÃ²ng bong thÃ nh má»™t há»‡ thá»‘ng cÃ³ tá»• chá»©c vÃ  dá»… quáº£n lÃ½ hÆ¡n nhiá»u!
       - Báº¡n Ä‘Ã£ bao giá» chÆ¡i game vÃ  muá»‘n lÆ°u láº¡i mÃ n chÆ¡i Ä‘á»ƒ lÃ¡t ná»¯a quay láº¡i tiáº¿p tá»¥c chÆ°a? Hay dÃ¹ng Word vÃ  muá»‘n "undo" (hoÃ n tÃ¡c) má»™t thao tÃ¡c nÃ o Ä‘Ã³?

LÃ m sao Ä‘á»ƒ má»™t Ä‘á»‘i tÆ°á»£ng (nhÆ° nhÃ¢n váº­t trong game cá»§a báº¡n, hay tÃ i liá»‡u Word) cÃ³ thá»ƒ *lÆ°u láº¡i tráº¡ng thÃ¡i hiá»‡n táº¡i* cá»§a nÃ³, vÃ  sau Ä‘Ã³ *khÃ´i phá»¥c láº¡i* tráº¡ng thÃ¡i Ä‘Ã³ khi cáº§n, mÃ  *khÃ´ng lÃ m lá»™ ra háº¿t nhá»¯ng bÃ­ máº­t bÃªn trong* cá»§a nÃ³ cho cáº£ tháº¿ giá»›i biáº¿t?

Nghe cÃ³ váº» ráº¯c rá»‘i nhá»‰? ChÃºng ta cáº§n má»™t cÃ¡ch Ä‘á»ƒ "chá»¥p má»™t bá»©c áº£nh" vá» tráº¡ng thÃ¡i cá»§a Ä‘á»‘i tÆ°á»£ng, cáº¥t nÃ³ Ä‘i, vÃ  sau nÃ y dÃ¹ng bá»©c áº£nh Ä‘Ã³ Ä‘á»ƒ Ä‘Æ°a Ä‘á»‘i tÆ°á»£ng vá» Ä‘Ãºng khoáº£nh kháº¯c Ä‘Ã£ chá»¥p.

ÄÃ¢y chÃ­nh lÃ  lÃºc "Memento" xuáº¥t hiá»‡n!

### Memento lÃ  gÃ¬?

NÃ³ giá»‘ng nhÆ° viá»‡c báº¡n táº¡o ra má»™t "phiÃªn báº£n lÆ°u" (save state) cá»§a má»™t Ä‘á»‘i tÆ°á»£ng. Äá»‘i tÆ°á»£ng Ä‘Ã³ cÃ³ thá»ƒ tá»± lÆ°u tráº¡ng thÃ¡i cá»§a nÃ³ vÃ o má»™t "há»™p Ä‘en" (chÃ­nh lÃ  Memento), Ä‘Æ°a cÃ¡i há»™p Ä‘en Ä‘Ã³ cho ngÆ°á»i khÃ¡c giá»¯, vÃ  sau nÃ y cÃ³ thá»ƒ dÃ¹ng láº¡i cÃ¡i há»™p Ä‘en Ä‘Ã³ Ä‘á»ƒ quay vá» tráº¡ng thÃ¡i Ä‘Ã£ lÆ°u. Äiá»u hay ho lÃ : *chá»‰ cÃ³ Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ má»›i biáº¿t cÃ¡ch má»Ÿ há»™p Ä‘en ra vÃ  hiá»ƒu Ä‘Æ°á»£c bÃªn trong cÃ³ gÃ¬*. Nhá»¯ng ngÆ°á»i khÃ¡c chá»‰ giá»¯ cÃ¡i há»™p chá»© khÃ´ng biáº¿t bÃªn trong cÃ³ gÃ¬ Ä‘Ã¢u!

HÃ£y gáº·p "bÄƒng Ä‘áº£ng" cá»§a chÃºng ta nhÃ©:

*   **Originator (NgÆ°á»i táº¡o ra):**
    *   ÄÃ¢y lÃ  Ä‘á»‘i tÆ°á»£ng mÃ  báº¡n muá»‘n lÆ°u tráº¡ng thÃ¡i cá»§a nÃ³ (vÃ­ dá»¥: nhÃ¢n váº­t game cá»§a báº¡n, tÃ i liá»‡u vÄƒn báº£n).
    *   NÃ³ biáº¿t cÃ¡ch *táº¡o ra má»™t Memento* (má»™t báº£n sao tráº¡ng thÃ¡i cá»§a nÃ³).
    *   NÃ³ cÅ©ng biáº¿t cÃ¡ch *nháº­n má»™t Memento* vÃ  *khÃ´i phá»¥c láº¡i tráº¡ng thÃ¡i cá»§a nÃ³* tá»« Memento Ä‘Ã³.
    *   ÄÃ¢y lÃ  Ä‘á»‘i tÆ°á»£ng *duy nháº¥t* cÃ³ thá»ƒ nhÃ¬n tháº¥y vÃ  thao tÃ¡c vá»›i nhá»¯ng thá»© "bÃ­ máº­t" bÃªn trong Memento.

*   **Memento (Báº£n ghi nhá»›):**
    *   ÄÃ¢y chÃ­nh lÃ  "báº£n sao tráº¡ng thÃ¡i" hay "bá»©c áº£nh" mÃ  chÃºng ta nÃ³i Ä‘áº¿n.
    *   NÃ³ chá»©a nhá»¯ng dá»¯ liá»‡u cáº§n thiáº¿t Ä‘á»ƒ Originator cÃ³ thá»ƒ khÃ´i phá»¥c láº¡i tráº¡ng thÃ¡i cá»§a mÃ¬nh.
    *   Äiá»u quan trá»ng: Äá»‘i vá»›i *bÃªn ngoÃ i* (nhá»¯ng Ä‘á»‘i tÆ°á»£ng khÃ¡c khÃ´ng pháº£i Originator), Memento chá»‰ lÃ  má»™t cÃ¡i *há»™p Ä‘en*. Há» khÃ´ng thá»ƒ nhÃ¬n vÃ o bÃªn trong hay thay Ä‘á»•i nÃ³.
    *   Äá»‘i vá»›i *Originator*, Memento lÃ  má»™t "ngÆ°á»i báº¡n thÃ¢n", nÃ³ cÃ³ thá»ƒ nhÃ¬n vÃ o bÃªn trong Memento vÃ  láº¥y ra nhá»¯ng dá»¯ liá»‡u cáº§n thiáº¿t.

*   **Caretaker (NgÆ°á»i giá»¯ há»™):**
    *   ÄÃ¢y lÃ  Ä‘á»‘i tÆ°á»£ng chá»‹u trÃ¡ch nhiá»‡m *lÆ°u trá»¯* cÃ¡c Memento.
    *   NÃ³ yÃªu cáº§u Originator táº¡o ra má»™t Memento vÃ  nháº­n láº¥y nÃ³.
    *   NÃ³ giá»¯ Memento Ä‘Ã³ (cÃ³ thá»ƒ lÃ  trong má»™t danh sÃ¡ch, má»™t stack Ä‘á»ƒ lÃ m chá»©c nÄƒng undo/redo).
    *   Khi cáº§n, nÃ³ sáº½ Ä‘Æ°a má»™t Memento Ä‘Ã£ lÆ°u cho Originator vÃ  yÃªu cáº§u Originator khÃ´i phá»¥c tráº¡ng thÃ¡i.
    *   Caretaker *khÃ´ng bao giá»* tá»± mÃ¬nh xem hay chá»‰nh sá»­a ná»™i dung bÃªn trong Memento. NÃ³ chá»‰ lÃ  ngÆ°á»i giá»¯ há»™ thÃ´i!

### Váº­y nÃ³ hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?

1.  Báº¡n muá»‘n lÆ°u tráº¡ng thÃ¡i cá»§a Originator. Caretaker sáº½ nÃ³i vá»›i Originator: "NÃ y Originator, cho tÃ´i má»™t báº£n ghi nhá»› tráº¡ng thÃ¡i cá»§a anh Ä‘i!"
2.  Originator táº¡o ra má»™t Memento, gÃ³i ghÃ©m táº¥t cáº£ tráº¡ng thÃ¡i hiá»‡n táº¡i cá»§a nÃ³ vÃ o Ä‘Ã³, vÃ  Ä‘Æ°a cho Caretaker.
3.  Caretaker nháº­n Memento vÃ  cáº¥t giá»¯ nÃ³ cáº©n tháº­n (vÃ­ dá»¥: thÃªm vÃ o má»™t danh sÃ¡ch cÃ¡c báº£n lÆ°u).
4.  Sau nÃ y, báº¡n muá»‘n quay láº¡i tráº¡ng thÃ¡i cÅ©. Caretaker sáº½ láº¥y má»™t Memento tá»« chá»— nÃ³ Ä‘ang giá»¯, vÃ  nÃ³i vá»›i Originator: "NÃ y Originator, dÃ¹ng cÃ¡i báº£n ghi nhá»› nÃ y Ä‘á»ƒ quay láº¡i tráº¡ng thÃ¡i Ä‘Ã³ Ä‘i!"
5.  Originator nháº­n Memento, má»Ÿ nÃ³ ra (vÃ¬ chá»‰ Originator má»›i biáº¿t cÃ¡ch!), láº¥y láº¡i dá»¯ liá»‡u bÃªn trong vÃ  khÃ´i phá»¥c tráº¡ng thÃ¡i cá»§a mÃ¬nh.

### Lá»£i Ã­ch cá»§a Memento:

*   **LÆ°u vÃ  khÃ´i phá»¥c tráº¡ng thÃ¡i:** Dá»… dÃ ng "quay ngÆ°á»£c thá»i gian" cho Ä‘á»‘i tÆ°á»£ng.
*   **Báº£o toÃ n tÃ­nh Ä‘Ã³ng gÃ³i (Encapsulation):** Nhá»¯ng bÃ­ máº­t bÃªn trong Originator váº«n lÃ  bÃ­ máº­t! KhÃ´ng ai ngoÃ i Originator cÃ³ thá»ƒ nhÃ¬n vÃ o hay thay Ä‘á»•i dá»¯ liá»‡u bÃªn trong Memento. Caretaker chá»‰ lÃ  "ngÆ°á»i giá»¯ há»™p Ä‘en" thÃ´i.
*   **TÃ¡ch rá»i trÃ¡ch nhiá»‡m:** Äá»‘i tÆ°á»£ng Originator chá»‰ lo viá»‡c táº¡o vÃ  khÃ´i phá»¥c tráº¡ng thÃ¡i. Äá»‘i tÆ°á»£ng Caretaker chá»‰ lo viá»‡c quáº£n lÃ½ vÃ  lÆ°u trá»¯ cÃ¡c Memento. Má»—i bÃªn lÃ m tá»‘t viá»‡c cá»§a mÃ¬nh.
       - HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang Ä‘Äƒng kÃ½ nháº­n má»™t tá» bÃ¡o...
...hoáº·c báº¡n lÃ  fan cá»§a má»™t ngÆ°á»i ná»•i tiáº¿ng vÃ  muá»‘n biáº¿t má»i tin tá»©c má»›i nháº¥t cá»§a há»...
...hay Ä‘Æ¡n giáº£n hÆ¡n, báº¡n Ä‘ang chá» má»™t chÆ°Æ¡ng trÃ¬nh khuyáº¿n mÃ£i Ä‘áº·c biá»‡t tá»« cá»­a hÃ ng yÃªu thÃ­ch.

LÃ m tháº¿ nÃ o Ä‘á»ƒ báº¡n nháº­n Ä‘Æ°á»£c nhá»¯ng thÃ´ng tin cáº­p nháº­t nÃ y?

Báº¡n *Ä‘Äƒng kÃ½*!

Khi cÃ³ Ä‘iá»u gÃ¬ má»›i xáº£y ra (bÃ¡o Ä‘Æ°á»£c in, ngÆ°á»i ná»•i tiáº¿ng Ä‘Äƒng bÃ i, cá»­a hÃ ng cÃ³ khuyáº¿n mÃ£i), "nguá»“n" thÃ´ng tin (cÃ´ng ty bÃ¡o, ngÆ°á»i ná»•i tiáº¿ng, cá»­a hÃ ng) sáº½ *thÃ´ng bÃ¡o* cho báº¡n.

Báº¡n, ngÆ°á»i Ä‘Äƒng kÃ½, chÃ­nh lÃ  "NgÆ°á»i quan sÃ¡t" (Observer).
CÃ¡i mÃ  báº¡n Ä‘ang theo dÃµi (tá» bÃ¡o, ngÆ°á»i ná»•i tiáº¿ng, cá»­a hÃ ng) lÃ  "Chá»§ thá»ƒ" (Subject).

ÄÃ³ chÃ­nh lÃ  Ã½ tÆ°á»Ÿng cá»‘t lÃµi cá»§a **Máº«u Observer**!

NÃ³ lÃ  má»™t cÃ¡ch Ä‘á»ƒ má»™t Ä‘á»‘i tÆ°á»£ng (cÃ¡i **Chá»§ thá»ƒ** - Subject) "ká»ƒ" cho cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c (nhá»¯ng **NgÆ°á»i quan sÃ¡t** - Observers) biáº¿t khi tráº¡ng thÃ¡i cá»§a nÃ³ thay Ä‘á»•i.
Nhá»¯ng NgÆ°á»i quan sÃ¡t khÃ´ng cáº§n pháº£i liÃªn tá»¥c kiá»ƒm tra. Há» chá»‰ viá»‡c chá» Ä‘Æ°á»£c *thÃ´ng bÃ¡o*.

HÃ£y nghÄ© vá» nÃ³ nhÆ° tháº¿ nÃ y:
*   **Chá»§ thá»ƒ:** "NÃ y, cÃ³ gÃ¬ má»›i rá»“i Ä‘áº¥y!"
*   **NgÆ°á»i quan sÃ¡t:** "Ok! Cáº£m Æ¡n vÃ¬ Ä‘Ã£ cáº­p nháº­t nhÃ©."

Báº±ng cÃ¡ch nÃ y, Chá»§ thá»ƒ khÃ´ng cáº§n biáº¿t *chÃ­nh xÃ¡c* táº¥t cáº£ NgÆ°á»i quan sÃ¡t lÃ  ai, chá»‰ cáº§n biáº¿t ráº±ng há» quan tÃ¢m Ä‘áº¿n cÃ¡c báº£n cáº­p nháº­t. VÃ  NgÆ°á»i quan sÃ¡t cÃ³ thá»ƒ tham gia hoáº·c rá»i Ä‘i báº¥t cá»© lÃºc nÃ o.

Äiá»u nÃ y giÃºp má»i thá»© trá»Ÿ nÃªn linh hoáº¡t vÃ  dá»… quáº£n lÃ½!
       - Hey báº¡n!

Báº¡n cÃ³ bao giá» tá»± há»i, má»™t "Ä‘á»‘i tÆ°á»£ng" (object) trong chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh nÃ³ *nhÆ° tháº¿ nÃ o* vÃ o lÃºc nÃ y khÃ´ng? NÃ³ Ä‘ang "biáº¿t" nhá»¯ng gÃ¬? NÃ³ Ä‘ang "mang" nhá»¯ng gÃ¬?

ÄÃ³ chÃ­nh lÃ  `Tráº¡ng thÃ¡i` Ä‘áº¥y!

TÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng `ConChÃ³` (Dog) trong chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh nhÃ©.
Má»—i con chÃ³ cÃ³ thá»ƒ cÃ³...
*   Má»™t cÃ¡i tÃªn riÃªng (vÃ­ dá»¥: "Má»±c")
*   Má»™t Ä‘á»™ tuá»•i (vÃ­ dá»¥: 5)
*   VÃ  nÃ³ cÃ³ Ä‘ang Ä‘Ã³i khÃ´ng? (vÃ­ dá»¥: `true` - cÃ³ Ä‘Ã³i)

Nhá»¯ng thÃ´ng tin nhÆ° tÃªn, tuá»•i, hay tráº¡ng thÃ¡i Ä‘Ã³i bá»¥ng kia chÃ­nh lÃ  `Tráº¡ng thÃ¡i` cá»§a Ä‘á»‘i tÆ°á»£ng `ConChÃ³` Ä‘Ã³.

NÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n nháº¥t, `Tráº¡ng thÃ¡i` lÃ  *táº¥t cáº£ nhá»¯ng dá»¯ liá»‡u* mÃ  má»™t Ä‘á»‘i tÆ°á»£ng Ä‘ang *giá»¯* táº¡i má»™t thá»i Ä‘iá»ƒm cá»¥ thá»ƒ.
NÃ³ giÃºp Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n trá»Ÿ nÃªn *Ä‘á»™c Ä‘Ã¡o* vÃ  cÃ³ thá»ƒ *thay Ä‘á»•i* Ä‘Æ°á»£c theo thá»i gian.
NÃ³ lÃ  cÃ¡i mÃ  lÃ m cho Ä‘á»‘i tÆ°á»£ng nÃ y *khÃ¡c* vá»›i Ä‘á»‘i tÆ°á»£ng kia, dÃ¹ chÃºng cÃ¹ng má»™t "loáº¡i" (class).

Dá»… hiá»ƒu Ä‘Ãºng khÃ´ng?
       - Chiáº¿n lÆ°á»£c

Báº¡n biáº¿t khÃ´ng, Ä‘Ã´i khi báº¡n cáº§n lÃ m má»™t viá»‡c gÃ¬ Ä‘Ã³, nhÆ°ng láº¡i cÃ³ NHIá»€U CÃCH khÃ¡c nhau Ä‘á»ƒ thá»±c hiá»‡n nÃ³!

VÃ­ dá»¥ nhÃ©: Má»™t nhÃ¢n váº­t trong game cÃ³ thá»ƒ táº¥n cÃ´ng báº±ng kiáº¿m, báº±ng cung, hoáº·c báº±ng phÃ©p thuáº­t. Má»—i láº§n táº¥n cÃ´ng lÃ  má»™t "chiáº¿n lÆ°á»£c" (cÃ¡ch lÃ m) khÃ¡c nhau, Ä‘Ãºng khÃ´ng?

Thay vÃ¬ viáº¿t má»™t Ä‘á»‘ng `if-else` rá»‘i ráº¯m Ä‘á»ƒ chá»n cÃ¡ch táº¥n cÃ´ng, chÃºng ta cÃ³ thá»ƒ *tÃ¡ch rá»i* má»—i "cÃ¡ch táº¥n cÃ´ng" thÃ nh má»™t Ä‘á»‘i tÆ°á»£ng riÃªng biá»‡t. Má»—i Ä‘á»‘i tÆ°á»£ng nÃ y sáº½ biáº¿t CÃCH Táº¤N CÃ”NG THEO Má»˜T KIá»‚U NHáº¤T Äá»ŠNH.

ÄÃ¢y chÃ­nh lÃ  Ã½ tÆ°á»Ÿng cá»§a máº«u thiáº¿t káº¿ **Strategy** (Chiáº¿n lÆ°á»£c)!

NÃ³ cho phÃ©p báº¡n:

*   Äá»‹nh nghÄ©a má»™t "há»" cÃ¡c thuáº­t toÃ¡n (hay cÃ¡c "cÃ¡ch lÃ m").
*   ÄÃ³ng gÃ³i má»—i thuáº­t toÃ¡n Ä‘Ã³ vÃ o má»™t lá»›p riÃªng biá»‡t.
*   VÃ  lÃ m cho chÃºng cÃ³ thá»ƒ hoÃ¡n Ä‘á»•i cho nhau Ä‘Æ°á»£c!

Váº­y lÃ , báº¡n cÃ³ thá»ƒ thay Ä‘á»•i "cÃ¡ch lÃ m" cá»§a má»™t Ä‘á»‘i tÆ°á»£ng Báº¤T Cá»¨ LÃšC NÃ€O mÃ  khÃ´ng cáº§n thay Ä‘á»•i cáº¥u trÃºc cá»§a chÃ­nh Ä‘á»‘i tÆ°á»£ng Ä‘Ã³. Tháº­t lÃ  linh hoáº¡t vÃ  gá»n gÃ ng!
       - ## PhÆ°Æ¡ng thá»©c Máº«u (Template Method)

NÃ y báº¡n, hÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©: báº¡n Ä‘ang lÃ m bÃ¡nh! Má»i loáº¡i bÃ¡nh Ä‘á»u cÃ³ cÃ¡c bÆ°á»›c chung chung: chuáº©n bá»‹ nguyÃªn liá»‡u, trá»™n bá»™t, nÆ°á»›ng, vÃ  trang trÃ­. NhÆ°ng mÃ , bÃ¡nh chocolate thÃ¬ trá»™n khÃ¡c, bÃ¡nh bÃ´ng lan láº¡i trá»™n kiá»ƒu khÃ¡c, vÃ  trang trÃ­ cÅ©ng cháº³ng giá»‘ng nhau táº¹o nÃ o, Ä‘Ãºng khÃ´ng?

Hoáº·c, báº¡n Ä‘ang pha cÃ  phÃª. CÃ¡c bÆ°á»›c cÆ¡ báº£n lÃ : Ä‘un nÆ°á»›c, cho cÃ  phÃª vÃ o phin/mÃ¡y, rÃ³t ra cá»‘c. NhÆ°ng cÃ  phÃª sá»¯a thÃ¬ pháº£i thÃªm sá»¯a, cÃ  phÃª Ä‘en thÃ¬ khÃ´ng.

Tháº¿ thÃ¬ lÃ m sao Ä‘á»ƒ chÃºng ta cÃ³ má»™t "khuÃ´n máº«u" chung cho cÃ¡c bÆ°á»›c nÃ y, mÃ  váº«n cho phÃ©p má»—i loáº¡i bÃ¡nh hay cÃ  phÃª tá»± quyáº¿t Ä‘á»‹nh má»™t vÃ i bÆ°á»›c riÃªng cá»§a mÃ¬nh?

ÄÃ³ chÃ­nh lÃ  lÃºc **PhÆ°Æ¡ng thá»©c Máº«u (Template Method)** xuáº¥t hiá»‡n Ä‘á»ƒ "giáº£i cá»©u" chÃºng ta!

### PhÆ°Æ¡ng thá»©c Máº«u lÃ  gÃ¬?

ÄÃ¢y lÃ  má»™t *design pattern* (máº«u thiáº¿t káº¿) cá»±c ká»³ há»¯u Ã­ch giÃºp báº¡n:

1.  **Äá»‹nh nghÄ©a "bá»™ xÆ°Æ¡ng" cá»§a má»™t thuáº­t toÃ¡n** (tá»©c lÃ  trÃ¬nh tá»± cÃ¡c bÆ°á»›c cáº§n lÃ m) trong má»™t phÆ°Æ¡ng thá»©c.
2.  Sau Ä‘Ã³, báº¡n Ä‘á»ƒ cho cÃ¡c **lá»›p con (subclasses)** tá»± quyáº¿t Ä‘á»‹nh cÃ¡ch thá»±c hiá»‡n *má»™t vÃ i bÆ°á»›c cá»¥ thá»ƒ* trong cÃ¡i bá»™ xÆ°Æ¡ng Ä‘Ã³.

NÃ³i cÃ¡ch khÃ¡c, cÃ¡c bÆ°á»›c *chung* thÃ¬ giá»¯ nguyÃªn, cÃ²n cÃ¡c bÆ°á»›c *khÃ¡c biá»‡t* thÃ¬ lá»›p con sáº½ tá»± "Ä‘iá»n vÃ o chá»— trá»‘ng". SiÃªu tiá»‡n lá»£i pháº£i khÃ´ng?

### CÃ¡c thÃ nh pháº§n chÃ­nh trong PhÆ°Æ¡ng thá»©c Máº«u

Äá»ƒ hiá»ƒu rÃµ hÆ¡n, chÃºng ta hÃ£y xem cÃ¡c "nhÃ¢n váº­t" chÃ­nh trong cÃ¢u chuyá»‡n nÃ y nhÃ©:

*   **Lá»›p trá»«u tÆ°á»£ng (Abstract Class):** ÄÃ¢y lÃ  "ngÆ°á»i cha" hay "ngÆ°á»i máº¹" chá»©a Ä‘á»±ng toÃ n bá»™ cÃ¡i "khuÃ´n máº«u" cá»§a chÃºng ta. NÃ³ cÃ³ má»™t phÆ°Æ¡ng thá»©c Ä‘áº·c biá»‡t gá»i lÃ  "phÆ°Æ¡ng thá»©c máº«u".
*   **PhÆ°Æ¡ng thá»©c máº«u (Template Method):**
    *   ÄÃ¢y lÃ  má»™t phÆ°Æ¡ng thá»©c *khÃ´ng trá»«u tÆ°á»£ng* (concrete method) náº±m trong lá»›p trá»«u tÆ°á»£ng.
    *   NÃ³ Ä‘á»‹nh nghÄ©a **trÃ¬nh tá»± cÃ¡c bÆ°á»›c** cá»§a thuáº­t toÃ¡n.
    *   NÃ³ sáº½ gá»i cÃ¡c phÆ°Æ¡ng thá»©c khÃ¡c: má»™t sá»‘ phÆ°Æ¡ng thá»©c Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a sáºµn, vÃ  má»™t sá»‘ phÆ°Æ¡ng thá»©c *trá»«u tÆ°á»£ng* (mÃ  lá»›p con pháº£i tá»± Ä‘á»‹nh nghÄ©a).
*   **CÃ¡c phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng (Abstract Methods):**
    *   ÄÃ¢y chÃ­nh lÃ  nhá»¯ng "chá»— trá»‘ng" mÃ  lá»›p con *báº¯t buá»™c pháº£i Ä‘iá»n vÃ o*.
    *   ChÃºng Ä‘áº¡i diá»‡n cho cÃ¡c bÆ°á»›c cá»¥ thá»ƒ, khÃ¡c nhau giá»¯a cÃ¡c loáº¡i, mÃ  lá»›p cha khÃ´ng biáº¿t cÃ¡ch lÃ m.
*   **CÃ¡c phÆ°Æ¡ng thá»©c cá»¥ thá»ƒ (Concrete Methods):**
    *   ÄÃ¢y lÃ  nhá»¯ng bÆ°á»›c Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a sáºµn trong lá»›p trá»«u tÆ°á»£ng.
    *   Táº¥t cáº£ cÃ¡c lá»›p con Ä‘á»u cÃ³ thá»ƒ dÃ¹ng y nguyÃªn mÃ  khÃ´ng cáº§n thay Ä‘á»•i.
*   **CÃ¡c phÆ°Æ¡ng thá»©c "mÃ³c ná»‘i" (Hook Methods):** (TÃ¹y chá»n)
    *   ÄÃ¢y lÃ  cÃ¡c phÆ°Æ¡ng thá»©c cÃ³ má»™t cÃ i Ä‘áº·t máº·c Ä‘á»‹nh (thÆ°á»ng lÃ  rá»—ng hoáº·c lÃ m má»™t viá»‡c nhá») trong lá»›p trá»«u tÆ°á»£ng.
    *   Lá»›p con *cÃ³ thá»ƒ* ghi Ä‘Ã¨ (override) chÃºng náº¿u muá»‘n, hoáº·c cá»© Ä‘á»ƒ nguyÃªn cÅ©ng Ä‘Æ°á»£c.
    *   ChÃºng cho phÃ©p lá»›p con "can thiá»‡p" vÃ o thuáº­t toÃ¡n á»Ÿ má»™t sá»‘ Ä‘iá»ƒm nháº¥t Ä‘á»‹nh mÃ  khÃ´ng lÃ m thay Ä‘á»•i cáº¥u trÃºc chÃ­nh cá»§a thuáº­t toÃ¡n.

### Váº­y nÃ³ hoáº¡t Ä‘á»™ng tháº¿ nÃ o?

HÃ£y quay láº¡i vÃ­ dá»¥ lÃ m bÃ¡nh nhÃ©:

1.  Báº¡n cÃ³ má»™t cuá»‘n sÃ¡ch cÃ´ng thá»©c chung cho "MÃ³n TrÃ¡ng Miá»‡ng" (Ä‘Ã³ lÃ  **Lá»›p trá»«u tÆ°á»£ng** cá»§a báº¡n).
2.  Trong Ä‘Ã³ cÃ³ má»™t cÃ´ng thá»©c tá»•ng quÃ¡t cho "CÃ¡ch lÃ m mÃ³n trÃ¡ng miá»‡ng" (Ä‘Ã¢y lÃ  **PhÆ°Æ¡ng thá»©c máº«u**).
    *   CÃ´ng thá»©c ghi rÃµ: "BÆ°á»›c 1: Chuáº©n bá»‹ dá»¥ng cá»¥", "BÆ°á»›c 2: Trá»™n nguyÃªn liá»‡u chÃ­nh", "BÆ°á»›c 3: NÆ°á»›ng", "BÆ°á»›c 4: Trang trÃ­", "BÆ°á»›c 5: ThÃªm topping tÃ¹y chá»n?", "BÆ°á»›c 6: Dá»n ra Ä‘Ä©a".
3.  CÃ¡c bÆ°á»›c "Chuáº©n bá»‹ dá»¥ng cá»¥" vÃ  "Dá»n ra Ä‘Ä©a" lÃ  cÃ¡c bÆ°á»›c chung, Ä‘Ã£ Ä‘Æ°á»£c chá»‰ dáº«n cá»¥ thá»ƒ (Ä‘Ã¢y lÃ  **CÃ¡c phÆ°Æ¡ng thá»©c cá»¥ thá»ƒ**).
4.  NhÆ°ng "Trá»™n nguyÃªn liá»‡u chÃ­nh", "NÆ°á»›ng" vÃ  "Trang trÃ­" thÃ¬ sao? Cuá»‘n sÃ¡ch khÃ´ng thá»ƒ biáº¿t báº¡n lÃ m bÃ¡nh kem hay chÃ¨ khÃºc báº¡ch, Ä‘Ãºng khÃ´ng? Tháº¿ nÃªn, nÃ³ chá»‰ ghi chung chung lÃ  "Trá»™n nguyÃªn liá»‡u chÃ­nh (tÃ¹y mÃ³n)", "NÆ°á»›ng (tÃ¹y mÃ³n)", "Trang trÃ­ (tÃ¹y mÃ³n)". ÄÃ¢y chÃ­nh lÃ  **CÃ¡c phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng** mÃ  báº¡n, vá»›i tÆ° cÃ¡ch lÃ  ngÆ°á»i lÃ m bÃ¡nh (lá»›p con), pháº£i tá»± nghÄ© cÃ¡ch lÃ m cho mÃ³n cá»§a mÃ¬nh.
5.  CÃ²n "ThÃªm topping tÃ¹y chá»n?" lÃ  má»™t gá»£i Ã½. Báº¡n cÃ³ thá»ƒ thÃªm socola chip, kem tÆ°Æ¡i, hoáº·c khÃ´ng thÃªm gÃ¬ cáº£. CÃ´ng thá»©c váº«n cháº¡y. ÄÃ¢y lÃ  **PhÆ°Æ¡ng thá»©c mÃ³c ná»‘i**.

Khi báº¡n muá»‘n lÃ m má»™t mÃ³n bÃ¡nh cá»¥ thá»ƒ (vÃ­ dá»¥: bÃ¡nh kem dÃ¢u), báº¡n chá»‰ cáº§n táº¡o má»™t lá»›p con "BanhKemDau" vÃ  *chá»‰* cáº§n cÃ i Ä‘áº·t cÃ¡c bÆ°á»›c "Trá»™n nguyÃªn liá»‡u chÃ­nh", "NÆ°á»›ng", "Trang trÃ­" cho bÃ¡nh kem dÃ¢u cá»§a mÃ¬nh. CÃ¡c bÆ°á»›c khÃ¡c thÃ¬ dÃ¹ng y nguyÃªn tá»« cÃ´ng thá»©c chung!

### Lá»£i Ã­ch "siÃªu to khá»•ng lá»“" cá»§a PhÆ°Æ¡ng thá»©c Máº«u

*   **TÃ¡i sá»­ dá»¥ng code:** Báº¡n khÃ´ng pháº£i viáº¿t láº¡i cÃ¡c bÆ°á»›c chung ná»¯a. Code cá»§a báº¡n sáº½ gá»n gÃ ng vÃ  Ã­t láº·p láº¡i hÆ¡n.
*   **Kiá»ƒm soÃ¡t luá»“ng thuáº­t toÃ¡n:** Lá»›p cha (lá»›p trá»«u tÆ°á»£ng) "khÃ³a" trÃ¬nh tá»± cÃ¡c bÆ°á»›c láº¡i. Lá»›p con chá»‰ cÃ³ thá»ƒ thay Ä‘á»•i cÃ¡ch thá»±c hiá»‡n *tá»«ng bÆ°á»›c*, chá»© khÃ´ng thá»ƒ thay Ä‘á»•i *thá»© tá»±* cÃ¡c bÆ°á»›c. Äiá»u nÃ y Ä‘áº£m báº£o tÃ­nh nháº¥t quÃ¡n cá»§a thuáº­t toÃ¡n.
*   **Dá»… má»Ÿ rá»™ng:** Khi muá»‘n thÃªm má»™t loáº¡i bÃ¡nh má»›i, chá»‰ cáº§n táº¡o má»™t lá»›p con má»›i vÃ  Ä‘iá»n vÃ o cÃ¡c "chá»— trá»‘ng" Ä‘Ã³.

### Cáº¥u trÃºc cÆ¡ báº£n

HÃ£y xem xÃ©t cáº¥u trÃºc cá»§a nÃ³ trong code nhÃ©:

```java
abstract class QuyTrinhLamDoUong {

    // ÄÃ¢y lÃ  PHÆ¯Æ NG THá»¨C MáºªU! NÃ³ Ä‘á»‹nh nghÄ©a trÃ¬nh tá»± cÃ¡c bÆ°á»›c chung.
    public final void chuanBiDoUong() {
        dunNuoc();
        phaChe(); // Lá»›p con pháº£i tá»± lÃ m!
        rotRaCoc();
        themPhuGiaTuyChon(); // Lá»›p con cÃ³ thá»ƒ ghi Ä‘Ã¨, hoáº·c dÃ¹ng máº·c Ä‘á»‹nh.
    }

    // CÃ¡c bÆ°á»›c Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a sáºµn (concrete methods)
    private void dunNuoc() {
        System.out.println("BÆ°á»›c 1: Äun sÃ´i nÆ°á»›c.");
    }

    private void rotRaCoc() {
        System.out.println("BÆ°á»›c 3: RÃ³t ra cá»‘c.");
    }

    // CÃ¡c bÆ°á»›c trá»«u tÆ°á»£ng (abstract methods) - Lá»›p con Báº®T BUá»˜C pháº£i cÃ i Ä‘áº·t
    protected abstract void phaChe();

    // PhÆ°Æ¡ng thá»©c mÃ³c ná»‘i (hook method) - Lá»›p con CÃ“ THá»‚ ghi Ä‘Ã¨
    // Máº·c Ä‘á»‹nh khÃ´ng thÃªm gÃ¬ cáº£.
    protected void themPhuGiaTuyChon() {
        System.out.println("BÆ°á»›c 4: KhÃ´ng thÃªm phá»¥ gia (máº·c Ä‘á»‹nh).");
    }
}

class PhaCaPhe extends QuyTrinhLamDoUong {
    @Override
    protected void phaChe() {
        System.out.println("BÆ°á»›c 2: Cho cÃ  phÃª vÃ o phin vÃ  lá»c.");
    }

    @Override
    protected void themPhuGiaTuyChon() {
        System.out.println("BÆ°á»›c 4: ThÃªm sá»¯a Ä‘áº·c vÃ  Ä‘Ã¡!");
    }
}

class PhaTra extends QuyTrinhLamDoUong {
    @Override
    protected void phaChe() {
        System.out.println("BÆ°á»›c 2: NgÃ¢m tÃºi trÃ  vÃ o nÆ°á»›c nÃ³ng.");
    }
    // Lá»›p nÃ y khÃ´ng ghi Ä‘Ã¨ themPhuGiaTuyChon(), nÃªn sáº½ dÃ¹ng máº·c Ä‘á»‹nh.
}

// CÃ¡ch dÃ¹ng:
public class TestTemplateMethod {
    public static void main(String[] args) {
        System.out.println("--- Chuáº©n bá»‹ CÃ  phÃª ---");
        QuyTrinhLamDoUong caPhe = new PhaCaPhe();
        caPhe.chuanBiDoUong(); // Gá»i phÆ°Æ¡ng thá»©c máº«u!

        System.out.println("\n--- Chuáº©n bá»‹ TrÃ  ---");
        QuyTrinhLamDoUong tra = new PhaTra();
        tra.chuanBiDoUong(); // Gá»i phÆ°Æ¡ng thá»©c máº«u!
    }
}
```

**Káº¿t quáº£ cháº¡y code sáº½ lÃ :**

```
--- Chuáº©n bá»‹ CÃ  phÃª ---
BÆ°á»›c 1: Äun sÃ´i nÆ°á»›c.
BÆ°á»›c 2: Cho cÃ  phÃª vÃ o phin vÃ  lá»c.
BÆ°á»›c 3: RÃ³t ra cá»‘c.
BÆ°á»›c 4: ThÃªm sá»¯a Ä‘áº·c vÃ  Ä‘Ã¡!

--- Chuáº©n bá»‹ TrÃ  ---
BÆ°á»›c 1: Äun sÃ´i nÆ°á»›c.
BÆ°á»›c 2: NgÃ¢m tÃºi trÃ  vÃ o nÆ°á»›c nÃ³ng.
BÆ°á»›c 3: RÃ³t ra cá»‘c.
BÆ°á»›c 4: KhÃ´ng thÃªm phá»¥ gia (máº·c Ä‘á»‹nh).
```

Báº¡n tháº¥y Ä‘Ã³, dÃ¹ lÃ  cÃ  phÃª hay trÃ , cÃ¡c bÆ°á»›c "Äun sÃ´i nÆ°á»›c" vÃ  "RÃ³t ra cá»‘c" Ä‘á»u giá»‘ng nhau vÃ  Ä‘Æ°á»£c Ä‘iá»u khiá»ƒn bá»Ÿi `QuyTrinhLamDoUong`. Chá»‰ cÃ³ bÆ°á»›c "pha cháº¿" vÃ  "thÃªm phá»¥ gia" lÃ  má»—i loáº¡i tá»± lÃ m theo cÃ¡ch riÃªng cá»§a mÃ¬nh. Tháº­t tuyá»‡t vá»i pháº£i khÃ´ng nÃ o?
       - ### Visitor

ChÃ o báº¡n! HÃ£y cÃ¹ng nhau khÃ¡m phÃ¡ má»™t "máº«u thiáº¿t káº¿" (design pattern) cá»±c ká»³ thÃº vá»‹ vÃ  há»¯u Ã­ch tÃªn lÃ  **Visitor** nhÃ©!

Báº¡n Ä‘Ã£ bao giá» gáº·p tÃ¬nh huá»‘ng nÃ y chÆ°a? Báº¡n cÃ³ má»™t nhÃ³m cÃ¡c Ä‘á»‘i tÆ°á»£ng (vÃ­ dá»¥: `Circle`, `Square`, `Triangle` - HÃ¬nh trÃ²n, HÃ¬nh vuÃ´ng, HÃ¬nh tam giÃ¡c). Báº¡n cáº§n lÃ m ráº¥t nhiá»u viá»‡c vá»›i chÃºng: tÃ­nh diá»‡n tÃ­ch, tÃ­nh chu vi, rá»“i váº½ chÃºng ra mÃ n hÃ¬nh, rá»“i lÆ°u chÃºng vÃ o file...

Cá»© má»—i khi báº¡n muá»‘n thÃªm má»™t "thao tÃ¡c" (operation) má»›i (vÃ­ dá»¥: "xuáº¥t ra Ä‘á»‹nh dáº¡ng JSON"), báº¡n láº¡i pháº£i quay láº¡i sá»­a tá»«ng lá»›p `Circle`, `Square`, `Triangle` Ä‘á»ƒ thÃªm phÆ°Æ¡ng thá»©c má»›i vÃ o. OÃ¡i oÄƒm quÃ¡ pháº£i khÃ´ng? Cáº£m giÃ¡c nhÆ° mÃ¬nh cá»© pháº£i "Ä‘á»¥ng cháº¡m" vÃ o nhá»¯ng thá»© Ä‘Ã£ á»•n Ä‘á»‹nh rá»“i áº¥y!

Äá»«ng lo! **Visitor** chÃ­nh lÃ  "ngÆ°á»i hÃ¹ng" sáº½ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y cho báº¡n!

#### Visitor lÃ  gÃ¬?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©:

*   Báº¡n cÃ³ má»™t "ngang hÃ ng" cÃ¡c Ä‘á»‘i tÆ°á»£ng mÃ  báº¡n muá»‘n lÃ m viá»‡c vá»›i chÃºng (gá»i lÃ  **Element** - Pháº§n tá»­). VÃ­ dá»¥: `Circle`, `Square`.
*   Báº¡n cÃ³ má»™t "vá»‹ khÃ¡ch" (gá»i lÃ  **Visitor** - NgÆ°á»i viáº¿ng thÄƒm) mÃ  vá»‹ khÃ¡ch nÃ y biáº¿t cÃ¡ch "thÄƒm há»i" tá»«ng loáº¡i Element khÃ¡c nhau vÃ  lÃ m nhá»¯ng viá»‡c khÃ¡c nhau tÃ¹y theo loáº¡i Element Ä‘Ã³.

Má»¥c tiÃªu chÃ­nh cá»§a Visitor lÃ  gÃ¬? NÃ³ giÃºp báº¡n **thÃªm cÃ¡c thao tÃ¡c má»›i vÃ o má»™t nhÃ³m Ä‘á»‘i tÆ°á»£ng mÃ  KHÃ”NG Cáº¦N thay Ä‘á»•i cÃ¡c lá»›p cá»§a nhá»¯ng Ä‘á»‘i tÆ°á»£ng Ä‘Ã³!** Tháº­t tuyá»‡t vá»i pháº£i khÃ´ng?

#### NÃ³ hoáº¡t Ä‘á»™ng tháº¿ nÃ o? (CÆ¡ cháº¿ hoáº¡t Ä‘á»™ng)

ÄÆ°á»£c rá»“i, Ä‘Ã¢y lÃ  "bÃ­ máº­t" cá»§a Visitor:

1.  **CÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n (Element) pháº£i "má»Ÿ cá»­a" Ä‘á»ƒ Ä‘Ã³n khÃ¡ch.**
    *   Má»—i lá»›p Element (vÃ­ dá»¥: `Circle`, `Square`) sáº½ cÃ³ má»™t phÆ°Æ¡ng thá»©c Ä‘áº·c biá»‡t, thÆ°á»ng Ä‘Æ°á»£c gá»i lÃ  `accept(Visitor visitor)`.
    *   Khi má»™t Element Ä‘Æ°á»£c `accept` má»™t Visitor, nÃ³ sáº½ gá»i ngÆ°á»£c láº¡i má»™t phÆ°Æ¡ng thá»©c trÃªn Visitor Ä‘Ã³, Ä‘Æ°a chÃ­nh nÃ³ (Element) cho Visitor "xá»­ lÃ½".

2.  **Vá»‹ khÃ¡ch cá»§a báº¡n (Visitor) pháº£i biáº¿t cÃ¡ch "thÄƒm" tá»«ng loáº¡i Ä‘á»‘i tÆ°á»£ng.**
    *   Interface cá»§a Visitor sáº½ cÃ³ cÃ¡c phÆ°Æ¡ng thá»©c `visit()` Ä‘Æ°á»£c "quÃ¡ táº£i" (overload) cho tá»«ng loáº¡i Element cá»¥ thá»ƒ. VÃ­ dá»¥: `visit(Circle circle)`, `visit(Square square)`.
    *   Khi Visitor "nháº­n" Ä‘Æ°á»£c má»™t Element qua phÆ°Æ¡ng thá»©c `visit()`, nÃ³ sáº½ biáº¿t Ä‘Ã³ lÃ  loáº¡i Element gÃ¬ vÃ  thá»±c hiá»‡n thao tÃ¡c tÆ°Æ¡ng á»©ng.

Nghe hÆ¡i "xoáº¯n nÃ£o" má»™t chÃºt pháº£i khÃ´ng? Äá»«ng lo, hÃ£y xem vÃ­ dá»¥ Ä‘Æ¡n giáº£n nÃ y nhÃ©:

```java
// BÆ°á»›c 1: Táº¡o má»™t "interface" cho cÃ¡c pháº§n tá»­ (Element) cÃ³ thá»ƒ Ä‘Æ°á»£c "thÄƒm"
interface Shape {
    void accept(ShapeVisitor visitor); // Má»i hÃ¬nh dáº¡ng Ä‘á»u pháº£i "cháº¥p nháº­n" má»™t vá»‹ khÃ¡ch
}

// BÆ°á»›c 2: Táº¡o cÃ¡c lá»›p hÃ¬nh dáº¡ng cá»¥ thá»ƒ (Concrete Elements)
class Circle implements Shape {
    private double radius;

    public Circle(double radius) {
        this.radius = radius;
    }

    public double getRadius() {
        return radius;
    }

    @Override
    public void accept(ShapeVisitor visitor) {
        visitor.visit(this); // Khi Circle cháº¥p nháº­n khÃ¡ch, nÃ³ tá»± Ä‘Æ°a mÃ¬nh cho khÃ¡ch
    }
}

class Square implements Shape {
    private double side;

    public Square(double side) {
        this.side = side;
    }

    public double getSide() {
        return side;
    }

    @Override
    public void accept(ShapeVisitor visitor) {
        visitor.visit(this); // Khi Square cháº¥p nháº­n khÃ¡ch, nÃ³ tá»± Ä‘Æ°a mÃ¬nh cho khÃ¡ch
    }
}

// BÆ°á»›c 3: Táº¡o má»™t "interface" cho vá»‹ khÃ¡ch (Visitor)
interface ShapeVisitor {
    void visit(Circle circle); // Vá»‹ khÃ¡ch biáº¿t cÃ¡ch thÄƒm Circle
    void visit(Square square); // Vá»‹ khÃ¡ch biáº¿t cÃ¡ch thÄƒm Square
}

// BÆ°á»›c 4: Táº¡o má»™t vá»‹ khÃ¡ch cá»¥ thá»ƒ Ä‘á»ƒ thá»±c hiá»‡n má»™t thao tÃ¡c nÃ o Ä‘Ã³
class AreaCalculatorVisitor implements ShapeVisitor {
    @Override
    public void visit(Circle circle) {
        // TÃ­nh diá»‡n tÃ­ch hÃ¬nh trÃ²n
        double area = Math.PI * circle.getRadius() * circle.getRadius();
        System.out.println("Diá»‡n tÃ­ch hÃ¬nh trÃ²n: " + area);
    }

    @Override
    public void visit(Square square) {
        // TÃ­nh diá»‡n tÃ­ch hÃ¬nh vuÃ´ng
        double area = square.getSide() * square.getSide();
        System.out.println("Diá»‡n tÃ­ch hÃ¬nh vuÃ´ng: " + area);
    }
}

// BÆ°á»›c 5: Sá»­ dá»¥ng nÃ³!
public class Demo {
    public static void main(String[] args) {
        Shape circle = new Circle(5);
        Shape square = new Square(10);

        // Táº¡o má»™t vá»‹ khÃ¡ch tÃ­nh diá»‡n tÃ­ch
        AreaCalculatorVisitor areaVisitor = new AreaCalculatorVisitor();

        // HÃ¬nh trÃ²n "cháº¥p nháº­n" vá»‹ khÃ¡ch tÃ­nh diá»‡n tÃ­ch
        circle.accept(areaVisitor); // Output: Diá»‡n tÃ­ch hÃ¬nh trÃ²n: 78.53981633974483

        // HÃ¬nh vuÃ´ng "cháº¥p nháº­n" vá»‹ khÃ¡ch tÃ­nh diá»‡n tÃ­ch
        square.accept(areaVisitor); // Output: Diá»‡n tÃ­ch hÃ¬nh vuÃ´ng: 100.0
    }
}
```

#### Váº­y, Visitor giÃºp Ä‘Æ°á»£c gÃ¬ cho chÃºng ta?

*   **Dá»… dÃ ng thÃªm thao tÃ¡c má»›i:** Muá»‘n thÃªm thao tÃ¡c "tÃ­nh chu vi"? Chá»‰ cáº§n táº¡o má»™t `PerimeterCalculatorVisitor` má»›i mÃ  khÃ´ng cáº§n cháº¡m vÃ o cÃ¡c lá»›p `Circle` hay `Square`!
*   **TÃ¡ch biá»‡t trÃ¡ch nhiá»‡m:** Má»—i "vá»‹ khÃ¡ch" chá»‰ lo má»™t viá»‡c cá»¥ thá»ƒ (vÃ­ dá»¥: má»™t vá»‹ khÃ¡ch chá»‰ lo tÃ­nh diá»‡n tÃ­ch, má»™t vá»‹ khÃ¡ch khÃ¡c lo váº½). CÃ¡c lá»›p hÃ¬nh dáº¡ng chá»‰ cáº§n biáº¿t cÃ¡ch "cháº¥p nháº­n" khÃ¡ch.
*   **TrÃ¡nh "Ã´ nhiá»…m" lá»›p:** CÃ¡c lá»›p `Circle`, `Square` cá»§a báº¡n sáº½ gá»n gÃ ng hÆ¡n ráº¥t nhiá»u, khÃ´ng bá»‹ "phÃ¬nh to" ra vá»›i Ä‘á»§ loáº¡i phÆ°Æ¡ng thá»©c cho má»i thao tÃ¡c.

#### Khi nÃ o nÃªn dÃ¹ng Visitor?

Báº¡n nÃªn nghÄ© Ä‘áº¿n Visitor khi:

*   Báº¡n cÃ³ má»™t cáº¥u trÃºc Ä‘á»‘i tÆ°á»£ng phá»©c táº¡p, bao gá»“m nhiá»u loáº¡i Ä‘á»‘i tÆ°á»£ng khÃ¡c nhau (nhÆ° cÃ¢y thÆ° má»¥c, Ä‘á»“ thá»‹, hoáº·c cÃ¡c loáº¡i hÃ¬nh dáº¡ng).
*   Báº¡n thÆ°á»ng xuyÃªn cáº§n thÃªm cÃ¡c thao tÃ¡c má»›i lÃªn cáº¥u trÃºc Ä‘á»‘i tÆ°á»£ng Ä‘Ã³, nhÆ°ng báº¡n khÃ´ng muá»‘n (hoáº·c khÃ´ng thá»ƒ) thay Ä‘á»•i cÃ¡c lá»›p Ä‘á»‘i tÆ°á»£ng hiá»‡n cÃ³.
*   Báº¡n muá»‘n táº­p há»£p cÃ¡c thao tÃ¡c liÃªn quan Ä‘áº¿n má»™t chá»©c nÄƒng cá»¥ thá»ƒ vÃ o má»™t nÆ¡i duy nháº¥t.

Váº­y Ä‘Ã³, Visitor lÃ  má»™t cÃ´ng cá»¥ máº¡nh máº½ giÃºp báº¡n giá»¯ cho code cá»§a mÃ¬nh sáº¡ch sáº½, dá»… má»Ÿ rá»™ng vÃ  dá»… báº£o trÃ¬ hÆ¡n ráº¥t nhiá»u! HÃ£y thá»­ "chÆ¡i Ä‘Ã¹a" vá»›i nÃ³ xem sao nhÃ©!

    **ÄÆ°á»£c rá»“i, sáºµn sÃ ng chÆ°a? Giá» thÃ¬, cÃ¹ng 'khÃ¡m phÃ¡' vÃ i vÃ­ dá»¥ vá» cÃ¡c Design Pattern siÃªu phá»• biáº¿n nhÃ©!**

    ```java
    // 1. SINGLETON - Only one instance
    public class Singleton {
        private static Singleton instance;
        private Singleton() {}
        public static synchronized Singleton getInstance() {
            if (instance == null) {
                instance = new Singleton();
            }
            return instance;
        }
    }

    // 2. FACTORY - Creates objects without exposing creation logic
    interface Animal {
        void speak();
    }
    class Dog implements Animal {
        public void speak() { System.out.println("Woof!"); }
    }
    class Cat implements Animal {
        public void speak() { System.out.println("Meow!"); }
    }
    class AnimalFactory {
        public static Animal createAnimal(String type) {
            return switch (type.toLowerCase()) {
                case "dog" -> new Dog();
                case "cat" -> new Cat();
                default -> throw new IllegalArgumentException("Unknown animal");
            };
        }
    }

    // 3. OBSERVER - One-to-many dependency
    interface Observer {
        void update(String message);
    }
    class NewsSubscriber implements Observer {
        private String name;
        public NewsSubscriber(String name) { this.name = name; }
        public void update(String message) {
            System.out.println(name + " received: " + message);
        }
    }

    // 4. STRATEGY - Family of interchangeable algorithms
    interface PaymentStrategy {
        void pay(int amount);
    }
    class CreditCardPayment implements PaymentStrategy {
        public void pay(int amount) {
            System.out.println("Paid $" + amount + " with Credit Card");
        }
    }
    class PayPalPayment implements PaymentStrategy {
        public void pay(int amount) {
            System.out.println("Paid $" + amount + " with PayPal");
        }
    }

    // 5. DECORATOR - Add behavior dynamically
    interface Coffee {
        double getCost();
        String getDescription();
    }
    class SimpleCoffee implements Coffee {
        public double getCost() { return 2.0; }
        public String getDescription() { return "Simple Coffee"; }
    }
    class MilkDecorator implements Coffee {
        private Coffee coffee;
        public MilkDecorator(Coffee coffee) { this.coffee = coffee; }
        public double getCost() { return coffee.getCost() + 0.5; }
        public String getDescription() { return coffee.getDescription() + ", Milk"; }
    }
    ```

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

48. ### Máº«u thiáº¿t káº¿ Factory lÃ  gÃ¬ váº­y?

    Báº¡n Ä‘ang cáº§n táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng má»›i trong chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh? Ráº¥t nhiá»u Ä‘á»‘i tÆ°á»£ng, nhÆ°ng báº¡n khÃ´ng muá»‘n pháº£i báº­n tÃ¢m Ä‘áº¿n *tá»«ng chi tiáº¿t nhá»* khi táº¡o chÃºng?

ChÃ o má»«ng báº¡n Ä‘áº¿n vá»›i **Máº«u thiáº¿t káº¿ Factory (Factory Design Pattern)**!

NÃ³ lÃ  má»™t "ngÆ°á»i hÃ¹ng" thuá»™c nhÃ³m cÃ¡c máº«u "táº¡o dá»±ng" (creational pattern). Nghe tÃªn lÃ  biáº¿t rá»“i Ä‘Ã³, chuyÃªn mÃ´n cá»§a nÃ³ lÃ  giÃºp báº¡n **táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng** má»™t cÃ¡ch tháº­t "ngáº§u" vÃ  hiá»‡u quáº£.

Váº­y "ngáº§u" á»Ÿ chá»— nÃ o?
TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y: Báº¡n muá»‘n Ä‘áº·t má»™t mÃ³n Ä‘á»“ Äƒn. Báº¡n chá»‰ cáº§n nÃ³i: "Cho tÃ´i má»™t chiáº¿c bÃ¡nh pizza!" Báº¡n khÃ´ng cáº§n pháº£i nÃ³i: "LÃ m cho tÃ´i má»™t cÃ¡i Ä‘áº¿ bÃ¡nh bá»™t mÃ¬, pháº¿t sá»‘t cÃ  chua, ráº¯c phÃ´ mai mozzarella, thÃªm xÃºc xÃ­ch pepperoni, nÆ°á»›ng á»Ÿ 200 Ä‘á»™ C trong 15 phÃºt!"

ÄÃ³ chÃ­nh lÃ  Factory!
NÃ³ cung cáº¥p cho báº¡n má»™t **giao diá»‡n (interface)** cá»±c ká»³ tiá»‡n lá»£i Ä‘á»ƒ báº¡n yÃªu cáº§u táº¡o Ä‘á»‘i tÆ°á»£ng. Báº¡n chá»‰ cáº§n nÃ³i *cÃ¡i gÃ¬* báº¡n muá»‘n (vÃ­ dá»¥: "pizza"), chá»© khÃ´ng cáº§n pháº£i báº­n tÃ¢m Ä‘áº¿n viá»‡c *chÃ­nh xÃ¡c* nÃ³ thuá»™c lá»›p nÃ o hay *nÃ³ Ä‘Æ°á»£c táº¡o ra nhÆ° tháº¿ nÃ o* Ä‘Ã¢u.

VÃ­ dá»¥, báº¡n muá»‘n má»™t `Robot`? Báº¡n chá»‰ cáº§n gá»i Factory vÃ  nÃ³i: "Táº¡o cho tÃ´i má»™t Robot!"
```java
// Thay vÃ¬ pháº£i tá»± mÃ¬nh quyáº¿t Ä‘á»‹nh táº¡o loáº¡i Robot cá»¥ thá»ƒ nÃ o:
// RobotChienDau robot = new RobotChienDau();
// RobotDonDep robot = new RobotDonDep();

// Báº¡n chá»‰ cáº§n nÃ³i Factory táº¡o ra cho báº¡n loáº¡i "chienDau" hoáº·c "donDep":
Robot robot = FactoryCuaBan.taoRobot("chienDau"); // Hoáº·c "donDep"
```
Tháº¥y khÃ´ng? Báº¡n khÃ´ng cáº§n biáº¿t `RobotChienDau` hay `RobotDonDep` lÃ  gÃ¬ cáº£. Báº¡n chá»‰ cáº§n nÃ³i "tÃ´i muá»‘n má»™t robot chiáº¿n Ä‘áº¥u".

Váº­y ai lÃ  ngÆ°á»i *thá»±c sá»±* lÃ m ra chiáº¿c bÃ¡nh pizza hay con robot Ä‘Ã³?
ÄÃ³ lÃ  lÃºc Factory "á»§y quyá»n" (delegate) cÃ´ng viá»‡c. NÃ³ khÃ´ng trá»±c tiáº¿p "nhÃ o náº·n" hay "láº¯p rÃ¡p" Ä‘á»‘i tÆ°á»£ng Ä‘Ã¢u.
NÃ³ Ä‘áº©y cÃ¡i "logic khá»Ÿi táº¡o" (tá»©c lÃ  cÃ¡c bÆ°á»›c cá»¥ thá»ƒ Ä‘á»ƒ táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng) xuá»‘ng cho nhá»¯ng "ngÆ°á»i khÃ¡c" lÃ m.
Nhá»¯ng "ngÆ°á»i khÃ¡c" Ä‘Ã³ cÃ³ thá»ƒ lÃ :
*   CÃ¡c **lá»›p con** cá»§a Factory (chÃºng sáº½ tá»± quyáº¿t Ä‘á»‹nh táº¡o ra loáº¡i Ä‘á»‘i tÆ°á»£ng nÃ o).
*   Hoáº·c cÃ¡c **phÆ°Æ¡ng thá»©c Ä‘áº·c biá»‡t** bÃªn trong Factory (gá»i lÃ  "factory methods"), má»—i phÆ°Æ¡ng thá»©c chuyÃªn táº¡o má»™t loáº¡i Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ.

TÃ³m láº¡i, Factory Design Pattern lÃ  má»™t "Ã´ng chá»§" tuyá»‡t vá»i. Ã”ng chá»§ nÃ y cho báº¡n má»™t cÃ¡ch Ä‘á»ƒ "Ä‘áº·t hÃ ng" táº¡o Ä‘á»‘i tÆ°á»£ng mÃ  khÃ´ng cáº§n biáº¿t chi tiáº¿t sáº£n xuáº¥t, vÃ  Ã´ng chá»§ nÃ y sáº½ giao viá»‡c sáº£n xuáº¥t cá»¥ thá»ƒ cho cÃ¡c "nhÃ¢n viÃªn" cá»§a mÃ¬nh (lá»›p con hoáº·c phÆ°Æ¡ng thá»©c factory) lo liá»‡u.

    ÄÆ°á»£c rá»“i, váº­y thÃ¬ cÃ³ nhá»¯ng kiá»ƒu Factory Pattern nÃ o Ä‘Ã¢y?

    1. **Simple Factory (PhÆ°Æ¡ng thá»©c Factory tÄ©nh):**
    ```java
    interface Shape {
        void draw();
    }

    class Circle implements Shape {
        @Override
        public void draw() {
            System.out.println("Drawing Circle");
        }
    }

    class Rectangle implements Shape {
        @Override
        public void draw() {
            System.out.println("Drawing Rectangle");
        }
    }

    class Triangle implements Shape {
        @Override
        public void draw() {
            System.out.println("Drawing Triangle");
        }
    }

    // Simple Factory
    class ShapeFactory {
        public static Shape createShape(String shapeType) {
            if (shapeType == null) {
                return null;
            }
            return switch (shapeType.toUpperCase()) {
                case "CIRCLE" -> new Circle();
                case "RECTANGLE" -> new Rectangle();
                case "TRIANGLE" -> new Triangle();
                default -> throw new IllegalArgumentException("Unknown shape: " + shapeType);
            };
        }
    }

    public class SimpleFactoryDemo {
        public static void main(String[] args) {
            Shape circle = ShapeFactory.createShape("CIRCLE");
            circle.draw();
            
            Shape rectangle = ShapeFactory.createShape("RECTANGLE");
            rectangle.draw();
        }
    }
    ```

    2. ChÃ o báº¡n, láº­p trÃ¬nh viÃªn tÆ°Æ¡ng lai!

Báº¡n Ä‘Ã£ bao giá» thá»­ lÃ m bÃ¡nh pizza chÆ°a? Báº¡n biáº¿t Ä‘áº¥y, báº¡n chá»‰ muá»‘n cÃ³ má»™t chiáº¿c bÃ¡nh pizza ngon lÃ nh Ä‘á»ƒ Äƒn, nhÆ°ng báº¡n khÃ´ng thá»±c sá»± quan tÃ¢m *lÃ m tháº¿ nÃ o* nÃ³ Ä‘Æ°á»£c lÃ m ra, miá»…n lÃ  nÃ³ ngon lÃ  Ä‘Æ°á»£c.

CÃ³ thá»ƒ báº¡n muá»‘n má»™t chiáº¿c Pizza PhÃ´ Mai, hay Pizza XÃºc XÃ­ch, hoáº·c Pizza Rau Cá»§. NhÆ°ng *quÃ¡ trÃ¬nh* lÃ m ra nÃ³, nguyÃªn liá»‡u, cÃ¡ch nÆ°á»›ng... táº¥t cáº£ cÃ³ thá»ƒ thay Ä‘á»•i tÃ¹y thuá»™c vÃ o *loáº¡i* pizza báº¡n muá»‘n.

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t `Cá»­aHÃ ngPizza` (PizzaStore). Cá»­a hÃ ng nÃ y cáº§n lÃ m ra nhá»¯ng chiáº¿c pizza. NhÆ°ng má»—i cá»­a hÃ ng láº¡i cÃ³ thá»ƒ lÃ m ra nhá»¯ng *loáº¡i* pizza khÃ¡c nhau, hoáº·c sá»­ dá»¥ng nhá»¯ng nguyÃªn liá»‡u Ä‘á»‹a phÆ°Æ¡ng hÆ¡i khÃ¡c má»™t chÃºt.

ChÃ , Ä‘Ã¢y chÃ­nh lÃ  lÃºc **Máº«u Thiáº¿t Káº¿ Factory Method** xuáº¥t hiá»‡n Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á»!

NÃ³ giÃºp báº¡n táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng mÃ  khÃ´ng cáº§n pháº£i *gáº¯n cháº·t* vá»›i cÃ¡c lá»›p cá»¥ thá»ƒ. Thay vÃ o Ä‘Ã³, nÃ³ cho phÃ©p cÃ¡c lá»›p con (subclasses) tá»± quyáº¿t Ä‘á»‹nh *lá»›p nÃ o* sáº½ Ä‘Æ°á»£c khá»Ÿi táº¡o.

HÃ£y nghÄ© theo cÃ¡ch nÃ y: báº¡n cÃ³ má»™t "nhÃ  mÃ¡y" (factory) biáº¿t cÃ¡ch táº¡o ra *má»™t sáº£n pháº©m chung*, nhÆ°ng nÃ³ láº¡i cho phÃ©p cÃ¡c "nhÃ¡nh" chuyÃªn biá»‡t cá»§a mÃ¬nh tá»± quyáº¿t Ä‘á»‹nh sáº½ sáº£n xuáº¥t *phiÃªn báº£n cá»¥ thá»ƒ nÃ o* cá»§a sáº£n pháº©m Ä‘Ã³.
    ```java
    // Product interface
    interface Vehicle {
        void drive();
    }

    class Car implements Vehicle {
        @Override
        public void drive() {
            System.out.println("Driving a car");
        }
    }

    class Motorcycle implements Vehicle {
        @Override
        public void drive() {
            System.out.println("Riding a motorcycle");
        }
    }

    // Creator abstract class
    abstract class VehicleFactory {
        // Factory method
        public abstract Vehicle createVehicle();
        
        public void deliverVehicle() {
            Vehicle vehicle = createVehicle();
            System.out.println("Delivering vehicle...");
            vehicle.drive();
        }
    }

    class CarFactory extends VehicleFactory {
        @Override
        public Vehicle createVehicle() {
            return new Car();
        }
    }

    class MotorcycleFactory extends VehicleFactory {
        @Override
        public Vehicle createVehicle() {
            return new Motorcycle();
        }
    }

    public class FactoryMethodDemo {
        public static void main(String[] args) {
            VehicleFactory carFactory = new CarFactory();
            carFactory.deliverVehicle();
            
            VehicleFactory motorcycleFactory = new MotorcycleFactory();
            motorcycleFactory.deliverVehicle();
        }
    }
    ```

    **Nhá»¯ng lá»£i Ã­ch tuyá»‡t vá»i mÃ  báº¡n sáº½ cÃ³:**
    - Báº¡n cÃ³ bao giá» tháº¥y "ngÆ°á»i táº¡o" (vÃ­ dá»¥: má»™t lá»›p Java) vÃ  "sáº£n pháº©m" (cÃ¡c Ä‘á»‘i tÆ°á»£ng nÃ³ táº¡o ra) cá»© "dÃ­nh cháº·t" láº¥y nhau khÃ´ng?

Náº¿u chÃºng quÃ¡ "thÃ¢n thiáº¿t", Ä‘áº¿n má»©c ngÆ°á»i táº¡o biáº¿t Táº¤T Táº¦N Táº¬T má»i chi tiáº¿t cá»¥ thá»ƒ cá»§a tá»«ng loáº¡i sáº£n pháº©m, thÃ¬ sao nhá»‰?

Ã€ á»«, náº¿u báº¡n thay Ä‘á»•i má»™t chi tiáº¿t nhá» trong sáº£n pháº©m, ngÆ°á»i táº¡o cÅ©ng pháº£i "Ä‘au Ä‘áº§u" sá»­a Ä‘á»•i theo! Tháº­t lÃ  má»‡t má»i!

NhÆ°ng Ä‘á»«ng lo! ChÃºng ta cÃ³ má»™t cÃ¡ch hay hÆ¡n nhiá»u: hÃ£y Ä‘á»ƒ chÃºng **liÃªn káº¿t lá»ng láº»o** vá»›i nhau.

NghÄ©a lÃ , ngÆ°á»i táº¡o khÃ´ng cáº§n pháº£i "Ã´m Ä‘á»“m" má»i chi tiáº¿t cá»¥ thá»ƒ cá»§a tá»«ng loáº¡i sáº£n pháº©m Ä‘Ã¢u. NÃ³ chá»‰ cáº§n biáº¿t "cÃ¡ch táº¡o ra má»™t sáº£n pháº©m" theo má»™t cÃ¡ch chung chung thÃ´i.

Khi báº¡n thay Ä‘á»•i hoáº·c thÃªm má»™t loáº¡i sáº£n pháº©m má»›i, ngÆ°á»i táº¡o váº«n "ung dung" lÃ m viá»‡c cá»§a mÃ¬nh, khÃ´ng cáº§n pháº£i "Ä‘á»¥ng cháº¡m" nhiá»u!

Tuyá»‡t vá»i pháº£i khÃ´ng? Má»i thá»© sáº½ linh hoáº¡t hÆ¡n, dá»… dÃ ng "nÃ¢ng cáº¥p" vÃ  "báº£o trÃ¬" hÆ¡n ráº¥t nhiá»u!
    - NguyÃªn táº¯c TrÃ¡ch nhiá»‡m ÄÆ¡n nháº¥t (SRP) â€“ Báº¡n biáº¿t khÃ´ng, Ã½ tÆ°á»Ÿng cá»‘t lÃµi lÃ : Má»—i lá»›p (hay module) chá»‰ nÃªn cÃ³ Má»˜T lÃ½ do duy nháº¥t Ä‘á»ƒ thay Ä‘á»•i thÃ´i!

VÃ  khi nÃ³i Ä‘áº¿n *mÃ£ táº¡o Ä‘á»‘i tÆ°á»£ng* (creation code) thÃ¬ sao? HÃ£y gom táº¥t cáº£ nÃ³ vÃ o Má»˜T NÆ I DUY NHáº¤T nhÃ©!
    - NguyÃªn táº¯c Má»Ÿ/ÄÃ³ng
ThÃªm cÃ¡c loáº¡i sáº£n pháº©m má»›i vÃ o há»‡ thá»‘ng? Dá»… nhÆ° Äƒn káº¹o! Báº¡n khÃ´ng cáº§n pháº£i sá»­a Ä‘á»•i code cÅ© Ä‘Ã¢u nhÃ©.
    - Báº¡n Ä‘Ã£ tá»«ng thá»­ kiá»ƒm thá»­ Ä‘Æ¡n vá»‹ (unit testing) chÆ°a? ÄÃ´i khi, nÃ³ cÃ³ thá»ƒ hÆ¡i... ráº¯c rá»‘i má»™t chÃºt, pháº£i khÃ´ng? Äáº·c biá»‡t lÃ  khi cÃ¡i "Ä‘Æ¡n vá»‹" báº¡n muá»‘n kiá»ƒm tra láº¡i cáº§n Ä‘áº¿n nhiá»u thá»© khÃ¡c phá»©c táº¡p, nhÆ° cÆ¡ sá»Ÿ dá»¯ liá»‡u tháº­t, hay má»™t dá»‹ch vá»¥ web nÃ o Ä‘Ã³.

NhÆ°ng Ä‘á»«ng lo! CÃ³ má»™t "siÃªu anh hÃ¹ng" á»Ÿ Ä‘Ã¢y Ä‘á»ƒ giÃºp báº¡n! HÃ£y chÃ o Ä‘Ã³n: **Äá»‘i tÆ°á»£ng giáº£ láº­p (Mock Objects)!**

TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©: báº¡n Ä‘ang kiá»ƒm tra má»™t máº£nh ghÃ©p nhá» trong á»©ng dá»¥ng cá»§a mÃ¬nh. Máº£nh ghÃ©p nÃ y cáº§n giao tiáº¿p vá»›i má»™t há»‡ thá»‘ng khÃ¡c, vÃ­ dá»¥ nhÆ° cÆ¡ sá»Ÿ dá»¯ liá»‡u tháº­t, hoáº·c má»™t dá»‹ch vá»¥ web phá»©c táº¡p nÃ o Ä‘Ã³.

Náº¿u báº¡n dÃ¹ng cÃ¡i "tháº­t" Ä‘á»ƒ kiá»ƒm thá»­, nÃ³ cÃ³ thá»ƒ:
*   Cháº¡y ráº¥t cháº­m.
*   KhÃ³ cÃ i Ä‘áº·t mÃ´i trÆ°á»ng.
*   Tháº­m chÃ­ gÃ¢y ra lá»—i khÃ´ng mong muá»‘n trong dá»¯ liá»‡u tháº­t!

ÄÃ³ lÃ  lÃºc Ä‘á»‘i tÆ°á»£ng giáº£ láº­p tá»a sÃ¡ng!

**Äá»‘i tÆ°á»£ng giáº£ láº­p lÃ  gÃ¬?**
ChÃºng lÃ  nhá»¯ng **báº£n sao "giáº£ vá»"**, nhá»¯ng Ä‘á»‘i tÆ°á»£ng "Ä‘Ã³ng vai" y há»‡t nhÆ° Ä‘á»‘i tÆ°á»£ng tháº­t. NhÆ°ng chÃºng ta cÃ³ thá»ƒ Ä‘iá»u khiá»ƒn chÃºng theo Ã½ mÃ¬nh!

**ChÃºng giÃºp kiá»ƒm thá»­ dá»… dÃ ng hÆ¡n nhÆ° tháº¿ nÃ o?**
1.  **CÃ´ láº­p code:** Vá»›i Ä‘á»‘i tÆ°á»£ng giáº£ láº­p, báº¡n khÃ´ng cáº§n pháº£i lo láº¯ng vá» viá»‡c káº¿t ná»‘i Ä‘áº¿n cÆ¡ sá»Ÿ dá»¯ liá»‡u tháº­t, hay chá» Ä‘á»£i pháº£n há»“i tá»« dá»‹ch vá»¥ web ná»¯a.
2.  **Kiá»ƒm soÃ¡t hoÃ n toÃ n:** Báº¡n chá»‰ cáº§n nÃ³i vá»›i Ä‘á»‘i tÆ°á»£ng giáº£ láº­p: "NÃ y, khi ai Ä‘Ã³ gá»i phÆ°Æ¡ng thá»©c X cá»§a báº¡n, hÃ£y tráº£ vá» giÃ¡ trá»‹ Y nhÃ©!" hoáº·c "HÃ£y giáº£ vá» nhÆ° báº¡n Ä‘Ã£ lÆ°u dá»¯ liá»‡u thÃ nh cÃ´ng Ä‘i!".
3.  **Táº­p trung vÃ o logic cá»§a báº¡n:** Äiá»u nÃ y giÃºp báº¡n chá»‰ táº­p trung vÃ o logic cá»§a chÃ­nh cÃ¡i "Ä‘Æ¡n vá»‹" Ä‘ang kiá»ƒm tra, mÃ  khÃ´ng bá»‹ phÃ¢n tÃ¢m bá»Ÿi nhá»¯ng thá»© xung quanh.

Káº¿t quáº£ lÃ  gÃ¬ Æ°? Kiá»ƒm thá»­ Ä‘Æ¡n vá»‹ trá»Ÿ nÃªn **nhanh hÆ¡n, dá»… hÆ¡n, vÃ  Ä‘Ã¡ng tin cáº­y hÆ¡n ráº¥t nhiá»u!** Tháº­t tuyá»‡t vá»i, pháº£i khÃ´ng nÃ o?

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

49. ### Váº­y, máº«u thiáº¿t káº¿ Builder lÃ  gÃ¬ váº­y nhá»‰?

    ChÃ o báº¡n! HÃ´m nay chÃºng ta sáº½ cÃ¹ng khÃ¡m phÃ¡ má»™t "cÃ´ng thá»©c" siÃªu hay ho trong láº­p trÃ¬nh, tÃªn lÃ  **Builder Design Pattern**.

Báº¡n cÃ³ biáº¿t khÃ´ng, Builder Design Pattern thuá»™c nhÃ³m "creational pattern" â€“ nhá»¯ng cÃ´ng thá»©c giÃºp chÃºng ta táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng (objects) má»™t cÃ¡ch thÃ´ng minh vÃ  cÃ³ tá»• chá»©c.

Váº­y nÃ³ lÃ m gÃ¬ Ä‘áº·c biá»‡t?

1.  **TÃ¡ch biá»‡t viá»‡c "xÃ¢y dá»±ng" vÃ  "hiá»ƒn thá»‹":**
    *   HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang xÃ¢y má»™t chiáº¿c xe hÆ¡i siÃªu xá»‹n, hay má»™t cÃ¡i bÃ¡nh burger "khá»§ng" vá»›i Ä‘á»§ loáº¡i topping.
    *   Builder Pattern lÃ m gÃ¬? NÃ³ **TÃCH BIá»†T** viá»‡c "láº¯p rÃ¡p" (xÃ¢y dá»±ng) cÃ¡i xe/bÃ¡nh Ä‘Ã³ ra khá»i "hÃ¬nh dáº¡ng cuá»‘i cÃ¹ng" (biá»ƒu diá»…n) cá»§a nÃ³.
    *   NÃ³i cÃ¡ch khÃ¡c, nÃ³ khÃ´ng báº¯t báº¡n pháº£i nghÄ© vá» "nÃ³ trÃ´ng nhÆ° tháº¿ nÃ o khi xong" trong lÃºc báº¡n Ä‘ang "cho thÃªm phÃ´ mai" hay "gáº¯n bÃ¡nh xe". Ráº¥t gá»n gÃ ng pháº£i khÃ´ng?

2.  **XÃ¢y dá»±ng tá»«ng bÆ°á»›c má»™t:**
    *   Thay vÃ¬ pháº£i táº¡o ra má»i thá»© cÃ¹ng má»™t lÃºc trong má»™t "cÃº nhÃ¡y máº¯t" (mÃ  cÃ³ khi báº¡n quÃªn máº¥t má»™t chi tiáº¿t nÃ o Ä‘Ã³!), Builder cho phÃ©p báº¡n xÃ¢y dá»±ng Ä‘á»‘i tÆ°á»£ng **Tá»ªNG BÆ¯á»šC Má»˜T**.
    *   ThÃªm cÃ¡i nÃ y, rá»“i thÃªm cÃ¡i kia, rá»“i cÃ¡i ná»... Cá»© tá»« tá»« mÃ  lÃ m, khÃ´ng lo bá» sÃ³t!

3.  **Má»™t quy trÃ¬nh, nhiá»u káº¿t quáº£:**
    *   VÃ  Ä‘Ã¢y má»›i lÃ  pháº§n hay ho nÃ y! Vá»›i **CÃ™NG** má»™t "cÃ´ng thá»©c xÃ¢y dá»±ng" (construction process) Ä‘Ã³, báº¡n cÃ³ thá»ƒ táº¡o ra **NHIá»€U PHIÃŠN Báº¢N** khÃ¡c nhau cá»§a Ä‘á»‘i tÆ°á»£ng.
    *   VÃ­ dá»¥, tá»« cÃ¹ng má»™t "quy trÃ¬nh lÃ m burger", báº¡n cÃ³ thá»ƒ lÃ m má»™t cÃ¡i burger "Äƒn chay" (khÃ´ng thá»‹t), má»™t cÃ¡i burger "thá»‹t bÃ² siÃªu to khá»•ng lá»“", hoáº·c má»™t cÃ¡i burger "gÃ  giÃ²n tan".
    *   Má»—i cÃ¡i lÃ  má»™t "biá»ƒu diá»…n" (representation) khÃ¡c nhau, nhÆ°ng quy trÃ¬nh lÃ m thÃ¬ váº«n tháº¿! Tháº­t tiá»‡n lá»£i pháº£i khÃ´ng nÃ o?

    Váº­y khi nÃ o chÃºng ta nÃªn dÃ¹ng nÃ³ Ä‘Ã¢y?
    - Khi Ä‘á»‘i tÆ°á»£ng cÃ³ *hÃ ng tÃ¡* tham sá»‘, mÃ  chÃºng láº¡i *tÃ¹y chá»n* ná»¯a chá»©!
    - Khi quÃ¡ trÃ¬nh 'sinh ra' má»™t Ä‘á»‘i tÆ°á»£ng láº¡i cáº§n Ä‘áº¿n *ráº¥t nhiá»u* bÆ°á»›c.
    - Báº¡n muá»‘n táº¡o má»™t Ä‘á»‘i tÆ°á»£ng mÃ , má»™t khi Ä‘Ã£ 'ra Ä‘á»i' rá»“i, thÃ¬ sáº½ 'báº¥t biáº¿n' mÃ£i mÃ£i?

NghÄ©a lÃ , khÃ´ng ai cÃ³ thá»ƒ thay Ä‘á»•i thÃ´ng tin bÃªn trong nÃ³ Ä‘Æ°á»£c ná»¯a Ä‘Ã¢u nhÃ©!

VÃ  giáº£ sá»­ cÃ¡i Ä‘á»‘i tÆ°á»£ng 'báº¥t biáº¿n' nÃ y láº¡i chá»©a Ráº¤T NHIá»€U thá»© bÃªn trong? Kiá»ƒu nhÆ°, nÃ³ cÃ³ cáº£ 'tÃ¡' cÃ¡c 'trÆ°á»ng' (fields) khÃ¡c nhau áº¥y!

    ```java
    // Product class with many fields
    class Computer {
        // Required parameters
        private final String processor;
        private final int ram;
        
        // Optional parameters
        private final int storage;
        private final boolean hasGraphicsCard;
        private final boolean hasBluetooth;
        private final boolean hasWifi;
        private final String operatingSystem;
        
        private Computer(ComputerBuilder builder) {
            this.processor = builder.processor;
            this.ram = builder.ram;
            this.storage = builder.storage;
            this.hasGraphicsCard = builder.hasGraphicsCard;
            this.hasBluetooth = builder.hasBluetooth;
            this.hasWifi = builder.hasWifi;
            this.operatingSystem = builder.operatingSystem;
        }
        
        // Getters
        public String getProcessor() { return processor; }
        public int getRam() { return ram; }
        public int getStorage() { return storage; }
        public boolean hasGraphicsCard() { return hasGraphicsCard; }
        public boolean hasBluetooth() { return hasBluetooth; }
        public boolean hasWifi() { return hasWifi; }
        public String getOperatingSystem() { return operatingSystem; }
        
        @Override
        public String toString() {
            return "Computer{" +
                "processor='" + processor + '\'' +
                ", ram=" + ram + "GB" +
                ", storage=" + storage + "GB" +
                ", graphicsCard=" + hasGraphicsCard +
                ", bluetooth=" + hasBluetooth +
                ", wifi=" + hasWifi +
                ", OS='" + operatingSystem + '\'' +
                '}';
        }
        
        // Static Builder class
        public static class ComputerBuilder {
            // Required parameters
            private final String processor;
            private final int ram;
            
            // Optional parameters with default values
            private int storage = 256;
            private boolean hasGraphicsCard = false;
            private boolean hasBluetooth = true;
            private boolean hasWifi = true;
            private String operatingSystem = "Windows";
            
            // Constructor with required parameters
            public ComputerBuilder(String processor, int ram) {
                this.processor = processor;
                this.ram = ram;
            }
            
            // Builder methods for optional parameters
            public ComputerBuilder storage(int storage) {
                this.storage = storage;
                return this;
            }
            
            public ComputerBuilder graphicsCard(boolean hasGraphicsCard) {
                this.hasGraphicsCard = hasGraphicsCard;
                return this;
            }
            
            public ComputerBuilder bluetooth(boolean hasBluetooth) {
                this.hasBluetooth = hasBluetooth;
                return this;
            }
            
            public ComputerBuilder wifi(boolean hasWifi) {
                this.hasWifi = hasWifi;
                return this;
            }
            
            public ComputerBuilder operatingSystem(String operatingSystem) {
                this.operatingSystem = operatingSystem;
                return this;
            }
            
            // Build method to create the final object
            public Computer build() {
                return new Computer(this);
            }
        }
    }

    public class BuilderPatternDemo {
        public static void main(String[] args) {
            // Building a gaming computer
            Computer gamingPC = new Computer.ComputerBuilder("Intel i9", 32)
                .storage(1000)
                .graphicsCard(true)
                .bluetooth(true)
                .wifi(true)
                .operatingSystem("Windows 11")
                .build();
            
            System.out.println("Gaming PC: " + gamingPC);
            
            // Building a basic computer with defaults
            Computer basicPC = new Computer.ComputerBuilder("Intel i3", 8)
                .build();
            
            System.out.println("Basic PC: " + basicPC);
            
            // Building a Mac
            Computer mac = new Computer.ComputerBuilder("Apple M2", 16)
                .storage(512)
                .operatingSystem("macOS")
                .build();
            
            System.out.println("Mac: " + mac);
        }
    }
    ```

    HÃ£y cÃ¹ng khÃ¡m phÃ¡ nhá»¯ng lá»£i Ã­ch nhÃ©:
    - LÃ m sao Ä‘á»ƒ code cá»§a báº¡n trÃ´ng tháº­t 'xá»‹n' vÃ  dá»… Ä‘á»c, cá»© nhÆ° Ä‘ang ká»ƒ má»™t cÃ¢u chuyá»‡n váº­y? ÄÃ³ chÃ­nh lÃ  lÃºc 'XÃ¢u chuá»—i phÆ°Æ¡ng thá»©c' bÆ°á»›c vÃ o cuá»™c chÆ¡i! (NgÆ°á»i ta cÃ²n gá»i kiá»ƒu nÃ y lÃ  'Giao diá»‡n trÃ´i cháº£y' Ä‘Ã³ nha!)
    - Ã€ nÃ y, báº¡n cÃ³ biáº¿t khÃ´ng? Viá»‡c táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng báº¥t biáº¿n (immutable objects) cá»±c ká»³ dá»… dÃ ng luÃ´n Ä‘Ã³!
    - **TÃ¡ch biá»‡t rÃµ rÃ ng giá»¯a viá»‡c 'xÃ¢y dá»±ng' vÃ  'thá»ƒ hiá»‡n'**

NÃ y báº¡n, cÃ³ má»™t Ã½ tÆ°á»Ÿng cá»±c ká»³ quan trá»ng mÃ  báº¡n cáº§n náº¯m rÃµ Ä‘áº¥y!

NÃ³ nÃ³i ráº±ng, hÃ£y *tÃ¡ch báº¡ch háº³n* hai viá»‡c nÃ y ra, Ä‘á»«ng Ä‘á»ƒ chÃºng dÃ­nh vÃ o nhau nhÃ©:

1.  **Viá»‡c xÃ¢y dá»±ng (construction):** ÄÃ¢y lÃ  *cÃ¡ch báº¡n táº¡o ra* má»™t thá»© gÃ¬ Ä‘Ã³, cÃ¡c bÆ°á»›c "bÃ­ máº­t" bÃªn trong, logic áº©n Ä‘á»ƒ nÃ³ hoáº¡t Ä‘á»™ng.
2.  **Viá»‡c thá»ƒ hiá»‡n (representation):** ÄÃ¢y lÃ  *cÃ¡ch báº¡n cho nÃ³ xuáº¥t hiá»‡n* ra bÃªn ngoÃ i, hÃ¬nh dÃ¡ng mÃ  ngÆ°á»i khÃ¡c nhÃ¬n tháº¥y, hoáº·c cÃ¡ch nÃ³ giao tiáº¿p vá»›i cÃ¡c pháº§n khÃ¡c cá»§a chÆ°Æ¡ng trÃ¬nh.

TÃ¡ch biá»‡t nhÆ° váº­y sáº½ giÃºp báº¡n quáº£n lÃ½ má»i thá»© dá»… dÃ ng hÆ¡n ráº¥t nhiá»u Ä‘Ã³!
    - GiÃºp báº¡n trÃ¡nh Ä‘Æ°á»£c kiá»ƒu constructor cá»© dÃ i dáº§n dÃ i dáº§n (telescoping constructor) â€“ má»™t 'lá»—i thiáº¿t káº¿' khÃ´ng hay ho chÃºt nÃ o!

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

50. ### Bá»™ nhá»› Heap vÃ  Stack khÃ¡c nhau nhÆ° tháº¿ nÃ o nhá»‰?

    NÃ y báº¡n, Ä‘á»ƒ Ã½ chÃºt nhÃ©! Bá»™ nhá»› Java cá»§a chÃºng ta, nÆ¡i má»i chÆ°Æ¡ng trÃ¬nh cháº¡y, nÃ³ khÃ´ng pháº£i lÃ  má»™t 'khá»‘i' duy nháº¥t Ä‘Ã¢u.

Thá»±c ra, nÃ³ Ä‘Æ°á»£c chia thÃ nh hai "khu vá»±c" chÃ­nh siÃªu quan trá»ng!

Hai khu vá»±c Ä‘Ã³ cÃ³ tÃªn lÃ  **Heap** vÃ  **Stack**.

VÃ  báº¡n biáº¿t khÃ´ng, viá»‡c 'soi' ká»¹ Ä‘á»ƒ tháº¥y sá»± khÃ¡c biá»‡t giá»¯a chÃºng lÃ  **cá»±c ká»³, cá»±c ká»³ quan trá»ng** Ä‘Ã³! NÃ³ chÃ­nh lÃ  'chÃ¬a khÃ³a vÃ ng' giÃºp báº¡n lÃ m chá»§ Ä‘Æ°á»£c viá»‡c **quáº£n lÃ½ bá»™ nhá»›** trong Java. Nghe háº¥p dáº«n chÆ°a?

    | Bá»™ nhá»› Stack | Bá»™ nhá»› Heap |
| :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **NÃ³ lÃ  gÃ¬?** NÃ³ giá»‘ng nhÆ° má»™t cÃ¡i **chá»“ng Ä‘Ä©a** váº­y Ä‘Ã³! ÄÄ©a nÃ o báº¡n Ä‘áº·t lÃªn sau cÃ¹ng, thÃ¬ báº¡n sáº½ láº¥y ra trÆ°á»›c tiÃªn. ÄÆ¡n giáº£n váº­y Ä‘Ã³! | **NÃ³ lÃ  gÃ¬?** ÄÃ¢y lÃ  má»™t cÃ¡i **"kho chá»©a Ä‘á»“" lá»›n hÆ¡n, rá»™ng rÃ£i hÆ¡n**. Báº¡n cÃ³ thá»ƒ Ä‘á»ƒ báº¥t cá»© thá»© gÃ¬ báº¡n muá»‘n vÃ o Ä‘Ã¢y, miá»…n lÃ  báº¡n giá»¯ "Ä‘á»‹a chá»‰" Ä‘á»ƒ tÃ¬m láº¡i nÃ³. |
| **NÃ³ lÆ°u trá»¯ cÃ¡i gÃ¬?**<ul><li>Máº¥y biáº¿n "cá»¥c bá»™" (local variables) Ã¡. LÃ  nhá»¯ng biáº¿n báº¡n khai bÃ¡o *bÃªn trong* má»™t phÆ°Æ¡ng thá»©c.</li><li>CÃ¡c tham sá»‘ mÃ  báº¡n truyá»n cho má»™t phÆ°Æ¡ng thá»©c.</li><li>NÃ³ cÃ²n giÃºp Java biáº¿t phÆ°Æ¡ng thá»©c nÃ o Ä‘ang cháº¡y vÃ  khi xong thÃ¬ pháº£i quay vá» Ä‘Ã¢u ná»¯a.</li></ul> | **NÃ³ lÆ°u trá»¯ cÃ¡i gÃ¬?**<ul><li>Táº¥t cáº£ cÃ¡c "Ä‘á»‘i tÆ°á»£ng" (objects) mÃ  báº¡n táº¡o ra báº±ng tá»« khÃ³a `new` Ä‘Ã³! VÃ­ dá»¥ nhÆ° `new ConCho()` hay `new XeHoi()`.</li><li>Máº¥y cÃ¡i "máº£ng" (arrays) cá»§a báº¡n ná»¯a.</li></ul> |
| **CÃ¡ch nÃ³ hoáº¡t Ä‘á»™ng:** ÄÃºng kiá»ƒu "VÃ o sau, ra trÆ°á»›c" (LIFO - Last-In, First-Out). PhÆ°Æ¡ng thá»©c nÃ o Ä‘Æ°á»£c gá»i gáº§n nháº¥t sáº½ náº±m trÃªn cÃ¹ng cá»§a chá»“ng stack, vÃ  nÃ³ sáº½ Ä‘Æ°á»£c xá»­ lÃ½ xong trÆ°á»›c. | **CÃ¡ch nÃ³ hoáº¡t Ä‘á»™ng:** Cháº³ng cÃ³ thá»© tá»± "vÃ o trÆ°á»›c ra sau" hay "vÃ o sau ra trÆ°á»›c" gÃ¬ Ä‘áº·c biá»‡t cáº£. Báº¡n cÃ³ thá»ƒ láº¥y báº¥t ká»³ dá»¯ liá»‡u nÃ o á»Ÿ Ä‘Ã¢y báº¥t cá»© lÃºc nÃ o, miá»…n lÃ  báº¡n biáº¿t "Ä‘á»‹a chá»‰" cá»§a nÃ³. |
| **Khi nÃ o nÃ³ xuáº¥t hiá»‡n vÃ  biáº¿n máº¥t?**<ul><li>NÃ³ tá»± Ä‘á»™ng "hiá»‡n hÃ¬nh" khi báº¡n gá»i má»™t phÆ°Æ¡ng thá»©c.</li><li>VÃ  "biáº¿n máº¥t" (Ä‘Æ°á»£c giáº£i phÃ³ng) ngay láº­p tá»©c khi phÆ°Æ¡ng thá»©c Ä‘Ã³ cháº¡y xong. Ráº¥t gá»n gÃ ng!</li></ul> | **Khi nÃ o nÃ³ xuáº¥t hiá»‡n vÃ  biáº¿n máº¥t?**<ul><li>NÃ³ "xuáº¥t hiá»‡n" khi báº¡n dÃ¹ng `new` Ä‘á»ƒ táº¡o má»™t Ä‘á»‘i tÆ°á»£ng.</li><li>NÃ³ Ä‘Æ°á»£c "dá»n dáº¹p" bá»Ÿi anh chÃ ng "Bá»™ thu gom rÃ¡c" (Garbage Collector) cá»§a Java khi khÃ´ng cÃ²n ai "dÃ¹ng" hay "chá»‰" vÃ o Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ ná»¯a. Viá»‡c dá»n dáº¹p nÃ y cÃ³ thá»ƒ máº¥t má»™t chÃºt thá»i gian nha.</li></ul> |
| **NÃ³ nhanh cá»¡ nÃ o?** SiÃªu nhanh luÃ´n! Truy cáº­p dá»¯ liá»‡u á»Ÿ Ä‘Ã¢y cá»±c ká»³ láº¹ vÃ¬ má»i thá»© Ä‘Æ°á»£c sáº¯p xáº¿p ráº¥t ngÄƒn náº¯p. | **NÃ³ nhanh cá»¡ nÃ o?** Cháº­m hÆ¡n Stack má»™t chÃºt xÃ­u. VÃ¬ nÃ³ lá»›n hÆ¡n vÃ  má»i thá»© khÃ´ng Ä‘Æ°á»£c sáº¯p xáº¿p quÃ¡ cháº·t cháº½ nhÆ° Stack. |
| **KÃ­ch thÆ°á»›c cá»§a nÃ³?** ThÆ°á»ng thÃ¬ nhá» hÆ¡n Heap nhiá»u. KÃ­ch thÆ°á»›c cá»§a nÃ³ Ä‘Æ°á»£c "chá»‘t" hoáº·c cÃ³ giá»›i háº¡n. | **KÃ­ch thÆ°á»›c cá»§a nÃ³?** Lá»›n hÆ¡n Stack ráº¥t nhiá»u! KÃ­ch thÆ°á»›c cá»§a nÃ³ cÃ³ thá»ƒ "phÃ¬nh to" hay "teo nhá»" trong lÃºc chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y. |
    |--------------|-------------|
    | Báº¡n hÃ¬nh dung tháº¿ nÃ y nhÃ©: Khi chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cháº¡y, nÃ³ cá»© gá»i háº¿t phÆ°Æ¡ng thá»©c nÃ y Ä‘áº¿n phÆ°Æ¡ng thá»©c khÃ¡c, Ä‘Ãºng khÃ´ng nÃ o? ThÃ¬ cÃ¡i chá»— nÃ y nÃ¨, nÃ³ giá»‘ng nhÆ° má»™t chá»“ng Ä‘Ä©a váº­y Ä‘Ã³! Má»—i khi má»™t phÆ°Æ¡ng thá»©c Ä‘Æ°á»£c gá»i, nÃ³ Ä‘Æ°á»£c 'Ä‘áº·t' lÃªn trÃªn cÃ¹ng. VÃ  cáº£ nhá»¯ng biáº¿n *cá»¥c bá»™* (máº¥y cÃ¡i biáº¿n chá»‰ 'sá»‘ng' bÃªn trong phÆ°Æ¡ng thá»©c Ä‘Ã³ thÃ´i) cÅ©ng Ä‘Æ°á»£c 'ghi chÃº' á»Ÿ Ä‘Ã¢y luÃ´n! | CÃ²n Ä‘Ã¢y thÃ¬ sao? ÄÃ¢y lÃ  'kho chá»©a Ä‘á»“' khá»•ng lá»“ cho táº¥t cáº£ cÃ¡c *Ä‘á»‘i tÆ°á»£ng* mÃ  báº¡n táº¡o ra báº±ng tá»« khÃ³a `new` Ä‘Ã³! Khi báº¡n táº¡o má»™t `Dog` má»›i, con chÃ³ thá»±c sá»± Ä‘Ã³ sáº½ 'sá»‘ng' á»Ÿ Ä‘Ã¢y. VÃ  táº¥t cáº£ nhá»¯ng Ä‘áº·c Ä‘iá»ƒm riÃªng cá»§a *tá»«ng con chÃ³ cá»¥ thá»ƒ* (nhÆ° tÃªn, mÃ u lÃ´ng, cÃ¢n náº·ng â€“ máº¥y cÃ¡i biáº¿n thá»ƒ hiá»‡n áº¥y) cÅ©ng Ä‘Æ°á»£c cáº¥t giá»¯ *ngay bÃªn trong* con chÃ³ Ä‘Ã³, á»Ÿ chá»— nÃ y luÃ´n! |
    | Cáº¥u trÃºc LIFO (VÃ o sau Ra trÆ°á»›c) | KhÃ´ng cÃ³ thá»© tá»± cá»¥ thá»ƒ nÃ o cáº£ |
|---|---|
| Báº¡n hÃ¬nh dung má»™t chá»“ng Ä‘Ä©a nhÃ©? CÃ¡i Ä‘Ä©a báº¡n Ä‘áº·t lÃªn trÃªn cÃ¹ng *sau cÃ¹ng* áº¥y, sáº½ lÃ  cÃ¡i Ä‘Ä©a báº¡n láº¥y ra *Ä‘áº§u tiÃªn*. ÄÃ³ chÃ­nh xÃ¡c lÃ  Ã½ nghÄ©a cá»§a LIFO Ä‘áº¥y! Giá»‘ng nhÆ° má»™t chá»“ng bÃ¡nh káº¿p váº­y! | á» Ä‘Ã¢y, má»i thá»© cháº³ng quan tÃ¢m Ä‘áº¿n viá»‡c chÃºng Ä‘áº¿n khi nÃ o cáº£. KhÃ´ng cÃ³ quy táº¯c 'vÃ o trÆ°á»›c ra trÆ°á»›c' hay 'vÃ o sau ra trÆ°á»›c' nÃ o á»Ÿ Ä‘Ã¢y Ä‘Ã¢u. NÃ³ giá»‘ng nhÆ° má»™t tÃºi bi ve váº­y â€“ báº¡n cá»© thÃ² tay vÃ o láº¥y Ä‘áº¡i má»™t viÃªn, vÃ  nÃ³ cÃ³ thá»ƒ lÃ  báº¥t ká»³ viÃªn nÃ o trong Ä‘Ã³! |
    | An toÃ n cho luá»“ng (má»—i luá»“ng cÃ³ 'ngÄƒn xáº¿p' riÃªng cá»§a mÃ¬nh nÃ¨!) | ÄÆ°á»£c chia sáº» chung giá»¯a Táº¤T Cáº¢ cÃ¡c luá»“ng |
    *   **Viá»‡c cáº¥p phÃ¡t/giáº£i phÃ³ng bá»™ nhá»›? Tá»± Ä‘á»™ng háº¿t!** Báº¡n khÃ´ng cáº§n pháº£i Ä‘á»™ng tay vÃ o Ä‘Ã¢u nhÃ©.
*   **Ai quáº£n lÃ½? ChÃ­nh lÃ  anh báº¡n Garbage Collector!** Anh áº¥y sáº½ dá»n dáº¹p nhá»¯ng pháº§n bá»™ nhá»› khÃ´ng cÃ²n dÃ¹ng Ä‘áº¿n ná»¯a.
    | KÃ­ch thÆ°á»›c cá»‘ Ä‘á»‹nh (cÃ³ thá»ƒ gÃ¢y ra StackOverflowError)                                                                                                                                                                                                                                                               | KÃ­ch thÆ°á»›c Ä‘á»™ng (cÃ³ thá»ƒ gÃ¢y ra OutOfMemoryError)                                                                                                                                                                                                                                                                                               |
| :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| NÃ y, khi báº¡n táº¡o ra thá»© nÃ y, kÃ­ch thÆ°á»›c cá»§a nÃ³ Ä‘Ã£ Ä‘Æ°á»£c "chá»‘t" rá»“i, khÃ´ng thay Ä‘á»•i sau Ä‘Ã³ Ä‘Æ°á»£c Ä‘Ã¢u nhÃ©! Giá»‘ng nhÆ° xáº¿p chá»“ng Ä‘Ä©a cao quÃ¡ váº­y. Náº¿u báº¡n cá»‘ gáº¯ng nhÃ©t quÃ¡ nhiá»u thá»© vÃ o (hoáº·c gá»i quÃ¡ nhiá»u hÃ m láº·p Ä‘i láº·p láº¡i) mÃ  khÃ´ng cÃ³ Ä‘iá»ƒm dá»«ng, bá»™ nhá»› stack sáº½ bá»‹ Ä‘áº§y vÃ  **bÃ¹m!** Báº¡n sáº½ gáº·p ngay `StackOverflowError` Ä‘Ã¡ng sá»£! | Ã” lÃ  lÃ¡, cÃ¡i nÃ y thÃ¬ "linh hoáº¡t" hÆ¡n nhiá»u! NÃ³ cÃ³ thá»ƒ tá»± Ä‘á»™ng co giÃ£n, lá»›n lÃªn hoáº·c bÃ© Ä‘i tÃ¹y theo lÆ°á»£ng dá»¯ liá»‡u báº¡n cáº§n dÃ¹ng. Nghe cÃ³ váº» tiá»‡n lá»£i Ä‘Ãºng khÃ´ng? NhÆ°ng cáº©n tháº­n nhÃ©! Náº¿u nÃ³ cá»© lá»›n mÃ£i, lá»›n mÃ£i mÃ  khÃ´ng kiá»ƒm soÃ¡t Ä‘Æ°á»£c, nÃ³ sáº½ nuá»‘t chá»­ng háº¿t bá»™ nhá»› mÃ¡y tÃ­nh cá»§a báº¡n. VÃ  rá»“i, báº¡n sáº½ "Ä‘á»¥ng Ä‘á»™" vá»›i `OutOfMemoryError` Ä‘áº¥y! NghÄ©a lÃ ... háº¿t sáº¡ch bá»™ nhá»› rá»“i! |
    | Truy cáº­p NHANH CHÃ“NG | Truy cáº­p CHáº¬M RÃŒ RÃŒ |
    | ÄÃ¢y lÃ  nÆ¡i giá»¯ máº¥y **giÃ¡ trá»‹ nguyÃªn thá»§y** cá»§a báº¡n Ä‘Ã³ (nhÆ° sá»‘ `int`, `boolean` kiá»ƒu `true`/`false` Ã½). <br/> Ã€, nÃ³ cÅ©ng cáº¥t máº¥y cÃ¡i **tham chiáº¿u** ná»¯a (kiá»ƒu nhÆ° Ä‘á»‹a chá»‰ Ä‘á»ƒ tÃ¬m Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n áº¥y mÃ !). | CÃ²n Ä‘Ã¢y má»›i lÃ  chá»— Ä‘á»ƒ máº¥y **Ä‘á»‘i tÆ°á»£ng tháº­t sá»±** cá»§a báº¡n sá»‘ng nÃ¨. <br/> Má»—i khi báº¡n táº¡o má»™t Ä‘á»‘i tÆ°á»£ng má»›i, nÃ³ sáº½ "Ä‘á»‹nh cÆ°" á»Ÿ Ä‘Ã¢y Ä‘Ã³! |

    ```java
    public class MemoryExample {
        // Instance variable - stored in Heap
        private int instanceVar = 10;
        
        // Static variable - stored in Method Area (part of Heap in modern JVMs)
        private static int staticVar = 20;
        
        public void demonstrate() {
            // Local primitive - stored in Stack
            int localPrimitive = 30;
            
            // Local reference - reference in Stack, object in Heap
            String localString = new String("Hello");
            
            // Object created in Heap
            Person person = new Person("John", 25);
            
            // Array - reference in Stack, array object in Heap
            int[] numbers = new int[5];
        }
        
        public static void main(String[] args) {
            // Reference 'obj' in Stack, object in Heap
            MemoryExample obj = new MemoryExample();
            obj.demonstrate();
            
            // Recursive call can cause StackOverflowError
            // recursiveMethod(); // Uncomment to see StackOverflowError
        }
        
        public static void recursiveMethod() {
            recursiveMethod(); // Infinite recursion - StackOverflowError
        }
    }

    class Person {
        String name;  // Reference in Heap, String object in Heap
        int age;      // Primitive stored in Heap (as part of object)
        
        Person(String name, int age) {
            this.name = name;
            this.age = age;
        }
    }
    ```

    **CÃ¹ng 'nhÃ¬n' vÃ o Bá»™ nhá»›:**
    ```
    STACK                          HEAP
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ main() frame    â”‚            â”‚                                 â”‚
    â”‚  obj (reference)â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚  MemoryExample object           â”‚
    â”‚                 â”‚            â”‚    instanceVar = 10             â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚                                 â”‚
    â”‚ demonstrate()   â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  localPrimitive â”‚            â”‚                                 â”‚
    â”‚  = 30           â”‚            â”‚  String object "Hello"          â”‚
    â”‚  localString â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚                                 â”‚
    â”‚  person â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚  Person object                  â”‚
    â”‚  numbers â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚    name (ref) â”€â”€â–º "John"        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚    age = 25                     â”‚
                                   â”‚                                 â”‚
                                   â”‚  int[5] array                   â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    ```

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

51. ### Thu gom rÃ¡c (Garbage Collection) trong Java lÃ  gÃ¬?

    Báº¡n biáº¿t khÃ´ng, trong Java cÃ³ má»™t tÃ­nh nÄƒng siÃªu tiá»‡n lá»£i tÃªn lÃ  **Garbage Collection (GC)** Ä‘áº¥y!

HÃ£y nghÄ© vá» GC nhÆ° má»™t "ngÆ°á»i dá»n dáº¹p" tá»± Ä‘á»™ng cho bá»™ nhá»› cá»§a báº¡n váº­y.

CÃ´ng viá»‡c chÃ­nh cá»§a nÃ³ lÃ  quáº£n lÃ½ bá»™ nhá»› *tá»± Ä‘á»™ng* trong Java, vÃ  Ä‘Ã¢y lÃ  cÃ¡ch nÃ³ lÃ m viá»‡c:
*   **TÃ¬m kiáº¿m:** NÃ³ tÃ¬m ra nhá»¯ng Ä‘á»‘i tÆ°á»£ng mÃ  chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n khÃ´ng cÃ²n dÃ¹ng Ä‘áº¿n ná»¯a.
*   **Dá»n dáº¹p:** Sau Ä‘Ã³, nÃ³ "há»‘t" cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ Ä‘i, giáº£i phÃ³ng chÃºng khá»i bá»™ nhá»›.
*   **Táº¡o khÃ´ng gian:** Nhá» váº­y, bá»™ nhá»› **heap** (nÆ¡i cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n "sá»‘ng") sáº½ cÃ³ thÃªm chá»— trá»‘ng.
*   **Sáºµn sÃ ng cho cÃ¡i má»›i:** Sáºµn sÃ ng cho nhá»¯ng Ä‘á»‘i tÆ°á»£ng má»›i toanh Ä‘Æ°á»£c táº¡o ra sau nÃ y!

    **"Dá»n rÃ¡c" (Garbage Collection) hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o nhá»‰?**

    1. **Giai Ä‘oáº¡n ÄÃ¡nh dáº¥u:**
ÄÆ°á»£c rá»“i, Ä‘áº¿n pha Ä‘áº§u tiÃªn nÃ¨! GC (Bá»™ thu gom rÃ¡c) sáº½ báº¯t Ä‘áº§u Ä‘i "quÃ©t" kháº¯p nÆ¡i. NÃ³ tÃ¬m xem, Ã , nhá»¯ng Ä‘á»‘i tÆ°á»£ng nÃ o trong bá»™ nhá»› *váº«n cÃ²n Ä‘ang Ä‘Æ°á»£c chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n dÃ¹ng Ä‘áº¿n*? Hay nÃ³i cÃ¡ch khÃ¡c, Ä‘á»‘i tÆ°á»£ng nÃ o mÃ  chÆ°Æ¡ng trÃ¬nh váº«n cÃ²n "biáº¿t máº·t", váº«n cÃ³ thá»ƒ "cháº¡m" tá»›i Ä‘Æ°á»£c áº¥y. Nhá»¯ng Ä‘á»‘i tÆ°á»£ng nÃ y chÃ­nh lÃ  nhá»¯ng thá»© "cÃ²n sá»‘ng" vÃ  *khÃ´ng* Ä‘Æ°á»£c phÃ©p xÃ³a.
    2. **Giai Ä‘oáº¡n QuÃ©t (Sweep Phase):**
ÄÆ°á»£c rá»“i, sau khi Ä‘Ã£ 'Ä‘Ã¡nh dáº¥u' xong xuÃ´i nhá»¯ng Ä‘á»‘i tÆ°á»£ng cÃ²n cáº§n thiáº¿t, giá» lÃ  lÃºc cho **Giai Ä‘oáº¡n QuÃ©t (Sweep Phase)**!

Trong giai Ä‘oáº¡n nÃ y, Bá»™ thu gom rÃ¡c (GC) sáº½ lÃ m má»™t viá»‡c ráº¥t quan trá»ng. NÃ³ sáº½ Ä‘i má»™t vÃ²ng vÃ  *loáº¡i bá»* táº¥t cáº£ nhá»¯ng Ä‘á»‘i tÆ°á»£ng mÃ  *khÃ´ng ai cÃ²n 'chá»‰' tá»›i Ä‘Æ°á»£c ná»¯a*.

Ã€, chÃºng ta gá»i nhá»¯ng Ä‘á»‘i tÆ°á»£ng nÃ y lÃ  'Ä‘á»‘i tÆ°á»£ng khÃ´ng thá»ƒ truy cáº­p Ä‘Æ°á»£c' (unreachable objects) Ä‘áº¥y. GC 'dá»n dáº¹p' chÃºng Ä‘i Ä‘á»ƒ giáº£i phÃ³ng bá»™ nhá»›, sáºµn sÃ ng cho nhá»¯ng dá»¯ liá»‡u má»›i!
    3. **Giai Ä‘oáº¡n NÃ©n (Compact Phase) (TÃ¹y chá»n):**
ÄÃ´i khi, Ä‘á»ƒ 'dá»n dáº¹p' cho tháº­t gá»n gÃ ng, GC sáº½ **nÃ©n (compact)** cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ²n sÃ³t láº¡i, **gom chÃºng sÃ¡t vÃ o nhau** Ä‘á»ƒ **giáº£m thiá»ƒu tÃ¬nh tráº¡ng phÃ¢n máº£nh** (fragmentation) cá»§a bá»™ nhá»›.

    ÃŠ báº¡n! CÃ³ bao giá» báº¡n tháº¯c máº¯c khi nÃ o thÃ¬ máº¥y cÃ¡i "Ä‘á»“ váº­t" (Ä‘á»‘i tÆ°á»£ng) mÃ  chÃºng ta táº¡o ra trong chÆ°Æ¡ng trÃ¬nh Java sáº½ Ä‘Æ°á»£c dá»n dáº¹p khÃ´ng?

Ã€, cÃ¢u tráº£ lá»i cá»±c ká»³ Ä‘Æ¡n giáº£n: **Khi khÃ´ng cÃ²n ai "nhá»›" Ä‘áº¿n chÃºng ná»¯a!**

TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©:

Má»—i khi báº¡n táº¡o má»™t Ä‘á»‘i tÆ°á»£ng, báº¡n thÆ°á»ng dÃ¹ng má»™t "tÃªn gá»i" (hay cÃ²n gá»i lÃ  biáº¿n tham chiáº¿u) Ä‘á»ƒ chá»‰ vÃ o nÃ³, Ä‘Ãºng khÃ´ng?

```java
Dog myDog = new Dog(); // ÄÃ¢y, 'myDog' lÃ  cÃ¡i tÃªn gá»i nÃ¨!
```

ChÃ­nh cÃ¡i "tÃªn gá»i" (`myDog`) Ä‘Ã³ giÃºp báº¡n "giá»¯ liÃªn láº¡c" vá»›i Ä‘á»‘i tÆ°á»£ng `Dog` cá»§a mÃ¬nh. Báº¡n cÃ³ thá»ƒ gá»i `myDog.bark()` hoáº·c lÃ m gÃ¬ Ä‘Ã³ vá»›i nÃ³.

NhÆ°ng rá»“i, náº¿u khÃ´ng cÃ²n báº¥t ká»³ cÃ¡i "tÃªn gá»i" nÃ o (biáº¿n tham chiáº¿u nÃ o) chá»‰ vÃ o Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ ná»¯a...

*   VÃ­ dá»¥, báº¡n gÃ¡n `null` cho biáº¿n tham chiáº¿u:
    ```java
    myDog = null; // Giá» thÃ¬ 'myDog' khÃ´ng cÃ²n chá»‰ vÃ o chÃº chÃ³ kia ná»¯a.
    ```
*   Hoáº·c báº¡n cho biáº¿n tham chiáº¿u Ä‘Ã³ chá»‰ vÃ o má»™t Ä‘á»‘i tÆ°á»£ng khÃ¡c:
    ```java
    myDog = new Dog(); // ChÃº chÃ³ Ä‘áº§u tiÃªn giá» khÃ´ng ai "nhá»›" Ä‘áº¿n ná»¯a.
    ```
*   Hay lÃ , biáº¿n tham chiáº¿u Ä‘Ã³ náº±m trong má»™t phÆ°Æ¡ng thá»©c vÃ  phÆ°Æ¡ng thá»©c Ä‘Ã³ Ä‘Ã£ káº¿t thÃºc rá»“i.

...thÃ¬ lÃºc Ä‘Ã³, Ä‘á»‘i tÆ°á»£ng cá»§a chÃºng ta sáº½ trá»Ÿ nÃªn "vÃ´ chá»§", "khÃ´ng ai cáº§n Ä‘áº¿n", "khÃ´ng thá»ƒ truy cáº­p Ä‘Æ°á»£c" ná»¯a.

VÃ  *chÃ­nh lÃºc Ä‘Ã³*, bÃ¡c thá»£ dá»n rÃ¡c (Garbage Collector â€“ GC) sáº½ tháº¥y "Ã€, cÃ¡i nÃ y khÃ´ng ai dÃ¹ng ná»¯a rá»“i, dá»n Ä‘i thÃ´i Ä‘á»ƒ giáº£i phÃ³ng bá»™ nhá»›!"

TÃ³m láº¡i, má»™t Ä‘á»‘i tÆ°á»£ng sáº½ "Ä‘á»§ Ä‘iá»u kiá»‡n" Ä‘á»ƒ GC khi khÃ´ng cÃ²n báº¥t ká»³ tham chiáº¿u nÃ o trá» tá»›i nÃ³ ná»¯a. NÃ³ trá»Ÿ thÃ nh "khÃ´ng thá»ƒ truy cáº­p Ä‘Æ°á»£c".
    - Khi khÃ´ng cÃ²n sá»£i dÃ¢y nÃ o 'buá»™c' vÃ o nÃ³ ná»¯a.
    - Khi tham chiáº¿u Ä‘Æ°á»£c gÃ¡n lÃ  `null`...

Tá»©c lÃ , cÃ¡i 'Ä‘iá»u khiá»ƒn tá»« xa' Ä‘Ã³ giá» khÃ´ng cÃ²n 'chá»‰' vÃ o báº¥t ká»³ Ä‘á»‘i tÆ°á»£ng nÃ o ná»¯a. NÃ³ khÃ´ng trá» Ä‘áº¿n Ä‘Ã¢u cáº£.
    - Khi báº¡n 'gÃ¡n láº¡i' má»™t biáº¿n tham chiáº¿u

ÄÆ°á»£c rá»“i, hÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t "cÃ¡i nhÃ£n" (chÃ­nh lÃ  biáº¿n tham chiáº¿u cá»§a báº¡n Ä‘Ã³) Ä‘ang dÃ¡n lÃªn má»™t "há»™p Ä‘á»“ chÆ¡i" (Ä‘á»‘i tÆ°á»£ng).

### Chuyá»‡n gÃ¬ xáº£y ra khi báº¡n 'gÃ¡n láº¡i'?

1.  **LÃºc Ä‘áº§u:**
    Báº¡n cÃ³ má»™t chÃº chÃ³ tÃªn lÃ  "Buddy". VÃ  báº¡n dÃ¡n cÃ¡i nhÃ£n `myDog` lÃªn chÃº chÃ³ "Buddy" nÃ y.
    ```java
    Dog myDog = new Dog("Buddy");
    // myDog Ä‘ang "chá»‰" vÃ o chÃº chÃ³ "Buddy"
    ```
    Ngon lÃ nh! CÃ¡i nhÃ£n `myDog` Ä‘ang "nhá»›" Ä‘áº¿n "Buddy".

2.  **Rá»“i báº¡n táº¡o thÃªm má»™t chÃº chÃ³ khÃ¡c:**
    Báº¡n láº¡i táº¡o má»™t chÃº chÃ³ khÃ¡c tÃªn lÃ  "Lucy". VÃ  báº¡n dÃ¡n cÃ¡i nhÃ£n `anotherDog` lÃªn chÃº chÃ³ "Lucy".
    ```java
    Dog anotherDog = new Dog("Lucy");
    // anotherDog Ä‘ang "chá»‰" vÃ o chÃº chÃ³ "Lucy"
    ```
    Váº­y lÃ  giá» cÃ³ hai chÃº chÃ³, má»—i chÃº chÃ³ cÃ³ má»™t cÃ¡i nhÃ£n riÃªng.

3.  **BÃ¢y giá», hÃ£y 'gÃ¡n láº¡i' cÃ¡i nhÃ£n `myDog`!**
    Báº¡n láº¥y cÃ¡i nhÃ£n `myDog` vÃ  báº£o nÃ³: "NÃ y `myDog`, tá»« giá» trá»Ÿ Ä‘i, mÃ y hÃ£y chá»‰ vÃ o *cÃ¡i thá»© mÃ  `anotherDog` Ä‘ang chá»‰ vÃ o Ä‘i*!"
    ```java
    myDog = anotherDog;
    ```
    BÃ™M! Äiá»u gÃ¬ vá»«a xáº£y ra váº­y?

    *   CÃ¡i nhÃ£n `myDog` **khÃ´ng cÃ²n** dÃ¡n lÃªn chÃº chÃ³ "Buddy" ná»¯a. NÃ³ Ä‘Ã£... bÃ³c ra rá»“i!
    *   Giá» Ä‘Ã¢y, cÃ¡i nhÃ£n `myDog` Ä‘Æ°á»£c dÃ¡n sang chÃº chÃ³ mÃ  `anotherDog` Ä‘ang chá»‰ vÃ o. MÃ  `anotherDog` Ä‘ang chá»‰ vÃ o ai? Ã€, chÃ­nh lÃ  chÃº chÃ³ "Lucy"!
    *   Váº­y lÃ  bÃ¢y giá», cáº£ `myDog` vÃ  `anotherDog` Ä‘á»u Ä‘ang "chá»‰" vÃ o chÃº chÃ³ "Lucy" Ä‘Ã³!

### Tháº¿ cÃ²n chÃº chÃ³ "Buddy" thÃ¬ sao?

*   ChÃº chÃ³ "Buddy" váº«n á»Ÿ Ä‘Ã³! NÃ³ khÃ´ng bá»‹ xÃ³a sá»• hay biáº¿n máº¥t Ä‘Ã¢u.
*   NhÆ°ng mÃ ... khÃ´ng cÃ²n cÃ¡i nhÃ£n nÃ o Ä‘ang dÃ¡n vÃ o nÃ³ ná»¯a cáº£ (trá»« khi cÃ³ biáº¿n tham chiáº¿u khÃ¡c cÅ©ng Ä‘ang chá»‰ vÃ o Buddy, nhÆ°ng trong vÃ­ dá»¥ nÃ y thÃ¬ khÃ´ng cÃ³).
*   Náº¿u khÃ´ng ai "nhá»›" Ä‘áº¿n Buddy ná»¯a, nÃ³ sáº½ trá»Ÿ thÃ nh má»™t Ä‘á»‘i tÆ°á»£ng "vÃ´ chá»§".
*   VÃ  rá»“i, má»™t lÃºc nÃ o Ä‘Ã³, "anh chÃ ng thu gom rÃ¡c" cá»§a Java (Garbage Collector) sáº½ Ä‘áº¿n vÃ  "dá»n dáº¹p" Buddy Ä‘i, giáº£i phÃ³ng bá»™ nhá»›. Tá»™i nghiá»‡p Buddy!

### TÃ³m láº¡i (nhÆ° cÃ¡i Ä‘iá»u khiá»ƒn TV váº­y):

HÃ£y nghÄ© vá» má»™t cÃ¡i Ä‘iá»u khiá»ƒn TV (chÃ­nh lÃ  biáº¿n tham chiáº¿u cá»§a báº¡n).

*   Ban Ä‘áº§u, cÃ¡i Ä‘iá»u khiá»ƒn cá»§a báº¡n Ä‘ang Ä‘iá»u khiá»ƒn TV1.
*   Sau Ä‘Ã³, báº¡n láº¥y cÃ¡i Ä‘iá»u khiá»ƒn Ä‘Ã³ vÃ  dÃ¹ng nÃ³ Ä‘á»ƒ Ä‘iá»u khiá»ƒn TV2.
*   Giá» thÃ¬ cÃ¡i Ä‘iá»u khiá»ƒn Ä‘Ã³ Ä‘ang Ä‘iá»u khiá»ƒn TV2.
*   TV1 thÃ¬ sao? NÃ³ váº«n á»Ÿ Ä‘Ã³, nhÆ°ng cÃ¡i Ä‘iá»u khiá»ƒn nÃ y khÃ´ng cÃ²n Ä‘iá»u khiá»ƒn nÃ³ ná»¯a. Náº¿u khÃ´ng cÃ³ Ä‘iá»u khiá»ƒn nÃ o khÃ¡c Ä‘iá»u khiá»ƒn TV1, nÃ³ cá»© Ä‘á»©ng Ä‘Ã³ thÃ´i, cháº³ng ai tÆ°Æ¡ng tÃ¡c vá»›i nÃ³ ná»¯a.

### VÃ­ dá»¥ code cá»¥ thá»ƒ hÆ¡n:

```java
// BÆ°á»›c 1: Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng Dog tÃªn "Buddy" vÃ  gÃ¡n cho biáº¿n 'myDog'
Dog myDog = new Dog("Buddy");
// myDog Ä‘ang chá»‰ vÃ o chÃº chÃ³ "Buddy"

// BÆ°á»›c 2: Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng Dog khÃ¡c tÃªn "Lucy" vÃ  gÃ¡n cho biáº¿n 'anotherDog'
Dog anotherDog = new Dog("Lucy");
// anotherDog Ä‘ang chá»‰ vÃ o chÃº chÃ³ "Lucy"

// BÆ°á»›c 3: GÃ¡n láº¡i biáº¿n 'myDog'
myDog = anotherDog;
// BÃ™M! Giá» Ä‘Ã¢y, myDog cÅ©ng chá»‰ vÃ o chÃº chÃ³ "Lucy"
// ChÃº chÃ³ "Buddy" khÃ´ng cÃ²n Ä‘Æ°á»£c myDog chá»‰ vÃ o ná»¯a.
// Náº¿u khÃ´ng cÃ³ biáº¿n nÃ o khÃ¡c chá»‰ vÃ o "Buddy", nÃ³ sáº½ bá»‹ Garbage Collector dá»n dáº¹p.

// Äá»ƒ kiá»ƒm tra, báº¡n cÃ³ thá»ƒ gá»i má»™t phÆ°Æ¡ng thá»©c
// (Giáº£ sá»­ lá»›p Dog cÃ³ phÆ°Æ¡ng thá»©c 'bark()' Ä‘á»ƒ chÃº chÃ³ sá»§a)
System.out.println("myDog muá»‘n sá»§a:");
myDog.bark(); // Äiá»u nÃ y sáº½ lÃ m chÃº chÃ³ "Lucy" sá»§a!

System.out.println("anotherDog muá»‘n sá»§a:");
anotherDog.bark(); // Äiá»u nÃ y cÅ©ng lÃ m chÃº chÃ³ "Lucy" sá»§a!

// ChÃº chÃ³ "Buddy" thÃ¬... im láº·ng, khÃ´ng ai gá»i nÃ³ ná»¯a.
```
    - ChÃ o báº¡n! Báº¡n cÃ³ bao giá» tá»± há»i Ä‘iá»u gÃ¬ xáº£y ra vá»›i cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a mÃ¬nh khi báº¡n khÃ´ng dÃ¹ng Ä‘áº¿n chÃºng ná»¯a khÃ´ng?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t chÃº chÃ³ con (Ä‘Ã³ chÃ­nh lÃ  Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n!). Báº¡n nuÃ´i nÃ³ trong nhÃ  mÃ¬nh (Ä‘Ã³ lÃ  'pháº¡m vi' cá»§a nÃ³).

Khi chÃº chÃ³ cÃ²n trong nhÃ , báº¡n cÃ³ thá»ƒ chÆ¡i vá»›i nÃ³, cho nÃ³ Äƒn, má»i thá»©! NÃ³ Ä‘ang 'trong pháº¡m vi' cá»§a báº¡n.

NhÆ°ng náº¿u báº¡n rá»i khá»i nhÃ  vÃ  Ä‘i cÃ´ng tÃ¡c xa thÃ¬ sao? ChÃº chÃ³ váº«n á»Ÿ trong nhÃ , nhÆ°ng *báº¡n* khÃ´ng thá»ƒ tÆ°Æ¡ng tÃ¡c vá»›i nÃ³ tá»« bÃªn ngoÃ i ná»¯a. NÃ³ Ä‘Ã£ 'ra khá»i pháº¡m vi tÆ°Æ¡ng tÃ¡c trá»±c tiáº¿p' cá»§a báº¡n.

Trong láº­p trÃ¬nh, khi má»™t Ä‘á»‘i tÆ°á»£ng 'ra khá»i pháº¡m vi' (goes out of scope), Ä‘iá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ  chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n khÃ´ng cÃ²n cÃ³ thá»ƒ 'nhÃ¬n tháº¥y' hoáº·c 'nÃ³i chuyá»‡n' vá»›i Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ ná»¯a. Giá»‘ng nhÆ° chÆ°Æ¡ng trÃ¬nh Ä‘Ã£ rá»i khá»i 'ngÃ´i nhÃ ' nÆ¡i Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ sinh sá»‘ng váº­y.

Má»™t khi Ä‘á»‘i tÆ°á»£ng Ä‘Ã£ ra khá»i pháº¡m vi, nÃ³ sáº½ 'Ä‘á»§ Ä‘iá»u kiá»‡n' Ä‘á»ƒ Ä‘Æ°á»£c dá»n dáº¹p. Trong Java, Ä‘Ã¢y lÃ  lÃºc Bá»™ thu gom rÃ¡c (Garbage Collector) tuyá»‡t vá»i xuáº¥t hiá»‡n Ä‘á»ƒ thu há»“i láº¡i bá»™ nhá»› Ä‘Ã³. ThÃº vá»‹ pháº£i khÃ´ng?

    ```java
    public class GarbageCollectionDemo {
        
        public static void main(String[] args) {
            // Object created - not eligible for GC
            Object obj1 = new Object();
            
            // Reference set to null - obj1's object eligible for GC
            obj1 = null;
            
            // Object reassignment - first object eligible for GC
            Object obj2 = new Object();
            obj2 = new Object();  // First object now eligible for GC
            
            // Objects in method scope
            createObjects();
            // After method returns, local objects are eligible for GC
            
            // Request garbage collection (not guaranteed to run immediately)
            System.gc();
            // or
            Runtime.getRuntime().gc();
        }
        
        static void createObjects() {
            Object localObj = new Object();
            // localObj goes out of scope when method returns
        }
    }

    // Using finalize() - deprecated but shows GC callback
    class MyObject {
        private String name;
        
        public MyObject(String name) {
            this.name = name;
            System.out.println(name + " created");
        }
        
        @Override
        protected void finalize() throws Throwable {
            System.out.println(name + " is being garbage collected");
            super.finalize();
        }
    }

    // Demonstrating object eligibility
    class GCEligibility {
        public static void main(String[] args) throws InterruptedException {
            // Island of isolation - objects reference each other but unreachable
            MyObject a = new MyObject("A");
            MyObject b = new MyObject("B");
            
            // Create circular reference
            // a.partner = b;
            // b.partner = a;
            
            // Both become eligible for GC (island of isolation)
            a = null;
            b = null;
            
            // Request GC
            System.gc();
            Thread.sleep(1000);  // Give GC time to run
        }
    }
    ```

    **Heap cá»§a JVM vÃ  cÃ¡c 'tháº¿ há»‡' Ä‘á»‘i tÆ°á»£ng: NÆ¡i cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n 'lá»›n lÃªn' vÃ  'trÆ°á»Ÿng thÃ nh'!**
    ```
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                          HEAP                              â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚     Young Generation        â”‚      Old Generation          â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”  â”‚      (Tenured)               â”‚
    â”‚  â”‚ Eden  â”‚  S0   â”‚  S1   â”‚  â”‚                              â”‚
    â”‚  â”‚       â”‚(From) â”‚ (To)  â”‚  â”‚   Long-lived objects         â”‚
    â”‚  â”‚ New   â”‚       â”‚       â”‚  â”‚                              â”‚
    â”‚  â”‚objectsâ”‚Survivor Spacesâ”‚  â”‚                              â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    ```

    **Quy trÃ¬nh GC:**

NÃ y báº¡n! Báº¡n cÃ³ bao giá» tá»± há»i máº¥y cÃ¡i Ä‘á»‘i tÆ°á»£ng (object) mÃ  báº¡n táº¡o ra trong chÆ°Æ¡ng trÃ¬nh Java cá»§a mÃ¬nh, khi khÃ´ng cÃ²n ai dÃ¹ng Ä‘áº¿n ná»¯a thÃ¬ chÃºng sáº½ Ä‘i Ä‘Ã¢u khÃ´ng? ChÃºng cÃ³ biáº¿n máº¥t "phÃ¹" má»™t cÃ¡i khÃ´ng?

Ã€ ha! ÄÃ³ chÃ­nh lÃ  lÃºc "Thu gom rÃ¡c" (Garbage Collection - GC) vÃ o cuá»™c Ä‘áº¥y! NÃ³ giá»‘ng nhÆ° má»™t Ä‘á»™i dá»n dáº¹p siÃªu háº¡ng, chuyÃªn Ä‘i tÃ¬m vÃ  "xÃ³a sá»•" nhá»¯ng Ä‘á»‘i tÆ°á»£ng khÃ´ng cÃ²n Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ giáº£i phÃ³ng bá»™ nhá»›.

Giá» thÃ¬, hÃ£y cÃ¹ng xem cÃ¡i quy trÃ¬nh dá»n dáº¹p "rÃ¡c" nÃ y diá»…n ra nhÆ° tháº¿ nÃ o nhÃ©. NÃ³ khÃ´ng há» phá»©c táº¡p nhÆ° báº¡n nghÄ© Ä‘Ã¢u!
    1. Khi báº¡n táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng má»›i, nÃ³ sáº½ Ä‘Æ°á»£c "cáº¥p chá»—" ngay trong vÃ¹ng Eden. ÄÃ¢y chÃ­nh lÃ  "ngÃ´i nhÃ " Ä‘áº§u tiÃªn cá»§a chÃºng Ä‘áº¥y!
    2. Khi báº¡n táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng (objects) má»›i, chÃºng thÆ°á»ng Ä‘Æ°á»£c Ä‘Æ°a vÃ o má»™t khu vá»±c Ä‘áº·c biá»‡t tÃªn lÃ  **Eden**.

HÃ£y cá»© hÃ¬nh dung Eden nhÆ° má»™t cÃ¡i sÃ¢n chÆ¡i má»›i toanh dÃ nh cho cÃ¡c Ä‘á»‘i tÆ°á»£ng nÃ y váº­y.

NhÆ°ng rá»“i, khi cÃ¡i sÃ¢n chÆ¡i **Eden Ä‘áº§y áº¯p**, khÃ´ng cÃ²n chá»— trá»‘ng Ä‘á»ƒ chá»©a thÃªm Ä‘á»‘i tÆ°á»£ng nÃ o ná»¯a...

ÄÃ³ lÃ  lÃºc má»™t sá»± kiá»‡n quan trá»ng sáº½ xáº£y ra! ChÃºng ta gá»i nÃ³ lÃ  **Minor GC**.

**Minor GC** lÃ  gÃ¬ Æ°? NÃ³ lÃ  má»™t quÃ¡ trÃ¬nh dá»n dáº¹p rÃ¡c (Garbage Collection) Ä‘áº·c biá»‡t, chá»‰ táº­p trung vÃ o cÃ¡c khu vá»±c "tráº»" nhÆ° Eden nÃ y.

NÃ³ sáº½ cháº¡y Ä‘áº¿n, tÃ¬m nhá»¯ng Ä‘á»‘i tÆ°á»£ng khÃ´ng cÃ²n ai dÃ¹ng ná»¯a, rá»“i dá»n chÃºng Ä‘i Ä‘á»ƒ **giáº£i phÃ³ng khÃ´ng gian má»›i** cho cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c tiáº¿p tá»¥c Ä‘Æ°á»£c sinh ra.
    3. Ok, váº­y lÃ  nhá»¯ng object nÃ o Ä‘Ã£ *sá»‘ng sÃ³t* sau Ä‘á»£t dá»n dáº¹p vá»«a rá»“i?
Tuyá»‡t vá»i! ChÃºng khÃ´ng bá»‹ xÃ³a sá»•, Ä‘Ãºng khÃ´ng?
Váº­y, chÃºng sáº½ Ä‘i Ä‘Ã¢u tiáº¿p theo?
ÄÆ¡n giáº£n thÃ´i: Nhá»¯ng object *sá»‘ng sÃ³t* nÃ y sáº½ Ä‘Æ°á»£c **chuyá»ƒn Ä‘áº¿n khu vá»±c Survivor space**.
Cá»© hÃ¬nh dung Ä‘Ã¢y lÃ  'nÆ¡i trÃº áº©n' dÃ nh riÃªng cho chÃºng, sau khi Ä‘Ã£ vÆ°á»£t qua Ä‘Æ°á»£c 'kiáº¿p náº¡n' Ä‘áº§u tiÃªn!
    4. CÃ¡c Ä‘á»‘i tÆ°á»£ng mÃ  cá»© "kiÃªn cÆ°á»ng" sá»‘ng sÃ³t qua **nhiá»u láº§n** dá»n dáº¹p nhá» (Minor GC) thÃ¬ sao nhá»‰?

Ã€, chÃºng sáº½ Ä‘Æ°á»£c "thÄƒng cáº¥p" vÃ  chuyá»ƒn sang má»™t "khu vá»±c" khÃ¡c, á»•n Ä‘á»‹nh hÆ¡n, gá»i lÃ  **Old Generation** Ä‘áº¥y!
    5. Báº¡n cÃ²n nhá»› vÃ¹ng Old Generation khÃ´ng? NÆ¡i cÃ¡c Ä‘á»‘i tÆ°á»£ng "sá»‘ng lÃ¢u" cá»§a chÃºng ta á»Ÿ Ä‘Ã³.

Tháº¿ nhÆ°ng, ngay cáº£ vÃ¹ng nÃ y cÅ©ng cÃ³ lÃºc bá»‹ Ä‘áº§y áº¯p chá»©!

VÃ  khi Old Generation bá»‹ láº¥p Ä‘áº§y, thÃ¬ má»™t cuá»™c "Ä‘áº¡i tá»•ng vá»‡ sinh" sáº½ diá»…n ra. ÄÃ³ chÃ­nh lÃ  **Major GC** (hay cÃ²n gá»i lÃ  **Full GC**).

    **CÃ¡c TÃ¹y Chá»n 'Dá»n RÃ¡c' (GC) Cá»§a JVM â€” CÃ¹ng Nhau KhÃ¡m PhÃ¡ NhÃ©!**
    ```bash
    # Set heap size
    java -Xms256m -Xmx1024m MyApp
    
    # Choose garbage collector
    java -XX:+UseG1GC MyApp          # G1 Garbage Collector
    java -XX:+UseParallelGC MyApp    # Parallel GC
    java -XX:+UseZGC MyApp           # Z Garbage Collector (Java 11+)
    
    # GC logging
    java -Xlog:gc* MyApp             # Java 9+
    ```

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

52. ### Váº­y thÃ¬, cÃ³ nhá»¯ng kiá»ƒu bá»™ thu gom rÃ¡c nÃ o trong Java?

    NÃ y, báº¡n cÃ³ biáº¿t khÃ´ng? Java khÃ´ng chá»‰ cÃ³ Má»˜T 'bá»™ thu gom rÃ¡c' Ä‘Ã¢u nhÃ©!

Thá»±c ra, Java mang Ä‘áº¿n cho báº¡n *nhiá»u* 'kiá»ƒu' bá»™ thu gom rÃ¡c khÃ¡c nhau láº¯m Ä‘Ã³. Má»—i 'kiá»ƒu' láº¡i Ä‘Æ°á»£c 'thiáº¿t káº¿ riÃªng' Ä‘á»ƒ lÃ m viá»‡c 'hiá»‡u quáº£ nháº¥t' (hay cÃ²n gá»i lÃ  'tá»‘i Æ°u hÃ³a') trong nhá»¯ng tÃ¬nh huá»‘ng cá»¥ thá»ƒ khÃ¡c nhau. Kiá»ƒu nhÆ° lÃ :

    **1. Gáº·p gá»¡ Bá»™ thu gom rÃ¡c "tuáº§n tá»±" (Serial Garbage Collector)! (Báº¡n cÃ³ thá»ƒ báº­t nÃ³ báº±ng cá» `-XX:+UseSerialGC` Ä‘áº¥y!)**
    - Ã€ nÃ y, báº¡n biáº¿t khÃ´ng, khi Ä‘áº¿n lÆ°á»£t dá»n dáº¹p máº¥y cÃ¡i 'rÃ¡c' (cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ´ng dÃ¹ng Ä‘áº¿n trong bá»™ nhá»›), thÃ¬ chá»‰ cÃ³ **má»™t anh chÃ ng cÃ´ng nhÃ¢n duy nháº¥t** Ä‘Æ°á»£c cá»­ Ä‘i lÃ m thÃ´i. ÄÃºng váº­y, chá»‰ **má»™t luá»“ng (thread)** Ä‘áº£m nhiá»‡m táº¥t cáº£ viá»‡c thu gom rÃ¡c!
    - NÃ³ lÃ  lá»±a chá»n tuyá»‡t vá»i nháº¥t cho nhá»¯ng á»©ng dá»¥ng chá»‰ cáº§n lÃ m Má»˜T viá»‡c duy nháº¥t táº¡i má»™t thá»i Ä‘iá»ƒm. Hay mÃ¬nh cÃ²n gá»i lÃ  "á»©ng dá»¥ng Ä‘Æ¡n luá»“ng" Ä‘Ã³!
    - GÃ¢y ra cÃ¡c láº§n táº¡m dá»«ng 'dá»«ng-tháº¿-giá»›i' (stop-the-world pauses).

Báº¡n hÃ¬nh dung tháº¿ nÃ y nhÃ©: ÄÃ´i khi, Ä‘á»ƒ dá»n dáº¹p bá»™ nhá»›, há»‡ thá»‘ng cá»§a báº¡n cáº§n má»™t chÃºt thá»i gian. VÃ  trong lÃºc Ä‘Ã³, *má»i thá»© khÃ¡c* pháº£i dá»«ng láº¡i. ÄÃºng váº­y, chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n sáº½ "Ä‘á»©ng hÃ¬nh" má»™t lÃºc, khÃ´ng lÃ m gÃ¬ cáº£!

ChÃºng ta gá»i nhá»¯ng khoáº£nh kháº¯c nÃ y lÃ  cÃ¡c láº§n táº¡m dá»«ng 'dá»«ng-tháº¿-giá»›i' (stop-the-world pauses) vÃ¬ chÃºng thá»±c sá»± lÃ m *dá»«ng cáº£ tháº¿ giá»›i* cá»§a á»©ng dá»¥ng báº¡n láº¡i. Äiá»u nÃ y cÃ³ thá»ƒ khiáº¿n ngÆ°á»i dÃ¹ng cáº£m tháº¥y á»©ng dá»¥ng bá»‹ giáº­t hoáº·c pháº£n há»“i cháº­m cháº¡p.
    - Tuyá»‡t vá»i cho máº¥y á»©ng dá»¥ng nhá». MÃ  chá»‰ cáº§n má»™t 'heap' bÃ© táº¹o thÃ´i nhÃ©!

    **2. TrÃ¬nh Dá»n RÃ¡c Song Song (Parallel GC) - Báº­t nÃ³ lÃªn vá»›i `-XX:+UseParallelGC` nhÃ©!**
    - Báº¡n biáº¿t khÃ´ng, Ä‘á»ƒ dá»n dáº¹p 'rÃ¡c' bá»™ nhá»› (garbage collection) cho hiá»‡u quáº£, nÃ³ dÃ¹ng má»™t tuyá»‡t chiÃªu Ä‘áº¥y!

ÄÃ³ lÃ  sá»­ dá»¥ng **nhiá»u luá»“ng** (multiple threads) cÃ¹ng lÃºc!

TÆ°á»Ÿng tÆ°á»£ng cÃ³ nhiá»u 'cÃ´ng nhÃ¢n' cÃ¹ng dá»n dáº¹p, má»i thá»© sáº½ xong NHANH HÆ N ráº¥t nhiá»u Ä‘Ãºng khÃ´ng?
    - Ã€ mÃ  nÃ y, má»i ngÆ°á»i cÃ²n hay gá»i nÃ³ lÃ  "throughput collector" ná»¯a Ä‘Ã³!
    - Báº¡n cÃ³ bao giá» tá»± há»i ai sáº½ dá»n dáº¹p bá»™ nhá»› khi chÆ°Æ¡ng trÃ¬nh Java cá»§a báº¡n khÃ´ng cáº§n dÃ¹ng Ä‘áº¿n cÃ¡c Ä‘á»‘i tÆ°á»£ng cÅ© ná»¯a khÃ´ng? Äá»«ng lo, Java cÃ³ má»™t Ä‘á»™i dá»n dáº¹p siÃªu Ä‘áº³ng mang tÃªn **Garbage Collector (GC)** Ä‘Ã³!

Váº­y, "GC máº·c Ä‘á»‹nh trong Java 8" nghÄ©a lÃ  gÃ¬?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©: Khi báº¡n cháº¡y má»™t á»©ng dá»¥ng Java 8 mÃ  khÃ´ng nÃ³i rÃµ mÃ¬nh muá»‘n dÃ¹ng loáº¡i GC nÃ o, Java sáº½ tá»± Ä‘á»™ng chá»n cho báº¡n má»™t "káº» dá»n dáº¹p" riÃªng. ÄÃ³ chÃ­nh lÃ  GC máº·c Ä‘á»‹nh!

Trong Java 8, "káº» dá»n dáº¹p" máº·c Ä‘á»‹nh nÃ y chÃ­nh lÃ  **Parallel GC**.

Parallel GC ráº¥t giá»i trong viá»‡c tá»‘i Æ°u hÃ³a "thÃ´ng lÆ°á»£ng" (throughput). NghÄ©a lÃ  sao? NghÄ©a lÃ  nÃ³ cá»‘ gáº¯ng hoÃ n thÃ nh cÃ´ng viá»‡c dá»n dáº¹p cÃ ng nhanh cÃ ng tá»‘t, Ä‘á»ƒ CPU cá»§a báº¡n cÃ³ thá»ƒ dÃ nh nhiá»u thá»i gian hÆ¡n Ä‘á»ƒ cháº¡y mÃ£ chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n. NÃ³ lÃ m viá»‡c nÃ y báº±ng cÃ¡ch sá»­ dá»¥ng nhiá»u luá»“ng (thread) cÃ¹ng lÃºc Ä‘á»ƒ dá»n rÃ¡c, giÃºp viá»‡c dá»n dáº¹p diá»…n ra song song vÃ  hiá»‡u quáº£ hÆ¡n!
    - Ã€, cÃ¡i nÃ y thÃ¬ *tuyá»‡t vá»i* cho nhá»¯ng á»©ng dá»¥ng mÃ  cáº§n lÃ m *ráº¥t nhiá»u viá»‡c cÃ¹ng má»™t lÃºc* Ä‘áº¥y!

Tá»©c lÃ , náº¿u báº¡n cÃ³ má»™t á»©ng dá»¥ng "Ä‘a luá»“ng" (multi-threaded) mÃ  nÃ³ pháº£i xá»­ lÃ½ hÃ ng tÃ¡ yÃªu cáº§u *song song*, khÃ´ng Ä‘á»ƒ ai pháº£i chá» lÃ¢u...

VÃ  quan trá»ng nháº¥t lÃ  báº¡n muá»‘n nÃ³ pháº£i *siÃªu nhanh*, xá»­ lÃ½ Ä‘Æ°á»£c *tháº­t nhiá»u* cÃ´ng viá»‡c trong má»™t khoáº£ng thá»i gian ngáº¯n nháº¥t cÃ³ thá»ƒ (chÃºng ta gá»i Ä‘Ã³ lÃ  "thÃ´ng lÆ°á»£ng cao" Ä‘áº¥y!).

ThÃ¬ Ä‘Ã¢y chÃ­nh lÃ  lá»±a chá»n *sá»‘ má»™t* cho nhá»¯ng trÆ°á»ng há»£p nhÆ° váº­y!

    **3. Gáº·p gá»¡ Bá»™ thu gom rÃ¡c G1 (-XX:+UseG1GC)**
    - NÃ³ chia cÃ¡i 'heap' ra thÃ nh cÃ¡c vÃ¹ng Ä‘áº¥y!
    - Báº¡n cÃ³ chÆ°Æ¡ng trÃ¬nh Java nÃ o cáº§n *siÃªu nhiá»u* bá»™ nhá»› khÃ´ng?
Kiá»ƒu nhÆ°, cÃ¡i 'vÃ¹ng nhá»› heap' (nÆ¡i chÆ°Æ¡ng trÃ¬nh báº¡n cáº¥t giá»¯ cÃ¡c Ä‘á»‘i tÆ°á»£ng) pháº£i *lá»›n hÆ¡n 4 Gigabyte* (4GB) láº­n áº¥y!
ThÃ¬ Ä‘Ã¢y chÃ­nh lÃ  thá»© Ä‘Æ°á»£c thiáº¿t káº¿ *Ä‘áº·c biá»‡t* dÃ nh cho nhá»¯ng 'heap' to Ä‘Ã¹ng nhÆ° tháº¿ Ä‘Ã³!
    - **Dá»n RÃ¡c (GC) Máº·c Äá»‹nh: Tá»« Java 9 Trá»Ÿ Äi LÃ  Tháº¿ NÃ y!**
    - NÃ³ pháº£i lÃ m sao Ä‘á»ƒ vá»«a xá»­ lÃ½ Ä‘Æ°á»£c *tháº­t nhiá»u* cÃ´ng viá»‡c trong má»™t lÃºc (Ä‘Ã³ lÃ  `throughput` - **tá»‘c Ä‘á»™ xá»­ lÃ½ tá»•ng thá»ƒ** cá»§a báº¡n Ä‘Ã³!),
mÃ  láº¡i vá»«a khÃ´ng Ä‘á»ƒ *tá»«ng* cÃ´ng viá»‡c nhá» pháº£i chá» Ä‘á»£i quÃ¡ lÃ¢u má»›i xong (Ä‘Ã³ lÃ  `latency` - **Ä‘á»™ trá»…** cá»§a má»—i yÃªu cáº§u).
Kiá»ƒu nhÆ°, báº¡n cáº§n tÃ¬m má»™t 'Ä‘iá»ƒm vÃ ng' Ä‘á»ƒ cáº£ hai Ä‘á»u á»Ÿ má»©c tá»‘t vÃ  há»£p lÃ½ nháº¥t cÃ³ thá»ƒ, khÃ´ng cÃ¡i nÃ o bá»‹ 'Ã©p' quÃ¡ má»©c áº¥y mÃ !
    - Thá»i gian táº¡m dá»«ng mÃ  báº¡n cÃ³ thá»ƒ *biáº¿t trÆ°á»›c*!

Báº¡n biáº¿t Ä‘áº¥y, Ä‘Ã´i khi chÆ°Æ¡ng trÃ¬nh cá»§a chÃºng ta cáº§n *dá»«ng láº¡i má»™t chÃºt* Ä‘á»ƒ dá»n dáº¹p máº¥y thá»© linh tinh. Giá»‘ng nhÆ° báº¡n Ä‘ang chÆ¡i game mÃ  tá»± nhiÃªn game bá»‹ "Ä‘á»©ng hÃ¬nh" vÃ i giÃ¢y váº­y.

"Thá»i gian táº¡m dá»«ng cÃ³ thá»ƒ dá»± Ä‘oÃ¡n Ä‘Æ°á»£c" nghÄ©a lÃ  chÃºng ta cÃ³ thá»ƒ *biáº¿t trÆ°á»›c* Ä‘Æ°á»£c:
*   ChÆ°Æ¡ng trÃ¬nh sáº½ dá»«ng láº¡i *khi nÃ o*.
*   VÃ  nÃ³ sáº½ dá»«ng *trong bao lÃ¢u*.

Äiá»u nÃ y cá»±c ká»³ quan trá»ng! TÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang lÃ m má»™t á»©ng dá»¥ng cáº§n pháº£n há»“i siÃªu nhanh (nhÆ° game hay há»‡ thá»‘ng giao dá»‹ch). Báº¡n cháº¯c cháº¯n khÃ´ng muá»‘n nÃ³ tá»± nhiÃªn "Ä‘á»©ng hÃ¬nh" báº¥t chá»£t Ä‘Ãºng khÃ´ng? Viá»‡c biáº¿t trÆ°á»›c nhá»¯ng láº§n dá»«ng nÃ y giÃºp á»©ng dá»¥ng cá»§a báº¡n cháº¡y mÆ°á»£t mÃ  hÆ¡n ráº¥t nhiá»u Ä‘Ã³!

    **4. ZGC: Bá»™ dá»n dáº¹p rÃ¡c siÃªu tá»‘c cá»§a chÃºng ta (-XX:+UseZGC)**
    - Ã€ nÃ y! Báº¡n biáº¿t khÃ´ng, cÃ¡i tÃ­nh nÄƒng hay ho nÃ y áº¥y, nÃ³ má»›i Ä‘Æ°á»£c giá»›i thiá»‡u tá»« phiÃªn báº£n Java 11 Ä‘áº¥y. Tá»©c lÃ , náº¿u báº¡n Ä‘ang dÃ¹ng Java cÅ© hÆ¡n, thÃ¬ cÃ³ thá»ƒ sáº½ chÆ°a gáº·p nÃ³ Ä‘Ã¢u nha!
    - Äá»™ trá»… siÃªu tháº¥p (thá»i gian 'táº¡m dá»«ng' chÆ°a tá»›i 10 mili-giÃ¢y!)
    - NÃ³ cÃ³ thá»ƒ 'Ã´m trá»n' bá»™ nhá»› heap vá»›i Ä‘á»§ loáº¡i kÃ­ch cá»¡!
Tá»« 8MB nhá» xÃ­u... cho Ä‘áº¿n táº­n 16TB khá»•ng lá»“ luÃ´n Ä‘Ã³!
    - TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©, chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n Ä‘ang cháº¡y ngon lÃ nh cÃ nh Ä‘Ã o. NÃ³ táº¡o ra Ä‘á»§ thá»© Ä‘á»‘i tÆ°á»£ng (object) trong bá»™ nhá»›. NhÆ°ng rá»“i, cÃ³ nhá»¯ng Ä‘á»‘i tÆ°á»£ng khÃ´ng cÃ²n Ä‘Æ°á»£c dÃ¹ng Ä‘áº¿n ná»¯a, chÃºng cá»© náº±m Ä‘Ã³ chiáº¿m chá»—. Giá»‘ng nhÆ° rÃ¡c váº­y Ä‘Ã³!

BÃ¬nh thÆ°á»ng, Ä‘á»ƒ dá»n rÃ¡c (garbage collection), chÆ°Æ¡ng trÃ¬nh pháº£i táº¡m dá»«ng má»™t chÃºt. Cá»© nhÆ° cáº£ bá»¯a tiá»‡c pháº£i dá»«ng láº¡i Ä‘á»ƒ dá»n dáº¹p váº­y. HÆ¡i phiá»n Ä‘Ãºng khÃ´ng?

Tháº¿ thÃ¬ **Concurrent garbage collection** siÃªu hay ho á»Ÿ chá»— nÃ y: nÃ³ cho phÃ©p dá»n dáº¹p bá»™ nhá»› *trong khi* chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n váº«n Ä‘ang cháº¡y. Cá»© nhÆ° cÃ³ má»™t Ä‘á»™i dá»n dáº¹p siÃªu tá»‘c, há» Ã¢m tháº§m lÃ m viá»‡c trong lÃºc bá»¯a tiá»‡c váº«n Ä‘ang diá»…n ra, má»i ngÆ°á»i váº«n Ä‘ang nháº£y nhÃ³t vui váº». ChÆ°Æ¡ng trÃ¬nh cá»§a báº¡n gáº§n nhÆ° khÃ´ng cáº£m tháº¥y gÃ¬ cáº£! NÃ³ cá»© tháº¿ mÃ  cháº¡y, cÃ²n rÃ¡c thÃ¬ váº«n Ä‘Æ°á»£c dá»n sáº¡ch sáº½. Tuyá»‡t vá»i chÆ°a?

    **5. Shenandoah Garbage Collector (-XX:+UseShenandoahGC)**

Báº¡n cÃ²n nhá»› "ngÆ°á»i dá»n rÃ¡c" cá»§a Java khÃ´ng? ÄÃ³ chÃ­nh lÃ  Garbage Collector (GC)! NÃ³ lÃ  má»™t pháº§n má»m thÃ´ng minh giÃºp Java tá»± Ä‘á»™ng thu gom nhá»¯ng "Ä‘á»“ váº­t" (Ä‘á»‘i tÆ°á»£ng) khÃ´ng cÃ²n Ä‘Æ°á»£c dÃ¹ng Ä‘áº¿n trong bá»™ nhá»›. Nhá» cÃ³ nÃ³ mÃ  báº¡n khÃ´ng cáº§n pháº£i lo láº¯ng vá» viá»‡c dá»n dáº¹p bá»™ nhá»› thá»§ cÃ´ng.

Tuy nhiÃªn, Ä‘Ã´i khi, Ä‘á»ƒ lÃ m cÃ´ng viá»‡c dá»n dáº¹p nÃ y, Garbage Collector cáº§n "táº¡m dá»«ng" (pause) á»©ng dá»¥ng cá»§a báº¡n trong má»™t khoáº£ng thá»i gian ngáº¯n. Vá»›i cÃ¡c á»©ng dá»¥ng lá»›n, xá»­ lÃ½ nhiá»u dá»¯ liá»‡u, thá»i gian táº¡m dá»«ng nÃ y cÃ³ thá»ƒ kÃ©o dÃ i hÆ¡n má»™t chÃºt, vÃ  Ä‘iá»u Ä‘Ã³ cÃ³ thá»ƒ lÃ m báº¡n khÃ³ chá»‹u.

VÃ  Ä‘Ã³ lÃ  lÃºc Shenandoah xuáº¥t hiá»‡n!

HÃ£y nghÄ© vá» Shenandoah nhÆ° má»™t "ngÆ°á»i dá»n rÃ¡c siÃªu tá»‘c" váº­y. Má»¥c tiÃªu chÃ­nh cá»§a nÃ³ lÃ  gÃ¬? Giáº£m thiá»ƒu thá»i gian "táº¡m dá»«ng" á»©ng dá»¥ng xuá»‘ng má»©c *cá»±c ká»³ tháº¥p*, gáº§n nhÆ° khÃ´ng Ä‘Ã¡ng ká»ƒ, ká»ƒ cáº£ khi báº¡n Ä‘ang cÃ³ má»™t Ä‘á»‘ng dá»¯ liá»‡u khá»•ng lá»“ trong bá»™ nhá»›. NÃ³ cá»‘ gáº¯ng lÃ m háº§u háº¿t cÃ´ng viá»‡c dá»n dáº¹p *cÃ¹ng lÃºc* vá»›i viá»‡c á»©ng dá»¥ng cá»§a báº¡n Ä‘ang cháº¡y. Tháº­t tuyá»‡t vá»i pháº£i khÃ´ng?

Äiá»u nÃ y cá»±c ká»³ há»¯u Ã­ch cho nhá»¯ng á»©ng dá»¥ng cáº§n pháº£n há»“i *siÃªu nhanh*, khÃ´ng muá»‘n bá»‹ giÃ¡n Ä‘oáº¡n dÃ¹ chá»‰ má»™t chÃºt, ngay cáº£ khi chÃºng Ä‘ang quáº£n lÃ½ má»™t lÆ°á»£ng lá»›n bá»™ nhá»›.

Báº¡n muá»‘n "nhá»" Shenandoah dá»n dáº¹p cho á»©ng dá»¥ng cá»§a mÃ¬nh chá»©? Ráº¥t Ä‘Æ¡n giáº£n! Khi báº¡n cháº¡y á»©ng dá»¥ng Java, chá»‰ cáº§n thÃªm cá» nÃ y vÃ o:

`-XX:+UseShenandoahGC`

Tháº¿ lÃ  á»©ng dá»¥ng Java cá»§a báº¡n sáº½ sá»­ dá»¥ng Shenandoah Ä‘á»ƒ quáº£n lÃ½ bá»™ nhá»›, giÃºp má»i thá»© cháº¡y mÆ°á»£t mÃ  hÆ¡n vá»›i nhá»¯ng láº§n táº¡m dá»«ng ngáº¯n ngá»§i Ä‘áº¿n khÃ³ tin!
    - Báº¡n Ä‘Ã£ bao giá» nghe nÃ³i vá» "bá»™ thu gom rÃ¡c" trong Java chÆ°a?
Nghe tÃªn cÃ³ váº» hÆ¡i láº¡, nhÆ°ng nÃ³ lÃ  má»™t trá»£ thá»§ Ä‘áº¯c lá»±c Ä‘áº¥y!

TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©: Khi á»©ng dá»¥ng Java cá»§a báº¡n cháº¡y, nÃ³ táº¡o ra ráº¥t nhiá»u Ä‘á»‘i tÆ°á»£ng (nhÆ° `new Dog()`, `new Car()`).
Má»—i Ä‘á»‘i tÆ°á»£ng nÃ y chiáº¿m má»™t Ã­t khÃ´ng gian trong bá»™ nhá»› mÃ¡y tÃ­nh.
Äáº¿n má»™t lÃºc nÃ o Ä‘Ã³, cÃ³ nhá»¯ng Ä‘á»‘i tÆ°á»£ng khÃ´ng cÃ²n cáº§n thiáº¿t ná»¯a, chÃºng trá»Ÿ thÃ nh "rÃ¡c" chiáº¿m chá»—.

Váº­y, "bá»™ thu gom rÃ¡c" (hay GC - Garbage Collector) chÃ­nh lÃ  anh chÃ ng dá»n dáº¹p Ä‘áº·c biá»‡t nÃ y.
Nhiá»‡m vá»¥ cá»§a nÃ³ lÃ  Ä‘i tÃ¬m nhá»¯ng "rÃ¡c" Ä‘Ã³ vÃ  dá»n sáº¡ch chÃºng, giáº£i phÃ³ng bá»™ nhá»› Ä‘á»ƒ báº¡n cÃ³ thá»ƒ táº¡o thÃªm nhiá»u Ä‘á»‘i tÆ°á»£ng má»›i.
Tuyá»‡t vá»i pháº£i khÃ´ng?

NhÆ°ng cÃ³ má»™t Ä‘iá»u nhá» xÃ­u cáº§n lÆ°u Ã½...
ÄÃ´i khi, khi anh chÃ ng GC nÃ y lÃ m viá»‡c, nÃ³ cáº§n "táº¡m dá»«ng" á»©ng dá»¥ng cá»§a báº¡n láº¡i má»™t chÃºt xÃ­u.
Kiá»ƒu nhÆ°, má»i thá»© pháº£i dá»«ng láº¡i trong vÃ i mili giÃ¢y Ä‘á»ƒ GC cÃ³ thá»ƒ táº­p trung dá»n dáº¹p.
ChÃºng ta gá»i Ä‘Ã³ lÃ  "thá»i gian táº¡m dá»«ng" (pause time).
Náº¿u thá»i gian táº¡m dá»«ng nÃ y quÃ¡ dÃ i, báº¡n cÃ³ thá»ƒ cáº£m tháº¥y á»©ng dá»¥ng bá»‹ "Ä‘Æ¡" hoáº·c khÃ´ng pháº£n há»“i trong chá»‘c lÃ¡t.
KhÃ´ng vui tÃ­ nÃ o, Ä‘Ãºng khÃ´ng?

Tháº¿ thÃ¬, má»™t "bá»™ thu gom rÃ¡c cÃ³ thá»i gian táº¡m dá»«ng tháº¥p" (low pause time garbage collector) lÃ  gÃ¬?
ÄÃ³ lÃ  má»™t phiÃªn báº£n GC siÃªu thÃ´ng minh, Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘áº·c biá»‡t Ä‘á»ƒ giáº£m thiá»ƒu tá»‘i Ä‘a nhá»¯ng láº§n "táº¡m dá»«ng" khÃ³ chá»‹u Ä‘Ã³.
Má»¥c tiÃªu cá»§a nÃ³ lÃ  lÃ m cho thá»i gian dá»«ng á»©ng dá»¥ng cá»±c ká»³ ngáº¯n, gáº§n nhÆ° khÃ´ng thá»ƒ nháº­n ra.
Hoáº·c tháº­m chÃ­ lÃ  lÃ m viá»‡c song song vá»›i á»©ng dá»¥ng cá»§a báº¡n, chá»‰ dá»«ng láº¡i ráº¥t Ã­t hoáº·c khÃ´ng Ä‘Ã¡ng ká»ƒ.

Káº¿t quáº£ lÃ  gÃ¬ Æ°?
á»¨ng dá»¥ng cá»§a báº¡n sáº½ luÃ´n cháº¡y mÆ°á»£t mÃ , pháº£n há»“i nhanh nháº¡y, ngay cáº£ khi GC Ä‘ang Ã¢m tháº§m lÃ m nhiá»‡m vá»¥ dá»n dáº¹p.
NgÆ°á»i dÃ¹ng sáº½ cÃ³ tráº£i nghiá»‡m tuyá»‡t vá»i hÆ¡n nhiá»u vÃ¬ khÃ´ng cÃ²n bá»‹ giÃ¡n Ä‘oáº¡n ná»¯a!
    - NÃ³ thá»±c hiá»‡n viá»‡c dá»“n nÃ©n dá»¯ liá»‡u.

Ã€ mÃ  khoan, báº¡n Ä‘á»«ng lo lÃ  nÃ³ sáº½ dá»«ng má»i thá»© láº¡i Ä‘á»ƒ lÃ m nhÃ©!

KhÃ´ng Ä‘Ã¢u! NÃ³ lÃ m Ä‘iá»u nÃ y *cÃ¹ng lÃºc* (hay cÃ²n gá»i lÃ  *song song*) vá»›i cÃ¡c cÃ´ng viá»‡c khÃ¡c cá»§a há»‡ thá»‘ng.

Tá»©c lÃ , trong khi há»‡ thá»‘ng váº«n Ä‘ang báº­n rá»™n lÃ m viá»‡c, nÃ³ váº«n tranh thá»§ dá»n dáº¹p, sáº¯p xáº¿p láº¡i dá»¯ liá»‡u cho gá»n gÃ ng, hiá»‡u quáº£ hÆ¡n mÃ  khÃ´ng lÃ m giÃ¡n Ä‘oáº¡n má»i thá»©. Tháº­t tiá»‡n lá»£i pháº£i khÃ´ng nÃ o!
    - NÃ³ Ä‘Ã£ cÃ³ sáºµn trong OpenJDK rá»“i nhÃ©!

    ```java
    public class GCDemo {
        public static void main(String[] args) {
            // Check current garbage collector
            java.lang.management.GarbageCollectorMXBean gc;
            for (java.lang.management.GarbageCollectorMXBean bean : 
                    java.lang.management.ManagementFactory.getGarbageCollectorMXBeans()) {
                System.out.println("GC Name: " + bean.getName());
                System.out.println("Collection Count: " + bean.getCollectionCount());
                System.out.println("Collection Time: " + bean.getCollectionTime() + "ms");
            }
        }
    }
    ```

    **CÃ¡c TÃ¹y chá»n cá»§a JVM Ä‘á»ƒ Äiá»u chá»‰nh TrÃ¬nh thu gom rÃ¡c (GC):**
    ```bash
    # Serial GC
    java -XX:+UseSerialGC -jar app.jar

    # Parallel GC
    java -XX:+UseParallelGC -XX:ParallelGCThreads=4 -jar app.jar

    # G1 GC
    java -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -jar app.jar

    # ZGC
    java -XX:+UseZGC -jar app.jar
    ```

    | Loáº¡i Bá»™ Thu Gom RÃ¡c | PhÃ¹ há»£p nháº¥t vá»›i... | Thá»i gian á»©ng dá»¥ng 'Ä‘á»©ng hÃ¬nh' | Tá»‘c Ä‘á»™ lÃ m viá»‡c (ThÃ´ng lÆ°á»£ng) |
|---|---|---|---|
    |---------|----------|------------|------------|
    | STT | á»¨ng dá»¥ng nhá» xÃ­u cá»§a chÃºng ta | Má»©c Ä‘á»™ 'Cao' | Má»©c Ä‘á»™ 'Tháº¥p' |
|---|---|---|---|
    | Xá»­ lÃ½ Song Song | á»¨ng dá»¥ng 'cÃ y' viá»‡c | Vá»«a pháº£i thÃ´i | Cao chÃ³t vÃ³t! |
    | G1 | CÃ¡c 'Ä‘á»‘ng rÃ¡c' (heap) Lá»šN? G1 'cÃ¢n' háº¿t! | Thá»i gian 'dá»«ng láº¡i' (pause time) má»¥c tiÃªu: Tháº¥p Ä‘áº¿n Trung bÃ¬nh. | Hiá»‡u suáº¥t tá»•ng thá»ƒ (throughput) má»¥c tiÃªu: Trung bÃ¬nh Ä‘áº¿n Cao. |
    | ZGC | Äá»™ trá»… tháº¥p (á»©ng dá»¥ng Ã­t bá»‹ dá»«ng) | Ráº¥t tháº¥p (ZGC lÃ m Ä‘Æ°á»£c!) | Trung bÃ¬nh (ZGC khÃ´ng pháº£i váº­y) |

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

53. ### `wait()` vÃ  `sleep()` khÃ¡c nhau NHÆ¯ THáº¾ NÃ€O váº­y nhá»‰?

ChÃ o báº¡n! Trong tháº¿ giá»›i Ä‘a luá»“ng (multithreading) cá»§a Java, Ä‘Ã´i khi báº¡n muá»‘n thread cá»§a mÃ¬nh "dá»«ng láº¡i" má»™t chÃºt. VÃ  Ä‘Ã³ lÃ  lÃºc chÃºng ta gáº·p hai anh báº¡n nÃ y: `wait()` vÃ  `sleep()`. Nghe cÃ³ váº» hÆ¡i giá»‘ng nhau nhá»‰? CÃ¹ng lÃ  "táº¡m dá»«ng" cáº£ mÃ . NhÆ°ng mÃ  KHÃ”NG Há»€ Ä‘Ã¢u! ChÃºng cÃ³ nhá»¯ng nhiá»‡m vá»¥ vÃ  cÃ¡ch hoáº¡t Ä‘á»™ng ráº¥t khÃ¡c nhau Ä‘Ã³.

CÃ¹ng tÃ¬m hiá»ƒu xem má»—i anh báº¡n nÃ y lÃ m gÃ¬ nhÃ©!

#### ğŸ˜´ Anh báº¡n `sleep()`: ÄÆ¡n giáº£n lÃ  Ä‘i ngá»§!

HÃ£y tÆ°á»Ÿng tÆ°á»£ng thread cá»§a báº¡n lÃ  má»™t ngÆ°á»i Ä‘ang lÃ m viá»‡c vÃ  muá»‘n nghá»‰ giáº£i lao má»™t lÃ¡t. NÃ³ gá»i `sleep()`.

*   **NÃ³ lÃ m gÃ¬?** Anh báº¡n `sleep()` nÃ y Ä‘Æ¡n giáº£n lÃ  muá»‘n **thread HIá»†N Táº I** cá»§a báº¡n Ä‘i ngá»§ má»™t giáº¥c. NÃ³ giá»‘ng nhÆ° báº¡n Ä‘áº·t bÃ¡o thá»©c váº­y, "Dáº­y sau 5 giÃ¢y nhÃ©!"
*   **Dá»«ng bao lÃ¢u?** Báº¡n pháº£i nÃ³i rÃµ cho nÃ³ biáº¿t lÃ  dá»«ng bao lÃ¢u (vÃ­ dá»¥: `Thread.sleep(1000)` lÃ  dá»«ng 1 giÃ¢y). NÃ³ sáº½ tá»± Ä‘á»™ng thá»©c dáº­y sau Ä‘Ãºng khoáº£ng thá»i gian Ä‘Ã³.
*   **CÃ³ nháº£ 'khÃ³a' (lock) khÃ´ng?** KHÃ”NG! ÄÃ¢y lÃ  Ä‘iá»ƒm quan trá»ng nÃ¨! Khi thread cá»§a báº¡n ngá»§, nÃ³ váº«n **GIá»® CHáº¶T** táº¥t cáº£ cÃ¡c "khÃ³a" (monitor lock) mÃ  nÃ³ Ä‘ang cÃ³. Tá»©c lÃ , náº¿u thread A Ä‘ang giá»¯ má»™t cÃ¡i khÃ³a vÃ  Ä‘i ngá»§, thÃ¬ khÃ´ng thread nÃ o khÃ¡c cÃ³ thá»ƒ vÃ o cÃ¡i vÃ¹ng code Ä‘Æ°á»£c báº£o vá»‡ bá»Ÿi khÃ³a Ä‘Ã³ cho Ä‘áº¿n khi thread A thá»©c dáº­y vÃ  hoÃ n thÃ nh cÃ´ng viá»‡c cá»§a nÃ³.
*   **NÃ³ á»Ÿ Ä‘Ã¢u?** NÃ³ lÃ  má»™t phÆ°Æ¡ng thá»©c `static` cá»§a lá»›p `Thread`. Báº¡n gá»i nÃ³ kiá»ƒu `Thread.sleep(thá»i_gian);`
*   **DÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?** ÄÆ¡n giáº£n lÃ  Ä‘á»ƒ trÃ¬ hoÃ£n má»™t chÃºt, cho thread nghá»‰ ngÆ¡i hoáº·c chá» Ä‘á»£i má»™t thá»i gian nháº¥t Ä‘á»‹nh thÃ´i.

```java
public class MySleepyThread extends Thread {
    public void run() {
        System.out.println("Thread " + Thread.currentThread().getName() + " Ä‘ang cháº¡y...");
        try {
            System.out.println("Thread " + Thread.currentThread().getName() + " Ä‘i ngá»§ 2 giÃ¢y.");
            Thread.sleep(2000); // Ngá»§ 2000 mili giÃ¢y = 2 giÃ¢y
            System.out.println("Thread " + Thread.currentThread().getName() + " thá»©c dáº­y rá»“i!");
        } catch (InterruptedException e) {
            System.out.println("Thread " + Thread.currentThread().getName() + " bá»‹ Ä‘Ã¡nh thá»©c giá»¯a chá»«ng!");
        }
    }
}
```

#### â³ Anh báº¡n `wait()`: Chá» Ä‘á»£i má»™t tÃ­n hiá»‡u!

Anh báº¡n `wait()` phá»©c táº¡p hÆ¡n má»™t chÃºt. NÃ³ khÃ´ng chá»‰ Ä‘Æ¡n thuáº§n lÃ  "ngá»§" mÃ  lÃ  "chá» Ä‘á»£i". Chá» Ä‘á»£i ai Ä‘Ã³ Ä‘Ã¡nh thá»©c nÃ³ dáº­y. NÃ³ giá»‘ng nhÆ° báº¡n Ä‘ang chá» xe buÃ½t váº­y, báº¡n khÃ´ng biáº¿t khi nÃ o nÃ³ Ä‘áº¿n, nhÆ°ng báº¡n sáº½ lÃªn xe khi nÃ³ tá»›i vÃ  cÃ³ ngÆ°á»i ra hiá»‡u cho báº¡n.

*   **NÃ³ lÃ m gÃ¬?** Giá»‘ng nhÆ° `sleep()`, nÃ³ cÅ©ng táº¡m dá»«ng cÃ¡i **thread Ä‘ang gá»i nÃ³**. NhÆ°ng mÃ ...
*   **Dá»«ng bao lÃ¢u?** NÃ³ sáº½ dá»«ng cho Ä‘áº¿n khi má»™t thread khÃ¡c **"thÃ´ng bÃ¡o" (notify)** cho nÃ³ dáº­y (hoáº·c `notifyAll()` Ä‘á»ƒ Ä‘Ã¡nh thá»©c táº¥t cáº£), hoáº·c cho Ä‘áº¿n khi nÃ³ bá»‹ "ngáº¯t" (interrupted). NÃ³ khÃ´ng cÃ³ thá»i gian cá»‘ Ä‘á»‹nh nhÆ° `sleep()` Ä‘Ã¢u nhÃ©.
*   **CÃ³ nháº£ 'khÃ³a' (lock) khÃ´ng?** CÃ“! ÄÃ¢y lÃ  Ä‘iá»ƒm Cá»°C Ká»² KHÃC BIá»†T vÃ  quan trá»ng nháº¥t nÃ¨! Khi thread cá»§a báº¡n gá»i `wait()`, nÃ³ sáº½ **Tá»° Äá»˜NG nháº£ cÃ¡i "khÃ³a" (monitor lock)** cá»§a Ä‘á»‘i tÆ°á»£ng mÃ  nÃ³ Ä‘ang chá». Äiá»u nÃ y cho phÃ©p cÃ¡c thread khÃ¡c cÃ³ cÆ¡ há»™i vÃ o vÃ  lÃ m viá»‡c vá»›i Ä‘á»‘i tÆ°á»£ng Ä‘Ã³.
*   **NÃ³ á»Ÿ Ä‘Ã¢u?** NÃ³ lÃ  phÆ°Æ¡ng thá»©c cá»§a lá»›p `Object` (tá»©c lÃ  má»i Ä‘á»‘i tÆ°á»£ng trong Java Ä‘á»u cÃ³ thá»ƒ gá»i `wait()`).
*   **DÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?** NÃ³ Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ **giao tiáº¿p giá»¯a cÃ¡c thread** (inter-thread communication). Má»™t thread chá» Ä‘á»£i má»™t Ä‘iá»u kiá»‡n nÃ o Ä‘Ã³ xáº£y ra (vÃ­ dá»¥: dá»¯ liá»‡u Ä‘Ã£ sáºµn sÃ ng), vÃ  má»™t thread khÃ¡c sáº½ thÃ´ng bÃ¡o khi Ä‘iá»u kiá»‡n Ä‘Ã³ Ä‘Æ°á»£c Ä‘Ã¡p á»©ng.
*   **LÆ°u Ã½ quan trá»ng:** Báº¡n **CHá»ˆ** cÃ³ thá»ƒ gá»i `wait()` (vÃ  cáº£ `notify()`, `notifyAll()`) bÃªn trong má»™t khá»‘i `synchronized` thÃ´i nhÃ©! Náº¿u khÃ´ng, báº¡n sáº½ bá»‹ lá»—i `IllegalMonitorStateException` Ä‘Ã³.

```java
public class SharedResource {
    private boolean dataReady = false;

    public synchronized void waitForData() {
        while (!dataReady) { // LuÃ´n kiá»ƒm tra Ä‘iá»u kiá»‡n trong vÃ²ng láº·p!
            try {
                System.out.println(Thread.currentThread().getName() + " Ä‘ang chá» dá»¯ liá»‡u...");
                wait(); // Nháº£ khÃ³a vÃ  chá» Ä‘á»£i
                System.out.println(Thread.currentThread().getName() + " Ä‘Æ°á»£c Ä‘Ã¡nh thá»©c!");
            } catch (InterruptedException e) {
                System.out.println(Thread.currentThread().getName() + " bá»‹ ngáº¯t khi Ä‘ang chá»!");
            }
        }
        System.out.println(Thread.currentThread().getName() + " Ä‘Ã£ nháº­n Ä‘Æ°á»£c dá»¯ liá»‡u!");
    }

    public synchronized void produceData() {
        System.out.println(Thread.currentThread().getName() + " Ä‘ang sáº£n xuáº¥t dá»¯ liá»‡u...");
        // Giáº£ sá»­ lÃ m viá»‡c gÃ¬ Ä‘Ã³ máº¥t thá»i gian
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
        dataReady = true;
        System.out.println(Thread.currentThread().getName() + " dá»¯ liá»‡u Ä‘Ã£ sáºµn sÃ ng. ThÃ´ng bÃ¡o!");
        notifyAll(); // ÄÃ¡nh thá»©c táº¥t cáº£ cÃ¡c thread Ä‘ang chá»
    }
}
```

#### ğŸ¤¯ Váº­y tÃ³m láº¡i, sá»± khÃ¡c biá»‡t chÃ­nh lÃ  gÃ¬?

HÃ£y nhÃ¬n vÃ o báº£ng so sÃ¡nh nÃ y Ä‘á»ƒ dá»… hÃ¬nh dung hÆ¡n nha:

| Äáº·c Ä‘iá»ƒm          | `sleep()`                               | `wait()`                                                              |
| :---------------- | :-------------------------------------- | :-------------------------------------------------------------------- |
| **Lá»›p sá»Ÿ há»¯u**    | `Thread` (lÃ  phÆ°Æ¡ng thá»©c `static`)      | `Object` (lÃ  phÆ°Æ¡ng thá»©c `instance`)                                 |
| **Nháº£ khÃ³a (lock)?** | KHÃ”NG. Giá»¯ cháº·t khÃ³a.                 | CÃ“. Nháº£ khÃ³a cá»§a Ä‘á»‘i tÆ°á»£ng mÃ  nÃ³ Ä‘ang chá».                           |
| **Má»¥c Ä‘Ã­ch**      | Táº¡m dá»«ng thread trong má»™t thá»i gian cá»‘ Ä‘á»‹nh. | Giao tiáº¿p giá»¯a cÃ¡c thread (chá» má»™t Ä‘iá»u kiá»‡n nÃ o Ä‘Ã³).               |
| **CÃ¡ch thá»©c tá»‰nh** | Tá»± Ä‘á»™ng thá»©c dáº­y sau thá»i gian Ä‘Ã£ Ä‘á»‹nh. | Pháº£i Ä‘Æ°á»£c `notify()` hoáº·c `notifyAll()` bá»Ÿi thread khÃ¡c, hoáº·c bá»‹ ngáº¯t. |
| **Cáº§n `synchronized`?** | KHÃ”NG báº¯t buá»™c.                       | Báº®T BUá»˜C pháº£i gá»i trong khá»‘i `synchronized`.                           |

Nhá»› ká»¹ nhÃ©: `sleep()` chá»‰ lÃ  má»™t giáº¥c ngá»§ ngáº¯n, cÃ²n `wait()` lÃ  má»™t sá»± chá» Ä‘á»£i cÃ³ má»¥c Ä‘Ã­ch, sáºµn sÃ ng nhÆ°á»ng "quyá»n" cho ngÆ°á»i khÃ¡c lÃ m viá»‡c!

    **Both**

NÃ y báº¡n! Khi báº¡n tháº¥y tá»« "Both" nÃ y... nÃ³ cÃ³ nghÄ©a lÃ  "Cáº£ hai" Ä‘áº¥y.

NÃ³ dÃ¹ng Ä‘á»ƒ chá»‰ hai thá»© cÃ¹ng má»™t lÃºc. KhÃ´ng pháº£i chá»‰ má»™t, mÃ  lÃ ... ÄÃšNG Rá»’I! Cáº£ hai luÃ´n! `wait()` ChÃ o báº¡n! Sáºµn sÃ ng cho má»™t tá»« cá»±c ká»³ tiá»‡n lá»£i chÆ°a?

Khi báº¡n muá»‘n nÃ³i cÃ³ `thá»© nÃ y` **vÃ ** `thá»© kia`...

Kiá»ƒu nhÆ° "má»™t cá»‘c cÃ  phÃª" **vÃ ** "má»™t chiáº¿c bÃ¡nh quy" Ã½.

Trong tiáº¿ng Viá»‡t, chÃºng ta cÃ³ má»™t tá»« nhá» bÃ© nhÆ°ng quyá»n nÄƒng Ä‘á»ƒ lÃ m viá»‡c Ä‘Ã³:

```
vÃ 
```

Dá»… nhÆ° Äƒn káº¹o, Ä‘Ãºng khÃ´ng nÃ o? Giá» báº¡n Ä‘Ã£ biáº¿t cÃ¡ch ná»‘i má»i thá»© láº¡i vá»›i nhau rá»“i! `sleep()` Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ *táº¡m dá»«ng* má»™t luá»“ng (thread) Ä‘ang cháº¡y. Nghe cÃ³ váº» giá»‘ng nhau Ä‘Ãºng khÃ´ng? NhÆ°ng mÃ  khoan Ä‘Ã£, chÃºng láº¡i cÃ³ nhá»¯ng Ä‘iá»ƒm khÃ¡c biá»‡t Ráº¤T ÄÃNG Ká»‚ Ä‘Ã³ nha:

    | wait() | sleep() |
|---|---|
| **Báº¡n lÃ  ai?** <br> NÃ y, báº¡n lÃ  má»™t phÆ°Æ¡ng thá»©c cá»§a lá»›p `Object` Ä‘áº¥y! Äiá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ , Má»ŒI Ä‘á»‘i tÆ°á»£ng Java Ä‘á»u cÃ³ thá»ƒ gá»i `wait()` nhÃ©. | **Báº¡n lÃ  ai?** <br> CÃ²n tÃ´i, tÃ´i lÃ  má»™t phÆ°Æ¡ng thá»©c `static` cá»§a lá»›p `Thread`. VÃ¬ tháº¿, báº¡n sáº½ gá»i tÃ´i thÃ´ng qua tÃªn lá»›p `Thread` (vÃ­ dá»¥: `Thread.sleep(1000)`). |
| **Báº¡n cÃ³ nháº£ khÃ³a khÃ´ng?** <br> ÄÃ¢y lÃ  Ä‘iá»ƒm cá»±c ká»³ quan trá»ng nÃ¨! Khi báº¡n gá»i `wait()`, báº¡n sáº½ Tá»° Äá»˜NG nháº£ cÃ¡i "khÃ³a" (hay cÃ²n gá»i lÃ  monitor lock) mÃ  luá»“ng cá»§a báº¡n Ä‘ang giá»¯ trÃªn Ä‘á»‘i tÆ°á»£ng Ä‘Ã³. <br> Äiá»u nÃ y cho phÃ©p cÃ¡c luá»“ng khÃ¡c cÃ³ cÆ¡ há»™i giÃ nh láº¥y khÃ³a vÃ  thá»±c hiá»‡n cÃ´ng viá»‡c cá»§a chÃºng vá»›i Ä‘á»‘i tÆ°á»£ng nÃ y. Hay ho chÆ°a? | **Báº¡n cÃ³ nháº£ khÃ³a khÃ´ng?** <br> NgÆ°á»£c láº¡i, khi báº¡n gá»i `sleep()`, báº¡n KHÃ”NG há» nháº£ cÃ¡i "khÃ³a" mÃ  luá»“ng cá»§a báº¡n Ä‘ang giá»¯ Ä‘Ã¢u nhÃ©! <br> Má»i luá»“ng khÃ¡c muá»‘n dÃ¹ng Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ váº«n sáº½ pháº£i Ä‘á»©ng chá» báº¡n nháº£ khÃ³a ra má»›i Ä‘Æ°á»£c. |
| **Báº¡n pháº£i á»Ÿ Ä‘Ã¢u?** <br> Báº¡n CHá»ˆ cÃ³ thá»ƒ Ä‘Æ°á»£c gá»i bÃªn trong má»™t khá»‘i `synchronized` thÃ´i nhÃ©! <br> Náº¿u khÃ´ng, chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n sáº½ "la lÃ ng" lÃªn báº±ng má»™t ngoáº¡i lá»‡ `IllegalMonitorStateException` Ä‘áº¥y. (Giá»‘ng nhÆ° báº¡n cá»‘ gáº¯ng má»Ÿ cá»­a má»™t cÄƒn phÃ²ng mÃ  khÃ´ng cÃ³ chÃ¬a khÃ³a váº­y!) | **Báº¡n pháº£i á»Ÿ Ä‘Ã¢u?** <br> TÃ´i thÃ¬ dá»… tÃ­nh hÆ¡n nhiá»u! Báº¡n cÃ³ thá»ƒ gá»i tÃ´i á»Ÿ Báº¤T Cá»¨ ÄÃ‚U trong mÃ£ cá»§a mÃ¬nh. <br> KhÃ´ng cáº§n pháº£i á»Ÿ trong khá»‘i `synchronized` Ä‘Ã¢u. |
| **Khi nÃ o báº¡n thá»©c dáº­y?** <br> Báº¡n sáº½ "ngá»§" vÃ  chá» Ä‘á»£i cho Ä‘áº¿n khi cÃ³ má»™t luá»“ng khÃ¡c "Ä‘Ã¡nh thá»©c" báº¡n dáº­y báº±ng cÃ¡ch gá»i `notify()` hoáº·c `notifyAll()` trÃªn CÃ™NG Ä‘á»‘i tÆ°á»£ng Ä‘Ã³. <br> Hoáº·c lÃ  báº¡n chá» háº¿t thá»i gian báº¡n Ä‘Ã£ Ä‘áº·t ra (náº¿u cÃ³). | **Khi nÃ o báº¡n thá»©c dáº­y?** <br> TÃ´i sáº½ "ngá»§" Ä‘Ãºng khoáº£ng thá»i gian báº¡n Ä‘Ã£ báº£o tÃ´i ngá»§ (vÃ­ dá»¥: `Thread.sleep(1000)` lÃ  1 giÃ¢y). <br> Khi háº¿t giá», tÃ´i sáº½ tá»± Ä‘á»™ng thá»©c dáº­y. Hoáº·c ai Ä‘Ã³ cÃ³ thá»ƒ "lÃ m phiá»n" tÃ´i dáº­y sá»›m hÆ¡n báº±ng cÃ¡ch gá»i `interrupt()` (lÃºc Ä‘Ã³ tÃ´i sáº½ nÃ©m ra `InterruptedException`). |
| **Má»¥c Ä‘Ã­ch cá»§a báº¡n lÃ  gÃ¬?** <br> Báº¡n Ä‘Æ°á»£c sinh ra Ä‘á»ƒ giÃºp cÃ¡c luá»“ng "nÃ³i chuyá»‡n" vÃ  phá»‘i há»£p vá»›i nhau. Má»™t luá»“ng chá» Ä‘á»£i má»™t Ä‘iá»u kiá»‡n nÃ o Ä‘Ã³ xáº£y ra, vÃ  luá»“ng khÃ¡c sáº½ bÃ¡o cho nÃ³ biáº¿t khi Ä‘iá»u kiá»‡n Ä‘Ã³ Ä‘Ã£ Ä‘Ãºng. <br> (NghÄ© Ä‘áº¿n viá»‡c báº¡n chá» má»™t mÃ³n Ä‘á»“ Ä‘Æ°á»£c sáº£n xuáº¥t xong váº­y!) | **Má»¥c Ä‘Ã­ch cá»§a báº¡n lÃ  gÃ¬?** <br> Má»¥c Ä‘Ã­ch cá»§a tÃ´i Ä‘Æ¡n giáº£n lÃ  Ä‘á»ƒ "táº¡m dá»«ng" luá»“ng hiá»‡n táº¡i trong má»™t khoáº£ng thá»i gian nháº¥t Ä‘á»‹nh thÃ´i. <br> Giá»‘ng nhÆ° báº¡n muá»‘n nghá»‰ giáº£i lao má»™t chÃºt, hoáº·c muá»‘n chá» má»™t sá»± kiá»‡n nÃ o Ä‘Ã³ diá»…n ra sau má»™t thá»i gian nháº¥t Ä‘á»‹nh. |
    |--------|---------|
    | Nhá»¯ng thá»© `Object` class Ä‘á»‹nh nghÄ©a | Nhá»¯ng thá»© `Thread` class Ä‘á»‹nh nghÄ©a |
    | NÃ³ nháº£ cÃ¡i khÃ³a (hay monitor) ra Ä‘áº¥y! | NÃ³ KHÃ”NG nháº£ cÃ¡i khÃ³a Ä‘Ã¢u nhÃ©! |
    | Cáº§n Ä‘Æ°á»£c gá»i tá»« ngá»¯ cáº£nh `synchronized` | CÃ³ thá»ƒ gá»i tá»« báº¥t cá»© Ä‘Ã¢u |
|---|---|
| Báº¡n **KHÃ”NG THá»‚** gá»i nÃ³ má»™t cÃ¡ch tÃ¹y tiá»‡n Ä‘Ã¢u nhÃ©! NÃ³ Ä‘Ã²i há»i báº¡n pháº£i Ä‘ang á»Ÿ trong má»™t "khu vá»±c an toÃ n" Ä‘áº·c biá»‡t, hay cÃ²n gá»i lÃ  ngá»¯ cáº£nh `synchronized`. HÃ£y hÃ¬nh dung nhÆ° báº¡n pháº£i cÃ³ chÃ¬a khÃ³a má»›i vÃ o Ä‘Æ°á»£c má»™t cÄƒn phÃ²ng quan trá»ng váº­y Ä‘Ã³. Viá»‡c nÃ y giÃºp Ä‘áº£m báº£o má»i thá»© khÃ´ng bá»‹ lá»™n xá»™n khi nhiá»u luá»“ng (thread) cÃ¹ng lÃºc muá»‘n truy cáº­p. | Vá»›i cÃ¡i nÃ y thÃ¬ dá»… thá»Ÿ hÆ¡n nhiá»u! Báº¡n cá»© viá»‡c gá»i nÃ³ báº¥t cá»© lÃºc nÃ o, tá»« báº¥t cá»© Ä‘Ã¢u trong chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh. Cháº³ng cáº§n "chÃ¬a khÃ³a" hay "khu vá»±c an toÃ n" nÃ o Ä‘áº·c biá»‡t cáº£. Cá»© thoáº£i mÃ¡i gá»i thÃ´i! |
    | CÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘Ã¡nh thá»©c bá»Ÿi `notify()`/`notifyAll()` | KhÃ´ng thá»ƒ bá»‹ Ä‘Ã¡nh thá»©c (trá»« khi cÃ³ `interrupt`) |
|---|---|
| NÃ y, cÃ³ nhá»¯ng thread "ngá»§" má»™t cÃ¡ch... "tá»‰nh tÃ¡o" láº¯m nhÃ©! ChÃºng Ä‘ang chá» má»™t tÃ­n hiá»‡u Ä‘áº·c biá»‡t, kiá»ƒu nhÆ° cÃ³ ai Ä‘Ã³ gá»i tÃªn chÃºng váº­y. Tháº¿ nÃªn, khi `notify()` hay `notifyAll()` Ä‘Æ°á»£c gá»i, "tÃ¡ch!", chÃºng tá»‰nh dáº­y ngay tá»©c thÃ¬! | NhÆ°ng mÃ , khÃ´ng pháº£i thread nÃ o cÅ©ng "nháº¡y" nhÆ° váº­y Ä‘Ã¢u. CÃ³ nhá»¯ng thread khi Ä‘Ã£ "ngá»§" lÃ  "ngá»§ say nhÆ° cháº¿t" luÃ´n, khÃ´ng thÃ¨m nghe ngÃ³ng gÃ¬ háº¿t. DÃ¹ báº¡n cÃ³ gá»i `notify()` hay `notifyAll()` thÃ¬ chÃºng cÅ©ng "bÆ¡" Ä‘áº¹p! Chá»‰ khi cÃ³ má»™t "cÃº giáº­t mÃ¬nh" cá»±c máº¡nh tá»« `interrupt()` thÃ¬ may ra chÃºng má»›i "tá»‰nh ngá»§" thÃ´i. |
    | DÃ¹ng Ä‘á»ƒ lÃ m gÃ¬ nÃ o? (Äá»«ng vá»™i nhÃ©!) | CÃ²n cÃ¡i nÃ y thÃ¬ sao? (Cá»© tá»« tá»« thÃ´i!) |
| :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
    | Khi má»™t **Ä‘á»‘i tÆ°á»£ng** lÃ m gÃ¬ Ä‘Ã³... | Khi cáº£ **lá»›p** lÃ m gÃ¬ Ä‘Ã³ (khÃ´ng cáº§n Ä‘á»‘i tÆ°á»£ng Ä‘Ã¢u!) |

    ```java
    public class WaitVsSleep {
        private static final Object lock = new Object();
        
        public static void main(String[] args) {
            // Demonstrating sleep()
            Thread sleepThread = new Thread(() -> {
                System.out.println("Sleep thread starting...");
                try {
                    Thread.sleep(2000);  // Sleeps for 2 seconds
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println("Sleep thread woke up!");
            });
            
            // Demonstrating wait()
            Thread waitThread = new Thread(() -> {
                synchronized (lock) {
                    System.out.println("Wait thread starting...");
                    try {
                        lock.wait(2000);  // Waits for 2 seconds or until notified
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    System.out.println("Wait thread woke up!");
                }
            });
            
            // Notify thread
            Thread notifyThread = new Thread(() -> {
                try {
                    Thread.sleep(1000);  // Wait 1 second
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                synchronized (lock) {
                    System.out.println("Notifying...");
                    lock.notify();  // Wakes up the waiting thread
                }
            });
            
            sleepThread.start();
            waitThread.start();
            notifyThread.start();
        }
    }
    ```

    Nhá»¯ng Ä‘iá»u quan trá»ng báº¡n cáº§n ghi nhá»›:
    - `wait()` NÃ³ Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ giÃºp cÃ¡c "luá»“ng" (tÆ°á»Ÿng tÆ°á»£ng lÃ  cÃ¡c cÃ´ng viá»‡c nhá» Ä‘ang cháº¡y cÃ¹ng lÃºc trong chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n) phá»‘i há»£p nhá»‹p nhÃ ng vá»›i nhau.
    - `sleep()` Báº¡n muá»‘n chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh "nghá»‰ giáº£i lao" má»™t chÃºt khÃ´ng?

CÃ³ nhá»¯ng lÃºc, báº¡n cáº§n nÃ³ *dá»«ng láº¡i*, khÃ´ng lÃ m gÃ¬ cáº£, trong má»™t khoáº£ng thá»i gian nháº¥t Ä‘á»‹nh.

Äá»ƒ lÃ m Ä‘Æ°á»£c Ä‘iá»u Ä‘Ã³, chÃºng ta dÃ¹ng má»™t "má»‡nh lá»‡nh" Ä‘áº·c biá»‡t.

Má»‡nh lá»‡nh nÃ y giÃºp báº¡n *táº¡m dá»«ng* quÃ¡ trÃ¬nh thá»±c thi (hay cÃ²n gá»i lÃ  "cháº¡y") cá»§a chÆ°Æ¡ng trÃ¬nh.

NÃ³ sáº½ "Ä‘á»©ng im" trong Ä‘Ãºng khoáº£ng thá»i gian mÃ  báº¡n Ä‘Ã£ chá»‰ Ä‘á»‹nh.
    - Ã€ nÃ y, cÃ³ má»™t thá»© cá»±c ká»³ quan trá»ng báº¡n pháº£i nhá»› Ä‘áº¥y: lÃºc nÃ o cÅ©ng pháº£i gá»i nÃ³! Äá»«ng quÃªn nha! `wait()` Báº¡n Ä‘ang á»Ÿ **bÃªn trong má»™t khá»‘i `synchronized`** rá»“i Ä‘áº¥y!

Äiá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ  gÃ¬ Æ°?

ÄÆ¡n giáº£n thÃ´i: táº¡i má»™t thá»i Ä‘iá»ƒm, chá»‰ DUY NHáº¤T Má»˜T luá»“ng (thread) Ä‘Æ°á»£c phÃ©p cháº¡y cÃ¡c Ä‘oáº¡n mÃ£ á»Ÿ Ä‘Ã¢y.

CÃ¡c luá»“ng khÃ¡c muá»‘n 'nháº£y vÃ o' Ã ? Xin lá»—i, pháº£i xáº¿p hÃ ng chá» bÃªn ngoÃ i!

NÃ³ giá»‘ng nhÆ° má»™t cÃ¡nh cá»­a chá»‰ cho phÃ©p má»™t ngÆ°á»i Ä‘i qua táº¡i má»™t lÃºc váº­y. An toÃ n tuyá»‡t Ä‘á»‘i!
    - `wait()` TÆ°á»Ÿng tÆ°á»£ng báº¡n Ä‘ang lÃ m má»™t viá»‡c gÃ¬ Ä‘Ã³... bá»—ng dÆ°ng, TING TING! CÃ³ má»™t "káº» phÃ¡ Ä‘Ã¡m" nÃ o Ä‘Ã³ xuáº¥t hiá»‡n vÃ  BUá»˜C báº¡n pháº£i táº¡m dá»«ng láº¡i.
ÄÃºng váº­y, nÃ³ *cÃ³ thá»ƒ bá»‹ giÃ¡n Ä‘oáº¡n bá»Ÿi*... `notify()` trÆ°á»›c khi háº¿t giá» chá»

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

54. ### Äá»£i chÃºt! notify() vÃ  notifyAll() cÃ³ gÃ¬ khÃ¡c nhau Ä‘Ã¢y?

    Báº¡n cÃ³ hai thá»©, Ä‘Ãºng khÃ´ng?
Má»™t cÃ¡i A... vÃ  má»™t cÃ¡i B.
Giá» báº¡n muá»‘n nÃ³i vá» **cáº£ hai cÃ¡i Ä‘Ã³ cÃ¹ng lÃºc**?
Báº¡n muá»‘n gá»™p chÃºng láº¡i lÃ m má»™t Ã½?

ÄÆ¡n giáº£n thÃ´i! Tá»« báº¡n cáº§n lÃ :

**Cáº£ hai**

NÃ³ giÃºp báº¡n nháº¯c Ä‘áº¿n hai thá»© má»™t cÃ¡ch gá»n gÃ ng Ä‘Ã³! `notify()` ChÃ o báº¡n! Sáºµn sÃ ng cho má»™t tá»« cá»±c ká»³ tiá»‡n lá»£i chÆ°a?

Khi báº¡n muá»‘n nÃ³i cÃ³ `thá»© nÃ y` **vÃ ** `thá»© kia`...

Kiá»ƒu nhÆ° "má»™t cá»‘c cÃ  phÃª" **vÃ ** "má»™t chiáº¿c bÃ¡nh quy" Ã½.

Trong tiáº¿ng Viá»‡t, chÃºng ta cÃ³ má»™t tá»« nhá» bÃ© nhÆ°ng quyá»n nÄƒng Ä‘á»ƒ lÃ m viá»‡c Ä‘Ã³:

```
vÃ 
```

Dá»… nhÆ° Äƒn káº¹o, Ä‘Ãºng khÃ´ng nÃ o? Giá» báº¡n Ä‘Ã£ biáº¿t cÃ¡ch ná»‘i má»i thá»© láº¡i vá»›i nhau rá»“i! `notifyAll()` Báº¡n biáº¿t khÃ´ng, `notify()` vÃ  `notifyAll()` lÃ  nhá»¯ng phÆ°Æ¡ng thá»©c Ä‘áº·c biá»‡t náº±m ngay trong lá»›p `Object`!
ChÃºng cÃ³ nhiá»‡m vá»¥ 'Ä‘Ã¡nh thá»©c' cÃ¡c 'thread' (luá»“ng xá»­ lÃ½) Ä‘ang 'ngá»§' vÃ  chá» Ä‘á»£i trÃªn 'monitor' cá»§a má»™t Ä‘á»‘i tÆ°á»£ng.
Cá»© hÃ¬nh dung 'monitor' nhÆ° má»™t 'phÃ²ng chá»' riÃªng, nÆ¡i cÃ¡c thread Ä‘ang kiÃªn nháº«n Ä‘á»£i tÃ­n hiá»‡u Ä‘á»ƒ lÃ m viá»‡c!

    | notify() | notifyAll() |
|---|---|
| HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ nhiá»u thread Ä‘ang "ngá»§ gáº­t" (Ä‘ang chá» Ä‘á»£i) má»™t Ä‘iá»u kiá»‡n nÃ o Ä‘Ã³. <br> `notify()` giá»‘ng nhÆ° báº¡n nháº¹ nhÃ ng vá»— vai **Má»˜T** trong sá»‘ Ä‘Ã³ vÃ  thÃ¬ tháº§m: "NÃ y, dáº­y Ä‘i báº¡n Æ¡i!". <br> Ai Ä‘Æ°á»£c Ä‘Ã¡nh thá»©c? JVM sáº½ tá»± chá»n ngáº«u nhiÃªn má»™t anh chÃ ng/cÃ´ nÃ ng Ä‘ang chá» Ä‘á»£i Ä‘á»ƒ "Ä‘Ã¡nh thá»©c". Chá»‰ **Má»˜T** thÃ´i nhÃ©! | CÃ²n `notifyAll()` thÃ¬ sao? NÃ³ giá»‘ng nhÆ° báº¡n báº­t Ä‘Ã¨n sÃ¡ng trÆ°ng vÃ  hÃ©t lá»›n: "Dáº­y háº¿t Ä‘i má»i ngÆ°á»i Æ¡i!". <br> ÄÃºng váº­y, nÃ³ Ä‘Ã¡nh thá»©c **Táº¤T Cáº¢** cÃ¡c thread Ä‘ang "ngá»§ gáº­t" (chá» Ä‘á»£i) trÃªn cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng. <br> Táº¥t cáº£ bá»n há» sáº½ tá»‰nh giáº¥c vÃ  tranh giÃ nh Ä‘á»ƒ Ä‘Æ°á»£c tiáº¿p tá»¥c cÃ´ng viá»‡c cá»§a mÃ¬nh. |
    |----------|-------------|
    | ÄÃ¡nh thá»©c CHá»ˆ Má»˜T thread Ä‘ang chá» | ÄÃ¡nh thá»©c Táº¤T Cáº¢ cÃ¡c thread Ä‘ang chá» |
    | Vá» viá»‡c thread nÃ o Ä‘Æ°á»£c Ä‘Ã¡nh thá»©c | Vá» viá»‡c cÃ¡c thread tranh giÃ nh khÃ³a |
|---|---|
| Báº¡n khÃ´ng thá»ƒ biáº¿t cháº¯c cháº¯n thread nÃ o sáº½ Ä‘Æ°á»£c "gá»i dáº­y" Ä‘Ã¢u nhÃ©! Java khÃ´ng cÃ³ "thiÃªn vá»‹" ai cáº£. NÃ³ cá»© chá»n ngáº«u nhiÃªn thÃ´i. | Táº¥t cáº£ cÃ¡c thread Ä‘á»u "tranh nhau" giÃ nh láº¥y cÃ¡i khÃ³a. Giá»‘ng nhÆ° má»™t cuá»™c Ä‘ua váº­y, ai nhanh tay hÆ¡n thÃ¬ cÃ³ Ä‘Æ°á»£c khÃ³a trÆ°á»›c! |
    | Nhanh hÆ¡n, hiá»‡u quáº£ hÆ¡n háº³n khi chá»‰ CÃ“ Má»˜T luá»“ng (thread) cáº§n tiáº¿n hÃ nh. | An toÃ n hÆ¡n háº³n khi cÃ³ NHIá»€U luá»“ng (thread) cÃ¹ng lÃºc muá»‘n dÃ¹ng chung tÃ i nguyÃªn. |
    | CÃ³ thá»ƒ lÃ m cho máº¥y 'em' thread cá»© pháº£i **chá» dÃ i cá»•**, chá» mÃ£i mÃ  cháº³ng Ä‘Æ°á»£c lÃ m viá»‡c gÃ¬ cáº£ (bá»‹ "Ä‘Ã³i" Ä‘Ã³!). ğŸ˜± | **YÃªn tÃ¢m Ä‘i!** Máº¥y 'em' thread sáº½ khÃ´ng bá»‹ "Ä‘Ã³i" Ä‘Ã¢u, ai cÅ©ng cÃ³ lÆ°á»£t háº¿t. NhÆ°ng mÃ ... há»‡ thá»‘ng sáº½ pháº£i **tá»‘n thÃªm má»™t chÃºt "cÃ´ng sá»©c"** Ä‘á»ƒ lo liá»‡u Ä‘Ã³ nha. ğŸ˜‰ |

    ```java
    public class NotifyVsNotifyAll {
        private static final Object lock = new Object();
        private static boolean resourceAvailable = false;
        
        public static void main(String[] args) throws InterruptedException {
            // Create multiple waiting threads
            for (int i = 1; i <= 3; i++) {
                final int threadNum = i;
                new Thread(() -> {
                    synchronized (lock) {
                        while (!resourceAvailable) {
                            System.out.println("Thread " + threadNum + " waiting...");
                            try {
                                lock.wait();
                            } catch (InterruptedException e) {
                                e.printStackTrace();
                            }
                        }
                        System.out.println("Thread " + threadNum + " got the resource!");
                    }
                }).start();
            }
            
            Thread.sleep(1000);  // Let all threads start waiting
            
            // Using notify() - wakes only ONE thread
            synchronized (lock) {
                System.out.println("\nCalling notify()...");
                resourceAvailable = true;
                lock.notify();  // Only one thread wakes up
            }
            
            Thread.sleep(1000);
            
            // Reset and demonstrate notifyAll()
            resourceAvailable = false;
            
            // Create more waiting threads
            for (int i = 4; i <= 6; i++) {
                final int threadNum = i;
                new Thread(() -> {
                    synchronized (lock) {
                        while (!resourceAvailable) {
                            System.out.println("Thread " + threadNum + " waiting...");
                            try {
                                lock.wait();
                            } catch (InterruptedException e) {
                                e.printStackTrace();
                            }
                        }
                        System.out.println("Thread " + threadNum + " got the resource!");
                    }
                }).start();
            }
            
            Thread.sleep(1000);
            
            // Using notifyAll() - wakes ALL threads
            synchronized (lock) {
                System.out.println("\nCalling notifyAll()...");
                resourceAvailable = true;
                lock.notifyAll();  // All threads wake up
            }
        }
    }
    ```

    **Váº­y, khi nÃ o thÃ¬ báº¡n *thá»±c sá»±* cáº§n Ä‘áº¿n nÃ³?**
    - CÃ¹ng dÃ¹ng nhÃ©! `notify()` CÃ³ nhá»¯ng lÃºc, chá»‰ Má»˜T anh chÃ ng thread duy nháº¥t Ä‘Æ°á»£c phÃ©p Ä‘i tiáº¿p thÃ´i.
(VÃ­ dá»¥ nhÃ©: khi cÃ³ má»™t "tÃ i nguyÃªn" (resource) mÃ  táº¡i cÃ¹ng má»™t thá»i Ä‘iá»ƒm, chá»‰ má»™t mÃ¬nh anh chÃ ng thread Ä‘Ã³ Ä‘Æ°á»£c dÃ¹ng.)
    - CÃ¹ng dÃ¹ng nhÃ©! `notifyAll()` Khi nÃ o thÃ¬ Ä‘iá»u nÃ y xáº£y ra?

Ã€, lÃ  khi **nhiá»u anh chÃ ng luá»“ng** *cÃ¹ng má»™t lÃºc* cÃ³ thá»ƒ **tiáº¿p tá»¥c cháº¡y** cÃ´ng viá»‡c cá»§a mÃ¬nh.
Hoáº·c lÃ  khi **cÃ¡i 'tÃ­n hiá»‡u' hay 'Ä‘iá»u kiá»‡n'** mÃ  há» Ä‘ang chá» nÃ³ cá»© **thay Ä‘á»•i liÃªn tá»¥c** áº¥y!

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

55. ### Lá»›p báº¥t biáº¿n (Immutable Class) lÃ  gÃ¬ vÃ  lÃ m tháº¿ nÃ o Ä‘á»ƒ táº¡o ra chÃºng?

    Váº­y thÃ¬, 'lá»›p báº¥t biáº¿n' (immutable class) lÃ  gÃ¬ nhá»‰?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y nhÃ©: báº¡n táº¡o ra má»™t thá»© gÃ¬ Ä‘Ã³, vÃ  *ngay khi* nÃ³ Ä‘Æ°á»£c táº¡o xong, báº¡n *khÃ´ng bao giá»* cÃ³ thá»ƒ thay Ä‘á»•i nÃ³ Ä‘Æ°á»£c ná»¯a.

ÄÃ³ chÃ­nh xÃ¡c lÃ  má»™t lá»›p báº¥t biáº¿n Ä‘áº¥y!

NÃ³ lÃ  má»™t loáº¡i lá»›p Ä‘áº·c biá»‡t, mÃ  khi báº¡n táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng (object) tá»« nÃ³, thÃ¬ 'tráº¡ng thÃ¡i' (hay ná»™i dung bÃªn trong) cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ sáº½ *cá»‘ Ä‘á»‹nh*. NÃ³ sáº½ giá»¯ nguyÃªn y chang nhÆ° váº­y, khÃ´ng thay Ä‘á»•i gÃ¬ cáº£, trong suá»‘t thá»i gian mÃ  Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ cÃ²n tá»“n táº¡i. KhÃ´ng cho phÃ©p chá»‰nh sá»­a gÃ¬ háº¿t!

    **Nhá»¯ng lá»£i Ã­ch tuyá»‡t vá»i cá»§a tÃ­nh báº¥t biáº¿n:**
    - NÃ y báº¡n! Báº¡n cÃ²n nhá»› máº¥y vá»¥ "Ä‘á»¥ng Ä‘á»™" giá»¯a cÃ¡c thread khi chÃºng cá»‘ gáº¯ng "cháº¡y Ä‘ua" Ä‘á»ƒ truy cáº­p má»™t thá»© chung khÃ´ng? ThÆ°á»ng thÃ¬ chÃºng ta dÃ¹ng `synchronized` Ä‘á»ƒ "khÃ³a" láº¡i, Ä‘áº£m báº£o chá»‰ má»™t thread Ä‘Æ°á»£c vÃ o má»™t lÃºc.

NhÆ°ng cÃ³ cÃ¡ch nÃ o lÃ m cho má»i thá»© an toÃ n (thread-safe) mÃ  KHÃ”NG Cáº¦N Ä‘áº¿n `synchronized` khÃ´ng? CÃ³ chá»©! VÃ  Ä‘Ã¢y lÃ  má»™t vÃ i "chiÃªu" cá»±c hay ho mÃ  báº¡n nÃªn biáº¿t Ä‘Ã³!

### Táº¡i sao láº¡i muá»‘n "khÃ´ng dÃ¹ng `synchronized`"?

`synchronized` ráº¥t há»¯u Ã­ch, nhÆ°ng Ä‘Ã´i khi nÃ³ cÃ³ thá»ƒ lÃ m cháº­m chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n vÃ¬ cÃ¡c thread pháº£i xáº¿p hÃ ng chá» Ä‘á»£i nhau. Náº¿u cÃ³ cÃ¡ch nÃ o Ä‘á»ƒ chÃºng lÃ m viá»‡c "hÃ²a thuáº­n" mÃ  khÃ´ng cáº§n pháº£i chá» Ä‘á»£i, thÃ¬ quÃ¡ tuyá»‡t vá»i Ä‘Ãºng khÃ´ng?

CÃ¹ng xem ba "siÃªu nÄƒng lá»±c" giÃºp báº¡n lÃ m Ä‘iá»u Ä‘Ã³ nhÃ©:

### 1. Báº¥t biáº¿n (Immutability)

Nghe hÆ¡i "há»c thuáº­t" má»™t chÃºt, nhÆ°ng Ã½ tÆ°á»Ÿng cá»±c ká»³ Ä‘Æ¡n giáº£n: **Má»™t khi Ä‘á»‘i tÆ°á»£ng Ä‘Ã£ Ä‘Æ°á»£c táº¡o ra, nÃ³ sáº½ khÃ´ng bao giá» thay Ä‘á»•i ná»¯a.**

TÆ°á»Ÿng tÆ°á»£ng tháº¿ nÃ y: báº¡n cÃ³ má»™t cuá»‘n sÃ¡ch Ä‘Ã£ Ä‘Æ°á»£c in xong. Má»i ngÆ°á»i cÃ³ thá»ƒ Ä‘á»c nÃ³ thoáº£i mÃ¡i, cÃ¹ng lÃºc bao nhiÃªu ngÆ°á»i cÅ©ng Ä‘Æ°á»£c, vÃ¬ khÃ´ng ai cÃ³ thá»ƒ thay Ä‘á»•i ná»™i dung cuá»‘n sÃ¡ch Ä‘Ã³. KhÃ´ng cÃ³ chuyá»‡n hai ngÆ°á»i cÃ¹ng lÃºc sá»­a má»™t trang sÃ¡ch gÃ¢y ra lá»™n xá»™n Ä‘Ãºng khÃ´ng?

*   **ÄÃ³ lÃ  gÃ¬:** Náº¿u má»™t Ä‘á»‘i tÆ°á»£ng khÃ´ng bao giá» thay Ä‘á»•i tráº¡ng thÃ¡i cá»§a nÃ³ sau khi Ä‘Æ°á»£c táº¡o, thÃ¬ báº¡n khÃ´ng cáº§n lo láº¯ng vá» viá»‡c nhiá»u thread cÃ¹ng lÃºc "chá»c ngoÃ¡y" vÃ o nÃ³ vÃ  lÃ m há»ng dá»¯ liá»‡u.
*   **VÃ­ dá»¥ trong Java:**
    *   `String`: Khi báº¡n táº¡o má»™t `String`, nÃ³ khÃ´ng thá»ƒ thay Ä‘á»•i Ä‘Æ°á»£c. Má»i phÃ©p toÃ¡n dÆ°á»ng nhÆ° "thay Ä‘á»•i" `String` thá»±c ra Ä‘á»u táº¡o ra má»™t `String` Má»šI.
    *   `Integer`, `Long`, `Boolean`, v.v.: CÃ¡c lá»›p "wrapper" cho kiá»ƒu dá»¯ liá»‡u nguyÃªn thá»§y cÅ©ng lÃ  báº¥t biáº¿n.

*   **LÃ m sao Ä‘á»ƒ táº¡o Ä‘á»‘i tÆ°á»£ng báº¥t biáº¿n cá»§a riÃªng báº¡n?**
    1.  ÄÃ¡nh dáº¥u lá»›p lÃ  `final` (Ä‘á»ƒ khÃ´ng ai cÃ³ thá»ƒ káº¿ thá»«a vÃ  thay Ä‘á»•i hÃ nh vi).
    2.  ÄÃ¡nh dáº¥u Táº¤T Cáº¢ cÃ¡c trÆ°á»ng (field) lÃ  `final` (Ä‘á»ƒ giÃ¡ trá»‹ cá»§a chÃºng khÃ´ng thá»ƒ thay Ä‘á»•i sau khi khá»Ÿi táº¡o).
    3.  KhÃ´ng cÃ³ phÆ°Æ¡ng thá»©c `setter` (vÃ¬ báº¡n khÃ´ng muá»‘n cho phÃ©p thay Ä‘á»•i tráº¡ng thÃ¡i).
    4.  Khá»Ÿi táº¡o táº¥t cáº£ cÃ¡c trÆ°á»ng trong hÃ m táº¡o (constructor).
    5.  Náº¿u Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n cÃ³ chá»©a cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ thay Ä‘á»•i (mutable objects), hÃ£y Ä‘áº£m báº£o tráº£ vá» báº£n sao (copy) cá»§a chÃºng thay vÃ¬ chÃ­nh Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ (Ä‘á»ƒ trÃ¡nh bá»‹ thay Ä‘á»•i tá»« bÃªn ngoÃ i).

```java
public final class ImmutablePoint {
    private final int x;
    private final int y;

    public ImmutablePoint(int x, int y) {
        this.x = x;
        this.y = y;
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }

    // KhÃ´ng cÃ³ setter! Má»™t khi Point Ä‘Æ°á»£c táº¡o, x vÃ  y khÃ´ng thay Ä‘á»•i.
}
```

Vá»›i `ImmutablePoint`, dÃ¹ bao nhiÃªu thread cÃ¹ng gá»i `getX()` hay `getY()`, chÃºng ta khÃ´ng bao giá» pháº£i lo láº¯ng vá» viá»‡c dá»¯ liá»‡u bá»‹ há»ng. Tuyá»‡t vá»i!

### 2. Biáº¿n cá»¥c bá»™ cho tá»«ng Thread (ThreadLocal)

Báº¡n muá»‘n má»—i thread cÃ³ má»™t "phiÃªn báº£n riÃªng" cá»§a má»™t biáº¿n nÃ o Ä‘Ã³? `ThreadLocal` chÃ­nh lÃ  "phÃ¹ thá»§y" giÃºp báº¡n lÃ m Ä‘iá»u Ä‘Ã³!

*   **ÄÃ³ lÃ  gÃ¬:** `ThreadLocal` cung cáº¥p má»™t cÃ¡ch Ä‘á»ƒ má»—i thread giá»¯ má»™t báº£n sao Ä‘á»™c láº­p cá»§a má»™t biáº¿n. Tá»©c lÃ , náº¿u Thread A vÃ  Thread B cÃ¹ng truy cáº­p má»™t `ThreadLocal` variable, chÃºng sáº½ khÃ´ng tháº¥y giÃ¡ trá»‹ cá»§a nhau mÃ  sáº½ tháº¥y... giÃ¡ trá»‹ cá»§a CHÃNH MÃŒNH!
*   **TÆ°á»Ÿng tÆ°á»£ng:** Má»—i ngÆ°á»i thá»£ cÃ³ má»™t há»™p dá»¥ng cá»¥ riÃªng. DÃ¹ há» lÃ m viá»‡c trong cÃ¹ng má»™t xÆ°á»Ÿng, nhÆ°ng há» khÃ´ng bao giá» pháº£i giÃ nh giáº­t cÃ¡i tua-vÃ­t vá»›i nhau vÃ¬ má»—i ngÆ°á»i Ä‘Ã£ cÃ³ má»™t cÃ¡i riÃªng rá»“i.
*   **Khi nÃ o dÃ¹ng:** Ráº¥t há»¯u Ã­ch khi báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng khÃ´ng pháº£i thread-safe (vÃ­ dá»¥: `SimpleDateFormat`, `Connection` trong má»™t sá»‘ trÆ°á»ng há»£p) nhÆ°ng báº¡n láº¡i muá»‘n sá»­ dá»¥ng nÃ³ trong mÃ´i trÆ°á»ng Ä‘a luá»“ng mÃ  khÃ´ng cáº§n `synchronized`.

```java
import java.text.SimpleDateFormat;
import java.util.Date;

public class DateFormatterExample {

    // Má»™t SimpleDateFormat KHÃ”NG pháº£i thread-safe! Ráº¥t nguy hiá»ƒm náº¿u dÃ¹ng chung.
    // private static final SimpleDateFormat commonFormatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

    // DÃ¹ng ThreadLocal Ä‘á»ƒ má»—i thread cÃ³ formatter RIÃŠNG cá»§a nÃ³.
    private static final ThreadLocal<SimpleDateFormat> formatterHolder =
            ThreadLocal.withInitial(() -> new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"));

    public String formatCurrentDate() {
        // Láº¥y formatter cá»§a RIÃŠNG thread nÃ y.
        SimpleDateFormat formatter = formatterHolder.get();
        return formatter.format(new Date());
    }

    public static void main(String[] args) throws InterruptedException {
        DateFormatterExample example = new DateFormatterExample();

        // Táº¡o vÃ i thread Ä‘á»ƒ xem chÃºng hoáº¡t Ä‘á»™ng tháº¿ nÃ o
        Runnable task = () -> {
            String formattedDate = example.formatCurrentDate();
            System.out.println(Thread.currentThread().getName() + ": " + formattedDate);
        };

        for (int i = 0; i < 5; i++) {
            new Thread(task, "Worker-" + i).start();
            Thread.sleep(100); // Äá»£i má»™t chÃºt cho dá»… nhÃ¬n
        }
    }
}
```

Tháº¥y khÃ´ng? Má»—i thread cÃ³ `SimpleDateFormat` cá»§a riÃªng mÃ¬nh, nÃªn khÃ´ng cÃ³ chuyá»‡n chÃºng "giáº«m chÃ¢n" lÃªn nhau ná»¯a!

### 3. Biáº¿n nguyÃªn tá»­ (Atomic Variables)

ÄÃ´i khi, báº¡n chá»‰ cáº§n thá»±c hiá»‡n má»™t phÃ©p toÃ¡n ráº¥t nhá», vÃ­ dá»¥ nhÆ° tÄƒng má»™t bá»™ Ä‘áº¿m lÃªn 1. Náº¿u dÃ¹ng `synchronized` cho má»—i láº§n tÄƒng thÃ¬ cÃ³ váº» hÆ¡i "quÃ¡ Ä‘Ã¡ng" vÃ  cháº­m cháº¡p.

*   **ÄÃ³ lÃ  gÃ¬:** CÃ¡c lá»›p trong gÃ³i `java.util.concurrent.atomic` (nhÆ° `AtomicInteger`, `AtomicLong`, `AtomicBoolean`, `AtomicReference`) cung cáº¥p cÃ¡c phÃ©p toÃ¡n **nguyÃªn tá»­** trÃªn má»™t biáº¿n duy nháº¥t.
*   **NguyÃªn tá»­ nghÄ©a lÃ  gÃ¬?** NghÄ©a lÃ  phÃ©p toÃ¡n Ä‘Ã³ hoáº·c lÃ  xáº£y ra hoÃ n chá»‰nh, hoáº·c lÃ  khÃ´ng xáº£y ra chÃºt nÃ o. KhÃ´ng bao giá» cÃ³ chuyá»‡n nÃ³ Ä‘ang "dá»Ÿ dang" giá»¯a chá»«ng mÃ  má»™t thread khÃ¡c chen vÃ o. Äiá»u nÃ y Ä‘Æ°á»£c thá»±c hiá»‡n á»Ÿ cáº¥p Ä‘á»™ pháº§n cá»©ng, siÃªu nhanh vÃ  hiá»‡u quáº£ hÆ¡n nhiá»u so vá»›i `synchronized` cho cÃ¡c tÃ¡c vá»¥ Ä‘Æ¡n giáº£n nÃ y.
*   **TÆ°á»Ÿng tÆ°á»£ng:** Báº¡n cÃ³ má»™t cÃ¡i mÃ¡y Ä‘áº¿m sá»‘ siÃªu thÃ´ng minh. DÃ¹ bao nhiÃªu ngÆ°á»i cÃ¹ng lÃºc báº¥m nÃºt tÄƒng sá»‘, cÃ¡i mÃ¡y váº«n Ä‘áº£m báº£o sá»‘ Ä‘Ã³ sáº½ tÄƒng lÃªn chÃ­nh xÃ¡c tá»«ng Ä‘Æ¡n vá»‹ mÃ  khÃ´ng bao giá» bá»‹ "nháº£y cÃ³c" hay bá»‹ máº¥t lÆ°á»£t.

```java
import java.util.concurrent.atomic.AtomicInteger;

public class AtomicCounterExample {
    // Thay vÃ¬ dÃ¹ng int counter; (khÃ´ng an toÃ n cho Ä‘a luá»“ng)
    // Hoáº·c dÃ¹ng synchronized cho má»—i láº§n tÄƒng (cháº­m)
    private final AtomicInteger counter = new AtomicInteger(0);

    public void increment() {
        // TÄƒng giÃ¡ trá»‹ lÃªn 1 má»™t cÃ¡ch nguyÃªn tá»­ vÃ  tráº£ vá» giÃ¡ trá»‹ Má»šI.
        // KhÃ´ng cáº§n synchronized!
        counter.incrementAndGet();
    }

    public int getCount() {
        return counter.get();
    }

    public static void main(String[] args) throws InterruptedException {
        AtomicCounterExample example = new AtomicCounterExample();
        Runnable task = () -> {
            for (int i = 0; i < 1000; i++) {
                example.increment();
            }
        };

        Thread t1 = new Thread(task);
        Thread t2 = new Thread(task);

        t1.start();
        t2.start();

        t1.join(); // Äá»£i t1 hoÃ n thÃ nh
        t2.join(); // Äá»£i t2 hoÃ n thÃ nh

        System.out.println("GiÃ¡ trá»‹ cuá»‘i cÃ¹ng cá»§a bá»™ Ä‘áº¿m: " + example.getCount());
        // Báº¡n sáº½ luÃ´n nháº­n Ä‘Æ°á»£c 2000! Náº¿u dÃ¹ng int bÃ¬nh thÆ°á»ng sáº½ ra sá»‘ linh tinh.
    }
}
```

Vá»›i `AtomicInteger`, báº¡n cÃ³ thá»ƒ thá»±c hiá»‡n cÃ¡c phÃ©p toÃ¡n nhÆ° tÄƒng, giáº£m, thÃªm, hay so sÃ¡nh vÃ  thay tháº¿ (compare-and-swap) má»™t cÃ¡ch an toÃ n mÃ  khÃ´ng cáº§n Ä‘áº¿n `synchronized` truyá»n thá»‘ng.

### Káº¿t luáº­n

Váº­y Ä‘Ã³! Báº¡n Ä‘Ã£ tháº¥y ráº±ng khÃ´ng pháº£i lÃºc nÃ o cÅ©ng cáº§n dÃ¹ng `synchronized` Ä‘á»ƒ lÃ m cho code cá»§a báº¡n an toÃ n trong mÃ´i trÆ°á»ng Ä‘a luá»“ng. Vá»›i nhá»¯ng "chiÃªu" nhÆ° **báº¥t biáº¿n**, **ThreadLocal**, vÃ  **biáº¿n nguyÃªn tá»­**, báº¡n cÃ³ thá»ƒ táº¡o ra cÃ¡c chÆ°Æ¡ng trÃ¬nh hiá»‡u quáº£ vÃ  máº¡nh máº½ hÆ¡n nhiá»u!

HÃ£y nhá»›, má»—i "chiÃªu" cÃ³ Æ°u vÃ  nhÆ°á»£c Ä‘iá»ƒm riÃªng, hÃ£y chá»n Ä‘Ãºng "chiÃªu" cho tá»«ng tÃ¬nh huá»‘ng nhÃ©!
    - Äáº·c Ä‘iá»ƒm siÃªu hay ho: báº¡n cÃ³ thá»ƒ *chia sáº»* nÃ³ má»™t cÃ¡ch an toÃ n!
NghÄ©a lÃ , nhiá»u nÆ¡i cÃ³ thá»ƒ dÃ¹ng chung mÃ  khÃ´ng sá»£ bá»‹ lá»—i hay há»ng hÃ³c gÃ¬ Ä‘Ã¢u.
VÃ  tuyá»‡t vá»i hÆ¡n ná»¯a, báº¡n cÃ²n cÃ³ thá»ƒ *lÆ°u vÃ o bá»™ nhá»› Ä‘á»‡m* (cache) ná»¯a.
Cá»© nhÆ° lÃ  táº¡o má»™t báº£n sao nhanh Ä‘á»ƒ dÃ¹ng láº¡i sau nÃ y áº¥y, tiá»‡n lá»£i cá»±c mÃ  váº«n an toÃ n tuyá»‡t Ä‘á»‘i!
    - Tuyá»‡t vá»i Ä‘á»ƒ dÃ¹ng lÃ m "khÃ³a bÄƒm" (hash keys) Ä‘Ã³!
VÃ¬ sao Æ°? ÄÆ¡n giáº£n lÃ  `hashCode` cá»§a nÃ³ sáº½ KHÃ”NG BAO GIá»œ thay Ä‘á»•i. Má»™t khi Ä‘Ã£ táº¡o ra, giÃ¡ trá»‹ `hashCode` cá»© tháº¿ mÃ  giá»¯ nguyÃªn thÃ´i.
    - **Dá»… hiá»ƒu, dá»… 'Ä‘á»c vá»‹' hÆ¡n nhiá»u!**

Khi má»™t thá»© 'dá»… suy luáº­n' (hay *easier to reason about*), cÃ³ nghÄ©a lÃ  báº¡n cÃ³ thá»ƒ nhÃ¬n vÃ o nÃ³ vÃ  **Ã€-HÃ!** báº¡n hiá»ƒu ngay *táº¡i sao* nÃ³ láº¡i hoáº¡t Ä‘á»™ng nhÆ° váº­y.

KhÃ´ng cáº§n pháº£i vÃ² Ä‘áº§u bá»©t tai nghÄ© 'á»¦a, cÃ¡i nÃ y lÃ m gÃ¬ tháº¿ nhá»‰?'.

Má»i thá»© trá»Ÿ nÃªn **rÃµ rÃ ng nhÆ° ban ngÃ y**, giÃºp báº¡n dá»… dÃ ng theo dÃµi vÃ  dá»± Ä‘oÃ¡n chuyá»‡n gÃ¬ sáº½ xáº£y ra tiáº¿p theo mÃ  khÃ´ng tá»‘n quÃ¡ nhiá»u 'cháº¥t xÃ¡m'!

    **Muá»‘n táº¡o má»™t `class` báº¥t biáº¿n (immutable) Æ°? Tuyá»‡t! NhÆ°ng nhá»› nhÃ©, cÃ³ vÃ i luáº­t chÆ¡i cáº§n tuÃ¢n theo Ä‘Ã³!**
    1. Äá»ƒ khai bÃ¡o má»™t lá»›p, báº¡n sáº½ lÃ m *nhÆ° tháº¿ nÃ y*: `final`
    2. ÄÆ°á»£c rá»“i, giá» thÃ¬, chÃºng ta hÃ£y táº¡o *táº¥t cáº£ cÃ¡c trÆ°á»ng* nhÃ©! `private` ChÃ o báº¡n! Sáºµn sÃ ng cho má»™t tá»« cá»±c ká»³ tiá»‡n lá»£i chÆ°a?

Khi báº¡n muá»‘n nÃ³i cÃ³ `thá»© nÃ y` **vÃ ** `thá»© kia`...

Kiá»ƒu nhÆ° "má»™t cá»‘c cÃ  phÃª" **vÃ ** "má»™t chiáº¿c bÃ¡nh quy" Ã½.

Trong tiáº¿ng Viá»‡t, chÃºng ta cÃ³ má»™t tá»« nhá» bÃ© nhÆ°ng quyá»n nÄƒng Ä‘á»ƒ lÃ m viá»‡c Ä‘Ã³:

```
vÃ 
```

Dá»… nhÆ° Äƒn káº¹o, Ä‘Ãºng khÃ´ng nÃ o? Giá» báº¡n Ä‘Ã£ biáº¿t cÃ¡ch ná»‘i má»i thá»© láº¡i vá»›i nhau rá»“i! `final`
    3. Äá»«ng táº¡o cÃ¡c phÆ°Æ¡ng thá»©c setter nhÃ©.
    4. NÃ y báº¡n! Báº¡n Ä‘Ã£ khai bÃ¡o cÃ¡c 'trÆ°á»ng' (field) trong lá»›p cá»§a mÃ¬nh rá»“i, Ä‘Ãºng khÃ´ng?

Giá» thÃ¬, Ä‘iá»u cá»±c ká»³ quan trá»ng lÃ  báº¡n pháº£i 'gÃ¡n giÃ¡ trá»‹ ban Ä‘áº§u' (khá»Ÿi táº¡o) cho Táº¤T Cáº¢ cÃ¡c trÆ°á»ng Ä‘Ã³.

VÃ  nÆ¡i tá»‘t nháº¥t Ä‘á»ƒ lÃ m Ä‘iá»u nÃ y lÃ  á»Ÿ Ä‘Ã¢u? ChÃ­nh lÃ  bÃªn trong 'hÃ m táº¡o' (constructor) cá»§a lá»›p báº¡n Ä‘Ã³!

Khi má»™t Ä‘á»‘i tÆ°á»£ng má»›i Ä‘Æ°á»£c táº¡o ra, 'hÃ m táº¡o' chÃ­nh lÃ  'ngÆ°á»i hÃ¹ng' Ä‘áº§u tiÃªn Ä‘Æ°á»£c gá»i.

NÃ³ giá»‘ng nhÆ° viá»‡c báº¡n vá»«a mua má»™t mÃ³n Ä‘á»“ chÆ¡i má»›i vÃ  'hÃ m táº¡o' sáº½ lÃ  'sÃ¡ch hÆ°á»›ng dáº«n' giÃºp báº¡n láº¯p rÃ¡p vÃ  thiáº¿t láº­p táº¥t cáº£ cÃ¡c bá»™ pháº­n (cÃ¡c trÆ°á»ng) ngay láº­p tá»©c.

Báº±ng cÃ¡ch nÃ y, báº¡n Ä‘áº£m báº£o ráº±ng má»i Ä‘á»‘i tÆ°á»£ng báº¡n táº¡o ra Ä‘á»u 'sáºµn sÃ ng hoáº¡t Ä‘á»™ng' vÃ  cÃ³ 'thÃ´ng tin Ä‘áº§y Ä‘á»§' tá»« giÃ¢y phÃºt Ä‘áº§u tiÃªn, khÃ´ng cÃ³ gÃ¬ bá»‹ bá» sÃ³t cáº£!

HÃ£y luÃ´n nhá»›: 'HÃ m táº¡o' lÃ  nÆ¡i 'lÃ½ tÆ°á»Ÿng' Ä‘á»ƒ 'thiáº¿t láº­p' má»i thá»© cho cÃ¡c trÆ°á»ng cá»§a báº¡n!
    5. Khi báº¡n lÃ m viá»‡c vá»›i cÃ¡c Ä‘á»‘i tÆ°á»£ng 'dá»… thay Ä‘á»•i' (hay cÃ²n gá»i lÃ  *mutable objects*) â€” tá»©c lÃ  nhá»¯ng Ä‘á»‘i tÆ°á»£ng mÃ  báº¡n cÃ³ thá»ƒ thay Ä‘á»•i ná»™i dung bÃªn trong cá»§a chÃºng sau khi Ä‘Ã£ táº¡o ra â€” báº¡n sáº½ thÆ°á»ng cáº§n Ä‘áº¿n má»™t ká»¹ thuáº­t Ä‘áº·c biá»‡t tÃªn lÃ  'sao chÃ©p sÃ¢u' (hay *deep copy*).

Táº¡i sao Æ°?
HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng chÃ­nh, vÃ  bÃªn trong nÃ³ láº¡i chá»©a má»™t Ä‘á»‘i tÆ°á»£ng 'dá»… thay Ä‘á»•i' khÃ¡c. Náº¿u báº¡n chá»‰ sao chÃ©p Ä‘á»‘i tÆ°á»£ng chÃ­nh theo kiá»ƒu thÃ´ng thÆ°á»ng (gá»i lÃ  *shallow copy* hay sao chÃ©p nÃ´ng), thÃ¬ báº£n sao vÃ  báº£n gá»‘c sáº½ cÃ¹ng... trá» Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng 'dá»… thay Ä‘á»•i' bÃªn trong kia!

Äiá»u nÃ y cÃ³ nghÄ©a lÃ , náº¿u báº¡n thay Ä‘á»•i ná»™i dung cá»§a Ä‘á»‘i tÆ°á»£ng 'dá»… thay Ä‘á»•i' Ä‘Ã³ thÃ´ng qua báº£n sao, thÃ¬ Ä‘á»‘i tÆ°á»£ng gá»‘c cÅ©ng bá»‹ áº£nh hÆ°á»Ÿng theo! Ã”i khÃ´ng, chÃºng ta khÃ´ng muá»‘n tháº¿!

ÄÃ¢y lÃ  lÃºc 'sao chÃ©p sÃ¢u' (deep copy) vÃ o cuá»™c!
Äá»ƒ 'thá»±c hiá»‡n sao chÃ©p sÃ¢u' cho cÃ¡c Ä‘á»‘i tÆ°á»£ng 'dá»… thay Ä‘á»•i', báº¡n sáº½ lÃ m tháº¿ nÃ y:
1.  Báº¡n khÃ´ng chá»‰ sao chÃ©p Ä‘á»‘i tÆ°á»£ng chÃ­nh.
2.  Báº¡n cÃ²n pháº£i Ä‘i sÃ¢u vÃ o bÃªn trong nÃ³, tÃ¬m nhá»¯ng Ä‘á»‘i tÆ°á»£ng con nÃ o lÃ  'dá»… thay Ä‘á»•i' (mutable).
3.  VÃ  táº¡o ra má»™t báº£n sao HOÃ€N TOÃ€N Má»šI cho Tá»ªNG Ä‘á»‘i tÆ°á»£ng con 'dá»… thay Ä‘á»•i' Ä‘Ã³.

NÃ³i cÃ¡ch khÃ¡c, báº¡n cáº§n Ä‘áº£m báº£o ráº±ng báº£n sao cá»§a báº¡n cÃ³ má»™t bá»™ 'ná»™i dung bÃªn trong' hoÃ n toÃ n Ä‘á»™c láº­p vá»›i báº£n gá»‘c, Ä‘áº·c biá»‡t lÃ  vá»›i nhá»¯ng pháº§n cÃ³ thá»ƒ thay Ä‘á»•i Ä‘Æ°á»£c. Báº±ng cÃ¡ch Ä‘Ã³, thay Ä‘á»•i á»Ÿ báº£n sao sáº½ khÃ´ng bao giá» lÃ m phiá»n báº£n gá»‘c. Tuyá»‡t vá»i!
    6. ## Tráº£ vá» báº£n sao cá»§a cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ thay Ä‘á»•i trong phÆ°Æ¡ng thá»©c getter

NÃ y báº¡n! HÃ£y cÃ¹ng nhau tÃ¬m hiá»ƒu má»™t máº¹o cá»±c ká»³ quan trá»ng Ä‘á»ƒ giá»¯ cho code cá»§a báº¡n an toÃ n vÃ  dá»… quáº£n lÃ½ nhÃ©.

Báº¡n cÃ³ biáº¿t, Ä‘Ã´i khi, cÃ¡c phÆ°Æ¡ng thá»©c `getter` cÃ³ thá»ƒ vÃ´ tÃ¬nh lÃ m lá»™ "bÃ­ máº­t" cá»§a Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n khÃ´ng? Nghe cÃ³ váº» láº¡ Ä‘Ãºng khÃ´ng? Äá»ƒ mÃ¬nh giáº£i thÃ­ch!

### Váº¥n Ä‘á» lÃ  gÃ¬?

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng (má»™t "chiáº¿c há»™p" bÃ­ máº­t) vÃ  nÃ³ Ä‘ang giá»¯ má»™t danh sÃ¡ch cÃ¡c thá»© (nhÆ° `ArrayList` hoáº·c `Date`). Báº¡n táº¡o ra má»™t phÆ°Æ¡ng thá»©c `getter` Ä‘á»ƒ ngÆ°á»i khÃ¡c cÃ³ thá»ƒ xem danh sÃ¡ch Ä‘Ã³.

NhÆ°ng náº¿u danh sÃ¡ch Ä‘Ã³ lÃ  má»™t Ä‘á»‘i tÆ°á»£ng "cÃ³ thá»ƒ thay Ä‘á»•i" (mutable object), tá»©c lÃ  nÃ³ cÃ³ thá»ƒ bá»‹ thay Ä‘á»•i sau khi Ä‘Æ°á»£c táº¡o ra, thÃ¬ cÃ³ má»™t ráº¯c rá»‘i lá»›n Ä‘áº¥y!

Náº¿u `getter` cá»§a báº¡n tráº£ vá» *chÃ­nh Ä‘á»‘i tÆ°á»£ng danh sÃ¡ch Ä‘Ã³*, thÃ¬ báº¥t ká»³ ai gá»i `getter` Ä‘á»u sáº½ nháº­n Ä‘Æ°á»£c *tham chiáº¿u trá»±c tiáº¿p* Ä‘áº¿n danh sÃ¡ch ná»™i bá»™ cá»§a báº¡n. VÃ  Ä‘oÃ¡n xem? Há» cÃ³ thá»ƒ thay Ä‘á»•i nÃ³!

**VÃ­ dá»¥ vá» cÃ¡ch lÃ m SAI (Äá»ªNG LÃ€M THáº¾ NÃ€Y!)**

```java
import java.util.ArrayList;
import java.util.List;

class DanhSachCuaToi {
    private List<String> cacMonHang; // ÄÃ¢y lÃ  danh sÃ¡ch bÃ­ máº­t cá»§a chÃºng ta

    public DanhSachCuaToi() {
        this.cacMonHang = new ArrayList<>();
        this.cacMonHang.add("Ão phÃ´ng");
        this.cacMonHang.add("Quáº§n jean");
    }

    // OÃ¡i! PhÆ°Æ¡ng thá»©c getter nÃ y tráº£ vá» CHÃNH danh sÃ¡ch ná»™i bá»™!
    public List<String> getCacMonHang() {
        return this.cacMonHang; // TRáº¢ Vá»€ THAM CHIáº¾U Gá»C!
    }

    public void inDanhSach() {
        System.out.println("Danh sÃ¡ch hiá»‡n táº¡i cá»§a tÃ´i: " + cacMonHang);
    }
}

public class LoiViTraVeGoc {
    public static void main(String[] args) {
        DanhSachCuaToi cuaToi = new DanhSachCuaToi();
        cuaToi.inDanhSach(); // In ra: Danh sÃ¡ch hiá»‡n táº¡i cá»§a tÃ´i: [Ão phÃ´ng, Quáº§n jean]

        // á»’ khÃ´ng! Ai Ä‘Ã³ láº¥y Ä‘Æ°á»£c danh sÃ¡ch vÃ  sá»­a nÃ³!
        List<String> danhSachBenNgoai = cuaToi.getCacMonHang();
        danhSachBenNgoai.add("Vá»›"); // ThÃªm má»™t mÃ³n hÃ ng má»›i vÃ o danh sÃ¡ch BÃŠN NGOÃ€I

        // NhÆ°ng danh sÃ¡ch Ná»˜I Bá»˜ cá»§a cuaToi cÅ©ng bá»‹ thay Ä‘á»•i!
        cuaToi.inDanhSach(); // In ra: Danh sÃ¡ch hiá»‡n táº¡i cá»§a tÃ´i: [Ão phÃ´ng, Quáº§n jean, Vá»›]
                            // Ã”i khÃ´ng! cuaToi khÃ´ng há» biáº¿t mÃ¬nh bá»‹ sá»­a!
    }
}
```

Báº¡n tháº¥y khÃ´ng? Äá»‘i tÆ°á»£ng `DanhSachCuaToi` cá»§a chÃºng ta Ä‘Ã£ bá»‹ thay Ä‘á»•i tá»« bÃªn ngoÃ i mÃ  khÃ´ng há» hay biáº¿t! Äiá»u nÃ y lÃ m há»ng tÃ­nh Ä‘Ã³ng gÃ³i (encapsulation) vÃ  khiáº¿n code cá»§a báº¡n khÃ³ kiá»ƒm soÃ¡t láº¯m.

### Váº­y lÃ m tháº¿ nÃ o Ä‘á»ƒ lÃ m ÄÃšNG?

Ráº¥t Ä‘Æ¡n giáº£n! Thay vÃ¬ tráº£ vá» *chÃ­nh Ä‘á»‘i tÆ°á»£ng gá»‘c*, hÃ£y tráº£ vá» má»™t *báº£n sao* cá»§a nÃ³!

Khi báº¡n tráº£ vá» má»™t báº£n sao, ngÆ°á»i gá»i `getter` sáº½ nháº­n Ä‘Æ°á»£c má»™t Ä‘á»‘i tÆ°á»£ng má»›i hoÃ n toÃ n. Há» cÃ³ thá»ƒ lÃ m gÃ¬ vá»›i báº£n sao Ä‘Ã³ tÃ¹y Ã½, nhÆ°ng Ä‘á»‘i tÆ°á»£ng gá»‘c cá»§a báº¡n váº«n an toÃ n, khÃ´ng bá»‹ Ä‘á»™ng cháº¡m Ä‘áº¿n.

**CÃ¡ch táº¡o báº£n sao cho cÃ¡c Ä‘á»‘i tÆ°á»£ng phá»• biáº¿n:**

*   **`List` (vÃ­ dá»¥ `ArrayList`):**
    ```java
    public List<String> getCacMonHang() {
        return new ArrayList<>(this.cacMonHang); // Tráº£ vá» má»™t báº£n sao má»›i!
    }
    ```
    Báº¡n táº¡o má»™t `ArrayList` má»›i vÃ  truyá»n danh sÃ¡ch gá»‘c vÃ o constructor cá»§a nÃ³. Tháº¿ lÃ  cÃ³ má»™t báº£n sao Ä‘á»™c láº­p!

*   **`Date`:**
    ```java
    import java.util.Date;

    class LichHen {
        private Date thoiGianHen;

        public LichHen(Date thoiGian) {
            // CÅ©ng nÃªn táº¡o báº£n sao khi nháº­n vÃ o Ä‘á»ƒ trÃ¡nh bá»‹ sá»­a tá»« lÃºc khá»Ÿi táº¡o
            this.thoiGianHen = new Date(thoiGian.getTime());
        }

        public Date getThoiGianHen() {
            return new Date(this.thoiGianHen.getTime()); // Tráº£ vá» báº£n sao cá»§a Date!
        }
    }
    ```
    Vá»›i `Date`, báº¡n táº¡o má»™t `Date` má»›i báº±ng cÃ¡ch truyá»n thá»i gian (dáº¡ng `long`) cá»§a `Date` gá»‘c vÃ o constructor.

### VÃ­ dá»¥ vá» cÃ¡ch lÃ m ÄÃšNG (YAY!)

HÃ£y sá»­a láº¡i vÃ­ dá»¥ `DanhSachCuaToi` cá»§a chÃºng ta nhÃ©:

```java
import java.util.ArrayList;
import java.util.List;

class DanhSachCuaToiAnToan {
    private List<String> cacMonHang; // ÄÃ¢y lÃ  danh sÃ¡ch bÃ­ máº­t cá»§a chÃºng ta

    public DanhSachCuaToiAnToan() {
        this.cacMonHang = new ArrayList<>();
        this.cacMonHang.add("Ão phÃ´ng");
        this.cacMonHang.add("Quáº§n jean");
    }

    // Tuyá»‡t vá»i! PhÆ°Æ¡ng thá»©c getter nÃ y tráº£ vá» Báº¢N SAO!
    public List<String> getCacMonHang() {
        return new ArrayList<>(this.cacMonHang); // Tráº£ vá» má»™t báº£n sao má»›i!
    }

    public void inDanhSach() {
        System.out.println("Danh sÃ¡ch hiá»‡n táº¡i cá»§a tÃ´i: " + cacMonHang);
    }
}

public class LamDungVoiBanSao {
    public static void main(String[] args) {
        DanhSachCuaToiAnToan cuaToiAnToan = new DanhSachCuaToiAnToan();
        cuaToiAnToan.inDanhSach(); // In ra: Danh sÃ¡ch hiá»‡n táº¡i cá»§a tÃ´i: [Ão phÃ´ng, Quáº§n jean]

        // Ai Ä‘Ã³ láº¥y Ä‘Æ°á»£c báº£n sao cá»§a danh sÃ¡ch vÃ  sá»­a nÃ³!
        List<String> danhSachBenNgoai = cuaToiAnToan.getCacMonHang();
        danhSachBenNgoai.add("Vá»›"); // ThÃªm má»™t mÃ³n hÃ ng má»›i vÃ o danh sÃ¡ch BÃŠN NGOÃ€I

        // Giá» thÃ¬ sao? Danh sÃ¡ch Ná»˜I Bá»˜ cá»§a cuaToiAnToan váº«n AN TOÃ€N!
        cuaToiAnToan.inDanhSach(); // In ra: Danh sÃ¡ch hiá»‡n táº¡i cá»§a tÃ´i: [Ão phÃ´ng, Quáº§n jean]
                                  // Hoan hÃ´! NÃ³ khÃ´ng há» bá»‹ thay Ä‘á»•i!
    }
}
```

Tháº¥y sá»± khÃ¡c biá»‡t chÆ°a? BÃ¢y giá», dÃ¹ `danhSachBenNgoai` cÃ³ bá»‹ sá»­a tháº¿ nÃ o Ä‘i ná»¯a, `cacMonHang` bÃªn trong Ä‘á»‘i tÆ°á»£ng `cuaToiAnToan` váº«n khÃ´ng há» háº¥n gÃ¬. NÃ³ váº«n giá»¯ Ä‘Æ°á»£c tráº¡ng thÃ¡i ban Ä‘áº§u cá»§a mÃ¬nh.

### TÃ³m láº¡i:

*   **LuÃ´n cáº©n tháº­n** khi tráº£ vá» cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ thay Ä‘á»•i (`mutable objects`) tá»« `getter`.
*   **Náº¿u Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ cÃ³ thá»ƒ thay Ä‘á»•i**, hÃ£y tráº£ vá» má»™t **báº£n sao má»›i** cá»§a nÃ³ thay vÃ¬ tráº£ vá» tham chiáº¿u gá»‘c.
*   Äiá»u nÃ y giÃºp báº£o vá»‡ tÃ­nh Ä‘Ã³ng gÃ³i (encapsulation) cá»§a Ä‘á»‘i tÆ°á»£ng vÃ  giá»¯ cho dá»¯ liá»‡u ná»™i bá»™ cá»§a báº¡n an toÃ n khá»i nhá»¯ng thay Ä‘á»•i khÃ´ng mong muá»‘n tá»« bÃªn ngoÃ i.

HÃ£y nhá»› quy táº¯c nÃ y Ä‘á»ƒ viáº¿t code máº¡nh máº½ vÃ  Ã­t lá»—i hÆ¡n nhÃ©!

    ```java
    import java.util.ArrayList;
    import java.util.Collections;
    import java.util.List;

    // Immutable class example
    public final class ImmutablePerson {
        private final String name;
        private final int age;
        private final List<String> hobbies;
        
        public ImmutablePerson(String name, int age, List<String> hobbies) {
            this.name = name;
            this.age = age;
            // Deep copy of mutable object
            this.hobbies = new ArrayList<>(hobbies);
        }
        
        public String getName() {
            return name;
        }
        
        public int getAge() {
            return age;
        }
        
        // Return unmodifiable copy to prevent modification
        public List<String> getHobbies() {
            return Collections.unmodifiableList(hobbies);
        }
        
        // Method that appears to modify but returns new instance
        public ImmutablePerson withAge(int newAge) {
            return new ImmutablePerson(this.name, newAge, this.hobbies);
        }
        
        @Override
        public String toString() {
            return "ImmutablePerson{name='" + name + "', age=" + age + 
                   ", hobbies=" + hobbies + "}";
        }
    }

    // Usage
    class ImmutableDemo {
        public static void main(String[] args) {
            List<String> hobbies = new ArrayList<>();
            hobbies.add("Reading");
            hobbies.add("Gaming");
            
            ImmutablePerson person = new ImmutablePerson("John", 25, hobbies);
            System.out.println("Original: " + person);
            
            // Original list modification doesn't affect the object
            hobbies.add("Cooking");
            System.out.println("After modifying original list: " + person);
            
            // Cannot modify returned list
            // person.getHobbies().add("Swimming"); // Throws UnsupportedOperationException
            
            // Create new instance with different age
            ImmutablePerson olderPerson = person.withAge(30);
            System.out.println("New person: " + olderPerson);
            System.out.println("Original unchanged: " + person);
        }
    }
    ```

    ### KhÃ¡m phÃ¡ Java Record (Báº¡n cáº§n Java 14 trá»Ÿ lÃªn Ä‘á»ƒ dÃ¹ng nhÃ©!)
    ```java
    // Records are immutable by default
    public record Person(String name, int age) {
        // Automatically generates constructor, getters, equals, hashCode, toString
    }
    ```

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

56. ### String, StringBuilder vÃ  StringBuffer khÃ¡c nhau chá»— nÃ o nhá»‰?

    NÃ y báº¡n, trong Java, cÃ³ ba anh chÃ ng chuyÃªn xá»­ lÃ½ chuá»—i Ä‘áº¥y! Nghe thÃ¬ giá»‘ng nhau, nhÆ°ng má»—i anh láº¡i cÃ³ má»™t tÃ­nh cÃ¡ch riÃªng, xá»‹n sÃ² láº¯m nha:

    | TÃ­nh nÄƒng | String | StringBuilder | StringBuffer |
|---|---|---|---|
| **Kháº£ nÄƒng thay Ä‘á»•i** | Khi báº¡n táº¡o má»™t `String`, nÃ³ lÃ  "báº¥t biáº¿n" (immutable). Tá»©c lÃ , báº¡n khÃ´ng thá»ƒ thay Ä‘á»•i ná»™i dung cá»§a nÃ³. Náº¿u báº¡n "sá»­a" má»™t `String`, thá»±c ra lÃ  báº¡n Ä‘ang táº¡o má»™t `String` hoÃ n toÃ n Má»šI Ä‘áº¥y! | CÃ¡i nÃ y thÃ¬ "cÃ³ thá»ƒ thay Ä‘á»•i" (mutable) nhÃ©! Báº¡n cá»© thoáº£i mÃ¡i thÃªm, sá»­a, xÃ³a kÃ½ tá»± trong cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng `StringBuilder` mÃ  khÃ´ng cáº§n táº¡o cÃ¡i má»›i. | CÅ©ng giá»‘ng há»‡t `StringBuilder` á»Ÿ khoáº£n cÃ³ thá»ƒ thay Ä‘á»•i Ä‘Æ°á»£c. Báº¡n cÅ©ng cÃ³ thá»ƒ thÃªm, sá»­a, xÃ³a trÃªn cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng `StringBuffer` mÃ  khÃ´ng cáº§n táº¡o cÃ¡i má»›i. |
| **An toÃ n Ä‘a luá»“ng** | VÃ¬ nÃ³ khÃ´ng thay Ä‘á»•i Ä‘Æ°á»£c, nÃªn báº¡n dÃ¹ng nÃ³ vá»›i bao nhiÃªu luá»“ng (thread) cÅ©ng an toÃ n háº¿t. Cháº³ng sá»£ ai lÃ m há»ng dá»¯ liá»‡u cá»§a báº¡n. | Cáº©n tháº­n nhÃ©! `StringBuilder` KHÃ”NG an toÃ n Ä‘a luá»“ng. Náº¿u nhiá»u luá»“ng cÃ¹ng lÃºc cá»‘ gáº¯ng sá»­a nÃ³, má»i thá»© cÃ³ thá»ƒ rá»‘i tung lÃªn vÃ  báº¡n sáº½ gáº·p lá»—i Ä‘áº¥y. | YÃªn tÃ¢m! `StringBuffer` Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ AN TOÃ€N Ä‘a luá»“ng. NÃ³ cÃ³ cÃ¡c "khÃ³a" (lock) Ä‘á»ƒ Ä‘áº£m báº£o chá»‰ má»™t luá»“ng Ä‘Æ°á»£c sá»­a nÃ³ táº¡i má»™t thá»i Ä‘iá»ƒm. HÆ¡i cháº­m hÆ¡n má»™t chÃºt nhÆ°ng an toÃ n. |
| **Hiá»‡u suáº¥t** | Má»—i khi báº¡n "thay Ä‘á»•i" má»™t `String`, mÃ¡y tÃ­nh láº¡i pháº£i táº¡o ra má»™t `String` má»›i. Viá»‡c nÃ y tá»‘n bá»™ nhá»› vÃ  cháº­m cháº¡p náº¿u báº¡n cá»© Ä‘á»•i liÃªn tá»¥c. | Nhanh láº¯m! VÃ¬ nÃ³ cho phÃ©p báº¡n sá»­a trá»±c tiáº¿p trÃªn cÃ¹ng má»™t Ä‘á»‘i tÆ°á»£ng, nÃªn viá»‡c thÃªm, sá»­a, xÃ³a ráº¥t hiá»‡u quáº£ vÃ  nhanh hÆ¡n háº³n khi báº¡n cáº§n lÃ m nhiá»u thao tÃ¡c vá»›i chuá»—i. | CÅ©ng nhanh khi báº¡n cáº§n sá»­a chuá»—i nhiá»u láº§n, nhÆ°ng vÃ¬ nÃ³ pháº£i lo chuyá»‡n an toÃ n Ä‘a luá»“ng (khÃ³a nÃ y khÃ³a kia), nÃªn nÃ³ sáº½ CHáº¬M hÆ¡n `StringBuilder` má»™t chÃºt xÃ­u so vá»›i `StringBuilder`. |
| **Khi nÃ o dÃ¹ng?** | DÃ¹ng khi báº¡n cÃ³ má»™t chuá»—i mÃ  báº¡n biáº¿t lÃ  sáº½ KHÃ”NG thay Ä‘á»•i. Hoáº·c khi báº¡n chá»‰ cáº§n chuá»—i Ä‘Ã³ má»™t láº§n thÃ´i, hoáº·c khi báº¡n khÃ´ng cáº§n nhiá»u thao tÃ¡c chá»‰nh sá»­a. | Tuyá»‡t vá»i khi báº¡n cáº§n xÃ¢y dá»±ng má»™t chuá»—i DÃ€I vÃ  PHáº¢I thay Ä‘á»•i nÃ³ nhiá»u láº§n, nhÆ°ng chá»‰ trong Má»˜T luá»“ng (vÃ­ dá»¥, trong má»™t hÃ m, má»™t phÆ°Æ¡ng thá»©c duy nháº¥t). | Chá»n `StringBuffer` khi báº¡n cáº§n xÃ¢y dá»±ng má»™t chuá»—i DÃ€I vÃ  PHáº¢I thay Ä‘á»•i nÃ³ nhiá»u láº§n, nhÆ°ng cÃ³ NHIá»€U luá»“ng cÃ³ thá»ƒ truy cáº­p vÃ  sá»­a nÃ³ cÃ¹ng lÃºc. An toÃ n lÃ  trÃªn háº¿t! |
    |---------|--------|---------------|--------------|
    | Kháº£ nÄƒng biáº¿n Ä‘á»•i | Báº¥t biáº¿n (KhÃ´ng Ä‘á»•i Ä‘Æ°á»£c Ä‘Ã¢u!) | Biáº¿n Ä‘á»•i (Thay Ä‘á»•i Ä‘Æ°á»£c Ä‘áº¥y!) | Biáº¿n Ä‘á»•i (Thay Ä‘á»•i Ä‘Æ°á»£c Ä‘áº¥y!) |
    | ChÃºng ta Ä‘ang nÃ³i vá» gÃ¬? | An toÃ n luá»“ng (khÃ´ng bao giá» thay Ä‘á»•i!) | Ã”i khÃ´ng! KhÃ´ng an toÃ n luá»“ng! | An toÃ n luá»“ng (Ä‘Ã£ Ä‘Æ°á»£c khÃ³a cáº©n tháº­n!) |
    | Tá»‘c Ä‘á»™ hoáº¡t Ä‘á»™ng | Ná»‘i chuá»—i (kiá»ƒu `String + String`) thÃ¬ hÆ¡i cháº­m Ä‘Ã³ nha. | SiÃªu tá»‘c Ä‘á»™! Nhanh nháº¥t trong táº¥t cáº£ cÃ¡c cÃ¡ch nÃ y Ä‘Ã³. | NÃ³ váº«n nhanh, nhÆ°ng mÃ  khÃ´ng thá»ƒ 'Ä‘ua' láº¡i StringBuilder Ä‘Æ°á»£c Ä‘Ã¢u. |
    | NÆ¡i lÆ°u trá»¯ | Há»“ bÆ¡i String | VÃ¹ng nhá»› Heap | VÃ¹ng nhá»› Heap |
    | Tá»« phiÃªn báº£n | Java 1.0 | Java 1.5 | Java 1.0 |

    ```java
    public class StringComparison {
        public static void main(String[] args) {
            // String - immutable
            String str = "Hello";
            str = str + " World";  // Creates new String object
            System.out.println("String: " + str);
            
            // StringBuilder - mutable, not thread-safe
            StringBuilder sb = new StringBuilder("Hello");
            sb.append(" World");  // Modifies same object
            System.out.println("StringBuilder: " + sb);
            
            // StringBuffer - mutable, thread-safe
            StringBuffer sbuf = new StringBuffer("Hello");
            sbuf.append(" World");  // Modifies same object
            System.out.println("StringBuffer: " + sbuf);
            
            // Performance comparison
            long startTime, endTime;
            
            // String concatenation (slow)
            startTime = System.currentTimeMillis();
            String s = "";
            for (int i = 0; i < 100000; i++) {
                s += "a";
            }
            endTime = System.currentTimeMillis();
            System.out.println("String time: " + (endTime - startTime) + "ms");
            
            // StringBuilder (fast)
            startTime = System.currentTimeMillis();
            StringBuilder sb2 = new StringBuilder();
            for (int i = 0; i < 100000; i++) {
                sb2.append("a");
            }
            endTime = System.currentTimeMillis();
            System.out.println("StringBuilder time: " + (endTime - startTime) + "ms");
            
            // StringBuffer (moderate)
            startTime = System.currentTimeMillis();
            StringBuffer sbuf2 = new StringBuffer();
            for (int i = 0; i < 100000; i++) {
                sbuf2.append("a");
            }
            endTime = System.currentTimeMillis();
            System.out.println("StringBuffer time: " + (endTime - startTime) + "ms");
        }
    }
    ```

    **Nhá»¯ng PhÆ°Æ¡ng Thá»©c Phá»• Biáº¿n (cá»§a `StringBuilder` vÃ  `StringBuffer`):**
    ```java
    StringBuilder sb = new StringBuilder("Hello");
    sb.append(" World");           // Append
    sb.insert(5, ",");             // Insert at position
    sb.delete(5, 6);               // Delete range
    sb.reverse();                  // Reverse
    sb.replace(0, 5, "Hi");        // Replace range
    String result = sb.toString(); // Convert to String
    ```

    **Khi nÃ o thÃ¬ dÃ¹ng?**
    - **String:** Khi chuá»—i cá»§a báº¡n Ã­t khi "biáº¿n hÃ¬nh" láº¯m
    - **StringBuilder:**
Báº¡n Ä‘Ã£ biáº¿t ráº±ng `String` trong Java lÃ  "báº¥t biáº¿n" (immutable) pháº£i khÃ´ng? NghÄ©a lÃ , má»—i khi báº¡n "thay Ä‘á»•i" má»™t `String`, thá»±c ra Java láº¡i táº¡o ra má»™t `String` HOÃ€N TOÃ€N Má»šI toanh Ä‘áº¥y!

Váº­y náº¿u báº¡n cÃ³ má»™t chuá»—i mÃ  nÃ³ cá»© pháº£i thay Ä‘á»•i liÃªn tá»¥c thÃ¬ sao? Kiá»ƒu nhÆ° báº¡n Ä‘ang ná»‘i ráº¥t nhiá»u máº£nh ghÃ©p nhá» láº¡i Ä‘á»ƒ táº¡o thÃ nh má»™t cÃ¢u dÃ i áº¥y. Náº¿u cá»© táº¡o chuá»—i má»›i mÃ£i, sáº½ tá»‘n bá»™ nhá»› vÃ  lÃ m cháº­m chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n.

ÄÃ¢y chÃ­nh lÃ  lÃºc `StringBuilder` xuáº¥t hiá»‡n Ä‘á»ƒ "giáº£i cá»©u"!
`StringBuilder` giá»‘ng nhÆ° má»™t cÃ¡i "há»™p" Ä‘áº·c biá»‡t mÃ  báº¡n cÃ³ thá»ƒ thoáº£i mÃ¡i thÃªm, bá»›t, sá»­a Ä‘á»•i ná»™i dung bÃªn trong mÃ  KHÃ”NG cáº§n pháº£i vá»©t cÃ¡i há»™p cÅ© Ä‘i vÃ  táº¡o cÃ¡i má»›i liÃªn tá»¥c.

NÃ³ cá»±c ká»³ hiá»‡u quáº£ khi báº¡n cáº§n "biáº¿n Ä‘á»•i" chuá»—i ráº¥t nhiá»u láº§n.

NhÆ°ng nhá»› nhÃ©, `StringBuilder` Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ dÃ¹ng khi chá»‰ cÃ³ Má»˜T luá»“ng (single-threaded) lÃ m viá»‡c vá»›i nÃ³ thÃ´i. Tá»©c lÃ , chá»‰ cÃ³ má»™t "ngÆ°á»i" Ä‘ang "chá»‰nh sá»­a" cÃ¡i chuá»—i Ä‘Ã³ táº¡i má»™t thá»i Ä‘iá»ƒm. Náº¿u cÃ³ nhiá»u luá»“ng cÃ¹ng lÃºc nháº£y vÃ o sá»­a, má»i thá»© cÃ³ thá»ƒ bá»‹ lá»—i Ä‘áº¥y!
    - **StringBuffer:**
Váº­y khi nÃ o thÃ¬ chÃºng ta gá»i `StringBuffer` vÃ o cuá»™c?
ÄÆ¡n giáº£n thÃ´i: Khi báº¡n cÃ³ má»™t chuá»—i (string) mÃ  nÃ³ cá»© 'biáº¿n hÃ¬nh' liÃªn tá»¥c!
NghÄ©a lÃ , báº¡n sáº½ pháº£i thÃªm, bá»›t, hoáº·c thay Ä‘á»•i ná»™i dung cá»§a chuá»—i Ä‘Ã³ ráº¥t nhiá»u láº§n.
VÃ  Ä‘Ã¢y má»›i lÃ  Ä‘iá»ƒm máº¥u chá»‘t: Náº¿u cÃ³ nhiá»u 'ngÆ°á»i' (hay cÃ²n gá»i lÃ  'luá»“ng' - *multi-threaded*) cÃ¹ng lÃºc 'nháº£y vÃ o' vÃ  muá»‘n sá»­a Ä‘á»•i chuá»—i Ä‘Ã³...
...thÃ¬ `StringBuffer` chÃ­nh lÃ  lá»±a chá»n an toÃ n vÃ  hiá»‡u quáº£ nháº¥t!
NÃ³ Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ xá»­ lÃ½ viá»‡c chuá»—i thay Ä‘á»•i thÆ°á»ng xuyÃªn má»™t cÃ¡ch mÆ°á»£t mÃ , Ä‘áº·c biá»‡t lÃ  trong mÃ´i trÆ°á»ng Ä‘a luá»“ng.

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

57. ### Váº­y thÃ¬, biáº¿n `static` vÃ  biáº¿n `instance`... chÃºng khÃ¡c nhau chá»— nÃ o nhá»‰?

    Okay, nhá»› ká»¹ Ä‘iá»u nÃ y nhÃ©!

*   **Biáº¿n `static`** thÃ¬ thuá»™c vá» **Lá»šP** (hay `class`) cá»§a chÃºng ta. Cá»© nhÆ° lÃ  má»™t thá»© gÃ¬ Ä‘Ã³ mÃ  Cáº¢ Lá»šP cÃ¹ng dÃ¹ng chung váº­y.
*   CÃ²n **biáº¿n `instance`** thÃ¬ sao? NÃ³ thuá»™c vá» **Tá»ªNG Ä‘á»‘i tÆ°á»£ng RIÃŠNG Láºº**. Má»—i Ä‘á»‘i tÆ°á»£ng cÃ³ "Ä‘á»“" riÃªng cá»§a mÃ¬nh, khÃ´ng ai dÃ¹ng chung vá»›i ai Ä‘Ã¢u nhÃ©!

    | Biáº¿n tÄ©nh (Static Variable) | Biáº¿n thá»ƒ hiá»‡n (Instance Variable) |
|---|---|
| **NÃ³ lÃ  gÃ¬?** | **NÃ³ lÃ  gÃ¬?** |
| HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t cÃ¡i báº£ng tráº¯ng lá»›n, dÃ¹ng chung cho cáº£ lá»›p há»c. Má»i ngÆ°á»i Ä‘á»u nhÃ¬n tháº¥y vÃ  viáº¿t lÃªn cÃ¹ng má»™t cÃ¡i báº£ng Ä‘Ã³. | BÃ¢y giá», hÃ£y nghÄ© Ä‘áº¿n cuá»‘n sá»• tay riÃªng cá»§a má»—i há»c sinh. Má»—i ngÆ°á»i cÃ³ má»™t cuá»‘n, thÃ´ng tin trong cuá»‘n sá»• cá»§a báº¡n khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n cuá»‘n cá»§a ngÆ°á»i khÃ¡c. |
| Biáº¿n tÄ©nh thuá»™c vá» **lá»›p (class)**, chá»© khÃ´ng pháº£i cá»§a má»™t Ä‘á»‘i tÆ°á»£ng (object) cá»¥ thá»ƒ nÃ o cáº£. | Biáº¿n thá»ƒ hiá»‡n thuá»™c vá» **tá»«ng Ä‘á»‘i tÆ°á»£ng (object)** riÃªng láº». |
| | |
| **NÃ³ hoáº¡t Ä‘á»™ng tháº¿ nÃ o?** | **NÃ³ hoáº¡t Ä‘á»™ng tháº¿ nÃ o?** |
| Chá»‰ cÃ³ **DUY NHáº¤T Má»˜T Báº¢N SAO** cá»§a biáº¿n nÃ y tá»“n táº¡i trong bá»™ nhá»›. | Má»—i khi báº¡n táº¡o má»™t Ä‘á»‘i tÆ°á»£ng má»›i, nÃ³ sáº½ cÃ³ **Má»˜T Báº¢N SAO RIÃŠNG** cá»§a biáº¿n nÃ y. |
| Náº¿u báº¥t ká»³ Ä‘á»‘i tÆ°á»£ng nÃ o thay Ä‘á»•i giÃ¡ trá»‹ cá»§a biáº¿n tÄ©nh, thÃ¬ táº¥t cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c cÅ©ng sáº½ tháº¥y giÃ¡ trá»‹ má»›i Ä‘Ã³. (Giá»‘ng nhÆ° khi báº¡n xÃ³a hoáº·c viáº¿t lÃªn báº£ng tráº¯ng, ai cÅ©ng tháº¥y). | Náº¿u báº¡n thay Ä‘á»•i giÃ¡ trá»‹ cá»§a biáº¿n thá»ƒ hiá»‡n trong má»™t Ä‘á»‘i tÆ°á»£ng, thÃ¬ Ä‘iá»u Ä‘Ã³ **KHÃ”NG áº¢NH HÆ¯á»NG** Ä‘áº¿n giÃ¡ trá»‹ cá»§a biáº¿n Ä‘Ã³ trong cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c. (Cuá»‘n sá»• cá»§a báº¡n thay Ä‘á»•i, sá»• cá»§a tÃ´i thÃ¬ khÃ´ng). |
| | |
| **Khi nÃ o thÃ¬ dÃ¹ng?** | **Khi nÃ o thÃ¬ dÃ¹ng?** |
| DÃ¹ng cho nhá»¯ng thá»© mÃ  **táº¥t cáº£ cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a má»™t lá»›p Ä‘á»u chia sáº» chung**. | DÃ¹ng cho nhá»¯ng thá»© mÃ  **má»—i Ä‘á»‘i tÆ°á»£ng cáº§n cÃ³ má»™t giÃ¡ trá»‹ riÃªng biá»‡t**. |
| VÃ­ dá»¥: Má»™t biáº¿n Ä‘áº¿m xem cÃ³ bao nhiÃªu Ä‘á»‘i tÆ°á»£ng Ä‘Ã£ Ä‘Æ°á»£c táº¡o ra, má»™t háº±ng sá»‘ (nhÆ° PI = 3.14), hoáº·c má»™t tÃªn cÃ´ng ty chung cho táº¥t cáº£ nhÃ¢n viÃªn. | VÃ­ dá»¥: TÃªn, tuá»•i, mÃ u sáº¯c, hoáº·c mÃ£ sá»‘ riÃªng cá»§a tá»«ng Ä‘á»‘i tÆ°á»£ng. |
| | |
| **CÃ¡ch truy cáº­p?** | **CÃ¡ch truy cáº­p?** |
| Báº¡n cÃ³ thá»ƒ truy cáº­p nÃ³ trá»±c tiáº¿p báº±ng tÃªn lá»›p: `TÃªnLá»›p.tÃªnBiáº¿nTÄ©nh`. | Báº¡n pháº£i truy cáº­p nÃ³ thÃ´ng qua má»™t Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ: `tÃªnÄá»‘iTÆ°á»£ng.tÃªnBiáº¿nThá»ƒHiá»‡n`. |
    |-----------------|-------------------|
    | NÃ³ lÃ  cá»§a class | NÃ³ lÃ  cá»§a object |
    | Chá»‰ cÃ³ Má»˜T báº£n sao thÃ´i, vÃ  *táº¥t cáº£* cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘á»u dÃ¹ng chung nÃ³! | Má»—i Ä‘á»‘i tÆ°á»£ng cÃ³ báº£n sao *riÃªng* cá»§a mÃ¬nh. |
    | ÄÆ°á»£c khai bÃ¡o báº±ng `static` Tá»« khÃ³a nÃ¨! | Khai bÃ¡o mÃ  cháº³ng dÃ¹ng! `static` tá»« khÃ³a | NÃ y báº¡n! Báº¡n cÃ³ bao giá» nghe Ä‘áº¿n 'tá»« khÃ³a' chÆ°a? Ã€, Ä‘Ã¢y lÃ  má»™t tá»« ráº¥t, ráº¥t Ä‘áº·c biá»‡t trong láº­p trÃ¬nh Ä‘Ã³. HÃ£y nghÄ© nÃ³ nhÆ° má»™t tá»« Ä‘Æ°á»£c "Ä‘áº·t chá»— trÆ°á»›c" váº­y. MÃ¡y tÃ­nh Ä‘Ã£ biáº¿t sáºµn tá»« nÃ y cÃ³ Ã½ nghÄ©a gÃ¬ rá»“i. Báº¡n *khÃ´ng thá»ƒ* dÃ¹ng 'tá»« khÃ³a' Ä‘á»ƒ Ä‘áº·t tÃªn cho biáº¿n cá»§a mÃ¬nh, hay tÃªn lá»›p há»c cá»§a báº¡n Ä‘Ã¢u nhÃ©. VÃ­ dá»¥ nhÆ° 'public', 'class' hay 'static' â€“ Ä‘Ã³ chÃ­nh lÃ  nhá»¯ng 'tá»« khÃ³a' Ä‘áº¥y! ChÃºng cÃ³ nhiá»‡m vá»¥ riÃªng cá»§a mÃ¬nh rá»“i.
    | Báº¡n dÃ¹ng TÃŠN Lá»šP Ä‘á»ƒ truy cáº­p | Báº¡n dÃ¹ng BIáº¾N THAM CHIáº¾U Äá»I TÆ¯á»¢NG Ä‘á»ƒ truy cáº­p |
    | NÆ¡i bá»™ nhá»› chá»‰ Ä‘Æ°á»£c cáº¥p phÃ¡t Má»˜T Láº¦N khi lá»›p (class) 'khá»Ÿi Ä‘á»™ng' | NÆ¡i bá»™ nhá»› Ä‘Æ°á»£c cáº¥p phÃ¡t Má»–I KHI má»™t Ä‘á»‘i tÆ°á»£ng (object) má»›i 'chÃ o Ä‘á»i' |
    | Method Area cáº¥t gÃ¬? | Heap cáº¥t gÃ¬? |

    ```java
    public class Employee {
        // Static variable - shared by all instances
        private static int employeeCount = 0;
        private static String companyName = "TechCorp";
        
        // Instance variables - unique to each instance
        private int id;
        private String name;
        private double salary;
        
        public Employee(String name, double salary) {
            this.name = name;
            this.salary = salary;
            this.id = ++employeeCount;  // Use static counter
        }
        
        // Static method - can only access static members
        public static int getEmployeeCount() {
            return employeeCount;
        }
        
        public static String getCompanyName() {
            return companyName;
        }
        
        // Instance method - can access both static and instance members
        public void displayInfo() {
            System.out.println("ID: " + id);
            System.out.println("Name: " + name);
            System.out.println("Salary: " + salary);
            System.out.println("Company: " + companyName);  // Accessing static
        }
        
        public static void main(String[] args) {
            // Accessing static variable before creating any object
            System.out.println("Company: " + Employee.companyName);
            System.out.println("Initial count: " + Employee.getEmployeeCount());
            
            // Create instances
            Employee emp1 = new Employee("John", 50000);
            Employee emp2 = new Employee("Jane", 60000);
            Employee emp3 = new Employee("Bob", 55000);
            
            // Each has unique instance variables
            emp1.displayInfo();
            System.out.println();
            emp2.displayInfo();
            
            // Static variable is shared
            System.out.println("\nTotal employees: " + Employee.getEmployeeCount());
            
            // Change static variable - affects all
            Employee.companyName = "NewTechCorp";
            System.out.println("\nAfter company name change:");
            emp1.displayInfo();
            emp2.displayInfo();
        }
    }
    ```

    **Static Block (Khá»‘i Static):**

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n cÃ³ má»™t `class` (lá»›p) nhÃ©.
VÃ  bÃªn trong `class` Ä‘Ã³, báº¡n cÃ³ má»™t vÃ i biáº¿n Ä‘áº·c biá»‡t.
ÄÃ³ chÃ­nh lÃ  cÃ¡c biáº¿n `static`.
Báº¡n cÃ²n nhá»› biáº¿n `static` khÃ´ng? ChÃºng thuá»™c vá» chÃ­nh `class` Ä‘Ã³, chá»© khÃ´ng pháº£i cá»§a báº¥t ká»³ Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ nÃ o Ä‘Ã¢u.

ÄÃ´i khi, báº¡n cáº§n lÃ m má»™t Ä‘iá»u gÃ¬ Ä‘Ã³ *chá»‰ má»™t láº§n duy nháº¥t* khi `class` cá»§a báº¡n láº§n Ä‘áº§u tiÃªn Ä‘Æ°á»£c náº¡p vÃ o bá»™ nhá»›.
VÃ­ dá»¥ nhÆ° thiáº¿t láº­p cÃ¡c biáº¿n `static` Ä‘Ã³ vá»›i má»™t vÃ i giÃ¡ trá»‹ khá»Ÿi táº¡o "sang cháº£nh" cháº³ng háº¡n.
Hoáº·c cÃ³ thá»ƒ thá»±c hiá»‡n má»™t phÃ©p tÃ­nh mÃ  chá»‰ cáº§n xáº£y ra *má»™t láº§n* cho toÃ n bá»™ `class`.

ÄÃ³ chÃ­nh lÃ  lÃºc má»™t **static block** (khá»‘i static) xuáº¥t hiá»‡n!

HÃ£y nghÄ© nÃ³ nhÆ° má»™t khu vá»±c "thiáº¿t láº­p trÆ°á»›c tráº­n Ä‘áº¥u" Ä‘áº·c biá»‡t cho `class` cá»§a báº¡n váº­y.
NÃ³ lÃ  má»™t khá»‘i mÃ£.
VÃ  nÃ³ chá»‰ cháº¡y *má»™t láº§n duy nháº¥t*.
Khi nÃ o Æ°? Ngay láº§n Ä‘áº§u tiÃªn MÃ¡y áº£o Java (JVM) náº¡p `class` cá»§a báº¡n.
TrÆ°á»›c khi *báº¥t ká»³* Ä‘á»‘i tÆ°á»£ng nÃ o cá»§a `class` Ä‘Ã³ Ä‘Æ°á»£c táº¡o ra!
TrÆ°á»›c cáº£ khi phÆ°Æ¡ng thá»©c `main` (náº¿u nÃ³ náº±m trong `class` Ä‘Ã³) báº¯t Ä‘áº§u cháº¡y ná»¯a Ä‘Ã³!

Váº­y, lÃ m tháº¿ nÃ o Ä‘á»ƒ táº¡o má»™t `static block`?

SiÃªu Ä‘Æ¡n giáº£n luÃ´n!
Báº¡n chá»‰ cáº§n dÃ¹ng tá»« khÃ³a `static`, theo sau lÃ  dáº¥u ngoáº·c nhá»n `{}`.
TrÃ´ng nÃ³ sáº½ nhÆ° tháº¿ nÃ y nÃ¨:

```java
class MyCoolClass {

    static int myStaticVariable;
    static String anotherStaticThing;

    // ChÃ  lÃ ! ÄÃ¢y chÃ­nh lÃ  má»™t static block Ä‘Ã³!
    static {
        System.out.println("ChÃ o báº¡n! TÃ´i Ä‘ang cháº¡y bÃªn trong static block Ä‘Ã¢y!");
        myStaticVariable = 100; // Khá»Ÿi táº¡o cÃ¡c biáº¿n static á»Ÿ Ä‘Ã¢y
        anotherStaticThing = "Xin chÃ o tá»« static block!";
        // Báº¡n cÃ³ thá»ƒ Ä‘áº·t báº¥t ká»³ logic khá»Ÿi táº¡o nÃ o cho cÃ¡c thÃ nh viÃªn static á»Ÿ Ä‘Ã¢y
    }

    // Báº¡n tháº­m chÃ­ cÃ³ thá»ƒ cÃ³ nhiá»u static block!
    // ChÃºng sáº½ cháº¡y theo thá»© tá»± chÃºng xuáº¥t hiá»‡n trong mÃ£.
    static {
        System.out.println("Má»™t static block khÃ¡c Ä‘Ã¢y!");
    }

    // Constructor (chá»‰ Ä‘á»ƒ so sÃ¡nh thÃ´i nhÃ©)
    public MyCoolClass() {
        System.out.println("Constructor Ä‘ang cháº¡y!");
    }

    public static void main(String[] args) {
        System.out.println("PhÆ°Æ¡ng thá»©c main Ä‘ang cháº¡y!");
        MyCoolClass obj1 = new MyCoolClass();
        MyCoolClass obj2 = new MyCoolClass();
    }
}
```

Káº¿t quáº£ cá»§a phÆ°Æ¡ng thá»©c `main` á»Ÿ trÃªn sáº½ lÃ  gÃ¬ nhá»‰?
Thá»­ nghÄ© xem!

NÃ³ sáº½ trÃ´ng giá»‘ng tháº¿ nÃ y:

```
ChÃ o báº¡n! TÃ´i Ä‘ang cháº¡y bÃªn trong static block Ä‘Ã¢y!
Má»™t static block khÃ¡c Ä‘Ã¢y!
PhÆ°Æ¡ng thá»©c main Ä‘ang cháº¡y!
Constructor Ä‘ang cháº¡y!
Constructor Ä‘ang cháº¡y!
```

Tháº¥y chÆ°a? CÃ¡c `static block` Ä‘Ã£ cháº¡y *trÆ°á»›c tiÃªn*, ngay cáº£ trÆ°á»›c khi `main` báº¯t Ä‘áº§u in Ä‘Ã³! VÃ  chÃºng chá»‰ cháº¡y *má»™t láº§n duy nháº¥t*, máº·c dÃ¹ chÃºng ta Ä‘Ã£ táº¡o ra hai Ä‘á»‘i tÆ°á»£ng `MyCoolClass`.

**Nhá»¯ng Ä‘iá»u quan trá»ng cáº§n nhá»› vá» static block:**

*   ChÃºng Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ khá»Ÿi táº¡o cÃ¡c thÃ nh viÃªn (`member`) `static` (biáº¿n).
*   ChÃºng cháº¡y *má»™t láº§n duy nháº¥t* khi `class` Ä‘Æ°á»£c JVM náº¡p.
*   ChÃºng cháº¡y *trÆ°á»›c khi* báº¥t ká»³ Ä‘á»‘i tÆ°á»£ng nÃ o Ä‘Æ°á»£c táº¡o vÃ  *trÆ°á»›c khi* phÆ°Æ¡ng thá»©c `main` báº¯t Ä‘áº§u.
*   Báº¡n cÃ³ thá»ƒ cÃ³ nhiá»u `static block`; chÃºng sáº½ thá»±c thi theo thá»© tá»± chÃºng xuáº¥t hiá»‡n.
    ```java
    class StaticDemo {
        static int value;
        
        // Static block - executed once when class loads
        static {
            System.out.println("Static block executed");
            value = 100;
        }
    }
    ```

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

58. ### Váº­y, cÃ¡i tá»« khÃ³a `super` nÃ y dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬ váº­y ta?

    Ã€, chÃ­nh lÃ ... `super` Ã€, cÃ³ má»™t tá»« khÃ³a siÃªu quan trá»ng trong Java mÃ  báº¡n cáº§n biáº¿t, Ä‘Ã³ lÃ  `super`!

NÃ³ dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬ Æ°? ÄÆ¡n giáº£n thÃ´i: `super` giÃºp báº¡n "chá»‰" vÃ o lá»›p cha *ngay bÃªn trÃªn* cÃ¡i lá»›p hiá»‡n táº¡i cá»§a báº¡n. Kiá»ƒu nhÆ°, báº¡n Ä‘ang á»Ÿ trong nhÃ  mÃ¬nh vÃ  muá»‘n gá»i bá»‘ máº¹ áº¥y!

VÃ  báº¡n biáº¿t khÃ´ng? Anh báº¡n `super` nÃ y cÃ³ tá»›i BA cÃ´ng dá»¥ng chÃ­nh láº­n, cá»±c ká»³ há»¯u Ã­ch luÃ´n:

    1. LÃ m sao Ä‘á»ƒ 'nhÃ²m' vÃ o cÃ¡c biáº¿n cá»§a lá»›p cha nhá»‰?

ÃŠ báº¡n! Báº¡n cÃ³ bao giá» tá»± há»i lÃ m sao má»™t 'Ä‘á»©a con' (tá»©c lÃ  lá»›p con Ä‘Ã³) cÃ³ thá»ƒ 'nhÃ²m ngÃ³' hay 'sá» mÃ³' vÃ o máº¥y cÃ¡i 'Ä‘á»“' cá»§a 'bá»‘ máº¹' (tá»©c lÃ  lá»›p cha) khÃ´ng? Trong tháº¿ giá»›i Java, cÃ¢u chuyá»‡n cÅ©ng y chang váº­y Ä‘Ã³! ChÃºng ta sáº½ tÃ¬m cÃ¡ch Ä‘á»ƒ má»™t lá»›p con 'truy cáº­p' cÃ¡c biáº¿n Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong lá»›p cha cá»§a nÃ³.

### BÆ°á»›c 1: Truy cáº­p 'Ä‘á»“' cá»§a bá»‘ máº¹ khi khÃ´ng cÃ³ tranh cháº¥p

ThÃ´ng thÆ°á»ng, khi báº¡n táº¡o má»™t lá»›p con, nÃ³ sáº½ 'tá»± Ä‘á»™ng thá»«a hÆ°á»Ÿng' táº¥t cáº£ cÃ¡c biáº¿n *khÃ´ng pháº£i lÃ  `private`* tá»« lá»›p cha. Hay nÃ³i cÃ¡ch khÃ¡c, nhá»¯ng biáº¿n Ä‘Ã³ sáº½ 'cÃ³ máº·t' trong lá»›p con cá»§a báº¡n. Váº­y nÃªn, náº¿u báº¡n chá»‰ muá»‘n dÃ¹ng chÃºng, báº¡n cÃ³ thá»ƒ gá»i chÃºng nhÆ° thá»ƒ chÃºng lÃ  biáº¿n cá»§a chÃ­nh lá»›p con váº­y! Java sáº½ tá»± Ä‘á»™ng 'hiá»ƒu' ráº±ng báº¡n Ä‘ang muá»‘n dÃ¹ng biáº¿n Ä‘Æ°á»£c káº¿ thá»«a tá»« lá»›p cha.

### BÆ°á»›c 2: Chuyá»‡n gÃ¬ xáº£y ra khi 'Ä‘á»“' cá»§a con vÃ  bá»‘ máº¹ láº¡i trÃ¹ng tÃªn?

NhÆ°ng mÃ  khoan! Chuyá»‡n sáº½ thÃº vá»‹ hÆ¡n khi lá»›p con vÃ  lá»›p cha láº¡i cÃ³ nhá»¯ng biáº¿n *trÃ¹ng tÃªn* nhau Ä‘áº¥y! VÃ­ dá»¥, cáº£ lá»›p cha vÃ  lá»›p con Ä‘á»u cÃ³ má»™t biáº¿n tÃªn lÃ  `color` (mÃ u sáº¯c).

LÃºc Ä‘Ã³ thÃ¬ sao? LÃ m sao Ä‘á»ƒ Java biáº¿t báº¡n Ä‘ang muá»‘n nÃ³i Ä‘áº¿n biáº¿n `color` cá»§a lá»›p con hay biáº¿n `color` cá»§a lá»›p cha Ä‘Ã¢y?

Äá»«ng lo láº¯ng! Java cÃ³ má»™t 'máº­t mÃ£' siÃªu Ä‘áº·c biá»‡t tÃªn lÃ  `super` Ä‘á»ƒ giÃºp chÃºng ta giáº£i quyáº¿t vá»¥ 'song trÃ¹ng' nÃ y!

### BÆ°á»›c 3: Giá»›i thiá»‡u 'máº­t mÃ£' `super`

Tá»« khÃ³a `super` giá»‘ng nhÆ° báº¡n Ä‘ang thÃ¬ tháº§m vá»›i Java ráº±ng: "ÃŠ, tÃ´i Ä‘ang muá»‘n nÃ³i Ä‘áº¿n cÃ¡i biáº¿n *trong lá»›p cha* Ä‘Ã³ nha! CÃ¡i biáº¿n mÃ  lá»›p con cá»§a tÃ´i káº¿ thá»«a áº¥y!"

NÃ³ giÃºp báº¡n phÃ¢n biá»‡t rÃµ rÃ ng khi cÃ³ hai biáº¿n cÃ¹ng tÃªn, má»™t trong lá»›p con vÃ  má»™t trong lá»›p cha. Cá»© nhÆ° lÃ  báº¡n Ä‘ang chá»‰ tay vÃ o mÃ³n Ä‘á»“ cá»§a bá»‘ máº¹ váº­y!

### BÆ°á»›c 4: Xem vÃ­ dá»¥ cho dá»… hiá»ƒu nÃ o!

HÃ£y cÃ¹ng xem má»™t vÃ­ dá»¥ Ä‘á»ƒ hiá»ƒu rÃµ hÆ¡n vá» cÃ¡ch `super` hoáº¡t Ä‘á»™ng nhÃ©:

```java
// ÄÃ¢y lÃ  lá»›p cha cá»§a chÃºng ta, nÃ³ nhÆ° má»™t 'khuÃ´n máº«u' chung chung váº­y
class Vehicle {
    String brand = "HÃ£ng xe chung chung"; // Biáº¿n 'brand' cá»§a lá»›p cha
    String color = "XÃ¡m"; // Biáº¿n 'color' cá»§a lá»›p cha
    int wheels = 4; // Biáº¿n 'wheels' cá»§a lá»›p cha (khÃ´ng trÃ¹ng tÃªn vá»›i lá»›p con)
}

// ÄÃ¢y lÃ  lá»›p con, nÃ³ káº¿ thá»«a tá»« Vehicle
class Car extends Vehicle {
    String brand = "Toyota"; // Ã”i! Lá»›p con cÅ©ng cÃ³ biáº¿n 'brand' riÃªng, trÃ¹ng tÃªn vá»›i lá»›p cha!
    String color = "Äá»"; // Lá»›p con cÅ©ng cÃ³ biáº¿n 'color' riÃªng, trÃ¹ng tÃªn!

    void showDetails() {
        System.out.println("--- ThÃ´ng tin xe hÆ¡i (lá»›p con) ---");

        // Truy cáº­p biáº¿n cá»§a lá»›p con (khÃ´ng dÃ¹ng super)
        System.out.println("ThÆ°Æ¡ng hiá»‡u cá»§a xe (lá»›p con): " + brand);
        System.out.println("MÃ u sáº¯c cá»§a xe (lá»›p con): " + color);

        // Truy cáº­p biáº¿n cá»§a lá»›p cha (DÃ™NG super!)
        System.out.println("ThÆ°Æ¡ng hiá»‡u cá»§a phÆ°Æ¡ng tiá»‡n (lá»›p cha): " + super.brand);
        System.out.println("MÃ u sáº¯c cá»§a phÆ°Æ¡ng tiá»‡n (lá»›p cha): " + super.color);

        // Biáº¿n 'wheels' khÃ´ng trÃ¹ng tÃªn, nÃªn dÃ¹ lÃ  cá»§a lá»›p cha, báº¡n váº«n gá»i tháº³ng Ä‘Æ°á»£c
        System.out.println("Sá»‘ bÃ¡nh xe (cá»§a lá»›p cha): " + wheels);
    }
}

// Lá»›p chÃ­nh Ä‘á»ƒ cháº¡y thá»­ chÆ°Æ¡ng trÃ¬nh
public class Garage {
    public static void main(String[] args) {
        Car myCar = new Car(); // Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng xe hÆ¡i
        myCar.showDetails(); // Gá»i phÆ°Æ¡ng thá»©c Ä‘á»ƒ xem chi tiáº¿t
    }
}
```

### BÆ°á»›c 5: Cháº¡y code vÃ  xem káº¿t quáº£!

Khi báº¡n 'cháº¡y' Ä‘oáº¡n code nÃ y, báº¡n sáº½ tháº¥y nhá»¯ng Ä‘iá»u sau:

```
--- ThÃ´ng tin xe hÆ¡i (lá»›p con) ---
ThÆ°Æ¡ng hiá»‡u cá»§a xe (lá»›p con): Toyota
MÃ u sáº¯c cá»§a xe (lá»›p con): Äá»
ThÆ°Æ¡ng hiá»‡u cá»§a phÆ°Æ¡ng tiá»‡n (lá»›p cha): HÃ£ng xe chung chung
MÃ u sáº¯c cá»§a phÆ°Æ¡ng tiá»‡n (lá»›p cha): XÃ¡m
Sá»‘ bÃ¡nh xe (cá»§a lá»›p cha): 4
```

- DÃ²ng `System.out.println("ThÆ°Æ¡ng hiá»‡u cá»§a xe (lá»›p con): " + brand);` sáº½ in ra `Toyota` vÃ¬ nÃ³ Ä‘ang truy cáº­p biáº¿n `brand` cá»§a chÃ­nh lá»›p `Car`.
- CÃ²n dÃ²ng `System.out.println("ThÆ°Æ¡ng hiá»‡u cá»§a phÆ°Æ¡ng tiá»‡n (lá»›p cha): " + super.brand);` thÃ¬ sao? Ã€, nÃ³ sáº½ in ra `HÃ£ng xe chung chung`! Bá»Ÿi vÃ¬ `super.brand` Ä‘Ã£ chá»‰ Ä‘Ã­ch danh biáº¿n `brand` trong lá»›p `Vehicle` rá»“i Ä‘Ã³!
- VÃ  cÃ¢u chuyá»‡n tÆ°Æ¡ng tá»± vá»›i biáº¿n `color` nhÃ©!
- Tháº¥y khÃ´ng? Biáº¿n `wheels` thÃ¬ báº¡n khÃ´ng cáº§n `super` vÃ¬ nÃ³ khÃ´ng bá»‹ trÃ¹ng tÃªn. Java Ä‘á»§ thÃ´ng minh Ä‘á»ƒ biáº¿t ráº±ng `wheels` chá»‰ cÃ³ á»Ÿ lá»›p cha thÃ´i!

### TÃ³m láº¡i:

Váº­y Ä‘Ã³! TÃ³m láº¡i, khi báº¡n cáº§n truy cáº­p má»™t biáº¿n cá»§a lá»›p cha *mÃ  nÃ³ láº¡i bá»‹ trÃ¹ng tÃªn vá»›i má»™t biáº¿n trong lá»›p con cá»§a báº¡n*, hÃ£y nhá»› 'máº­t mÃ£' `super.tÃªnBiáº¿n` nhÃ©!

Náº¿u biáº¿n Ä‘Ã³ *khÃ´ng há» trÃ¹ng tÃªn* vá»›i báº¥t ká»³ biáº¿n nÃ o trong lá»›p con, thÃ¬ báº¡n cá»© gá»i tháº³ng tÃªn biáº¿n lÃ  Ä‘Æ°á»£c, Java sáº½ tá»± Ä‘á»™ng tÃ¬m tháº¥y nÃ³ trong lá»›p cha thÃ´i!
    ```java
    class Animal {
        String name = "Animal";
    }

    class Dog extends Animal {
        String name = "Dog";
        
        void displayNames() {
            System.out.println("Child name: " + name);
            System.out.println("Parent name: " + super.name);
        }
    }
    ```

    **2. LÃ m sao Ä‘á»ƒ gá»i cÃ¡c phÆ°Æ¡ng thá»©c cá»§a lá»›p cha?**
    ```java
    class Animal {
        void eat() {
            System.out.println("Animal is eating");
        }
    }

    class Dog extends Animal {
        @Override
        void eat() {
            super.eat();  // Call parent method first
            System.out.println("Dog is eating dog food");
        }
    }
    ```

    **3. Gá»i HÃ m Khá»Ÿi Táº¡o (Constructor) cá»§a Lá»›p Cha:**
    ```java
    class Person {
        String name;
        int age;
        
        Person(String name, int age) {
            this.name = name;
            this.age = age;
        }
    }

    class Employee extends Person {
        String department;
        double salary;
        
        Employee(String name, int age, String department, double salary) {
            super(name, age);  // Call parent constructor (must be first statement)
            this.department = department;
            this.salary = salary;
        }
    }
    ```

    **VÃ­ dá»¥ hoÃ n chá»‰nh:**
    ```java
    class Vehicle {
        String brand = "Generic";
        int maxSpeed = 100;
        
        Vehicle() {
            System.out.println("Vehicle constructor");
        }
        
        Vehicle(String brand, int maxSpeed) {
            this.brand = brand;
            this.maxSpeed = maxSpeed;
            System.out.println("Vehicle parameterized constructor");
        }
        
        void start() {
            System.out.println("Vehicle starting...");
        }
        
        void displayInfo() {
            System.out.println("Brand: " + brand + ", Max Speed: " + maxSpeed);
        }
    }

    class Car extends Vehicle {
        String brand = "Car Brand";  // Hides parent variable
        int numDoors;
        
        Car(String brand, int maxSpeed, int numDoors) {
            super(brand, maxSpeed);  // Call parent constructor
            this.numDoors = numDoors;
            System.out.println("Car constructor");
        }
        
        @Override
        void start() {
            super.start();  // Call parent method
            System.out.println("Car engine started!");
        }
        
        void showBrands() {
            System.out.println("Car brand field: " + brand);
            System.out.println("Parent brand field: " + super.brand);
        }
    }

    public class SuperDemo {
        public static void main(String[] args) {
            Car car = new Car("Toyota", 200, 4);
            car.start();
            car.showBrands();
            car.displayInfo();
        }
    }
    ```

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

59. ### Tá»« khÃ³a `this`... nÃ³ cÃ³ nhiá»‡m vá»¥ gÃ¬ váº­y?

    Ã€, chÃ­nh lÃ ... `this` Tá»« khÃ³a `this` trong Java, Ã  nÃ³ giá»‘ng nhÆ° cÃ¡ch má»™t Ä‘á»‘i tÆ°á»£ng nÃ³i vá» CHÃNH NÃ“ váº­y Ä‘Ã³! Má»—i khi báº¡n tháº¥y `this`, hÃ£y nghÄ© ngay Ä‘áº¿n 'cÃ¡i Ä‘á»‘i tÆ°á»£ng hiá»‡n táº¡i nÃ y Ä‘Ã¢y'. NÃ³ lÃ  má»™t cÃ´ng cá»¥ siÃªu há»¯u Ã­ch vÃ  cÃ³ nhiá»u cÃ¡ch Ä‘á»ƒ dÃ¹ng láº¯m Ä‘áº¥y:

    **1. Biáº¿n thá»ƒ hiá»‡n (Instance Variables) vÃ  Tham sá»‘ (Parameters): LÃ m sao Ä‘á»ƒ biáº¿t ai lÃ  ai?**
    ```java
    class Person {
        String name;
        int age;
        
        Person(String name, int age) {
            this.name = name;  // this.name refers to instance variable
            this.age = age;    // age (right) is the parameter
        }
    }
    ```

    **2. Gá»i má»™t Constructor khÃ¡c (XÃ­ch Constructor):**

NÃ y báº¡n! CÃ³ bao giá» báº¡n tá»± há»i: "Náº¿u mÃ¬nh cÃ³ nhiá»u constructor, mÃ  máº¥y constructor Ä‘Ã³ láº¡i lÃ m nhá»¯ng viá»‡c *na nÃ¡ nhau* thÃ¬ sao nhá»‰? MÃ¬nh cÃ³ cáº§n pháº£i viáº¿t Ä‘i viáº¿t láº¡i cÃ¹ng má»™t Ä‘oáº¡n code khÃ´ng?"

TÆ°á»Ÿng tÆ°á»£ng xem, báº¡n Ä‘ang táº¡o má»™t lá»›p `Dog` (chÃº chÃ³) nÃ¨.

```java
class Dog {
    String name;
    String breed;
    int age;

    // Constructor 1: Constructor 'Ä‘áº§y Ä‘á»§' nháº¥t
    public Dog(String name, String breed, int age) {
        this.name = name;
        this.breed = breed;
        this.age = age;
        System.out.println("Vá»«a táº¡o má»™t chÃº chÃ³ má»›i cÃ³ tÃªn, giá»‘ng vÃ  tuá»•i!");
    }

    // Constructor 2: Chá»‰ cÃ³ tÃªn vÃ  giá»‘ng, cÃ²n tuá»•i thÃ¬ sao?
    public Dog(String name, String breed) {
        // Hmm, mÃ¬nh muá»‘n tuá»•i máº·c Ä‘á»‹nh lÃ  0 Ä‘i.
        // Váº­y mÃ¬nh cÃ³ nÃªn viáº¿t láº¡i y chang 3 dÃ²ng gÃ¡n giÃ¡ trá»‹ á»Ÿ trÃªn khÃ´ng?
        // this.name = name;
        // this.breed = breed;
        // this.age = 0; // GÃ¡n tuá»•i máº·c Ä‘á»‹nh
        System.out.println("Vá»«a táº¡o má»™t chÃº chÃ³ má»›i cÃ³ tÃªn vÃ  giá»‘ng!");
    }

    // Constructor 3: Chá»‰ cÃ³ tÃªn, cÃ²n giá»‘ng vÃ  tuá»•i thÃ¬ sao?
    public Dog(String name) {
        // Láº¡i pháº£i viáº¿t láº¡i code Ã ?
        // this.name = name;
        // this.breed = "KhÃ´ng rÃµ"; // Giá»‘ng máº·c Ä‘á»‹nh
        // this.age = 0; // Tuá»•i máº·c Ä‘á»‹nh
        System.out.println("Vá»«a táº¡o má»™t chÃº chÃ³ má»›i chá»‰ cÃ³ tÃªn!");
    }

    public void bark() {
        System.out.println(name + " gÃ¢u gÃ¢u! MÃ¬nh lÃ  " + breed + ", " + age + " tuá»•i.");
    }
}
```

Tháº¥y khÃ´ng? Náº¿u báº¡n cÃ³ nhiá»u constructor, vÃ  chÃºng chia sáº» má»™t pháº§n logic khá»Ÿi táº¡o (vÃ­ dá»¥: gÃ¡n cÃ¡c biáº¿n instance), thÃ¬ viá»‡c viáº¿t láº¡i code giá»‘ng nhau lÃ  má»™t cÆ¡n Ã¡c má»™ng! NÃ³ khÃ´ng "DRY" (Don't Repeat Yourself - Äá»«ng láº·p láº¡i chÃ­nh mÃ¬nh) chÃºt nÃ o.

**NhÆ°ng khoan Ä‘Ã£! Java cÃ³ má»™t chiÃªu cá»±c hay ho Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y!**

Báº¡n cÃ³ thá»ƒ gá»i má»™t constructor khÃ¡c *tá»« bÃªn trong* má»™t constructor khÃ¡c *cÃ¹ng lá»›p*! Nghe cÃ³ váº» phá»©c táº¡p nhÆ°ng thá»±c ra cá»±c ká»³ Ä‘Æ¡n giáº£n vá»›i tá»« khÃ³a `this()`.

ÄÃ¢y lÃ  cÃ¡ch báº¡n lÃ m:

```java
class Dog {
    String name;
    String breed;
    int age;

    // Constructor 1: Constructor 'Ä‘áº§y Ä‘á»§' nháº¥t (ÄÃ¢y lÃ  ná»n táº£ng!)
    public Dog(String name, String breed, int age) {
        this.name = name;
        this.breed = breed;
        this.age = age;
        System.out.println("1. Táº¡o má»™t chÃº chÃ³ má»›i: " + name + " (Constructor FULL)");
    }

    // Constructor 2: Chá»‰ cÃ³ tÃªn vÃ  giá»‘ng.
    // MÃ¬nh muá»‘n tuá»•i máº·c Ä‘á»‹nh lÃ  0.
    // Thay vÃ¬ viáº¿t láº¡i code, mÃ¬nh gá»i Constructor 1!
    public Dog(String name, String breed) {
        this(name, breed, 0); // <-- AHA! Gá»i Constructor 1 nÃ¨!
        System.out.println("2. Chá»‰ cÃ³ tÃªn vÃ  giá»‘ng thÃ´i nÃ¨!");
    }

    // Constructor 3: Chá»‰ cÃ³ tÃªn.
    // MÃ¬nh muá»‘n giá»‘ng máº·c Ä‘á»‹nh lÃ  "KhÃ´ng rÃµ" vÃ  tuá»•i máº·c Ä‘á»‹nh lÃ  0.
    // Láº¡i gá»i Constructor 1!
    public Dog(String name) {
        this(name, "KhÃ´ng rÃµ", 0); // <-- Láº¡i gá»i Constructor 1!
        System.out.println("3. Chá»‰ cÃ³ tÃªn thÃ´i Ä‘Ã³!");
    }

    public void bark() {
        System.out.println(name + " gÃ¢u gÃ¢u! MÃ¬nh lÃ  " + breed + ", " + age + " tuá»•i.");
    }
}
```

**Báº¡n tháº¥y Ä‘iá»u ká»³ diá»‡u chÆ°a?**

Khi báº¡n viáº¿t `this(name, breed, 0);` bÃªn trong `Dog(String name, String breed)`, báº¡n Ä‘ang báº£o Java: "NÃ y, trÆ°á»›c khi lÃ m báº¥t cá»© Ä‘iá»u gÃ¬ khÃ¡c trong constructor nÃ y, hÃ£y *Ä‘iá»u khiá»ƒn Ä‘áº¿n* constructor `Dog(String name, String breed, int age)` vá»›i cÃ¡c giÃ¡ trá»‹ nÃ y trÆ°á»›c!"

NÃ³ giá»‘ng nhÆ° viá»‡c báº¡n cÃ³ má»™t Ä‘áº§u báº¿p chÃ­nh (constructor Ä‘áº§y Ä‘á»§) lÃ m mÃ³n Äƒn cÆ¡ báº£n, vÃ  cÃ¡c Ä‘áº§u báº¿p phá»¥ (cÃ¡c constructor khÃ¡c) chá»‰ cáº§n thÃªm má»™t vÃ i gia vá»‹ (giÃ¡ trá»‹ máº·c Ä‘á»‹nh) rá»“i nhá» Ä‘áº§u báº¿p chÃ­nh lÃ m pháº§n cÃ²n láº¡i váº­y.

**Quy táº¯c vÃ ng (cá»±c ká»³ quan trá»ng!):**

Khi báº¡n sá»­ dá»¥ng `this()` Ä‘á»ƒ gá»i má»™t constructor khÃ¡c, thÃ¬ **`this()` PHáº¢I LÃ€ Lá»†NH Äáº¦U TIÃŠN** trong constructor Ä‘Ã³. KhÃ´ng Ä‘Æ°á»£c cÃ³ báº¥t ká»³ dÃ²ng code nÃ o khÃ¡c trÆ°á»›c nÃ³.

```java
public Dog(String name, String breed) {
    // System.out.println("KhÃ´ng Ä‘Æ°á»£c Ä‘áº·t lá»‡nh nÃ y á»Ÿ Ä‘Ã¢y!"); // Lá»–I BIÃŠN Dá»ŠCH!
    this(name, breed, 0); // <-- Pháº£i lÃ  lá»‡nh Ä‘áº§u tiÃªn!
    System.out.println("2. Chá»‰ cÃ³ tÃªn vÃ  giá»‘ng thÃ´i nÃ¨!");
}
```

**Táº¡i sao láº¡i cÃ³ quy táº¯c nÃ y?**
Java muá»‘n Ä‘áº£m báº£o ráº±ng Ä‘á»‘i tÆ°á»£ng cá»§a báº¡n Ä‘Æ°á»£c khá»Ÿi táº¡o Ä‘áº§y Ä‘á»§ vÃ  Ä‘Ãºng cÃ¡ch *trÆ°á»›c khi* báº¥t ká»³ logic nÃ o khÃ¡c trong constructor Ä‘Æ°á»£c cháº¡y. Äiá»u nÃ y giÃºp ngÄƒn cháº·n cÃ¡c lá»—i tiá»m áº©n khi báº¡n cá»‘ gáº¯ng sá»­ dá»¥ng má»™t Ä‘á»‘i tÆ°á»£ng chÆ°a Ä‘Æ°á»£c khá»Ÿi táº¡o hoÃ n chá»‰nh.

**HÃ£y xem nÃ³ hoáº¡t Ä‘á»™ng tháº¿ nÃ o trong thá»±c táº¿ nhÃ©!**

```java
public class Kennel {
    public static void main(String[] args) {
        System.out.println("--- Táº¡o Fido (Constructor Ä‘áº§y Ä‘á»§) ---");
        Dog fido = new Dog("Fido", "Golden Retriever", 5);
        fido.bark(); // Output: Fido gÃ¢u gÃ¢u! MÃ¬nh lÃ  Golden Retriever, 5 tuá»•i.

        System.out.println("\n--- Táº¡o Buddy (Constructor 2 tham sá»‘) ---");
        Dog buddy = new Dog("Buddy", "Poodle");
        buddy.bark(); // Output: Buddy gÃ¢u gÃ¢u! MÃ¬nh lÃ  Poodle, 0 tuá»•i.
                      // Constructor 2 gá»i Constructor 1 vá»›i age = 0!

        System.out.println("\n--- Táº¡o Max (Constructor 1 tham sá»‘) ---");
        Dog max = new Dog("Max");
        max.bark(); // Output: Max gÃ¢u gÃ¢u! MÃ¬nh lÃ  KhÃ´ng rÃµ, 0 tuá»•i.
                    // Constructor 3 gá»i Constructor 1 vá»›i breed = "KhÃ´ng rÃµ", age = 0!
    }
}
```

**Output khi cháº¡y:**

```
--- Táº¡o Fido (Constructor Ä‘áº§y Ä‘á»§) ---
1. Táº¡o má»™t chÃº chÃ³ má»›i: Fido (Constructor FULL)
Fido gÃ¢u gÃ¢u! MÃ¬nh lÃ  Golden Retriever, 5 tuá»•i.

--- Táº¡o Buddy (Constructor 2 tham sá»‘) ---
1. Táº¡o má»™t chÃº chÃ³ má»›i: Buddy (Constructor FULL)
2. Chá»‰ cÃ³ tÃªn vÃ  giá»‘ng thÃ´i nÃ¨!
Buddy gÃ¢u gÃ¢u! MÃ¬nh lÃ  Poodle, 0 tuá»•i.

--- Táº¡o Max (Constructor 1 tham sá»‘) ---
1. Táº¡o má»™t chÃº chÃ³ má»›i: Max (Constructor FULL)
3. Chá»‰ cÃ³ tÃªn thÃ´i Ä‘Ã³!
Max gÃ¢u gÃ¢u! MÃ¬nh lÃ  KhÃ´ng rÃµ, 0 tuá»•i.
```

Tháº¥y chÆ°a? Tuyá»‡t vá»i pháº£i khÃ´ng? Báº¡n Ä‘Ã£ tÃ¡i sá»­ dá»¥ng code khá»Ÿi táº¡o má»™t cÃ¡ch thÃ´ng minh, giÃºp code cá»§a báº¡n gá»n gÃ ng hÆ¡n, dá»… báº£o trÃ¬ hÆ¡n ráº¥t nhiá»u! ÄÃ¢y chÃ­nh lÃ  "Constructor Chaining" Ä‘Ã³!
    ```java
    class Employee {
        String name;
        int age;
        String department;
        
        Employee() {
            this("Unknown", 0, "General");  // Call parameterized constructor
        }
        
        Employee(String name) {
            this(name, 0, "General");
        }
        
        Employee(String name, int age, String department) {
            this.name = name;
            this.age = age;
            this.department = department;
        }
    }
    ```

    **3. Truyá»n 'chÃ­nh báº¡n' (Ä‘á»‘i tÆ°á»£ng hiá»‡n táº¡i) lÃ m tham sá»‘:**
    ```java
    class Calculator {
        int value;
        
        Calculator(int value) {
            this.value = value;
        }
        
        void display(Calculator calc) {
            System.out.println("Value: " + calc.value);
        }
        
        void show() {
            display(this);  // Pass current object
        }
    }
    ```

    **4. Tráº£ Vá» ChÃ­nh NÃ³ (Äá»ƒ LÃ m ÄÆ°á»£c Nhiá»u Thá»© HÆ¡n!):**
(Hay cÃ²n gá»i lÃ  'Chuá»—i PhÆ°Æ¡ng Thá»©c' hay 'Giao Diá»‡n Linh Hoáº¡t')

NÃ y báº¡n! ÄÃ£ bao giá» báº¡n muá»‘n lÃ m *nhiá»u* viá»‡c liÃªn tiáº¿p vá»›i *cÃ¹ng má»™t* Ä‘á»‘i tÆ°á»£ng chÆ°a? Kiá»ƒu nhÆ°: "Äáº§u tiÃªn, tÃ´i muá»‘n chiáº¿c xe nÃ y mÃ u Ä‘á». Sau Ä‘Ã³, tÃ´i muá»‘n nÃ³ cháº¡y 100km/h. Cuá»‘i cÃ¹ng, tÃ´i muá»‘n nÃ³ ná»• mÃ¡y!"

ThÃ´ng thÆ°á»ng, báº¡n sáº½ viáº¿t code nhÆ° tháº¿ nÃ y, Ä‘Ãºng khÃ´ng?

```java
Car myCar = new Car();
myCar.setColor("Äá»");
myCar.setSpeed(100);
myCar.startEngine();
```

NhÃ¬n cÅ©ng á»•n Ä‘áº¥y, nhÆ°ng mÃ ... cá»© pháº£i gÃµ `myCar.` Ä‘i gÃµ láº¡i hoÃ i. HÆ¡i tá»‘n cÃ´ng má»™t chÃºt, nhá»‰?

Tháº¿ thÃ¬, cÃ³ má»™t "chiÃªu" cá»±c hay ho mÃ  báº¡n cÃ³ thá»ƒ dÃ¹ng! ÄÃ³ lÃ : **hÃ£y Ä‘á»ƒ phÆ°Æ¡ng thá»©c cá»§a báº¡n tráº£ vá» CHÃNH NÃ“!**

Nghe hÆ¡i ká»³ láº¡ Ä‘Ãºng khÃ´ng? "Tráº£ vá» chÃ­nh nÃ³" nghÄ©a lÃ  sao?

Khi má»™t phÆ°Æ¡ng thá»©c thá»±c hiá»‡n xong cÃ´ng viá»‡c cá»§a nÃ³, thay vÃ¬ tráº£ vá» `void` (khÃ´ng gÃ¬ cáº£) hoáº·c má»™t giÃ¡ trá»‹ khÃ¡c, nÃ³ sáº½ tráº£ vá» *chÃ­nh Ä‘á»‘i tÆ°á»£ng mÃ  nÃ³ Ä‘ang hoáº¡t Ä‘á»™ng*.

Äá»ƒ lÃ m Ä‘Æ°á»£c Ä‘iá»u Ä‘Ã³, báº¡n chá»‰ cáº§n thÃªm `return this;` vÃ o cuá»‘i phÆ°Æ¡ng thá»©c. `this` á»Ÿ Ä‘Ã¢y Ä‘Æ¡n giáº£n lÃ  "cÃ¡i Ä‘á»‘i tÆ°á»£ng hiá»‡n táº¡i mÃ  phÆ°Æ¡ng thá»©c nÃ y Ä‘ang Ä‘Æ°á»£c gá»i lÃªn áº¥y".

HÃ£y xem vÃ­ dá»¥ vá»›i lá»›p `Car` cá»§a chÃºng ta nhÃ©:

```java
class Car {
    String color;
    int speed;
    boolean engineOn;

    public Car setColor(String newColor) {
        this.color = newColor;
        System.out.println("Xe bÃ¢y giá» mÃ u: " + this.color);
        return this; // <-- ÄÃ¢y lÃ  pháº§n quan trá»ng! Tráº£ vá» chÃ­nh Ä‘á»‘i tÆ°á»£ng Car nÃ y.
    }

    public Car setSpeed(int newSpeed) {
        this.speed = newSpeed;
        System.out.println("Xe Ä‘ang cháº¡y vá»›i tá»‘c Ä‘á»™: " + this.speed + " km/h");
        return this; // <-- Láº¡i tráº£ vá» chÃ­nh nÃ³!
    }

    public void startEngine() { // CÃ¡i nÃ y khÃ´ng cáº§n tráº£ vá» this vÃ¬ nÃ³ thÆ°á»ng lÃ  hÃ nh Ä‘á»™ng cuá»‘i cÃ¹ng
        this.engineOn = true;
        System.out.println("Äá»™ng cÆ¡ Ä‘Ã£ ná»•!");
    }
}
```

Báº¡n tháº¥y khÃ´ng? CÃ¡c phÆ°Æ¡ng thá»©c `setColor()` vÃ  `setSpeed()` giá» Ä‘Ã¢y tráº£ vá» kiá»ƒu `Car` (chÃ­nh lÃ  kiá»ƒu cá»§a Ä‘á»‘i tÆ°á»£ng `Car` hiá»‡n táº¡i) vÃ  káº¿t thÃºc báº±ng `return this;`.

VÃ  Ä‘Ã¢y lÃ  Ä‘iá»u ká»³ diá»‡u sáº½ xáº£y ra khi báº¡n dÃ¹ng nÃ³:

```java
Car myCar = new Car();
myCar.setColor("Äá»")      // PhÆ°Æ¡ng thá»©c nÃ y lÃ m xong viá»‡c vÃ  tráº£ vá» myCar
     .setSpeed(100)       // VÃ¬ setColor tráº£ vá» myCar, nÃªn báº¡n cÃ³ thá»ƒ gá»i setSpeed TRá»°C TIáº¾P trÃªn myCar Ä‘Ã³!
     .startEngine();      // TÆ°Æ¡ng tá»±, setSpeed cÅ©ng tráº£ vá» myCar, nÃªn báº¡n gá»i startEngine ngay Ä‘Æ°á»£c!
```

**Wow!** NhÃ¬n gá»n gÃ ng hÆ¡n háº³n Ä‘Ãºng khÃ´ng? Giá» Ä‘Ã¢y, báº¡n cÃ³ thá»ƒ "xÃ¢u chuá»—i" cÃ¡c phÆ°Æ¡ng thá»©c láº¡i vá»›i nhau, giá»‘ng nhÆ° xÃ¢u nhá»¯ng háº¡t ngá»c trai váº­y.

**Táº¡i sao cÃ¡ch nÃ y láº¡i hay ho Ä‘áº¿n váº­y?**

*   **MÃ£ dá»… Ä‘á»c hÆ¡n:** NÃ³ giá»‘ng nhÆ° báº¡n Ä‘ang ká»ƒ má»™t cÃ¢u chuyá»‡n váº­y: "Xe cá»§a tÃ´i, Ä‘áº·t mÃ u Ä‘á», rá»“i Ä‘áº·t tá»‘c Ä‘á»™ 100, rá»“i ná»• mÃ¡y."
*   **Gá»n gÃ ng hÆ¡n:** KhÃ´ng pháº£i láº·p Ä‘i láº·p láº¡i tÃªn Ä‘á»‘i tÆ°á»£ng `myCar` nhiá»u láº§n.
*   **Táº¡o ra 'Giao diá»‡n linh hoáº¡t' (Fluent Interface):** Khi báº¡n thiáº¿t káº¿ cÃ¡c phÆ°Æ¡ng thá»©c theo cÃ¡ch nÃ y, code cá»§a báº¡n trÃ´ng sáº½ ráº¥t "mÆ°á»£t mÃ " vÃ  dá»… hiá»ƒu, gáº§n giá»‘ng nhÆ° Ä‘á»c má»™t cÃ¢u tiáº¿ng Anh váº­y.

Váº­y Ä‘áº¥y! Khi báº¡n muá»‘n má»™t Ä‘á»‘i tÆ°á»£ng lÃ m nhiá»u viá»‡c liÃªn tiáº¿p cho chÃ­nh nÃ³, hÃ£y nhá»› Ä‘áº¿n chiÃªu `return this;` nhÃ©! NÃ³ sáº½ giÃºp code cá»§a báº¡n "cháº¥t" hÆ¡n ráº¥t nhiá»u Ä‘áº¥y!
    ```java
    class Builder {
        private String name;
        private int age;
        private String email;
        
        Builder setName(String name) {
            this.name = name;
            return this;  // Return current object for chaining
        }
        
        Builder setAge(int age) {
            this.age = age;
            return this;
        }
        
        Builder setEmail(String email) {
            this.email = email;
            return this;
        }
        
        void build() {
            System.out.println("Name: " + name + ", Age: " + age + ", Email: " + email);
        }
    }

    // Usage with method chaining
    class ThisDemo {
        public static void main(String[] args) {
            new Builder()
                .setName("John")
                .setAge(25)
                .setEmail("john@example.com")
                .build();
        }
    }
    ```

    5. Khi á»Ÿ trong lá»›p lá»“ng, lÃ m sao Ä‘á»ƒ báº¡n chá»‰ vÃ o Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p bao ngoÃ i?
    ```java
    class Outer {
        int value = 10;
        
        class Inner {
            int value = 20;
            
            void display() {
                int value = 30;
                System.out.println("Local: " + value);
                System.out.println("Inner: " + this.value);
                System.out.println("Outer: " + Outer.this.value);
            }
        }
    }
    ```

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

60. ### Váº­y Generics trong Java lÃ  gÃ¬?

    Generics giÃºp báº¡n lÃ m má»™t viá»‡c cá»±c hay ho: Ä‘Ã³ lÃ  cho phÃ©p báº¡n dÃ¹ng CÃC KIá»‚U dá»¯ liá»‡u (nhÆ° `String`, `Integer` hay cÃ¡c `class`, `interface` báº¡n tá»± viáº¿t) lÃ m tham sá»‘! Báº¡n sáº½ dÃ¹ng chÃºng khi Ä‘á»‹nh nghÄ©a cÃ¡c `class`, `interface` vÃ  `method` cá»§a riÃªng mÃ¬nh.

VÃ  Ä‘Ã¢y lÃ  pháº§n tuyá»‡t vá»i nháº¥t: Generics mang láº¡i cho báº¡n sá»± 'an toÃ n kiá»ƒu dá»¯ liá»‡u' ngay Tá»ª KHI BIÃŠN Dá»ŠCH (compile-time). Äiá»u nÃ y cÃ³ nghÄ©a lÃ  trÃ¬nh biÃªn dá»‹ch sáº½ kiá»ƒm tra giÃºp báº¡n cÃ¡c lá»—i vá» kiá»ƒu dá»¯ liá»‡u ngay tá»« Ä‘áº§u, trÆ°á»›c cáº£ khi chÆ°Æ¡ng trÃ¬nh cháº¡y! NÃ³ sáº½ 'báº¯t' lá»—i cho báº¡n sá»›m hÆ¡n.

Ã€, cÃ²n nhá»› nhá»¯ng lÃºc báº¡n pháº£i Ã©p kiá»ƒu (casting) rÆ°á»m rÃ  khÃ´ng? Generics sáº½ giÃºp báº¡n 'quáº³ng' chÃºng Ä‘i luÃ´n! Báº¡n khÃ´ng cáº§n pháº£i 'nÃ³i' vá»›i trÃ¬nh biÃªn dá»‹ch ráº±ng 'nÃ y, cÃ¡i nÃ y thá»±c ra lÃ  `String` Ä‘áº¥y nhÃ©' ná»¯a. TrÃ¬nh biÃªn dá»‹ch Ä‘Ã£ biáº¿t rá»“i!

    **Lá»£i Ã­ch cá»§a Generics:**
    - Báº¡n biáº¿t khÃ´ng, trong Java, má»i thá»© Ä‘á»u cÃ³ má»™t "kiá»ƒu" rÃµ rÃ ng.

*   Má»™t biáº¿n kiá»ƒu `int` thÃ¬ chá»‰ Ä‘á»±ng sá»‘ nguyÃªn thÃ´i.
*   Má»™t biáº¿n kiá»ƒu `String` thÃ¬ chá»‰ Ä‘á»±ng máº¥y Ä‘oáº¡n vÄƒn báº£n thÃ´i.

Váº­y chuyá»‡n gÃ¬ sáº½ xáº£y ra náº¿u báº¡n cá»‘ gáº¯ng... nhÃ©t má»™t Ä‘oáº¡n vÄƒn báº£n (`String`) vÃ o má»™t biáº¿n chá»‰ dÃ nh cho sá»‘ nguyÃªn (`int`)?

Cháº¯c cháº¯n lÃ  khÃ´ng á»•n rá»“i, pháº£i khÃ´ng?

ÄÃ¢y chÃ­nh lÃ  lÃºc khÃ¡i niá»‡m "An toÃ n kiá»ƒu dá»¯ liá»‡u" (Type safety) xuáº¥t hiá»‡n!

NÃ³ cÃ³ nghÄ©a lÃ  Java cá»±c ká»³ nghiÃªm tÃºc vá» viá»‡c báº¡n pháº£i dÃ¹ng Ä‘Ãºng kiá»ƒu dá»¯ liá»‡u cho Ä‘Ãºng chá»—. Báº¡n khÃ´ng thá»ƒ "nháº§m láº«n" giá»¯a cÃ¡c kiá»ƒu Ä‘Æ°á»£c.

VÃ  Ä‘iá»u tuyá»‡t vá»i nháº¥t lÃ : Java kiá»ƒm tra viá»‡c nÃ y *ngay táº¡i thá»i Ä‘iá»ƒm biÃªn dá»‹ch*.

Tá»©c lÃ , trÆ°á»›c khi chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n ká»‹p cháº¡y dÃ¹ chá»‰ má»™t dÃ²ng, anh chÃ ng Compiler (trÃ¬nh biÃªn dá»‹ch) Ä‘Ã£ "soi" ká»¹ lÆ°á»¡ng rá»“i.

*   Náº¿u báº¡n lá»¡ tay gÃ¡n sai kiá»ƒu dá»¯ liá»‡u, Compiler sáº½ láº­p tá»©c hÃ©t lÃªn má»™t lá»—i.
*   Anh áº¥y sáº½ khÃ´ng cho phÃ©p chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cháº¡y Ä‘Ã¢u!

Nhá» váº­y, chÃºng ta cÃ³ thá»ƒ phÃ¡t hiá»‡n vÃ  sá»­a ráº¥t nhiá»u lá»—i liÃªn quan Ä‘áº¿n kiá»ƒu dá»¯ liá»‡u *ngay tá»« lÃºc viáº¿t code*, thay vÃ¬ Ä‘á»ƒ chÃºng gÃ¢y ra nhá»¯ng ráº¯c rá»‘i khÃ³ chá»‹u khi chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y dá»Ÿ dang. Cá»±c ká»³ tiá»‡n lá»£i pháº£i khÃ´ng nÃ o?
    - Táº¡m biá»‡t máº¥y vá»¥ Ã©p kiá»ƒu phiá»n phá»©c!
    - ## TÃ¡i sá»­ dá»¥ng mÃ£ (Code Reusability)

Báº¡n Ä‘Ã£ bao giá» viáº¿t má»™t Ä‘oáº¡n mÃ£ cá»±c hay, rá»“i nháº­n ra mÃ¬nh cáº§n dÃ¹ng nÃ³ á»Ÿ nhiá»u chá»— khÃ¡c chÆ°a? Cháº¯c cháº¯n rá»“i! VÃ  báº¡n Ä‘á»‹nh lÃ m gÃ¬? Copy-paste Ã ? Ã”i khÃ´ng!

Copy-paste lÃ  má»™t cÃ¡i báº«y Ä‘Ã³! Náº¿u sau nÃ y báº¡n phÃ¡t hiá»‡n ra lá»—i trong Ä‘oáº¡n mÃ£ Ä‘Ã³, báº¡n sáº½ pháº£i sá»­a á»Ÿ **Táº¤T Cáº¢** nhá»¯ng chá»— Ä‘Ã£ copy. Má»‡t má»i láº¯m!

Äá»«ng lo láº¯ng! CÃ³ má»™t siÃªu nÄƒng lá»±c giÃºp báº¡n thoÃ¡t khá»i ráº¯c rá»‘i nÃ y: Ä‘Ã³ lÃ  **TÃ¡i sá»­ dá»¥ng mÃ£** (Code Reusability)!

### TÃ¡i sá»­ dá»¥ng mÃ£ lÃ  gÃ¬?

Nghe cÃ³ váº» "pro" Ä‘Ãºng khÃ´ng? NhÆ°ng thá»±c ra nÃ³ cá»±c ká»³ Ä‘Æ¡n giáº£n.

**TÃ¡i sá»­ dá»¥ng mÃ£** nghÄ©a lÃ  báº¡n viáº¿t má»™t Ä‘oáº¡n mÃ£ (hoáº·c má»™t chá»©c nÄƒng, má»™t lá»›p) **Má»˜T Láº¦N DUY NHáº¤T**, vÃ  sau Ä‘Ã³ báº¡n cÃ³ thá»ƒ dÃ¹ng láº¡i nÃ³ á»Ÿ **Báº¤T Cá»¨ ÄÃ‚U** báº¡n muá»‘n trong chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh.

HÃ£y nghÄ© vá» nÃ³ nhÆ° má»™t cÃ´ng thá»©c náº¥u Äƒn. Báº¡n viáº¿t cÃ´ng thá»©c lÃ m mÃ³n phá»Ÿ má»™t láº§n, vÃ  má»—i khi báº¡n muá»‘n Äƒn phá»Ÿ, báº¡n chá»‰ cáº§n lÃ m theo cÃ´ng thá»©c Ä‘Ã³, chá»© khÃ´ng pháº£i ngá»“i viáº¿t láº¡i tá»« Ä‘áº§u, Ä‘Ãºng khÃ´ng? MÃ£ cÅ©ng váº­y!

### Táº¡i sao TÃ¡i sá»­ dá»¥ng mÃ£ láº¡i "siÃªu ngáº§u"?

NÃ³ mang láº¡i cáº£ táº¥n lá»£i Ã­ch Ä‘Ã³ báº¡n Æ¡i:

*   **Tiáº¿t kiá»‡m thá»i gian:** Báº¡n khÃ´ng pháº£i viáº¿t Ä‘i viáº¿t láº¡i cÃ¹ng má»™t thá»©. Viáº¿t má»™t láº§n, dÃ¹ng mÃ£i mÃ£i!
*   **Ãt lá»—i hÆ¡n (hoáº·c dá»… sá»­a lá»—i hÆ¡n):** Náº¿u cÃ³ lá»—i, báº¡n chá»‰ cáº§n sá»­a á»Ÿ **Má»˜T** chá»— duy nháº¥t lÃ  xong. Táº¥t cáº£ nhá»¯ng chá»— khÃ¡c dÃ¹ng láº¡i Ä‘oáº¡n mÃ£ Ä‘Ã³ cÅ©ng sáº½ tá»± Ä‘á»™ng Ä‘Æ°á»£c sá»­a theo. Tuyá»‡t vá»i chÆ°a?
*   **ChÆ°Æ¡ng trÃ¬nh "sáº¡ch" hÆ¡n:** MÃ£ cá»§a báº¡n sáº½ gá»n gÃ ng hÆ¡n, dá»… Ä‘á»c hÆ¡n vÃ  dá»… báº£o trÃ¬ hÆ¡n. KhÃ´ng cÃ²n nhá»¯ng Ä‘oáº¡n mÃ£ láº·p Ä‘i láº·p láº¡i khiáº¿n báº¡n Ä‘au Ä‘áº§u ná»¯a!
*   **Nhanh hÆ¡n:** Khi báº¡n cÃ³ sáºµn cÃ¡c "khá»‘i xÃ¢y dá»±ng" Ä‘Ã£ Ä‘Æ°á»£c kiá»ƒm chá»©ng, viá»‡c táº¡o ra nhá»¯ng tÃ­nh nÄƒng má»›i sáº½ nhanh chÃ³ng hÆ¡n ráº¥t nhiá»u.

### LÃ m sao Ä‘á»ƒ tÃ¡i sá»­ dá»¥ng mÃ£ Ä‘Ã¢y?

Váº­y lÃ m sao Ä‘á»ƒ cÃ³ Ä‘Æ°á»£c siÃªu nÄƒng lá»±c nÃ y? Trong láº­p trÃ¬nh, chÃºng ta thÆ°á»ng dÃ¹ng cÃ¡c "há»™p cÃ´ng cá»¥" sau Ä‘á»ƒ tÃ¡i sá»­ dá»¥ng mÃ£:

*   **HÃ m (Functions) hoáº·c PhÆ°Æ¡ng thá»©c (Methods):** Tá»©c lÃ  nhá»¯ng Ä‘oáº¡n mÃ£ nhá» lÃ m má»™t viá»‡c cá»¥ thá»ƒ. Báº¡n Ä‘á»‹nh nghÄ©a chÃºng má»™t láº§n, rá»“i gá»i chÃºng báº¥t cá»© khi nÃ o báº¡n cáº§n thá»±c hiá»‡n cÃ´ng viá»‡c Ä‘Ã³.
    ```java
    // VÃ­ dá»¥ vá» má»™t phÆ°Æ¡ng thá»©c (method)
    public void chaoBan(String ten) {
        System.out.println("Xin chÃ o, " + ten + "!");
    }

    // Sau Ä‘Ã³ báº¡n cÃ³ thá»ƒ gá»i nÃ³ á»Ÿ nhiá»u nÆ¡i:
    // chaoBan("An");
    // chaoBan("BÃ¬nh");
    ```
*   **Lá»›p (Classes):** Äá»ƒ táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ³ hÃ nh vi vÃ  thuá»™c tÃ­nh giá»‘ng nhau. Báº¡n viáº¿t Ä‘á»‹nh nghÄ©a lá»›p má»™t láº§n, rá»“i táº¡o ra bao nhiÃªu Ä‘á»‘i tÆ°á»£ng tÃ¹y thÃ­ch tá»« lá»›p Ä‘Ã³.
*   **ThÆ° viá»‡n (Libraries) hoáº·c Khung lÃ m viá»‡c (Frameworks):** Nhá»¯ng bá»™ sÆ°u táº­p mÃ£ Ä‘Ã£ Ä‘Æ°á»£c viáº¿t sáºµn cho báº¡n dÃ¹ng. VÃ­ dá»¥, báº¡n khÃ´ng cáº§n tá»± viáº¿t mÃ£ Ä‘á»ƒ káº¿t ná»‘i internet hay xá»­ lÃ½ ngÃ y thÃ¡ng, vÃ¬ Ä‘Ã£ cÃ³ cÃ¡c thÆ° viá»‡n lÃ m sáºµn rá»“i!

Tháº¥y chÆ°a? TÃ¡i sá»­ dá»¥ng mÃ£ khÃ´ng chá»‰ giÃºp báº¡n lÆ°á»i biáº¿ng má»™t cÃ¡ch thÃ´ng minh mÃ  cÃ²n giÃºp báº¡n viáº¿t ra nhá»¯ng chÆ°Æ¡ng trÃ¬nh tá»‘t hÆ¡n, bá»n vá»¯ng hÆ¡n ná»¯a! HÃ£y luÃ´n nghÄ© Ä‘áº¿n nÃ³ khi viáº¿t mÃ£ nhÃ©!
    - HÃ£y cÃ¹ng 'kÃ­ch hoáº¡t' Thuáº­t toÃ¡n Tá»•ng quÃ¡t!

    **Lá»›p Generic:**

NÃ y báº¡n! ÄÃ£ bao giá» báº¡n nghÄ© ráº±ng: "Æ¯á»›c gÃ¬ mÃ¬nh cÃ³ thá»ƒ táº¡o ra má»™t cÃ¡i 'há»™p' mÃ  nÃ³ cÃ³ thá»ƒ chá»©a *báº¥t ká»³ loáº¡i Ä‘á»“ váº­t nÃ o* nhá»‰?" Kiá»ƒu nhÆ°, hÃ´m nay báº¡n muá»‘n bá» má»™t quáº£ tÃ¡o vÃ o, ngÃ y mai láº¡i muá»‘n bá» má»™t chiáº¿c xe hÆ¡i Ä‘á»“ chÆ¡i vÃ o, mÃ  khÃ´ng cáº§n pháº£i lÃ m láº¡i cÃ¡i há»™p Ä‘Ã³ má»—i láº§n?

Nghe cÃ³ váº» tiá»‡n lá»£i Ä‘Ãºng khÃ´ng?

ÄÃ³ chÃ­nh lÃ  lÃºc **Lá»›p Generic** (hay cÃ²n gá»i lÃ  lá»›p tá»•ng quÃ¡t) xuáº¥t hiá»‡n Ä‘á»ƒ cá»©u nguy! NÃ³ cho phÃ©p báº¡n viáº¿t code cá»±c ká»³ linh hoáº¡t, cÃ³ thá»ƒ lÃ m viá»‡c vá»›i *nhiá»u kiá»ƒu dá»¯ liá»‡u khÃ¡c nhau* mÃ  váº«n giá»¯ Ä‘Æ°á»£c sá»± an toÃ n vÃ  máº¡nh máº½ cá»§a chÆ°Æ¡ng trÃ¬nh.

HÃ£y cÃ¹ng tÃ¬m hiá»ƒu xem lÃ m tháº¿ nÃ o Ä‘á»ƒ xÃ¢y dá»±ng nhá»¯ng chiáº¿c "há»™p Ä‘a nÄƒng" nÃ y nhÃ©!
    ```java
    // Generic class with type parameter T
    class Box<T> {
        private T content;
        
        public void set(T content) {
            this.content = content;
        }
        
        public T get() {
            return content;
        }
    }

    // Multiple type parameters
    class Pair<K, V> {
        private K key;
        private V value;
        
        public Pair(K key, V value) {
            this.key = key;
            this.value = value;
        }
        
        public K getKey() { return key; }
        public V getValue() { return value; }
    }
    ```

    **PhÆ°Æ¡ng thá»©c Generic: Khi cÃ¡c phÆ°Æ¡ng thá»©c lÃ m viá»‡c vá»›i Má»ŒI KIá»‚U dá»¯ liá»‡u!**
    ```java
    class Utilities {
        // Generic method
        public static <T> void printArray(T[] array) {
            for (T element : array) {
                System.out.print(element + " ");
            }
            System.out.println();
        }
        
        // Generic method with return type
        public static <T> T getFirst(List<T> list) {
            return list.isEmpty() ? null : list.get(0);
        }
        
        // Multiple type parameters
        public static <K, V> V getValue(Map<K, V> map, K key) {
            return map.get(key);
        }
    }
    ```

    **Giá»›i háº¡n cÃ¡c Tham sá»‘ kiá»ƒu:**
    ```java
    // Upper bound - T must extend Number
    class NumberBox<T extends Number> {
        private T number;
        
        public NumberBox(T number) {
            this.number = number;
        }
        
        public double doubleValue() {
            return number.doubleValue();
        }
    }

    // Multiple bounds
    class MultiBound<T extends Number & Comparable<T>> {
        private T value;
        
        public int compareTo(T other) {
            return value.compareTo(other);
        }
    }
    ```

    **KÃ½ tá»± Ä‘áº¡i diá»‡n: Sáºµn sÃ ng cho sá»± linh hoáº¡t chÆ°a?**
    ```java
    class WildcardDemo {
        // Unbounded wildcard
        public static void printList(List<?> list) {
            for (Object item : list) {
                System.out.println(item);
            }
        }
        
        // Upper bounded wildcard (read-only)
        public static double sumNumbers(List<? extends Number> list) {
            double sum = 0;
            for (Number n : list) {
                sum += n.doubleValue();
            }
            return sum;
        }
        
        // Lower bounded wildcard (write-only)
        public static void addIntegers(List<? super Integer> list) {
            list.add(1);
            list.add(2);
            list.add(3);
        }
    }
    ```

    **VÃ­ dá»¥ cÃ¡ch dÃ¹ng nÃ¨:**
    ```java
    public class GenericsDemo {
        public static void main(String[] args) {
            // Generic class usage
            Box<String> stringBox = new Box<>();
            stringBox.set("Hello");
            String str = stringBox.get();  // No cast needed
            
            Box<Integer> intBox = new Box<>();
            intBox.set(100);
            int num = intBox.get();
            
            // Pair
            Pair<String, Integer> pair = new Pair<>("Age", 25);
            System.out.println(pair.getKey() + ": " + pair.getValue());
            
            // Generic method
            Integer[] intArray = {1, 2, 3, 4, 5};
            String[] strArray = {"A", "B", "C"};
            Utilities.printArray(intArray);
            Utilities.printArray(strArray);
            
            // Bounded type
            NumberBox<Integer> numBox = new NumberBox<>(42);
            System.out.println("Double value: " + numBox.doubleValue());
        }
    }
    ```

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**

61. ### Type Erasure trong Generics Java: Rá»‘t cuá»™c nÃ³ lÃ  cÃ¡i gÃ¬ váº­y ta?

    NÃ y báº¡n, báº¡n cÃ³ bao giá» tá»± há»i Ä‘iá»u gÃ¬ xáº£y ra vá»›i táº¥t cáº£ nhá»¯ng kiá»ƒu "sang cháº£nh" nhÆ° `List<String>` hay `Box<T>` khi mÃ£ Java cá»§a báº¡n biáº¿n thÃ nh bytecode khÃ´ng?
ThÃ´i Ä‘Æ°á»£c rá»“i, hÃ£y sáºµn sÃ ng cho má»™t "mÃ n áº£o thuáº­t" nhá» gá»i lÃ  **XÃ³a kiá»ƒu (Type Erasure)** nhÃ©!

ÄÃ¢y lÃ  váº¥n Ä‘á»:
Khi trÃ¬nh biÃªn dá»‹ch Java Ä‘ang báº­n rá»™n biáº¿n cÃ¡c file `.java` cá»§a báº¡n thÃ nh file `.class` (Ä‘Ã¢y chÃ­nh lÃ  'quÃ¡ trÃ¬nh biÃªn dá»‹ch'), nÃ³ lÃ m má»™t Ä‘iá»u khÃ¡ tinh vi.
NÃ³ theo Ä‘Ãºng nghÄ©a Ä‘en lÃ  **xÃ³a bá» táº¥t cáº£ thÃ´ng tin kiá»ƒu tá»•ng quÃ¡t Ä‘Ã³**! Biáº¿n máº¥t! Háº¿t sáº¡ch!

Váº­y nÃªn, `List<String>` cá»§a báº¡n? NÃ³ chá»‰ cÃ²n lÃ  má»™t `List` bÃ¬nh thÆ°á»ng. `Box<T>` cá»§a báº¡n? NÃ³ trá»Ÿ thÃ nh má»™t `Box` chá»©a cÃ¡c Ä‘á»‘i tÆ°á»£ng `Object`.

*   **CÃ¡i gÃ¬ Ä‘Æ°á»£c thay tháº¿?** CÃ¡c tham sá»‘ kiá»ƒu tá»•ng quÃ¡t Ä‘Ã³ (nhÆ° `String` trong `List<String>` hay `T` trong `Box<T>`) sáº½ Ä‘Æ°á»£c hoÃ¡n Ä‘á»•i.
    *   Náº¿u báº¡n Ä‘áº·t má»™t 'giá»›i háº¡n' (kiá»ƒu nhÆ° `<T extends Number>`), chÃºng sáº½ Ä‘Æ°á»£c thay tháº¿ báº±ng chÃ­nh giá»›i háº¡n Ä‘Ã³ (vÃ­ dá»¥, `Number`).
    *   Náº¿u khÃ´ng cÃ³ giá»›i háº¡n nÃ o, chÃºng chá»‰ Ä‘Æ¡n giáº£n trá»Ÿ thÃ nh `Object`.
*   **Tháº¿ cÃ²n sá»± an toÃ n thÃ¬ sao?** Äá»«ng lo láº¯ng, Java luÃ´n "chá»‘ng lÆ°ng" cho báº¡n! Äá»ƒ Ä‘áº£m báº£o má»i thá»© váº«n hoáº¡t Ä‘á»™ng Ä‘Ãºng vÃ  an toÃ n, trÃ¬nh biÃªn dá»‹ch sáº½ **thÃªm vÃ o cÃ¡c thao tÃ¡c Ã©p kiá»ƒu (type casts) Ä‘áº·c biá»‡t** á»Ÿ báº¥t cá»© Ä‘Ã¢u cáº§n thiáº¿t. Giá»‘ng nhÆ° viá»‡c thÃªm vÃ o nhá»¯ng chá»‰ dáº«n nhá» Ä‘á»ƒ Ä‘áº£m báº£o báº¡n láº¥y ra Ä‘Ãºng kiá»ƒu dá»¯ liá»‡u sau nÃ y váº­y.

Váº­y tÃ³m láº¡i: CÃ¡c kiá»ƒu tá»•ng quÃ¡t ráº¥t tuyá»‡t vá»i khi báº¡n viáº¿t mÃ£, nhÆ°ng Ä‘áº¿n lÃºc mÃ£ cá»§a báº¡n cháº¡y, chÃºng Ä‘Ã£ bá»‹ 'xÃ³a bá»' vÃ  thay tháº¿ báº±ng cÃ¡c kiá»ƒu cÆ¡ báº£n hÆ¡n, kÃ¨m theo cÃ¡c lá»‡nh Ã©p kiá»ƒu Ä‘á»ƒ giá»¯ má»i thá»© an toÃ n!

    **CÃ¡ch Type Erasure Hoáº¡t Äá»™ng:**

    ```java
    // Before compilation (source code)
    public class Box<T> {
        private T content;
        
        public void set(T content) {
            this.content = content;
        }
        
        public T get() {
            return content;
        }
    }

    // After type erasure (bytecode equivalent)
    public class Box {
        private Object content;
        
        public void set(Object content) {
            this.content = content;
        }
        
        public Object get() {
            return content;
        }
    }
    ```

    **Type Erasure: Khi kiá»ƒu cÃ³ 'giá»›i háº¡n' thÃ¬ sao nhá»‰? (Bounded Type Erasure)**
    ```java
    // Before erasure
    public class NumberBox<T extends Number> {
        private T number;
        
        public double getValue() {
            return number.doubleValue();
        }
    }

    // After erasure - T replaced with Number (its bound)
    public class NumberBox {
        private Number number;
        
        public double getValue() {
            return number.doubleValue();
        }
    }
    ```

    **PhÆ°Æ¡ng thá»©c Bridge: CÃ¹ng tÃ¬m hiá»ƒu nhÃ©!**
    TrÃ¬nh biÃªn dá»‹ch cá»§a Java sáº½ tá»± Ä‘á»™ng táº¡o ra nhá»¯ng phÆ°Æ¡ng thá»©c Ä‘áº·c biá»‡t, mÃ¬nh gá»i lÃ  'phÆ°Æ¡ng thá»©c cáº§u ná»‘i' (bridge methods) Ä‘Ã³. Táº¡i sao Æ°? Äá»ƒ Ä‘áº£m báº£o tÃ­nh Ä‘a hÃ¬nh (polymorphism) cá»§a báº¡n váº«n hoáº¡t Ä‘á»™ng ngon lÃ nh cÃ nh Ä‘Ã o:

    ```java
    class Node<T> {
        public T data;
        
        public void setData(T data) {
            this.data = data;
        }
    }

    class IntegerNode extends Node<Integer> {
        @Override
        public void setData(Integer data) {
            System.out.println("IntegerNode.setData");
            super.setData(data);
        }
    }

    // Compiler generates bridge method:
    // public void setData(Object data) {
    //     setData((Integer) data);  // Calls the actual method
    // }
    ```

    **XÃ³a kiá»ƒu: Váº­y thÃ¬, Ä‘iá»u nÃ y áº£nh hÆ°á»Ÿng Ä‘áº¿n chÃºng ta nhÆ° tháº¿ nÃ o?**

    ```java
    public class TypeErasureDemo {
        public static void main(String[] args) {
            // 1. Cannot create instances of type parameters
            // T obj = new T();  // Compile error
            
            // 2. Cannot create arrays of parameterized types
            // List<String>[] array = new List<String>[10];  // Compile error
            List<?>[] array = new List<?>[10];  // OK with wildcard
            
            // 3. Cannot use instanceof with parameterized types
            List<String> list = new ArrayList<>();
            // if (list instanceof ArrayList<String>) {}  // Compile error
            if (list instanceof ArrayList<?>) {}  // OK with wildcard
            
            // 4. Runtime type is same regardless of type parameter
            List<String> stringList = new ArrayList<>();
            List<Integer> intList = new ArrayList<>();
            System.out.println(stringList.getClass() == intList.getClass());  // true
            
            // 5. Cannot overload methods that have same erasure
            // void process(List<String> list) {}
            // void process(List<Integer> list) {}  // Compile error - same erasure
        }
        
        // Workaround: Use Class<T> for runtime type information
        public static <T> T createInstance(Class<T> clazz) throws Exception {
            return clazz.getDeclaredConstructor().newInstance();
        }
    }
    ```

    **NÃ y, nhÆ°ng mÃ ... táº¡i sao láº¡i pháº£i cÃ³ 'Type Erasure' cÆ¡ chá»©?**
    - TÆ°Æ¡ng thÃ­ch ngÆ°á»£c vá»›i code cÅ© (trÆ°á»›c Generics)

NÃ y báº¡n, báº¡n cÃ³ biáº¿t Java Ä‘Ã£ cÃ³ má»™t sá»± thay Ä‘á»•i lá»›n khÃ´ng? ÄÃ³ lÃ  khi 'Generics' xuáº¥t hiá»‡n!
TrÆ°á»›c Java 5, chÃºng ta khÃ´ng cÃ³ Generics. Sau Java 5, Generics Ä‘Ã£ cÃ³ máº·t.
Tháº¿ nhÆ°ng, Ä‘iá»u gÃ¬ sáº½ xáº£y ra vá»›i táº¥t cáº£ nhá»¯ng Ä‘oáº¡n code cÅ© mÃ  báº¡n Ä‘Ã£ viáº¿t? Nhá»¯ng Ä‘oáº¡n code 'tiá»n sá»­' Ä‘Ã³, trÆ°á»›c khi Generics ra Ä‘á»i?
Äá»«ng lo! Java Ä‘Ã£ cá»±c ká»³ thÃ´ng minh. NÃ³ cÃ³ má»™t tÃ­nh nÄƒng gá»i lÃ  **tÆ°Æ¡ng thÃ­ch ngÆ°á»£c**.
NghÄ©a lÃ , dÃ¹ báº¡n cÃ³ code cÅ© (chÆ°a dÃ¹ng Generics) hay code má»›i (Ä‘Ã£ dÃ¹ng Generics), chÃºng váº«n cÃ³ thá»ƒ 'lÃ m viá»‡c' cÃ¹ng nhau.
Java Ä‘áº£m báº£o ráº±ng code cÅ© cá»§a báº¡n sáº½ khÃ´ng bá»‹ 'há»ng' khi báº¡n báº¯t Ä‘áº§u dÃ¹ng Generics Ä‘Ã¢u nhÃ©!
    - KhÃ´ng cáº§n thÃªm cÃ¡c lá»‡nh bytecode má»›i Ä‘Ã¢u nhÃ©.
    - NÃ y, báº¡n biáº¿t khÃ´ng?

CÃ¡i nÃ y siÃªu "tiáº¿t kiá»‡m" bá»™ nhá»› cá»§a mÃ¡y tÃ­nh Ä‘Ã³!

LÃ½ do lÃ  gÃ¬ Æ°? ÄÆ¡n giáº£n thÃ´i!

NÃ³ khÃ´ng cáº§n pháº£i mang theo hay "nhá»›" nhá»¯ng thÃ´ng tin vá» kiá»ƒu dá»¯ liá»‡u cá»§a cÃ¡c Ä‘á»‘i tÆ°á»£ng *khi chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y* Ä‘Ã¢u.

Kiá»ƒu nhÆ° nÃ³ khÃ´ng cáº§n má»™t cÃ¡i "tháº» cÄƒn cÆ°á»›c" cho má»—i thá»© lÃºc Ä‘ang lÃ m viá»‡c váº­y.

VÃ¬ tháº¿, nÃ³ nháº¹ báº«ng vÃ  khÃ´ng chiáº¿m nhiá»u khÃ´ng gian trong bá»™ nhá»› chÃºt nÃ o!

    **Nhá»¯ng Ä‘iá»u cáº§n lÆ°u Ã½ (hay cÃ²n gá»i lÃ  'háº¡n cháº¿' Ä‘Ã³!)**
    - Báº¡n tháº¥y Ä‘áº¥y, khi báº¡n dÃ¹ng cÃ¡c kiá»ƒu tá»•ng quÃ¡t (generic types) nhÆ° `List<String>` hay `Map<Integer, String>` khÃ´ng?

ChÃºng ráº¥t tuyá»‡t vá»i Ä‘á»ƒ giÃºp trÃ¬nh biÃªn dá»‹ch (compiler) kiá»ƒm tra lá»—i cho báº¡n *trÆ°á»›c khi* chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n cháº¡y Ä‘Ã³. NÃ³ Ä‘áº£m báº£o báº¡n khÃ´ng nhÃ©t nháº§m má»™t sá»‘ vÃ o danh sÃ¡ch chuá»—i cháº³ng háº¡n.

NhÆ°ng cÃ³ má»™t Ä‘iá»u thÃº vá»‹ (vÃ  Ä‘Ã´i khi hÆ¡i 'xoáº¯n nÃ£o' má»™t chÃºt) lÃ ...

Khi chÆ°Æ¡ng trÃ¬nh cá»§a báº¡n *thá»±c sá»± cháº¡y* (chÃºng ta gá»i lÃ  'runtime' Ä‘Ã³), Java sáº½ lÃ m má»™t viá»‡c gá»i lÃ  "xÃ³a kiá»ƒu" (type erasure).

NÃ³ sáº½ "xÃ³a bá»" thÃ´ng tin vá» kiá»ƒu cá»¥ thá»ƒ bÃªn trong dáº¥u ngoáº·c nhá»n `<...>` Ä‘i.

*   VÃ­ dá»¥: `List<String>` sáº½ biáº¿n thÃ nh `List` Ä‘Æ¡n thuáº§n.
*   `Map<Integer, String>` sáº½ biáº¿n thÃ nh `Map` Ä‘Æ¡n thuáº§n.

Váº­y nÃªn, *lÃºc chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y*, Java khÃ´ng thá»ƒ "nhá»›" Ä‘Æ°á»£c kiá»ƒu cá»¥ thá»ƒ mÃ  báº¡n Ä‘Ã£ Ä‘á»‹nh nghÄ©a ban Ä‘áº§u lÃ  gÃ¬ (nhÆ° `String` hay `Integer`).

NÃ³i cÃ¡ch khÃ¡c, **khÃ´ng thá»ƒ xÃ¡c Ä‘á»‹nh kiá»ƒu tá»•ng quÃ¡t (generic type) khi chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y (at runtime)**.
    - KhÃ´ng thá»ƒ táº¡o cÃ¡c máº£ng kiá»ƒu chung (generic arrays) Ä‘Ã¢u nha!
    - NÃ y báº¡n Æ¡i! Báº¡n Ä‘Ã£ bao giá» thá»­ lÃ m Ä‘iá»u gÃ¬ Ä‘Ã³ nhÆ° tháº¿ nÃ y vá»›i cÃ¡c kiá»ƒu dá»¯ liá»‡u generic siÃªu ngáº§u cá»§a mÃ¬nh chÆ°a?

```java
List<int> myList;
```

Hoáº·c cÃ³ thá»ƒ lÃ :

```java
MyGenericClass<boolean> myData;
```

á»i! Java sáº½ "giáº­n dá»—i" má»™t chÃºt ngay táº¡i Ä‘Ã³ Ä‘áº¥y. Báº¡n tháº¥y Ä‘Ã³, khi báº¡n sá»­ dá»¥ng nhá»¯ng 'tham sá»‘ kiá»ƒu' (type parameters) xá»‹n sÃ² kia (nhÆ° chá»¯ `T` trong `List<T>`), Java mong Ä‘á»£i má»™t *kiá»ƒu Ä‘á»‘i tÆ°á»£ng* thá»±c sá»± sáº½ Ä‘Æ°á»£c Ä‘áº·t vÃ o Ä‘Ã³.

NhÆ°ng `int` Æ°? `boolean` Æ°? `double` Æ°? ChÃºng ta gá»i nhá»¯ng thá»© Ä‘Ã³ lÃ  'kiá»ƒu nguyÃªn thá»§y' (primitives). ChÃºng khÃ´ng pháº£i lÃ  cÃ¡c Ä‘á»‘i tÆ°á»£ng "Ä‘áº§y Ä‘á»§ chá»©c nÄƒng". ChÃºng chá»‰ lÃ  nhá»¯ng giÃ¡ trá»‹ thÃ´ thÃ´i.

VÃ¬ váº­y, báº¡n khÃ´ng thá»ƒ nhÃ©t trá»±c tiáº¿p má»™t kiá»ƒu nguyÃªn thá»§y vÃ o tham sá»‘ kiá»ƒu Ä‘Æ°á»£c. KhÃ´ng Ä‘Æ°á»£c Ä‘Ã¢u nhÃ©!

Váº­y lÃ m tháº¿ nÃ o Ä‘Ã¢y? Äá»«ng lo, Java luÃ´n "háº­u thuáº«n" báº¡n! Náº¿u báº¡n cáº§n lÆ°u trá»¯ cÃ¡c giÃ¡ trá»‹ `int` trong má»™t danh sÃ¡ch generic, báº¡n chá»‰ cáº§n sá»­ dá»¥ng ngÆ°á»i báº¡n "Ä‘Ã³ng gÃ³i" (wrapper) cá»§a nÃ³ lÃ  `Integer`. Kiá»ƒu nhÆ° tháº¿ nÃ y:

```java
List<Integer> myList;
```

Tháº¥y chÆ°a? TÆ°Æ¡ng tá»± vá»›i `boolean` (dÃ¹ng `Boolean`), `double` (dÃ¹ng `Double`), vÃ  táº¥t cáº£ cÃ¡c kiá»ƒu nguyÃªn thá»§y khÃ¡c. Báº¡n luÃ´n cáº§n phiÃªn báº£n "kiá»ƒu Ä‘á»‘i tÆ°á»£ng" cá»§a chÃºng khi lÃ m viá»‡c vá»›i cÃ¡c tham sá»‘ kiá»ƒu Ä‘áº¥y!
    - KhÃ´ng thá»ƒ báº¯t (catch) hoáº·c nÃ©m (throw) cÃ¡c ngoáº¡i lá»‡ (exceptions) kiá»ƒu generic

NÃ y báº¡n! ChÃºng ta Ä‘Ã£ biáº¿t vá» `Exception` vÃ  `Generics` rá»“i Ä‘Ãºng khÃ´ng? Cáº£ hai Ä‘á»u cá»±c ká»³ há»¯u Ã­ch trong Java.

`Generics` giÃºp chÃºng ta viáº¿t code linh hoáº¡t vÃ  an toÃ n hÆ¡n vá» kiá»ƒu dá»¯ liá»‡u (type-safe). CÃ²n `Exception` thÃ¬ giÃºp chÃºng ta xá»­ lÃ½ cÃ¡c tÃ¬nh huá»‘ng báº¥t ngá» xáº£y ra khi chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y.

NhÆ°ng mÃ , cÃ³ má»™t quy táº¯c cá»±c ká»³ quan trá»ng mÃ  báº¡n **KHÃ”NG THá»‚** phÃ¡ vá»¡ khi dÃ¹ng `Exception` vÃ  `Generics` chung vá»›i nhau.

ÄÃ³ lÃ :

**Báº¡n khÃ´ng thá»ƒ khai bÃ¡o má»™t `Exception` lÃ  kiá»ƒu generic, rá»“i sau Ä‘Ã³ dÃ¹ng nÃ³ Ä‘á»ƒ `catch` (báº¯t) hoáº·c `throw` (nÃ©m) lá»—i.**

Nghe hÆ¡i khÃ³ hiá»ƒu Ä‘Ãºng khÃ´ng? Äá»ƒ mÃ¬nh giáº£i thÃ­ch nhÃ©.

HÃ£y tÆ°á»Ÿng tÆ°á»£ng báº¡n muá»‘n táº¡o má»™t `Exception` cá»§a riÃªng mÃ¬nh, vÃ  báº¡n nghÄ©: "Hay mÃ¬nh lÃ m nÃ³ generic nhá»‰? Kiá»ƒu nhÆ° `MyGenericException<T>`."

```java
// NÃ y lÃ  KHÃ”NG Ä‘Æ°á»£c Ä‘Ã¢u nha!
class MyGenericException<T> extends Exception {
    // ...
}
```

Báº¡n cÅ©ng khÃ´ng thá»ƒ viáº¿t code kiá»ƒu nhÆ° tháº¿ nÃ y:

```java
public void doSomethingRisky() throws MyGenericException<String> { // Lá»—i biÃªn dá»‹ch!
    // ...
    throw new MyGenericException<String>("á»i giá»i Æ¡i!"); // Lá»—i biÃªn dá»‹ch!
}

public void anotherMethod() {
    try {
        doSomethingRisky();
    } catch (MyGenericException<Integer> e) { // Lá»—i biÃªn dá»‹ch!
        // ...
    }
}
```

Java sáº½ 'máº¯ng' báº¡n ngay láº­p tá»©c! Táº¡i sao váº­y?

Váº¥n Ä‘á» náº±m á»Ÿ chá»— "Type Erasure" (XÃ³a bá» kiá»ƒu) cá»§a Generics.

1.  **Khi báº¡n viáº¿t code vá»›i Generics:** Java sáº½ kiá»ƒm tra kiá»ƒu dá»¯ liá»‡u cho báº¡n khi biÃªn dá»‹ch (compile time) Ä‘á»ƒ Ä‘áº£m báº£o má»i thá»© an toÃ n.
2.  **Khi chÆ°Æ¡ng trÃ¬nh cháº¡y:** ThÃ´ng tin vá» cÃ¡c kiá»ƒu generic (nhÆ° `<T>`, `<String>`, `<Integer>`) sáº½ bá»‹ xÃ³a bá». Java chá»‰ cÃ²n nhá»› tÃªn lá»›p cÆ¡ báº£n thÃ´i.

Tá»©c lÃ , `MyGenericException<String>` vÃ  `MyGenericException<Integer>` khi cháº¡y sáº½ Ä‘á»u biáº¿n thÃ nh `MyGenericException` (kiá»ƒu "thÃ´" - raw type).

MÃ  `Exception` thÃ¬ láº¡i cáº§n pháº£i cÃ³ má»™t kiá»ƒu **cá»¥ thá»ƒ** Ä‘á»ƒ Java biáº¿t nÃ³ Ä‘ang xá»­ lÃ½ cÃ¡i lá»—i gÃ¬. NÃ³ khÃ´ng thá»ƒ xá»­ lÃ½ má»™t "lá»—i chung chung" mÃ  khÃ´ng biáº¿t kiá»ƒu lÃ  gÃ¬ Ä‘Æ°á»£c.

Náº¿u Java cho phÃ©p báº¡n báº¯t `MyGenericException<String>` vÃ  `MyGenericException<Integer>` trong cÃ¡c khá»‘i `catch` khÃ¡c nhau, thÃ¬ khi cháº¡y, nÃ³ sáº½ khÃ´ng thá»ƒ phÃ¢n biá»‡t Ä‘Æ°á»£c Ä‘Ã¢u lÃ  `MyGenericException<String>` vÃ  Ä‘Ã¢u lÃ  `MyGenericException<Integer>` vÃ¬ thÃ´ng tin kiá»ƒu Ä‘Ã£ bá»‹ xÃ³a rá»“i! Äiá»u nÃ y sáº½ gÃ¢y ra nháº§m láº«n lá»›n.

**Quy táº¯c vÃ ng á»Ÿ Ä‘Ã¢y lÃ  gÃ¬?**

`Exception` pháº£i luÃ´n lÃ  má»™t kiá»ƒu **cá»¥ thá»ƒ**, khÃ´ng pháº£i lÃ  kiá»ƒu generic. Generics chá»‰ giÃºp báº¡n an toÃ n vá» kiá»ƒu dá»¯ liá»‡u khi *biÃªn dá»‹ch* thÃ´i. Äáº¿n lÃºc cháº¡y, thÃ´ng tin vá» kiá»ƒu generic Ä‘Ã³ biáº¿n máº¥t rá»“i.

Váº­y nÃªn, náº¿u báº¡n muá»‘n táº¡o má»™t `Exception` cá»§a riÃªng mÃ¬nh, hÃ£y lÃ m nÃ³ *khÃ´ng* generic nhÃ©!

    **[â¬† Quay láº¡i Ä‘áº§u trang](#table-of-contents)**


<!-- Káº¾T THÃšC CÃC CÃ‚U Há»I -->
